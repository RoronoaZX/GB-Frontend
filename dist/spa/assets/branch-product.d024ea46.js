import{d as w,r as u,c as b,P as y,N as p}from"./index.86555a02.js";import{api as r}from"./axios.b83de87b.js";import{u as S}from"./product.960f1ac8.js";const C=w("branchProducts",()=>{const v=u(null),n=u([]),f=u([]),l=u([]),h=u([]),g=u(0),B=u([]),m=S(),P=b(()=>m.products);return console.log("Branch PRoductssss:",P.value),{branchId:f,branchProduct:v,branchProducts:n,sampleFetchPagination:h,totalFetch:g,branchSendAddedProd:l,fetchBranchProducts:async o=>{const e=await r.get(`/api/branches/${o}/products`);n.value=e.data},createBranchProducts:async o=>{y.show();try{const{category:e,price:s}=o,t=await r.post("/api/branch-products",o);if(t.data.message==="Branch product saved successfully"){const d=P.value.find(i=>i.id===o.product_id),a={...t.data,category:e||"No Category",price:s?parseInt(s):0,product:d||{name:"No Product",category:"Unknown"},total_quantity:o.total_quantity};n.value.unshift(a),p.create({type:"positive",message:"Branch product saved successfully",position:"top"})}else t.data.message==="The product already exists in this branch."&&p.create({type:"warning",message:"The product already exists in this branch.",position:"top"})}catch{p.create({type:"negative",message:"An error occurred while saving the branch product.",position:"top"})}finally{y.hide()}},updateBranchProductPrice:async o=>{await r.put(`/api/update-branch-products/${o}`,{price:newPrice});const e=n.value.findIndex(s=>s.id===o);e!==-1&&(n.value[e].price=newPrice)},deleteBranchProducts:async o=>{await r.delete(`/api/branch-products/${o}`),n.value=n.value.filter(e=>e.id!==o)},searchBranchProducts:async({branches_id:o,query:e,category:s})=>{console.log("Branch ID:",o),console.log("Query:",e),console.log("Category:",s);try{const t=await r.post("/api/search-branch-products",{branches_id:o,query:e,category:s});n.value=t.data,console.log("Branch Products:",t.data)}catch(t){console.log("Error:",t)}},sampleFetchPaginationProducts:async({page:o,rowsPerPage:e,branchId:s})=>{console.log("Page:",o),console.log("RowsPerPage:",e),console.log("Branch ID:",s);try{const t=await r.get(`/api/sample-fetch-pagination-branch-products?page=${o}&rowsPerPage=${e}&branchId=${s}`);h.value=t.data.data,console.log("Sample Fetch Pagination:",t.data.data),g.value=t.data.total,console.log("Total Fetch:",t.data.total)}catch(t){console.log("Error:",t)}},sendProductsToBranch:async o=>{var e,s,t,d,a,i;try{const c=await r.post("/api/added-branch-products",o);return console.log("Responsssssse:",c.data),{success:!0,status:c.status,data:c.data}}catch(c){return console.log("Error:",c),{success:!1,status:((e=c.response)==null?void 0:e.status)||500,message:((t=(s=c.response)==null?void 0:s.data)==null?void 0:t.message)||c.message||"Something went wrong",errors:((i=(a=(d=c.response)==null?void 0:d.data)==null?void 0:a.errors)==null?void 0:i.stock)||null}}},fetchSendAddedBranchProducts:async(o,e,s,t,d)=>{console.log("Datassss:",o,e,s,t);try{const a=await r.get(`/api/send-added-branch-products/${e}/${o}`,{params:{page:s,per_page:t,search:d}});console.log("Response:",a.data),l.value=a.data,console.log("branchSendAddedProd.value:",l.value)}catch(a){console.log("Error:",a)}},receivedSendBranchProducts:async o=>{console.log("Datassa:",o);try{const e=await r.post("/api/received-branch-product",o);if(B.value=e.data,console.log("Received Branch Products:",e.data),e.status===200){const s=l.value.findIndex(t=>t.id===o.id);s!==-1&&(l.value[s].status="confirmed")}return e}catch(e){throw console.log("Error:",e),e}}}});export{C as u};
