import{d as p,N as a,P as i}from"./index.b718e17f.js";import{api as s}from"./axios.ed722b83.js";const d=p("bakerReportsStore",{state:()=>({recipes:{},reportToView:[],reports:[],rawmaterials:[],user:{}}),actions:{setRecipe(e){this.recipes=e},setReport(e){this.reports.push(e)},removeReport(e){this.reports.splice(e,1)},setUser(e){this.user=e},clearData(){this.recipes={},this.reports=[]},async fetchBranchRawMaterials(e){const r=await s.get(`/api/branch/${e}/rawMaterials`);this.rawmaterials=r.data},async fetchBakerReport(e,r,t){try{return(await s.get(`/api/branch/${e}/bakerReport`+window.location.search,{params:{page:r,per_page:t}})).data}catch(o){console.error("Error fetching baker reports:",o)}},async fetchAllReports(){const e=await s.get("/api/initial-baker-report");this.reportToView=e.data},async fetchDoughReports(e){const r=await s.get(`/api/branch/${e}/bakerDoughReport`);console.log("===================================="),console.log("response",r.data),console.log("===================================="),this.reports=r.data},async adminAddRecipebakerReport(e){console.log("data admin send RecipebakerReport adding ",e);try{const r=await s.post("/api/admin-create-admin-insert-recipe-baker-report",{reports:e});a.create({type:"positive",message:"Report successfully send",timeout:1e3})}catch(r){console.log(r)}},async adminBakerCreateReports(e){console.log("data admin send",e);try{console.log("data admin to send:",this.reports);const r=await s.post("/api/admin-create-baker-report",{reports:e});a.create({type:"positive",message:"Report successfully send",timeout:1e3}),this.reports=[]}catch(r){console.log(r)}},async createReports(){try{console.log("data to send:",this.reports),i.show();const e=await s.post("/api/initial-baker-report",{reports:this.reports});a.create({type:"positive",message:"Report successfully send",timeout:1e3}),console.log("Reports to be saved:",this.reports),this.reports=[]}catch(e){console.error("Error saving report:",e),a.create({type:"negative",message:"Error sending report",timeout:1e3})}finally{i.hide()}},async confirmReport(e){try{const r=await s.post(`/api/confirm-initial-baker-report/${e}`);if(console.log("Confirming report with ID:",e),r.status===200){const t=this.reports.findIndex(o=>o.id===e);t!==-1&&this.reports.splice(t,1)}return r.data}catch(r){throw console.error("Error confirming report:",r),r}},async declineReport(e,r){try{const t=await s.post(`/api/decline-initial-baker-report/${e}`,{remark:r});if(t.status===200){const o=this.reports.findIndex(n=>n.id===e);o!==-1&&this.reports.splice(o,1)}return t.data}catch(t){console.error("Error declining report:",t)}}}});export{d as u};
