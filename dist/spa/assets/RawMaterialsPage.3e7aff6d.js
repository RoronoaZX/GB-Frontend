import{Q as k}from"./QBadge.2dc625c4.js";import{r as f,t as O,o as g,a3 as q,f as e,M as p,w as a,Q as E,I as y,ae as x,a1 as F,aI as W,J as o,K as R,aJ as z,a2 as B,a4 as U,O as I,R as D,a0 as A,N as X,c as j,z as Y,u as Z,L,e as G,$ as P,aK as N}from"./index.ca72f247.js";import{Q as ee}from"./QPage.c5c8524f.js";import{Q as J}from"./QSpace.888473d1.js";import{Q as S}from"./QSelect.a1c4ed00.js";import{Q as ae}from"./QForm.06549fa2.js";import{C as V}from"./ClosePopup.77864f63.js";import{u as T}from"./raw-material.596a4eea.js";import{_ as C}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as te}from"./QSpinnerDots.f3b67178.js";import{Q as $,a as le}from"./QTable.6ef48ae6.js";import{Q as K}from"./QTooltip.3e12865c.js";import{t as oe}from"./typography-format.6bffeec7.js";import{b as se}from"./badge-color.f568cd69.js";import"./QChip.ead5e565.js";import"./QMenu.a8d5f7aa.js";import"./position-engine.a63ef796.js";import"./selection.66bddd9a.js";import"./use-virtual-scroll.645c1690.js";import"./rtl.276c3f1b.js";import"./axios.0019c736.js";import"./QVirtualScroll.eb023b79.js";import"./QList.7330d34c.js";import"./date.7612c2b8.js";const ne=n=>(I("data-v-a71a0292"),n=n(),D(),n),ie=ne(()=>o("div",{class:"text-h5 q-mr-md"},"\u{1F6E0}\uFE0F Add Raw Materials",-1)),re={class:"q-mt-lg q-animated q-animate-bounce"},de={class:"q-mt-md q-animated q-animate-bounce"},ue={class:"q-mt-md q-animated q-animate-bounce"},ce={class:"q-mt-md q-animated q-animate-bounce"},me={__name:"RawMaterialsCreate",setup(n){const w=T(),d=f(!1),b=["Ingredients","Packaging Materials"],h=["Grams","Pcs"],c=f(!1),i=()=>{d.value=!0},l=O({name:"",code:"",category:null,unit:null}),_=async()=>{c.value=!0;try{const r=await w.createRawMaterials(l);console.log(r),d.value=!1,m()}catch(r){console.error(r),c.value=!1,d.value=!0}finally{c.value=!1}},m=()=>{l.name="",l.code="",l.category=null,l.unit=null};return(r,t)=>(g(),q(U,null,[e(p,{class:"q-pa-sm btn-add",outline:"",dense:"",elevated:"",icon:"add_circle",label:"Add Raw Materials",onClick:i,size:"md",color:"dark"}),e(B,{modelValue:d.value,"onUpdate:modelValue":t[4]||(t[4]=s=>d.value=s),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:a(()=>[e(E,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:a(()=>[e(y,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:a(()=>[ie,e(J),x(e(p,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},null,512),[[V]])]),_:1}),e(F,{class:"separator-gradient"}),e(y,{class:"q-px-xl q-pt-none q-pb-lg"},{default:a(()=>[e(ae,{onSubmit:W(_,["prevent"])},{default:a(()=>[o("div",re,[e(R,{class:"text-capitalize",modelValue:l.name,"onUpdate:modelValue":t[0]||(t[0]=s=>l.name=s),outlined:"",dense:"",label:"Raw Materials Name",rules:[s=>s&&s.length>0||"Name is required"]},null,8,["modelValue","rules"])]),o("div",de,[e(R,{modelValue:l.code,"onUpdate:modelValue":t[1]||(t[1]=s=>l.code=s),outlined:"",dense:"",label:"Raw Materials Code",mask:"##-AAAAAAAAAAAAAAAAAAAAA",placeholder:"00-SAMPLE",rules:[s=>s&&s.length>0||"Code is required"]},null,8,["modelValue","rules"])]),o("div",ue,[e(S,{modelValue:l.category,"onUpdate:modelValue":t[2]||(t[2]=s=>l.category=s),options:b,label:"Category","hide-dropdown-icon":"",outlined:"",dense:"",behavior:"menu",rules:[s=>s&&s.length>0||"Category is required"]},null,8,["modelValue","rules"])]),o("div",ce,[e(S,{modelValue:l.unit,"onUpdate:modelValue":t[3]||(t[3]=s=>l.unit=s),options:h,label:"Unit","hide-dropdown-icon":"",outlined:"",dense:"",behavior:"menu",rules:[s=>s&&s.length>0||"Unit is required"]},null,8,["modelValue","rules"])]),e(z,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:a(()=>[x(e(p,{class:"btn-cancel glossy",color:"negative",label:"Cancel"},null,512),[[V]]),e(p,{type:"submit",class:"btn-create glossy",color:"positive",label:"Create",loading:c.value},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var pe=C(me,[["__scopeId","data-v-a71a0292"]]);const Q=n=>(I("data-v-25e52251"),n=n(),D(),n),_e=Q(()=>o("div",{class:"text-h5 q-mr-md"},"\u{1F6E0}\uFE0F Edit Raw Materials",-1)),ge={class:"q-animated q-animate-bounce"},we=Q(()=>o("div",{class:"q-my-sm"},"Raw Materials Name",-1)),ve={class:"q-animated q-animate-bounce"},fe=Q(()=>o("div",{class:"q-my-sm"},"Raw Materials Code",-1)),ye={class:"q-animated q-animate-bounce"},be=Q(()=>o("div",{class:"q-my-sm"},"Category",-1)),he={class:"q-mt-md"},qe={class:"q-animated q-animate-bounce"},Me=Q(()=>o("div",{class:"q-my-sm"},"Unit",-1)),Ae={class:"q-mt-md"},xe={__name:"RawMaterialsTableEdit",props:["edit"],setup(n){const w=T(),d=f(!1),b=["Ingredients","Packaging Materials"],h=["Grams","Pcs"],c=n,i=O({name:"",code:"",category:null,unit:null}),l=()=>{const m=Object.assign(i,c.edit.row);d.value=!0,console.log("editRawMaterials",m)},_=async()=>{try{const m={...c.edit.row,...i};await w.updateRawMaterials(c.edit.row.id,m),d.value=!1}catch(m){console.error("Failed to update ingredient:",m)}};return(m,r)=>(g(),q(U,null,[e(p,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:"",onClick:l},{default:a(()=>[e(K,{class:"bg-positive",delay:200},{default:a(()=>[A("Edit")]),_:1})]),_:1}),e(B,{modelValue:d.value,"onUpdate:modelValue":r[4]||(r[4]=t=>d.value=t),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:a(()=>[e(E,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:a(()=>[e(y,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:a(()=>[_e,e(J),x(e(p,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},null,512),[[V]])]),_:1}),e(F),e(y,{class:"q-my-md q-mx-md q-gutter-y-md"},{default:a(()=>[o("div",ge,[we,e(R,{modelValue:i.name,"onUpdate:modelValue":r[0]||(r[0]=t=>i.name=t),outlined:"",dense:""},null,8,["modelValue"])]),o("div",ve,[fe,e(R,{modelValue:i.code,"onUpdate:modelValue":r[1]||(r[1]=t=>i.code=t),outlined:"",dense:"",rules:[t=>t&&t.length>0],mask:"##-AAAAAAAAAAAAAAAAAAAAA",placeholder:"00-SAMPLE"},null,8,["modelValue","rules"])]),o("div",ye,[be,o("div",he,[e(S,{modelValue:i.category,"onUpdate:modelValue":r[2]||(r[2]=t=>i.category=t),options:b,"hide-dropdown-icon":"",outlined:"",dense:"",behavior:"menu",rules:[t=>t&&t.length>0]},null,8,["modelValue","rules"])])]),o("div",qe,[Me,o("div",Ae,[e(S,{modelValue:i.unit,"onUpdate:modelValue":r[3]||(r[3]=t=>i.unit=t),options:h,"hide-dropdown-icon":"",outlined:"",dense:"",behavior:"menu"},null,8,["modelValue"])])])]),_:1}),e(z,{class:"row q-ma-md",align:"right"},{default:a(()=>[x(e(p,{class:"btn-cancel glossy",color:"negative",label:"Cancel"},null,512),[[V]]),e(p,{class:"btn-create glossy",color:"positive",label:"Save",loading:m.loading,onClick:_},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Re=C(xe,[["__scopeId","data-v-25e52251"]]);const H=n=>(I("data-v-1f06c38a"),n=n(),D(),n),Ve=H(()=>o("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),Ce=H(()=>o("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),Qe={__name:"RawMaterialsTableDelete",props:["delete"],setup(n){const w=T(),d=f(!1),b=()=>{d.value=!0},c=n.delete.row,i=async()=>{try{await w.deleteRawMaterials(c.id)}catch(l){X.create({message:`Failed to delete item: ${l.message}`,type:"negative"})}d.value=!1};return(l,_)=>(g(),q(U,null,[e(p,{onClick:b,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"","aria-label":"Delete"},{default:a(()=>[e(K,{class:"bg-negative",delay:200},{default:a(()=>[A("Delete")]),_:1})]),_:1}),e(B,{modelValue:d.value,"onUpdate:modelValue":_[0]||(_[0]=m=>d.value=m),persistent:""},{default:a(()=>[e(E,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:a(()=>[e(y,{class:"q-pt-none q-pb-sm"},{default:a(()=>[Ve,Ce]),_:1}),e(F,{class:"q-mb-md"}),e(z,{align:"right",class:"q-pt-none"},{default:a(()=>[x(e(p,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[V]]),e(p,{dense:"",label:"Delete",color:"negative",onClick:i,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var $e=C(Qe,[["__scopeId","data-v-1f06c38a"]]);const ke=n=>(I("data-v-9c1a04d0"),n=n(),D(),n),Se={align:"left"},Ue={key:0,class:"spinner-wrapper"},Ie={key:1},De={key:0,class:"data-error"},Te=ke(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Pe={class:"row justify-center q-gutter-x-md"},Ne={__name:"RawMaterialsTable",setup(n){const{capitalizeFirstLetter:w}=oe(),{getRawMaterialBadgeCategoryColor:d,getRawMaterialsBadgeUnitColor:b}=se(),h=T(),c=j(()=>h.rawMaterials),i=f(!0),l=f(""),_=f(!1),m=f({rowsPerPage:0}),r=j(()=>l.value?c.value.filter(v=>v.name.toLowerCase().includes(l.value.toLowerCase())):c.value);Y(async()=>{await t()});const t=async()=>{try{i.value=!0,await h.fetchRawMaterials(),console.time("rawMaterialsRow",c.value),c.value.length||(_.value=!0)}catch{_.value=!0}finally{i.value=!1}};Z(l,async v=>{i.value=!0,await new Promise(M=>setTimeout(M,1e3)),i.value=!1,_.value=r.value.length===0});const s=[{name:"name",label:"Raw Materials Name",align:"left",field:v=>v.name,format:v=>`${v}`,sortable:!0},{name:"code",label:"Code",align:"left",field:"code",sortable:!0},{name:"category",label:"Category",align:"left",field:"category"},{name:"unit",label:"Unit",align:"left",field:"unit"},{name:"action",label:"Action",align:"center"}];return(v,M)=>(g(),q(U,null,[o("div",Se,[e(R,{modelValue:l.value,"onUpdate:modelValue":M[0]||(M[0]=u=>l.value=u),class:"q-pb-lg q-pl-sm dynamic-width",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100"},{append:a(()=>[e(L,{name:"search"})]),_:1},8,["modelValue"])]),i.value?(g(),q("div",Ue,[e(te,{size:"50px",color:"primary"})])):(g(),q("div",Ie,[r.value.length===0?(g(),q("div",De,[e(L,{name:"warning",color:"warning",size:"4em"}),Te])):(g(),G(le,{key:1,class:"table-container elegant-container sticky-header",filter:l.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"500px"},columns:s,rows:r.value,"row-key":"name",pagination:m.value,"onUpdate:pagination":M[1]||(M[1]=u=>m.value=u),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-name":a(u=>[e($,{key:"name",props:u},{default:a(()=>[A(P(N(w)(u.row.name)),1)]),_:2},1032,["props"])]),"body-cell-category":a(u=>[e($,{key:"name",props:u},{default:a(()=>[e(k,{color:N(d)(u.row.category)},{default:a(()=>[A(P(u.row.category),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-unit":a(u=>[e($,{key:"name",props:u},{default:a(()=>[e(k,{color:N(b)(u.row.unit)},{default:a(()=>[A(P(u.row.unit),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-action":a(u=>[e($,{props:u},{default:a(()=>[o("div",Pe,[e(Re,{edit:u},null,8,["edit"]),e($e,{delete:u},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Ee=C(Ne,[["__scopeId","data-v-9c1a04d0"]]);const Fe={class:"text-h6"},ze={class:"q-gutter-x-sm"},Be={align:"right"},je={__name:"RawMaterialsPage",setup(n){return(w,d)=>(g(),G(ee,{class:"elegant-container",flat:""},{default:a(()=>[e(y,{class:"row justify-between"},{default:a(()=>[o("div",Fe,[o("div",ze,[e(k,{label:"Ingredients",color:"teal"}),e(k,{label:"Packaging Materials",color:"brown-6"})])]),o("div",Be,[e(pe)])]),_:1}),e(y,null,{default:a(()=>[e(Ee)]),_:1}),e(y)]),_:1}))}};var _a=C(je,[["__scopeId","data-v-4e0ffa36"]]);export{_a as default};
