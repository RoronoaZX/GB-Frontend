import{bd as ie,c as B,r as R,t as Be,o as b,a2 as C,f as e,M as V,w as t,Q as A,I as $,ad as Z,J as a,K as G,L as ne,e as I,$ as D,a3 as L,a4 as re,_ as g,bc as Qe,aI as $e,a1 as E,a0 as Ye,N as de,O as W,R as X,z as me,u as Me,ba as Se,aJ as st,be as H,d as rt,aH as it,H as dt,P as We}from"./index.c079c05e.js";import{Q as Ve}from"./QSpace.a13d3777.js";import{Q as Te,a as te,b as Ae,c as ae}from"./QTabPanels.2aa227bc.js";import{Q as ct}from"./QPage.4bcb1ce6.js";import{Q as Ie,a as we,b as Re}from"./QList.9f253224.js";import{b as Fe}from"./use-virtual-scroll.04f2dfb3.js";import{C as ee}from"./ClosePopup.996d7879.js";import{u as Ke}from"./branch-product.546fb924.js";import{u as Xe}from"./product.e5aec81a.js";import{Q as He}from"./QSpinnerDots.7b877cc9.js";import{Q as O}from"./QTd.12f4f58c.js";import{Q as Y}from"./QBadge.729071c2.js";import{Q as le}from"./QTooltip.4fd17e6d.js";import{Q as Ne}from"./QPopupEdit.fff5b870.js";import{Q as se}from"./QTable.3bf0940a.js";import{_ as Q}from"./plugin-vue_export-helper.21dcd24c.js";import{api as xe}from"./axios.c33915f9.js";import{u as Ge}from"./branch-rawMaterials.4d28cf05.js";import{u as ut}from"./raw-material.3c5452b2.js";import{u as fe}from"./use-dialog-plugin-component.b1ab9e27.js";import{q as oe}from"./date.0564f31c.js";import{p as Le,v as Ze}from"./vfs_fontes.3eb8cb31.js";import{u as ye}from"./use-quasar.3f12cb18.js";import{Q as ke}from"./QScrollArea.fe78354e.js";import{u as Pe,a as Ue,b as je}from"./other-product.804fe075.js";import{Q as Ee}from"./QSelect.90aa6394.js";import{u as mt}from"./recipe.c0c6a8b1.js";import{u as ze}from"./branch-recipe.0ef1a4b3.js";import"./QResizeObserver.6b275e3d.js";import"./use-panel.686bafb9.js";import"./touch.9135741d.js";import"./selection.3e78e590.js";import"./QMenu.f9d079fd.js";import"./QVirtualScroll.63e2ae76.js";import"./QScrollObserver.02cc711a.js";import"./TouchPan.8fbf3e05.js";import"./QChip.5caeb68e.js";const pt=a("div",{class:"text-h6"},"Create Branch Product",-1),_t={class:"q-mb-lg"},ft={key:0,class:"custom-list z-top"},gt=a("div",null,"Product Name",-1),vt=a("div",null,"Category",-1),ht={class:"row justify-between"},yt=a("div",null,"Beginnings",-1),bt=a("div",null,"Total Quantity",-1),wt=a("div",null,"Price",-1),xt={__name:"ProductCreate",setup(s){const p=ie(),y=Xe(),x=B(()=>y.products),_=Ke(),u=R(""),w=async()=>{y.searchProducts(u.value)},r=B(()=>i.price!==0&&i.beginnings!==0&&i.total_quantity!==0),d=R(!1),h=()=>{d.value=!0},n=()=>{m(),d.value=!1},o=f=>f?f.split(" ").map(v=>v.charAt(0).toUpperCase()+v.slice(1).toLowerCase()).join(" "):"",l=f=>{i.product_id=f.id,i.product_name=f.name,i.category=f.category,u.value=""},i=Be({product_id:"",product_name:"",price:0,beginnings:0,total_quantity:0,branches_id:p.params.branch_id}),m=()=>{i.product_id="",i.product_name="",i.category="",i.price=0,i.beginnings=0,i.total_quantity=0},c=async()=>{try{const{product_name:f,...v}=i;await _.createBranchProducts(v),console.log("data to send",v),m(),d.value=!1}catch(f){console.log(f)}};return(f,v)=>(b(),C(L,null,[e(V,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Product",onClick:h}),e(E,{modelValue:d.value,"onUpdate:modelValue":v[6]||(v[6]=P=>d.value=P),persistent:""},{default:t(()=>[e(A,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e($,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[pt,e(Ve),Z(e(V,{icon:"close",flat:"",dense:"",round:""},null,512),[[ee]])]),_:1}),e($,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",_t,[e(G,{modelValue:u.value,"onUpdate:modelValue":[v[0]||(v[0]=P=>u.value=P),w],debounce:"1000",outlined:"",rounded:"",placeholder:"Search product",dense:""},{append:t(()=>[a("div",null,[e(ne,{name:"search"})])]),default:t(()=>[u.value?(b(),C("div",ft,[e(A,null,{default:t(()=>[e(Ie,{separator:""},{default:t(()=>{var P;return[(P=x.value)!=null&&P.length?(b(!0),C(L,{key:1},re(x.value,S=>(b(),I(we,{onClick:U=>l(S),key:S.id,clickable:""},{default:t(()=>[e(Re,null,{default:t(()=>[e(Fe,null,{default:t(()=>[D(g(o(S.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(b(),I(we,{key:0},{default:t(()=>[D(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Qe("",!0)]),_:1},8,["modelValue"])]),a("div",null,[gt,e(G,{modelValue:i.product_name,"onUpdate:modelValue":v[1]||(v[1]=P=>i.product_name=P),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[vt,e(G,{modelValue:i.category,"onUpdate:modelValue":v[2]||(v[2]=P=>i.category=P),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",ht,[a("div",null,[yt,e(G,{modelValue:i.beginnings,"onUpdate:modelValue":v[3]||(v[3]=P=>i.beginnings=P),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[bt,e(G,{modelValue:i.total_quantity,"onUpdate:modelValue":v[4]||(v[4]=P=>i.total_quantity=P),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])]),a("div",null,[wt,e(G,{modelValue:i.price,"onUpdate:modelValue":v[5]||(v[5]=P=>i.price=P),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])]),_:1}),e($e,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(V,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:n}),e(V,{class:"glossy",color:"teal",label:"Create",onClick:c,disable:!r.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const et=s=>(W("data-v-196482e9"),s=s(),X(),s),$t=et(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),kt=et(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),Ct={__name:"ProductDelete",props:["delete"],setup(s){const p=Ke(),y=s;console.log("delte",y.delete.row.id);const x=async()=>{try{await p.deleteBranchProducts(y.delete.row.id),de.create({type:"negative",icon:"warning",message:"Branch product successfully deleted",timeout:1e3,position:"top"}),_.value=!1}catch(w){console.error(w.message)}},_=R(!1),u=()=>{console.log("ID",y.delete.row.id),_.value=!0};return(w,r)=>(b(),C(L,null,[e(V,{onClick:u,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"",align:"center"},{default:t(()=>[e(le,{class:"bg-negative",delay:200},{default:t(()=>[D("Delete")]),_:1})]),_:1}),e(E,{modelValue:_.value,"onUpdate:modelValue":r[0]||(r[0]=d=>_.value=d)},{default:t(()=>[e(A,null,{default:t(()=>[e($,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[$t,kt]),_:1}),e(Ye,{class:"q-mb-md"}),e($,null,{default:t(()=>[e($e,{align:"right",class:"q-pt-none"},{default:t(()=>[Z(e(V,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[ee]]),e(V,{dense:"",label:"Delete",color:"negative",onClick:x,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Rt=Q(Ct,[["__scopeId","data-v-196482e9"]]);const Pt=s=>(W("data-v-7e992bc7"),s=s(),X(),s),St={class:"row justify-between"},Vt={class:"q-my-sm"},Dt={key:0,class:"spinner-wrapper"},qt={key:1},Nt={key:0,class:"data-error"},Tt=Pt(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),At={key:1},Ut={__name:"ProductTable",setup(s){const y=ie().params.branch_id,x=Ke(),_=R(""),u=R(!0),w=R([]),r=R(!1),d=R({rowsPerPage:0}),h=B(()=>x.branchProducts);console.log("branchssdfrer",h.value);const n=B(()=>_.value?h.value.filter(S=>S.name.toLowerCase().includes(_.value.toLowerCase())):h.value),o=S=>S?S.split(" ").map(U=>U.charAt(0).toUpperCase()+U.slice(1).toLowerCase()).join(" "):"";me(async()=>{y&&await l(y)});const l=async S=>{try{u.value=!0;const U=await x.fetchBranchProducts(S);h.value=U,h.value.length||(r.value=!0),console.log("Branch product",h.value)}catch(U){console.log("Error fetching branch product:",U),r.value=!0}finally{u.value=!1}};Me(_,async S=>{u.value=!0,await new Promise(U=>setTimeout(U,1e3)),u.value=!1,r.value=n.value.length===0});async function i(S,U){try{const N=await xe.put("/api/update-branch-products/"+S.id,{price:parseInt(U)});if(N.status===200){const k=w.value.findIndex(F=>F.id==S.id);w.value[k]=parseInt(U),de.create({type:"positive",message:N.data.message,timout:1e3,position:"top"})}}catch(N){console.error("Error updating price:",N)}}async function m(S,U){try{const N=await xe.put("/api/update-branch-products-beginnings/"+S.id,{beginnings:parseInt(U)});if(N.status===200){const k=w.value.findIndex(F=>F.id==S.id);w.value[k]=parseInt(U),de.create({type:"positive",message:N.data.message,timout:1e3,position:"top"})}}catch(N){console.error("Error updating price:",N)}}async function c(S,U){try{const N=await xe.put("/api/update-branch-products-total-quantity/"+S.id,{total_quantity:parseInt(U)});if(N.status===200){const k=w.value.findIndex(F=>F.id==S.id);w.value[k]=parseInt(U),de.create({type:"positive",message:N.data.message,timout:1e3,position:"top"})}}catch(N){console.error("Error updating price:",N)}}const f=S=>{switch(S){case"Bread":return"brown";case"Selecta":return"red-6";case"Softdrinks":return"accent";default:return"grey"}},v=S=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(S),P=[{name:"name",label:"Product Name",align:"center",field:S=>S.product.name,format:S=>`${S}`,sortable:!0},{name:"category",align:"center",label:"Category",field:"category",sortable:!0},{name:"price",align:"center",label:"Price",field:S=>v(S),sortable:!0},{name:"beginnings",align:"center",label:"Beginnings",field:"beginnings",format:S=>`${S} pcs`,sortable:!0},{name:"total_quantity",align:"center",label:"Quantity",field:"total_quantity",format:S=>`${S} pcs`,sortable:!0},{name:"action",align:"center",label:"Action",field:"action",sortable:!0}];return(S,U)=>(b(),C(L,null,[a("div",St,[a("div",null,[e(G,{class:"q-pb-lg q-pl-md",modelValue:_.value,"onUpdate:modelValue":U[0]||(U[0]=N=>_.value=N),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"1500px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(ne,{name:"search"})]),_:1},8,["modelValue"])]),a("div",Vt,[e(xt)])]),u.value?(b(),C("div",Dt,[e(He,{size:"50px",color:"primary"})])):(b(),C("div",qt,[n.value.length===0?(b(),C("div",Nt,[e(ne,{name:"warning",color:"warning",size:"4em"}),Tt])):(b(),I(se,{key:1,class:"table-container sticky-header",filter:_.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:P,rows:n.value,"row-key":"name","virtual-scroll":"",pagination:d.value,"onUpdate:pagination":U[1]||(U[1]=N=>d.value=N),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"}},{"body-cell-name":t(N=>[e(O,{key:"name",props:N},{default:t(()=>{var k;return[D(g((k=N.row.product)!=null&&k.name?o(N.row.product.name):"No data available"),1)]}),_:2},1032,["props"])]),"body-cell-category":t(N=>[e(O,{key:"name",props:N},{default:t(()=>[N.row.category?(b(),I(Y,{key:0,color:f(N.row.category)},{default:t(()=>[D(g(N.row.category),1)]),_:2},1032,["color"])):(b(),C("span",At,"No data available"))]),_:2},1032,["props"])]),"body-cell-price":t(N=>[e(O,{props:N,class:"cursor-pointer"},{default:t(()=>[a("span",null,[D(g(v(N.row.price))+" ",1),e(le,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[D("Edit Price")]),_:1})]),e(Ne,{"onUpdate:modelValue":[k=>i(N.row,k),k=>N.row.price=k],modelValue:N.row.price,"auto-save":""},{default:t(k=>[e(G,{modelValue:k.value,"onUpdate:modelValue":F=>k.value=F,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:Se(k.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(N=>[e(O,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[D(g(N.row.beginnings?N.row.beginnings:"Set Beginnings")+" ",1),e(le,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[D("Edit beginnings")]),_:1})]),e(Ne,{"onUpdate:modelValue":[k=>m(N.row,k),k=>N.row.beginnings=k],modelValue:N.row.beginnings,"auto-save":""},{default:t(k=>[e(G,{modelValue:k.value,"onUpdate:modelValue":F=>k.value=F,dense:"",autofocus:"",counter:"",mask:"###",onKeyup:Se(k.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-total_quantity":t(N=>[e(O,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[D(g(N.row.total_quantity?N.row.total_quantity:"Set Quantity")+" ",1),e(le,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[D("Edit quantity")]),_:1})]),e(Ne,{"onUpdate:modelValue":[k=>c(N.row,k),k=>N.row.total_quantity=k],modelValue:N.row.total_quantity,"auto-save":""},{default:t(k=>[e(G,{modelValue:k.value,"onUpdate:modelValue":F=>k.value=F,dense:"",autofocus:"",counter:"",mask:"###",onKeyup:Se(k.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-action":t(N=>[e(O,{class:"q-gutter-x-md",props:N},{default:t(()=>[e(Rt,{delete:N},null,8,["delete"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Bt=Q(Ut,[["__scopeId","data-v-7e992bc7"]]);const It={class:"q-gutter-sm"},Ft={__name:"ProductPage",setup(s){return(p,y)=>(b(),C("div",It,[a("div",null,[e(Bt)])]))}},Lt=a("div",{class:"text-h6"},"Create Branch Raw Materials",-1),zt={class:"q-mb-lg"},Mt={key:0,class:"custom-list z-top"},Ht=a("div",null,"Raw Materials Code",-1),jt=a("div",null,"Raw Materials Name",-1),Ot=a("div",null,"Category",-1),Et=a("div",null,"Quantity",-1),Qt={__name:"RawMaterialsCreate",setup(s){const p=ie(),y=ut(),x=B(()=>y.rawMaterials),_=Ge(),u=R(""),w=async()=>{y.searchRawMaterials(u.value)},r=B(()=>l.total_quantity!==""),d=R(!1),h=()=>{d.value=!0},n=()=>{i(),d.value=!1},o=c=>{l.ingredients_id=c.id,l.ingredient_name=c.name,l.ingredient_code=c.code,l.category=c.category,l.unit=c.unit,u.value=""},l=Be({ingredients_id:"",ingredient_name:"",ingredient_code:"",total_quantity:"",category:"",unit:"",branch_id:p.params.branch_id}),i=()=>{l.ingredients_id="",l.ingredient_name="",l.ingredient_code="",l.total_quantity="",l.ingredients_id="",l.category="",l.unit=""},m=async()=>{try{const{product_name:c,...f}=l;await _.createBranchRawMaterials(f),console.log("data to send",f),i(),d.value=!1}catch(c){console.log(c)}};return(c,f)=>(b(),C(L,null,[e(V,{outline:"",class:"text-dark q-pa-sm",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Raw Material",onClick:h,style:{background:"#f43f5e"}}),e(E,{modelValue:d.value,"onUpdate:modelValue":f[5]||(f[5]=v=>d.value=v),persistent:""},{default:t(()=>[e(A,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e($,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[Lt,e(Ve),Z(e(V,{icon:"close",flat:"",dense:"",round:""},null,512),[[ee]])]),_:1}),e($,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",zt,[e(G,{modelValue:u.value,"onUpdate:modelValue":[f[0]||(f[0]=v=>u.value=v),w],debounce:"1000",outlined:"",rounded:"",placeholder:"Search Raw Materials",dense:""},{append:t(()=>[a("div",null,[e(ne,{name:"search"})])]),default:t(()=>[u.value?(b(),C("div",Mt,[e(A,null,{default:t(()=>[e(Ie,{separator:""},{default:t(()=>{var v;return[(v=x.value)!=null&&v.length?(b(!0),C(L,{key:1},re(x.value,P=>(b(),I(we,{onClick:S=>o(P),key:P.id,clickable:""},{default:t(()=>[e(Re,null,{default:t(()=>[e(Fe,null,{default:t(()=>[D(g(P.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(b(),I(we,{key:0},{default:t(()=>[D(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Qe("",!0)]),_:1},8,["modelValue"])]),a("div",null,[Ht,e(G,{modelValue:l.ingredient_code,"onUpdate:modelValue":f[1]||(f[1]=v=>l.ingredient_code=v),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[jt,e(G,{modelValue:l.ingredient_name,"onUpdate:modelValue":f[2]||(f[2]=v=>l.ingredient_name=v),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[Ot,e(G,{modelValue:l.category,"onUpdate:modelValue":f[3]||(f[3]=v=>l.category=v),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[Et,e(G,{modelValue:l.total_quantity,"onUpdate:modelValue":f[4]||(f[4]=v=>l.total_quantity=v),type:"number",outlined:"",suffix:l.unit||"",dense:"",rules:[v=>v&&v.length>0||"Total quantity is required"]},null,8,["modelValue","suffix","rules"])])]),_:1}),e($e,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(V,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:n}),e(V,{class:"glossy",color:"teal",label:"Create",onClick:m,disable:!r.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const tt=s=>(W("data-v-17ad5e9f"),s=s(),X(),s),Yt=tt(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),Kt=tt(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),Gt={__name:"RawMaterialsTableDelete",props:["delete"],setup(s){const p=Ge(),y=s,x=async()=>{console.log("clickkkd");try{await p.deleteBranchRawMaterials(y.delete.row.id),de.create({type:"negative",icon:"warning",message:`Raw Materials ${y.delete.row.name}  successfully deleted`,timeout:1e3,position:"top"}),_.value=!1}catch(w){console.error(w.message)}},_=R(!1),u=()=>{_.value=!0};return(w,r)=>(b(),C(L,null,[e(V,{onClick:u,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"",align:"center"},{default:t(()=>[e(le,{class:"bg-negative",delay:200},{default:t(()=>[D("Delete")]),_:1})]),_:1}),e(E,{modelValue:_.value,"onUpdate:modelValue":r[0]||(r[0]=d=>_.value=d)},{default:t(()=>[e(A,null,{default:t(()=>[e($,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[Yt,Kt]),_:1}),e(Ye,{class:"q-mb-md"}),e($,null,{default:t(()=>[e($e,{align:"right",class:"q-pt-none"},{default:t(()=>[Z(e(V,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[ee]]),e(V,{dense:"",label:"Delete",color:"negative",onClick:x,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Jt=Q(Gt,[["__scopeId","data-v-17ad5e9f"]]);const at=s=>(W("data-v-74a3fea6"),s=s(),X(),s),Wt={class:"row justify-between"},Xt={class:"q-my-sm"},Zt={key:0,class:"spinner-wrapper"},ea={key:1},ta={key:0,class:"data-error"},aa=at(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),la=at(()=>a("div",{class:"text-white"},"Edit Available Stocks",-1)),na={class:"row justify-center q-gutter-x-md"},oa={__name:"RawMaterialsTable",setup(s){const y=ie().params.branch_id,x=Ge(),_=R(""),u=R(!0),w=R([]),r=R(!1),d=R({rowsPerPage:0}),h=B(()=>x.branchRawMaterials),n=B(()=>_.value?h.value.filter(f=>f.name.toLowerCase().includes(_.value.toLowerCase())):h.value);me(async()=>{console.log("props.branchId in onMounted:",y),y&&await o(y)});const o=async f=>{try{u.value=!0;const v=await x.fetchBranchRawMaterials(f);h.value=v,h.value.length||(r.value=!0),console.log("Branch Raw Materials",h.value)}catch(v){console.log("Error fetching branch product:",v),r.value=!0}finally{u.value=!1}};async function l(f,v){try{const P=await xe.put("/api/update-branch-rawMaterials/"+f.id,{total_quantity:parseInt(v)});if(P.status===200){const S=w.value.findIndex(U=>U.id==f.id);w.value[S]=parseInt(v),de.create({type:"positive",message:P.data.message,timout:1e3,position:"top"})}}catch(P){console.error("Error updating price:",P)}}Me(_,async f=>{u.value=!0,await new Promise(v=>setTimeout(v,1e3)),u.value=!1,r.value=n.value.length===0});const i=f=>{const v=f.total_quantity;if(f.ingredients.unit==="Grams"&&v<1e3)return"bg-red";let S;return v>=1e3?S=v/1e3:S=v,S<5?S<=2?"bg-red":(S<=3,"bg-warning"):"bg-positive"},m=f=>{const v=f.total_quantity,P=f.ingredients.unit;if(v>1e3){const S=(v/1e3).toFixed(2);return S.endsWith(".00")?`${Math.round(v/1e3)} kilos`:`${S} kilos`}else return v>1?`${v} ${P}`:`${v} ${P}`},c=[{name:"code",label:"Raw Materials Code",align:"center",field:f=>{var v,P;return(P=(v=f==null?void 0:f.ingredients)==null?void 0:v.code)!=null?P:"No Code"},format:f=>`${f}`,sortable:!0},{name:"name",label:"Raw Materials Name",align:"center",field:f=>{var v,P;return(P=(v=f==null?void 0:f.ingredients)==null?void 0:v.name)!=null?P:"No Code"},format:f=>`${f}`,sortable:!0},{name:"total_quantity",label:"Available Stocks",align:"center",field:"total_quantity",sortable:!0},{name:"action",label:"Action",align:"center",sortable:!0}];return(f,v)=>(b(),C(L,null,[a("div",Wt,[a("div",null,[e(G,{class:"q-pb-lg q-pl-md",modelValue:_.value,"onUpdate:modelValue":v[0]||(v[0]=P=>_.value=P),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"5000px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(ne,{name:"search"})]),_:1},8,["modelValue"])]),a("div",Xt,[e(Qt)])]),u.value?(b(),C("div",Zt,[e(He,{size:"50px",color:"primary"})])):(b(),C("div",ea,[n.value.length===0?(b(),C("div",ta,[e(ne,{name:"warning",color:"warning",size:"4em"}),aa])):(b(),I(se,{key:1,class:"table-container sticky-header",filter:_.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:c,rows:n.value,"row-key":"name","virtual-scroll":"",pagination:d.value,"onUpdate:pagination":v[1]||(v[1]=P=>d.value=P),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"340px"}},{"body-cell-total_quantity":t(P=>[e(O,{props:P},{default:t(()=>[e(Y,{square:"",class:st(["text-white cursor-pointer",i(P.row)])},{default:t(()=>[D(g(m(P.row))+" ",1),e(le,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[la]),_:1}),e(Ne,{"onUpdate:modelValue":[S=>l(P.row,S),S=>P.row.total_quantity=S],modelValue:P.row.total_quantity,"auto-save":""},{default:t(S=>[e(G,{modelValue:S.value,"onUpdate:modelValue":U=>S.value=U,dense:"",suffix:P.row.ingredients.unit,mask:"########",autofocus:"",counter:"",onKeyup:Se(S.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","suffix","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["class"])]),_:2},1032,["props"])]),"body-cell-action":t(P=>[e(O,{props:P},{default:t(()=>[a("div",na,[e(Jt,{delete:P},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var sa=Q(oa,[["__scopeId","data-v-74a3fea6"]]);const ra={class:"q-gutter-sm"},ia={class:"q-gutter-x-sm"},da={__name:"RawMaterialsPage",setup(s){return(p,y)=>(b(),C("div",ra,[a("div",ia,[e(Y,{label:"Good",class:"text-white",color:"positive"}),e(Y,{label:"Warning",class:"text-white",color:"warning"}),e(Y,{label:"Danger",class:"text-white",color:"red"})]),a("div",null,[e(sa)])]))}};const Je=s=>(W("data-v-239e42ee"),s=s(),X(),s),ca=Je(()=>a("div",{class:"row justify-between"},[a("div",{class:"text-h6"},"Baker Report")],-1)),ua={class:"text-subtitle1 text-weight-regular"},ma={class:"row q-gutter-md"},pa={class:"text-h6 row justify-between"},_a={class:"row items-start q-gutter-x-md text-overline elegant-text"},fa={class:"row q-gutter-x-sm q-gutter-y-xm"},ga={class:"row q-gutter-x-sm q-gutter-y-xm"},va={class:"row q-gutter-x-sm"},ha={class:"row q-gutter-x-sm"},ya={class:"row"},ba={class:"col-6"},wa=Je(()=>a("div",{class:"text-subtitle1",align:"center"},"Ingredients",-1)),xa={class:"row justify-center q-gutter-x-lg q-pa-lg"},$a={class:"row items-start"},ka={class:"col-6"},Ca=Je(()=>a("div",{class:"text-subtitle1",align:"center"},"Bread",-1)),Ra={class:"row justify-center q-gutter-x-lg q-pa-lg"},Pa={key:0},Sa={key:1},Va={key:2},Da={class:"q-ma-sm"},qa={class:"q-ma-sm",align:"center"},Na=["src"],Ta={__name:"BakerReportPanel",props:["bakersReport"],setup(s){Le.exports.vfs=Ze;const p=s,y=p.bakersReport;console.log("Bakers Report",p.bakersReport);const x=R(!0),_=R(!1),u=R(""),w=m=>oe.formatDate(m,"MMM. DD, YYYY"),r=m=>m?m.split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1).toLowerCase()).join(" "):"",d=m=>{const c=S=>S?S.charAt(0).toUpperCase()+S.slice(1).toLowerCase():"",f=m.firstname?c(m.firstname):"No Firstname",v=m.middlename?c(m.middlename).charAt(0)+".":"",P=m.lastname?c(m.lastname):"No Lastname";return`${f} ${v} ${P}`.trim()},h=m=>{const c=new Date(m),f={hour:"2-digit",minute:"2-digit",hour12:!0};return c.toLocaleTimeString(void 0,f)},n=m=>{switch(m){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},o=m=>m?m.recipe_category==="Filling"?m.filling_bakers_reports||[]:m.recipe_category==="Dough"?m.bread_production_reports||[]:[]:(console.error("No bakerReport provided"),[]),l=m=>{var k,F,q,T;console.log("bakerReport",m);const c=`${m.branch_recipe.recipe.name} (${m.recipe_category})`,f=m.branch_recipe.recipe.target,v=m.actual_target,P=m.kilo,S=m.over,U=m.short,N={table:{widths:["50%","50%"],body:[[{text:"Recipe Name",style:"tableHeader",alignment:"left"},{text:c,style:"tableHeader",alignment:"center"}],[{text:"Target per Kilo",style:"tableHeader",alignment:"left"},{text:`${f} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Actual Target",style:"tableHeader",alignment:"left"},{text:`${v} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Kilo",style:"tableHeader",alignment:"left"},{text:`${P} kg/s`,style:"tableHeader",alignment:"center"}],[{text:"Over",style:"tableHeader",alignment:"left"},{text:`${S} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Short",style:"tableHeader",alignment:"left"},{text:`${U} pcs`,style:"tableHeader",alignment:"center"}]]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}};return{content:[{text:"Baker Report",style:"header",alignment:"center"},{columns:[{text:`Branch Name: ${m.branch.name||"No name available"}
                Baker: ${d(((k=m==null?void 0:m.user)==null?void 0:k.employee)||"Unknown Baker Name")}
                Recipe: ${((F=m.recipe)==null?void 0:F.name)||"Unknown Recipe"} (${m.recipe_category||"Unknown Category"})
             `,width:"80%",margin:[0,0,0,10]},{text:`Date: ${w(((q=p.bakersReport[0])==null?void 0:q.created_at)||((T=p.bakersReport[1])==null?void 0:T.created_at)||"No name available")}
                Time: ${h(m.created_at)}
                Status: ${r(m.status)}`,margin:[0,0,0,10]}]},{columns:[{width:"50%",stack:[{text:"Bread Production",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*"],body:[[{text:"Bread Name",style:"tableHeader",alignment:"center"},{text:"Production",style:"tableHeader",alignment:"center"}],...o(m).map(j=>{var ce;return[{text:((ce=j==null?void 0:j.bread)==null?void 0:ce.name)||"Unknown Bread",style:"body"},{text:m.recipe_category==="Filling"?`${(j==null?void 0:j.filling_production)||"0"} pcs`:`${j==null?void 0:j.bread_new_production} pcs`,style:"body",alignment:"center"}]})]}}],columnGap:10},{width:"50%",stack:[{text:"Ingredients",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*"],body:[[{text:"Ingredient Code",style:"tableHeader",alignment:"center"},{text:"Quantity",style:"tableHeader",alignment:"center"}],...(m.ingredient_bakers_reports||[]).map(j=>{var ce,J;return[{text:((ce=j==null?void 0:j.ingredients)==null?void 0:ce.code)||"Unknown Ingredient",style:"body"},{text:`${(j==null?void 0:j.quantity)||"Unknown Quantity"} ${((J=j==null?void 0:j.ingredients)==null?void 0:J.unit)||""}`,style:"body",alignment:"center"}]})]}}],columnGap:10}],columnGap:20},{canvas:[{type:"line",x1:0,y1:25,x2:555,y2:25,lineWidth:1,dash:{length:5,space:5},lineColor:"#000000",margin:[0,20,0,0]}]},{margin:[0,20,0,0],stack:[{text:"Summary",style:"subheader",alignment:"center"},N]}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableHeader:{bold:!0,fontSize:10,color:"black"},body:{fontSize:8}},pageMargins:[20,20,20,20]}},i=m=>{const c=l(m);Le.exports.createPdf(c).getDataUrl(f=>{u.value=f,_.value=!0})};return(m,c)=>(b(),C("div",null,[e(A,{class:"my-card q-pa-md"},{default:t(()=>{var f,v,P,S,U,N;return[ca,a("div",ua,[a("div",null," Name: "+g(d(((v=(f=H(y)[0])==null?void 0:f.user)==null?void 0:v.employee)||((S=(P=H(y)[1])==null?void 0:P.user)==null?void 0:S.employee)||"No name available")),1),a("div",null," Date: "+g(`${w(((U=p.bakersReport[0])==null?void 0:U.created_at)||((N=p.bakersReport[1])==null?void 0:N.created_at)||"No name available")}`),1)]),e($,null,{default:t(()=>[a("div",ma,[(b(!0),C(L,null,re(H(y),(k,F)=>(b(),C("div",{key:F,class:"row q-gutter-sm"},[e(A,{flat:"",dense:"",bordered:"",class:"q-pa-md q-my-sm user-card",style:{width:"675px","max-width":"1500px"}},{default:t(()=>{var q;return[a("div",pa,[a("div",null,g(`${r((q=k.branch_recipe.recipe)==null?void 0:q.name)||"Unknown Recipe"} (${k.recipe_category||"Unknown Category"})`),1),e(V,{padding:"xs md",label:"Print",icon:"print",outline:"",onClick:T=>i(k),class:"user-button"},null,8,["onClick"])]),a("div",null,"Time: "+g(h(k.created_at)),1),a("div",null,[D(" Status: "),e(Y,{align:"middle",color:n(k.status)},{default:t(()=>[D(g(r(k.status)),1)]),_:2},1032,["color"])]),e($,null,{default:t(()=>[a("div",_a,[a("div",fa,[D(" Actual Target: "),a("div",null,[e(Y,{outline:"",align:"middle",color:"teal"},{default:t(()=>[D(g(`${(k==null?void 0:k.actual_target)||"No target"} pcs`),1)]),_:2},1024)])]),a("div",ga,[D(" Kilo: "),a("div",null,[e(Y,{outline:"",align:"middle",color:"teal"},{default:t(()=>[D(g(`${(k==null?void 0:k.kilo)||"No Kilo"} kgs`),1)]),_:2},1024)])]),a("div",va,[D(" Over: "),a("div",null,[e(Y,{outline:"",align:"middle",color:"teal"},{default:t(()=>[D(g(`${k.over} pcs`),1)]),_:2},1024)])]),a("div",ha,[D(" Short: "),a("div",null,[e(Y,{outline:"",align:"middle",color:"teal"},{default:t(()=>[D(g(`${k.short} pcs`),1)]),_:2},1024)])])])]),_:2},1024),e($,null,{default:t(()=>[a("div",ya,[a("div",ba,[wa,a("div",xa,[a("div",null,[(b(!0),C(L,null,re(k.ingredient_bakers_reports||[],(T,j)=>{var ce,J;return b(),C("div",{key:j,class:"row justify-between q-gutter-y-lg q-gutter-x-xl text-weight-light"},[a("div",null,g(((ce=T==null?void 0:T.ingredients)==null?void 0:ce.name)||"Unknown Ingredient"),1),a("div",$a,g(`${(T==null?void 0:T.quantity)||"Unknown Quantity"} ${((J=T==null?void 0:T.ingredients)==null?void 0:J.unit)||""}`),1)])}),128))])])]),a("div",ka,[Ca,a("div",Ra,[a("div",null,[(b(!0),C(L,null,re(o(k),(T,j)=>{var ce;return b(),C("div",{key:j,class:"row justify-between q-gutter-y-lg q-gutter-x-xl text-weight-light"},[a("div",null,g(((ce=T==null?void 0:T.bread)==null?void 0:ce.name)||"Unknown Bread"),1),a("div",null,[k.recipe_category==="Filling"?(b(),C("div",Pa,g(`${(T==null?void 0:T.filling_production)||"0"} pcs`),1)):k.recipe_category==="Dough"?(b(),C("div",Sa,g(`${T==null?void 0:T.bread_new_production} pcs`),1)):(b(),C("div",Va,g("0 pcs")))])])}),128))])])])])]),_:2},1024)]}),_:2},1024)]))),128))])]),_:1})]}),_:1}),e(E,{modelValue:_.value,"onUpdate:modelValue":c[0]||(c[0]=f=>_.value=f),"backdrop-filter":m.backdropFilter,maximized:x.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[a("div",Da,[a("div",qa,[Z((b(),I(V,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},{default:t(()=>[e(le,null,{default:t(()=>[D("Close")]),_:1})]),_:1})),[[ee]])]),a("div",null,[a("iframe",{src:u.value,width:"100%",height:"700px"},null,8,Na)])])]),_:1},8,["modelValue","backdrop-filter","maximized"])]))}};var Aa=Q(Ta,[["__scopeId","data-v-239e42ee"]]);const Ua={class:"row justify-between text-white"},Ba=a("div",{class:"text-h6"},"Bread Report",-1),Ia={class:"row justify-end q-mt-md"},Fa={class:"text-h6"},La={__name:"BreadReport",props:["reports"],setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=fe(),u=s;console.log("Reports data structure:",u.reports);const w=o=>o?o.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",r=[{name:"name",label:"Bread Name",field:o=>(console.log("Row data:",o),o.bread.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:o=>`${o}`},{name:"newProduction",label:"New Production (PCS)",field:"new_production",format:o=>`${o}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:o=>`${o}`},{name:"breadOut",label:"Bread Out (PCS)",field:"bread_out",format:o=>`${o}`},{name:"breadSold",label:"Bread Sold (PCS)",field:"bread_sold",format:o=>`${o}`},{name:"total",label:"Bread Total (PCS)",field:"total",format:o=>`${o}`},{name:"sales",label:"Total Sales",field:"sales"}],d=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(o),h=B(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),n=B(()=>{const o=h.value.reduce((l,i)=>{const m=parseFloat(i.sales)||0;return console.log(`Adding salesAmount: ${m} to total: ${l}`),l+m},0);return console.log("Overall Total Sales computed as:",o),o});return console.log("Overall Total Sales:",n.value),(o,l)=>(b(),I(E,{ref_key:"dialogRef",ref:p,onHide:H(y)},{default:t(()=>[e(A,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e($,{style:{"background-color":"#795548"}},{default:t(()=>[a("div",Ua,[Ba,Z((b(),I(V,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[ee]])])]),_:1}),e($,null,{default:t(()=>[e(se,{filter:o.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:r,rows:h.value,"row-key":"name","virtual-scroll":"",pagination:o.pagination,"onUpdate:pagination":l[0]||(l[0]=i=>o.pagination=i),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,g(`${w(i.row.bread.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,g(`${d(i.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,g(`${d(i.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e($,null,{default:t(()=>[a("div",Ia,[a("div",Fa," Overall Total Sales: "+g(d(n.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},za={class:"row justify-between text-white"},Ma=a("div",{class:"text-h6"},"Selecta Report",-1),Ha={class:"row justify-end q-mt-md"},ja={class:"text-h6"},Oa={__name:"SelectaReport",props:["reports"],setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=fe(),u=s;console.log("Reports data structure:",u.reports);const w=o=>o?o.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",r=[{name:"name",label:"Selecta Name",field:o=>(console.log("Row data:",o),o.selecta.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:o=>`${o}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:o=>`${o}`},{name:"out",label:"Selecta Out (PCS)",field:"out",format:o=>`${o}`},{name:"sold",label:"Selecta Sold (PCS)",field:"sold",format:o=>`${o}`},{name:"sales",label:"Total Sales",field:"sales"}],d=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(o),h=B(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),n=B(()=>{const o=h.value.reduce((l,i)=>{const m=parseFloat(i.sales)||0;return console.log(`Adding salesAmount: ${m} to total: ${l}`),l+m},0);return console.log("Overall Total Sales computed as:",o),o});return console.log("Filtered Rows:",h.value),(o,l)=>(b(),I(E,{ref_key:"dialogRef",ref:p,onHide:H(y)},{default:t(()=>[e(A,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e($,{style:{"background-color":"#f44336"}},{default:t(()=>[a("div",za,[Ma,Z((b(),I(V,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[ee]])])]),_:1}),e($,null,{default:t(()=>[e(se,{filter:o.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:r,rows:h.value,"row-key":"name","virtual-scroll":"",pagination:o.pagination,"onUpdate:pagination":l[0]||(l[0]=i=>o.pagination=i),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,g(`${w(i.row.selecta.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,g(`${d(i.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,g(`${d(i.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e($,null,{default:t(()=>[a("div",Ha,[a("div",ja," Overall Total Sales: "+g(d(n.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Ea={class:"row justify-between text-white"},Qa=a("div",{class:"text-h6"},"Softdrinks Report",-1),Ya={class:"row justify-end q-mt-md"},Ka={class:"text-h6"},Ga={__name:"SoftdrinksReport",props:["reports"],setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=fe(),u=s;console.log("Reports data structure:",u.reports);const w=o=>o?o.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",r=[{name:"name",label:"Softdrinks Name",field:o=>(console.log("Row data:",o),o.softdrinks.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:o=>`${o}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:o=>`${o}`},{name:"out",label:"Softdrinks Out (PCS)",field:"out",format:o=>`${o}`},{name:"sold",label:"Softdrinks Sold (PCS)",field:"sold",format:o=>`${o}`},{name:"sales",label:"Total Sales",field:"sales"}],d=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(o),h=B(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),n=B(()=>{const o=h.value.reduce((l,i)=>{const m=parseFloat(i.sales)||0;return console.log(`Adding salesAmount: ${m} to total: ${l}`),l+m},0);return console.log("Overall Total Sales computed as:",o),o});return console.log("Filtered Rows:",h.value),(o,l)=>(b(),I(E,{ref_key:"dialogRef",ref:p,onHide:H(y)},{default:t(()=>[e(A,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e($,{style:{"background-color":"#9c27b0"}},{default:t(()=>[a("div",Ea,[Qa,Z((b(),I(V,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[ee]])])]),_:1}),e($,null,{default:t(()=>[e(se,{filter:o.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:r,rows:h.value,"row-key":"name","virtual-scroll":"",pagination:o.pagination,"onUpdate:pagination":l[0]||(l[0]=i=>o.pagination=i),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,g(`${w(i.row.softdrinks.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,g(`${d(i.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,g(`${d(i.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e($,null,{default:t(()=>[a("div",Ya,[a("div",Ka," Overall Total Sales: "+g(d(n.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Ja={class:"row justify-between text-white"},Wa=a("div",{class:"text-h6"},"Cake Report",-1),Xa={class:"row justify-end q-mt-md"},Za={class:"text-h6"},el={__name:"CakeReport",props:["reports"],setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=fe(),u=s;console.log("Report cake:",u.reports);const w=B(()=>(console.log("Filtered cake rows:",u.reports||[]),u.reports||[])),r=o=>{const l=f=>f?f.charAt(0).toUpperCase()+f.slice(1).toLowerCase():"",i=o.firstname?l(o.firstname):"No Firstname",m=o.middlename?l(o.middlename).charAt(0)+".":"",c=o.lastname?l(o.lastname):"No Lastname";return`${i} ${m} ${c}`},d=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(o).replace("\u20B1","\u20B1 "),h=B(()=>{const o=w.value.reduce((l,i)=>{const m=parseFloat(i.cake_report.price)||0;return console.log(`Adding salesAmount: ${m} to total: ${l}`),l+m},0);return console.log("Overall Total Sales computed as:",o),o}),n=[{name:"name",label:"Cake Name",field:o=>(console.log("Row data:",o),o.cake_report.name||"N/A")},{name:"cake_maker",label:"Cake Maker Name",field:o=>r(o.cake_report.user.employee)},{name:"price",label:"Price",field:o=>d(o.cake_report.price)},{name:"layers",label:"Layers",field:o=>o.cake_report.layers},{name:"sales_status",label:"Sale Status",field:o=>o.cake_report.sales_status}];return(o,l)=>(b(),I(E,{ref_key:"dialogRef",ref:p,onHide:H(y)},{default:t(()=>[e(A,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e($,{style:{"background-color":"#009688"}},{default:t(()=>[a("div",Ja,[Wa,Z((b(),I(V,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[ee]])])]),_:1}),e($,null,{default:t(()=>[e(se,{filter:o.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:n,rows:w.value,"row-key":"name","virtual-scroll":"",pagination:o.pagination,"onUpdate:pagination":l[0]||(l[0]=i=>o.pagination=i),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["filter","rows","pagination"]),a("div",Xa,[a("div",Za," Overall Total Sales: "+g(d(h.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},tl={class:"row justify-between text-white"},al=a("div",{class:"text-h6"},"Other Products Report",-1),ll={class:"row justify-end q-mt-md"},nl={class:"text-h6"},ol={__name:"OtherProductsReport",props:["reports"],setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=fe(),u=s,w=B(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),r=o=>o?o.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",d=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(o),h=[{name:"name",label:"Product Name",field:o=>(console.log("Row data:",o),o.other_products.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:o=>`${o}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:o=>`${o}`},{name:"out",label:"Product Out (PCS)",field:"out",format:o=>`${o}`},{name:"sold",label:"Product Sold (PCS)",field:"sold",format:o=>`${o}`},{name:"sales",label:"Total Sales",field:"sales"}],n=B(()=>{const o=w.value.reduce((l,i)=>{const m=parseFloat(i.sales)||0;return console.log(`Adding salesAmount: ${m} to total: ${l}`),l+m},0);return console.log("Overall Total Sales computed as:",o),o});return(o,l)=>(b(),C("div",null,[e(E,{ref_key:"dialogRef",ref:p,onHide:H(y)},{default:t(()=>[e(A,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e($,{style:{"background-color":"#607d8b"}},{default:t(()=>[a("div",tl,[al,Z((b(),I(V,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[ee]])])]),_:1}),e($,null,{default:t(()=>[e(se,{filter:o.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:h,rows:w.value,"row-key":"name","virtual-scroll":"",pagination:o.pagination,"onUpdate:pagination":l[0]||(l[0]=i=>o.pagination=i),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,g(`${r(i.row.other_products.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,g(`${d(i.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,g(`${d(i.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e($,null,{default:t(()=>[a("div",ll,[a("div",nl," Overall Total Sales: "+g(d(n.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"])]))}};const sl=s=>(W("data-v-0eb81aec"),s=s(),X(),s),rl=sl(()=>a("div",{class:"text-h6",align:"center"},"Products Report",-1)),il={class:"item-start q-gutter-md",align:"center"},dl={class:"text-weight-regular text-subtitle1"},cl={__name:"ProductsReport",props:["sales_Reports"],setup(s){const p=s,y=p.sales_Reports;console.log("sales report2",p);const x=ye(),_=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(n),u=n=>{x.dialog({component:La,componentProps:{reports:n}})},w=n=>{x.dialog({component:Oa,componentProps:{reports:n}})},r=n=>{x.dialog({component:Ga,componentProps:{reports:n}})},d=n=>{x.dialog({component:el,componentProps:{reports:n}})},h=n=>{x.dialog({component:ol,componentProps:{reports:n}})};return(n,o)=>(b(),C("div",null,[e(A,{class:"user-card"},{default:t(()=>[e($,null,{default:t(()=>[rl]),_:1}),e($,null,{default:t(()=>[a("div",il,[e(V,{onClick:o[0]||(o[0]=l=>u(p.sales_Reports[0].bread_reports)),"no-caps":"",label:"Bread Report",rounded:"",color:"brown",style:{width:"130px"},class:"user-button"}),e(V,{onClick:o[1]||(o[1]=l=>w(H(y)[0].selecta_reports)),"no-caps":"",label:"Selecta Report",rounded:"",color:"red-6",style:{width:"130px"},class:"user-button"}),e(V,{onClick:o[2]||(o[2]=l=>r(H(y)[0].softdrinks_reports)),"no-caps":"",label:"Softdrinks Report",rounded:"",color:"accent",style:{width:"150px"},class:"user-button"}),e(V,{onClick:o[3]||(o[3]=l=>d(H(y)[0].cake_sales_reports)),"no-caps":"",label:"Cake Report",rounded:"",color:"teal",style:{width:"130px"},class:"user-button"}),e(V,{onClick:o[4]||(o[4]=l=>h(H(y)[0].other_products_reports)),"no-caps":"",label:"Other Products Report",rounded:"",color:"blue-grey",style:{width:"180px"},class:"user-button"})])]),_:1}),e($,null,{default:t(()=>[a("div",dl," Total sales: "+g(_(H(y)[0].products_total_sales)),1)]),_:1})]),_:1})]))}};var ul=Q(cl,[["__scopeId","data-v-0eb81aec"]]);const ml={class:"row justify-between text-white"},pl=a("div",{class:"text-h6"},"Denomination Report",-1),_l={class:"row text-weight-regular text-subtitle1"},fl={class:"col-6"},gl={class:"col-6"},vl={class:"row justify-end q-mt-md"},hl={class:"text-h6"},yl={__name:"DenominationDialogReport",props:{reports:Array,total:Number},setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=fe(),u=s;console.log("Denomination Props",u.reports);const w=u.reports[0];console.log("Reports data structure:",u.reports);const r=h=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(h),d=B(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[]));return console.log("Filtered Rows:",d.value),(h,n)=>(b(),I(E,{ref_key:"dialogRef",ref:p,onHide:H(y)},{default:t(()=>[e(A,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e($,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",ml,[pl,Z((b(),I(V,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[ee]])])]),_:1}),e($,null,{default:t(()=>[a("div",_l,[a("div",fl,[a("div",null,"1000 Bills: "+g(H(w).oneThousandBills),1),a("div",null,"500 Bills: "+g(H(w).fiveHundredBills),1),a("div",null,"200 Bills: "+g(H(w).twoHundredBills),1),a("div",null,"100 Bills: "+g(H(w).oneHundredBills),1),a("div",null,"50 Bills: "+g(H(w).fiftyBills),1),a("div",null,"20 Bills: "+g(H(w).twentyBills),1)]),a("div",gl,[a("div",null,"20 coins: "+g(H(w).twentyCoins),1),a("div",null,"10 coins: "+g(H(w).tenCoins),1),a("div",null,"5 coins: "+g(H(w).fiveCoins),1),a("div",null,"1 coins: "+g(H(w).oneCoins),1),a("div",null,"25 cents: "+g(H(w).twentyFiveCents),1)])])]),_:1}),e($,null,{default:t(()=>[a("div",vl,[a("div",hl," Overall Total Denomination: "+g(r(s.total||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const bl=s=>(W("data-v-0bfb79ef"),s=s(),X(),s),wl=bl(()=>a("div",{class:"text-h6",align:"center"},"Denomination Report",-1)),xl={class:"q-gutter-x-md",align:"center"},$l={class:"text-weight-regular text-subtitle1"},kl={__name:"DenominationReport",props:["sales_Reports"],setup(s){const p=s;p.sales_Reports,console.log("Denomination report",p);const y=ye(),x=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(u),_=(u,w)=>{y.dialog({component:yl,componentProps:{reports:u,total:w}})};return(u,w)=>(b(),C("div",null,[e(A,{class:"user-card"},{default:t(()=>[e($,null,{default:t(()=>[wl]),_:1}),e($,null,{default:t(()=>[a("div",xl,[e(V,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",onClick:w[0]||(w[0]=r=>_(p.sales_Reports[0].denomination_reports,p.sales_Reports[0].denomination_total)),class:"user-button"})])]),_:1}),e($,null,{default:t(()=>[a("div",$l," Total Denomination : "+g(x(p.sales_Reports[0].denomination_total)),1)]),_:1})]),_:1})]))}};var Cl=Q(kl,[["__scopeId","data-v-0bfb79ef"]]);const Rl={class:"row justify-between text-white"},Pl=a("div",{class:"text-h6"},"Expenses Report",-1),Sl={class:"row justify-end q-mt-md"},Vl={class:"text-h6"},Dl={__name:"ExpensesDialog",props:{reports:Array,total:Number},setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=fe(),u=s;u.reports,console.log("Expenses total",u.total);const w=n=>n?n.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" "):"",r=[{name:"name",label:"Expenses Name",field:n=>(console.log("Row data:",n),n.name||"N/A"),align:"center"},{name:"description",label:"Description",field:"description",align:"center"},{name:"amount",label:"Amount",field:"amount",align:"center"}];console.log("Reports data structure:",u.reports);const d=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(n),h=B(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[]));return console.log("Expenses:",h.value),(n,o)=>(b(),I(E,{ref_key:"dialogRef",ref:p,onHide:H(y),onOk:n.handleButtonClick,onCancel:H(_)},{default:t(()=>[e(A,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e($,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",Rl,[Pl,Z((b(),I(V,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[ee]])])]),_:1}),e($,null,{default:t(()=>[e(se,{filter:n.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:r,rows:h.value,"row-key":"name","virtual-scroll":"",pagination:n.pagination,"onUpdate:pagination":o[0]||(o[0]=l=>n.pagination=l),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(l=>[e(O,{props:l},{default:t(()=>[a("span",null,g(`${w(l.row.name)}`),1)]),_:2},1032,["props"])]),"body-cell-amount":t(l=>[e(O,{props:l},{default:t(()=>[a("span",null,g(`${d(l.row.amount)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e($,null,{default:t(()=>[a("div",Sl,[a("div",Vl," Overall Total Expenses: "+g(d(s.total||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","onOk","onCancel"]))}};const ql=s=>(W("data-v-338c99d0"),s=s(),X(),s),Nl=ql(()=>a("div",{class:"text-h6",align:"center"},"Expenses Report",-1)),Tl={class:"q-gutter-x-md",align:"center"},Al={class:"text-weight-regular text-subtitle1"},Ul={__name:"ExpensesReport",props:["sales_Reports"],setup(s){const p=s;console.log("Expenses Data",p.sales_Reports[0].expenses_reports);const y=ye(),x=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(u),_=(u,w)=>{y.dialog({component:Dl,componentProps:{reports:u,total:w}})};return(u,w)=>(b(),C("div",null,[e(A,{class:"user-card"},{default:t(()=>[e($,null,{default:t(()=>[Nl]),_:1}),e($,null,{default:t(()=>[a("div",Tl,[e(V,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",class:"user-button",onClick:w[0]||(w[0]=r=>_(p.sales_Reports[0].expenses_reports,p.sales_Reports[0].expenses_total))})])]),_:1}),e($,null,{default:t(()=>[a("div",Al," Total Expenses : "+g(x(p.sales_Reports[0].expenses_total)),1)]),_:1})]),_:1})]))}};var Bl=Q(Ul,[["__scopeId","data-v-338c99d0"]]);const Il={class:"row justify-between text-white"},Fl=a("div",{class:"text-h6"},"Credits Report",-1),Ll={class:"row justify-end q-mt-md"},zl={class:"text-h6"},Ml={__name:"CreditsReportDialog",props:{reports:Array,total:Number},setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=fe(),u=s,w=u.reports;console.log("creditReports data",w),w.forEach((i,m)=>{console.log(`Report ${m}:`,i),console.log(`Credit Products for Report ${m}:`,i.credit_products.total_amount)});const r=B(()=>w.flatMap(i=>i.credit_products.map(m=>{const c=parseInt(m.pieces,10)||0,f=parseFloat(m.price)||0,v=c*f;return{...m,total_amount:v}})));console.log("All Credit Products:",r.value[0]);const d=i=>i?i.split(" ").map(m=>m.charAt(0).toUpperCase()+m.slice(1).toLowerCase()).join(" "):"",h=i=>{const m=P=>P?P.charAt(0).toUpperCase()+P.slice(1).toLowerCase():"",c=i.firstname?m(i.firstname):"No Firstname",f=i.middlename?m(i.middlename).charAt(0)+".":"",v=i.lastname?m(i.lastname):"No Lastname";return`${c} ${f} ${v}`.trim()},n=[{name:"name",label:"Employee Name",field:i=>h(i.credit_user_id),align:"center"},{name:"productName",label:"Product Name",field:i=>i.product.name||"N/A",align:"center"},{name:"pieces",label:"Pieces",field:"pieces",align:"center"},{name:"price",label:"Price",field:"price",align:"center"},{name:"total_amount",label:"Total Amount",field:"total_amount",align:"center"}];console.log("Reports data structure:",u.reports);const o=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(i),l=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(i);return(i,m)=>(b(),I(E,{ref_key:"dialogRef",ref:p,onHide:H(y),onOk:i.handleButtonClick,onCancel:H(_)},{default:t(()=>[e(A,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e($,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",Il,[Fl,Z((b(),I(V,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[ee]])])]),_:1}),e($,null,{default:t(()=>[e(se,{filter:i.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:n,rows:r.value,"row-key":"name","virtual-scroll":"",pagination:i.pagination,"onUpdate:pagination":m[0]||(m[0]=c=>i.pagination=c),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-productName":t(c=>[e(O,{props:c},{default:t(()=>[a("span",null,g(`${d(c.row.product.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(c=>[e(O,{props:c},{default:t(()=>[a("span",null,g(`${o(c.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-total_amount":t(c=>[e(O,{props:c},{default:t(()=>[a("span",null,g(`${l(c.row.total_amount)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e($,null,{default:t(()=>[a("div",Ll,[a("div",zl," Overall Credits Total: "+g(o(s.total||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","onOk","onCancel"]))}};const Hl=s=>(W("data-v-29d6ba68"),s=s(),X(),s),jl=Hl(()=>a("div",{class:"text-h6",align:"center"},"Credits Report",-1)),Ol={class:"q-gutter-x-md",align:"center"},El={class:"text-weight-regular text-subtitle1"},Ql={__name:"CreditsReport",props:["sales_Reports"],setup(s){const p=s,y=ye(),x=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(u),_=(u,w)=>{y.dialog({component:Ml,componentProps:{reports:u,total:w}})};return(u,w)=>(b(),C("div",null,[e(A,{class:"user-card"},{default:t(()=>[e($,null,{default:t(()=>[jl]),_:1}),e($,null,{default:t(()=>[a("div",Ol,[e(V,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",class:"user-button",onClick:w[0]||(w[0]=r=>_(p.sales_Reports[0].credit_reports,p.sales_Reports[0].credit_total))})])]),_:1}),e($,null,{default:t(()=>[a("div",El," Total Credits : "+g(x(p.sales_Reports[0].credit_total)),1)]),_:1}),e($)]),_:1})]))}};var Yl=Q(Ql,[["__scopeId","data-v-29d6ba68"]]);const Kl=s=>(W("data-v-5a5f240d"),s=s(),X(),s),Gl={class:"q-mt-lg row items-start q-gutter-md justify-center"},Jl={class:"row justify-between"},Wl=Kl(()=>a("div",{class:"text-h6"},"Sales Report",-1)),Xl={align:"right"},Zl={class:"text-subtitle1 text-weight-regular"},en={class:"row q-gutter-sm q-pa-md"},tn={class:"q-ma-sm"},an={class:"q-ma-sm",align:"center"},ln=["src"],nn={__name:"SalesReportPanel",props:["salesReport"],setup(s){Le.exports.vfs=Ze;const p=s,y=p.salesReport;console.log("reportsData",p.salesReport);const x=R(!0),_=R(!1),u=R(""),w=l=>oe.formatDate(l,"MMMM DD, YYYY"),r=l=>{const i=new Date(l),m={hour:"2-digit",minute:"2-digit",hour12:!0};return i.toLocaleTimeString(void 0,m)},d=l=>{const i=v=>v?v.charAt(0).toUpperCase()+v.slice(1).toLowerCase():"",m=l.firstname?i(l.firstname):"No Firstname",c=l.middlename?i(l.middlename).charAt(0)+".":"",f=l.lastname?i(l.lastname):"No Lastname";return`${m} ${c} ${f}`.trim()},h=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l).replace("\u20B1","\u20B1	"),n=l=>{const i=B(()=>l.credit_reports.flatMap(J=>J.credit_products));console.log("All Credit Products:",i.value);const m=[{title:"Bread Production",data:l.bread_reports||[],columns:["bread.name","beginnings","price","new_production","bread_out","bread_sold","total","remaining","sales"],totals:["sales"]},{title:"Selecta Production",data:l.selecta_reports||[],columns:["selecta.name","beginnings","price","out","sold","remaining","sales"],totals:["sales"]},{title:"Softdrinks Production",data:l.softdrinks_reports||[],columns:["softdrinks.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Other Products Production",data:l.other_products_reports||[],columns:["other_products.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Cake Production",data:l.cake_sales_reports||[],columns:["cake_report.name","cake_report.user.employee","cake_report.layers","cake_report.price","cake_report.sales_status"],totals:["cake_report.price"]}],c=l.expenses_reports||[],f=i.value||[],v=l.credit_total,P=l.denomination_reports[0]||[],S=l.denomination_total,U=l.expenses_total;l.products_total_sales,l.charges_amount,l.over_total;const N={bills:[{name:"One Thousand",pcs:P.oneThousandBills||0},{name:"Five Hundred",pcs:P.fiveHundredBills||0},{name:"Two Hundred",pcs:P.twoHundredBills||0},{name:"One Hundred",pcs:P.oneHundredBills||0},{name:"Fifty",pcs:P.fiftyBills||0},{name:"Twenty",pcs:P.twentyBills||0}],coins:[{name:"Twenty",pcs:P.twentyCoins||0},{name:"Ten",pcs:P.tenCoins||0},{name:"Five",pcs:P.fiveCoins||0},{name:"One",pcs:P.oneCoins||0},{name:"Twenty Five Cents",pcs:P.twentyFiveCents||0}]},k=(J,ge,pe)=>{const ve=(ue,_e)=>_e.split(".").reduce((be,z)=>be?be[z]:0,ue),qe=pe.reduce((ue,_e)=>(ue[_e]=J.reduce((be,z)=>be+parseFloat(ve(z,_e))||0,0),ue),{});return[...J.map(ue=>ge.map(_e=>{if(_e==="cake_report.user.employee"){const be=ve(ue,"cake_report.user.employee");return{text:be?d(be):"No Employee",style:"body",alignment:"center"}}return{text:_e.includes(".")?ve(ue,_e)||"-":ue[_e]||"-",style:"body",alignment:"center"}})),[{text:"Overall Total",colSpan:ge.length-pe.length,style:"tableHeader",alignment:"right",color:"#020617"},...Array(ge.length-pe.length-1).fill({}),...pe.map(ue=>({text:`\u20B1 ${qe[ue].toFixed(2)}`,style:"tableHeader",alignment:"center",color:"#020617"}))]]},F=f.length>0?f.map(J=>[{text:d(J.credit_user_id),style:"body",alignment:"center"},{text:J.product.name,style:"body",alignment:"center"},{text:J.pieces,style:"body",alignment:"center"},{text:J.price,style:"body",alignment:"center"},{text:J.total_amount,style:"body",alignment:"center"}]):[[{text:"No data available",colSpan:5,alignment:"center"}]];F.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:3},{},{},{text:`${h(v)}`,style:"bodyBold",alignment:"center",colSpan:2},{}]);const q=c.length>0?c.map(J=>[{text:J.name,style:"body",alignment:"center"},{text:J.description,style:"body",alignment:"center"},{text:`${h(J.amount)}`,style:"body",alignment:"center"}]):[[{text:"No data available",colSpan:3,alignment:"center"}]];q.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:2},{},{text:`${h(U)}`,style:"bodyBold",alignment:"center"}]);const T=N.bills.map((J,ge)=>{var pe,ve;return[{text:J.name,style:"body",alignment:"center"},{text:J.pcs,style:"body",alignment:"center"},{text:((pe=N.coins[ge])==null?void 0:pe.name)||"",style:"body",alignment:"center"},{text:((ve=N.coins[ge])==null?void 0:ve.pcs)||"0",style:"body",alignment:"center"}]});T.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:3,color:"#020617"},{},{},{text:`${h(S)}`,style:"bodyBold",alignment:"right",color:"#020617"}]);const j=m.map(({title:J,data:ge,columns:pe,totals:ve})=>({stack:[{text:J,style:"subheader",alignment:"center"},{table:{headerRows:1,widths:Array(pe.length).fill("*"),body:[pe.map(qe=>({text:qe.split(".").pop().replace(/_/g," ").replace(/\b\w/g,ue=>ue.toUpperCase()),style:"tableHeader",alignment:"center"})),...k(ge,pe,ve)]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]})),ce={table:{widths:["50%","50%"],body:[[{text:"Total Denomination",style:"tableHeader",alignment:"left"},{text:h(S),style:"tableData",alignment:"center"}],[{text:"Total Product Sales Amount",style:"tableHeader",alignment:"left"},{text:h(l.products_total_sales),style:"tableData",alignment:"center"}],[{text:"Total Expenses",style:"tableHeader",alignment:"left"},{text:h(U),style:"tableData",alignment:"center"}],[{text:"Over Cash",style:"tableHeader",alignment:"left"},{text:h(l.over_total),style:"tableData",alignment:"center"}],[{text:"Charges",style:"tableHeader",alignment:"left"},{text:`${h(l.charges_amount)}`,style:"tableData",alignment:"center"}]]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}};return{content:[{text:"Sales Report",style:"header",alignment:"center"},{columns:[{text:`Branch Name: ${l.branch.name}
          Cashier: ${d(l.user.employee)}
          Date: ${w(l.created_at)}
Time: ${r(l.created_at)}
`,margin:[0,0,0,10]},{}]},...j,{margin:[0,5,0,0],columns:[{width:"50%",stack:[{text:"Expenses Report",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","auto","*"],body:[[{text:"Expenses Name",style:"tableHeader",alignment:"center"},{text:"Description",style:"tableHeader",alignment:"center"},{text:"Amount",style:"tableHeader",alignment:"center"}],...q]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}},{text:"Credit Report",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*","auto","auto","auto"],body:[[{text:"Employee Name",style:"tableHeader",alignment:"center"},{text:"Product Name",style:"tableHeader",alignment:"center"},{text:"Pieces",style:"tableHeader",alignment:"center"},{text:"Price",style:"tableHeader",alignment:"center"},{text:"Amount",style:"tableHeader",alignment:"center"}],...F]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]},{width:"50%",stack:[{text:"Denomination Report",style:"subheader",alignment:"center"},{table:{headerRows:0,widths:["*","auto","*","auto"],body:[[{text:"Bills",style:"tableHeader",alignment:"center"},{text:"Pcs",style:"tableHeader",alignment:"center"},{text:"Coins",style:"tableHeader",alignment:"center"},{text:"Pcs",style:"tableHeader",alignment:"center"}],...T]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]}],columnGap:10},{},{canvas:[{type:"line",x1:0,y1:25,x2:580,y2:25,lineWidth:1,dash:{length:5,space:5},lineColor:"#000000",margin:[0,20,0,0]}]},{margin:[0,20,0,0],stack:[{text:"Summary",style:"subheader",alignment:"center"},ce]}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableHeader:{bold:!0,fontSize:10,color:"black"},body:{fontSize:8}},pageMargins:[10,10,10,10]}},o=l=>{const i=n(l);Le.exports.createPdf(i).getDataUrl(m=>{u.value=m,_.value=!0})};return(l,i)=>(b(),C(L,null,[e(A,{class:"my-card q-pa-md"},{default:t(()=>[e($,null,{default:t(()=>[a("div",Gl,[(b(!0),C(L,null,re(H(y),(m,c)=>(b(),C("div",{key:c},[e(A,{flat:"",dense:"",bordered:""},{default:t(()=>[e($,null,{default:t(()=>[a("div",Jl,[Wl,a("div",Xl,[e(V,{padding:"xs md",label:"Print",icon:"print",outline:"",class:"user-button",onClick:f=>o(m)},null,8,["onClick"]),a("div",null,[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D(" Print Report ")]),_:1})])])]),a("div",Zl,[a("div",null,"Name: "+g(d(m.user.employee)),1),a("div",null,"Date: "+g(w(m.created_at)),1),a("div",null,"Time: "+g(r(m.created_at)),1)])]),_:2},1024),a("div",en,[e(ul,{sales_Reports:[m]},null,8,["sales_Reports"]),e(Cl,{sales_Reports:[m]},null,8,["sales_Reports"]),e(Bl,{sales_Reports:[m]},null,8,["sales_Reports"]),e(Yl,{sales_Reports:[m]},null,8,["sales_Reports"])])]),_:2},1024)]))),128))])]),_:1})]),_:1}),e(E,{modelValue:_.value,"onUpdate:modelValue":i[0]||(i[0]=m=>_.value=m),maximized:x.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[a("div",tn,[a("div",an,[Z((b(),I(V,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},{default:t(()=>[e(le,null,{default:t(()=>[D("Close")]),_:1})]),_:1})),[[ee]])]),a("div",null,[a("iframe",{src:u.value,width:"100%",height:"700px"},null,8,ln)])])]),_:1},8,["modelValue","maximized"])],64))}};var on=Q(nn,[["__scopeId","data-v-5a5f240d"]]);const sn={class:"text-h6"},rn={class:"row q-gutter-x-md"},dn={__name:"ProductionReportDialog",props:["reports","reportLabel"],emits:["selectReport","hide","ok","cancel"],setup(s,{emit:p}){const{dialogRef:y,onDialogHide:x,onDialogOK:_,onDialogCancel:u}=fe(),w=s;console.log("production report",w.reports);const r=w.reports.baker_reports,d=w.reports.sales_reports,h=p,n=R("bakerReport"),o=R(!0),l=R(!1),i=c=>c?c.split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1).toLowerCase()).join(" "):"",m=()=>{h("selectReport",w.reports),l.value=!0};return(c,f)=>(b(),I(E,{ref_key:"dialogRef",ref:y,modelValue:l.value,"onUpdate:modelValue":f[2]||(f[2]=v=>l.value=v),onHide:H(x),onOk:m,onCancel:H(u),maximized:o.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(A,{style:{"background-color":"#f7f8fc"}},{default:t(()=>[e($,{class:"row items-center text-white",style:{"background-color":"#595a5a"}},{default:t(()=>[a("div",sn,g(`${i(s.reports.branch_name)} ( ${s.reportLabel} Reports)`),1),e(Ve),a("div",rn,[a("div",null,[Z((b(),I(V,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[ee]])])])]),_:1}),e($,null,{default:t(()=>[a("div",null,[e(Te,{modelValue:n.value,"onUpdate:modelValue":f[0]||(f[0]=v=>n.value=v),align:"justify","narrow-indicator":"",class:"q-mb-lg"},{default:t(()=>[e(te,{class:"text-purple",name:"bakerReport",label:"Baker Reports"}),e(te,{class:"text-orange",name:"salesReport",label:"Sales Report"})]),_:1},8,["modelValue"])]),a("div",null,[e(Ae,{modelValue:n.value,"onUpdate:modelValue":f[1]||(f[1]=v=>n.value=v),animated:"","transition-prev":"scale","transition-next":"scale",style:{"background-color":"#f7f8fc"}},{default:t(()=>[e(ae,{name:"bakerReport"},{default:t(()=>[e(Aa,{bakersReport:H(r)},null,8,["bakersReport"])]),_:1}),e(ae,{name:"salesReport"},{default:t(()=>[e(on,{salesReport:H(d)},null,8,["salesReport"])]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide","onCancel","maximized"]))}};var cn=Q(dn,[["__scopeId","data-v-643ff984"]]);const un=rt("productions",()=>{const s=R([]),p=R([]);return{productions:s,production:p,fetchAllProduction:async()=>{const _=await xe.get("/api/branch-production-report");s.value=_.data.reports},fetchBranchProductions:async _=>{try{const u=await xe.get(`/api/branches/${_}/production-report`);s.value=u.data}catch(u){console.log(u)}}}});const mn=s=>(W("data-v-12387bc6"),s=s(),X(),s),pn={key:0,class:"spinner-wrapper"},_n={key:1},fn={key:0,class:"data-error"},gn=mn(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),vn={class:"row justify-center q-gutter-x-md"},hn={__name:"ProductionTable",setup(s){const p=ie();R("bakerReport");const y=p.params.branch_id;R(!1),R(!0),R(""),R("");const x=R({rowsPerPage:0}),_=un(),u=R(""),w=B(()=>_.productions);R(!0);const r=R(!0),d=R(!1),h=B(()=>u.value?w.value.filter(c=>c.name.toLowerCase().includes(u.value.toLowerCase())):w.value);me(async()=>{y&&await n(y)});const n=async c=>{try{r.value=!0;const f=await _.fetchBranchProductions(c);console.log("Fetched data:",f),console.log("Production rows:",w.value),w.value.length||(d.value=!0)}catch{d.value=!0}finally{r.value=!1}};Me(u,async c=>{r.value=!0,await new Promise(f=>setTimeout(f,1e3)),r.value=!1,d.value=h.value.length===0});const l=[{name:"reportDate",align:"center",label:"Date",field:"date",format:c=>oe.formatDate(c,"MMMM DD, YYYY")},{name:"reports",align:"center",label:"Reports",field:"reports"}],i=ye(),m=(c,f)=>{i.dialog({component:cn,componentProps:{reports:c,reportLabel:f}})};return(c,f)=>(b(),C(L,null,[a("div",null,[e(G,{modelValue:u.value,"onUpdate:modelValue":f[0]||(f[0]=v=>u.value=v),class:"q-pb-lg q-pl-md",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100",style:{width:"500px","max-width":"1500px","min-width":"100px"}},{append:t(()=>[e(ne,{name:"search"})]),_:1},8,["modelValue"])]),r.value?(b(),C("div",pn,[e(He,{size:"50px",color:"primary"})])):(b(),C("div",_n,[h.value.length===0?(b(),C("div",fn,[e(ne,{name:"warning",color:"warning",size:"4em"}),gn])):(b(),I(se,{key:1,class:"table-container sticky-header",filter:u.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"400px"},columns:l,rows:h.value,"row-key":"reportDate","virtual-scroll":"",pagination:x.value,"onUpdate:pagination":f[1]||(f[1]=v=>x.value=v),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-reports":t(v=>[e(O,{props:v},{default:t(()=>[a("div",vn,[e(V,{padding:"xs lg",rounded:"",dense:"",size:"sm",color:"light-blue-5","text-color":"white",onClick:P=>m(v.row.AM,"AM")},{default:t(()=>[D("AM")]),_:2},1032,["onClick"]),e(V,{padding:"xs lg",rounded:"",dense:"",size:"sm",color:"deep-orange","text-color":"white",onClick:P=>m(v.row.PM,"PM")},{default:t(()=>[D("PM")]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var yn=Q(hn,[["__scopeId","data-v-12387bc6"]]);const bn={__name:"ProductionPage",setup(s){return(p,y)=>(b(),C("div",null,[e(yn)]))}},wn={class:"row justify-between"},xn=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),$n=a("div",{class:"text-h6"},"Decline Report",-1),kn={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){const p=Pe(),y=R(""),x=R(!1),_=R(!1),u=R({rowsPerPage:0}),w=ye(),r=s,d=()=>{_.value=!0},h=()=>{x.value=!0},n=async()=>{if(!y.value){w.notify({type:"negative",message:"Remark is required"});return}try{const c=await p.declineReport(r.report.id,y.value);console.log("Report declined:",c),w.notify({type:"negative",message:"Report declined successfully"}),x.value=!1,_.value=!1,y.value=""}catch(c){console.error("Error declining report:",c),w.notify({type:"negative",message:"Failed to decline report"})}},o=async()=>{try{const c=await p.confirmReport(r.report.id);console.log("Report confirmed:",c),w.notify({type:"positive",message:"Report confirmed successfully"}),_.value=!1}catch(c){console.error(c)}},l=B(()=>r.report.selecta_added_stocks||[]),i=c=>{const f=U=>U?U.charAt(0).toUpperCase()+U.slice(1).toLowerCase():"",v=c.firstname?f(c.firstname):"No Firstname",P=c.middlename?f(c.middlename).charAt(0)+".":"",S=c.lastname?f(c.lastname):"No Lastname";return`${v} ${P} ${S}`},m=[{name:"product_name",label:"Product Name",field:c=>c.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:c=>c.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:c=>c.added_stocks?`${c.added_stocks} pcs`:"N/A"}];return(c,f)=>(b(),C(L,null,[a("div",null,[e(V,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:d})]),e(E,{modelValue:_.value,"onUpdate:modelValue":f[2]||(f[2]=v=>_.value=v)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",wn,[xn,e(V,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:f[0]||(f[0]=v=>_.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+g(i(s.report.employee)),1),a("div",null," Branch: "+g(s.report.branch.name),1),a("div",null,[D(" Status: "),e(Y,{color:"yellow",outlined:""},{default:t(()=>[D(g(s.report.status),1)]),_:1})])]),_:1}),e($,null,{default:t(()=>[e(se,{rows:l.value,columns:m,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:u.value,"onUpdate:pagination":f[1]||(f[1]=v=>u.value=v),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e($,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(V,{color:"negative",label:"Decline",class:"action-btn",onClick:h}),e(V,{color:"positive",label:"Confirm",class:"action-btn",onClick:o})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(E,{modelValue:x.value,"onUpdate:modelValue":f[4]||(f[4]=v=>x.value=v)},{default:t(()=>[e(A,null,{default:t(()=>[e($,null,{default:t(()=>[$n]),_:1}),e($,null,{default:t(()=>[e(G,{modelValue:y.value,"onUpdate:modelValue":f[3]||(f[3]=v=>y.value=v),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[v=>!!v||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e($e,{align:"right"},{default:t(()=>[Z(e(V,{flat:"",label:"Cancel",color:"primary"},null,512),[[ee]]),e(V,{flat:"",label:"Confirm",color:"negative",onClick:n})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Cn=s=>(W("data-v-08e549d4"),s=s(),X(),s),Rn={class:"q-gutter-md q-ma-md"},Pn={class:"row justify-between"},Sn={class:"text-subtitle1"},Vn={class:"text-subtitle1"},Dn={class:"text-subtitle1"},qn={key:1,class:"data-error"},Nn=Cn(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Tn={__name:"TransactionPendingCard",setup(s){const p=ie(),y=Pe(),x=B(()=>y.pendingSelectaReports),_=p.params.branch_id,u=R("pending"),w=async()=>{try{const n=await y.fetchPendingSelectaStocks(_,u.value);console.log(x.value)}catch(n){console.error("Error fetching pending stocks:",n)}};me(async()=>{_&&await w()});const r=n=>oe.formatDate(n,"MMMM D, YYYY"),d=n=>oe.formatDate(n,"hh:mm A"),h=n=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",l=n.firstname?o(n.firstname):"No Firstname",i=n.middlename?o(n.middlename).charAt(0)+".":"",m=n.lastname?o(n.lastname):"No Lastname";return`${l} ${i} ${m}`};return(n,o)=>(b(),C("div",null,[e(ke,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Rn,[x.value.length?(b(!0),C(L,{key:0},re(x.value,(l,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",Pn,[a("div",Sn,g(r(l.created_at)),1),a("div",Vn,g(d(l.created_at)),1),a("div",Dn,g(l.branch.name)+" - "+g(h(l.employee)),1),a("div",null,[e(Y,{color:"yellow",outlined:""},{default:t(()=>[D(" Pending ")]),_:1})]),a("div",null,[e(kn,{report:l},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(b(),C("div",qn,[e(ne,{name:"warning",color:"warning",size:"4em"}),Nn]))])]),_:1})]))}};var An=Q(Tn,[["__scopeId","data-v-08e549d4"]]);const Un={class:"row justify-between"},Bn=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),In={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){Pe(),R(!1);const p=R(!1),y=()=>{p.value=!0};ye();const x=s,_=B(()=>(console.log("Filtered rows:",x.report||[]),x.report.selecta_added_stocks||[])),u=r=>{const d=l=>l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"",h=r.firstname?d(r.firstname):"No Firstname",n=r.middlename?d(r.middlename).charAt(0)+".":"",o=r.lastname?d(r.lastname):"No Lastname";return`${h} ${n} ${o}`},w=[{name:"product_name",label:"Product Name",field:r=>(console.log("Row data:",r),r.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:r=>(console.log("Row data:",r),r.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:r=>r.added_stocks?`${r.added_stocks} pcs`:"N/A"}];return(r,d)=>(b(),C(L,null,[a("div",null,[e(V,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:y})]),e(E,{modelValue:p.value,"onUpdate:modelValue":d[2]||(d[2]=h=>p.value=h)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",Un,[Bn,e(V,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=h=>p.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+g(u(s.report.employee)),1),a("div",null," Branch: "+g(s.report.branch.name),1),a("div",null,[D(" Status: "),e(Y,{color:"green",outlined:""},{default:t(()=>[D(g(s.report.status),1)]),_:1})])]),_:1}),e($,null,{default:t(()=>[e(se,{rows:_.value,columns:w,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:r.pagination,"onUpdate:pagination":d[1]||(d[1]=h=>r.pagination=h),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Fn=s=>(W("data-v-c1019cbc"),s=s(),X(),s),Ln={class:"q-gutter-md q-ma-md"},zn={class:"row justify-between"},Mn={class:"text-subtitle1"},Hn={class:"text-subtitle1"},jn={class:"text-subtitle1"},On={key:1,class:"data-error"},En=Fn(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Qn={__name:"TransactionConfirmedCard",setup(s){const p=ie(),y=Pe(),x=B(()=>y.confirmedSelectaReports),_=p.params.branch_id,u=R("confirmed"),w=async()=>{try{const n=await y.fetchConfirmedSelectaStocks(_,u.value);console.log(x.value)}catch(n){console.error("Error fetching confirmed stocks:",n)}};me(async()=>{_&&await w()});const r=n=>oe.formatDate(n,"MMMM D, YYYY"),d=n=>oe.formatDate(n,"hh:mm A"),h=n=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",l=n.firstname?o(n.firstname):"No Firstname",i=n.middlename?o(n.middlename).charAt(0)+".":"",m=n.lastname?o(n.lastname):"No Lastname";return`${l} ${i} ${m}`};return(n,o)=>(b(),C("div",null,[e(ke,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Ln,[x.value.length?(b(!0),C(L,{key:0},re(x.value,(l,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",zn,[a("div",Mn,g(r(l.created_at)),1),a("div",Hn,g(d(l.created_at)),1),a("div",jn,g(l.branch.name)+" - "+g(h(l.employee)),1),a("div",null,[e(Y,{color:"green",outlined:""},{default:t(()=>[D(g(l.status),1)]),_:2},1024)]),a("div",null,[e(In,{report:l},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(b(),C("div",On,[e(ne,{name:"warning",color:"warning",size:"4em"}),En]))])]),_:1})]))}};var Yn=Q(Qn,[["__scopeId","data-v-c1019cbc"]]);const Kn={class:"row justify-between"},Gn=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),Jn={class:"q-mt-md"},Wn={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){Pe(),R(!1);const p=R(!1),y=()=>{p.value=!0},x=s,_=B(()=>(console.log("Filtered rows:",x.report||[]),x.report.selecta_added_stocks||[])),u=r=>{const d=l=>l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"",h=r.firstname?d(r.firstname):"No Firstname",n=r.middlename?d(r.middlename).charAt(0)+".":"",o=r.lastname?d(r.lastname):"No Lastname";return`${h} ${n} ${o}`},w=[{name:"product_name",label:"Product Name",field:r=>(console.log("Row data:",r),r.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:r=>(console.log("Row data:",r),r.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:r=>r.added_stocks?`${r.added_stocks} pcs`:"N/A"}];return(r,d)=>(b(),C(L,null,[a("div",null,[e(V,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:y})]),e(E,{modelValue:p.value,"onUpdate:modelValue":d[2]||(d[2]=h=>p.value=h)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",Kn,[Gn,e(V,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=h=>p.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+g(u(s.report.employee)),1),a("div",null," Branch: "+g(s.report.branch.name),1),a("div",null,[D(" Status: "),e(Y,{color:"red",outlined:""},{default:t(()=>[D(g(s.report.status),1)]),_:1})]),a("div",Jn,"Remark: "+g(s.report.remark),1)]),_:1}),e($,null,{default:t(()=>[e(se,{rows:_.value,columns:w,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:r.pagination,"onUpdate:pagination":d[1]||(d[1]=h=>r.pagination=h),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Xn=s=>(W("data-v-6b801095"),s=s(),X(),s),Zn={class:"q-gutter-md q-ma-md"},eo={class:"row justify-between"},to={class:"text-subtitle1"},ao={class:"text-subtitle1"},lo={class:"text-subtitle1"},no={key:1,class:"data-error"},oo=Xn(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),so={__name:"TransactionDeclinedCard",setup(s){const p=ie(),y=Pe(),x=B(()=>y.declinedSelectaReports),_=p.params.branch_id,u=R("declined"),w=async()=>{try{const n=await y.fetchDeclinedSelectaStocks(_,u.value);console.log("selectedProductsDeclined",x.value)}catch(n){console.error("Error fetching decline stocks:",n)}};me(async()=>{_&&await w()});const r=n=>oe.formatDate(n,"MMMM D, YYYY"),d=n=>oe.formatDate(n,"hh:mm A"),h=n=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",l=n.firstname?o(n.firstname):"No Firstname",i=n.middlename?o(n.middlename).charAt(0)+".":"",m=n.lastname?o(n.lastname):"No Lastname";return`${l} ${i} ${m}`};return(n,o)=>(b(),C("div",null,[e(ke,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Zn,[x.value.length?(b(!0),C(L,{key:0},re(x.value,(l,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",eo,[a("div",to,g(r(l.created_at)),1),a("div",ao,g(d(l.created_at)),1),a("div",lo,g(l.branch.name)+" - "+g(h(l.employee)),1),a("div",null,[e(Y,{color:"red",outlined:""},{default:t(()=>[D(g(l.status),1)]),_:2},1024)]),a("div",null,[e(Wn,{report:l},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(b(),C("div",no,[e(ne,{name:"warning",color:"warning",size:"4em"}),oo]))])]),_:1})]))}};var ro=Q(so,[["__scopeId","data-v-6b801095"]]);const io={class:"q-gutter-y-sm"},co={__name:"SelectaTransactionPage",setup(s){const p=R("pendingReports"),y=B(()=>{switch(p.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return(x,_)=>(b(),C(L,null,[a("div",io,[e(Te,{modelValue:p.value,"onUpdate:modelValue":_[0]||(_[0]=u=>p.value=u),"indicator-color":y.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(te,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(te,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(te,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Ae,{modelValue:p.value,"onUpdate:modelValue":_[1]||(_[1]=u=>p.value=u),animated:""},{default:t(()=>[e(ae,{name:"pendingReports"},{default:t(()=>[e(An)]),_:1}),e(ae,{name:"confirmReports"},{default:t(()=>[e(Yn)]),_:1}),e(ae,{name:"declineReports"},{default:t(()=>[e(ro)]),_:1})]),_:1},8,["modelValue"])],64))}};var uo=Q(co,[["__scopeId","data-v-6cbd59c6"]]);const mo={class:"row justify-between"},po=a("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),_o=a("div",{class:"text-h6"},"Decline Report",-1),fo={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){const p=Ue(),y=R(""),x=R(!1),_=R(!1),u=R({rowPerPage:0}),w=ye(),r=s,d=()=>{_.value=!0},h=()=>{x.value=!0},n=async()=>{if(!y.value){w.notify({type:"negative",message:"Remark is required"});return}try{const c=await p.declineReport(r.report.id,y.value);console.log("Report declined:",c),w.notify({type:"negative",message:"Report declined successfully"}),x.value=!1,_.value=!1,y.value=""}catch(c){console.error("Error declining report:",c),w.notify({type:"negative",message:"Failed to decline report"})}},o=async()=>{try{const c=await p.confirmReport(r.report.id);console.log("Report confirmed:",c),w.notify({type:"positive",message:"Report confirmed successfully"}),_.value=!1}catch(c){console.error(c)}},l=B(()=>r.report.softdrinks_added_stocks||[]),i=c=>{const f=U=>U?U.charAt(0).toUpperCase()+U.slice(1).toLowerCase():"",v=c.firstname?f(c.firstname):"No Firstname",P=c.middlename?f(c.middlename).charAt(0)+".":"",S=c.lastname?f(c.lastname):"No Lastname";return`${v} ${P} ${S}`},m=[{name:"product_name",label:"Product Name",field:c=>c.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:c=>c.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:c=>c.added_stocks?`${c.added_stocks} pcs`:"N/A"}];return(c,f)=>(b(),C("div",null,[e(V,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:d}),e(E,{modelValue:_.value,"onUpdate:modelValue":f[2]||(f[2]=v=>_.value=v)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",mo,[po,e(V,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:f[0]||(f[0]=v=>_.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+g(i(s.report.employee)),1),a("div",null," Branch: "+g(s.report.branch.name),1),a("div",null,[D(" Status: "),e(Y,{color:"yellow",outlined:""},{default:t(()=>[D(g(s.report.status),1)]),_:1})])]),_:1}),e($,null,{default:t(()=>[e(se,{rows:l.value,columns:m,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:u.value,"onUpdate:pagination":f[1]||(f[1]=v=>u.value=v),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e($,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(V,{color:"negative",label:"Decline",class:"action-btn",onClick:h}),e(V,{color:"positive",label:"Confirm",class:"action-btn",onClick:o})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(E,{modelValue:x.value,"onUpdate:modelValue":f[4]||(f[4]=v=>x.value=v)},{default:t(()=>[e(A,null,{default:t(()=>[e($,null,{default:t(()=>[_o]),_:1}),e($,null,{default:t(()=>[e(G,{modelValue:y.value,"onUpdate:modelValue":f[3]||(f[3]=v=>y.value=v),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[v=>!!v||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e($e,{align:"right"},{default:t(()=>[Z(e(V,{flat:"",label:"Cancel",color:"primary"},null,512),[[ee]]),e(V,{flat:"",label:"Confirm",color:"negative",onClick:n})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};const go=s=>(W("data-v-7ba0107e"),s=s(),X(),s),vo={class:"q-gutter-md q-ma-md"},ho={class:"row justify-between"},yo={class:"text-subtitle1"},bo={class:"text-subtitle1"},wo={class:"text-subtitle1"},xo={key:1,class:"data-error"},$o=go(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),ko={__name:"TransactionPendingCard",setup(s){const p=ie(),y=Ue(),x=B(()=>y.pendingSoftdrinksReports),_=p.params.branch_id,u=R("pending"),w=async()=>{try{const n=await y.fetchPendingSoftdrinksStocks(_,u.value);console.log(x.value)}catch(n){console.error("Error fetching pending stocks:",n)}};me(async()=>{_&&await w()});const r=n=>oe.formatDate(n,"MMMM D, YYYY"),d=n=>oe.formatDate(n,"hh:mm A"),h=n=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",l=n.firstname?o(n.firstname):"No Firstname",i=n.middlename?o(n.middlename).charAt(0)+".":"",m=n.lastname?o(n.lastname):"No Lastname";return`${l} ${i} ${m}`};return(n,o)=>(b(),C("div",null,[e(ke,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",vo,[x.value.length?(b(!0),C(L,{key:0},re(x.value,(l,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",ho,[a("div",yo,g(r(l.created_at)),1),a("div",bo,g(d(l.created_at)),1),a("div",wo,g(l.branch.name)+" - "+g(h(l.employee)),1),a("div",null,[e(Y,{color:"yellow",outlined:""},{default:t(()=>[D(" Pending ")]),_:1})]),a("div",null,[e(fo,{report:l},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(b(),C("div",xo,[e(ne,{name:"warning",color:"warning",size:"4em"}),$o]))])]),_:1})]))}};var Co=Q(ko,[["__scopeId","data-v-7ba0107e"]]);const Ro={class:"row justify-between"},Po=a("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),So={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){Ue(),R(!1);const p=R(!1),y=()=>{p.value=!0},x=s,_=B(()=>(console.log("Filtered rows:",x.report||[]),x.report.softdrinks_added_stocks||[])),u=r=>{const d=l=>l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"",h=r.firstname?d(r.firstname):"No Firstname",n=r.middlename?d(r.middlename).charAt(0)+".":"",o=r.lastname?d(r.lastname):"No Lastname";return`${h} ${n} ${o}`},w=[{name:"product_name",label:"Product Name",field:r=>(console.log("Row data:",r),r.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:r=>(console.log("Row data:",r),r.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:r=>r.added_stocks?`${r.added_stocks} pcs`:"N/A"}];return(r,d)=>(b(),C(L,null,[a("div",null,[e(V,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:y})]),e(E,{modelValue:p.value,"onUpdate:modelValue":d[2]||(d[2]=h=>p.value=h)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",Ro,[Po,e(V,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=h=>p.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+g(u(s.report.employee)),1),a("div",null," Branch: "+g(s.report.branch.name),1),a("div",null,[D(" Status: "),e(Y,{color:"green",outlined:""},{default:t(()=>[D(g(s.report.status),1)]),_:1})])]),_:1}),e($,null,{default:t(()=>[e(se,{rows:_.value,columns:w,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:r.pagination,"onUpdate:pagination":d[1]||(d[1]=h=>r.pagination=h),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Vo=s=>(W("data-v-2b1290c8"),s=s(),X(),s),Do={class:"q-gutter-md q-ma-md"},qo={class:"row justify-between"},No={class:"text-subtitle1"},To={class:"text-subtitle1"},Ao={class:"text-subtitle1"},Uo={key:1,class:"data-error"},Bo=Vo(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Io={__name:"TransactionConfirmedCard",setup(s){const p=ie(),y=Ue(),x=B(()=>y.confirmedSoftdrinksReports),_=p.params.branch_id,u=R("confirmed"),w=async()=>{try{const n=await y.fetchConfirmedSoftdrinksStocks(_,u.value);console.log(x.value)}catch(n){console.error("Error fetching confirmed stocks",n)}};me(async()=>{_&&await w()});const r=n=>oe.formatDate(n,"MMMM D, YYYY"),d=n=>oe.formatDate(n,"hh:mm A"),h=n=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",l=n.firstname?o(n.firstname):"No Firstname",i=n.middlename?o(n.middlename).charAt(0)+".":"",m=n.lastname?o(n.lastname):"No Lastname";return`${l} ${i} ${m}`};return(n,o)=>(b(),C("div",null,[e(ke,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Do,[x.value.length?(b(!0),C(L,{key:0},re(x.value,(l,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",qo,[a("div",No,g(r(l.created_at)),1),a("div",To,g(d(l.created_at)),1),a("div",Ao,g(l.branch.name)+" - "+g(h(l.employee)),1),a("div",null,[e(Y,{color:"green",outlined:""},{default:t(()=>[D(g(l.status),1)]),_:2},1024)]),a("div",null,[e(So,{report:l},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(b(),C("div",Uo,[e(ne,{name:"warning",color:"warning",size:"4em"}),Bo]))])]),_:1})]))}};var Fo=Q(Io,[["__scopeId","data-v-2b1290c8"]]);const Lo={class:"row justify-between"},zo=a("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),Mo={class:"q-mt-md"},Ho={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){Ue();const p=R(!1),y=()=>{p.value=!0},x=s,_=B(()=>(console.log("Filtered rows:",x.report||[]),x.report.softdrinks_added_stocks)),u=r=>{const d=l=>l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"",h=r.firstname?d(r.firstname):"No Firstname",n=r.middlename?d(r.middlename).charAt(0)+".":"",o=r.lastname?d(r.lastname):"No Lastname";return`${h} ${n} ${o}`},w=[{name:"product_name",label:"Product Name",field:r=>(console.log("Row data:",r),r.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:r=>(console.log("Row data:",r),r.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:r=>r.added_stocks?`${r.added_stocks} pcs`:"N/A"}];return(r,d)=>(b(),C(L,null,[a("div",null,[e(V,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:y})]),e(E,{modelValue:p.value,"onUpdate:modelValue":d[2]||(d[2]=h=>p.value=h)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",Lo,[zo,e(V,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=h=>p.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+g(u(s.report.employee)),1),a("div",null," Branch: "+g(s.report.branch.name),1),a("div",null,[D(" Status: "),e(Y,{color:"red",outlined:""},{default:t(()=>[D(g(s.report.status),1)]),_:1})]),a("div",Mo,"Remark: "+g(s.report.remark),1)]),_:1}),e($,null,{default:t(()=>[e(se,{rows:_.value,columns:w,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:r.pagination,"onUpdate:pagination":d[1]||(d[1]=h=>r.pagination=h),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const jo=s=>(W("data-v-51a1abe5"),s=s(),X(),s),Oo={class:"q-gutter-md q-ma-md"},Eo={class:"row justify-between"},Qo={class:"text-subtitle1"},Yo={class:"text-subtitle1"},Ko={class:"text-subtitle1"},Go={key:1,class:"data-error"},Jo=jo(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Wo={__name:"TransactionDeclinedCard",setup(s){const p=ie(),y=Ue(),x=B(()=>y.declinedSoftdrinksReports),_=p.params.branch_id,u=R("declined"),w=async()=>{try{const n=await y.fetchDeclinedSoftdrinksStocks(_,u.value);console.log("softdrinksProductsDeclined",x.value)}catch(n){console.error("Error fetching decline stocks:",n)}};me(async()=>{_&&await w()});const r=n=>oe.formatDate(n,"MMMM D, YYYY"),d=n=>oe.formatDate(n,"hh:mm A"),h=n=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",l=n.firstname?o(n.firstname):"No Firstname",i=n.middlename?o(n.middlename).charAt(0)+".":"",m=n.lastname?o(n.lastname):"No Lastname";return`${l} ${i} ${m}`};return(n,o)=>(b(),I(ke,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Oo,[x.value.length?(b(!0),C(L,{key:0},re(x.value,(l,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",Eo,[a("div",Qo,g(r(l.created_at)),1),a("div",Yo,g(d(l.created_at)),1),a("div",Ko,g(l.branch.name)+" - "+g(h(l.employee)),1),a("div",null,[e(Y,{color:"red",outlined:""},{default:t(()=>[D(g(l.status),1)]),_:2},1024)]),a("div",null,[e(Ho,{report:l},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(b(),C("div",Go,[e(ne,{name:"warning",color:"warning",size:"4em"}),Jo]))])]),_:1}))}};var Xo=Q(Wo,[["__scopeId","data-v-51a1abe5"]]);const Zo={class:"q-gutter-y-sm"},es={__name:"SoftdrinksTransactionPage",setup(s){const p=R("pendingReports"),y=B(()=>{switch(p.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return(x,_)=>(b(),C(L,null,[a("div",Zo,[e(Te,{modelValue:p.value,"onUpdate:modelValue":_[0]||(_[0]=u=>p.value=u),"indicator-color":y.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(te,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(te,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(te,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Ae,{modelValue:p.value,"onUpdate:modelValue":_[1]||(_[1]=u=>p.value=u),animated:""},{default:t(()=>[e(ae,{name:"pendingReports"},{default:t(()=>[e(Co)]),_:1}),e(ae,{name:"confirmReports"},{default:t(()=>[e(Fo)]),_:1}),e(ae,{name:"declineReports"},{default:t(()=>[e(Xo)]),_:1})]),_:1},8,["modelValue"])],64))}};var ts=Q(es,[["__scopeId","data-v-368f5ccc"]]);const as={class:"row justify-between"},ls=a("div",{class:"text-h6"},"Other Product Added Stocks Report",-1),ns=a("div",{class:"text-h6"},"Decline Report",-1),os={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){const p=je(),y=R(""),x=R(!1),_=R(!1),u=R({rowsPerPage:0}),w=()=>{_.value=!0},r=()=>{x.value=!0},d=s,h=async()=>{if(!y.value){de.create({type:"negative",message:"Remark is required"});return}try{const m=await p.declineReport(d.report.id,y.value);console.log("Report declined:",m),de.create({type:"negative",message:"Report declined successfully"}),x.value=!1,_.value=!1,y.value=""}catch(m){console.error("Error declining report:",m),de.create({type:"negative",message:"Failed to decline report"})}},n=async()=>{try{const m=await p.confirmReport(d.report.id);console.log("Report confirmed:",m),de.create({type:"positive",message:"Report confirmed successfully"}),_.value=!1}catch(m){console.error(m)}},o=B(()=>d.report.other_added_stock||[]),l=[{name:"product_name",label:"Product Name",field:m=>m.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:m=>m.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:m=>m.added_stocks?`${m.added_stocks} pcs`:"N/A"}],i=m=>{const c=S=>S?S.charAt(0).toUpperCase()+S.slice(1).toLowerCase():"",f=m.firstname?c(m.firstname):"No Firstname",v=m.middlename?c(m.middlename).charAt(0)+".":"",P=m.lastname?c(m.lastname):"No Lastname";return`${f} ${v} ${P}`};return(m,c)=>(b(),C(L,null,[a("div",null,[e(V,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:w})]),e(E,{modelValue:_.value,"onUpdate:modelValue":c[2]||(c[2]=f=>_.value=f)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",as,[ls,e(V,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:c[0]||(c[0]=f=>_.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+g(i(s.report.employee)),1),a("div",null," Branch: "+g(s.report.branch.name),1),a("div",null,[D(" Status: "),e(Y,{color:"yellow",outlined:""},{default:t(()=>[D(g(s.report.status),1)]),_:1})])]),_:1}),e($,null,{default:t(()=>[e(se,{rows:o.value,columns:l,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:u.value,"onUpdate:pagination":c[1]||(c[1]=f=>u.value=f),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e($,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(V,{color:"negative",label:"Decline",class:"action-btn",onClick:r}),e(V,{color:"positive",label:"Confirm",class:"action-btn",onClick:n})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(E,{modelValue:x.value,"onUpdate:modelValue":c[4]||(c[4]=f=>x.value=f)},{default:t(()=>[e(A,null,{default:t(()=>[e($,null,{default:t(()=>[ns]),_:1}),e($,null,{default:t(()=>[e(G,{modelValue:y.value,"onUpdate:modelValue":c[3]||(c[3]=f=>y.value=f),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[f=>!!f||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e($e,{align:"right"},{default:t(()=>[Z(e(V,{flat:"",label:"Cancel",color:"primary"},null,512),[[ee]]),e(V,{flat:"",label:"Confirm",color:"negative",onClick:h})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const ss=s=>(W("data-v-355e3e60"),s=s(),X(),s),rs={class:"q-gutter-md q-ma-md"},is={key:0},ds={class:"row justify-between"},cs={class:"text-subtitle1"},us={class:"text-subtitle1"},ms={class:"text-subtitle1"},ps={key:1,class:"data-error"},_s=ss(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),fs={__name:"TransactionPendingCard",setup(s){const p=ie(),y=je(),x=B(()=>y.pendingOtherReports),_=p.params.branch_id,u=R("pending"),w=async()=>{try{const n=await y.fetchPendingOtherStocks(_,u.value);console.log(x.value)}catch(n){console.error("Error fetching pending stocks:",n)}};me(async()=>{_&&await w()});const r=n=>oe.formatDate(n,"MMMM D, YYYY"),d=n=>oe.formatDate(n,"hh:mm A"),h=n=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",l=n.firstname?o(n.firstname):"No Firstname",i=n.middlename?o(n.middlename).charAt(0)+".":"",m=n.lastname?o(n.lastname):"No Lastname";return`${l} ${i} ${m}`};return(n,o)=>(b(),C("div",null,[e(ke,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",rs,[x.value.length?(b(),C("div",is,[(b(!0),C(L,null,re(x.value,(l,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",ds,[a("div",cs,g(r(l.created_at)),1),a("div",us,g(d(l.created_at)),1),a("div",ms,g(l.branch.name)+" - "+g(h(l.employee)),1),a("div",null,[e(Y,{color:"yellow",outlined:""},{default:t(()=>[D(" Pending ")]),_:1})]),a("div",null,[e(os,{report:l},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128))])):(b(),C("div",ps,[e(ne,{name:"warning",color:"warning",size:"4em"}),_s]))])]),_:1})]))}};var gs=Q(fs,[["__scopeId","data-v-355e3e60"]]);const vs={class:"row justify-between"},hs=a("div",{class:"text-h6"},"Other Added Stocks Report",-1),ys={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){Pe(),R(!1);const p=R(!1),y=()=>{p.value=!0};ye();const x=s,_=B(()=>(console.log("Filtered rows:",x.report||[]),x.report.other_added_stock||[])),u=r=>{const d=l=>l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"",h=r.firstname?d(r.firstname):"No Firstname",n=r.middlename?d(r.middlename).charAt(0)+".":"",o=r.lastname?d(r.lastname):"No Lastname";return`${h} ${n} ${o}`},w=[{name:"product_name",label:"Product Name",field:r=>(console.log("Row data:",r),r.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:r=>(console.log("Row data:",r),r.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:r=>r.added_stocks?`${r.added_stocks} pcs`:"N/A"}];return(r,d)=>(b(),C(L,null,[a("div",null,[e(V,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:y})]),e(E,{modelValue:p.value,"onUpdate:modelValue":d[2]||(d[2]=h=>p.value=h)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",vs,[hs,e(V,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=h=>p.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+g(u(s.report.employee)),1),a("div",null," Branch: "+g(s.report.branch.name),1),a("div",null,[D(" Status: "),e(Y,{color:"green",outlined:""},{default:t(()=>[D(g(s.report.status),1)]),_:1})])]),_:1}),e($,null,{default:t(()=>[e(se,{rows:_.value,columns:w,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:r.pagination,"onUpdate:pagination":d[1]||(d[1]=h=>r.pagination=h),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const bs=s=>(W("data-v-5b0a7351"),s=s(),X(),s),ws={class:"q-gutter-md q-ma-md"},xs={class:"row justify-between"},$s={class:"text-subtitle1"},ks={class:"text-subtitle1"},Cs={class:"text-subtitle1"},Rs={key:1,class:"data-error"},Ps=bs(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ss={__name:"TransactionConfirmedCard",setup(s){const p=ie(),y=je(),x=B(()=>y.confirmedOtherReports),_=p.params.branch_id,u=R("confirmed"),w=async()=>{try{const n=await y.fetchConfirmedOtherStocks(_,u.value);console.log(x.value)}catch(n){console.error("Error fetching confirmed stocks:",n)}};me(async()=>{_&&await w()});const r=n=>oe.formatDate(n,"MMMM D, YYYY"),d=n=>oe.formatDate(n,"hh:mm A"),h=n=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",l=n.firstname?o(n.firstname):"No Firstname",i=n.middlename?o(n.middlename).charAt(0)+".":"",m=n.lastname?o(n.lastname):"No Lastname";return`${l} ${i} ${m}`};return(n,o)=>(b(),C("div",null,[e(ke,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",ws,[x.value.length?(b(!0),C(L,{key:0},re(x.value,(l,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",xs,[a("div",$s,g(r(l.created_at)),1),a("div",ks,g(d(l.created_at)),1),a("div",Cs,g(l.branch.name)+" - "+g(h(l.employee)),1),a("div",null,[e(Y,{color:"green",outlined:""},{default:t(()=>[D(g(l.status),1)]),_:2},1024)]),a("div",null,[e(ys,{report:l},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(b(),C("div",Rs,[e(ne,{name:"warning",color:"warning",size:"4em"}),Ps]))])]),_:1})]))}};var Vs=Q(Ss,[["__scopeId","data-v-5b0a7351"]]);const Ds={class:"row justify-between"},qs=a("div",{class:"text-h6"},"Others Added Stocks Report",-1),Ns={class:"q-mt-md"},Ts={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){Pe(),R(!1);const p=R(!1),y=()=>{p.value=!0},x=s,_=B(()=>(console.log("Filtered rows:",x.report||[]),x.report.other_added_stock||[])),u=r=>{const d=l=>l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"",h=r.firstname?d(r.firstname):"No Firstname",n=r.middlename?d(r.middlename).charAt(0)+".":"",o=r.lastname?d(r.lastname):"No Lastname";return`${h} ${n} ${o}`},w=[{name:"product_name",label:"Product Name",field:r=>(console.log("Row data:",r),r.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:r=>(console.log("Row data:",r),r.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:r=>r.added_stocks?`${r.added_stocks} pcs`:"N/A"}];return(r,d)=>(b(),C(L,null,[a("div",null,[e(V,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:y})]),e(E,{modelValue:p.value,"onUpdate:modelValue":d[2]||(d[2]=h=>p.value=h)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",Ds,[qs,e(V,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=h=>p.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+g(u(s.report.employee)),1),a("div",null," Branch: "+g(s.report.branch.name),1),a("div",null,[D(" Status: "),e(Y,{color:"red",outlined:""},{default:t(()=>[D(g(s.report.status),1)]),_:1})]),a("div",Ns,"Remark: "+g(s.report.remark),1)]),_:1}),e($,null,{default:t(()=>[e(se,{rows:_.value,columns:w,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:r.pagination,"onUpdate:pagination":d[1]||(d[1]=h=>r.pagination=h),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const As=s=>(W("data-v-67ff56ab"),s=s(),X(),s),Us={class:"q-gutter-md q-ma-md"},Bs={class:"row justify-between"},Is={class:"text-subtitle1"},Fs={class:"text-subtitle1"},Ls={class:"text-subtitle1"},zs={key:1,class:"data-error"},Ms=As(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Hs={__name:"TransactionDeclinedCard",setup(s){const p=ie(),y=je(),x=B(()=>y.declinedOtherReports),_=p.params.branch_id,u=R("declined"),w=async()=>{try{const n=await y.fetchDeclinedOtherStocks(_,u.value);console.log("selectedOtherProductDeclined",x.value)}catch(n){console.error("Error fetching decline stocks:",n)}};me(async()=>{_&&await w()});const r=n=>oe.formatDate(n,"MMMM D, YYYY"),d=n=>oe.formatDate(n,"hh:mm A"),h=n=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",l=n.firstname?o(n.firstname):"No Firstname",i=n.middlename?o(n.middlename).charAt(0)+".":"",m=n.lastname?o(n.lastname):"No Lastname";return`${l} ${i} ${m}`};return(n,o)=>(b(),C("div",null,[e(ke,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Us,[x.value.length?(b(!0),C(L,{key:0},re(x.value,(l,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",Bs,[a("div",Is,g(r(l.created_at)),1),a("div",Fs,g(d(l.created_at)),1),a("div",Ls,g(l.branch.name)+" - "+g(h(l.employee)),1),a("div",null,[e(Y,{color:"red",outlined:""},{default:t(()=>[D(g(l.status),1)]),_:2},1024)]),a("div",null,[e(Ts,{report:l},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(b(),C("div",zs,[e(ne,{name:"warning",color:"warning",size:"4em"}),Ms]))])]),_:1})]))}};var js=Q(Hs,[["__scopeId","data-v-67ff56ab"]]);const Os={class:"q-gutter-y-sm"},Es={__name:"OtherTransactionPage",setup(s){const p=R("pendingReports"),y=B(()=>{switch(p.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return(x,_)=>(b(),C(L,null,[a("div",Os,[e(Te,{modelValue:p.value,"onUpdate:modelValue":_[0]||(_[0]=u=>p.value=u),"indicator-color":y.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(te,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(te,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(te,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Ae,{modelValue:p.value,"onUpdate:modelValue":_[1]||(_[1]=u=>p.value=u),animated:""},{default:t(()=>[e(ae,{name:"pendingReports"},{default:t(()=>[e(gs)]),_:1}),e(ae,{name:"confirmReports"},{default:t(()=>[e(Vs)]),_:1}),e(ae,{name:"declineReports"},{default:t(()=>[e(js)]),_:1})]),_:1},8,["modelValue"])],64))}};var Qs=Q(Es,[["__scopeId","data-v-b76c19b4"]]);const lt=s=>(W("data-v-0a732ed6"),s=s(),X(),s),Ys={class:"q-gutter-y-sm"},Ks=lt(()=>a("h1",null,"Bread",-1)),Gs=lt(()=>a("h1",null,"Cake",-1)),Js={__name:"TransactionPage",setup(s){const p=R("bread");return(y,x)=>(b(),C(L,null,[a("div",Ys,[e(Te,{modelValue:p.value,"onUpdate:modelValue":x[0]||(x[0]=_=>p.value=_),"active-color":"light-green-13","indicator-color":"light-green-13","narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:"gradient-btn"},{default:t(()=>[e(te,{class:"text-white",name:"bread",label:"\u{1F35E}Bread"}),e(te,{class:"text-white",name:"selecta",label:"\u{1F366}Selecta"}),e(te,{class:"text-white",name:"softdrinks",label:"\u{1F964}Softdrinks"}),e(te,{class:"text-white",name:"cake",label:"\u{1F370}Cake"}),e(te,{class:"text-white",name:"other",label:"\u2B50Others"})]),_:1},8,["modelValue"])]),e(Ae,{modelValue:p.value,"onUpdate:modelValue":x[1]||(x[1]=_=>p.value=_),animated:""},{default:t(()=>[e(ae,{name:"bread"},{default:t(()=>[e(A,null,{default:t(()=>[Ks]),_:1})]),_:1}),e(ae,{name:"selecta"},{default:t(()=>[e(uo)]),_:1}),e(ae,{name:"softdrinks"},{default:t(()=>[e(ts)]),_:1}),e(ae,{name:"cake"},{default:t(()=>[e(A,null,{default:t(()=>[Gs]),_:1})]),_:1}),e(ae,{name:"other"},{default:t(()=>[e(Qs)]),_:1})]),_:1},8,["modelValue"])],64))}};var Ws=Q(Js,[["__scopeId","data-v-0a732ed6"]]);const De=s=>(W("data-v-08dbe5d4"),s=s(),X(),s),Xs=De(()=>a("div",{class:"text-h6"},"Create Branch Recipe",-1)),Zs={class:"q-mb-lg"},er={key:0,class:"custom-list z-top"},tr={class:"q-mb-sm"},ar=De(()=>a("div",null,"Recipe Name",-1)),lr={class:"q-mb-lg"},nr=De(()=>a("div",null,"Category",-1)),or=De(()=>a("div",null,"Breads",-1)),sr={class:"q-mt-md q-gutter-y-sm"},rr=De(()=>a("div",{class:"text-weight-thin"},"Ingredients List",-1)),ir={class:"q-mt-xl q-gutter-y-sm"},dr={class:"row justify-between"},cr=De(()=>a("div",{align:"center"},"Ingredients",-1)),ur=De(()=>a("div",{align:"center"},"Quantity",-1)),mr=["onKeyup"],pr={align:"right"},_r={__name:"RecipeCreate",setup(s){const p=ie(),y=p.params.branch_id,x=mt(),_=B(()=>x.recipes),u=ze(),w=Xe(),r=ze(),d=B(()=>u.branchRecipes),h=R(!1),n=()=>{h.value=!0},o=()=>{clearForm(),h.value=!1},l=z=>z?z.split(" ").map(M=>M.charAt(0).toUpperCase()+M.slice(1).toLowerCase()).join(" "):"",i=R(""),m=async()=>{x.searchRecipe(i.value)},c=B(()=>v.target!==0),f=z=>{v.recipe_id=z.id,v.recipe_name=z.name,v.category=z.category,i.value=""},v=Be({recipe_id:"",recipe_name:"",category:"",target:"",branches_id:p.params.branch_id}),P=R(!1),S=R(null),U=R([]),N=R(U.value),k=R([]),F=R([]),q=Be({name:"",quantity:""}),T=R(F.value);(async()=>{await w.fetchProductsByCategory("Bread"),P.value=!1,U.value=w.breads.map(z=>({label:z.name,value:z.id}))})(),(async()=>{const z="Ingredients";await r.fetchBranchRawMaterials(z,y),P.value=!1,F.value=r.ingredients.map(M=>({label:M.raw_material_name,value:M.raw_material_id,unit:M.ingredient_unit}))})();const J=()=>{q.name="",q.quantity=""},ge=(z,M)=>{z.length>2&&(U.value.includes(z)||M(z,"add-unique"))},pe=(z,M)=>{M(()=>{if(z==="")N.value=U.value;else{const he=z.toLowerCase();N.value=U.value.filter(K=>K.label.toLowerCase().indexOf(he)>-1)}})},ve=(z,M)=>{M(()=>{if(z==="")T.value=F.value;else{const he=z.toLowerCase();T.value=F.value.filter(K=>K.label.toLowerCase().indexOf(he)>-1)}})},qe=()=>{const z=k.value;function M(Ce,Oe){return Ce.find(ot=>ot.ingredients_id==Oe)}const he=q.name.value;M(z,he)?de.create({type:"negative",icon:"warning",message:"Ingredient already exist",timeout:2e3}):(k.value=[...z,{ingredients_id:q.name.value,label:q.name.label,quantity:q.quantity,unit:q.name.unit}],J())},ue=z=>{k.value.splice(z,1)};Me(()=>q.name,z=>{z&&z.unit?q.unit=z.unit:q.unit=""});const _e=()=>{v.recipe_id="",v.target="",S.value=null,k.value=[],q.name="",q.quantity=""},be=async()=>{const z={recipe_id:v.recipe_id,target:v.target,status:"active",branch_id:v.branches_id,breads:S.value.map(M=>({bread_id:M.value})),ingredients:k.value.map(M=>({ingredient_id:M.ingredients_id,quantity:M.quantity}))};console.log("branchRecipe",z),await u.saveBranchRecipe(z),d.value=await u.fetchBranchRecipes(y),_e(),h.value=!1};return(z,M)=>(b(),C(L,null,[e(V,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Recipe",onClick:n}),e(E,{modelValue:h.value,"onUpdate:modelValue":M[7]||(M[7]=he=>h.value=he)},{default:t(()=>[e(A,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e($,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[Xs,e(Ve),Z(e(V,{icon:"close",flat:"",dense:"",round:""},null,512),[[ee]])]),_:1}),e($,null,{default:t(()=>{var he;return[a("div",Zs,[e(G,{modelValue:i.value,"onUpdate:modelValue":[M[0]||(M[0]=K=>i.value=K),m],debounce:"1000",outlined:"",rounded:"",placeholder:"Search recipe",dense:""},{append:t(()=>[a("div",null,[e(ne,{name:"search"})])]),default:t(()=>[i.value?(b(),C("div",er,[e(A,null,{default:t(()=>[e(Ie,{separator:""},{default:t(()=>{var K;return[(K=_.value)!=null&&K.length?(b(!0),C(L,{key:1},re(_.value,Ce=>(b(),I(we,{onClick:Oe=>f(Ce),key:Ce.id,clickable:""},{default:t(()=>[e(Re,null,{default:t(()=>[e(Fe,null,{default:t(()=>[D(g(l(Ce.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(b(),I(we,{key:0},{default:t(()=>[D(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Qe("",!0)]),_:1},8,["modelValue"])]),a("div",tr,[ar,e(G,{modelValue:v.recipe_name,"onUpdate:modelValue":M[1]||(M[1]=K=>v.recipe_name=K),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",lr,[nr,e(G,{modelValue:v.category,"onUpdate:modelValue":M[2]||(M[2]=K=>v.category=K),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[e(G,{modelValue:v.target,"onUpdate:modelValue":M[3]||(M[3]=K=>v.target=K),outlined:"",dense:"",suffix:" / 1kg",type:"number",label:"Target Pcs"},null,8,["modelValue"])]),a("div",null,[or,e(Ee,{modelValue:S.value,"onUpdate:modelValue":M[4]||(M[4]=K=>S.value=K),"use-input":"","use-chips":"","chips-color":"primary",multiple:"","input-debounce":"0",options:N.value,behavior:"menu","hide-dropdown-icon":"",outlined:"",dense:"",label:"Bread/s",onNewValue:ge,onFilter:pe,rules:[K=>K&&K.length>0||"Bread is required"]},{"no-option":t(()=>[e(we,null,{default:t(()=>[e(Re,{class:"text-grey"},{default:t(()=>[D(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),a("div",sr,[rr,a("div",null,[e(Ie,{dense:"",separator:"",class:"box"},{default:t(()=>[(b(!0),C(L,null,re(k.value,(K,Ce)=>(b(),I(we,{key:Ce},{default:t(()=>[e(Re,null,{default:t(()=>[e(Fe,null,{default:t(()=>[D(g(K.label),1)]),_:2},1024)]),_:2},1024),e(Re,null,{default:t(()=>[D(g(K.quantity)+" "+g(K.unit),1)]),_:2},1024),e(Re,{side:""},{default:t(()=>[e(V,{onClick:Oe=>ue(Ce),color:"grey-10",icon:"backspace",dense:"",flat:"",round:""},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),a("div",ir,[a("div",dr,[a("div",null,[cr,e(Ee,{modelValue:q.name,"onUpdate:modelValue":M[5]||(M[5]=K=>q.name=K),debounce:"3000",outlined:"","chips-color":"primary",options:T.value,dense:"",label:"Ingredients",behavior:"menu","use-input":"","hide-dropdown-icon":"",onFilter:ve,style:{width:"215px","max-width":"450px","min-width":"80px"}},{"no-option":t(()=>[e(we,null,{default:t(()=>[e(Re,{class:"text-grey"},{default:t(()=>[D(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),a("div",null,[ur,e(G,{modelValue:q.quantity,"onUpdate:modelValue":M[6]||(M[6]=K=>q.quantity=K),modelModifiers:{number:!0},outlined:"",dense:"",type:"number",label:"Quantity",suffix:((he=q==null?void 0:q.name)==null?void 0:he.unit)||"",style:{width:"115px"},hint:"Enter the quantity as a decimal",mask:"##.##"},null,8,["modelValue","suffix"])])]),a("form",{onKeyup:Se(it(qe,["prevent"]),["enter"])},[a("div",pr,[e(V,{padding:"xs md",type:"button",size:"sm",outline:"",dense:"",label:"add",icon:"add",color:"purple",onClick:qe})])],40,mr)])]}),_:1}),e($e,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(V,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:o}),e(V,{class:"glossy",color:"teal",label:"Create",onClick:be,disable:!c.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var fr=Q(_r,[["__scopeId","data-v-08dbe5d4"]]);const nt=s=>(W("data-v-33664d62"),s=s(),X(),s),gr=nt(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),vr=nt(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),hr={__name:"RecipeDelete",props:["delete"],setup(s){const p=ze(),y=s,x=R(!1),_=()=>{x.value=!0},u=async()=>{await p.deleteRecipe(y.delete.row.id),x.value=!1};return(w,r)=>(b(),C(L,null,[e(V,{onClick:_,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"","aria-label":"Delete"},{default:t(()=>[e(le,{class:"bg-negative",delay:200},{default:t(()=>[D("Delete")]),_:1})]),_:1}),e(E,{modelValue:x.value,"onUpdate:modelValue":r[0]||(r[0]=d=>x.value=d),persistent:""},{default:t(()=>[e(A,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e($,{class:"q-pt-none q-pb-sm"},{default:t(()=>[gr,vr]),_:1}),e(Ye,{class:"q-mb-md"}),e($,null,{default:t(()=>[e($e,{align:"right",class:"q-pt-none"},{default:t(()=>[Z(e(V,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[ee]]),e(V,{dense:"",label:"Delete",color:"negative",onClick:u,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var yr=Q(hr,[["__scopeId","data-v-33664d62"]]);const br=s=>(W("data-v-7a0c8b2e"),s=s(),X(),s),wr={class:"text-h6 text-white"},xr=br(()=>a("div",{class:"text-h6",align:"center"},"Bread List",-1)),$r={class:"row"},kr={__name:"RecipeBreadGroups",props:["breadGroups"],setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=fe();console.log("breadGroups",s.breadGroups);const w=r=>r?r.split(" ").map(d=>d.charAt(0).toUpperCase()+d.slice(1).toLowerCase()).join(" "):"";return(r,d)=>(b(),I(E,{ref_key:"dialogRef",ref:p,onHide:H(y),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(A,{style:{width:"500px","max-width":"120vw"}},{default:t(()=>[e($,{class:"row bg-backgroud text-h6"},{default:t(()=>[a("div",wr,g(w(s.breadGroups.name)),1),e(Ve),a("div",null,[Z(e(V,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[ee]])])]),_:1}),e($,null,{default:t(()=>[xr]),_:1}),e($,null,{default:t(()=>[(b(!0),C(L,null,re(s.breadGroups.bread_groups,(h,n)=>(b(),C("div",{key:n},[a("div",$r,g(h),1)]))),128))]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Cr=Q(kr,[["__scopeId","data-v-7a0c8b2e"]]);const Rr=s=>(W("data-v-143226c8"),s=s(),X(),s),Pr={class:"text-h6 text-white"},Sr=Rr(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Vr={class:"row"},Dr={__name:"RecipeIngredientGroups",props:["ingredientGroups"],setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=fe();console.log("ingredientGroups",s.ingredientGroups);const w=r=>r?r.split(" ").map(d=>d.charAt(0).toUpperCase()+d.slice(1).toLowerCase()).join(" "):"";return(r,d)=>(b(),I(E,{ref_key:"dialogRef",ref:p,onHide:H(y),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(A,{style:{width:"500px","max-width":"120vw"}},{default:t(()=>[e($,{class:"row bg-backgroud text-h6"},{default:t(()=>[a("div",Pr,g(w(s.ingredientGroups.name)),1),e(Ve),a("div",null,[Z(e(V,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[ee]])])]),_:1}),e($,null,{default:t(()=>[Sr]),_:1}),e($,null,{default:t(()=>[(b(!0),C(L,null,re(s.ingredientGroups.ingredient_groups,(h,n)=>(b(),C("div",{key:n},[a("div",Vr,g(h),1)]))),128))]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var qr=Q(Dr,[["__scopeId","data-v-143226c8"]]);const Nr=s=>(W("data-v-1fcb507c"),s=s(),X(),s),Tr={class:"row justify-between"},Ar={class:"q-my-sm"},Ur={key:0,class:"spinner-wrapper"},Br={key:1},Ir={key:0,class:"data-error"},Fr=Nr(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Lr={class:"row justify-center q-gutter-x-md"},zr={__name:"RecipeTable",setup(s){const y=ie().params.branch_id,x=ze(),_=R(""),u=R(!0),w=R([]),r=R(!1),d=R({rowsPerPage:0}),h=["inactive","active"],n=B(()=>x.branchRecipes);console.log("branch recipe",n.value);const o=B(()=>_.value?n.value.filter(k=>k.name.toLowerCase().includes(_.value.toLowerCase())):n.value);me(async()=>{y&&await l(y)});const l=async k=>{try{u.value=!0;const F=await x.fetchBranchRecipes(k);n.value=F,console.log("branchRecipeRows",n.value),n.value.length||(r.value=!0),console.log("Branch recipe",n.value)}catch(F){console.log("Error fetching recipe",F)}finally{u.value=!1}},i=k=>!k&&k!==0?"Set Target":typeof k=="number"||!isNaN(k)?(k=parseFloat(k),k%1===0?k:parseFloat(k.toFixed(1))):k;async function m(k,F){try{const q=await xe.put("/api/update-target/"+k.id,{target:parseFloat(F)});if(console.log("response",q),q.status==200){const T=w.value.findIndex(j=>j.id==k.id);w.value[T]=F}de.create({type:"positive",message:"Recipe target edited successfully"})}catch(q){console.error("Error updating recipe target:",q),de.create({type:"negative",message:"Failed to edit recipe target"})}}async function c(k,F){try{if((await xe.put("/api/branch-update-status/"+k.id,{status:F})).status==200){const T=w.value.findIndex(j=>j.id==k.id);w.value[T]=F}de.create({type:"positive",message:"Recipe status change successfully"})}catch(q){console.error("Error updating recipe status:",q),de.create({type:"negative",message:"Failed to change recipe status"})}}const f=k=>k?k.split(" ").map(F=>F.charAt(0).toUpperCase()+F.slice(1).toLowerCase()).join(" "):"",v=[{name:"name",label:"Recipe name",align:"center",field:k=>k.name},{name:"category",label:"Category",align:"center",field:k=>k.recipe},{name:"target",label:"Target",align:"center",field:k=>i(k.target)},{name:"status",label:"Status",align:"center",field:"status"},{name:"bread_groups",label:"List of Bread",align:"center",field:"bread_groups"},{name:"ingredient_groups",label:"List of Ingredients",align:"center",field:"ingredient_groups"},{name:"action",label:"Action",align:"center",sortable:!0}],P=ye(),S=k=>{console.log("Bread Groups:",k),P.dialog({component:Cr,componentProps:{breadGroups:k}})},U=k=>{console.log("Ingredients Groups:",k),P.dialog({component:qr,componentProps:{ingredientGroups:k}})},N=k=>{switch(k){case"inactive":return"grey";case"active":return"green";default:return"grey"}};return(k,F)=>(b(),C(L,null,[a("div",Tr,[a("div",null,[e(G,{class:"q-pb-lg q-pl-md",modelValue:_.value,"onUpdate:modelValue":F[0]||(F[0]=q=>_.value=q),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"1500px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(ne,{name:"search"})]),_:1},8,["modelValue"])]),a("div",Ar,[e(fr)])]),u.value?(b(),C("div",Ur,[e(He,{size:"50px",color:"primary"})])):(b(),C("div",Br,[o.value.length===0?(b(),C("div",Ir,[e(ne,{name:"warning",color:"warning",size:"4em"}),Fr])):(b(),I(se,{key:1,class:"table-container sticky-header",filter:_.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:v,rows:o.value,"row-key":"name","virtual-scroll":"",pagination:d.value,"onUpdate:pagination":F[1]||(F[1]=q=>d.value=q),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"}},{"body-cell-name":t(q=>[e(O,{props:q},{default:t(()=>[a("span",null,g(f(q.row.name)),1)]),_:2},1032,["props"])]),"body-cell-category":t(q=>[e(O,{props:q},{default:t(()=>[a("span",null,g(f(q.row.category)),1)]),_:2},1032,["props"])]),"body-cell-target":t(q=>[e(O,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[D(g(i(q.row.target))+" ",1),e(le,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[D("Edit Target")]),_:1})]),e(Ne,{"onUpdate:modelValue":[T=>m(q.row,T),T=>q.row.target=T],modelValue:q.row.target,"auto-save":""},{default:t(T=>[e(G,{modelValue:T.value,"onUpdate:modelValue":j=>T.value=j,dense:"",suffix:"pcs",autofocus:"",counter:"",onKeyup:Se(T.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-status":t(q=>[e(O,{props:q},{default:t(()=>[e(Y,{outline:"",color:N(q.row.status)},{default:t(()=>[D(g(f(q.row.status))+" ",1),e(le,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[D("Change Status")]),_:1})]),_:2},1032,["color"]),e(Ne,{"onUpdate:modelValue":[T=>c(q.row,T),T=>q.row.status=T],modelValue:q.row.status,"auto-save":""},{default:t(T=>[a("span",null,g(q.row.name),1),e(Ee,{modelValue:T.value,"onUpdate:modelValue":j=>T.value=j,dense:"",label:"status",autofocus:"",options:h,counter:"",mask:"###",onKeyup:Se(T.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-bread_groups":t(q=>[e(O,{props:q},{default:t(()=>[e(V,{"no-caps":"",onClick:T=>S(q.row),label:`${q.row.bread_groups.length} breads`,rounded:"",color:"brown"},null,8,["onClick","label"])]),_:2},1032,["props"])]),"body-cell-ingredient_groups":t(q=>[e(O,{props:q},{default:t(()=>[e(V,{"no-caps":"",onClick:T=>U(q.row),label:`${q.row.ingredient_groups.length} ingredients`,rounded:"",color:"purple"},null,8,["onClick","label"])]),_:2},1032,["props"])]),"body-cell-action":t(q=>[e(O,{props:q},{default:t(()=>[a("div",Lr,[e(yr,{delete:q},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Mr=Q(zr,[["__scopeId","data-v-1fcb507c"]]);const Hr={__name:"RecipePage",setup(s){return(p,y)=>(b(),C("div",null,[e(Mr)]))}};const jr={class:"elegant-container q-gutter-md"},Or={class:"text-h6 row justify-between"},Er={class:"q-gutter-sm"},Qr={class:"tab-container"},Yr={__name:"BranchIdPage",setup(s){const p=ie(),y=R(""),x=dt(),_=async h=>(await xe.get(`/api/branches/${h}`)).data,u=async()=>{const h=p.params.branch_id,n=await _(h);n&&n.name?y.value=n.name:console.error("Branch data is missing 'name' property or invalid:",n)};me(()=>{u()});const w=h=>h?h.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",r=R("products"),d=()=>{We.show(),x.push("/admin/branches").finally(()=>{We.hide()})};return(h,n)=>(b(),I(ct,{padding:""},{default:t(()=>[a("div",jr,[a("div",Or,[a("div",null,[e(V,{outline:"",flat:"",icon:"arrow_back",onClick:d}),e(Ve)]),a("div",null,[e(ne,{name:"fa-solid fa-store",color:"red-6"}),D(" "+g(w(y.value)),1)])]),a("div",Er,[a("div",Qr,[e(Te,{modelValue:r.value,"onUpdate:modelValue":n[0]||(n[0]=o=>r.value=o),dense:"",class:"bg-grey-2 text-grey-7 tabs-as-cards","active-color":"red-6","indicator-color":"transparent",align:"justify"},{default:t(()=>[e(te,{name:"products",label:"Products"}),e(te,{name:"rawMaterials",label:"Raw Materials"}),e(te,{name:"recipe",label:"Recipe"}),e(te,{name:"production",label:"Production"}),e(te,{name:"transaction",label:"Transactions"})]),_:1},8,["modelValue"])]),e(A,{class:"q-mt-sm"},{default:t(()=>[e(Ae,{modelValue:r.value,"onUpdate:modelValue":n[1]||(n[1]=o=>r.value=o),animated:""},{default:t(()=>[e(ae,{name:"products"},{default:t(()=>[e(Ft)]),_:1}),e(ae,{name:"rawMaterials"},{default:t(()=>[e(da)]),_:1}),e(ae,{name:"recipe"},{default:t(()=>[e(Hr)]),_:1}),e(ae,{name:"production"},{default:t(()=>[e(bn)]),_:1}),e(ae,{name:"transaction"},{default:t(()=>[e(Ws)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1}))}};var qi=Q(Yr,[["__scopeId","data-v-eb7c826e"]]);export{qi as default};
