import{b as n,P as l}from"./index.a9c3aa84.js";import{api as k}from"./axios.03b163b6.js";import{u as h}from"./baker-report.318e5d1d.js";import{u as S}from"./sales-report.94333993.js";import{u as g}from"./supervisor.70e19802.js";import{u as v}from"./cake-maker-report.b270210a.js";import{u as b}from"./warehouse-rawMaterials.9f641e8c.js";import"./raw-material.1eb9b369.js";var P=n(async({router:i})=>{i.beforeEach(async(o,R,e)=>{var t;const c=localStorage.getItem("token"),a=localStorage.getItem("role");if(l.value=!0,c)try{const s=h(),u=S(),m=g(),p=v(),f=b(),r=await k.get("/api/profile");console.log("userss:",r.data);const d=r.data.device;console.log("device:",d),s.setUser(r.data),u.setUser(r.data),m.setUser(r.data),p.setUser(r.data),f.setUser(r.data),o.path==="/"?a==="Admin"?e("/admin/dashboard"):a==="Baker"?e("/branch/baker"):a==="Cake Maker"?e("/branch/cake_maker"):a==="Cashier"?e("/branch/sales_lady/products"):e():e()}catch(s){console.error("Error fetching user profile:",((t=s.response)==null?void 0:t.data)||s.message),localStorage.removeItem("token"),localStorage.removeItem("role"),o.path!=="/"?e("/"):e()}finally{}else o.path!=="/"?e("/"):e();l.value=!1})});export{P as default};
