import{r as o,h as k,H as q,o as Q,c as V,w as l,Q as P,e as s,I as _,J as r,K as f,L,M,P as h,N as b,O as C,R as B}from"./index.6d6c5126.js";import{Q as N}from"./QForm.42844eef.js";import{_ as A}from"./GB_LOGO.b766a815.js";import{u as E}from"./use-quasar.f220daf8.js";import{api as R}from"./axios.40292506.js";import{_ as U}from"./plugin-vue_export-helper.21dcd24c.js";const y=i=>(C("data-v-7e1469a8"),i=i(),B(),i),$=y(()=>r("div",{class:"text-h5 text-red-6 q-mb-sm"},[r("img",{src:A,class:"logo"})],-1)),j=y(()=>r("div",{class:"text-caption text-grey-8 q-mb-sm"}," Please log in to continuesss. ",-1)),D={class:"q-gutter-y-sm"},F={class:"q-my-md text-center"},H={__name:"LoginPage",setup(i){const x=o("f2edb9c41f6b7d1b147016a56f9d30b71ee02de8eb7375c737ec910a2be5dc29"),d=o(!0),n=o(""),c=o(""),w=o(!1),I=k(()=>n.value!==""&&c.value!=="");E();const u=q(),v=o(""),S=async()=>{var m,a;h.show();try{const e=await R.post("/api/login",{uuid:x.value,email:n.value,password:c.value});console.log("user:",e.data),localStorage.setItem("activeMenuItem","dashboard"),localStorage.setItem("token",e.data.token),localStorage.setItem("role",e.data.role),localStorage.setItem("uuid",e.data.device.uuid),localStorage.setItem("branch_id",e.data.device.branch_id);const t=e.data.role,p=localStorage.getItem("activeMenuItem");if(t==="Admin"||t==="Super Admin"){let g;p?(g=`/admin/${p}`,v.value=p):(g="/admin/dashboard",localStorage.setItem("activeMenuItem","dashboard"),v.value="dashboard"),await u.push(g),b.create({type:"positive",message:e.data.message||"Login successful!",setTimeout:5e3})}else t==="Baker"?await u.push("/branch/baker"):t==="Cake Maker"?await u.push("/branch/cake_maker/raw_materials"):t==="Cashier"&&await u.push("/branch/sales_lady/products")}catch(e){console.error("Error during login:",e);const t=((a=(m=e.response)==null?void 0:m.data)==null?void 0:a.message)||"Login failed. Incorrect email & password.";b.create({type:"negative",message:t})}finally{h.hide()}};return(m,a)=>(Q(),V(P,{class:"my-card q-pa-md q-ma-lg",style:{width:"430px","max-width":"90%",height:"500px","border-radius":"16px","box-shadow":"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex","flex-direction":"column","justify-content":"space-between"}},{default:l(()=>[s(_,{class:"q-pa-sm text-center"},{default:l(()=>[$,j]),_:1}),s(_,{class:"q-mt-sm flex-grow-1"},{default:l(()=>[s(N,{onSubmit:S},{default:l(()=>[r("div",D,[s(f,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),outlined:"",placeholder:"Email",dense:"",autofocus:"",required:"",class:"input-dynamic"},null,8,["modelValue"]),s(f,{modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=e=>c.value=e),outlined:"",placeholder:"Password",type:d.value?"password":"text",dense:"",required:"",class:"input-dynamic"},{append:l(()=>[s(L,{name:d.value?"visibility_off":"visibility",onClick:a[1]||(a[1]=e=>d.value=!d.value),class:"cursor-pointer",style:{color:"#9e9e9e"}},null,8,["name"])]),_:1},8,["modelValue","type"])]),r("div",F,[s(M,{type:"submit",color:"red-6",label:"Login",class:"q-mt-sm",dense:"",loading:w.value,disable:!I.value,style:{width:"100%","max-width":"350px","border-radius":"8px"}},null,8,["loading","disable"])])]),_:1})]),_:1})]),_:1}))}};var W=U(H,[["__scopeId","data-v-7e1469a8"]]);export{W as default};
