import{b as ce,Q as B,a as pe}from"./QTable.43a7a1e4.js";import{Q as _e}from"./QTr.b246a132.js";import{Q as ie}from"./QSpinnerIos.7f7fb067.js";import{Q as de}from"./QInnerLoading.71487c3e.js";import{Q as fe}from"./QPage.29dbe813.js";import{c as M,r as f,t as G,u as R,o as u,a3 as v,f as e,M as T,w as t,Q as H,I as Q,ae as re,J as n,e as C,a0 as p,be as N,a4 as j,a5 as W,$ as g,a1 as D,b6 as K,bE as J,K as S,aJ as Y,a2 as Z,O as ee,R as te,N as ne,L as I,bo as ve,z as ye}from"./index.5c763b80.js";import{Q as ue}from"./QSpace.7aecc68c.js";import{a as A,b as $}from"./QMenu.8326453f.js";import{Q as ge}from"./QList.cde02a42.js";import{C as me}from"./ClosePopup.412ecfce.js";import{u as be}from"./employee.14426893.js";import{u as ae}from"./uniform.6735f778.js";import{_ as he}from"./SearchComponent.70eb2d1d.js";import{_ as le}from"./plugin-vue_export-helper.21dcd24c.js";import"./axios.1b8bd9b1.js";import{Q as Pe}from"./QTooltip.e276ad5b.js";import{a as U}from"./QSelect.7b1b7cb5.js";import"./QVirtualScroll.57d17a11.js";import"./use-virtual-scroll.5fea08b3.js";import"./rtl.276c3f1b.js";import"./position-engine.e4fbf205.js";import"./selection.8f86ac43.js";import"./QChip.842a63d8.js";const se=m=>(ee("data-v-532f97ff"),m=m(),te(),m),xe=se(()=>n("div",{class:"text-h6 text-weight-bold"},"\u{1F9E5} Add Uniform",-1)),Ve={style:{position:"relative"}},we={key:0,class:"dropdown-list"},Se={class:"row q-col-gutter-md q-mt-lg"},qe={class:"col-12 col-sm-6"},$e=se(()=>n("div",{class:"text-subtitle2 text-grey-7 q-mb-xs"}," Employee Name: ",-1)),Ue={class:"text-body1 text-weight-medium"},ke={class:"col-12 col-sm-6"},ze=se(()=>n("div",{class:"text-subtitle2 text-grey-7 q-mb-xs"},"Position:",-1)),Qe={class:"text-body1 text-weight-medium"},Le={class:"col-6"},Ne={class:"text-center q-mb-sm"},Ae={key:0,class:"row items-start"},Ce={class:"col-6"},Fe={key:0,class:"col-6 q-gutter-sm"},Ie={class:"col-6"},Te={class:"text-center q-mb-sm"},Ee={key:0,class:"row items-start"},Oe={class:"col-6"},Xe={key:0,class:"col-6 q-gutter-sm"},Me={class:"row q-col-gutter-md"},Be={class:"col-4"},Re={class:"col-4"},De={class:"col-4"},Ke={__name:"AddUniform",emits:["created"],setup(m,{emit:k}){const q=k,b=be(),_=M(()=>b.employees),h=ae(),P=f(""),x=f(!1),s=f(!1),w=f(!1),y=f(0),V=f(0),z=f(!1),F=f(!1),i=G({employee_id:"",employee_name:"",employee_position:"",tShirtsize:"",pantsSize:"",tShirtPcs:0,tShirtPrice:0,pantsPcs:0,pantsPrice:0,numberOfPayments:1}),O=()=>{x.value=!0},X=async()=>{P.value.trim()&&(F.value=!0,await b.searchEmployee(P.value),F.value=!1)},o=c=>{i.employee_id=c.id,i.employee_name=`${c.firstname} ${c.middlename?c.middlename.charAt(0)+".":""} ${c.lastname}`,i.employee_position=c.position,P.value=""},l=()=>{i.employee_id="",i.employee_name="",i.employee_position="",i.tShirtsize="",i.pantsSize="",i.tShirtPcs=0,i.tShirtPrice=0,i.pantsPcs=0,i.pantsPrice=0,i.numberOfPayments=1,s.value=!1,w.value=!1,y.value=0,V.value=0};R([()=>i.tShirtPcs,()=>i.tShirtPrice,()=>i.pantsPcs,()=>i.pantsPrice],()=>{y.value=i.tShirtPcs*i.tShirtPrice+i.pantsPcs*i.pantsPrice}),R([y,()=>i.numberOfPayments],()=>{V.value=y.value/(i.numberOfPayments||1)});const a=async()=>{z.value=!0;try{await h.createUniforms({...i,totalAmount:y.value,paymentPerPayroll:V.value,remaining_payments:y.value}),q("created"),x.value=!1,l()}catch(c){console.error(c)}finally{z.value=!1}};return(c,r)=>(u(),v("div",null,[e(T,{padding:"sm md",label:"Add Uniform",icon:"add_circle",size:"md",class:"gradient-btn text-white",onClick:O}),e(Z,{modelValue:x.value,"onUpdate:modelValue":r[12]||(r[12]=d=>x.value=d),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(H,{class:"uniform-dialog-card"},{default:t(()=>[e(Q,{class:"dialog-header row items-center no-wrap"},{default:t(()=>[xe,e(ue),re(e(T,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},null,512),[[me]])]),_:1}),e(Q,{class:"q-pt-lg q-pb-md q-px-lg"},{default:t(()=>[n("div",Ve,[e(he,{modelValue:P.value,"onUpdate:modelValue":[r[0]||(r[0]=d=>P.value=d),X],"search-loading":F.value},null,8,["modelValue","search-loading"]),P.value?(u(),v("div",we,[e(ge,{separator:""},{default:t(()=>{var d;return[(d=_.value)!=null&&d.length?N("",!0):(u(),C(A,{key:0},{default:t(()=>[e($,{class:"text-grey-7"},{default:t(()=>[p("No employee record")]),_:1})]),_:1})),(u(!0),v(j,null,W(_.value,L=>(u(),C(A,{key:L.id,clickable:"",onClick:Jt=>o(L)},{default:t(()=>[e($,null,{default:t(()=>[p(g(`${L.firstname} ${L.middlename?L.middlename.charAt(0)+".":""} ${L.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]}),_:1})])):N("",!0)]),n("div",Se,[n("div",qe,[$e,n("div",Ue,g(i.employee_name||"-------"),1)]),n("div",ke,[ze,n("div",Qe,g(i.employee_position||"-------"),1)])])]),_:1}),e(D,{inset:"",class:"q-mx-lg q-my-md"}),e(Q,{class:"row q-col-gutter-md q-px-lg"},{default:t(()=>[n("div",Le,[n("div",Ne,[e(K,{modelValue:s.value,"onUpdate:modelValue":r[1]||(r[1]=d=>s.value=d),label:"T-Shirt",color:"deep-orange","keep-color":""},null,8,["modelValue"])]),s.value?(u(),v("div",Ae,[n("div",Ce,[e(J,{modelValue:i.tShirtsize,"onUpdate:modelValue":r[2]||(r[2]=d=>i.tShirtsize=d),options:[{label:"18",value:"18"},{label:"S",value:"S"},{label:"M",value:"M"},{label:"L",value:"L"}],type:"radio",dense:"",color:"deep-orange"},null,8,["modelValue"])]),i.tShirtsize?(u(),v("div",Fe,[e(S,{modelValue:i.tShirtPcs,"onUpdate:modelValue":r[3]||(r[3]=d=>i.tShirtPcs=d),dense:"",outlined:"",label:"pcs"},null,8,["modelValue"]),e(S,{modelValue:i.tShirtPrice,"onUpdate:modelValue":r[4]||(r[4]=d=>i.tShirtPrice=d),dense:"",outlined:"",label:"price"},null,8,["modelValue"])])):N("",!0)])):N("",!0)]),n("div",Ie,[n("div",Te,[e(K,{modelValue:w.value,"onUpdate:modelValue":r[5]||(r[5]=d=>w.value=d),label:"Pants",color:"brown-6","keep-color":""},null,8,["modelValue"])]),w.value?(u(),v("div",Ee,[n("div",Oe,[e(J,{modelValue:i.pantsSize,"onUpdate:modelValue":r[6]||(r[6]=d=>i.pantsSize=d),options:[{label:"M",value:"M"},{label:"L",value:"L"},{label:"XL",value:"XL"},{label:"XXL",value:"XXL"}],type:"radio",dense:"",color:"brown"},null,8,["modelValue"])]),i.pantsSize?(u(),v("div",Xe,[e(S,{modelValue:i.pantsPcs,"onUpdate:modelValue":r[7]||(r[7]=d=>i.pantsPcs=d),dense:"",outlined:"",label:"pcs"},null,8,["modelValue"]),e(S,{modelValue:i.pantsPrice,"onUpdate:modelValue":r[8]||(r[8]=d=>i.pantsPrice=d),dense:"",outlined:"",label:"price"},null,8,["modelValue"])])):N("",!0)])):N("",!0)])]),_:1}),e(Q,{class:"q-px-lg q-pb-md"},{default:t(()=>[n("div",Me,[n("div",Be,[e(S,{modelValue:i.numberOfPayments,"onUpdate:modelValue":r[9]||(r[9]=d=>i.numberOfPayments=d),label:"Number of Payments",type:"number",outlined:"",dense:""},null,8,["modelValue"])]),n("div",Re,[e(S,{modelValue:y.value,"onUpdate:modelValue":r[10]||(r[10]=d=>y.value=d),label:"Total Amount",outlined:"",dense:"",readonly:""},null,8,["modelValue"])]),n("div",De,[e(S,{modelValue:V.value,"onUpdate:modelValue":r[11]||(r[11]=d=>V.value=d),label:"Per Payroll",outlined:"",dense:"",readonly:""},null,8,["modelValue"])])])]),_:1}),e(Y,{align:"right",class:"q-px-lg q-pb-lg"},{default:t(()=>[e(T,{size:"md",padding:"sm lg","no-caps":"",label:"Save","icon-right":"send",class:"gradient-btn text-white",onClick:a,loading:z.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var Je=le(Ke,[["__scopeId","data-v-532f97ff"]]);const oe=m=>(ee("data-v-2d3cfa48"),m=m(),te(),m),je=oe(()=>n("div",{class:"text-h6"},"\u{1F9E5} Edit Uniform",-1)),Ge={class:"row q-col-gutter-md q-mt-lg"},He={class:"col-12 col-sm-6"},We=oe(()=>n("div",{class:"text-subtitle2 text-grey-7 q-md-xs"},"Employee Name:",-1)),Ye={class:"text-body1 text-weight-medium"},Ze={class:"col-12 col-sm-6"},et=oe(()=>n("div",{class:"text-subtitle2 text-grey-7 q-md-xs"},"Position:",-1)),tt={class:"text-body1 text-weight-medium"},at={class:"col-5"},lt={class:"q-mb-lg",align:"center"},st={key:0,class:"row q-ml-sm q-mt-sm"},ot={class:"col-6"},nt={class:"q-gutter-md"},it={class:"col-6"},dt={class:"q-mb-lg",align:"center"},rt={key:0,class:"row q-ml-sm q-mt-sm"},ut={class:"col-6 q-pl-xl"},mt={class:"q-gutter-md q-pl-lg"},ct={class:"row q-col-gutter-md"},pt={class:"col-4"},_t={class:"col-4"},ft={class:"col-4"},vt={__name:"EditUniform",props:["edit"],emits:["edited"],setup(m,{emit:k}){const q=k,b=m;console.log("edit",b.edit);const _=ae(),h=f(!1),P=f(!1),x=G({...b.edit}),s=G({numberOfPayments:0,remaining_payments:b.edit.remaining_payments||0,tShirtsize:"",tShirtPcs:"",tShirtPrice:"",pantsSize:"",pantsPcs:"",pantsPrice:""}),w=f(!1),y=f(!1),V=M(()=>{const o=w.value&&s.tShirtPcs&&s.tShirtPrice?parseFloat(s.tShirtPcs)*parseFloat(s.tShirtPrice):0,l=y.value&&s.pantsPcs&&s.pantsPrice?parseFloat(s.pantsPcs)*parseFloat(s.pantsPrice):0;return o+l}),z=M(()=>{const o=parseFloat(s.numberOfPayments),l=V.value;return o>0?(l/o).toFixed(2):0}),F=()=>{var a,c,r,d;const o=(c=(a=b.edit)==null?void 0:a.t_shirt)==null?void 0:c[0],l=(d=(r=b.edit)==null?void 0:r.pants)==null?void 0:d[0];w.value=!!o,y.value=!!l,s.tShirtsize=(o==null?void 0:o.size)||"",s.tShirtPcs=(o==null?void 0:o.pcs)||"",s.tShirtPrice=(o==null?void 0:o.price)||"",s.pantsSize=(l==null?void 0:l.size)||"",s.pantsPcs=(l==null?void 0:l.pcs)||"",s.pantsPrice=(l==null?void 0:l.price)||"",s.numberOfPayments=b.edit.number_of_payments||0,h.value=!0},i=()=>{w.value=!1,y.value=!1,s.tShirtsize="",s.tShirtPcs="",s.tShirtPrice="",s.pantsSize="",s.pantsPcs="",s.pantsPrice="",s.numberOfPayments="",s.remaining_payments=0},O=o=>{const l=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",a=o.firstname?l(o.firstname):"No Firstname",c=o.middlename?l(o.middlename).charAt(0)+".":"",r=o.lastname?l(o.lastname):"No Lastname";return`${a} ${c} ${r}`.trim()};R(()=>[s.numberOfPayments,V.value],([o,l])=>{const a=parseFloat(o),c=parseFloat(l);s.paymentPerPayroll=!isNaN(a)&&!isNaN(c)&&a>0?(c/a).toFixed(2):0});const X=async()=>{const o=isNaN(parseFloat(s.remaining_payments))?0:parseFloat(s.remaining_payments),l={...x,t_shirt:w.value?[{size:s.tShirtsize,pcs:s.tShirtPcs,price:s.tShirtPrice}]:[],pants:y.value?[{size:s.pantsSize,pcs:s.pantsPcs,price:s.pantsPrice}]:[],number_of_payments:s.numberOfPayments,total_amount:parseFloat(V.value),payments_per_payroll:parseFloat(z.value),remaining_payments:o};console.log("Updated uniform data:",l);try{P.value=!0,await _.updateUnifrom(l),q("edited"),ne.create({message:"Uniform changes saved successfully",color:"positive",position:"top",timeout:2e3}),h.value=!1,i()}catch(a){console.error("Error saving uniform changes:",a),ne.create({message:"Failed to save uniform changes",color:"negative",position:"top",timeout:2e3})}finally{P.value=!1}};return(o,l)=>(u(),v(j,null,[e(T,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:"",onClick:F},{default:t(()=>[e(Pe,{class:"bg-positive",delay:200},{default:t(()=>[p("Edit")]),_:1})]),_:1}),e(Z,{modelValue:h.value,"onUpdate:modelValue":l[11]||(l[11]=a=>h.value=a),persistent:"",position:"right","backdrop-filter":"blur(6px) saturate(150%)"},{default:t(()=>[e(H,{style:{width:"600px","max-width":"90vw"}},{default:t(()=>[e(Q,{class:"row items-center dialog-header text-white rounded-borders-top q-pa-md"},{default:t(()=>[je,e(ue),re(e(T,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},null,512),[[me]])]),_:1}),e(Q,{class:"q-pb-lg q-px-lg"},{default:t(()=>[n("div",Ge,[n("div",He,[We,n("div",Ye,g(m.edit.employee?O(m.edit.employee):"----"),1)]),n("div",Ze,[et,n("div",tt,g(m.edit.employee.position?m.edit.employee.position:"-----"),1)])])]),_:1}),e(D,{inset:"",class:"q-mx-lg q-my-md"}),e(Q,{class:"q-gutter-md row"},{default:t(()=>[n("div",at,[n("div",lt,[e(K,{"keep-color":"",modelValue:w.value,"onUpdate:modelValue":l[0]||(l[0]=a=>w.value=a),label:"T-Shirt",color:"deep-orange"},null,8,["modelValue"])]),w.value?(u(),v("div",st,[n("div",ot,[e(J,{modelValue:s.tShirtsize,"onUpdate:modelValue":l[1]||(l[1]=a=>s.tShirtsize=a),options:[{label:"18",value:"18"},{label:"S",value:"S"},{label:"M",value:"M"},{label:"L",value:"L"}],color:"deep-orange",type:"radio",dense:""},null,8,["modelValue"])]),n("div",nt,[e(S,{modelValue:s.tShirtPcs,"onUpdate:modelValue":l[2]||(l[2]=a=>s.tShirtPcs=a),label:"pcs",outlined:"",dense:"",style:{width:"100px"}},null,8,["modelValue"]),e(S,{modelValue:s.tShirtPrice,"onUpdate:modelValue":l[3]||(l[3]=a=>s.tShirtPrice=a),label:"price",outlined:"",dense:"",style:{width:"100px"}},null,8,["modelValue"])])])):N("",!0)]),n("div",it,[n("div",dt,[e(K,{"keep-color":"",modelValue:y.value,"onUpdate:modelValue":l[4]||(l[4]=a=>y.value=a),label:"Pants",color:"brown-6"},null,8,["modelValue"])]),y.value?(u(),v("div",rt,[n("div",ut,[e(J,{modelValue:s.pantsSize,"onUpdate:modelValue":l[5]||(l[5]=a=>s.pantsSize=a),options:[{label:"M",value:"M"},{label:"L",value:"L"},{label:"XL",value:"XL"},{label:"XXL",value:"XXL"}],color:"brown",type:"radio",dense:""},null,8,["modelValue"])]),n("div",mt,[e(S,{modelValue:s.pantsPcs,"onUpdate:modelValue":l[6]||(l[6]=a=>s.pantsPcs=a),label:"pcs",outlined:"",dense:"",style:{width:"100px"}},null,8,["modelValue"]),e(S,{modelValue:s.pantsPrice,"onUpdate:modelValue":l[7]||(l[7]=a=>s.pantsPrice=a),label:"price",outlined:"",dense:"",style:{width:"100px"}},null,8,["modelValue"])])])):N("",!0)])]),_:1}),e(Q,{class:"q-ma-lg"},{default:t(()=>[n("div",ct,[n("div",pt,[e(S,{modelValue:s.numberOfPayments,"onUpdate:modelValue":l[8]||(l[8]=a=>s.numberOfPayments=a),label:"Number of Payments",type:"number",outlined:"",dense:""},null,8,["modelValue"])]),n("div",_t,[e(S,{modelValue:V.value,"onUpdate:modelValue":l[9]||(l[9]=a=>V.value=a),label:"Total Amount",outlined:"",dense:"",readonly:""},null,8,["modelValue"])]),n("div",ft,[e(S,{modelValue:z.value,"onUpdate:modelValue":l[10]||(l[10]=a=>z.value=a),label:"Per Payroll",outlined:"",dense:"",readonly:""},null,8,["modelValue"])])])]),_:1}),e(Y,{align:"right"},{default:t(()=>[e(T,{size:"md",padding:"xs md","no-caps":"",label:"Save Edit","icon-right":"send",class:"gradient-btn text-white",onClick:X,loading:P.value},null,8,["loading"])]),_:1}),e(de,{showing:P.value},{default:t(()=>[e(ie,{size:"50px",color:"primary"})]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"])],64))}};var yt=le(vt,[["__scopeId","data-v-2d3cfa48"]]);const gt={class:"text-subtitle1 text-primary text-weight-bold"},bt={key:1,class:"q-pa-md q-mb-md rounded-borders bg-grey-2 shadow-2"},ht={class:"text-subtitle1 text-primary text-weight-bold"},Pt={__name:"ViewUniformDetails",props:{modelValue:Boolean,items:Array,label:String},emits:["update:modelValue"],setup(m,{emit:k}){const q=m,b=k,_=M({get:()=>q.modelValue,set:P=>b("update:modelValue",P)});function h(){b("update:modelValue",!1)}return(P,x)=>(u(),C(Z,{modelValue:_.value,"onUpdate:modelValue":x[0]||(x[0]=s=>_.value=s),"backdrop-filter":"blur(6px) saturate(150%)"},{default:t(()=>[e(H,{style:{"max-width":"400px",width:"90vw"},class:"bg-transparent no-shadow"},{default:t(()=>[e(Y,{align:"right",class:"q-pa-sm"},{default:t(()=>[e(T,{flat:"",rounded:"",dense:"",icon:"close",onClick:h,class:"text-white"})]),_:1}),e(Q,{class:"q-pa-md"},{default:t(()=>[m.items.length>0?(u(!0),v(j,{key:0},W(m.items,(s,w)=>(u(),v("div",{key:w,class:"q-pa-md q-mb-md rounded-borders bg-grey-2 shadow-2"},[n("div",gt,g(m.label),1),e(D,{spaced:"",color:"grey-4"}),e(A,{dense:""},{default:t(()=>[e($,{avatar:""},{default:t(()=>[e(I,{name:"straighten",color:"blue-grey-7"})]),_:1}),e($,null,{default:t(()=>[e(U,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Size")]),_:1}),e(U,{class:"text-weight-medium"},{default:t(()=>[p(g(s.size||"N/A"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(A,{dense:""},{default:t(()=>[e($,{avatar:""},{default:t(()=>[e(I,{name:"inventory_2",color:"blue-grey-7"})]),_:1}),e($,null,{default:t(()=>[e(U,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Quantity")]),_:1}),e(U,{class:"text-weight-medium"},{default:t(()=>[p(g(s.pcs||0)+" pcs",1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(A,{dense:""},{default:t(()=>[e($,{avatar:""},{default:t(()=>[e(I,{name:"attach_money",color:"blue-grey-7"})]),_:1}),e($,null,{default:t(()=>[e(U,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Amount")]),_:1}),e(U,{class:"text-weight-medium"},{default:t(()=>[p("\u20B1"+g(parseFloat(s.price).toFixed(2)||"0.00"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)):(u(),v("div",bt,[n("div",ht,g(m.label),1),e(D,{spaced:"",color:"grey-4"}),e(A,{dense:""},{default:t(()=>[e($,{avatar:""},{default:t(()=>[e(I,{name:"straighten",color:"blue-grey-7"})]),_:1}),e($,null,{default:t(()=>[e(U,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Size")]),_:1}),e(U,{class:"text-weight-medium"},{default:t(()=>[p("N/A")]),_:1})]),_:1})]),_:1}),e(A,{dense:""},{default:t(()=>[e($,{avatar:""},{default:t(()=>[e(I,{name:"inventory_2",color:"blue-grey-7"})]),_:1}),e($,null,{default:t(()=>[e(U,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Quantity")]),_:1}),e(U,{class:"text-weight-medium"},{default:t(()=>[p("0 pcs")]),_:1})]),_:1})]),_:1}),e(A,{dense:""},{default:t(()=>[e($,{avatar:""},{default:t(()=>[e(I,{name:"attach_money",color:"blue-grey-7"})]),_:1}),e($,null,{default:t(()=>[e(U,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Amount")]),_:1}),e(U,{class:"text-weight-medium"},{default:t(()=>[p("\u20B10.00")]),_:1})]),_:1})]),_:1})]))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},xt={__name:"SearchUniform",props:{modelValue:{type:String,default:""},searchLoading:{type:Boolean,default:!1}},emits:["update:model-value","clear"],setup(m,{emit:k}){const q=k;return(b,_)=>(u(),C(S,{modelValue:b.searchKeyword,"onUpdate:modelValue":[_[0]||(_[0]=h=>b.searchKeyword=h),_[1]||(_[1]=h=>q("update:model-value",h))],onClear:_[2]||(_[2]=h=>q("clear")),label:"Search Employeess",outlined:"",dense:"",flat:"",debounce:"500",style:{width:"300px"}},{append:t(()=>[m.searchLoading?(u(),C(ve,{key:1,color:"primary",size:"sm"})):(u(),C(I,{key:0,name:"search"}))]),_:1},8,["modelValue"]))}};const E=m=>(ee("data-v-0d949274"),m=m(),te(),m),Vt={class:"row justify-between q-mb-md",align:"right"},wt={class:"row q-gutter-md"},St={key:0,class:"text-green-8 text-bold q-px-sm q-py-xs rounded-borders",style:{"background-color":"#e0ffe0",border:"1px solid #a0f0a0"}},qt={key:1},$t={key:0},Ut={class:"q-mb-sm q-pb-sm"},kt={class:"q-ml-sm"},zt={class:"q-my-none text-caption"},Qt=E(()=>n("span",{class:"text-bold"},"Size:",-1)),Lt={class:"q-my-none text-caption"},Nt=E(()=>n("span",{class:"text-bold"},"Qty:",-1)),At={class:"q-my-none text-caption"},Ct=E(()=>n("span",{class:"text-bold"},"Price:",-1)),Ft={key:1},It={key:0},Tt={class:"q-ml-sm"},Et={class:"q-my-none text-caption"},Ot=E(()=>n("span",{class:"text-bold"},"Size:",-1)),Xt={class:"q-my-none text-caption"},Mt=E(()=>n("span",{class:"text-bold"},"Qty:",-1)),Bt={class:"q-my-none text-caption"},Rt=E(()=>n("span",{class:"text-bold"},"Price:",-1)),Dt={key:1},Kt={__name:"UniformTable",setup(m){const k=ae(),q=f(""),b=M(()=>k.uniforms),_=f([]),h=f(!1),P=f(!1),x=f({rowsPerPage:0,rowsPerPage:0,rowsNumber:0}),s=f(!1),w=f([]),y=f("");ye(async()=>{await V()});const V=async(o=1,l=7,a="")=>{try{h.value=!0,_.value=await k.fetchUniform(o,l,a),console.log("uniform",_.value);const{data:c,current_page:r,per_page:d,total:L}=b.value;x.value.page=r,x.value.rowsPerPage=d,x.value.rowsNumber=L,_.value=c,console.log("uniformss",_.value)}catch(c){console.log("error fetching madepakeer",c)}finally{h.value=!1}},z=o=>{V(o.pagination.page,o.pagination.rowsPerPage,o.filter)};R(q,async o=>{P.value=!0,await V(x.value.page,x.value.rowsPerPage,o),P.value=!1});const F=o=>{const l=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",a=o.firstname?l(o.firstname):"No Firstname",c=o.middlename?l(o.middlename).charAt(0)+".":"",r=o.lastname?l(o.lastname):"No Lastname";return`${a} ${c} ${r}`.trim()},i=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(o),O=o=>{if(!o)return" - - ";const l=new Date(o);return isNaN(l.getTime())?" - - ":l.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},X=[{name:"date",required:!0,label:"Date",align:"left",field:o=>O(o.created_at)},{name:"name",required:!0,label:"Name",align:"left",field:o=>F(o.employee)},{name:"number_of_payments",required:!0,label:"Number of Payments",align:"center",field:"number_of_payments"},{name:"total_amount",required:!0,label:"Total Amount",align:"center",field:o=>i(o.total_amount)},{name:"payments_per_payroll",required:!0,label:"Payments Per Payroll",align:"center",field:o=>i(o.payments_per_payroll)},{name:"remaining_payments",required:!0,label:"Remaining Payments",align:"center",field:o=>o.remaining_payments==="0.00"?"Paid":i(o.remaining_payments)},{name:"t_shirt",label:"\u{1F455} T-Shirt",align:"center",field:"t_shirt"},{name:"pants",label:"\u{1F456} Pants",align:"center",field:"pants"},{name:"actions",label:"Actions",align:"center",field:"actions"}];return(o,l)=>(u(),C(fe,{class:"q-my-md"},{default:t(()=>[n("div",Vt,[n("div",wt,[e(Je,{onCreated:V})]),e(xt,{modelValue:q.value,"onUpdate:modelValue":[l[0]||(l[0]=a=>q.value=a),q.value]},null,8,["modelValue","onUpdate:modelValue"])]),e(pe,{filter:q.value,rows:_.value,columns:X,"row-key":"name",pagination:x.value,"onUpdate:pagination":l[1]||(l[1]=a=>x.value=a),"rows-per-page-options":[5,7,10,0],onRequest:z,loading:h.value},{header:t(a=>[e(_e,{props:a,class:"gradient-header text-white text-weight-bold"},{default:t(()=>[(u(!0),v(j,null,W(a.cols,c=>(u(),C(ce,{key:c.name,props:a,class:"text-center text-subtitle2"},{default:t(()=>[p(g(c.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell-remaining_payments":t(a=>[e(B,{props:a},{default:t(()=>[a.row.remaining_payments==="0.00"?(u(),v("span",St," Paid ")):(u(),v("span",qt,g(i(a.row.remaining_payments)),1))]),_:2},1032,["props"])]),"body-cell-t_shirt":t(a=>[e(B,{props:a},{default:t(()=>[a.row.t_shirt[0]?(u(),v("div",$t,[n("div",Ut,[n("div",kt,[n("p",zt,[Qt,p(" "+g(a.row.t_shirt[0].size),1)]),n("p",Lt,[Nt,p(" "+g(a.row.t_shirt[0].pcs)+" pcs ",1)]),n("p",At,[Ct,p(" "+g(i(a.row.t_shirt[0].price)),1)])])])])):(u(),v("div",Ft,"\u{1F455} No Data"))]),_:2},1032,["props"])]),"body-cell-pants":t(a=>[e(B,{props:a},{default:t(()=>[a.row.pants[0]?(u(),v("div",It,[n("div",Tt,[n("p",Et,[Ot,p(" "+g(a.row.pants[0].size),1)]),n("p",Xt,[Mt,p(" "+g(a.row.pants[0].pcs)+" pcs ",1)]),n("p",Bt,[Rt,p(" "+g(i(a.row.pants[0].price)),1)])])])):(u(),v("div",Dt,"\u{1F456} No Data"))]),_:2},1032,["props"])]),"body-cell-actions":t(a=>[e(B,{props:a},{default:t(()=>[e(yt,{edit:a.row,onEdited:V},null,8,["edit"])]),_:2},1032,["props"])]),loading:t(()=>[e(de,{showing:""},{default:t(()=>[e(ie,{size:"50px",color:"grey-10"})]),_:1})]),_:1},8,["filter","rows","pagination","loading"]),e(Pt,{modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=a=>s.value=a),items:w.value,label:y.value},null,8,["modelValue","items","label"])]),_:1}))}};var ya=le(Kt,[["__scopeId","data-v-0d949274"]]);export{ya as default};
