import{d as y,r as n,c as v,N as g}from"./index.10b2bb61.js";import{api as u}from"./axios.c7f8c55c.js";import"./use-dialog-plugin-component.0810fcdf.js";y("payroll",()=>{const l=n(null),e=n([]);return{payroll:l,payrollPerCutOff:e,fetchPayrollPerCutOff:async c=>{console.log("employee ID in fetfching payrol:",c);try{const s=await u.get(`/api/fetch-payroll-cut-off/${c}`)}catch{}}}});const m=y("employee-incentives",()=>{const l=n(null),e=n([]);return{employeeIncentive:l,employeeIncentives:e,fetchEmployeeIncentives:async(c,s,r)=>{try{const t=await u.get(`/api/fetch-employee-incentives-per-cut-off/${c}/${s}/${r}`);console.log("\u2705 Response:",t.data),e.value=t.data}catch(t){console.error("\u274C API error:",t)}}}});const C=y("employee-charges",()=>{const l=n(null),e=n([]),i=v(()=>e.value.reduce((a,o)=>a+(parseFloat(o.charges_amount)||0),0));return{employeeCharge:l,employeeCharges:e,totalCharges:i,fetchEmployeeCharges:async a=>{try{console.log("Fetching charges for: ",a);const o=await u.get(`/api/employee-charges/${a.fromDate}/${a.toDate}/${a.employeeID}`);e.value=o.data||[],console.log("Charges loaded: ",e.value)}catch(o){console.error("Error fetching employee charges: ",o),e.value=[]}},updateChargeById:async a=>{try{const o=await u.put(`/api/employee-charges/${a.id}`,{charges_amount:a.charges_amount});if(console.log("Update response: ",o),o.status===200){const p=e.value.findIndex(_=>_.id===a.id);p!==-1&&(e.value[p]={...e.value[p],charges_amount:a.charges_amount},e.value=[...e.value])}else console.warn("Failed to update charge on serve:",o)}catch(o){console.error("Error updating charge: ",o)}},setCharges:a=>{e.value=a||[]},clearCharges:()=>{e.value=[],l.value=null}}}),x=y("sale-credit",()=>{const l=n(null),e=n([]);return{salesChargesPerCutOff:l,salesChargesPerCutOffs:e,fetchSalesChargesPerCutOff:async(s,r,t)=>{console.log("sales charges FROM: ",s,"sales charges TO: ",r,"sales charges EMPLOYEE_ID: ",t);try{const a=await u.get(`api/fetch-employee-charges-per-cut-off/${s}/${r}/${t}`);console.log("sales chargessss",a.data),e.value=a.data.sales_charge}catch(a){console.log("erroooor",a)}},updateChargeById:async s=>{console.log("updatedItem",s);try{const r=await u.put(`/api/update-employee-charges/${s.id}`,{charge_amount:s.charge_amount});if(console.log("Update response",r),r.status===200){const t=e.value.findIndex(a=>a.id===s.id);t!==-1&&(e.value[t]={...e.value[t],charge_amount:s.charge_amount},e.value=[...e.value])}else console.warn("Failed to update charge on serve:",r)}catch(r){console.log("Error updating charge",r)}}}});const P=y("payslips",()=>{const l=n(null),e=n([]);return{payslip:l,payslips:e,createPayslip:async(c,{showSuccess:s=!1}={})=>{var r,t,a,o,p;console.log("data payslip data",c);try{const _=await u.post("/api/payslip",c);return s&&((r=_.data)==null?void 0:r.message)==="Payslip saved successfully"&&g.create({type:"positive",message:"Payslip saved successfully!",timeout:3e3}),_.data}catch(_){throw console.log("payslipsss error",_),((a=(t=_.response)==null?void 0:t.data)==null?void 0:a.message)==="Payslip already exists"?g.create({type:"warning",message:"Duplicate payslip detected. A payslip with the same details already exists!",timeout:5e3}):g.create({type:"negative",message:`${((p=(o=_.response)==null?void 0:o.data)==null?void 0:p.message)||"Something went wrong"}!`,timeout:5e3}),_}}}});export{x as a,C as b,P as c,m as u};
