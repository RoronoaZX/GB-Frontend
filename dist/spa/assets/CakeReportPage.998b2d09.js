import{r as S,o as v,a2 as D,f as s,M as f,w as i,J as t,Q as $,I as w,_ as n,a0 as V,aI as N,a1 as A,a3 as q,N as M,O as L,R,c as F,z as Y,e as Q,L as B,K as P,a4 as U,$ as z}from"./index.88dd7130.js";import{Q as j}from"./QChip.34992a5a.js";import{Q as O}from"./QScrollArea.7129b602.js";import{Q as T}from"./QPage.e9b7f376.js";import{q as b}from"./date.2ea6a80b.js";import{u as I}from"./cake-maker-report.19769109.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";import"./QResizeObserver.492eace8.js";import"./QScrollObserver.47c9b866.js";import"./TouchPan.7b2f73a6.js";import"./touch.9135741d.js";import"./selection.7507b578.js";import"./axios.5a692ff8.js";const u=r=>(L("data-v-0254b597"),r=r(),R(),r),H={class:"row justify-between"},J={class:"text-h6"},K={class:"row q-gutter-x-sm"},G=u(()=>t("div",{class:"text-subtitle2"},"Date:",-1)),W={class:"text-body1 text-weight-light"},X={class:"row q-gutter-x-sm"},Z=u(()=>t("div",{class:"text-subtitle2"},"Branch:",-1)),ee={class:"text-body1 text-weight-light"},te={class:"row q-gutter-x-sm"},ae=u(()=>t("div",{class:"text-subtitle2"},"Cake Maker:",-1)),oe={class:"text-body1 text-weight-light"},se={class:"row q-mt-sm item-start q-gutter-x-xl"},re={class:"row q-gutter-x-sm text-overline"},ne=u(()=>t("div",null,"Price:",-1)),ie={class:"text-weight-light"},le={class:"row q-gutter-x-sm text-overline"},ce=u(()=>t("div",null,"Layer /s:",-1)),de={class:"text-weight-light"},me=u(()=>t("div",null,null,-1)),ue={__name:"CakeReportView",props:{report:{type:Object,required:!0}},setup(r){const p=I(),l=S(!1),d=r,g=()=>{l.value=!0},x=e=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",a=e.firstname?o(e.firstname):"No Firstname",m=e.middlename?o(e.middlename).charAt(0)+".":"",k=e.lastname?o(e.lastname):"No Lastname";return`${a} ${m} ${k}`},y=e=>b.formatDate(e,"MMMM D, YYYY || hh:mm A"),C=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(e),_=e=>e.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" "),h=async()=>{console.log("report id",d.report.id);try{const e=await p.confirmReports(d.report.id);console.log("Report Confirmed",e),M.create({type:"positive",message:"Report confirmed"})}catch(e){console.log(e),M.create({type:"negative",message:"Failed to confirm"})}};return(e,o)=>(v(),D(q,null,[s(f,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:g}),s(A,{modelValue:l.value,"onUpdate:modelValue":o[1]||(o[1]=a=>l.value=a)},{default:i(()=>[t("div",null,[s($,null,{default:i(()=>[s(w,null,{default:i(()=>[t("div",H,[t("div",J,n(_(r.report.name)),1),t("div",null,[s(f,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:o[0]||(o[0]=a=>l.value=!1)})])])]),_:1}),s(V),s(w,null,{default:i(()=>{var a,m;return[t("div",K,[G,t("div",W,n(y(r.report.created_at)),1)]),t("div",X,[Z,t("div",ee,n(_((m=(a=r.report)==null?void 0:a.branch)==null?void 0:m.name)||"No data"),1)]),t("div",te,[ae,t("div",oe,n(x(r.report.user.employee)),1)]),t("div",se,[t("div",re,[ne,t("div",ie,n(C(r.report.price)),1)]),t("div",le,[ce,t("div",de,n(r.report.layers),1)])])]}),_:1}),s(N,{align:"right"},{default:i(()=>[s(f,{label:"Decline",color:"negative",onClick:h}),s(f,{label:"Confirm",color:"positive",onClick:h})]),_:1})]),_:1})]),me]),_:1},8,["modelValue"])],64))}};var pe=E(ue,[["__scopeId","data-v-0254b597"]]);const _e={class:"q-gutter-md"},he={class:"row justify-between q-ma-md"},fe={class:"text-subtitle1"},ve={class:"text-subtitle1"},ge={class:"text-h6"},Ve={__name:"CakeReportPage",setup(r){const p=I(),l=F(()=>p.pendingReports);console.log("pendong report",l.value);const d=localStorage.getItem("branch_id");console.log("branch IDss",d);const g=e=>b.formatDate(e,"MMMM D, YYYY"),x=e=>b.formatDate(e,"hh:mm A"),y=e=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",a=e.firstname?o(e.firstname):"No Firstname",m=e.middlename?o(e.middlename).charAt(0)+".":"",k=e.lastname?o(e.lastname):"No Lastname";return`${a} ${m} ${k}`},C=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();Y(async()=>{d&&await _(d)});const _=async e=>{await p.fetchCakePendingReport(e)},h=e=>{switch(e){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}};return(e,o)=>(v(),Q(T,{padding:""},{default:i(()=>[t("div",_e,[t("div",null,[s(P,{rounded:"",outlined:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":o[0]||(o[0]=a=>e.filter=a),placeholder:"Search",style:{width:"500px"}},{append:i(()=>[s(B,{name:"search"})]),_:1},8,["modelValue"])]),s(O,{style:{height:"450px","max-width":"1500px"}},{default:i(()=>[(v(!0),D(q,null,U(l.value,a=>(v(),Q($,{key:a},{default:i(()=>[t("div",he,[t("div",null,[t("div",fe,n(g(a.created_at)),1),t("div",ve,n(x(a.created_at)),1)]),t("div",ge,n(y(a.user.employee))+" - "+n(C(a.name)),1),t("div",null,[s(j,{color:h(a.confirmation_status)},{default:i(()=>[z(n(a.confirmation_status),1)]),_:2},1032,["color"])]),t("div",null,[s(pe,{report:a},null,8,["report"])])])]),_:2},1024))),128))]),_:1})])]),_:1}))}};export{Ve as default};
