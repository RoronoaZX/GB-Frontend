import{c as D,r as m,t as O,o as _,a2 as b,f as e,M as h,w as a,Q as F,I as x,ad as k,J as d,K as S,aI as j,a1 as L,a3 as I,$ as q,a0 as G,O as N,R as U,z as H,u as W,L as z,e as E,_ as A,ba as X,N as B}from"./index.90e14ade.js";import{Q as Y}from"./QPage.b58e5763.js";import{Q as Z}from"./QSpace.df1b0d53.js";import{Q as ee}from"./QSelect.1159fbbe.js";import{C as $}from"./ClosePopup.a7ee5f13.js";import{u as T}from"./recipe.aa135ca7.js";import{Q as ae}from"./QSpinnerDots.5ad650c9.js";import{Q as K}from"./QTooltip.ee5c219f.js";import{Q as te}from"./QPopupEdit.a0569576.js";import{Q as C,a as le}from"./QTable.73a7d3d9.js";import{Q as oe}from"./QBadge.1cbfe3d6.js";import"./QList.f5d06b33.js";import"./use-virtual-scroll.15feeafd.js";import{_ as P}from"./plugin-vue_export-helper.21dcd24c.js";import{api as se}from"./axios.5df481c6.js";import"./QChip.0c55697e.js";import"./rtl.afc00592.js";import"./QMenu.c7ee5ea4.js";import"./selection.197c480b.js";import"./QVirtualScroll.fa89f4f2.js";const re=d("div",{class:"text-h5 q-mr-md"},"\u{1F4DC} Add Recipe",-1),ne={class:"q-mt-md q-animated q-animate-bounce"},ie={class:"q-mt-md q-animated q-animate-bounce"},ce={__name:"RecipeCreate",setup(s){const f=D(()=>n.recipes),n=T(),r=m(!1),w=()=>{r.value=!0},g=["Dough","Filling"],v=m(!1),l=O({name:"",category:""}),y=async()=>{console.log("Recipe",l);try{v.value=!0,await n.createRecipe(l),v.value=!1,r.value=!1,R(),f.value=await n.fetchRecipes()}catch{v.value=!1}},R=()=>{l.name="",l.category="",r.value=!1};return(V,p)=>(_(),b(I,null,[e(h,{class:"text-dark q-pa-sm",outline:"",dense:"",elevated:"",icon:"add_circle",label:"Add Recipe",onClick:w,style:{"background-color":"#ef4444"}}),e(L,{modelValue:r.value,"onUpdate:modelValue":p[2]||(p[2]=i=>r.value=i),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:a(()=>[e(F,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:a(()=>[e(x,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:a(()=>[re,e(Z),k(e(h,{icon:"close",flat:"",dense:"",round:""},null,512),[[$]])]),_:1}),e(x,{class:"q-mx-md"},{default:a(()=>[d("div",ne,[e(S,{class:"text-capitalize",modelValue:l.name,"onUpdate:modelValue":p[0]||(p[0]=i=>l.name=i),outlined:"",dense:"",label:"Recipe Name",rules:[i=>i&&i.length>0||"Recipe name is required"]},null,8,["modelValue","rules"])]),d("div",ie,[e(ee,{modelValue:l.category,"onUpdate:modelValue":p[1]||(p[1]=i=>l.category=i),options:g,"hide-dropdown-icon":"",outlined:"",dense:"",behavior:"menu",label:"Category",rules:[i=>i&&i.length>0||"Category is required"]},null,8,["modelValue","rules"])]),e(j,{class:"row q-mt-md q-px-lg q-py-sm q-pt-none",align:"right"},{default:a(()=>[k(e(h,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[$]]),e(h,{class:"glossy",color:"teal",label:"Create",onClick:y})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const M=s=>(N("data-v-49908f78"),s=s(),U(),s),de=M(()=>d("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),ue=M(()=>d("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),pe={__name:"RecipeDelete",props:["delete"],setup(s){const f=T(),n=s,r=m(!1),w=()=>{r.value=!0},g=async()=>{await f.deleteRecipe(n.delete.row.id),r.value=!1};return(v,l)=>(_(),b(I,null,[e(h,{onClick:w,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"","aria-label":"Delete"},{default:a(()=>[e(K,{class:"bg-negative",delay:200},{default:a(()=>[q("Delete")]),_:1})]),_:1}),e(L,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=y=>r.value=y),persistent:""},{default:a(()=>[e(F,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:a(()=>[e(x,{class:"q-pt-none q-pb-sm"},{default:a(()=>[de,ue]),_:1}),e(G,{class:"q-mb-md"}),e(x,null,{default:a(()=>[e(j,{align:"right",class:"q-pt-none"},{default:a(()=>[k(e(h,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[$]]),e(h,{dense:"",label:"Delete",color:"negative",onClick:g,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var me=P(pe,[["__scopeId","data-v-49908f78"]]);const _e=s=>(N("data-v-d3ace0ac"),s=s(),U(),s),fe={align:"left"},ge={key:0,class:"spinner-wrapper"},ve={key:1},ye={key:0,class:"data-error"},he=_e(()=>d("div",{class:"q-ml-sm text-h6"},"No data available",-1)),we={class:"row justify-center q-gutter-x-md"},be={__name:"RecipeTable",setup(s){const f=T(),n=m(""),r=m(!0),w=m([]),g=m(!1),v=m({rowsPerPage:0}),l=D(()=>f.recipes),y=D(()=>n.value?l.value.filter(o=>o.name.toLowerCase().includes(n.value.toLowerCase())):l.value),R=o=>o?o.split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1).toLowerCase()).join(" "):"";async function V(o,c){try{if((await se.put("/api/update-name/"+o.id,{name:c})).status==200){const u=w.value.findIndex(Q=>Q.id==o.id);w.value[u]=c}B.create({type:"positive",message:"Recipe name edited successfully"})}catch(t){console.error("Error updating recipe name:",t),B.create({type:"negative",message:"Failed to edit recipe name"})}}H(async()=>{await p()});const p=async()=>{try{r.value=!0,l.value=await f.fetchRecipes(),l.value.length||(g.value=!0),console.log("Recipe",l.value)}catch(o){console.log("error fetching recipe: ",o),g.value=!0}finally{r.value=!1}};W(n,async o=>{r.value=!0,await new Promise(c=>setTimeout(c,1e3)),r.value=!1,g.value=y.value.length===0});const i=[{name:"name",label:"Recipe Name",align:"left",field:o=>o.name,format:o=>`${o}`,sortable:!0},{name:"category",align:"left",label:"Category",field:"category",sortable:!0},{name:"action",label:"Action",align:"center",sortable:!0}],J=o=>{switch(o){case"Filling":return"teal";case"Dough":return"brown-6";default:return"grey"}};return(o,c)=>(_(),b(I,null,[d("div",fe,[e(S,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=t=>n.value=t),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:""},{append:a(()=>[e(z,{name:"search"})]),_:1},8,["modelValue"])]),r.value?(_(),b("div",ge,[e(ae,{size:"50px",color:"primary"})])):(_(),b("div",ve,[y.value.length===0?(_(),b("div",ye,[e(z,{name:"warning",color:"warning",size:"4em"}),he])):(_(),E(le,{key:1,class:"table-container elegant-container sticky-header",filter:n.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:i,rows:y.value,"row-key":"name","virtual-scroll":"",pagination:v.value,"onUpdate:pagination":c[1]||(c[1]=t=>v.value=t),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"400px"}},{"body-cell-name":a(t=>[e(C,{props:t,class:"cursor-pointer"},{default:a(()=>[d("span",null,[q(A(R(t.row.name))+" ",1),e(K,{class:"bg-blue-grey-8",offset:[10,10]},{default:a(()=>[q("Edit Recipe Name")]),_:1})]),e(te,{"onUpdate:modelValue":[u=>V(t.row,u),u=>t.row.name=u],modelValue:t.row.name,"auto-save":""},{default:a(u=>[e(S,{class:"text-capitalize",modelValue:u.value,"onUpdate:modelValue":Q=>u.value=Q,dense:"",autofocus:"",counter:"",onKeyup:X(u.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-category":a(t=>[e(C,{key:"name",props:t},{default:a(()=>[e(oe,{color:J(t.row.category)},{default:a(()=>[q(A(t.row.category),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-action":a(t=>[e(C,{props:t},{default:a(()=>[d("div",we,[e(me,{delete:t},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var xe=P(be,[["__scopeId","data-v-d3ace0ac"]]);const qe=s=>(N("data-v-2aa25900"),s=s(),U(),s),Re=qe(()=>d("div",{class:"text-h6"},null,-1)),Ve={align:"right"},Qe={__name:"RecipePage",setup(s){return(f,n)=>(_(),E(Y,{class:"elegant-container",flat:""},{default:a(()=>[e(x,{class:"row justify-between"},{default:a(()=>[Re,d("div",Ve,[e(ce)])]),_:1}),e(x,null,{default:a(()=>[e(xe)]),_:1})]),_:1}))}};var Oe=P(Qe,[["__scopeId","data-v-2aa25900"]]);export{Oe as default};
