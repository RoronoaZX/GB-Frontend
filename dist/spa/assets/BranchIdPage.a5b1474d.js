import{bd as we,c as T,r as U,t as Ie,o as k,a2 as A,f as e,M as I,w as t,Q as M,I as N,ad as se,J as a,K as D,L as te,e as F,$ as q,a3 as K,a4 as ge,_ as $,bc as Ae,aI as Be,a1 as X,a0 as at,N as ce,O as de,R as ie,z as Ne,u as ye,ba as me,aJ as xt,be as ae,d as rt,P as De,bb as nt,aH as $t,H as Vt}from"./index.624b9ec7.js";import{Q as Pe}from"./QSpace.439db3d5.js";import{Q as Ye,a as ke,b as Ge,c as xe}from"./QTabPanels.85895dd2.js";import{Q as Ct}from"./QPage.55226536.js";import{Q as Se,a as le,b as Y}from"./QList.82f6108f.js";import{Q as W}from"./rtl.df08cf02.js";import{C as re}from"./ClosePopup.b3fc46b1.js";import{u as Ee}from"./branch-product.093faede.js";import{u as We}from"./product.b51bf326.js";import{Q as ot}from"./QSpinnerDots.527e1fbf.js";import{Q as G,a as $e}from"./QTable.a71becb2.js";import{Q as ve}from"./QBadge.3662fd4c.js";import{Q as fe}from"./QTooltip.beaa8d6b.js";import{Q as _e}from"./QPopupEdit.13619894.js";import{_ as Z}from"./plugin-vue_export-helper.21dcd24c.js";import{api as ee}from"./axios.09143b80.js";import{u as dt}from"./branch-rawMaterials.5bda0107.js";import{u as Rt}from"./raw-material.acdb0a12.js";import{u as qe}from"./use-dialog-plugin-component.0312e29a.js";import{Q as St}from"./QMenu.91871d4d.js";import{q as Ce}from"./date.1a4d5d58.js";import{u as Te}from"./use-quasar.9a87b0d0.js";import{p as tt,v as mt}from"./vfs_fontes.3eb8cb31.js";import{u as pt}from"./sales-report.e6a57fbc.js";import{u as _t}from"./user.bfd05042.js";import{Q as ct}from"./use-virtual-scroll.c14c8ef7.js";import{u as Pt}from"./employee.e1d18da1.js";import{Q as je}from"./QScrollArea.c3bdf66c.js";import{u as Qe,a as Je,b as lt}from"./other-product.c1c283b5.js";import{Q as st}from"./QSelect.6f6341f5.js";import{u as Ut}from"./recipe.448fc7e2.js";import{u as et}from"./branch-recipe.634000f0.js";import{u as gt}from"./premix.002c8709.js";import"./QResizeObserver.f3fa8a72.js";import"./use-panel.db573554.js";import"./touch.9135741d.js";import"./selection.af1f8f11.js";import"./QVirtualScroll.4da1e9c3.js";import"./QScrollObserver.90cbced3.js";import"./TouchPan.122ee6ee.js";import"./QChip.fd3511f6.js";const Nt=a("div",{class:"text-h6"},"Create Branch Product",-1),qt={class:"q-mb-lg"},Dt={key:0,class:"custom-list z-top"},At=a("div",null,"Product Name",-1),It=a("div",null,"Category",-1),Bt={class:"row justify-between"},Tt=a("div",null,"Beginnings",-1),Ft=a("div",null,"Total Quantity",-1),zt=a("div",null,"Price",-1),Lt={__name:"ProductCreate",setup(d){const y=we(),V=We(),S=T(()=>V.products),v=Ee(),w=U(""),P=async()=>{V.searchProducts(w.value)},u=T(()=>R.price!==0&&R.beginnings!==0&&R.total_quantity!==0),_=U(!1),m=()=>{_.value=!0},r=()=>{C(),_.value=!1},h=b=>b?b.split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1).toLowerCase()).join(" "):"",c=b=>{R.product_id=b.id,R.product_name=b.name,R.category=b.category,w.value=""},R=Ie({product_id:"",product_name:"",price:0,beginnings:0,total_quantity:0,branches_id:y.params.branch_id}),C=()=>{R.product_id="",R.product_name="",R.category="",R.price=0,R.beginnings=0,R.total_quantity=0},f=async()=>{try{const{product_name:b,...p}=R;await v.createBranchProducts(p),console.log("data to send",p),C(),_.value=!1}catch(b){console.log(b)}};return(b,p)=>(k(),A(K,null,[e(I,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Product",onClick:m}),e(X,{modelValue:_.value,"onUpdate:modelValue":p[6]||(p[6]=i=>_.value=i),persistent:""},{default:t(()=>[e(M,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(N,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[Nt,e(Pe),se(e(I,{icon:"close",flat:"",dense:"",round:""},null,512),[[re]])]),_:1}),e(N,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",qt,[e(D,{modelValue:w.value,"onUpdate:modelValue":[p[0]||(p[0]=i=>w.value=i),P],debounce:"1000",outlined:"",rounded:"",placeholder:"Search product",dense:""},{append:t(()=>[a("div",null,[e(te,{name:"search"})])]),default:t(()=>[w.value?(k(),A("div",Dt,[e(M,null,{default:t(()=>[e(Se,{separator:""},{default:t(()=>{var i;return[(i=S.value)!=null&&i.length?(k(!0),A(K,{key:1},ge(S.value,g=>(k(),F(le,{onClick:s=>c(g),key:g.id,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q($(h(g.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(k(),F(le,{key:0},{default:t(()=>[q(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ae("",!0)]),_:1},8,["modelValue"])]),a("div",null,[At,e(D,{modelValue:R.product_name,"onUpdate:modelValue":p[1]||(p[1]=i=>R.product_name=i),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[It,e(D,{modelValue:R.category,"onUpdate:modelValue":p[2]||(p[2]=i=>R.category=i),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",Bt,[a("div",null,[Tt,e(D,{modelValue:R.beginnings,"onUpdate:modelValue":p[3]||(p[3]=i=>R.beginnings=i),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Ft,e(D,{modelValue:R.total_quantity,"onUpdate:modelValue":p[4]||(p[4]=i=>R.total_quantity=i),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])]),a("div",null,[zt,e(D,{modelValue:R.price,"onUpdate:modelValue":p[5]||(p[5]=i=>R.price=i),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])]),_:1}),e(Be,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(I,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:r}),e(I,{class:"glossy",color:"teal",label:"Create",onClick:f,disable:!u.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const ft=d=>(de("data-v-196482e9"),d=d(),ie(),d),Ot=ft(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),Mt=ft(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),jt={__name:"ProductDelete",props:["delete"],setup(d){const y=Ee(),V=d;console.log("delte",V.delete.row.id);const S=async()=>{try{await y.deleteBranchProducts(V.delete.row.id),ce.create({type:"negative",icon:"warning",message:"Branch product successfully deleted",timeout:1e3,position:"top"}),v.value=!1}catch(P){console.error(P.message)}},v=U(!1),w=()=>{console.log("ID",V.delete.row.id),v.value=!0};return(P,u)=>(k(),A(K,null,[e(I,{onClick:w,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"",align:"center"},{default:t(()=>[e(fe,{class:"bg-negative",delay:200},{default:t(()=>[q("Delete")]),_:1})]),_:1}),e(X,{modelValue:v.value,"onUpdate:modelValue":u[0]||(u[0]=_=>v.value=_)},{default:t(()=>[e(M,null,{default:t(()=>[e(N,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[Ot,Mt]),_:1}),e(at,{class:"q-mb-md"}),e(N,null,{default:t(()=>[e(Be,{align:"right",class:"q-pt-none"},{default:t(()=>[se(e(I,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[re]]),e(I,{dense:"",label:"Delete",color:"negative",onClick:S,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ht=Z(jt,[["__scopeId","data-v-196482e9"]]);const Qt=d=>(de("data-v-c74b6072"),d=d(),ie(),d),Et={class:"row justify-between"},Kt={class:"q-my-sm"},Yt={key:0,class:"spinner-wrapper"},Gt={key:1},Wt={key:0,class:"data-error"},Jt=Qt(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Xt={key:1},Zt={__name:"ProductTable",setup(d){const V=we().params.branch_id,S=Ee(),v=U(""),w=U(!0),P=U([]),u=U(!1),_=U({rowsPerPage:0}),m=T(()=>S.branchProducts);console.log("branchssdfrer",m.value);const r=T(()=>v.value?m.value.filter(g=>g.name.toLowerCase().includes(v.value.toLowerCase())):m.value),h=g=>g?g.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" "):"";Ne(async()=>{V&&await c(V)});const c=async g=>{try{w.value=!0;const s=await S.fetchBranchProducts(g);m.value=s,m.value.length||(u.value=!0),console.log("Branch product",m.value)}catch(s){console.log("Error fetching branch product:",s),u.value=!0}finally{w.value=!1}};ye(v,async g=>{w.value=!0,await new Promise(s=>setTimeout(s,1e3)),w.value=!1,u.value=r.value.length===0});async function R(g,s){try{const n=await ee.put("/api/update-branch-products/"+g.id,{price:parseInt(s)});if(n.status===200){const l=P.value.findIndex(o=>o.id==g.id);P.value[l]=parseInt(s),ce.create({type:"positive",message:n.data.message,timout:1e3,position:"top"})}}catch(n){console.error("Error updating price:",n)}}async function C(g,s){try{const n=await ee.put("/api/update-branch-products-beginnings/"+g.id,{beginnings:parseInt(s)});if(n.status===200){const l=P.value.findIndex(o=>o.id==g.id);P.value[l]=parseInt(s),ce.create({type:"positive",message:n.data.message,timout:1e3,position:"top"})}}catch(n){console.error("Error updating price:",n)}}async function f(g,s){try{const n=await ee.put("/api/update-branch-products-total-quantity/"+g.id,{total_quantity:parseInt(s)});if(n.status===200){const l=P.value.findIndex(o=>o.id==g.id);P.value[l]=parseInt(s),ce.create({type:"positive",message:n.data.message,timout:1e3,position:"top"})}}catch(n){console.error("Error updating price:",n)}}const b=g=>{switch(g){case"Bread":return"brown";case"Selecta":return"red-6";case"Softdrinks":return"accent";default:return"grey"}},p=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(g),i=[{name:"name",label:"Product Name",align:"center",field:g=>g.product.name,format:g=>`${g}`,sortable:!0},{name:"category",align:"center",label:"Category",field:"category",sortable:!0},{name:"price",align:"center",label:"Price",field:g=>p(g),sortable:!0},{name:"beginnings",align:"center",label:"Beginnings",field:"beginnings",format:g=>`${g} pcs`,sortable:!0},{name:"total_quantity",align:"center",label:"Quantity",field:"total_quantity",format:g=>`${g} pcs`,sortable:!0},{name:"action",align:"center",label:"Action",field:"action",sortable:!0}];return(g,s)=>(k(),A(K,null,[a("div",Et,[a("div",null,[e(D,{class:"q-pb-lg q-pl-md",modelValue:v.value,"onUpdate:modelValue":s[0]||(s[0]=n=>v.value=n),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"1500px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(te,{name:"search"})]),_:1},8,["modelValue"])]),a("div",Kt,[e(Lt)])]),w.value?(k(),A("div",Yt,[e(ot,{size:"50px",color:"primary"})])):(k(),A("div",Gt,[r.value.length===0?(k(),A("div",Wt,[e(te,{name:"warning",color:"warning",size:"4em"}),Jt])):(k(),F($e,{key:1,class:"table-container sticky-header",filter:v.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:i,rows:r.value,"row-key":"name","virtual-scroll":"",pagination:_.value,"onUpdate:pagination":s[1]||(s[1]=n=>_.value=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"}},{"body-cell-name":t(n=>[e(G,{key:"name",props:n},{default:t(()=>{var l;return[q($((l=n.row.product)!=null&&l.name?h(n.row.product.name):"No data available"),1)]}),_:2},1032,["props"])]),"body-cell-category":t(n=>[e(G,{key:"name",props:n},{default:t(()=>[n.row.category?(k(),F(ve,{key:0,color:b(n.row.category)},{default:t(()=>[q($(n.row.category),1)]),_:2},1032,["color"])):(k(),A("span",Xt,"No data available"))]),_:2},1032,["props"])]),"body-cell-price":t(n=>[e(G,{props:n,class:"cursor-pointer"},{default:t(()=>[a("span",null,[q($(p(n.row.price))+" ",1),e(fe,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[q("Edit Price")]),_:1})]),e(_e,{"onUpdate:modelValue":[l=>R(n.row,l),l=>n.row.price=l],modelValue:n.row.price,"auto-save":""},{default:t(l=>[e(D,{modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(n=>[e(G,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[q($(n.row.beginnings?n.row.beginnings:"Set Beginnings")+" ",1),e(fe,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[q("Edit beginnings")]),_:1})]),e(_e,{"onUpdate:modelValue":[l=>C(n.row,l),l=>n.row.beginnings=l],modelValue:n.row.beginnings,"auto-save":""},{default:t(l=>[e(D,{modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,dense:"",autofocus:"",counter:"",mask:"#####",onKeyup:me(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-total_quantity":t(n=>[e(G,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[q($(n.row.total_quantity?n.row.total_quantity:"Set Quantity")+" ",1),e(fe,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[q("Edit quantity")]),_:1})]),e(_e,{"onUpdate:modelValue":[l=>f(n.row,l),l=>n.row.total_quantity=l],modelValue:n.row.total_quantity,"auto-save":""},{default:t(l=>[e(D,{modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,dense:"",autofocus:"",counter:"",mask:"#####",onKeyup:me(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-action":t(n=>[e(G,{class:"q-gutter-x-md",props:n},{default:t(()=>[e(Ht,{delete:n},null,8,["delete"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var ea=Z(Zt,[["__scopeId","data-v-c74b6072"]]);const ta={class:"q-gutter-sm"},aa={__name:"ProductPage",setup(d){return(y,V)=>(k(),A("div",ta,[a("div",null,[e(ea)])]))}},oa=a("div",{class:"text-h6"},"Create Branch Raw Materials",-1),la={class:"q-mb-lg"},na={key:0,class:"custom-list z-top"},sa=a("div",null,"Raw Materials Code",-1),ra=a("div",null,"Raw Materials Name",-1),da=a("div",null,"Category",-1),ia=a("div",null,"Quantity",-1),ua={__name:"RawMaterialsCreate",setup(d){const y=we(),V=Rt(),S=T(()=>V.rawMaterials),v=dt(),w=U(""),P=async()=>{V.searchRawMaterials(w.value)},u=T(()=>c.total_quantity!==""),_=U(!1),m=()=>{_.value=!0},r=()=>{R(),_.value=!1},h=f=>{c.ingredients_id=f.id,c.ingredient_name=f.name,c.ingredient_code=f.code,c.category=f.category,c.unit=f.unit,w.value=""},c=Ie({ingredients_id:"",ingredient_name:"",ingredient_code:"",total_quantity:"",category:"",unit:"",branch_id:y.params.branch_id}),R=()=>{c.ingredients_id="",c.ingredient_name="",c.ingredient_code="",c.total_quantity="",c.ingredients_id="",c.category="",c.unit=""},C=async()=>{try{const{product_name:f,...b}=c;await v.createBranchRawMaterials(b),console.log("data to send",b),R(),_.value=!1}catch(f){console.log(f)}};return(f,b)=>(k(),A(K,null,[e(I,{outline:"",class:"text-dark q-pa-sm",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Raw Material",onClick:m,style:{background:"#f43f5e"}}),e(X,{modelValue:_.value,"onUpdate:modelValue":b[5]||(b[5]=p=>_.value=p),persistent:""},{default:t(()=>[e(M,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(N,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[oa,e(Pe),se(e(I,{icon:"close",flat:"",dense:"",round:""},null,512),[[re]])]),_:1}),e(N,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",la,[e(D,{modelValue:w.value,"onUpdate:modelValue":[b[0]||(b[0]=p=>w.value=p),P],debounce:"1000",outlined:"",rounded:"",placeholder:"Search Raw Materials",dense:""},{append:t(()=>[a("div",null,[e(te,{name:"search"})])]),default:t(()=>[w.value?(k(),A("div",na,[e(M,null,{default:t(()=>[e(Se,{separator:""},{default:t(()=>{var p;return[(p=S.value)!=null&&p.length?(k(!0),A(K,{key:1},ge(S.value,i=>(k(),F(le,{onClick:g=>h(i),key:i.id,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q($(i.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(k(),F(le,{key:0},{default:t(()=>[q(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ae("",!0)]),_:1},8,["modelValue"])]),a("div",null,[sa,e(D,{modelValue:c.ingredient_code,"onUpdate:modelValue":b[1]||(b[1]=p=>c.ingredient_code=p),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[ra,e(D,{modelValue:c.ingredient_name,"onUpdate:modelValue":b[2]||(b[2]=p=>c.ingredient_name=p),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[da,e(D,{modelValue:c.category,"onUpdate:modelValue":b[3]||(b[3]=p=>c.category=p),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[ia,e(D,{modelValue:c.total_quantity,"onUpdate:modelValue":b[4]||(b[4]=p=>c.total_quantity=p),type:"number",outlined:"",suffix:c.unit||"",dense:"",rules:[p=>p&&p.length>0||"Total quantity is required"]},null,8,["modelValue","suffix","rules"])])]),_:1}),e(Be,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(I,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:r}),e(I,{class:"glossy",color:"teal",label:"Create",onClick:C,disable:!u.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const vt=d=>(de("data-v-17ad5e9f"),d=d(),ie(),d),ca=vt(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),ma=vt(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),pa={__name:"RawMaterialsTableDelete",props:["delete"],setup(d){const y=dt(),V=d,S=async()=>{console.log("clickkkd");try{await y.deleteBranchRawMaterials(V.delete.row.id),ce.create({type:"negative",icon:"warning",message:`Raw Materials ${V.delete.row.name}  successfully deleted`,timeout:1e3,position:"top"}),v.value=!1}catch(P){console.error(P.message)}},v=U(!1),w=()=>{v.value=!0};return(P,u)=>(k(),A(K,null,[e(I,{onClick:w,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"",align:"center"},{default:t(()=>[e(fe,{class:"bg-negative",delay:200},{default:t(()=>[q("Delete")]),_:1})]),_:1}),e(X,{modelValue:v.value,"onUpdate:modelValue":u[0]||(u[0]=_=>v.value=_)},{default:t(()=>[e(M,null,{default:t(()=>[e(N,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[ca,ma]),_:1}),e(at,{class:"q-mb-md"}),e(N,null,{default:t(()=>[e(Be,{align:"right",class:"q-pt-none"},{default:t(()=>[se(e(I,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[re]]),e(I,{dense:"",label:"Delete",color:"negative",onClick:S,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var _a=Z(pa,[["__scopeId","data-v-17ad5e9f"]]);const yt=d=>(de("data-v-74a3fea6"),d=d(),ie(),d),ga={class:"row justify-between"},fa={class:"q-my-sm"},va={key:0,class:"spinner-wrapper"},ya={key:1},ha={key:0,class:"data-error"},ba=yt(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),wa=yt(()=>a("div",{class:"text-white"},"Edit Available Stocks",-1)),ka={class:"row justify-center q-gutter-x-md"},xa={__name:"RawMaterialsTable",setup(d){const V=we().params.branch_id,S=dt(),v=U(""),w=U(!0),P=U([]),u=U(!1),_=U({rowsPerPage:0}),m=T(()=>S.branchRawMaterials),r=T(()=>v.value?m.value.filter(b=>b.name.toLowerCase().includes(v.value.toLowerCase())):m.value);Ne(async()=>{console.log("props.branchId in onMounted:",V),V&&await h(V)});const h=async b=>{try{w.value=!0;const p=await S.fetchBranchRawMaterials(b);m.value=p,m.value.length||(u.value=!0),console.log("Branch Raw Materials",m.value)}catch(p){console.log("Error fetching branch product:",p),u.value=!0}finally{w.value=!1}};async function c(b,p){try{const i=await ee.put("/api/update-branch-rawMaterials/"+b.id,{total_quantity:parseInt(p)});if(i.status===200){const g=P.value.findIndex(s=>s.id==b.id);P.value[g]=parseInt(p),ce.create({type:"positive",message:i.data.message,timout:1e3,position:"top"})}}catch(i){console.error("Error updating price:",i)}}ye(v,async b=>{w.value=!0,await new Promise(p=>setTimeout(p,1e3)),w.value=!1,u.value=r.value.length===0});const R=b=>{const p=b.total_quantity;if(b.ingredients.unit==="Grams"&&p<1e3)return"bg-red";let g;return p>=1e3?g=p/1e3:g=p,g<5?g<=2?"bg-red":(g<=3,"bg-warning"):"bg-positive"},C=b=>{const p=b.total_quantity,i=b.ingredients.unit;if(p>1e3){const g=(p/1e3).toFixed(2);return g.endsWith(".00")?`${Math.round(p/1e3)} kilos`:`${g} kilos`}else return p>1?`${p} ${i}`:`${p} ${i}`},f=[{name:"code",label:"Raw Materials Code",align:"center",field:b=>{var p,i;return(i=(p=b==null?void 0:b.ingredients)==null?void 0:p.code)!=null?i:"No Code"},format:b=>`${b}`,sortable:!0},{name:"name",label:"Raw Materials Name",align:"center",field:b=>{var p,i;return(i=(p=b==null?void 0:b.ingredients)==null?void 0:p.name)!=null?i:"No Code"},format:b=>`${b}`,sortable:!0},{name:"total_quantity",label:"Available Stocks",align:"center",field:"total_quantity",sortable:!0},{name:"action",label:"Action",align:"center",sortable:!0}];return(b,p)=>(k(),A(K,null,[a("div",ga,[a("div",null,[e(D,{class:"q-pb-lg q-pl-md",modelValue:v.value,"onUpdate:modelValue":p[0]||(p[0]=i=>v.value=i),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"5000px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(te,{name:"search"})]),_:1},8,["modelValue"])]),a("div",fa,[e(ua)])]),w.value?(k(),A("div",va,[e(ot,{size:"50px",color:"primary"})])):(k(),A("div",ya,[r.value.length===0?(k(),A("div",ha,[e(te,{name:"warning",color:"warning",size:"4em"}),ba])):(k(),F($e,{key:1,class:"table-container sticky-header",filter:v.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:f,rows:r.value,"row-key":"name","virtual-scroll":"",pagination:_.value,"onUpdate:pagination":p[1]||(p[1]=i=>_.value=i),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"340px"}},{"body-cell-total_quantity":t(i=>[e(G,{props:i},{default:t(()=>[e(ve,{square:"",class:xt(["text-white cursor-pointer",R(i.row)])},{default:t(()=>[q($(C(i.row))+" ",1),e(fe,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[wa]),_:1}),e(_e,{"onUpdate:modelValue":[g=>c(i.row,g),g=>i.row.total_quantity=g],modelValue:i.row.total_quantity,"auto-save":""},{default:t(g=>[e(D,{modelValue:g.value,"onUpdate:modelValue":s=>g.value=s,dense:"",suffix:i.row.ingredients.unit,mask:"########",autofocus:"",counter:"",onKeyup:me(g.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","suffix","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["class"])]),_:2},1032,["props"])]),"body-cell-action":t(i=>[e(G,{props:i},{default:t(()=>[a("div",ka,[e(_a,{delete:i},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var $a=Z(xa,[["__scopeId","data-v-74a3fea6"]]);const Va={class:"q-gutter-sm"},Ca={class:"q-gutter-x-sm"},Ra={__name:"RawMaterialsPage",setup(d){return(y,V)=>(k(),A("div",Va,[a("div",Ca,[e(ve,{label:"Good",class:"text-white",color:"positive"}),e(ve,{label:"Warning",class:"text-white",color:"warning"}),e(ve,{label:"Danger",class:"text-white",color:"red"})]),a("div",null,[e($a)])]))}};const Sa=d=>(de("data-v-2e420de9"),d=d(),ie(),d),Pa={class:"text-h6 text-white"},Ua=Sa(()=>a("div",{class:"text-h6",align:"center"},"Bread List",-1)),Na={__name:"BreadView",props:["breadProduction","branchRecipe"],setup(d){const{dialogRef:y,onDialogHide:V,onDialogOK:S,onDialogCancel:v}=qe();console.log("breadReportsaaasss",d.breadProduction);const P=u=>u?u.split(" ").map(_=>_.charAt(0).toUpperCase()+_.slice(1).toLowerCase()).join(" "):"";return(u,_)=>(k(),F(X,{ref_key:"dialogRef",ref:y,onHide:ae(V)},{default:t(()=>[e(M,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,{class:"row bg-backgroud text-h6"},{default:t(()=>{var m,r,h,c;return[a("div",Pa,$(`${P((r=(m=d.branchRecipe)==null?void 0:m.recipe)==null?void 0:r.name)} - ${(c=(h=d.branchRecipe)==null?void 0:h.recipe)==null?void 0:c.category}`),1),e(Pe),a("div",null,[se((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(fe,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[re]])])]}),_:1}),e(N,null,{default:t(()=>[Ua]),_:1}),e(N,null,{default:t(()=>[e(Se,{dense:"",separator:"",class:"box"},{default:t(()=>[e(le,null,{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Bread Name")]),_:1})]),_:1}),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-overline text-center"},{default:t(()=>[q("Pieces")]),_:1})]),_:1})]),_:1}),(k(!0),A(K,null,ge(d.breadProduction,(m,r)=>(k(),F(le,{key:r},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>{var h;return[q($(P((h=m==null?void 0:m.bread)==null?void 0:h.name)),1)]}),_:2},1024)]),_:2},1024),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-caption text-center"},{default:t(()=>[q($(`${m==null?void 0:m.bread_production} `),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var qa=Z(Na,[["__scopeId","data-v-2e420de9"]]);const Da=d=>(de("data-v-961b0a22"),d=d(),ie(),d),Aa={class:"text-h6 text-white"},Ia=Da(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Ba={__name:"IngredientsView",props:["ingredientProduction","branchRecipe"],setup(d){const{dialogRef:y,onDialogHide:V,onDialogOK:S,onDialogCancel:v}=qe();console.log("ingredientProduction",d.ingredientProduction);const P=_=>{const m=Number(_.quantity)||0,r=_.unit||"";return m>1e3?`${parseFloat((m/1e3).toFixed(3))} kg`:m>1?`${parseFloat(m.toFixed(3))} ${r}`:`${parseFloat(m.toFixed(3))} ${r}`},u=_=>_?_.split(" ").map(m=>m.charAt(0).toUpperCase()+m.slice(1).toLowerCase()).join(" "):"";return(_,m)=>(k(),F(X,{ref_key:"dialogRef",ref:y,onHide:ae(V)},{default:t(()=>[e(M,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,{class:"row bg-backgroud text-h6"},{default:t(()=>{var r,h,c,R;return[a("div",Aa,$(`${u((h=(r=d.branchRecipe)==null?void 0:r.recipe)==null?void 0:h.name)} - ${(R=(c=d.branchRecipe)==null?void 0:c.recipe)==null?void 0:R.category}`),1),e(Pe),a("div",null,[se((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(fe,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[re]])])]}),_:1}),e(N,null,{default:t(()=>[Ia]),_:1}),e(N,null,{default:t(()=>[e(Se,{dense:"",separator:"",class:"box"},{default:t(()=>[e(le,null,{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Raw Materials Name")]),_:1})]),_:1}),e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Code")]),_:1})]),_:1}),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Quantity")]),_:1})]),_:1})]),_:1}),(k(!0),A(K,null,ge(d.ingredientProduction,(r,h)=>(k(),F(le,{key:h},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q($(r.ingredients.name),1)]),_:2},1024)]),_:2},1024),e(Y,null,{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q($(r.ingredients.code),1)]),_:2},1024)]),_:2},1024),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q($(P(r)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Ta=Z(Ba,[["__scopeId","data-v-961b0a22"]]);const Xe=rt("productions",()=>{const d=U([]),y=U([]);return{productions:d,production:y,fetchAllProduction:async()=>{const m=await ee.get("/api/branch-production-report");d.value=m.data.reports},fetchBranchProductions:async m=>{try{const r=await ee.get(`/api/branches/${m}/production-report`);d.value=r.data}catch(r){console.log(r)}},updateBakerReport:async(m,r)=>{console.log("baker reports data in store",r),console.log("baker reports id data in store",m),De.show();try{const h=await ee.put(`api/update/branch-baker-report/${m}`,r);console.log(h.data)}catch(h){console.error("Error updating baker report:",h)}finally{De.hide()}},addBreadProduction:async m=>{console.log("Bread Production Data:",m),De.show();try{const r=await ee.post("/api/branch-add-bread-production-report",m);console.log(r.data),ce.create({message:"Bread Production Report Added Successfully",color:"positive"})}catch(r){console.log(r),ce.create({message:"Error adding Bread Production Report",color:"negative"})}finally{De.hide()}},addSelectaProduction:async m=>{console.log("Selecta Production Data:",m),De.show();try{const r=await ee.post("/api/branch-add-selecta-production-report",m);console.log(r.data),ce.create({message:"Bread Production Report Added Successfully",color:"positive"})}catch(r){console.log(r),ce.create({message:"Error adding Bread Production Report",color:"negative"})}finally{De.hide()}},addSoftdrinksProduction:async m=>{console.log("Softdrinks Production Data:",m),De.show();try{const r=await ee.post("/api/branch-add-softdrinks-production-report",m);console.log(r.data),ce.create({message:"Softdrinks Production Report Added Successfully",color:"positive"})}catch(r){console.log(r),ce.create({message:"Error adding Bread Production Report",color:"negative"})}finally{De.hide()}},addOtherProductProduction:async m=>{console.log("Softdrinks Production Data:",m),De.show();try{const r=await ee.post("/api/branch-add-other-production-report",m);console.log(r.data),ce.create({message:"Softdrinks Production Report Added Successfully",color:"positive"})}catch(r){console.log(r),ce.create({message:"Error adding Bread Production Report",color:"negative"})}finally{De.hide()}}}});const ht=d=>(de("data-v-6681c582"),d=d(),ie(),d),Fa={class:"text-h6 text-dark"},za={class:"row q-gutter-sm"},La={class:"row q-mt-sm q-gutter-sm"},Oa=ht(()=>a("div",{class:"q-mt-sm"},"Kilo",-1)),Ma={class:"q-mt-xl q-gutter-md"},ja={key:0},Ha={class:"q-mx-sm"},Qa=ht(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Ea={__name:"EditBakersReport",props:["bakerReports","sales_report_id"],setup(d){const y=Xe(),{dialogRef:V,onDialogHide:S}=qe(),v=d;console.log("bakers report",v.bakerReports);const w=Ie({target:0,actual_target:0,short:0,over:0,kilo:0}),P=T(()=>v.bakerReports.ingredient_bakers_reports.map(C=>{const f=parseFloat(v.bakerReports.kilo)||1,b=parseFloat(w.kilo)||1,i=C.quantity/f*b;return{...C,quantity:i.toFixed(3)}})),u=C=>C?C.split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1).toLowerCase()).join(" "):"",_=C=>{const f=Number(C.quantity)||0,b=C.unit||"";return f>1e3?`${parseFloat((f/1e3).toFixed(3))} kg`:f>1?`${parseFloat(f.toFixed(3))} ${b}`:`${parseFloat(f.toFixed(3))} ${b}`},m=C=>{const f=Number(C)||0;return parseFloat(f.toFixed(3)).toString()},r=C=>{const f=Number(C)||0;return parseFloat(f.toFixed(3)).toString()},h=T(()=>v.bakerReports.combined_bakers_reports.reduce((C,f)=>C+(parseFloat(f.bread_production)||0),0)),c=()=>{const C=h.value,f=parseFloat(w.actual_target)||0;C>f?(w.over=C-f,w.short=0):(w.short=f-C,w.over=0)};ye(()=>v.bakerReports,C=>{C&&(w.target=m(C.target)||0,w.actual_target=C.actual_target||0,w.short=C.short||0,w.over=C.over||0,w.kilo=r(C.kilo)||0)},{immediate:!0}),ye(()=>w.kilo,()=>{const C=parseFloat(w.kilo)||1,b=(parseFloat(w.target)||0)*C;w.actual_target=m(Math.ceil(b)),c()}),ye(()=>h.value,()=>c());const R=async()=>{var g,s,n;const C=v.bakerReports.id,f=((n=(s=(g=v.bakerReports)==null?void 0:g.branch_recipe)==null?void 0:s.recipe)==null?void 0:n.category)||null,b=v.bakerReports.status,p=(v==null?void 0:v.sales_report_id)||null,i={initial_bakerreports_id:C,sales_report_id:p,category:f,target:w.target,actual_target:w.actual_target,short:w.short,over:w.over,status:b,kilo:w.kilo,combined_bakers_reports:v.bakerReports.combined_bakers_reports.map(l=>({bread_id:l.bread.id,bread_production:l.bread_production})),recalculated_ingredients:P.value.map(l=>({ingredients_id:l.ingredients.id,quantity:l.quantity,unit:l.unit}))};console.log("Edited Bakers Report",i),console.log("Edited Bakers Report",C);try{await y.updateBakerReport(C,i),ce.create({type:"positive",message:"Baker report updated successfully!",position:"top"}),S()}catch(l){console.error("Error updating baker report:",l),ce.create({type:"negative",message:"Failed to update baker report. Please try again.",position:"top"})}};return(C,f)=>(k(),F(X,{ref_key:"dialogRef",ref:V,onHide:ae(S)},{default:t(()=>[e(M,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,{class:"row bg-backgroud text-h6"},{default:t(()=>{var b,p,i,g,s,n;return[a("div",Fa,$(`${u((i=(p=(b=d.bakerReports)==null?void 0:b.branch_recipe)==null?void 0:p.recipe)==null?void 0:i.name)} - ${(n=(s=(g=d.bakerReports)==null?void 0:g.branch_recipe)==null?void 0:s.recipe)==null?void 0:n.category}`),1),e(Pe),a("div",null,[se((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(fe,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[re]])])]}),_:1}),e(N,{class:"row q-gutter-x-xl"},{default:t(()=>[a("div",null,[a("div",za,[a("div",null,[q(" Target Pcs "),e(D,{readonly:"",modelValue:w.target,"onUpdate:modelValue":f[0]||(f[0]=b=>w.target=b),outlined:"",type:"number",dense:"",style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])]),a("div",null,[q(" Actual Target "),e(D,{readonly:"",modelValue:w.actual_target,"onUpdate:modelValue":f[1]||(f[1]=b=>w.actual_target=b),outlined:"",dense:"",style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])])]),a("div",La,[a("div",null,[q(" Short "),e(D,{readonly:"",modelValue:w.short,"onUpdate:modelValue":f[2]||(f[2]=b=>w.short=b),outlined:"",type:"number",dense:"",style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])]),a("div",null,[q(" Over "),e(D,{readonly:"",modelValue:w.over,"onUpdate:modelValue":f[3]||(f[3]=b=>w.over=b),outlined:"",dense:"",style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])])]),a("div",null,[Oa,e(D,{outlined:"",modelValue:w.kilo,"onUpdate:modelValue":f[4]||(f[4]=b=>w.kilo=b),dense:"",type:"number",style:{width:"210px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])]),a("div",Ma,[d.bakerReports.combined_bakers_reports.length?(k(),A("div",ja,[(k(!0),A(K,null,ge(d.bakerReports.combined_bakers_reports,(b,p)=>(k(),A("div",{key:p,class:"q-my-md"},[e(at,{class:"q-ma-md"}),a("div",Ha,$(b.bread.name),1),e(D,{outlined:"",modelValue:b.bread_production,"onUpdate:modelValue":i=>b.bread_production=i,dense:"",type:"numbers",suffix:"pcs",style:{width:"210px","max-width":"300px","min-width":"50px"}},null,8,["modelValue","onUpdate:modelValue"])]))),128))])):Ae("",!0)])]),a("div",null,[Qa,e(Se,{dense:"",separator:"",class:"box"},{default:t(()=>[e(le,null,{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Raw Materials Name")]),_:1})]),_:1}),e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Code")]),_:1})]),_:1}),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Quantity")]),_:1})]),_:1})]),_:1}),(k(!0),A(K,null,ge(P.value,(b,p)=>(k(),F(le,{key:p},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q($(b.ingredients.name),1)]),_:2},1024)]),_:2},1024),e(Y,null,{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q($(b.ingredients.code),1)]),_:2},1024)]),_:2},1024),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q($(_(b)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(Be,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:t(()=>[se(e(I,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[re]]),e(I,{class:"glossy",color:"teal",label:"Save",onClick:R})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Ka=Z(Ea,[["__scopeId","data-v-6681c582"]]);const Ya=d=>(de("data-v-f96814be"),d=d(),ie(),d),Ga=Ya(()=>a("div",{class:"row justify-between"},[a("div",{class:"text-h6"},"Baker Report")],-1)),Wa={class:"text-subtitle1 text-weight-regular"},Ja={class:"q-ma-sm"},Xa={class:"q-ma-sm",align:"center"},Za=["src"],eo={__name:"BakerReportPanel",props:["bakersReport","sales_report_id"],setup(d){tt.exports.vfs=mt;const y=d,V=y.bakersReport;console.log("Bakers Report",y.bakersReport);const S=U(!0),v=U(!1);U(!1);const w=U({rowsPerPage:0}),P=U(""),u=Te(),_=(o,x)=>{u.dialog({component:qa,componentProps:{breadProduction:o,branchRecipe:x}})},m=(o,x)=>{u.dialog({component:Ta,componentProps:{ingredientProduction:o,branchRecipe:x}})},r=(o,x)=>{u.dialog({component:Ka,componentProps:{bakerReports:o,sales_report_id:x}})},h=o=>Ce.formatDate(o,"MMM. DD, YYYY"),c=o=>{const x=Number(o)||0;return parseFloat(x.toFixed(3)).toString()},R=o=>{const x=Number(o)||0;return parseFloat(x.toFixed(3)).toString()},C=o=>o?o.split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1).toLowerCase()).join(" "):"",f=o=>{const x=ue=>ue?ue.charAt(0).toUpperCase()+ue.slice(1).toLowerCase():"",B=o.firstname?x(o.firstname):"No Firstname",O=o.middlename?x(o.middlename).charAt(0)+".":"",J=o.lastname?x(o.lastname):"No Lastname";return`${B} ${O} ${J}`.trim()},b=o=>{const x=new Date(o),B={hour:"2-digit",minute:"2-digit",hour12:!0};return x.toLocaleTimeString(void 0,B)},p=o=>{switch(o){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},i=o=>o?o.split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1).toLowerCase()).join(" "):"",g=o=>o?o.recipe_category==="Filling"?o.filling_bakers_reports||[]:o.recipe_category==="Dough"?o.bread_production_reports||[]:[]:(console.error("No bakerReport provided"),[]),s=[{name:"recipe_name",align:"center",label:"Recipe Name",field:o=>o.branch_recipe&&o.branch_recipe.recipe?{name:o.branch_recipe.recipe.name,category:o.branch_recipe.recipe.category}:{name:"N/A",category:"N/A"},format:o=>`${i(o.name)} (${o.category})`,sortable:!0},{name:"created_at",align:"center",label:"Time",field:"created_at",format:o=>b(o)},{name:"kilo",align:"center",label:"Kilo / s",field:"kilo",format:o=>`${R(o)}`},{name:"actual_target",align:"center",label:"Actual Target",field:o=>o.target*o.kilo,format:o=>`${Math.ceil(o)}`},{name:"over",align:"center",label:"Over",field:"over",format:o=>`${o}`},{name:"short",align:"center",label:"Short",field:"short",format:o=>`${o}`},{name:"status",align:"center",label:"Status",field:"status"},{name:"combined_bakers_reports",align:"center",label:"Breads",field:"combined_bakers_reports"},{name:"ingredients_reports",align:"center",label:"Ingredients",field:"ingredients_reports"},{name:"action",align:"center",label:"Action",field:"action"}],n=o=>{var ne,be,He,H,oe,Q,E,j,z,L,pe,Ve,Me,it;console.log("bakerReport",o);const x=`${(He=(be=(ne=o==null?void 0:o.branch_recipe)==null?void 0:ne.recipe)==null?void 0:be.name)!=null?He:"Unkown Recipe"} (${(H=o==null?void 0:o.recipe_category)!=null?H:"Unkown Category"})`,B=(Q=(oe=o==null?void 0:o.branch_recipe)==null?void 0:oe.target)!=null?Q:0,O=(E=o==null?void 0:o.actual_target)!=null?E:0,J=(j=o==null?void 0:o.kilo)!=null?j:0,ue=(z=o==null?void 0:o.over)!=null?z:0,Ue=(L=o==null?void 0:o.short)!=null?L:0,he={table:{widths:["50%","50%"],body:[[{text:"Recipe Name",style:"tableHeader",alignment:"left"},{text:x,style:"tableHeader",alignment:"center"}],[{text:"Target per Kilo",style:"tableHeader",alignment:"left"},{text:`${c(B)} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Actual Target",style:"tableHeader",alignment:"left"},{text:`${O} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Kilo",style:"tableHeader",alignment:"left"},{text:`${R(J)} kg/s`,style:"tableHeader",alignment:"center"}],[{text:"Over",style:"tableHeader",alignment:"left"},{text:`${ue} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Short",style:"tableHeader",alignment:"left"},{text:`${Ue} pcs`,style:"tableHeader",alignment:"center"}]]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}};return{content:[{text:"Baker Report",style:"header",alignment:"center"},{columns:[{text:`Branch Name: ${o.branch.name||"No name available"}
                Baker: ${f(((pe=o==null?void 0:o.user)==null?void 0:pe.employee)||"Unknown Baker Name")}
                Recipe: ${((Ve=o.recipe)==null?void 0:Ve.name)||"Unknown Recipe"} (${o.recipe_category||"Unknown Category"})
             `,width:"80%",margin:[0,0,0,10]},{text:`Date: ${h(((Me=y.bakersReport[0])==null?void 0:Me.created_at)||((it=y.bakersReport[1])==null?void 0:it.created_at)||"No name available")}
                Time: ${b(o.created_at)}
                Status: ${C(o.status)}`,margin:[0,0,0,10]}]},{columns:[{width:"50%",stack:[{text:"Bread Production",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*"],body:[[{text:"Bread Name",style:"tableHeader",alignment:"center"},{text:"Production",style:"tableHeader",alignment:"center"}],...g(o).map(Re=>{var Ze;return[{text:((Ze=Re==null?void 0:Re.bread)==null?void 0:Ze.name)||"Unknown Bread",style:"body"},{text:o.recipe_category==="Filling"?`${(Re==null?void 0:Re.filling_production)||"0"} pcs`:`${Re==null?void 0:Re.bread_new_production} pcs`,style:"body",alignment:"center"}]})]}}],columnGap:10},{width:"50%",stack:[{text:"Ingredients",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*"],body:[[{text:"Ingredient Code",style:"tableHeader",alignment:"center"},{text:"Quantity",style:"tableHeader",alignment:"center"}],...(o.ingredient_bakers_reports||[]).map(Re=>{var Ze,ut;return[{text:((Ze=Re==null?void 0:Re.ingredients)==null?void 0:Ze.code)||"Unknown Ingredient",style:"body"},{text:`${(Re==null?void 0:Re.quantity)||"Unknown Quantity"} ${((ut=Re==null?void 0:Re.ingredients)==null?void 0:ut.unit)||""}`,style:"body",alignment:"center"}]})]}}],columnGap:10}],columnGap:20},{canvas:[{type:"line",x1:0,y1:25,x2:555,y2:25,lineWidth:1,dash:{length:5,space:5},lineColor:"#000000",margin:[0,20,0,0]}]},{margin:[0,20,0,0],stack:[{text:"Summary",style:"subheader",alignment:"center"},he]}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableHeader:{bold:!0,fontSize:10,color:"black"},body:{fontSize:8}},pageMargins:[20,20,20,20]}},l=o=>{const x=n(o);tt.exports.createPdf(x).getDataUrl(B=>{P.value=B,v.value=!0})};return(o,x)=>(k(),A("div",null,[e(M,{class:"my-card q-pa-md"},{default:t(()=>{var B,O,J,ue,Ue,he;return[Ga,a("div",Wa,[a("div",null," Name: "+$(f(((O=(B=ae(V)[0])==null?void 0:B.user)==null?void 0:O.employee)||((ue=(J=ae(V)[1])==null?void 0:J.user)==null?void 0:ue.employee)||"No name available")),1),a("div",null," Date: "+$(`${h(((Ue=y.bakersReport[0])==null?void 0:Ue.created_at)||((he=y.bakersReport[1])==null?void 0:he.created_at)||"No name available")}`),1)]),e(N,null,{default:t(()=>[e($e,{class:"table-container sticky-header2",columns:s,rows:ae(V),"row-key":"name","header-class":"custom-header","virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48,pagination:w.value,"rows-per-page-options":[0]},{"body-cell-status":t(ne=>[e(G,{props:ne},{default:t(()=>[e(ve,{align:"middle",color:p(ne.row.status)},{default:t(()=>[q($(C(ne.row.status)),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-combined_bakers_reports":t(ne=>[e(G,{props:ne},{default:t(()=>[e(I,{class:"gradient-icon",flat:"",rounded:"",onClick:be=>_(ne.row.combined_bakers_reports,ne.row.branch_recipe)},{default:t(()=>[e(te,{name:"visibility",class:"gradient-icon"}),e(fe,{class:"gradient-tooltip"},{default:t(()=>[q("View Breads")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),"body-cell-ingredients_reports":t(ne=>[e(G,{props:ne},{default:t(()=>[e(I,{class:"gradient-icon2",flat:"",rounded:"",onClick:be=>m(ne.row.ingredient_bakers_reports,ne.row.branch_recipe)},{default:t(()=>[e(te,{name:"visibility",class:"gradient-icon2"}),e(fe,{class:"gradient-tooltip"},{default:t(()=>[q("View Ingredients")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),"body-cell-action":t(ne=>[e(G,{props:ne},{default:t(()=>[e(I,{dense:"",flat:"",round:"",icon:"more_vert","aria-label":"Action Menu",onClick:be=>o.toggleMenu(ne.row)},null,8,["onClick"]),e(St,{modelValue:ne.row.menu,"onUpdate:modelValue":be=>ne.row.menu=be,anchor:"bottom right",self:"top right","transition-show":"jump-down","transition-hide":"jump-up"},{default:t(()=>[e(Se,{style:{"min-width":"100px"}},{default:t(()=>[se((k(),F(le,{clickable:"",onClick:be=>l(ne.row)},{default:t(()=>[e(Y,{avatar:""},{default:t(()=>[e(te,{name:"print"})]),_:1}),e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q("Print")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[re]]),se((k(),F(le,{clickable:"",onClick:be=>r(ne.row,d.sales_report_id)},{default:t(()=>[e(Y,{avatar:""},{default:t(()=>[e(te,{name:"edit"})]),_:1}),e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q("Edit")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[re]])]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])]),_:1})]}),_:1}),e(X,{modelValue:v.value,"onUpdate:modelValue":x[0]||(x[0]=B=>v.value=B),"backdrop-filter":o.backdropFilter,maximized:S.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[a("div",Ja,[a("div",Xa,[se((k(),F(I,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},{default:t(()=>[e(fe,null,{default:t(()=>[q("Close")]),_:1})]),_:1})),[[re]])]),a("div",null,[a("iframe",{src:P.value,width:"100%",height:"700px"},null,8,Za)])])]),_:1},8,["modelValue","backdrop-filter","maximized"])]))}};var to=Z(eo,[["__scopeId","data-v-f96814be"]]);const Fe=d=>(de("data-v-103c9df4"),d=d(),ie(),d),ao=Fe(()=>a("div",{class:"text-h6 text-white"},"Bread",-1)),oo={class:"text-subtitle1 text-weight-medium"},lo={class:"q-mb-lg"},no={key:0,class:"custom-list z-top"},so=Fe(()=>a("div",null,"Product Name",-1)),ro={class:"row justify-between q-mt-md q-gutter-md"},io=Fe(()=>a("div",null,"Category",-1)),uo=Fe(()=>a("div",null,"Price",-1)),co={class:"row justify-between q-mt-md q-gutter-md"},mo=Fe(()=>a("div",null,"Beginnings",-1)),po=Fe(()=>a("div",null,"New Production",-1)),_o=Fe(()=>a("div",null,"Remaining",-1)),go=Fe(()=>a("div",null,"Bread Out",-1)),fo=Fe(()=>a("div",null,"Total Quantity",-1)),vo=Fe(()=>a("div",null,"Bread Sold",-1)),yo=Fe(()=>a("div",null,"Sales",-1)),ho={align:"right"},bo={__name:"AddingBreadReport",props:["sales_Reports","sales_report_id","user"],setup(d){const y=d;console.log("props.sales_Reports",y.sales_Reports),console.log("props.user",y.user);const V=y.sales_report_id,S=we(),v=Xe(),w=We();T(()=>w.products);const P=Ee(),u=T(()=>P.branchProducts);console.log("branchProduct",u);const _=S.params.branch_id,m=y.user.id,r=U(""),h=U("");T(()=>r.value&&employees.value.length>0);const c=U("Bread"),R=async()=>{console.log("branch_id.value:",_),console.log("searchQuery.value:",h.value),console.log("category.value:",c.value),(h.value||c.value)&&await P.searchBranchProducts({query:h.value,branches_id:_,category:c.value})},C=U(!1),f=()=>{C.value=!0},b=l=>{const o=J=>J?J.charAt(0).toUpperCase()+J.slice(1).toLowerCase():"",x=l.firstname?o(l.firstname):"No Firstname",B=l.middlename?o(l.middlename).charAt(0)+".":"",O=l.lastname?o(l.lastname):"No Lastname";return`${x} ${B} ${O}`.trim()},p=l=>l?l.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" "):"",i=l=>{console.log("data",l),g.product_id=l.product.id,g.product_name=l.product.name,g.category=l.category,g.price=l.price,h.value=""},g=Ie({sales_report_id:V,branch_id:_,user_id:m,name:"",product_id:"",product_name:"",price:0,beginnings:0,remaining:0,new_production:0,bread_out:0,bread_sold:0,total:0,sales:0,branches_id:S.params.branch_id}),s=T(()=>{const l=parseInt(g.bread_sold||0)*parseFloat(g.price||0);return new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(l)});ye(()=>[g.new_production,g.beginnings],([l,o])=>{g.total=parseInt(l||0)+parseInt(o||0)}),ye(()=>[g.total,g.remaining,g.bread_out],([l,o,x])=>{g.bread_sold=parseInt(l||0)-(parseInt(o||0)+parseInt(x||0))}),ye(()=>[g.bread_sold,g.price],([l,o])=>{g.sales=parseInt(l||0)*parseFloat(o||0)});const n=async()=>{try{if(!g.product_name||!g.price||!g.product_id||!g.branch_id||!g.sales_report_id){$q.notify({type:"negative",message:"Product name, price, product ID, branch ID, and sales report ID are required."});return}const l={user_id:g.user_id,branch_id:g.branch_id,sales_report_id:g.sales_report_id,product_id:g.product_id,product_name:g.product_name,price:g.price,beginnings:g.beginnings,remaining:g.remaining,new_production:g.new_production,bread_out:g.bread_out,bread_sold:g.bread_sold,total:g.total,sales:g.sales};console.log("payload",l),await v.addBreadProduction(l)}catch{}};return(l,o)=>(k(),A(K,null,[a("div",null,[e(I,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Add Bread",onClick:f})]),e(X,{modelValue:C.value,"onUpdate:modelValue":o[11]||(o[11]=x=>C.value=x),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(M,{style:{width:"600px","max-width":"80vw"}},{default:t(()=>[e(N,{class:"row items-center bg-backgroud"},{default:t(()=>[ao,e(Pe),se(e(I,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[re]])]),_:1}),e(N,null,{default:t(()=>[a("div",oo," Cashier: "+$(b(d.user.employee)),1)]),_:1}),e(N,{class:"q-gutter-y-sm"},{default:t(()=>[a("div",lo,[e(D,{modelValue:h.value,"onUpdate:modelValue":[o[0]||(o[0]=x=>h.value=x),R],debounce:"1000",outlined:"",flat:"",placeholder:"Search product",dense:""},{append:t(()=>[a("div",null,[e(te,{name:"search"})])]),default:t(()=>[h.value?(k(),A("div",no,[e(M,null,{default:t(()=>[e(Se,{separator:""},{default:t(()=>{var x;return[(x=u.value)!=null&&x.length?(k(!0),A(K,{key:1},ge(u.value,B=>(k(),F(le,{onClick:O=>i(B),key:B.id,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q($(p(B.product.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(k(),F(le,{key:0},{default:t(()=>[q(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ae("",!0)]),_:1},8,["modelValue"])]),a("div",null,[so,e(D,{modelValue:g.product_name,"onUpdate:modelValue":o[1]||(o[1]=x=>g.product_name=x),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",ro,[a("div",null,[io,e(D,{modelValue:g.category,"onUpdate:modelValue":o[2]||(o[2]=x=>g.category=x),readonly:"",dense:"",outlined:"",style:{width:"250px"}},null,8,["modelValue"])]),a("div",null,[uo,e(D,{modelValue:g.price,"onUpdate:modelValue":o[3]||(o[3]=x=>g.price=x),readonly:"",dense:"",outlined:"",style:{width:"250px"}},null,8,["modelValue"])])]),a("div",co,[a("div",null,[mo,e(D,{modelValue:g.beginnings,"onUpdate:modelValue":o[4]||(o[4]=x=>g.beginnings=x),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[po,e(D,{modelValue:g.new_production,"onUpdate:modelValue":o[5]||(o[5]=x=>g.new_production=x),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[_o,e(D,{modelValue:g.remaining,"onUpdate:modelValue":o[6]||(o[6]=x=>g.remaining=x),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[go,e(D,{modelValue:g.bread_out,"onUpdate:modelValue":o[7]||(o[7]=x=>g.bread_out=x),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[fo,e(D,{modelValue:g.total,"onUpdate:modelValue":o[8]||(o[8]=x=>g.total=x),mask:"#####",outlined:"",readonly:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[vo,e(D,{modelValue:g.bread_sold,"onUpdate:modelValue":o[9]||(o[9]=x=>g.bread_sold=x),mask:"#####",readonly:"",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[yo,e(D,{modelValue:s.value,"onUpdate:modelValue":o[10]||(o[10]=x=>s.value=x),outlined:"",readonly:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])])]),_:1}),e(N,null,{default:t(()=>[a("div",ho,[e(I,{color:"red-6",label:"Submit",class:"q-pa-sm",size:"md",onClick:n})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var wo=Z(bo,[["__scopeId","data-v-103c9df4"]]);const ko={class:"row justify-between text-white"},xo=a("div",{class:"text-h6"},"Bread Report",-1),$o={class:"row justify-end q-mt-md"},Vo={class:"text-h6"},Co={__name:"BreadReport",props:["reports","sales_report_id","user"],setup(d){const{dialogRef:y,onDialogHide:V,onDialogOK:S,onDialogCancel:v}=qe(),w=U(!1),P=U(!0),u=d,_=U(""),m=U({rowsPerPage:0});console.log("Reports data structure:",u.reports),console.log("Reports data sales_report_id:",u.sales_report_id);const r=s=>s?s.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",h=async(s,n)=>{console.log("update data of the price",s),console.log("update val of the price",n);try{const l=await ee.put("/api/update-bread-sales-price-report/"+s.id,{price:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},c=async(s,n)=>{console.log("update data of the beginnings",s),console.log("update val of the beginnings",n);try{const l=await ee.put("/api/update-bread-sales-beginnings-report/"+s.id,{beginnings:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},R=async(s,n)=>{console.log("update data of the NewProduction",s),console.log("update val of the NewProduction",n);try{const l=await ee.put("/api/update-bread-sales-newProduction-report/"+s.id,{new_production:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},C=async(s,n)=>{console.log("update data of the new updatedRemaining",s),console.log("update val of the new updatedRemaining",n);try{const l=await ee.put("/api/update-bread-sales-remaining-report/"+s.id,{remaining:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},f=async(s,n)=>{console.log("update data of the new updatedRemaining",s),console.log("update val of the new updatedRemaining",n);try{const l=await ee.put("/api/update-bread-sales-breadOut-report/"+s.id,{bread_out:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},b=[{name:"name",label:"Bread Name",field:s=>(console.log("Row data:",s),s.bread.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:s=>`${s}`},{name:"new_production",label:"New Production (PCS)",field:"new_production",format:s=>`${s}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:s=>`${s}`},{name:"bread_out",label:"Bread Out (PCS)",field:"bread_out",format:s=>`${s}`},{name:"total",label:"Bread Total (PCS)",field:s=>(Number(s.beginnings)||0)+(Number(s.new_production)||0)},{name:"breadSold",label:"Bread Sold (PCS)",field:s=>{const n=Number(s.beginnings)||0,l=Number(s.new_production)||0,o=Number(s.remaining)||0,x=Number(s.bread_out)||0,B=n+l,O=o+x;return B-O},format:s=>`${s}`},{name:"sales",label:"Total Sales",field:s=>{const n=Number(s.beginnings)||0,l=Number(s.new_production)||0,o=Number(s.remaining)||0,x=Number(s.bread_out)||0,B=Number(s.price)||0,O=n+l,J=o+x;return(O-J)*B},format:s=>`${p(s)}`}],p=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(s),i=T(()=>{if(!_.value||!_.value.trim())return u.reports||[];const s=_.value.trim().toLowerCase();return(u.reports||[]).filter(n=>n.bread.name.toLowerCase().includes(s)||n.price.toString().includes(s)||n.sales.toString().includes(s))}),g=T(()=>{const s=i.value.reduce((n,l)=>{const o=Number(l.beginnings)||0,x=Number(l.new_production)||0,B=Number(l.remaining)||0,O=Number(l.bread_out)||0,J=Number(l.price)||0,ue=o+x,Ue=B+O,ne=(ue-Ue)*J;return console.log(`Adding salesAmount: ${ne} to total: ${n}`),n+ne},0);return console.log("Overall Total Sales computed as:",s),s});return console.log("Overall Total Sales:",g.value),(s,n)=>(k(),F(X,{ref_key:"dialogRef",ref:y,onHide:ae(V),modelValue:w.value,"onUpdate:modelValue":n[2]||(n[2]=l=>w.value=l),maximized:P.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(M,null,{default:t(()=>[e(N,{style:{"background-color":"#795548"}},{default:t(()=>[a("div",ko,[xo,se((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(fe,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[re]])])]),_:1}),e(N,{class:"row justify-between"},{default:t(()=>[a("div",null,[e(D,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:_.value,"onUpdate:modelValue":n[0]||(n[0]=l=>_.value=l),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:"",style:{width:"500px"}},{append:t(()=>[e(te,{name:"search"})]),_:1},8,["modelValue"])]),a("div",null,[e(wo,{sales_Reports:u.reports,sales_report_id:d.sales_report_id,user:u.user},null,8,["sales_Reports","sales_report_id","user"])])]),_:1}),e(N,null,{default:t(()=>[e($e,{filter:_.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:b,rows:i.value,"row-key":"name","virtual-scroll":"",pagination:m.value,"onUpdate:pagination":n[1]||(n[1]=l=>m.value=l),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"500px"},class:"table-container sticky-header"},{"body-cell-name":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${r(l.row.bread.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${p(l.row.price)}`),1),e(_e,{"onUpdate:modelValue":[o=>h(l.row,o),o=>l.row.price=o],modelValue:l.row.price,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${l.row.beginnings}`),1),e(_e,{"onUpdate:modelValue":[o=>c(l.row,o),o=>l.row.beginnings=o],modelValue:l.row.beginnings,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-new_production":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${l.row.new_production}`),1),e(_e,{"onUpdate:modelValue":[o=>R(l.row,o),o=>l.row.new_production=o],modelValue:l.row.new_production,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-remaining":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${l.row.remaining}`),1),e(_e,{"onUpdate:modelValue":[o=>C(l.row,o),o=>l.row.remaining=o],modelValue:l.row.remaining,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-bread_out":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${l.row.bread_out}`),1),e(_e,{"onUpdate:modelValue":[o=>f(l.row,o),o=>l.row.bread_out=o],modelValue:l.row.bread_out,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(N,null,{default:t(()=>[a("div",$o,[a("div",Vo," Overall Total Sales: "+$(p(g.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","modelValue","maximized"]))}};const ze=d=>(de("data-v-68ee2954"),d=d(),ie(),d),Ro=ze(()=>a("div",{class:"text-h6 text-white"},"Add Selecta",-1)),So={class:"text-subtitle1 text-weight-medium"},Po={class:"q-mb-lg"},Uo={key:0,class:"custom-list z-top"},No=ze(()=>a("div",null,"Product Name",-1)),qo=ze(()=>a("div",null,"Category",-1)),Do=ze(()=>a("div",null,"Price",-1)),Ao={class:"row justify-between q-mt-md q-gutter-md"},Io=ze(()=>a("div",null,"Beginnings",-1)),Bo=ze(()=>a("div",null,"Added Stocks",-1)),To=ze(()=>a("div",null,"Remaining",-1)),Fo=ze(()=>a("div",null,"Selecta Out",-1)),zo=ze(()=>a("div",null,"Total Quantity",-1)),Lo=ze(()=>a("div",null,"Selecta Sold",-1)),Oo=ze(()=>a("div",null,"Sales",-1)),Mo={align:"right"},jo={__name:"AddingSelectaReport",props:["sales_Reports","sales_report_id","user"],setup(d){const y=d;console.log("props.sales_Reports",y.sales_Reports),console.log("props.user",y.user);const V=y.sales_report_id,S=we(),v=Xe(),w=We();T(()=>w.products);const P=Ee(),u=T(()=>P.branchProducts);console.log("branchProduct",u);const _=S.params.branch_id,m=y.user.id,r=U(""),h=U("Selecta"),c=async()=>{console.log("branch_id.value:",_),console.log("searchQuery.value:",r.value),console.log("category.value:",h.value),(r.value||h.value)&&await P.searchBranchProducts({query:r.value,branches_id:_,category:h.value})},R=U(!1),C=()=>{R.value=!0},f=n=>{const l=O=>O?O.charAt(0).toUpperCase()+O.slice(1).toLowerCase():"",o=n.firstname?l(n.firstname):"No Firstname",x=n.middlename?l(n.middlename).charAt(0)+".":"",B=n.lastname?l(n.lastname):"No Lastname";return`${o} ${x} ${B}`.trim()},b=n=>n?n.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",p=n=>{console.log("data",n),i.product_id=n.product.id,i.product_name=n.product.name,i.category=n.category,i.price=n.price,r.value=""},i=Ie({sales_report_id:V,branch_id:_,user_id:m,name:"",product_id:"",product_name:"",price:0,beginnings:0,remaining:0,added_stocks:0,out:0,sold:0,total:0,sales:0,branches_id:S.params.branch_id}),g=T(()=>{const n=parseInt(i.sold||0)*parseFloat(i.price||0);return new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(n)});ye(()=>[i.added_stocks,i.beginnings],([n,l])=>{i.total=parseInt(n||0)+parseInt(l||0)}),ye(()=>[i.total,i.remaining,i.out],([n,l,o])=>{i.sold=parseInt(n||0)-(parseInt(l||0)+parseInt(o||0))}),ye(()=>[i.sold,i.price],([n,l])=>{i.sales=parseInt(n||0)*parseFloat(l||0)});const s=async()=>{try{if(!i.product_name||!i.price||!i.product_id||!i.branch_id||!i.sales_report_id){$q.notify({type:"negative",message:"Product name, price, product ID, branch ID, and sales report ID are required."});return}const n={user_id:i.user_id,branch_id:i.branch_id,sales_report_id:i.sales_report_id,product_id:i.product_id,product_name:i.product_name,price:i.price,beginnings:i.beginnings,remaining:i.remaining,added_stocks:i.added_stocks,out:i.out,sold:i.sold,total:i.total,sales:i.sales};console.log("payload",n),await v.addSelectaProduction(n)}catch{}};return(n,l)=>(k(),A(K,null,[a("div",null,[e(I,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Add Selecta",onClick:C})]),e(X,{modelValue:R.value,"onUpdate:modelValue":l[11]||(l[11]=o=>R.value=o),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(M,{style:{width:"600px","max-width":"80vw"}},{default:t(()=>[q($(d.user.name)+" ",1),e(N,{class:"row items-center bg-backgroud q-px-md q-py-sm"},{default:t(()=>[Ro,e(Pe),se(e(I,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[re]])]),_:1}),e(N,null,{default:t(()=>[a("div",So," Cashier: "+$(f(d.user.employee)),1)]),_:1}),e(N,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",Po,[e(D,{modelValue:r.value,"onUpdate:modelValue":[l[0]||(l[0]=o=>r.value=o),c],debounce:"1000",outlined:"",flat:"",placeholder:"Search product",dense:""},{append:t(()=>[a("div",null,[e(te,{name:"search"})])]),default:t(()=>[r.value?(k(),A("div",Uo,[e(M,null,{default:t(()=>[e(Se,{separator:""},{default:t(()=>{var o;return[(o=u.value)!=null&&o.length?(k(!0),A(K,{key:1},ge(u.value,x=>(k(),F(le,{onClick:B=>p(x),key:x.id,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q($(b(x.product.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(k(),F(le,{key:0},{default:t(()=>[q(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ae("",!0)]),_:1},8,["modelValue"])]),a("div",null,[No,e(D,{modelValue:i.product_name,"onUpdate:modelValue":l[1]||(l[1]=o=>i.product_name=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[qo,e(D,{modelValue:i.category,"onUpdate:modelValue":l[2]||(l[2]=o=>i.category=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[Do,e(D,{modelValue:i.price,"onUpdate:modelValue":l[3]||(l[3]=o=>i.price=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",Ao,[a("div",null,[Io,e(D,{modelValue:i.beginnings,"onUpdate:modelValue":l[4]||(l[4]=o=>i.beginnings=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Bo,e(D,{modelValue:i.added_stocks,"onUpdate:modelValue":l[5]||(l[5]=o=>i.added_stocks=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[To,e(D,{modelValue:i.remaining,"onUpdate:modelValue":l[6]||(l[6]=o=>i.remaining=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Fo,e(D,{modelValue:i.out,"onUpdate:modelValue":l[7]||(l[7]=o=>i.out=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[zo,e(D,{modelValue:i.total,"onUpdate:modelValue":l[8]||(l[8]=o=>i.total=o),mask:"#####",outlined:"",readonly:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Lo,e(D,{modelValue:i.sold,"onUpdate:modelValue":l[9]||(l[9]=o=>i.sold=o),mask:"#####",readonly:"",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Oo,e(D,{modelValue:g.value,"onUpdate:modelValue":l[10]||(l[10]=o=>g.value=o),outlined:"",readonly:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])])]),_:1}),e(N,null,{default:t(()=>[a("div",Mo,[e(I,{color:"red-6",label:"Submit",class:"q-pa-sm",size:"md",onClick:s})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ho=Z(jo,[["__scopeId","data-v-68ee2954"]]);const Qo={class:"row justify-between text-white"},Eo=a("div",{class:"text-h6"},"Selecta Report",-1),Ko={class:"row justify-end q-mt-md"},Yo={class:"text-h6"},Go={__name:"SelectaReport",props:["reports","sales_report_id","user"],setup(d){const{dialogRef:y,onDialogHide:V,onDialogOK:S,onDialogCancel:v}=qe(),w=U(!1),P=U(!0),u=d,_=U(""),m=U({rowsPerPage:0});console.log("Reports data structure:",u.reports);const r=s=>s?s.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",h=async(s,n)=>{console.log("update data of the price",s),console.log("update val of the price",n);try{const l=await ee.put("/api/update-selecta-sales-price-report/"+s.id,{price:parseInt(n)})}catch(l){console.error(l)}},c=async(s,n)=>{console.log("update data of the beginnings",s),console.log("update val of the beginnings",n);try{const l=await ee.put("/api/update-selecta-sales-beginnings-report/"+s.id,{beginnings:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},R=async(s,n)=>{console.log("update data of the new updatedRemaining",s),console.log("update val of the new updatedRemaining",n);try{const l=await ee.put("/api/update-selecta-sales-remaining-report/"+s.id,{remaining:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},C=async(s,n)=>{console.log("update data of the new updatedRemaining",s),console.log("update val of the new updatedRemaining",n);try{const l=await ee.put("/api/update-selecta-sales-selctaOut-report/"+s.id,{out:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},f=async(s,n)=>{console.log("update data of the new updatedRemaining",s),console.log("update val of the new updatedRemaining",n);try{const l=await ee.put("/api/update-selecta-sales-addedstocks-report/"+s.id,{added_stocks:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},b=[{name:"name",label:"Selecta Name",field:s=>(console.log("Row data:",s),s.selecta.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:s=>`${s}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:s=>`${s}`},{name:"out",label:"Selecta Out (PCS)",field:"out",format:s=>`${s}`},{name:"added_stocks",label:"Added Stocks (PCS)",field:"added_stocks",format:s=>`${s}`},{name:"total_selecta",label:"Total Stocks (PCS)",field:s=>Number(s.beginnings||0)+Number(s.added_stocks||0),format:s=>`${s}`},{name:"sold",label:"Selecta Sold (PCS)",field:s=>{const n=Number(s.beginnings||0),l=Number(s.added_stocks||0),o=Number(s.out||0),x=Number(s.remaining||0),B=n+l,O=x+o;return B-O},format:s=>`${s}`},{name:"sales",label:"Total Sales",field:s=>{const n=Number(s.beginnings||0),l=Number(s.added_stocks||0),o=Number(s.out||0),x=Number(s.remaining||0),B=Number(s.price||0),O=n+l,J=x+o;return(O-J)*B},format:s=>`${p(s)}`}],p=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(s),i=T(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),g=T(()=>{const s=i.value.reduce((n,l)=>{const o=`${l.beginnings}`||0,x=`${l.added_stocks}`||0,B=`${l.out}`||0,O=`${l.remaining}`||0,J=parseInt(o)+parseInt(x),ue=parseInt(O)+parseInt(B),he=(J-ue)*(l.price||0);return console.log(`Adding salesAmount: ${he} to total: ${n}`),n+he},0);return console.log("Overall Total Sales computed as:",s),s});return console.log("Filtered Rows:",i.value),(s,n)=>(k(),F(X,{ref_key:"dialogRef",ref:y,onHide:ae(V),modelValue:w.value,"onUpdate:modelValue":n[2]||(n[2]=l=>w.value=l),maximized:P.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(M,null,{default:t(()=>[e(N,{style:{"background-color":"#f44336"}},{default:t(()=>[a("div",Qo,[Eo,se((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(fe,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[re]])])]),_:1}),e(N,{class:"row justify-between"},{default:t(()=>[a("div",null,[e(D,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:_.value,"onUpdate:modelValue":n[0]||(n[0]=l=>_.value=l),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:"",style:{width:"500px"}},{append:t(()=>[e(te,{name:"search"})]),_:1},8,["modelValue"])]),a("div",null,[e(Ho,{sales_Reports:u.reports,sales_report_id:d.sales_report_id,user:u.user},null,8,["sales_Reports","sales_report_id","user"])])]),_:1}),e(N,null,{default:t(()=>[e($e,{filter:_.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:b,rows:i.value,"row-key":"name","virtual-scroll":"",pagination:m.value,"onUpdate:pagination":n[1]||(n[1]=l=>m.value=l),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"500px"},class:"table-container sticky-header"},{"body-cell-name":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${r(l.row.selecta.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${p(l.row.price)}`),1),e(_e,{"onUpdate:modelValue":[o=>h(l.row,o),o=>l.row.price=o],modelValue:l.row.price,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${l.row.beginnings}`),1),e(_e,{"onUpdate:modelValue":[o=>c(l.row,o),o=>l.row.beginnings=o],modelValue:l.row.beginnings,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-remaining":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${l.row.remaining}`),1),e(_e,{"onUpdate:modelValue":[o=>R(l.row,o),o=>l.row.remaining=o],modelValue:l.row.remaining,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-out":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${l.row.out}`),1),e(_e,{"onUpdate:modelValue":[o=>C(l.row,o),o=>l.row.out=o],modelValue:l.row.out,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-added_stocks":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${l.row.added_stocks}`),1),e(_e,{"onUpdate:modelValue":[o=>f(l.row,o),o=>l.row.added_stocks=o],modelValue:l.row.added_stocks,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(N,null,{default:t(()=>[a("div",Ko,[a("div",Yo," Overall Total Sales: "+$(p(g.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","modelValue","maximized"]))}};const Le=d=>(de("data-v-94be31e2"),d=d(),ie(),d),Wo=Le(()=>a("div",{class:"text-h6 text-white"},"Add Softdrinks",-1)),Jo={class:"text-subtitle1 text-weight-medium"},Xo={class:"q-mb-lg"},Zo={key:0,class:"custom-list z-top"},el=Le(()=>a("div",null,"Product Name",-1)),tl=Le(()=>a("div",null,"Category",-1)),al=Le(()=>a("div",null,"Price",-1)),ol={class:"row justify-between q-mt-md q-gutter-md"},ll=Le(()=>a("div",null,"Beginnings",-1)),nl=Le(()=>a("div",null,"Added Stocks",-1)),sl=Le(()=>a("div",null,"Remaining",-1)),rl=Le(()=>a("div",null,"Softdrinks Out",-1)),dl=Le(()=>a("div",null,"Total Quantity",-1)),il=Le(()=>a("div",null,"Softdrinks Sold",-1)),ul=Le(()=>a("div",null,"Sales",-1)),cl={align:"right"},ml={__name:"AddingSoftdrinksReport",props:["sales_Reports","sales_report_id","user"],setup(d){const y=d;console.log("props.sales_Reports",y.sales_Reports),console.log("props.user",y.user);const V=y.sales_report_id,S=we(),v=Xe(),w=We();T(()=>w.products);const P=Ee(),u=T(()=>P.branchProducts);console.log("branchProduct",u);const _=S.params.branch_id,m=y.user.id,r=U(""),h=U("Softdrinks"),c=async()=>{console.log("branch_id.value:",_),console.log("searchQuery.value:",r.value),console.log("category.value:",h.value),(r.value||h.value)&&await P.searchBranchProducts({query:r.value,branches_id:_,category:h.value})},R=U(!1),C=()=>{R.value=!0},f=n=>{const l=O=>O?O.charAt(0).toUpperCase()+O.slice(1).toLowerCase():"",o=n.firstname?l(n.firstname):"No Firstname",x=n.middlename?l(n.middlename).charAt(0)+".":"",B=n.lastname?l(n.lastname):"No Lastname";return`${o} ${x} ${B}`.trim()},b=n=>n?n.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",p=n=>{console.log("data",n),i.product_id=n.product.id,i.product_name=n.product.name,i.category=n.category,i.price=n.price,r.value=""},i=Ie({sales_report_id:V,branch_id:_,user_id:m,name:"",product_id:"",product_name:"",price:0,beginnings:0,remaining:0,added_stocks:0,out:0,sold:0,total:0,sales:0,branches_id:S.params.branch_id}),g=T(()=>{const n=parseInt(i.sold||0)*parseFloat(i.price||0);return new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(n)});ye(()=>[i.added_stocks,i.beginnings],([n,l])=>{i.total=parseInt(n||0)+parseInt(l||0)}),ye(()=>[i.total,i.remaining,i.out],([n,l,o])=>{i.sold=parseInt(n||0)-(parseInt(l||0)+parseInt(o||0))}),ye(()=>[i.sold,i.price],([n,l])=>{i.sales=parseInt(n||0)*parseFloat(l||0)});const s=async()=>{try{if(!i.product_name||!i.price||!i.product_id||!i.branch_id||!i.sales_report_id){$q.notify({type:"negative",message:"Product name, price, product ID, branch ID, and sales report ID are required."});return}const n={user_id:i.user_id,branch_id:i.branch_id,sales_report_id:i.sales_report_id,product_id:i.product_id,product_name:i.product_name,price:i.price,beginnings:i.beginnings,remaining:i.remaining,added_stocks:i.added_stocks,out:i.out,sold:i.sold,total:i.total,sales:i.sales};console.log("payload",n),await v.addSoftdrinksProduction(n)}catch{}};return(n,l)=>(k(),A(K,null,[a("div",null,[e(I,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Add Softdrinks",onClick:C})]),e(X,{modelValue:R.value,"onUpdate:modelValue":l[11]||(l[11]=o=>R.value=o),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(M,{style:{width:"600px","max-width":"80vw"}},{default:t(()=>[q($(d.user.name)+" ",1),e(N,{class:"row items-center bg-backgroud q-px-md q-py-sm"},{default:t(()=>[Wo,e(Pe),se(e(I,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[re]])]),_:1}),e(N,null,{default:t(()=>[a("div",Jo," Cashier: "+$(f(d.user.employee)),1)]),_:1}),e(N,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",Xo,[e(D,{modelValue:r.value,"onUpdate:modelValue":[l[0]||(l[0]=o=>r.value=o),c],debounce:"1000",outlined:"",flat:"",placeholder:"Search product",dense:""},{append:t(()=>[a("div",null,[e(te,{name:"search"})])]),default:t(()=>[r.value?(k(),A("div",Zo,[e(M,null,{default:t(()=>[e(Se,{separator:""},{default:t(()=>{var o;return[(o=u.value)!=null&&o.length?(k(!0),A(K,{key:1},ge(u.value,x=>(k(),F(le,{onClick:B=>p(x),key:x.id,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q($(b(x.product.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(k(),F(le,{key:0},{default:t(()=>[q(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ae("",!0)]),_:1},8,["modelValue"])]),a("div",null,[el,e(D,{modelValue:i.product_name,"onUpdate:modelValue":l[1]||(l[1]=o=>i.product_name=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[tl,e(D,{modelValue:i.category,"onUpdate:modelValue":l[2]||(l[2]=o=>i.category=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[al,e(D,{modelValue:i.price,"onUpdate:modelValue":l[3]||(l[3]=o=>i.price=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",ol,[a("div",null,[ll,e(D,{modelValue:i.beginnings,"onUpdate:modelValue":l[4]||(l[4]=o=>i.beginnings=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[nl,e(D,{modelValue:i.added_stocks,"onUpdate:modelValue":l[5]||(l[5]=o=>i.added_stocks=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[sl,e(D,{modelValue:i.remaining,"onUpdate:modelValue":l[6]||(l[6]=o=>i.remaining=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[rl,e(D,{modelValue:i.out,"onUpdate:modelValue":l[7]||(l[7]=o=>i.out=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[dl,e(D,{modelValue:i.total,"onUpdate:modelValue":l[8]||(l[8]=o=>i.total=o),mask:"#####",outlined:"",readonly:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[il,e(D,{modelValue:i.sold,"onUpdate:modelValue":l[9]||(l[9]=o=>i.sold=o),mask:"#####",readonly:"",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[ul,e(D,{modelValue:g.value,"onUpdate:modelValue":l[10]||(l[10]=o=>g.value=o),outlined:"",readonly:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])])]),_:1}),e(N,null,{default:t(()=>[a("div",cl,[e(I,{color:"red-6",label:"Submit",class:"q-pa-sm",size:"md",onClick:s})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var pl=Z(ml,[["__scopeId","data-v-94be31e2"]]);const _l={class:"row justify-between text-white"},gl=a("div",{class:"text-h6"},"Softdrinks Report",-1),fl={class:"row justify-end q-mt-md"},vl={class:"text-h6"},yl={__name:"SoftdrinksReport",props:["reports","sales_report_id","user"],setup(d){const{dialogRef:y,onDialogHide:V,onDialogOK:S,onDialogCancel:v}=qe(),w=U(!1),P=U(!0),u=d,_=U(""),m=U({rowsPerPage:0});console.log("Reports data structure:",u.reports);const r=s=>s?s.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",h=async(s,n)=>{console.log("update data of the price",s),console.log("update val of the price",n);try{const l=await ee.put("/api/update-softdrinks-sales-price-report/"+s.id,{price:parseInt(n)});console.log("Updated price response:",l.data)}catch(l){console.error(l)}},c=async(s,n)=>{console.log("update data of the beginnings",s),console.log("update val of the beginnings",n);try{const l=await ee.put("/api/update-softdrinks-sales-beginnings-report/"+s.id,{beginnings:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},R=async(s,n)=>{console.log("update data of the updatedRemaining",s),console.log("update val of the updatedRemaining",n);try{const l=await ee.put("/api/update-softdrinks-sales-remaining-report/"+s.id,{remaining:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},C=async(s,n)=>{console.log("update data of the updatedRemaining",s),console.log("update val of the updatedRemaining",n);try{const l=await ee.put("/api/update-softdrinks-sales-out-report/"+s.id,{out:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},f=async(s,n)=>{console.log("update data of the addedstocks",s),console.log("update val of the addedstocks",n);try{const l=await ee.put("/api/update-softdrinks-sales-addedstocks-report/"+s.id,{added_stocks:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},b=[{name:"name",label:"Softdrinks Name",field:s=>(console.log("Row data:",s),s.softdrinks.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:s=>`${s}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:s=>`${s}`},{name:"out",label:"Softdrinks Out (PCS)",field:"out",format:s=>`${s}`},{name:"added_stocks",label:"Added Stocks (PCS)",field:"added_stocks",format:s=>`${s}`},{name:"total_softdrinks",label:"Total Stocks (PCS)",field:s=>Number(s.beginnings||0)+Number(s.added_stocks||0),format:s=>`${s}`},{name:"sold",label:"Softdrinks Sold (PCS)",field:s=>{const n=Number(s.beginnings||0),l=Number(s.added_stocks||0),o=Number(s.out||0),x=Number(s.remaining||0),B=n+l,O=x+o;return B-O},format:s=>`${s}`},{name:"sales",label:"Total Sales",field:s=>{const n=Number(s.beginnings||0),l=Number(s.added_stocks||0),o=Number(s.out||0),x=Number(s.remaining||0),B=Number(s.price||0),O=n+l,J=x+o;return(O-J)*B},format:s=>`${p(s)}`}],p=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(s),i=T(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),g=T(()=>{const s=i.value.reduce((n,l)=>{const o=Number(l.beginnings||0),x=Number(l.added_stocks||0),B=Number(l.out||0),O=Number(l.remaining||0),J=o+x,ue=O+B,he=(J-ue)*(l.price||0);return console.log(`Adding salesAmount: ${he} to total: ${n}`),n+he},0);return console.log("Overall Total:",s),s});return console.log("Filtered Rows:",i.value),(s,n)=>(k(),F(X,{ref_key:"dialogRef",ref:y,onHide:ae(V),modelValue:w.value,"onUpdate:modelValue":n[2]||(n[2]=l=>w.value=l),maximized:P.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(M,null,{default:t(()=>[e(N,{style:{"background-color":"#9c27b0"}},{default:t(()=>[a("div",_l,[gl,se((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(fe,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[re]])])]),_:1}),e(N,{class:"row justify-between"},{default:t(()=>[a("div",null,[e(D,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:_.value,"onUpdate:modelValue":n[0]||(n[0]=l=>_.value=l),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:"",style:{width:"500px"}},{append:t(()=>[e(te,{name:"search"})]),_:1},8,["modelValue"])]),a("div",null,[e(pl,{sales_Reports:u.reports,sales_report_id:d.sales_report_id,user:u.user},null,8,["sales_Reports","sales_report_id","user"])])]),_:1}),e(N,null,{default:t(()=>[e($e,{filter:_.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:b,rows:i.value,"row-key":"name","virtual-scroll":"",pagination:m.value,"onUpdate:pagination":n[1]||(n[1]=l=>m.value=l),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"500px"},class:"table-container sticky-header"},{"body-cell-name":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${r(l.row.softdrinks.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${p(l.row.price)}`),1),e(_e,{"onUpdate:modelValue":[o=>h(l.row,o),o=>l.row.price=o],modelValue:l.row.price,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${l.row.beginnings}`),1),e(_e,{"onUpdate:modelValue":[o=>c(l.row,o),o=>l.row.beginnings=o],modelValue:l.row.beginnings,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-remaining":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${l.row.remaining}`),1),e(_e,{"onUpdate:modelValue":[o=>R(l.row,o),o=>l.row.remaining=o],modelValue:l.row.remaining,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-out":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${l.row.out}`),1),e(_e,{"onUpdate:modelValue":[o=>C(l.row,o),o=>l.row.out=o],modelValue:l.row.out,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-added_stocks":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${l.row.added_stocks}`),1),e(_e,{"onUpdate:modelValue":[o=>f(l.row,o),o=>l.row.added_stocks=o],modelValue:l.row.added_stocks,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(N,null,{default:t(()=>[a("div",fl,[a("div",vl," Overall Total Sales: "+$(p(g.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","modelValue","maximized"]))}},hl={class:"row justify-between text-white"},bl=a("div",{class:"text-h6"},"Cake Report",-1),wl={class:"row justify-end q-mt-md"},kl={class:"text-h6"},xl={__name:"CakeReport",props:["reports"],setup(d){const{dialogRef:y,onDialogHide:V,onDialogOK:S,onDialogCancel:v}=qe(),w=d;console.log("Report cake:",w.reports);const P=T(()=>(console.log("Filtered cake rows:",w.reports||[]),w.reports||[])),u=h=>{const c=b=>b?b.charAt(0).toUpperCase()+b.slice(1).toLowerCase():"",R=h.firstname?c(h.firstname):"No Firstname",C=h.middlename?c(h.middlename).charAt(0)+".":"",f=h.lastname?c(h.lastname):"No Lastname";return`${R} ${C} ${f}`},_=h=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(h).replace("\u20B1","\u20B1 "),m=T(()=>{const h=P.value.reduce((c,R)=>{const C=parseFloat(R.cake_report.price)||0;return console.log(`Adding salesAmount: ${C} to total: ${c}`),c+C},0);return console.log("Overall Total Sales computed as:",h),h}),r=[{name:"name",label:"Cake Name",field:h=>(console.log("Row data:",h),h.cake_report.name||"N/A")},{name:"cake_maker",label:"Cake Maker Name",field:h=>u(h.cake_report.user.employee)},{name:"price",label:"Price",field:h=>_(h.cake_report.price)},{name:"layers",label:"Layers",field:h=>h.cake_report.layers},{name:"sales_status",label:"Sale Status",field:h=>h.cake_report.sales_status}];return(h,c)=>(k(),F(X,{ref_key:"dialogRef",ref:y,onHide:ae(V)},{default:t(()=>[e(M,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(N,{style:{"background-color":"#009688"}},{default:t(()=>[a("div",hl,[bl,se((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(fe,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[re]])])]),_:1}),e(N,null,{default:t(()=>[e($e,{filter:h.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:r,rows:P.value,"row-key":"name","virtual-scroll":"",pagination:h.pagination,"onUpdate:pagination":c[0]||(c[0]=R=>h.pagination=R),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["filter","rows","pagination"]),a("div",wl,[a("div",kl," Overall Total Sales: "+$(_(m.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const Oe=d=>(de("data-v-fc9f2a70"),d=d(),ie(),d),$l=Oe(()=>a("div",{class:"text-h6 text-white"},"Add Other Products",-1)),Vl={class:"text-subtitle1 text-weight-medium"},Cl={class:"q-mb-lg"},Rl={key:0,class:"custom-list z-top"},Sl=Oe(()=>a("div",null,"Product Name",-1)),Pl=Oe(()=>a("div",null,"Category",-1)),Ul=Oe(()=>a("div",null,"Price",-1)),Nl={class:"row justify-between q-mt-md q-gutter-md"},ql=Oe(()=>a("div",null,"Beginnings",-1)),Dl=Oe(()=>a("div",null,"Added Stocks",-1)),Al=Oe(()=>a("div",null,"Remaining",-1)),Il=Oe(()=>a("div",null,"Out",-1)),Bl=Oe(()=>a("div",null,"Total Quantity",-1)),Tl=Oe(()=>a("div",null,"Sold",-1)),Fl=Oe(()=>a("div",null,"Sales",-1)),zl={align:"right"},Ll={__name:"AddingOtherReport",props:["sales_Reports","sales_report_id","user"],setup(d){const y=d;console.log("props.sales_Reports",y.sales_Reports),console.log("props.user",y.user);const V=y.sales_report_id,S=we(),v=Xe(),w=We();T(()=>w.products);const P=Ee(),u=T(()=>P.branchProducts);console.log("branchProduct",u);const _=S.params.branch_id,m=y.user.id,r=U(""),h=U("Others"),c=async()=>{console.log("branch_id.value:",_),console.log("searchQuery.value:",r.value),console.log("category.value:",h.value),(r.value||h.value)&&await P.searchBranchProducts({query:r.value,branches_id:_,category:h.value})},R=U(!1),C=()=>{R.value=!0},f=n=>{const l=O=>O?O.charAt(0).toUpperCase()+O.slice(1).toLowerCase():"",o=n.firstname?l(n.firstname):"No Firstname",x=n.middlename?l(n.middlename).charAt(0)+".":"",B=n.lastname?l(n.lastname):"No Lastname";return`${o} ${x} ${B}`.trim()},b=n=>n?n.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",p=n=>{console.log("data",n),i.product_id=n.product.id,i.product_name=n.product.name,i.category=n.category,i.price=n.price,r.value=""},i=Ie({sales_report_id:V,branch_id:_,user_id:m,name:"",product_id:"",product_name:"",price:0,beginnings:0,remaining:0,added_stocks:0,out:0,sold:0,total:0,sales:0,branches_id:S.params.branch_id}),g=T(()=>{const n=parseInt(i.sold||0)*parseFloat(i.price||0);return new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(n)});ye(()=>[i.added_stocks,i.beginnings],([n,l])=>{i.total=parseInt(n||0)+parseInt(l||0)}),ye(()=>[i.total,i.remaining,i.out],([n,l,o])=>{i.sold=parseInt(n||0)-(parseInt(l||0)+parseInt(o||0))}),ye(()=>[i.sold,i.price],([n,l])=>{i.sales=parseInt(n||0)*parseFloat(l||0)});const s=async()=>{try{if(!i.product_name||!i.price||!i.product_id||!i.branch_id||!i.sales_report_id){$q.notify({type:"negative",message:"Product name, price, product ID, branch ID, and sales report ID are required."});return}const n={user_id:i.user_id,branch_id:i.branch_id,sales_report_id:i.sales_report_id,product_id:i.product_id,product_name:i.product_name,price:i.price,beginnings:i.beginnings,remaining:i.remaining,added_stocks:i.added_stocks,out:i.out,sold:i.sold,total:i.total,sales:i.sales};console.log("payload",n),await v.addOtherProductProduction(n)}catch{}};return(n,l)=>(k(),A(K,null,[a("div",null,[e(I,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Add Selecta",onClick:C})]),e(X,{modelValue:R.value,"onUpdate:modelValue":l[11]||(l[11]=o=>R.value=o),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(M,{style:{width:"600px","max-width":"80vw"}},{default:t(()=>[q($(d.user.name)+" ",1),e(N,{class:"row items-center bg-backgroud q-px-md q-py-sm"},{default:t(()=>[$l,e(Pe),se(e(I,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[re]])]),_:1}),e(N,null,{default:t(()=>[a("div",Vl," Cashier: "+$(f(d.user.employee)),1)]),_:1}),e(N,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",Cl,[e(D,{modelValue:r.value,"onUpdate:modelValue":[l[0]||(l[0]=o=>r.value=o),c],debounce:"1000",outlined:"",flat:"",placeholder:"Search product",dense:""},{append:t(()=>[a("div",null,[e(te,{name:"search"})])]),default:t(()=>[r.value?(k(),A("div",Rl,[e(M,null,{default:t(()=>[e(Se,{separator:""},{default:t(()=>{var o;return[(o=u.value)!=null&&o.length?(k(!0),A(K,{key:1},ge(u.value,x=>(k(),F(le,{onClick:B=>p(x),key:x.id,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q($(b(x.product.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(k(),F(le,{key:0},{default:t(()=>[q(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ae("",!0)]),_:1},8,["modelValue"])]),a("div",null,[Sl,e(D,{modelValue:i.product_name,"onUpdate:modelValue":l[1]||(l[1]=o=>i.product_name=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[Pl,e(D,{modelValue:i.category,"onUpdate:modelValue":l[2]||(l[2]=o=>i.category=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[Ul,e(D,{modelValue:i.price,"onUpdate:modelValue":l[3]||(l[3]=o=>i.price=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",Nl,[a("div",null,[ql,e(D,{modelValue:i.beginnings,"onUpdate:modelValue":l[4]||(l[4]=o=>i.beginnings=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Dl,e(D,{modelValue:i.added_stocks,"onUpdate:modelValue":l[5]||(l[5]=o=>i.added_stocks=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Al,e(D,{modelValue:i.remaining,"onUpdate:modelValue":l[6]||(l[6]=o=>i.remaining=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Il,e(D,{modelValue:i.out,"onUpdate:modelValue":l[7]||(l[7]=o=>i.out=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Bl,e(D,{modelValue:i.total,"onUpdate:modelValue":l[8]||(l[8]=o=>i.total=o),mask:"#####",outlined:"",readonly:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Tl,e(D,{modelValue:i.sold,"onUpdate:modelValue":l[9]||(l[9]=o=>i.sold=o),mask:"#####",readonly:"",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Fl,e(D,{modelValue:g.value,"onUpdate:modelValue":l[10]||(l[10]=o=>g.value=o),outlined:"",readonly:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])])]),_:1}),e(N,null,{default:t(()=>[a("div",zl,[e(I,{color:"red-6",label:"Submit",class:"q-pa-sm",size:"md",onClick:s})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ol=Z(Ll,[["__scopeId","data-v-fc9f2a70"]]);const Ml={class:"row justify-between text-white"},jl=a("div",{class:"text-h6"},"Other Products Report",-1),Hl={class:"row justify-end q-mt-md"},Ql={class:"text-h6"},El={__name:"OtherProductsReport",props:["reports","sales_report_id","user"],setup(d){const{dialogRef:y,onDialogHide:V,onDialogOK:S,onDialogCancel:v}=qe(),w=U(!1),P=U(!0),u=d,_=U(""),m=U({rowsPerPage:0}),r=T(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),h=s=>s?s.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",c=async(s,n)=>{console.log("update data of the price",s),console.log("update val of the price",n);try{const l=await ee.put("/api/update-otherProducst-sales-price-report/"+s.id,{price:parseInt(n)});console.log("Updated price response:",l.data)}catch(l){console.error(l)}},R=async(s,n)=>{console.log("update data of the beginnings",s),console.log("update val of the beginnings",n);try{const l=await ee.put("/api/update-otherProducst-sales-beginnings-report/"+s.id,{beginnings:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},C=async(s,n)=>{console.log("update data of the updatedRemaining",s),console.log("update val of the updatedRemaining",n);try{const l=await ee.put("/api/update-otherProducst-sales-remaining-report/"+s.id,{remaining:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},f=async(s,n)=>{console.log("update data of the updatedRemaining",s),console.log("update val of the updatedRemaining",n);try{const l=await ee.put("/api/update-otherProducst-sales-out-report/"+s.id,{out:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},b=async(s,n)=>{console.log("update data of the updatedAddedStocks",s),console.log("update val of the updatedAddedStocks",n);try{const l=await ee.put("/api/update-otherProducst-sales-addedstocks-report/"+s.id,{added_stocks:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},p=[{name:"name",label:"Product Name",field:s=>(console.log("Row data:",s),s.other_products.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:s=>`${s}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:s=>`${s}`},{name:"out",label:"Product Out (PCS)",field:"out",format:s=>`${s}`},{name:"added_stocks",label:"Added Stocks (PCS)",field:"added_stocks",format:s=>`${s}`},{name:"total_other_products",label:"Total Stocks (PCS)",field:s=>Number(s.beginnings||0)+Number(s.added_stocks||0),format:s=>`${s}`},{name:"sold",label:"Product Sold (PCS)",field:s=>{const n=Number(s.beginnings||0),l=Number(s.added_stocks||0),o=Number(s.out||0),x=Number(s.remaining||0),B=n+l,O=x+o;return B-O},format:s=>`${s}`},{name:"sales",label:"Total Sales",field:s=>{const n=Number(s.beginnings||0),l=Number(s.added_stocks||0),o=Number(s.out||0),x=Number(s.remaining||0),B=Number(s.price||0),O=n+l,J=x+o;return(O-J)*B},format:s=>`${i(s)}`}],i=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(s),g=T(()=>{const s=r.value.reduce((n,l)=>{const o=Number(l.beginnings||0),x=Number(l.added_stocks||0),B=Number(l.out||0),O=Number(l.remaining||0),J=o+x,ue=O+B,he=(J-ue)*(l.price||0);return console.log(`Adding salesAmount: ${he} to total: ${n}`),n+he},0);return console.log("Overall Total Sales computed as:",s),s});return(s,n)=>(k(),A("div",null,[e(X,{ref_key:"dialogRef",ref:y,onHide:ae(V),modelValue:w.value,"onUpdate:modelValue":n[2]||(n[2]=l=>w.value=l),maximized:P.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(M,null,{default:t(()=>[e(N,{style:{"background-color":"#607d8b"}},{default:t(()=>[a("div",Ml,[jl,se((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(fe,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[re]])])]),_:1}),e(N,{class:"row justify-between"},{default:t(()=>[a("div",null,[e(D,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:_.value,"onUpdate:modelValue":n[0]||(n[0]=l=>_.value=l),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:"",style:{width:"500px"}},{append:t(()=>[e(te,{name:"search"})]),_:1},8,["modelValue"])]),a("div",null,[e(Ol,{sales_Reports:u.reports,sales_report_id:d.sales_report_id,user:u.user},null,8,["sales_Reports","sales_report_id","user"])])]),_:1}),e(N,null,{default:t(()=>[e($e,{filter:_.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:p,rows:r.value,"row-key":"name","virtual-scroll":"",pagination:m.value,"onUpdate:pagination":n[1]||(n[1]=l=>m.value=l),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"500px"},class:"table-container sticky-header"},{"body-cell-name":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${h(l.row.other_products.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${i(l.row.price)}`),1),e(_e,{"onUpdate:modelValue":[o=>c(l.row,o),o=>l.row.price=o],modelValue:l.row.price,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${l.row.beginnings}`),1),e(_e,{"onUpdate:modelValue":[o=>R(l.row,o),o=>l.row.beginnings=o],modelValue:l.row.beginnings,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-remaining":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${l.row.remaining}`),1),e(_e,{"onUpdate:modelValue":[o=>C(l.row,o),o=>l.row.remaining=o],modelValue:l.row.remaining,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-out":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${l.row.out}`),1),e(_e,{"onUpdate:modelValue":[o=>f(l.row,o),o=>l.row.out=o],modelValue:l.row.out,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-added_stocks":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,$(`${l.row.added_stocks}`),1),e(_e,{"onUpdate:modelValue":[o=>b(l.row,o),o=>l.row.added_stocks=o],modelValue:l.row.added_stocks,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:me(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(N,null,{default:t(()=>[a("div",Hl,[a("div",Ql," Overall Total Sales: "+$(i(g.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","modelValue","maximized"])]))}};const Kl=d=>(de("data-v-59913400"),d=d(),ie(),d),Yl=Kl(()=>a("div",{class:"text-h6",align:"center"},"Products Report",-1)),Gl={class:"item-start q-gutter-md",align:"center"},Wl={__name:"ProductsReport",props:["sales_Reports"],setup(d){const y=d,V=y.sales_Reports;console.log("sales report2sss",V);const S=Te(),v=(m,r,h)=>{S.dialog({component:Co,componentProps:{reports:m,sales_report_id:r,user:h}})},w=(m,r,h)=>{S.dialog({component:Go,componentProps:{reports:m,sales_report_id:r,user:h}})},P=(m,r,h)=>{S.dialog({component:yl,componentProps:{reports:m,sales_report_id:r,user:h}})},u=(m,r,h)=>{S.dialog({component:xl,componentProps:{reports:m,sales_report_id:r,user:h}})},_=(m,r,h)=>{S.dialog({component:El,componentProps:{reports:m,sales_report_id:r,user:h}})};return(m,r)=>(k(),A("div",null,[e(M,{class:"user-card"},{default:t(()=>[e(N,null,{default:t(()=>[Yl]),_:1}),e(N,null,{default:t(()=>[a("div",Gl,[e(I,{onClick:r[0]||(r[0]=h=>v(y.sales_Reports[0].bread_reports,y.sales_Reports[0].id,y.sales_Reports[0].user)),"no-caps":"",label:"Bread Report",rounded:"",color:"brown",style:{width:"130px"},class:"user-button"}),e(I,{onClick:r[1]||(r[1]=h=>w(y.sales_Reports[0].selecta_reports,y.sales_Reports[0].id,y.sales_Reports[0].user)),"no-caps":"",label:"Selecta Report",rounded:"",color:"red-6",style:{width:"130px"},class:"user-button"}),e(I,{onClick:r[2]||(r[2]=h=>P(y.sales_Reports[0].softdrinks_reports,y.sales_Reports[0].id,y.sales_Reports[0].user)),"no-caps":"",label:"Softdrinks Report",rounded:"",color:"accent",style:{width:"150px"},class:"user-button"}),e(I,{onClick:r[3]||(r[3]=h=>u(y.sales_Reports[0].cake_sales_reports,y.sales_Reports[0].id,y.sales_Reports[0].user)),"no-caps":"",label:"Cake Report",rounded:"",color:"teal",style:{width:"130px"},class:"user-button"}),e(I,{onClick:r[4]||(r[4]=h=>_(y.sales_Reports[0].other_products_reports,y.sales_Reports[0].id,y.sales_Reports[0].user)),"no-caps":"",label:"Other Products Report",rounded:"",color:"blue-grey",style:{width:"180px"},class:"user-button"})])]),_:1})]),_:1})]))}};var Jl=Z(Wl,[["__scopeId","data-v-59913400"]]);const Xl={class:"row justify-between text-white"},Zl=a("div",{class:"text-h6"},"Denomination Report",-1),en={class:"row text-weight-regular text-subtitle1"},tn={class:"col-6"},an={class:"col-6"},on={class:"row justify-end q-mt-md"},ln={class:"text-h6"},nn={__name:"DenominationDialogReport",props:{reports:Array,total:Number},setup(d){const{dialogRef:y,onDialogHide:V}=qe(),v=d.reports[0]||{},w=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(u),P=T(()=>{const u={oneThousandBills:1e3,fiveHundredBills:500,twoHundredBills:200,oneHundredBills:100,fiftyBills:50,twentyBills:20,twentyCoins:20,tenCoins:10,fiveCoins:5,oneCoins:1,twentyFiveCents:.25};return Object.keys(u).reduce((_,m)=>_+(v[m]||0)*u[m],0)});return(u,_)=>(k(),F(X,{ref_key:"dialogRef",ref:y,onHide:ae(V)},{default:t(()=>[e(M,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(N,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",Xl,[Zl,se((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(fe,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[re]])])]),_:1}),e(N,null,{default:t(()=>[a("div",en,[a("div",tn,[a("div",null,"1000 Bills: "+$(ae(v).oneThousandBills),1),a("div",null,"500 Bills: "+$(ae(v).fiveHundredBills),1),a("div",null,"200 Bills: "+$(ae(v).twoHundredBills),1),a("div",null,"100 Bills: "+$(ae(v).oneHundredBills),1),a("div",null,"50 Bills: "+$(ae(v).fiftyBills),1),a("div",null,"20 Bills: "+$(ae(v).twentyBills),1)]),a("div",an,[a("div",null,"20 coins: "+$(ae(v).twentyCoins),1),a("div",null,"10 coins: "+$(ae(v).tenCoins),1),a("div",null,"5 coins: "+$(ae(v).fiveCoins),1),a("div",null,"1 coins: "+$(ae(v).oneCoins),1),a("div",null,"25 cents: "+$(ae(v).twentyFiveCents),1)])])]),_:1}),e(N,null,{default:t(()=>[a("div",on,[a("div",ln," Overall Total Denomination: "+$(w(P.value)),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const sn=d=>(de("data-v-43ad17ba"),d=d(),ie(),d),rn=sn(()=>a("div",{class:"text-h6",align:"center"},"Denomination Report",-1)),dn={class:"q-gutter-x-md",align:"center"},un={__name:"DenominationReport",props:["sales_Reports"],setup(d){const y=d;y.sales_Reports,console.log("Denomination report",y);const V=Te(),S=(v,w)=>{V.dialog({component:nn,componentProps:{reports:v,total:w}})};return(v,w)=>(k(),A("div",null,[e(M,{class:"user-card"},{default:t(()=>[e(N,null,{default:t(()=>[rn]),_:1}),e(N,null,{default:t(()=>[a("div",dn,[e(I,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",onClick:w[0]||(w[0]=P=>S(y.sales_Reports[0].denomination_reports,y.sales_Reports[0].denomination_total)),class:"user-button"})])]),_:1})]),_:1})]))}};var cn=Z(un,[["__scopeId","data-v-43ad17ba"]]);const mn=rt("expenses",()=>{const d=U([]),y=U(null);return{expenses:d,expense:y,addingExpense:async S=>{try{const v=await ee.post("/api/employee-adding-expense",S);console.log(v.data),ce.create({type:"positive",message:"Employee expenses successfully created",setTimeout:1e3})}catch(v){console.log(v),ce.create({type:"negative",message:"Error creating employee expenses",setTimeout:1e3})}}}});const pn=d=>(de("data-v-c489c504"),d=d(),ie(),d),_n={class:"row justify-between"},gn=pn(()=>a("div",{class:"text-h6"},"Expenses",-1)),fn={class:"q-gutter-y-md"},vn={class:"row q-gutter-x-md"},yn={align:"right"},hn={class:"",align:"right"},bn={__name:"AddingExpenses",props:["reports","user","sales_report_id","user_id"],setup(d){const y=mn(),V=d;console.log("Expenses Data",V.reports),console.log("Expenses User",V.user),console.log("Expenses Sales Report ID",V.sales_report_id);const S=V.sales_report_id,v=V.reports[0].branch_id,w=V.user_id;console.log("user_id",w),console.log("branch_id",v);const P=_t(),u=T(()=>P.users),m=pt().user;console.log("userdatasss",m);const r=U(!1),h=U([]),c=()=>{h.value.push({user_expense_id:C.user_expense_id,name:C.name,amount:C.amount,description:C.description}),console.log("expensesList",h.value),R()},R=()=>{C.user_expense_id="",C.name="",C.amount="",C.description=""};T(()=>searchQuery.value&&u.value.length>0);const C=Ie({user_expense_id:"",name:"",amount:0,description:""}),f=g=>{h.value.splice(g,1)},b=()=>{r.value=!0},p=()=>{C.expense_user_id="",C.name="",C.amount="",C.description=""},i=async()=>{const g={sales_report_id:S,branch_id:v,user_id:w,expenses:h.value.map(s=>({name:s.name,amount:s.amount,description:s.description}))};console.log("expenseReport",g),await y.addingExpense(g),ce.create({type:"positive",message:"Expenses Submitted",timeout:1e3}),p()};return(g,s)=>(k(),A(K,null,[a("div",null,[e(I,{class:"bg-gradient text-white",outlined:"",label:"Expenses Report",onClick:b})]),e(X,{modelValue:r.value,"onUpdate:modelValue":s[3]||(s[3]=n=>r.value=n),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(M,{style:{width:"450px"}},{default:t(()=>[e(N,{class:"bg-gradient text-white"},{default:t(()=>[a("div",_n,[gn,a("div",null,[se(e(I,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[re]])])])]),_:1}),e(N,null,{default:t(()=>[a("div",fn,[a("div",vn,[a("div",null,[e(D,{modelValue:C.name,"onUpdate:modelValue":s[0]||(s[0]=n=>C.name=n),outlined:"",dense:"",style:{width:"300px"},placeholder:"Name"},null,8,["modelValue"])]),a("div",null,[e(D,{modelValue:C.amount,"onUpdate:modelValue":s[1]||(s[1]=n=>C.amount=n),"reverse-fill-mask":"",outlined:"",type:"number",dense:"",style:{width:"100px"},label:"Amount"},null,8,["modelValue"])])]),a("div",null,[e(D,{modelValue:C.description,"onUpdate:modelValue":s[2]||(s[2]=n=>C.description=n),placeholder:"Description",outlined:"",autogrow:"",style:{width:"415px"}},null,8,["modelValue"])]),a("div",yn,[e(I,{padding:"sm md",size:"xm",icon:"add",dense:"",outline:"",onClick:c})]),a("div",null,[e(Se,{dense:"",separator:"",class:"box"},{default:t(()=>[e(le,null,{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Name")]),_:1})]),_:1}),e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Description")]),_:1})]),_:1}),e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Amount")]),_:1})]),_:1}),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-overline"})]),_:1})]),_:1}),a("div",null,[(k(!0),A(K,null,ge(h.value,(n,l)=>(k(),F(le,{key:l,class:"q-gutter-xs"},{default:t(()=>[e(Y,{class:"q-ma-sm text-subtitle2"},{default:t(()=>[e(W,{caption:""},{default:t(()=>[q($(n.name),1)]),_:2},1024)]),_:2},1024),e(Y,{class:"q-ma-sm q-gutter-sm"},{default:t(()=>[e(W,{caption:""},{default:t(()=>[q($(n.description),1)]),_:2},1024)]),_:2},1024),e(Y,{class:"q-ma-sm q-gutter-sm"},{default:t(()=>[e(W,{caption:""},{default:t(()=>[q($(n.amount),1)]),_:2},1024)]),_:2},1024),e(Y,{side:""},{default:t(()=>[e(I,{onClick:o=>f(l),color:"negative",icon:"clear",dense:"",flat:"",round:"",class:"text-red"},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))])]),_:1})]),a("div",hn,[e(I,{color:"red-6",label:"Submit",class:"q-pa-sm",size:"md",onClick:i})])])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var wn=Z(bn,[["__scopeId","data-v-c489c504"]]);const kn={class:"row justify-between text-white"},xn=a("div",{class:"text-h6"},"Expenses Report",-1),$n={class:"row justify-end q-mt-md"},Vn={class:"text-h6"},Cn={__name:"ExpensesDialog",props:{reports:Array,user:Object,sales_report_id:Number,user_id:Number},setup(d){const{dialogRef:y,onDialogHide:V,onDialogOK:S,onDialogCancel:v}=qe(),w=U(!1),P=U(!0),u=U(""),_=U({rowsPerPage:0}),m=d,r=m.reports;console.log("Expenses total",m.total);const h=g=>g?g.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" "):"",c=async(g,s)=>{console.log("update data of the updateName",g),console.log("update val of the updateName",s);try{const n=await ee.put("/api/update-expenses-sales-name-report/"+g.id,{name:s});console.log("Updated expenses amount response:",n.data)}catch(n){console.error(n)}},R=async(g,s)=>{console.log("update data of the description",g),console.log("update val of the description",s);try{const n=await ee.put("/api/update-expenses-sales-description-report/"+g.id,{description:s});console.log("Updated expenses amount response:",n.data)}catch(n){console.error(n)}},C=async(g,s)=>{console.log("update data of the amount",g),console.log("update val of the amount",s);try{const n=await ee.put("/api/update-expenses-sales-amount-report/"+g.id,{amount:parseFloat(s)});console.log("Updated expenses amount response:",n.data)}catch(n){console.error(n)}},f=[{name:"name",label:"Expenses Name",field:g=>(console.log("Row data:",g),g.name||"N/A"),align:"center"},{name:"description",label:"Description",field:"description",align:"center"},{name:"amount",label:"Amount",field:"amount",align:"center"}];console.log("Reports data structure:",m.reports);const b=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(g),p=T(()=>(console.log("Filtered rows:",m.reports||[]),m.reports||[])),i=T(()=>p.value.reduce((s,n)=>{const l=parseFloat(n.amount)||0;return s+l},0));return console.log("Expenses:",p.value),(g,s)=>(k(),F(X,{ref_key:"dialogRef",ref:y,onHide:ae(V),onOk:g.handleButtonClick,onCancel:ae(v),modelValue:w.value,"onUpdate:modelValue":s[2]||(s[2]=n=>w.value=n),maximized:P.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(M,null,{default:t(()=>[e(N,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",kn,[xn,se((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(fe,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[re]])])]),_:1}),e(N,{class:"row justify-between"},{default:t(()=>[a("div",null,[e(D,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=n=>u.value=n),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:"",style:{width:"500px"}},{append:t(()=>[e(te,{name:"search"})]),_:1},8,["modelValue"])]),a("div",null,[e(wn,{reports:ae(r),user:m.user,sales_report_id:m.sales_report_id,user_id:m.user_id},null,8,["reports","user","sales_report_id","user_id"])])]),_:1}),e(N,null,{default:t(()=>[e($e,{filter:u.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:f,rows:p.value,"row-key":"name","virtual-scroll":"",pagination:_.value,"onUpdate:pagination":s[1]||(s[1]=n=>_.value=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(n=>[e(G,{props:n},{default:t(()=>[a("span",null,$(`${h(n.row.name)}`),1),e(_e,{"onUpdate:modelValue":[l=>c(n.row,l),l=>n.row.name=l],modelValue:n.row.name,"auto-save":""},{default:t(l=>[e(D,{class:"text-capitalize",modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,dense:"",autofocus:"",counter:"",onKeyup:me(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-description":t(n=>[e(G,{props:n},{default:t(()=>[a("span",null,$(`${h(n.row.description)}`),1),e(_e,{"onUpdate:modelValue":[l=>R(n.row,l),l=>n.row.description=l],modelValue:n.row.description,"auto-save":""},{default:t(l=>[e(D,{class:"text-capitalize",modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,dense:"",autofocus:"",counter:"",onKeyup:me(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-amount":t(n=>[e(G,{props:n},{default:t(()=>[a("span",null,$(b(n.row.amount)),1),e(_e,{"onUpdate:modelValue":[l=>C(n.row,parseFloat(l)),l=>n.row.amount=l],modelValue:n.row.amount,"auto-save":""},{default:t(l=>[e(D,{modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,modelModifiers:{number:!0},dense:"",type:"number",mask:"##0.00",autofocus:"",counter:"",onKeyup:me(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(N,null,{default:t(()=>[a("div",$n,[a("div",Vn," Overall Total Expenses: "+$(b(i.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","onOk","onCancel","modelValue","maximized"]))}};const Rn=d=>(de("data-v-601d27dc"),d=d(),ie(),d),Sn=Rn(()=>a("div",{class:"text-h6",align:"center"},"Expenses Report",-1)),Pn={class:"q-gutter-x-md",align:"center"},Un={__name:"ExpensesReport",props:["sales_Reports"],setup(d){const y=d;console.log("Expenses Datassssss",y.sales_Reports);const V=Te(),S=(v,w,P,u)=>{V.dialog({component:Cn,componentProps:{reports:v,user:w,sales_report_id:P,user_id:u}})};return(v,w)=>(k(),A("div",null,[e(M,{class:"user-card"},{default:t(()=>[e(N,null,{default:t(()=>[Sn]),_:1}),e(N,null,{default:t(()=>[a("div",Pn,[e(I,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",class:"user-button",onClick:w[0]||(w[0]=P=>S(y.sales_Reports[0].expenses_reports,y.sales_Reports[0].user.employee,y.sales_Reports[0].id,y.sales_Reports[0].user_id))})])]),_:1})]),_:1})]))}};var Nn=Z(Un,[["__scopeId","data-v-601d27dc"]]);const qn=rt("employee-credits",()=>{const d=U([]),y=U(null);return{credits:d,credit:y,addingCredits:async S=>{try{const v=await ee.post("/api/employee-adding-credits",S);console.log(v.data),ce.create({type:"positive",message:"Employee credits successfully created",setTimeout:1e3})}catch(v){console.log(v),ce.create({type:"negative",message:"Error creating employee credits",setTimeout:1e3})}}}});const bt=d=>(de("data-v-128fb2e3"),d=d(),ie(),d),Dn=bt(()=>a("div",{class:"text-h6 text-white"},"Credits",-1)),An={class:"q-gutter-y-md"},In={key:0,class:"custom-list z-top"},Bn={class:"row q-gutter-sm"},Tn={key:0,class:"custom-list z-top"},Fn={align:"right"},zn={class:"row justify-between"},Ln=bt(()=>a("div",null,"Credits Total",-1)),On={class:"q-mt-lg"},Mn={__name:"AddingCredit",props:["reports","user"],setup(d){var E;const V=d.reports[0].id,S=_t();T(()=>S.users);const v=qn(),w=Pt(),P=T(()=>w.employees),u=pt(),_=T(()=>u.products);console.log("products search",_.value);const m=u.user;console.log("userdata",m);const r=((E=m==null?void 0:m.device)==null?void 0:E.branch_id)||"",h=U(!1),c=U(""),R=U(""),C=U(!1),f=U(!1);let b=!1,p=!1;const i=U(!1),g=U(!1),s=U(!1),n=async()=>{c.value&&(g.value=!0,console.log("searchQuery.value",c.value),await w.searchEmployee(c.value),g.value=!1,C.value=!0)},l=()=>{h.value=!0},o=Ie({credit_user_id:"",name:"",product_id:"",productName:"",price:0,pieces:"",creditTotal:0}),x=()=>{c.value="",R.value="",o.credit_user_id="",o.name="",o.product_id="",o.productName="",o.price="",o.pieces="",o.creditTotal="",be.value=[]},B=()=>{R.value="",o.product_id="",o.productName="",o.price="",o.pieces=""},O=T(()=>c.value&&P.value.length>0),J=j=>{console.log("credit",j),c.value=`${j.firstname} ${j.middlename?j.middlename.charAt(0)+".":""} ${j.lastname}`,o.credit_user_id=j.id,o.name=`${j.firstname} ${j.middlename?j.middlename.charAt(0)+".":""} ${j.lastname}`,b=!0,C.value=!1},ue=async()=>{if(R.value){s.value=!0;const j=await u.searchBranchProducts(R.value,r);console.log("response",j),s.value=!1,f.value=!0}},Ue=T(()=>R.value&&_.value.length>0);console.log("Product search datasss:",_.value);const he=j=>{R.value=j.name,o.productName=j.name,o.product_id=j.id,o.price=j.price,p=!0,f.value=!1},ne=U(""),be=U([]),He=()=>{const j=parseFloat(o.price),z=parseInt(o.pieces);if(!isNaN(j)&&!isNaN(z)){const L=j*z;ne.value=L.toFixed(2)}else ne.value="";console.log("productCreditTotalAmount",ne.value)},H=()=>{const j=ne.value;be.value.push({credit_user_id:o.credit_user_id,product_id:o.product_id,name:o.name,productName:o.productName,price:o.price,pieces:o.pieces,totalAmount:j}),console.log("creditList",be.value),B()},oe=j=>{be.value.splice(j,1)};ye(c,j=>{j.length>2&&!b?n():C.value=!1,b=!1}),ye(R,j=>{j.length>2&&!p?ue():f.value=!1,p=!1}),ye(be,j=>{const z=j.reduce((L,pe)=>L+parseFloat(pe.totalAmount),0);o.creditTotal=z.toFixed(2)},{deep:!0}),ye([()=>o.price,()=>o.pieces],He),ye(ne,j=>{console.log("productCreditTotalAmoun",j)});const Q=async()=>{const j={employee_credits_id:V,credits:be.value.map(z=>{var L;return{credit_user_id:z.credit_user_id,branch_id:((L=m==null?void 0:m.employee)==null?void 0:L.branch_id)||"",productName:z.productName,product_id:z.product_id,price:z.price,pieces:z.pieces,totalAmount:z.totalAmount}})};await v.addingCredits(j),console.log("employeeCreditReport:",j),h.value=!1,x()};return(j,z)=>(k(),A(K,null,[a("div",null,[e(I,{class:"bg-gradient text-white",outlined:"",label:"Add Credits",onClick:l})]),e(X,{modelValue:h.value,"onUpdate:modelValue":z[4]||(z[4]=L=>h.value=L),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(M,{style:{width:"450px"}},{default:t(()=>[e(N,{class:"row bg-gradient text-white"},{default:t(()=>[Dn,e(Pe),se(e(I,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[re]])]),_:1}),e(N,null,{default:t(()=>[a("div",An,[a("div",null,[a("div",null,[e(D,{modelValue:c.value,"onUpdate:modelValue":z[0]||(z[0]=L=>c.value=L),outlined:"",dense:"",rounded:"",debounce:"1000",style:{width:"415px"},placeholder:"Search Name"},{append:t(()=>[g.value?(k(),F(nt,{key:1,color:"grey",size:"sm"})):(k(),F(te,{key:0,name:"search"}))]),default:t(()=>[O.value&&C.value?(k(),A("div",In,[e(M,null,{default:t(()=>[e(Se,{separator:""},{default:t(()=>[i.value?(k(),F(le,{key:0},{default:t(()=>[e(Y,null,{default:t(()=>[e(nt,{color:"primary"})]),_:1})]),_:1})):Ae("",!0),!i.value&&!P.value.length?(k(),F(le,{key:1},{default:t(()=>[e(Y,null,{default:t(()=>[q(" No data available in this branch. ")]),_:1})]),_:1})):(k(!0),A(K,{key:2},ge(P.value,L=>(k(),F(le,{onClick:pe=>J(L),key:L.id,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q($(`
                                  ${L==null?void 0:L.firstname} ${L!=null&&L.middlename?(L==null?void 0:L.middlename.charAt(0).toUpperCase())+".":""} ${L==null?void 0:L.lastname}`),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})])):Ae("",!0)]),_:1},8,["modelValue"])])]),a("div",Bn,[a("div",null,[e(D,{modelValue:R.value,"onUpdate:modelValue":z[1]||(z[1]=L=>R.value=L),placeholder:"Search Product",outlined:"",flat:"",debounce:"500",dense:"",style:{width:"240px"}},{append:t(()=>[s.value?(k(),F(nt,{key:1,color:"grey",size:"sm"})):(k(),F(te,{key:0,name:"search"}))]),default:t(()=>[Ue.value&&f.value?(k(),A("div",Tn,[e(M,null,{default:t(()=>[e(Se,{separator:""},{default:t(()=>[(k(!0),A(K,null,ge(_.value,L=>(k(),F(le,{onClick:pe=>he(L),key:L.name,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q($(L.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})])):Ae("",!0)]),_:1},8,["modelValue"])]),a("div",null,[e(D,{modelValue:o.price,"onUpdate:modelValue":z[2]||(z[2]=L=>o.price=L),"reverse-fill-mask":"",outlined:"",readonly:"",flat:"",dense:"",style:{width:"80px"},label:"Price"},null,8,["modelValue"])]),a("div",null,[e(D,{modelValue:o.pieces,"onUpdate:modelValue":z[3]||(z[3]=L=>o.pieces=L),"reverse-fill-mask":"",outlined:"",type:"number",flat:"",dense:"",style:{width:"80px"},label:"Pcs"},null,8,["modelValue"])])]),a("div",Fn,[e(I,{padding:"sm md",size:"xm",icon:"add",dense:"",outline:"",onClick:H})]),a("div",null,[e(ct,{outlined:"",dense:"",readonly:""},{control:t(()=>[a("div",null,[(k(!0),A(K,null,ge(be.value,(L,pe)=>(k(),F(le,{key:pe,class:"q-gutter-xs"},{default:t(()=>[e(Y,{class:"q-ma-sm text-subtitle2",side:""},{default:t(()=>[q($(L.productName),1)]),_:2},1024),e(Y,{class:"q-ma-sm q-gutter-sm",side:""},{default:t(()=>[e(W,null,{default:t(()=>[q("Pcs")]),_:1}),e(W,{caption:""},{default:t(()=>[q($(L.pieces),1)]),_:2},1024)]),_:2},1024),e(Y,{class:"q-ma-sm q-gutter-sm",side:""},{default:t(()=>[e(W,null,{default:t(()=>[q("Price")]),_:1}),e(W,{caption:""},{default:t(()=>[q($(L.price),1)]),_:2},1024)]),_:2},1024),e(Y,{class:"q-ma-sm q-gutter-sm",side:""},{default:t(()=>[e(W,null,{default:t(()=>[q("Total")]),_:1}),e(W,{caption:""},{default:t(()=>[q($(L.totalAmount),1)]),_:2},1024)]),_:2},1024),e(Y,{side:""},{default:t(()=>[e(I,{onClick:Ve=>oe(pe),color:"negative",icon:"clear",dense:"",flat:"",round:"",class:"text-red"},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))])]),_:1})]),a("div",zn,[a("div",null,[Ln,e(ct,{outlined:"",dense:"",readonly:"",style:{width:"120px"}},{control:t(()=>[q($(o.creditTotal),1)]),_:1})]),a("div",On,[e(I,{color:"red-6",label:"Submit",class:"q-pa-sm",size:"md",onClick:Q})])])])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var jn=Z(Mn,[["__scopeId","data-v-128fb2e3"]]);const Hn={class:"row justify-between text-white"},Qn=a("div",{class:"text-h6"},"Credits Report",-1),En={class:"row justify-end q-mt-md"},Kn={class:"text-h6"},Yn={__name:"CreditsReportDialog",props:{reports:Array,user:Object},setup(d){const{dialogRef:y,onDialogHide:V,onDialogOK:S,onDialogCancel:v}=qe(),w=U(!1),P=U(!0),u=d,_=U(""),m=U({rowsPerPage:0}),r=u.reports;console.log("creditReports data testing",r);const h=r[0].id;console.log("employee_credits_id",h),u.user,console.log("user data testing",u.user),r.forEach((g,s)=>{console.log(`Report ${s}:`,g),console.log(`Credit Products for Report ${s}:`,g.credit_products.total_amount)});const c=T(()=>r.flatMap(g=>g.credit_products.map(s=>{const n=parseInt(s.pieces,10)||0,l=parseFloat(s.price)||0,o=n*l;return{...s,total_amount:o}})));console.log("All Credit Products:",c.value[0]);const R=g=>g?g.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" "):"",C=g=>{const s=x=>x?x.charAt(0).toUpperCase()+x.slice(1).toLowerCase():"",n=g.firstname?s(g.firstname):"No Firstname",l=g.middlename?s(g.middlename).charAt(0)+".":"",o=g.lastname?s(g.lastname):"No Lastname";return`${n} ${l} ${o}`.trim()},f=[{name:"name",label:"Employee Name",field:g=>C(g.credit_user_id),align:"center"},{name:"productName",label:"Product Name",field:g=>g.product.name||"N/A",align:"center"},{name:"pieces",label:"Pieces",field:"pieces",align:"center"},{name:"price",label:"Price",field:"price",align:"center"},{name:"total_amount",label:"Total Amount",field:"total_amount",align:"center"}];console.log("Reports data structure:",u.reports);const b=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(g),p=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(g),i=T(()=>c.value.reduce((s,n)=>{const l=parseFloat(n.total_amount)||0;return s+l},0));return(g,s)=>(k(),F(X,{ref_key:"dialogRef",ref:y,onHide:ae(V),onOk:g.handleButtonClick,onCancel:ae(v),modelValue:w.value,"onUpdate:modelValue":s[2]||(s[2]=n=>w.value=n),maximized:P.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(M,null,{default:t(()=>[e(N,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",Hn,[Qn,se((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(fe,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[re]])])]),_:1}),e(N,{class:"row justify-between"},{default:t(()=>[a("div",null,[e(D,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=n=>_.value=n),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:"",style:{width:"500px"}},{append:t(()=>[e(te,{name:"search"})]),_:1},8,["modelValue"])]),a("div",null,[e(jn,{reports:ae(r),user:u.user},null,8,["reports","user"])])]),_:1}),e(N,null,{default:t(()=>[e($e,{filter:_.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:f,rows:c.value,"row-key":"name","virtual-scroll":"",pagination:m.value,"onUpdate:pagination":s[1]||(s[1]=n=>m.value=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-productName":t(n=>[e(G,{props:n},{default:t(()=>[a("span",null,$(`${R(n.row.product.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(n=>[e(G,{props:n},{default:t(()=>[a("span",null,$(`${b(n.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-total_amount":t(n=>[e(G,{props:n},{default:t(()=>[a("span",null,$(`${p(n.row.total_amount)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(N,null,{default:t(()=>[a("div",En,[a("div",Kn," Overall Total Expenses: "+$(b(i.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","onOk","onCancel","modelValue","maximized"]))}};const Gn=d=>(de("data-v-0016d32e"),d=d(),ie(),d),Wn=Gn(()=>a("div",{class:"text-h6",align:"center"},"Credits Report",-1)),Jn={class:"q-gutter-x-md",align:"center"},Xn={__name:"CreditsReport",props:["sales_Reports"],setup(d){const y=d;console.log("sales_Reports to send in credits",y.sales_Reports);const V=Te(),S=(v,w)=>{V.dialog({component:Yn,componentProps:{reports:v,user:w}})};return(v,w)=>(k(),A("div",null,[e(M,{class:"user-card"},{default:t(()=>[e(N,null,{default:t(()=>[Wn]),_:1}),e(N,null,{default:t(()=>[a("div",Jn,[e(I,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",class:"user-button",onClick:w[0]||(w[0]=P=>S(y.sales_Reports[0].credit_reports,y.sales_Reports[0].user.employee))})])]),_:1}),e(N)]),_:1})]))}};var Zn=Z(Xn,[["__scopeId","data-v-0016d32e"]]);const es=d=>(de("data-v-1a049b86"),d=d(),ie(),d),ts={class:"q-mt-lg row items-start q-gutter-md justify-center"},as={class:"row justify-between"},os=es(()=>a("div",{class:"text-h6"},"Sales Report",-1)),ls={align:"right"},ns={class:"text-subtitle1 text-weight-regular"},ss={class:"row q-gutter-sm q-pa-md"},rs={class:"q-ma-sm"},ds={class:"q-ma-sm",align:"center"},is=["src"],us={__name:"SalesReportPanel",props:["salesReport"],setup(d){tt.exports.vfs=mt;const y=d,V=y.salesReport;console.log("reportsData",y.salesReport);const S=U(!0),v=U(!1),w=U(""),P=c=>Ce.formatDate(c,"MMMM DD, YYYY"),u=c=>{const R=new Date(c),C={hour:"2-digit",minute:"2-digit",hour12:!0};return R.toLocaleTimeString(void 0,C)},_=c=>{const R=p=>p?p.charAt(0).toUpperCase()+p.slice(1).toLowerCase():"",C=c.firstname?R(c.firstname):"No Firstname",f=c.middlename?R(c.middlename).charAt(0)+".":"",b=c.lastname?R(c.lastname):"No Lastname";return`${C} ${f} ${b}`.trim()},m=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(c).replace("\u20B1","\u20B1	"),r=c=>{const R=T(()=>c.credit_reports.flatMap(H=>H.credit_products));console.log("All Credit Products:",R.value);const C=[{title:"Bread Production",data:(c.bread_reports||[]).map(H=>{const oe=Number(H.beginnings)||0,Q=Number(H.new_production)||0,E=Number(H.remaining)||0,j=Number(H.bread_out)||0,z=Number(H.price)||0,L=oe+Q,pe=E+j,Ve=L-pe,Me=Ve*z;return{...H,total:L,bread_sold:Ve,sales:Me}}),columns:["bread.name","beginnings","price","new_production","bread_out","bread_sold","total","remaining","sales"],totals:["sales"]},{title:"Selecta Production",data:(c.selecta_reports||[]).map(H=>{const oe=Number(H.beginnings||0),Q=Number(H.added_stocks||0),E=Number(H.out||0),j=Number(H.remaining||0),z=Number(H.price||0),L=oe+Q,pe=j+E,Ve=L-pe,Me=Ve*z;return{...H,total:L,sold:Ve,sales:Me}}),columns:["selecta.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Softdrinks Production",data:(c.softdrinks_reports||[]).map(H=>{const oe=Number(H.beginnings||0),Q=Number(H.added_stocks||0),E=Number(H.out||0),j=Number(H.remaining||0),z=Number(H.price||0),L=oe+Q,pe=j+E,Ve=L-pe,Me=Ve*z;return{...H,total:L,sold:Ve,sales:Me}}),columns:["softdrinks.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Other Products Production",data:(c.other_products_reports||[]).map(H=>{const oe=Number(H.beginnings||0),Q=Number(H.added_stocks||0),E=Number(H.out||0),j=Number(H.remaining||0),z=Number(H.price||0),L=oe+Q,pe=j+E,Ve=L-pe,Me=Ve*z;return{...H,total:L,sold:Ve,sales:Me}}),columns:["other_products.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Cake Production",data:c.cake_sales_reports||[],columns:["cake_report.name","cake_report.user.employee","cake_report.layers","cake_report.price","cake_report.sales_status"],totals:["cake_report.price"]}],f=c.expenses_reports||[],b=R.value||[],p=c.denomination_reports[0]||[],i=c.denomination_total;c.over_total;const g={bills:[{name:"One Thousand",pcs:p.oneThousandBills||0,value:(p.oneThousandBills||0)*1e3},{name:"Five Hundred",pcs:p.fiveHundredBills||0,value:(p.fiveHundredBills||0)*500},{name:"Two Hundred",pcs:p.twoHundredBills||0,value:(p.twoHundredBills||0)*200},{name:"One Hundred",pcs:p.oneHundredBills||0,value:(p.oneHundredBills||0)*100},{name:"Fifty",pcs:p.fiftyBills||0,value:(p.fiftyBills||0)*50},{name:"Twenty",pcs:p.twentyBills||0,value:(p.twentyBills||0)*20}],coins:[{name:"Twenty",pcs:p.twentyCoins||0,value:(p.twentyCoins||0)*20},{name:"Ten",pcs:p.tenCoins||0,value:(p.tenCoins||0)*10},{name:"Five",pcs:p.fiveCoins||0,value:(p.fiveCoins||0)*5},{name:"One",pcs:p.oneCoins||0,value:(p.oneCoins||0)*1},{name:"Twenty Five Cents",pcs:p.twentyFiveCents||0,value:(p.twentyFiveCents||0)*.25}]},s=(H,oe,Q)=>{const E=(z,L)=>L.split(".").reduce((pe,Ve)=>pe?pe[Ve]:0,z),j=Q.reduce((z,L)=>(z[L]=H.reduce((pe,Ve)=>pe+parseFloat(E(Ve,L))||0,0),z),{});return[...H.map(z=>oe.map(L=>{if(L==="cake_report.user.employee"){const pe=E(z,"cake_report.user.employee");return{text:pe?_(pe):"No Employee",style:"body",alignment:"center"}}return{text:L.includes(".")?E(z,L)||"-":z[L]||"-",style:"body",alignment:"center"}})),[{text:"Overall Total",colSpan:oe.length-Q.length,style:"tableHeader",alignment:"right",color:"#020617"},...Array(oe.length-Q.length-1).fill({}),...Q.map(z=>({text:`\u20B1 ${j[z].toFixed(2)}`,style:"tableHeader",alignment:"center",color:"#020617"}))]]};let n=0;const l=b.length>0?b.map(H=>{const oe=(H.price||0)*(H.pieces||0);return n+=oe,[{text:_(H.credit_user_id),style:"body",alignment:"center"},{text:H.product.name,style:"body",alignment:"center"},{text:H.pieces,style:"body",alignment:"center"},{text:m(H.price),style:"body",alignment:"center"},{text:m(oe),style:"body",alignment:"center"}]}):[[{text:"No data available",colSpan:5,alignment:"center"}]];l.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:3},{},{},{text:m(n),style:"bodyBold",alignment:"center",colSpan:2},{}]);let o=0;const x=f.length>0?f.map(H=>{const oe=parseFloat(H.amount.replace(/[^0-9.-]+/g,""));return isNaN(oe)||(o+=oe),[{text:H.name,style:"body",alignment:"center"},{text:H.description,style:"body",alignment:"center"},{text:`${m(oe)}`,style:"body",alignment:"center"}]}):[[{text:"No data available",colSpan:3,alignment:"center"}]];x.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:2},{},{text:`${m(o)}`,style:"bodyBold",alignment:"center"}]);const B=g.bills.map((H,oe)=>{var Q,E;return[{text:H.name,style:"body",alignment:"center"},{text:H.pcs,style:"body",alignment:"center"},{text:((Q=g.coins[oe])==null?void 0:Q.name)||"",style:"body",alignment:"center"},{text:((E=g.coins[oe])==null?void 0:E.pcs)||"0",style:"body",alignment:"center"}]});B.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:3,color:"#020617"},{},{},{text:`${m(i)}`,style:"bodyBold",alignment:"right",color:"#020617"}]);const O=C.map(({title:H,data:oe,columns:Q,totals:E})=>({stack:[{text:H,style:"subheader",alignment:"center"},{table:{headerRows:1,widths:Array(Q.length).fill("*"),body:[Q.map(j=>({text:j.split(".").pop().replace(/_/g," ").replace(/\b\w/g,z=>z.toUpperCase()),style:"tableHeader",alignment:"center"})),...s(oe,Q,E)]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]})),J=C.reduce((H,oe)=>{const Q=oe.data.reduce((E,j)=>E+(j.sales||0),0);return H+Q},0),ue=g.bills.reduce((H,oe)=>H+oe.value,0)+g.coins.reduce((H,oe)=>H+oe.value,0),Ue=o+n,he=J-Ue;let ne=0,be=0;ue>he?ne=ue-he:ue<he&&(be=he-ue);const He={table:{widths:["50%","50%"],body:[[{text:"Total Denomination",style:"tableHeader",alignment:"left"},{text:m(ue),style:"tableData",alignment:"center"}],[{text:"Total Product Sales Amount",style:"tableHeader",alignment:"left"},{text:m(J),style:"tableData",alignment:"center"}],[{text:"Total Expenses",style:"tableHeader",alignment:"left"},{text:m(o),style:"tableData",alignment:"center"}],[{text:"Total Credits",style:"tableHeader",alignment:"left"},{text:m(n),style:"tableData",alignment:"center"}],[{text:"Over Cash",style:"tableHeader",alignment:"left"},{text:m(ne),style:"tableData",alignment:"center"}],[{text:"Charges",style:"tableHeader",alignment:"left"},{text:`${m(be)}`,style:"tableData",alignment:"center"}]]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}};return{content:[{text:"Sales Report",style:"header",alignment:"center"},{columns:[{text:`Branch Name: ${c.branch.name}
          Cashier: ${_(c.user.employee)}
          Date: ${P(c.created_at)}
Time: ${u(c.created_at)}
`,margin:[0,0,0,10]},{}]},...O,{margin:[0,5,0,0],columns:[{width:"50%",stack:[{text:"Expenses Report",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","auto","*"],body:[[{text:"Expenses Name",style:"tableHeader",alignment:"center"},{text:"Description",style:"tableHeader",alignment:"center"},{text:"Amount",style:"tableHeader",alignment:"center"}],...x]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}},{text:"Credit Report",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*","auto","auto","auto"],body:[[{text:"Employee Name",style:"tableHeader",alignment:"center"},{text:"Product Name",style:"tableHeader",alignment:"center"},{text:"Pieces",style:"tableHeader",alignment:"center"},{text:"Price",style:"tableHeader",alignment:"center"},{text:"Amount",style:"tableHeader",alignment:"center"}],...l]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]},{width:"50%",stack:[{text:"Denomination Report",style:"subheader",alignment:"center"},{table:{headerRows:0,widths:["*","auto","*","auto"],body:[[{text:"Bills",style:"tableHeader",alignment:"center"},{text:"Pcs",style:"tableHeader",alignment:"center"},{text:"Coins",style:"tableHeader",alignment:"center"},{text:"Pcs",style:"tableHeader",alignment:"center"}],...B]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]}],columnGap:10},{},{canvas:[{type:"line",x1:0,y1:25,x2:580,y2:25,lineWidth:1,dash:{length:5,space:5},lineColor:"#000000",margin:[0,20,0,0]}]},{margin:[0,20,0,0],stack:[{text:"Summary",style:"subheader",alignment:"center"},He]}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableHeader:{bold:!0,fontSize:10,color:"black"},body:{fontSize:8}},pageMargins:[10,10,10,10]}},h=c=>{const R=r(c);tt.exports.createPdf(R).getDataUrl(C=>{w.value=C,v.value=!0})};return(c,R)=>(k(),A(K,null,[e(M,{class:"my-card q-pa-md"},{default:t(()=>[e(N,null,{default:t(()=>[a("div",ts,[(k(!0),A(K,null,ge(ae(V),(C,f)=>(k(),A("div",{key:f},[e(M,{flat:"",dense:"",bordered:""},{default:t(()=>[e(N,null,{default:t(()=>[a("div",as,[os,a("div",ls,[e(I,{padding:"xs md",label:"Print",icon:"print",outline:"",class:"user-button",onClick:b=>h(C)},null,8,["onClick"]),a("div",null,[e(fe,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q(" Print Report ")]),_:1})])])]),a("div",ns,[a("div",null,"Name: "+$(_(C.user.employee)),1),a("div",null,"Date: "+$(P(C.created_at)),1),a("div",null,"Time: "+$(u(C.created_at)),1)])]),_:2},1024),a("div",ss,[e(Jl,{sales_Reports:[C]},null,8,["sales_Reports"]),e(cn,{sales_Reports:[C]},null,8,["sales_Reports"]),e(Nn,{sales_Reports:[C]},null,8,["sales_Reports"]),e(Zn,{sales_Reports:[C]},null,8,["sales_Reports"])])]),_:2},1024)]))),128))])]),_:1})]),_:1}),e(X,{modelValue:v.value,"onUpdate:modelValue":R[0]||(R[0]=C=>v.value=C),maximized:S.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[a("div",rs,[a("div",ds,[se((k(),F(I,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},{default:t(()=>[e(fe,null,{default:t(()=>[q("Close")]),_:1})]),_:1})),[[re]])]),a("div",null,[a("iframe",{src:w.value,width:"100%",height:"700px"},null,8,is)])])]),_:1},8,["modelValue","maximized"])],64))}};var cs=Z(us,[["__scopeId","data-v-1a049b86"]]);const ms={class:"text-h6"},ps={class:"row q-gutter-x-md"},_s={__name:"ProductionReportDialog",props:["reports","reportLabel"],emits:["selectReport","hide","ok","cancel"],setup(d,{emit:y}){const{dialogRef:V,onDialogHide:S,onDialogOK:v,onDialogCancel:w}=qe(),P=d;console.log("production report",P.reports);const u=P.reports.baker_reports,_=P.reports.sales_reports,m=P.reports.sales_reports_id;console.log("sales_report_id",m);const r=y,h=U("bakerReport"),c=U(!0),R=U(!1),C=b=>b?b.split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1).toLowerCase()).join(" "):"",f=()=>{r("selectReport",P.reports),R.value=!0};return(b,p)=>(k(),F(X,{ref_key:"dialogRef",ref:V,modelValue:R.value,"onUpdate:modelValue":p[2]||(p[2]=i=>R.value=i),onHide:ae(S),onOk:f,onCancel:ae(w),maximized:c.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(M,{style:{"background-color":"#f7f8fc"}},{default:t(()=>[e(N,{class:"row items-center text-white",style:{"background-color":"#595a5a"}},{default:t(()=>[a("div",ms,$(`${C(d.reports.branch_name)} ( ${d.reportLabel} Reports)`),1),e(Pe),a("div",ps,[a("div",null,[se((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(fe,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[re]])])])]),_:1}),e(N,null,{default:t(()=>[a("div",null,[e(Ye,{modelValue:h.value,"onUpdate:modelValue":p[0]||(p[0]=i=>h.value=i),align:"justify","narrow-indicator":"",class:"q-mb-lg"},{default:t(()=>[e(ke,{class:"text-purple",name:"bakerReport",label:"Baker Reports"}),e(ke,{class:"text-orange",name:"salesReport",label:"Sales Report"})]),_:1},8,["modelValue"])]),a("div",null,[e(Ge,{modelValue:h.value,"onUpdate:modelValue":p[1]||(p[1]=i=>h.value=i),animated:"","transition-prev":"scale","transition-next":"scale",style:{"background-color":"#f7f8fc"}},{default:t(()=>[e(xe,{name:"bakerReport"},{default:t(()=>[e(to,{bakersReport:ae(u),sales_report_id:ae(m)},null,8,["bakersReport","sales_report_id"])]),_:1}),e(xe,{name:"salesReport"},{default:t(()=>[e(cs,{salesReport:ae(_)},null,8,["salesReport"])]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide","onCancel","maximized"]))}};var gs=Z(_s,[["__scopeId","data-v-0a776a06"]]);const fs=d=>(de("data-v-12387bc6"),d=d(),ie(),d),vs={key:0,class:"spinner-wrapper"},ys={key:1},hs={key:0,class:"data-error"},bs=fs(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),ws={class:"row justify-center q-gutter-x-md"},ks={__name:"ProductionTable",setup(d){const y=we();U("bakerReport");const V=y.params.branch_id;U(!1),U(!0),U(""),U("");const S=U({rowsPerPage:0}),v=Xe(),w=U(""),P=T(()=>v.productions);U(!0);const u=U(!0),_=U(!1),m=T(()=>w.value?P.value.filter(f=>f.name.toLowerCase().includes(w.value.toLowerCase())):P.value);Ne(async()=>{V&&await r(V)});const r=async f=>{try{u.value=!0;const b=await v.fetchBranchProductions(f);console.log("Fetched data:",b),console.log("Production rows:",P.value),P.value.length||(_.value=!0)}catch{_.value=!0}finally{u.value=!1}};ye(w,async f=>{u.value=!0,await new Promise(b=>setTimeout(b,1e3)),u.value=!1,_.value=m.value.length===0});const c=[{name:"reportDate",align:"center",label:"Date",field:"date",format:f=>Ce.formatDate(f,"MMMM DD, YYYY")},{name:"reports",align:"center",label:"Reports",field:"reports"}],R=Te(),C=(f,b)=>{R.dialog({component:gs,componentProps:{reports:f,reportLabel:b}})};return(f,b)=>(k(),A(K,null,[a("div",null,[e(D,{modelValue:w.value,"onUpdate:modelValue":b[0]||(b[0]=p=>w.value=p),class:"q-pb-lg q-pl-md",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100",style:{width:"500px","max-width":"1500px","min-width":"100px"}},{append:t(()=>[e(te,{name:"search"})]),_:1},8,["modelValue"])]),u.value?(k(),A("div",vs,[e(ot,{size:"50px",color:"primary"})])):(k(),A("div",ys,[m.value.length===0?(k(),A("div",hs,[e(te,{name:"warning",color:"warning",size:"4em"}),bs])):(k(),F($e,{key:1,class:"table-container sticky-header",filter:w.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"400px"},columns:c,rows:m.value,"row-key":"reportDate","virtual-scroll":"",pagination:S.value,"onUpdate:pagination":b[1]||(b[1]=p=>S.value=p),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-reports":t(p=>[e(G,{props:p},{default:t(()=>[a("div",ws,[e(I,{padding:"xs lg",rounded:"",dense:"",size:"sm",color:"light-blue-5","text-color":"white",onClick:i=>C(p.row.AM,"AM")},{default:t(()=>[q("AM")]),_:2},1032,["onClick"]),e(I,{padding:"xs lg",rounded:"",dense:"",size:"sm",color:"deep-orange","text-color":"white",onClick:i=>C(p.row.PM,"PM")},{default:t(()=>[q("PM")]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var xs=Z(ks,[["__scopeId","data-v-12387bc6"]]);const $s={__name:"ProductionPage",setup(d){return(y,V)=>(k(),A("div",null,[e(xs)]))}},Vs={class:"row justify-between"},Cs=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),Rs=a("div",{class:"text-h6"},"Decline Report",-1),Ss={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){const y=Qe(),V=U(""),S=U(!1),v=U(!1),w=U({rowsPerPage:0}),P=Te(),u=d,_=()=>{v.value=!0},m=()=>{S.value=!0},r=async()=>{if(!V.value){P.notify({type:"negative",message:"Remark is required"});return}try{const f=await y.declineReport(u.report.id,V.value);console.log("Report declined:",f),P.notify({type:"negative",message:"Report declined successfully"}),S.value=!1,v.value=!1,V.value=""}catch(f){console.error("Error declining report:",f),P.notify({type:"negative",message:"Failed to decline report"})}},h=async()=>{try{const f=await y.confirmReport(u.report.id);console.log("Report confirmed:",f),P.notify({type:"positive",message:"Report confirmed successfully"}),v.value=!1}catch(f){console.error(f)}},c=T(()=>u.report.selecta_added_stocks||[]),R=f=>{const b=s=>s?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():"",p=f.firstname?b(f.firstname):"No Firstname",i=f.middlename?b(f.middlename).charAt(0)+".":"",g=f.lastname?b(f.lastname):"No Lastname";return`${p} ${i} ${g}`},C=[{name:"product_name",label:"Product Name",field:f=>f.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:f=>f.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:f=>f.added_stocks?`${f.added_stocks} pcs`:"N/A"}];return(f,b)=>(k(),A(K,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:_})]),e(X,{modelValue:v.value,"onUpdate:modelValue":b[2]||(b[2]=p=>v.value=p)},{default:t(()=>[e(M,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Vs,[Cs,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:b[0]||(b[0]=p=>v.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+$(R(d.report.employee)),1),a("div",null," Branch: "+$(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ve,{color:"yellow",outlined:""},{default:t(()=>[q($(d.report.status),1)]),_:1})])]),_:1}),e(N,null,{default:t(()=>[e($e,{rows:c.value,columns:C,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:w.value,"onUpdate:pagination":b[1]||(b[1]=p=>w.value=p),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e(N,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(I,{color:"negative",label:"Decline",class:"action-btn",onClick:m}),e(I,{color:"positive",label:"Confirm",class:"action-btn",onClick:h})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(X,{modelValue:S.value,"onUpdate:modelValue":b[4]||(b[4]=p=>S.value=p)},{default:t(()=>[e(M,null,{default:t(()=>[e(N,null,{default:t(()=>[Rs]),_:1}),e(N,null,{default:t(()=>[e(D,{modelValue:V.value,"onUpdate:modelValue":b[3]||(b[3]=p=>V.value=p),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[p=>!!p||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(Be,{align:"right"},{default:t(()=>[se(e(I,{flat:"",label:"Cancel",color:"primary"},null,512),[[re]]),e(I,{flat:"",label:"Confirm",color:"negative",onClick:r})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Ps=d=>(de("data-v-08e549d4"),d=d(),ie(),d),Us={class:"q-gutter-md q-ma-md"},Ns={class:"row justify-between"},qs={class:"text-subtitle1"},Ds={class:"text-subtitle1"},As={class:"text-subtitle1"},Is={key:1,class:"data-error"},Bs=Ps(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ts={__name:"TransactionPendingCard",setup(d){const y=we(),V=Qe(),S=T(()=>V.pendingSelectaReports),v=y.params.branch_id,w=U("pending"),P=async()=>{try{const r=await V.fetchPendingSelectaStocks(v,w.value);console.log(S.value)}catch(r){console.error("Error fetching pending stocks:",r)}};Ne(async()=>{v&&await P()});const u=r=>Ce.formatDate(r,"MMMM D, YYYY"),_=r=>Ce.formatDate(r,"hh:mm A"),m=r=>{const h=f=>f?f.charAt(0).toUpperCase()+f.slice(1).toLowerCase():"",c=r.firstname?h(r.firstname):"No Firstname",R=r.middlename?h(r.middlename).charAt(0)+".":"",C=r.lastname?h(r.lastname):"No Lastname";return`${c} ${R} ${C}`};return(r,h)=>(k(),A("div",null,[e(je,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Us,[S.value.length?(k(!0),A(K,{key:0},ge(S.value,(c,R)=>(k(),F(M,{key:R},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Ns,[a("div",qs,$(u(c.created_at)),1),a("div",Ds,$(_(c.created_at)),1),a("div",As,$(c.branch.name)+" - "+$(m(c.employee)),1),a("div",null,[e(ve,{color:"yellow",outlined:""},{default:t(()=>[q(" Pending ")]),_:1})]),a("div",null,[e(Ss,{report:c},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(k(),A("div",Is,[e(te,{name:"warning",color:"warning",size:"4em"}),Bs]))])]),_:1})]))}};var Fs=Z(Ts,[["__scopeId","data-v-08e549d4"]]);const zs={class:"row justify-between"},Ls=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),Os={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){Qe(),U(!1);const y=U(!1),V=()=>{y.value=!0};Te();const S=d,v=T(()=>(console.log("Filtered rows:",S.report||[]),S.report.selecta_added_stocks||[])),w=u=>{const _=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",m=u.firstname?_(u.firstname):"No Firstname",r=u.middlename?_(u.middlename).charAt(0)+".":"",h=u.lastname?_(u.lastname):"No Lastname";return`${m} ${r} ${h}`},P=[{name:"product_name",label:"Product Name",field:u=>(console.log("Row data:",u),u.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:u=>(console.log("Row data:",u),u.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:u=>u.added_stocks?`${u.added_stocks} pcs`:"N/A"}];return(u,_)=>(k(),A(K,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:V})]),e(X,{modelValue:y.value,"onUpdate:modelValue":_[2]||(_[2]=m=>y.value=m)},{default:t(()=>[e(M,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",zs,[Ls,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=m=>y.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+$(w(d.report.employee)),1),a("div",null," Branch: "+$(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ve,{color:"green",outlined:""},{default:t(()=>[q($(d.report.status),1)]),_:1})])]),_:1}),e(N,null,{default:t(()=>[e($e,{rows:v.value,columns:P,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:u.pagination,"onUpdate:pagination":_[1]||(_[1]=m=>u.pagination=m),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Ms=d=>(de("data-v-c1019cbc"),d=d(),ie(),d),js={class:"q-gutter-md q-ma-md"},Hs={class:"row justify-between"},Qs={class:"text-subtitle1"},Es={class:"text-subtitle1"},Ks={class:"text-subtitle1"},Ys={key:1,class:"data-error"},Gs=Ms(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ws={__name:"TransactionConfirmedCard",setup(d){const y=we(),V=Qe(),S=T(()=>V.confirmedSelectaReports),v=y.params.branch_id,w=U("confirmed"),P=async()=>{try{const r=await V.fetchConfirmedSelectaStocks(v,w.value);console.log(S.value)}catch(r){console.error("Error fetching confirmed stocks:",r)}};Ne(async()=>{v&&await P()});const u=r=>Ce.formatDate(r,"MMMM D, YYYY"),_=r=>Ce.formatDate(r,"hh:mm A"),m=r=>{const h=f=>f?f.charAt(0).toUpperCase()+f.slice(1).toLowerCase():"",c=r.firstname?h(r.firstname):"No Firstname",R=r.middlename?h(r.middlename).charAt(0)+".":"",C=r.lastname?h(r.lastname):"No Lastname";return`${c} ${R} ${C}`};return(r,h)=>(k(),A("div",null,[e(je,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",js,[S.value.length?(k(!0),A(K,{key:0},ge(S.value,(c,R)=>(k(),F(M,{key:R},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Hs,[a("div",Qs,$(u(c.created_at)),1),a("div",Es,$(_(c.created_at)),1),a("div",Ks,$(c.branch.name)+" - "+$(m(c.employee)),1),a("div",null,[e(ve,{color:"green",outlined:""},{default:t(()=>[q($(c.status),1)]),_:2},1024)]),a("div",null,[e(Os,{report:c},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(k(),A("div",Ys,[e(te,{name:"warning",color:"warning",size:"4em"}),Gs]))])]),_:1})]))}};var Js=Z(Ws,[["__scopeId","data-v-c1019cbc"]]);const Xs={class:"row justify-between"},Zs=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),er={class:"q-mt-md"},tr={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){Qe(),U(!1);const y=U(!1),V=()=>{y.value=!0},S=d,v=T(()=>(console.log("Filtered rows:",S.report||[]),S.report.selecta_added_stocks||[])),w=u=>{const _=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",m=u.firstname?_(u.firstname):"No Firstname",r=u.middlename?_(u.middlename).charAt(0)+".":"",h=u.lastname?_(u.lastname):"No Lastname";return`${m} ${r} ${h}`},P=[{name:"product_name",label:"Product Name",field:u=>(console.log("Row data:",u),u.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:u=>(console.log("Row data:",u),u.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:u=>u.added_stocks?`${u.added_stocks} pcs`:"N/A"}];return(u,_)=>(k(),A(K,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:V})]),e(X,{modelValue:y.value,"onUpdate:modelValue":_[2]||(_[2]=m=>y.value=m)},{default:t(()=>[e(M,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Xs,[Zs,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=m=>y.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+$(w(d.report.employee)),1),a("div",null," Branch: "+$(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ve,{color:"red",outlined:""},{default:t(()=>[q($(d.report.status),1)]),_:1})]),a("div",er,"Remark: "+$(d.report.remark),1)]),_:1}),e(N,null,{default:t(()=>[e($e,{rows:v.value,columns:P,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:u.pagination,"onUpdate:pagination":_[1]||(_[1]=m=>u.pagination=m),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const ar=d=>(de("data-v-6b801095"),d=d(),ie(),d),or={class:"q-gutter-md q-ma-md"},lr={class:"row justify-between"},nr={class:"text-subtitle1"},sr={class:"text-subtitle1"},rr={class:"text-subtitle1"},dr={key:1,class:"data-error"},ir=ar(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),ur={__name:"TransactionDeclinedCard",setup(d){const y=we(),V=Qe(),S=T(()=>V.declinedSelectaReports),v=y.params.branch_id,w=U("declined"),P=async()=>{try{const r=await V.fetchDeclinedSelectaStocks(v,w.value);console.log("selectedProductsDeclined",S.value)}catch(r){console.error("Error fetching decline stocks:",r)}};Ne(async()=>{v&&await P()});const u=r=>Ce.formatDate(r,"MMMM D, YYYY"),_=r=>Ce.formatDate(r,"hh:mm A"),m=r=>{const h=f=>f?f.charAt(0).toUpperCase()+f.slice(1).toLowerCase():"",c=r.firstname?h(r.firstname):"No Firstname",R=r.middlename?h(r.middlename).charAt(0)+".":"",C=r.lastname?h(r.lastname):"No Lastname";return`${c} ${R} ${C}`};return(r,h)=>(k(),A("div",null,[e(je,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",or,[S.value.length?(k(!0),A(K,{key:0},ge(S.value,(c,R)=>(k(),F(M,{key:R},{default:t(()=>[e(N,null,{default:t(()=>[a("div",lr,[a("div",nr,$(u(c.created_at)),1),a("div",sr,$(_(c.created_at)),1),a("div",rr,$(c.branch.name)+" - "+$(m(c.employee)),1),a("div",null,[e(ve,{color:"red",outlined:""},{default:t(()=>[q($(c.status),1)]),_:2},1024)]),a("div",null,[e(tr,{report:c},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(k(),A("div",dr,[e(te,{name:"warning",color:"warning",size:"4em"}),ir]))])]),_:1})]))}};var cr=Z(ur,[["__scopeId","data-v-6b801095"]]);const mr={class:"q-gutter-y-sm"},pr={__name:"SelectaTransactionPage",setup(d){const y=U("pendingReports"),V=T(()=>{switch(y.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return(S,v)=>(k(),A(K,null,[a("div",mr,[e(Ye,{modelValue:y.value,"onUpdate:modelValue":v[0]||(v[0]=w=>y.value=w),"indicator-color":V.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(ke,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(ke,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(ke,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Ge,{modelValue:y.value,"onUpdate:modelValue":v[1]||(v[1]=w=>y.value=w),animated:""},{default:t(()=>[e(xe,{name:"pendingReports"},{default:t(()=>[e(Fs)]),_:1}),e(xe,{name:"confirmReports"},{default:t(()=>[e(Js)]),_:1}),e(xe,{name:"declineReports"},{default:t(()=>[e(cr)]),_:1})]),_:1},8,["modelValue"])],64))}};var _r=Z(pr,[["__scopeId","data-v-6cbd59c6"]]);const gr={class:"row justify-between"},fr=a("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),vr=a("div",{class:"text-h6"},"Decline Report",-1),yr={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){const y=Je(),V=U(""),S=U(!1),v=U(!1),w=U({rowPerPage:0}),P=Te(),u=d,_=()=>{v.value=!0},m=()=>{S.value=!0},r=async()=>{if(!V.value){P.notify({type:"negative",message:"Remark is required"});return}try{const f=await y.declineReport(u.report.id,V.value);console.log("Report declined:",f),P.notify({type:"negative",message:"Report declined successfully"}),S.value=!1,v.value=!1,V.value=""}catch(f){console.error("Error declining report:",f),P.notify({type:"negative",message:"Failed to decline report"})}},h=async()=>{try{const f=await y.confirmReport(u.report.id);console.log("Report confirmed:",f),P.notify({type:"positive",message:"Report confirmed successfully"}),v.value=!1}catch(f){console.error(f)}},c=T(()=>u.report.softdrinks_added_stocks||[]),R=f=>{const b=s=>s?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():"",p=f.firstname?b(f.firstname):"No Firstname",i=f.middlename?b(f.middlename).charAt(0)+".":"",g=f.lastname?b(f.lastname):"No Lastname";return`${p} ${i} ${g}`},C=[{name:"product_name",label:"Product Name",field:f=>f.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:f=>f.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:f=>f.added_stocks?`${f.added_stocks} pcs`:"N/A"}];return(f,b)=>(k(),A("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:_}),e(X,{modelValue:v.value,"onUpdate:modelValue":b[2]||(b[2]=p=>v.value=p)},{default:t(()=>[e(M,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",gr,[fr,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:b[0]||(b[0]=p=>v.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+$(R(d.report.employee)),1),a("div",null," Branch: "+$(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ve,{color:"yellow",outlined:""},{default:t(()=>[q($(d.report.status),1)]),_:1})])]),_:1}),e(N,null,{default:t(()=>[e($e,{rows:c.value,columns:C,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:w.value,"onUpdate:pagination":b[1]||(b[1]=p=>w.value=p),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e(N,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(I,{color:"negative",label:"Decline",class:"action-btn",onClick:m}),e(I,{color:"positive",label:"Confirm",class:"action-btn",onClick:h})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(X,{modelValue:S.value,"onUpdate:modelValue":b[4]||(b[4]=p=>S.value=p)},{default:t(()=>[e(M,null,{default:t(()=>[e(N,null,{default:t(()=>[vr]),_:1}),e(N,null,{default:t(()=>[e(D,{modelValue:V.value,"onUpdate:modelValue":b[3]||(b[3]=p=>V.value=p),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[p=>!!p||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(Be,{align:"right"},{default:t(()=>[se(e(I,{flat:"",label:"Cancel",color:"primary"},null,512),[[re]]),e(I,{flat:"",label:"Confirm",color:"negative",onClick:r})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};const hr=d=>(de("data-v-7ba0107e"),d=d(),ie(),d),br={class:"q-gutter-md q-ma-md"},wr={class:"row justify-between"},kr={class:"text-subtitle1"},xr={class:"text-subtitle1"},$r={class:"text-subtitle1"},Vr={key:1,class:"data-error"},Cr=hr(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Rr={__name:"TransactionPendingCard",setup(d){const y=we(),V=Je(),S=T(()=>V.pendingSoftdrinksReports),v=y.params.branch_id,w=U("pending"),P=async()=>{try{const r=await V.fetchPendingSoftdrinksStocks(v,w.value);console.log(S.value)}catch(r){console.error("Error fetching pending stocks:",r)}};Ne(async()=>{v&&await P()});const u=r=>Ce.formatDate(r,"MMMM D, YYYY"),_=r=>Ce.formatDate(r,"hh:mm A"),m=r=>{const h=f=>f?f.charAt(0).toUpperCase()+f.slice(1).toLowerCase():"",c=r.firstname?h(r.firstname):"No Firstname",R=r.middlename?h(r.middlename).charAt(0)+".":"",C=r.lastname?h(r.lastname):"No Lastname";return`${c} ${R} ${C}`};return(r,h)=>(k(),A("div",null,[e(je,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",br,[S.value.length?(k(!0),A(K,{key:0},ge(S.value,(c,R)=>(k(),F(M,{key:R},{default:t(()=>[e(N,null,{default:t(()=>[a("div",wr,[a("div",kr,$(u(c.created_at)),1),a("div",xr,$(_(c.created_at)),1),a("div",$r,$(c.branch.name)+" - "+$(m(c.employee)),1),a("div",null,[e(ve,{color:"yellow",outlined:""},{default:t(()=>[q(" Pending ")]),_:1})]),a("div",null,[e(yr,{report:c},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(k(),A("div",Vr,[e(te,{name:"warning",color:"warning",size:"4em"}),Cr]))])]),_:1})]))}};var Sr=Z(Rr,[["__scopeId","data-v-7ba0107e"]]);const Pr={class:"row justify-between"},Ur=a("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),Nr={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){Je(),U(!1);const y=U(!1),V=()=>{y.value=!0},S=d,v=T(()=>(console.log("Filtered rows:",S.report||[]),S.report.softdrinks_added_stocks||[])),w=u=>{const _=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",m=u.firstname?_(u.firstname):"No Firstname",r=u.middlename?_(u.middlename).charAt(0)+".":"",h=u.lastname?_(u.lastname):"No Lastname";return`${m} ${r} ${h}`},P=[{name:"product_name",label:"Product Name",field:u=>(console.log("Row data:",u),u.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:u=>(console.log("Row data:",u),u.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:u=>u.added_stocks?`${u.added_stocks} pcs`:"N/A"}];return(u,_)=>(k(),A(K,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:V})]),e(X,{modelValue:y.value,"onUpdate:modelValue":_[2]||(_[2]=m=>y.value=m)},{default:t(()=>[e(M,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Pr,[Ur,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=m=>y.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+$(w(d.report.employee)),1),a("div",null," Branch: "+$(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ve,{color:"green",outlined:""},{default:t(()=>[q($(d.report.status),1)]),_:1})])]),_:1}),e(N,null,{default:t(()=>[e($e,{rows:v.value,columns:P,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:u.pagination,"onUpdate:pagination":_[1]||(_[1]=m=>u.pagination=m),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const qr=d=>(de("data-v-2b1290c8"),d=d(),ie(),d),Dr={class:"q-gutter-md q-ma-md"},Ar={class:"row justify-between"},Ir={class:"text-subtitle1"},Br={class:"text-subtitle1"},Tr={class:"text-subtitle1"},Fr={key:1,class:"data-error"},zr=qr(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Lr={__name:"TransactionConfirmedCard",setup(d){const y=we(),V=Je(),S=T(()=>V.confirmedSoftdrinksReports),v=y.params.branch_id,w=U("confirmed"),P=async()=>{try{const r=await V.fetchConfirmedSoftdrinksStocks(v,w.value);console.log(S.value)}catch(r){console.error("Error fetching confirmed stocks",r)}};Ne(async()=>{v&&await P()});const u=r=>Ce.formatDate(r,"MMMM D, YYYY"),_=r=>Ce.formatDate(r,"hh:mm A"),m=r=>{const h=f=>f?f.charAt(0).toUpperCase()+f.slice(1).toLowerCase():"",c=r.firstname?h(r.firstname):"No Firstname",R=r.middlename?h(r.middlename).charAt(0)+".":"",C=r.lastname?h(r.lastname):"No Lastname";return`${c} ${R} ${C}`};return(r,h)=>(k(),A("div",null,[e(je,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Dr,[S.value.length?(k(!0),A(K,{key:0},ge(S.value,(c,R)=>(k(),F(M,{key:R},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Ar,[a("div",Ir,$(u(c.created_at)),1),a("div",Br,$(_(c.created_at)),1),a("div",Tr,$(c.branch.name)+" - "+$(m(c.employee)),1),a("div",null,[e(ve,{color:"green",outlined:""},{default:t(()=>[q($(c.status),1)]),_:2},1024)]),a("div",null,[e(Nr,{report:c},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(k(),A("div",Fr,[e(te,{name:"warning",color:"warning",size:"4em"}),zr]))])]),_:1})]))}};var Or=Z(Lr,[["__scopeId","data-v-2b1290c8"]]);const Mr={class:"row justify-between"},jr=a("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),Hr={class:"q-mt-md"},Qr={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){Je();const y=U(!1),V=()=>{y.value=!0},S=d,v=T(()=>(console.log("Filtered rows:",S.report||[]),S.report.softdrinks_added_stocks)),w=u=>{const _=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",m=u.firstname?_(u.firstname):"No Firstname",r=u.middlename?_(u.middlename).charAt(0)+".":"",h=u.lastname?_(u.lastname):"No Lastname";return`${m} ${r} ${h}`},P=[{name:"product_name",label:"Product Name",field:u=>(console.log("Row data:",u),u.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:u=>(console.log("Row data:",u),u.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:u=>u.added_stocks?`${u.added_stocks} pcs`:"N/A"}];return(u,_)=>(k(),A(K,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:V})]),e(X,{modelValue:y.value,"onUpdate:modelValue":_[2]||(_[2]=m=>y.value=m)},{default:t(()=>[e(M,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Mr,[jr,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=m=>y.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+$(w(d.report.employee)),1),a("div",null," Branch: "+$(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ve,{color:"red",outlined:""},{default:t(()=>[q($(d.report.status),1)]),_:1})]),a("div",Hr,"Remark: "+$(d.report.remark),1)]),_:1}),e(N,null,{default:t(()=>[e($e,{rows:v.value,columns:P,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:u.pagination,"onUpdate:pagination":_[1]||(_[1]=m=>u.pagination=m),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Er=d=>(de("data-v-51a1abe5"),d=d(),ie(),d),Kr={class:"q-gutter-md q-ma-md"},Yr={class:"row justify-between"},Gr={class:"text-subtitle1"},Wr={class:"text-subtitle1"},Jr={class:"text-subtitle1"},Xr={key:1,class:"data-error"},Zr=Er(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),ed={__name:"TransactionDeclinedCard",setup(d){const y=we(),V=Je(),S=T(()=>V.declinedSoftdrinksReports),v=y.params.branch_id,w=U("declined"),P=async()=>{try{const r=await V.fetchDeclinedSoftdrinksStocks(v,w.value);console.log("softdrinksProductsDeclined",S.value)}catch(r){console.error("Error fetching decline stocks:",r)}};Ne(async()=>{v&&await P()});const u=r=>Ce.formatDate(r,"MMMM D, YYYY"),_=r=>Ce.formatDate(r,"hh:mm A"),m=r=>{const h=f=>f?f.charAt(0).toUpperCase()+f.slice(1).toLowerCase():"",c=r.firstname?h(r.firstname):"No Firstname",R=r.middlename?h(r.middlename).charAt(0)+".":"",C=r.lastname?h(r.lastname):"No Lastname";return`${c} ${R} ${C}`};return(r,h)=>(k(),F(je,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Kr,[S.value.length?(k(!0),A(K,{key:0},ge(S.value,(c,R)=>(k(),F(M,{key:R},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Yr,[a("div",Gr,$(u(c.created_at)),1),a("div",Wr,$(_(c.created_at)),1),a("div",Jr,$(c.branch.name)+" - "+$(m(c.employee)),1),a("div",null,[e(ve,{color:"red",outlined:""},{default:t(()=>[q($(c.status),1)]),_:2},1024)]),a("div",null,[e(Qr,{report:c},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(k(),A("div",Xr,[e(te,{name:"warning",color:"warning",size:"4em"}),Zr]))])]),_:1}))}};var td=Z(ed,[["__scopeId","data-v-51a1abe5"]]);const ad={class:"q-gutter-y-sm"},od={__name:"SoftdrinksTransactionPage",setup(d){const y=U("pendingReports"),V=T(()=>{switch(y.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return(S,v)=>(k(),A(K,null,[a("div",ad,[e(Ye,{modelValue:y.value,"onUpdate:modelValue":v[0]||(v[0]=w=>y.value=w),"indicator-color":V.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(ke,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(ke,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(ke,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Ge,{modelValue:y.value,"onUpdate:modelValue":v[1]||(v[1]=w=>y.value=w),animated:""},{default:t(()=>[e(xe,{name:"pendingReports"},{default:t(()=>[e(Sr)]),_:1}),e(xe,{name:"confirmReports"},{default:t(()=>[e(Or)]),_:1}),e(xe,{name:"declineReports"},{default:t(()=>[e(td)]),_:1})]),_:1},8,["modelValue"])],64))}};var ld=Z(od,[["__scopeId","data-v-368f5ccc"]]);const nd={class:"row justify-between"},sd=a("div",{class:"text-h6"},"Other Product Added Stocks Report",-1),rd=a("div",{class:"text-h6"},"Decline Report",-1),dd={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){const y=lt(),V=U(""),S=U(!1),v=U(!1),w=U({rowsPerPage:0}),P=()=>{v.value=!0},u=()=>{S.value=!0},_=d,m=async()=>{if(!V.value){ce.create({type:"negative",message:"Remark is required"});return}try{const C=await y.declineReport(_.report.id,V.value);console.log("Report declined:",C),ce.create({type:"negative",message:"Report declined successfully"}),S.value=!1,v.value=!1,V.value=""}catch(C){console.error("Error declining report:",C),ce.create({type:"negative",message:"Failed to decline report"})}},r=async()=>{try{const C=await y.confirmReport(_.report.id);console.log("Report confirmed:",C),ce.create({type:"positive",message:"Report confirmed successfully"}),v.value=!1}catch(C){console.error(C)}},h=T(()=>_.report.other_added_stock||[]),c=[{name:"product_name",label:"Product Name",field:C=>C.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:C=>C.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:C=>C.added_stocks?`${C.added_stocks} pcs`:"N/A"}],R=C=>{const f=g=>g?g.charAt(0).toUpperCase()+g.slice(1).toLowerCase():"",b=C.firstname?f(C.firstname):"No Firstname",p=C.middlename?f(C.middlename).charAt(0)+".":"",i=C.lastname?f(C.lastname):"No Lastname";return`${b} ${p} ${i}`};return(C,f)=>(k(),A(K,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:P})]),e(X,{modelValue:v.value,"onUpdate:modelValue":f[2]||(f[2]=b=>v.value=b)},{default:t(()=>[e(M,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",nd,[sd,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:f[0]||(f[0]=b=>v.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+$(R(d.report.employee)),1),a("div",null," Branch: "+$(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ve,{color:"yellow",outlined:""},{default:t(()=>[q($(d.report.status),1)]),_:1})])]),_:1}),e(N,null,{default:t(()=>[e($e,{rows:h.value,columns:c,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:w.value,"onUpdate:pagination":f[1]||(f[1]=b=>w.value=b),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e(N,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(I,{color:"negative",label:"Decline",class:"action-btn",onClick:u}),e(I,{color:"positive",label:"Confirm",class:"action-btn",onClick:r})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(X,{modelValue:S.value,"onUpdate:modelValue":f[4]||(f[4]=b=>S.value=b)},{default:t(()=>[e(M,null,{default:t(()=>[e(N,null,{default:t(()=>[rd]),_:1}),e(N,null,{default:t(()=>[e(D,{modelValue:V.value,"onUpdate:modelValue":f[3]||(f[3]=b=>V.value=b),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[b=>!!b||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(Be,{align:"right"},{default:t(()=>[se(e(I,{flat:"",label:"Cancel",color:"primary"},null,512),[[re]]),e(I,{flat:"",label:"Confirm",color:"negative",onClick:m})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const id=d=>(de("data-v-355e3e60"),d=d(),ie(),d),ud={class:"q-gutter-md q-ma-md"},cd={key:0},md={class:"row justify-between"},pd={class:"text-subtitle1"},_d={class:"text-subtitle1"},gd={class:"text-subtitle1"},fd={key:1,class:"data-error"},vd=id(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),yd={__name:"TransactionPendingCard",setup(d){const y=we(),V=lt(),S=T(()=>V.pendingOtherReports),v=y.params.branch_id,w=U("pending"),P=async()=>{try{const r=await V.fetchPendingOtherStocks(v,w.value);console.log(S.value)}catch(r){console.error("Error fetching pending stocks:",r)}};Ne(async()=>{v&&await P()});const u=r=>Ce.formatDate(r,"MMMM D, YYYY"),_=r=>Ce.formatDate(r,"hh:mm A"),m=r=>{const h=f=>f?f.charAt(0).toUpperCase()+f.slice(1).toLowerCase():"",c=r.firstname?h(r.firstname):"No Firstname",R=r.middlename?h(r.middlename).charAt(0)+".":"",C=r.lastname?h(r.lastname):"No Lastname";return`${c} ${R} ${C}`};return(r,h)=>(k(),A("div",null,[e(je,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",ud,[S.value.length?(k(),A("div",cd,[(k(!0),A(K,null,ge(S.value,(c,R)=>(k(),F(M,{key:R},{default:t(()=>[e(N,null,{default:t(()=>[a("div",md,[a("div",pd,$(u(c.created_at)),1),a("div",_d,$(_(c.created_at)),1),a("div",gd,$(c.branch.name)+" - "+$(m(c.employee)),1),a("div",null,[e(ve,{color:"yellow",outlined:""},{default:t(()=>[q(" Pending ")]),_:1})]),a("div",null,[e(dd,{report:c},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128))])):(k(),A("div",fd,[e(te,{name:"warning",color:"warning",size:"4em"}),vd]))])]),_:1})]))}};var hd=Z(yd,[["__scopeId","data-v-355e3e60"]]);const bd={class:"row justify-between"},wd=a("div",{class:"text-h6"},"Other Added Stocks Report",-1),kd={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){Qe(),U(!1);const y=U(!1),V=()=>{y.value=!0};Te();const S=d,v=T(()=>(console.log("Filtered rows:",S.report||[]),S.report.other_added_stock||[])),w=u=>{const _=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",m=u.firstname?_(u.firstname):"No Firstname",r=u.middlename?_(u.middlename).charAt(0)+".":"",h=u.lastname?_(u.lastname):"No Lastname";return`${m} ${r} ${h}`},P=[{name:"product_name",label:"Product Name",field:u=>(console.log("Row data:",u),u.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:u=>(console.log("Row data:",u),u.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:u=>u.added_stocks?`${u.added_stocks} pcs`:"N/A"}];return(u,_)=>(k(),A(K,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:V})]),e(X,{modelValue:y.value,"onUpdate:modelValue":_[2]||(_[2]=m=>y.value=m)},{default:t(()=>[e(M,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",bd,[wd,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=m=>y.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+$(w(d.report.employee)),1),a("div",null," Branch: "+$(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ve,{color:"green",outlined:""},{default:t(()=>[q($(d.report.status),1)]),_:1})])]),_:1}),e(N,null,{default:t(()=>[e($e,{rows:v.value,columns:P,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:u.pagination,"onUpdate:pagination":_[1]||(_[1]=m=>u.pagination=m),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const xd=d=>(de("data-v-5b0a7351"),d=d(),ie(),d),$d={class:"q-gutter-md q-ma-md"},Vd={class:"row justify-between"},Cd={class:"text-subtitle1"},Rd={class:"text-subtitle1"},Sd={class:"text-subtitle1"},Pd={key:1,class:"data-error"},Ud=xd(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Nd={__name:"TransactionConfirmedCard",setup(d){const y=we(),V=lt(),S=T(()=>V.confirmedOtherReports),v=y.params.branch_id,w=U("confirmed"),P=async()=>{try{const r=await V.fetchConfirmedOtherStocks(v,w.value);console.log(S.value)}catch(r){console.error("Error fetching confirmed stocks:",r)}};Ne(async()=>{v&&await P()});const u=r=>Ce.formatDate(r,"MMMM D, YYYY"),_=r=>Ce.formatDate(r,"hh:mm A"),m=r=>{const h=f=>f?f.charAt(0).toUpperCase()+f.slice(1).toLowerCase():"",c=r.firstname?h(r.firstname):"No Firstname",R=r.middlename?h(r.middlename).charAt(0)+".":"",C=r.lastname?h(r.lastname):"No Lastname";return`${c} ${R} ${C}`};return(r,h)=>(k(),A("div",null,[e(je,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",$d,[S.value.length?(k(!0),A(K,{key:0},ge(S.value,(c,R)=>(k(),F(M,{key:R},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Vd,[a("div",Cd,$(u(c.created_at)),1),a("div",Rd,$(_(c.created_at)),1),a("div",Sd,$(c.branch.name)+" - "+$(m(c.employee)),1),a("div",null,[e(ve,{color:"green",outlined:""},{default:t(()=>[q($(c.status),1)]),_:2},1024)]),a("div",null,[e(kd,{report:c},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(k(),A("div",Pd,[e(te,{name:"warning",color:"warning",size:"4em"}),Ud]))])]),_:1})]))}};var qd=Z(Nd,[["__scopeId","data-v-5b0a7351"]]);const Dd={class:"row justify-between"},Ad=a("div",{class:"text-h6"},"Others Added Stocks Report",-1),Id={class:"q-mt-md"},Bd={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){Qe(),U(!1);const y=U(!1),V=()=>{y.value=!0},S=d,v=T(()=>(console.log("Filtered rows:",S.report||[]),S.report.other_added_stock||[])),w=u=>{const _=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",m=u.firstname?_(u.firstname):"No Firstname",r=u.middlename?_(u.middlename).charAt(0)+".":"",h=u.lastname?_(u.lastname):"No Lastname";return`${m} ${r} ${h}`},P=[{name:"product_name",label:"Product Name",field:u=>(console.log("Row data:",u),u.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:u=>(console.log("Row data:",u),u.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:u=>u.added_stocks?`${u.added_stocks} pcs`:"N/A"}];return(u,_)=>(k(),A(K,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:V})]),e(X,{modelValue:y.value,"onUpdate:modelValue":_[2]||(_[2]=m=>y.value=m)},{default:t(()=>[e(M,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Dd,[Ad,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=m=>y.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+$(w(d.report.employee)),1),a("div",null," Branch: "+$(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ve,{color:"red",outlined:""},{default:t(()=>[q($(d.report.status),1)]),_:1})]),a("div",Id,"Remark: "+$(d.report.remark),1)]),_:1}),e(N,null,{default:t(()=>[e($e,{rows:v.value,columns:P,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:u.pagination,"onUpdate:pagination":_[1]||(_[1]=m=>u.pagination=m),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Td=d=>(de("data-v-67ff56ab"),d=d(),ie(),d),Fd={class:"q-gutter-md q-ma-md"},zd={class:"row justify-between"},Ld={class:"text-subtitle1"},Od={class:"text-subtitle1"},Md={class:"text-subtitle1"},jd={key:1,class:"data-error"},Hd=Td(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Qd={__name:"TransactionDeclinedCard",setup(d){const y=we(),V=lt(),S=T(()=>V.declinedOtherReports),v=y.params.branch_id,w=U("declined"),P=async()=>{try{const r=await V.fetchDeclinedOtherStocks(v,w.value);console.log("selectedOtherProductDeclined",S.value)}catch(r){console.error("Error fetching decline stocks:",r)}};Ne(async()=>{v&&await P()});const u=r=>Ce.formatDate(r,"MMMM D, YYYY"),_=r=>Ce.formatDate(r,"hh:mm A"),m=r=>{const h=f=>f?f.charAt(0).toUpperCase()+f.slice(1).toLowerCase():"",c=r.firstname?h(r.firstname):"No Firstname",R=r.middlename?h(r.middlename).charAt(0)+".":"",C=r.lastname?h(r.lastname):"No Lastname";return`${c} ${R} ${C}`};return(r,h)=>(k(),A("div",null,[e(je,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Fd,[S.value.length?(k(!0),A(K,{key:0},ge(S.value,(c,R)=>(k(),F(M,{key:R},{default:t(()=>[e(N,null,{default:t(()=>[a("div",zd,[a("div",Ld,$(u(c.created_at)),1),a("div",Od,$(_(c.created_at)),1),a("div",Md,$(c.branch.name)+" - "+$(m(c.employee)),1),a("div",null,[e(ve,{color:"red",outlined:""},{default:t(()=>[q($(c.status),1)]),_:2},1024)]),a("div",null,[e(Bd,{report:c},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(k(),A("div",jd,[e(te,{name:"warning",color:"warning",size:"4em"}),Hd]))])]),_:1})]))}};var Ed=Z(Qd,[["__scopeId","data-v-67ff56ab"]]);const Kd={class:"q-gutter-y-sm"},Yd={__name:"OtherTransactionPage",setup(d){const y=U("pendingReports"),V=T(()=>{switch(y.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return(S,v)=>(k(),A(K,null,[a("div",Kd,[e(Ye,{modelValue:y.value,"onUpdate:modelValue":v[0]||(v[0]=w=>y.value=w),"indicator-color":V.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(ke,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(ke,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(ke,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Ge,{modelValue:y.value,"onUpdate:modelValue":v[1]||(v[1]=w=>y.value=w),animated:""},{default:t(()=>[e(xe,{name:"pendingReports"},{default:t(()=>[e(hd)]),_:1}),e(xe,{name:"confirmReports"},{default:t(()=>[e(qd)]),_:1}),e(xe,{name:"declineReports"},{default:t(()=>[e(Ed)]),_:1})]),_:1},8,["modelValue"])],64))}};var Gd=Z(Yd,[["__scopeId","data-v-b76c19b4"]]);const wt=d=>(de("data-v-0a732ed6"),d=d(),ie(),d),Wd={class:"q-gutter-y-sm"},Jd=wt(()=>a("h1",null,"Bread",-1)),Xd=wt(()=>a("h1",null,"Cake",-1)),Zd={__name:"TransactionPage",setup(d){const y=U("bread");return(V,S)=>(k(),A(K,null,[a("div",Wd,[e(Ye,{modelValue:y.value,"onUpdate:modelValue":S[0]||(S[0]=v=>y.value=v),"active-color":"light-green-13","indicator-color":"light-green-13","narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:"gradient-btn"},{default:t(()=>[e(ke,{class:"text-white",name:"bread",label:"\u{1F35E}Bread"}),e(ke,{class:"text-white",name:"selecta",label:"\u{1F366}Selecta"}),e(ke,{class:"text-white",name:"softdrinks",label:"\u{1F964}Softdrinks"}),e(ke,{class:"text-white",name:"cake",label:"\u{1F370}Cake"}),e(ke,{class:"text-white",name:"other",label:"\u2B50Others"})]),_:1},8,["modelValue"])]),e(Ge,{modelValue:y.value,"onUpdate:modelValue":S[1]||(S[1]=v=>y.value=v),animated:""},{default:t(()=>[e(xe,{name:"bread"},{default:t(()=>[e(M,null,{default:t(()=>[Jd]),_:1})]),_:1}),e(xe,{name:"selecta"},{default:t(()=>[e(_r)]),_:1}),e(xe,{name:"softdrinks"},{default:t(()=>[e(ld)]),_:1}),e(xe,{name:"cake"},{default:t(()=>[e(M,null,{default:t(()=>[Xd]),_:1})]),_:1}),e(xe,{name:"other"},{default:t(()=>[e(Gd)]),_:1})]),_:1},8,["modelValue"])],64))}};var ei=Z(Zd,[["__scopeId","data-v-0a732ed6"]]);const Ke=d=>(de("data-v-f0d86c36"),d=d(),ie(),d),ti=Ke(()=>a("div",{class:"text-h6"},"Create Branch Recipe",-1)),ai={class:"q-mb-lg"},oi={key:0,class:"custom-list z-top"},li={class:"q-mb-sm"},ni=Ke(()=>a("div",null,"Recipe Name",-1)),si={class:"q-mb-lg"},ri=Ke(()=>a("div",null,"Category",-1)),di=Ke(()=>a("div",null,"Breads",-1)),ii={class:"q-mt-md q-gutter-y-sm"},ui=Ke(()=>a("div",{class:"text-weight-thin"},"Ingredients List",-1)),ci={class:"q-mt-xl q-gutter-y-sm"},mi={class:"row justify-between"},pi=Ke(()=>a("div",{align:"center"},"Ingredients",-1)),_i=Ke(()=>a("div",{align:"center"},"Quantity",-1)),gi=["onKeyup"],fi={align:"right"},vi={__name:"RecipeCreate",setup(d){const y=we(),V=y.params.branch_id,S=Ut(),v=T(()=>S.recipes),w=et(),P=We(),u=et(),_=T(()=>w.branchRecipes),m=U(!1),r=()=>{m.value=!0},h=()=>{clearForm(),m.value=!1},c=Q=>Q?Q.split(" ").map(E=>E.charAt(0).toUpperCase()+E.slice(1).toLowerCase()).join(" "):"",R=U(""),C=async()=>{S.searchRecipe(R.value)},f=T(()=>p.target!==0),b=Q=>{p.recipe_id=Q.id,p.recipe_name=Q.name,p.category=Q.category,R.value=""},p=Ie({recipe_id:"",recipe_name:"",category:"",target:"",branches_id:y.params.branch_id}),i=U(!1),g=U(null),s=U([]),n=U(s.value),l=U([]),o=U([]),x=Ie({name:"",quantity:""}),B=U(o.value);(async()=>{await P.fetchProductsByCategory("Bread"),i.value=!1,s.value=P.breads.map(Q=>({label:Q.name,value:Q.id}))})(),(async()=>{const Q="Ingredients";await u.fetchBranchRawMaterials(Q,V),i.value=!1,o.value=u.ingredients.map(E=>({label:E.raw_material_name,value:E.raw_material_id,unit:E.ingredient_unit}))})();const ue=()=>{x.name="",x.quantity=""},Ue=(Q,E)=>{Q.length>2&&(s.value.includes(Q)||E(Q,"add-unique"))},he=(Q,E)=>{E(()=>{if(Q==="")n.value=s.value;else{const j=Q.toLowerCase();n.value=s.value.filter(z=>z.label.toLowerCase().indexOf(j)>-1)}})},ne=(Q,E)=>{E(()=>{if(Q==="")B.value=o.value;else{const j=Q.toLowerCase();B.value=o.value.filter(z=>z.label.toLowerCase().indexOf(j)>-1)}})},be=()=>{const Q=l.value;function E(L,pe){return L.find(Ve=>Ve.ingredients_id==pe)}const j=x.name.value;E(Q,j)?ce.create({type:"negative",icon:"warning",message:"Ingredient already exist",timeout:2e3}):(l.value=[...Q,{ingredients_id:x.name.value,label:x.name.label,quantity:x.quantity,unit:x.name.unit}],ue())},He=Q=>{l.value.splice(Q,1)};ye(()=>x.name,Q=>{Q&&Q.unit?x.unit=Q.unit:x.unit=""});const H=()=>{p.recipe_id="",p.target="",g.value=null,l.value=[],x.name="",x.quantity=""},oe=async()=>{const Q={recipe_id:p.recipe_id,target:p.target,status:"active",branch_id:p.branches_id,breads:g.value.map(E=>({bread_id:E.value})),ingredients:l.value.map(E=>({ingredient_id:E.ingredients_id,quantity:E.quantity}))};console.log("branchRecipe",Q),await w.saveBranchRecipe(Q),_.value=await w.fetchBranchRecipes(V),H(),m.value=!1};return(Q,E)=>(k(),A(K,null,[e(I,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Recipe",onClick:r}),e(X,{modelValue:m.value,"onUpdate:modelValue":E[7]||(E[7]=j=>m.value=j)},{default:t(()=>[e(M,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(N,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[ti,e(Pe),se(e(I,{icon:"close",flat:"",dense:"",round:""},null,512),[[re]])]),_:1}),e(N,null,{default:t(()=>{var j;return[a("div",ai,[e(D,{modelValue:R.value,"onUpdate:modelValue":[E[0]||(E[0]=z=>R.value=z),C],debounce:"1000",outlined:"",rounded:"",placeholder:"Search recipe",dense:""},{append:t(()=>[a("div",null,[e(te,{name:"search"})])]),default:t(()=>[R.value?(k(),A("div",oi,[e(M,null,{default:t(()=>[e(Se,{separator:""},{default:t(()=>{var z;return[(z=v.value)!=null&&z.length?(k(!0),A(K,{key:1},ge(v.value,L=>(k(),F(le,{onClick:pe=>b(L),key:L.id,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q($(c(L.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(k(),F(le,{key:0},{default:t(()=>[q(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ae("",!0)]),_:1},8,["modelValue"])]),a("div",li,[ni,e(D,{modelValue:p.recipe_name,"onUpdate:modelValue":E[1]||(E[1]=z=>p.recipe_name=z),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",si,[ri,e(D,{modelValue:p.category,"onUpdate:modelValue":E[2]||(E[2]=z=>p.category=z),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[e(D,{modelValue:p.target,"onUpdate:modelValue":E[3]||(E[3]=z=>p.target=z),outlined:"",dense:"",suffix:" / 1kg",type:"number",label:"Target Pcs",mask:"##.##"},null,8,["modelValue"])]),a("div",null,[di,e(st,{modelValue:g.value,"onUpdate:modelValue":E[4]||(E[4]=z=>g.value=z),"use-input":"","use-chips":"","chips-color":"primary",multiple:"","input-debounce":"0",options:n.value,behavior:"menu","hide-dropdown-icon":"",outlined:"",dense:"",label:"Bread/s",onNewValue:Ue,onFilter:he,rules:[z=>z&&z.length>0||"Bread is required"]},{"no-option":t(()=>[e(le,null,{default:t(()=>[e(Y,{class:"text-grey"},{default:t(()=>[q(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),a("div",ii,[ui,a("div",null,[e(Se,{dense:"",separator:"",class:"box"},{default:t(()=>[(k(!0),A(K,null,ge(l.value,(z,L)=>(k(),F(le,{key:L},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q($(z.label),1)]),_:2},1024)]),_:2},1024),e(Y,null,{default:t(()=>[q($(z.quantity)+" "+$(z.unit),1)]),_:2},1024),e(Y,{side:""},{default:t(()=>[e(I,{onClick:pe=>He(L),color:"grey-10",icon:"backspace",dense:"",flat:"",round:""},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),a("div",ci,[a("div",mi,[a("div",null,[pi,e(st,{modelValue:x.name,"onUpdate:modelValue":E[5]||(E[5]=z=>x.name=z),debounce:"3000",outlined:"","chips-color":"primary",options:B.value,dense:"",label:"Ingredients",behavior:"menu","use-input":"","hide-dropdown-icon":"",onFilter:ne,style:{width:"215px","max-width":"450px","min-width":"80px"}},{"no-option":t(()=>[e(le,null,{default:t(()=>[e(Y,{class:"text-grey"},{default:t(()=>[q(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),a("div",null,[_i,e(D,{modelValue:x.quantity,"onUpdate:modelValue":E[6]||(E[6]=z=>x.quantity=z),modelModifiers:{number:!0},outlined:"",dense:"",type:"number",label:"Quantity",suffix:((j=x==null?void 0:x.name)==null?void 0:j.unit)||"",style:{width:"115px"},hint:"Enter the quantity as a decimal",mask:"##.##"},null,8,["modelValue","suffix"])])]),a("form",{onKeyup:me($t(be,["prevent"]),["enter"])},[a("div",fi,[e(I,{padding:"xs md",type:"button",size:"sm",outline:"",dense:"",label:"add",icon:"add",color:"purple",onClick:be})])],40,gi)])]}),_:1}),e(Be,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(I,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:h}),e(I,{class:"glossy",color:"teal",label:"Create",onClick:oe,disable:!f.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var yi=Z(vi,[["__scopeId","data-v-f0d86c36"]]);const kt=d=>(de("data-v-33664d62"),d=d(),ie(),d),hi=kt(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),bi=kt(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),wi={__name:"RecipeDelete",props:["delete"],setup(d){const y=et(),V=d,S=U(!1),v=()=>{S.value=!0},w=async()=>{await y.deleteRecipe(V.delete.row.id),S.value=!1};return(P,u)=>(k(),A(K,null,[e(I,{onClick:v,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"","aria-label":"Delete"},{default:t(()=>[e(fe,{class:"bg-negative",delay:200},{default:t(()=>[q("Delete")]),_:1})]),_:1}),e(X,{modelValue:S.value,"onUpdate:modelValue":u[0]||(u[0]=_=>S.value=_),persistent:""},{default:t(()=>[e(M,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(N,{class:"q-pt-none q-pb-sm"},{default:t(()=>[hi,bi]),_:1}),e(at,{class:"q-mb-md"}),e(N,null,{default:t(()=>[e(Be,{align:"right",class:"q-pt-none"},{default:t(()=>[se(e(I,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[re]]),e(I,{dense:"",label:"Delete",color:"negative",onClick:w,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var ki=Z(wi,[["__scopeId","data-v-33664d62"]]);const xi=d=>(de("data-v-7a561dd0"),d=d(),ie(),d),$i={class:"text-h6 text-white"},Vi=xi(()=>a("div",{class:"text-h6",align:"center"},"Bread List",-1)),Ci={class:"row",align:"center"},Ri={__name:"RecipeBreadGroups",props:["breadGroups"],setup(d){const{dialogRef:y,onDialogHide:V,onDialogOK:S,onDialogCancel:v}=qe();console.log("breadGroups",d.breadGroups);const P=u=>u?u.split(" ").map(_=>_.charAt(0).toUpperCase()+_.slice(1).toLowerCase()).join(" "):"";return(u,_)=>(k(),F(X,{ref_key:"dialogRef",ref:y,onHide:ae(V),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(M,{style:{width:"500px","max-width":"120vw"}},{default:t(()=>[e(N,{class:"row bg-backgroud text-h6"},{default:t(()=>[a("div",$i,$(P(d.breadGroups.name)),1),e(Pe),a("div",null,[se(e(I,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[re]])])]),_:1}),e(N,null,{default:t(()=>[Vi]),_:1}),e(N,null,{default:t(()=>[(k(!0),A(K,null,ge(d.breadGroups.bread_groups,(m,r)=>(k(),A("div",{key:r},[a("div",Ci,$(m),1)]))),128))]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Si=Z(Ri,[["__scopeId","data-v-7a561dd0"]]);const Pi=d=>(de("data-v-435e3b8f"),d=d(),ie(),d),Ui={class:"text-h6 text-white"},Ni=Pi(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),qi={__name:"RecipeIngredientGroups",props:["ingredientGroups"],setup(d){const{dialogRef:y,onDialogHide:V,onDialogOK:S,onDialogCancel:v}=qe();console.log("ingredientGroups",d.ingredientGroups);const P=_=>_?_.split(" ").map(m=>m.charAt(0).toUpperCase()+m.slice(1).toLowerCase()).join(" "):"",u=_=>{const m=Number(_.quantity)||0,r=_.unit||"";return m>1e3?`${parseFloat((m/1e3).toFixed(3))} kg`:m>1?`${parseFloat(m.toFixed(3))} ${r}`:`${parseFloat(m.toFixed(3))} ${r}`};return(_,m)=>(k(),F(X,{ref_key:"dialogRef",ref:y,onHide:ae(V),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(M,{style:{width:"500px","max-width":"120vw"}},{default:t(()=>[e(N,{class:"row bg-backgroud text-h6"},{default:t(()=>[a("div",Ui,$(P(d.ingredientGroups.name)),1),e(Pe),a("div",null,[se(e(I,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[re]])])]),_:1}),e(N,null,{default:t(()=>[Ni]),_:1}),e(N,null,{default:t(()=>[e(Se,{dense:"",separator:"",class:"box"},{default:t(()=>[e(le,null,{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Raw Materials Name")]),_:1})]),_:1}),e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Code")]),_:1})]),_:1}),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Quantity")]),_:1})]),_:1})]),_:1}),(k(!0),A(K,null,ge(d.ingredientGroups.ingredient_groups,(r,h)=>(k(),F(le,{key:h},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q($(r.ingredient_name),1)]),_:2},1024)]),_:2},1024),e(Y,null,{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q($(r.code),1)]),_:2},1024)]),_:2},1024),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q($(u(r)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Di=Z(qi,[["__scopeId","data-v-435e3b8f"]]);const Ai=d=>(de("data-v-d5197c2e"),d=d(),ie(),d),Ii={class:"row justify-between"},Bi={class:"q-my-sm"},Ti={key:0,class:"spinner-wrapper"},Fi={key:1},zi={key:0,class:"data-error"},Li=Ai(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Oi={class:"row justify-center q-gutter-x-md"},Mi={__name:"RecipeTable",setup(d){const V=we().params.branch_id,S=et(),v=U(""),w=U(!0),P=U([]),u=U(!1),_=U({rowsPerPage:0}),m=["inactive","active"],r=T(()=>S.branchRecipes);console.log("branch recipe",r.value);const h=T(()=>v.value?r.value.filter(o=>o.name.toLowerCase().includes(v.value.toLowerCase())):r.value);Ne(async()=>{V&&await c(V)});const c=async o=>{try{w.value=!0;const x=await S.fetchBranchRecipes(o);r.value=x,console.log("branchRecipeRows",r.value),r.value.length||(u.value=!0),console.log("Branch recipe",r.value)}catch(x){console.log("Error fetching recipe",x)}finally{w.value=!1}},R=o=>{const x=Number(o)||0;return parseFloat(x.toFixed(3)).toString()},C=o=>!o&&o!==0?"Set Target":typeof o=="number"||!isNaN(o)?(o=parseFloat(o),o%1===0?o:parseFloat(o.toFixed(1))):o;async function f(o,x){try{const B=await ee.put("/api/update-target/"+o.id,{target:parseFloat(x)});if(console.log("response",B),B.status==200){const O=P.value.findIndex(J=>J.id==o.id);P.value[O]=x}ce.create({type:"positive",message:"Recipe target edited successfully"})}catch(B){console.error("Error updating recipe target:",B),ce.create({type:"negative",message:"Failed to edit recipe target"})}}async function b(o,x){try{if((await ee.put("/api/branch-update-status/"+o.id,{status:x})).status==200){const O=P.value.findIndex(J=>J.id==o.id);P.value[O]=x}ce.create({type:"positive",message:"Recipe status change successfully"})}catch(B){console.error("Error updating recipe status:",B),ce.create({type:"negative",message:"Failed to change recipe status"})}}const p=o=>o?o.split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1).toLowerCase()).join(" "):"",i=[{name:"name",label:"Recipe name",align:"center",field:o=>o.name},{name:"category",label:"Category",align:"center",field:o=>o.recipe},{name:"target",label:"Target",align:"center",field:o=>C(o.target)},{name:"status",label:"Status",align:"center",field:"status"},{name:"bread_groups",label:"List of Bread",align:"center",field:"bread_groups"},{name:"ingredient_groups",label:"List of Ingredients",align:"center",field:"ingredient_groups"},{name:"action",label:"Action",align:"center",sortable:!0}],g=Te(),s=o=>{console.log("Bread Groups:",o),g.dialog({component:Si,componentProps:{breadGroups:o}})},n=o=>{console.log("Ingredients Groups:",o),g.dialog({component:Di,componentProps:{ingredientGroups:o}})},l=o=>{switch(o){case"inactive":return"grey";case"active":return"green";default:return"grey"}};return(o,x)=>(k(),A(K,null,[a("div",Ii,[a("div",null,[e(D,{class:"q-pb-lg q-pl-md",modelValue:v.value,"onUpdate:modelValue":x[0]||(x[0]=B=>v.value=B),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"1500px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(te,{name:"search"})]),_:1},8,["modelValue"])]),a("div",Bi,[e(yi)])]),w.value?(k(),A("div",Ti,[e(ot,{size:"50px",color:"primary"})])):(k(),A("div",Fi,[h.value.length===0?(k(),A("div",zi,[e(te,{name:"warning",color:"warning",size:"4em"}),Li])):(k(),F($e,{key:1,class:"table-container sticky-header",filter:v.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:i,rows:h.value,"row-key":"name","virtual-scroll":"",pagination:_.value,"onUpdate:pagination":x[1]||(x[1]=B=>_.value=B),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"}},{"body-cell-name":t(B=>[e(G,{props:B},{default:t(()=>[a("span",null,$(p(B.row.name)),1)]),_:2},1032,["props"])]),"body-cell-category":t(B=>[e(G,{props:B},{default:t(()=>[a("span",null,$(p(B.row.category)),1)]),_:2},1032,["props"])]),"body-cell-target":t(B=>[e(G,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[q($(R(B.row.target))+" ",1),e(fe,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[q("Edit Target")]),_:1})]),e(_e,{"onUpdate:modelValue":[O=>f(B.row,O),O=>B.row.target=O],modelValue:B.row.target,"auto-save":""},{default:t(O=>[e(D,{modelValue:O.value,"onUpdate:modelValue":J=>O.value=J,dense:"",suffix:"pcs",autofocus:"",counter:"",onKeyup:me(O.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-status":t(B=>[e(G,{props:B},{default:t(()=>[e(ve,{outline:"",color:l(B.row.status)},{default:t(()=>[q($(p(B.row.status))+" ",1),e(fe,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[q("Change Status")]),_:1})]),_:2},1032,["color"]),e(_e,{"onUpdate:modelValue":[O=>b(B.row,O),O=>B.row.status=O],modelValue:B.row.status,"auto-save":""},{default:t(O=>[a("span",null,$(B.row.name),1),e(st,{modelValue:O.value,"onUpdate:modelValue":J=>O.value=J,dense:"",label:"status",autofocus:"",options:m,counter:"",mask:"###",onKeyup:me(O.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-bread_groups":t(B=>[e(G,{props:B},{default:t(()=>[e(I,{"no-caps":"",onClick:O=>s(B.row),label:`${B.row.bread_groups.length} breads`,rounded:"",color:"brown"},null,8,["onClick","label"])]),_:2},1032,["props"])]),"body-cell-ingredient_groups":t(B=>[e(G,{props:B},{default:t(()=>[e(I,{"no-caps":"",onClick:O=>n(B.row),label:`${B.row.ingredient_groups.length} ingredients`,rounded:"",color:"purple"},null,8,["onClick","label"])]),_:2},1032,["props"])]),"body-cell-action":t(B=>[e(G,{props:B},{default:t(()=>[a("div",Oi,[e(ki,{delete:B},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var ji=Z(Mi,[["__scopeId","data-v-d5197c2e"]]);const Hi={__name:"RecipePage",setup(d){return(y,V)=>(k(),A("div",null,[e(ji)]))}},Qi=a("div",{class:"text-h6"},"Create Branch Premix",-1),Ei={key:0,class:"custom-list z-top"},Ki={class:"q-mb-sm"},Yi=a("div",null,"Recipe Name",-1),Gi={class:"q-mb-lg"},Wi=a("div",null,"Category",-1),Ji=a("div",null,"Quantity",-1),Xi={__name:"PremixCreate",setup(d){const V=we().params.branch_id,S=et(),v=T(()=>S.branchRecipe),w=gt();T(()=>w.premixes);const P=U(!1),u=()=>{P.value=!0},_=U(""),m=async()=>{S.searchBranchRecipe(_.value,V),console.log("searchQuery.value",_.value),console.log("branchId",V)},r=T(()=>R.available_stocks!==0),h=f=>f?f.split(" ").map(b=>b.charAt(0).toUpperCase()+b.slice(1).toLowerCase()).join(" "):"",c=f=>{R.branch_recipe_id=f.id,R.name=f.name,R.category=f.category,_.value=""},R=Ie({branch_recipe_id:"",name:"",category:"",available_stocks:"",branch_id:V,status:"active"}),C=async()=>{console.log(R),await w.savePremix(R)};return(f,b)=>(k(),A("div",null,[e(I,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Premix",onClick:u}),e(X,{modelValue:P.value,"onUpdate:modelValue":b[4]||(b[4]=p=>P.value=p),persistent:""},{default:t(()=>[e(M,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(N,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[Qi,e(Pe),se(e(I,{icon:"close",flat:"",dense:"",round:""},null,512),[[re]])]),_:1}),e(N,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[e(D,{modelValue:_.value,"onUpdate:modelValue":[b[0]||(b[0]=p=>_.value=p),m],debounce:"1000",outlined:"",rounded:"",placeholder:"Search product",dense:""},{append:t(()=>[a("div",null,[e(te,{name:"search"})])]),default:t(()=>[_.value?(k(),A("div",Ei,[e(M,null,{default:t(()=>[e(Se,{separator:""},{default:t(()=>{var p;return[(p=v.value)!=null&&p.length?(k(!0),A(K,{key:1},ge(v.value,i=>(k(),F(le,{onClick:g=>c(i),key:i.id,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q($(h(i==null?void 0:i.name)),1)]),_:2},1024)]),_:2},1024),e(Y,null,{default:t(()=>[e(W,{side:""},{default:t(()=>[q($(i==null?void 0:i.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(k(),F(le,{key:0},{default:t(()=>[q(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ae("",!0)]),_:1},8,["modelValue"]),a("div",Ki,[Yi,e(D,{modelValue:R.name,"onUpdate:modelValue":b[1]||(b[1]=p=>R.name=p),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",Gi,[Wi,e(D,{modelValue:R.category,"onUpdate:modelValue":b[2]||(b[2]=p=>R.category=p),readonly:"",dense:"",outlined:""},null,8,["modelValue"])])]),_:1}),e(N,null,{default:t(()=>[a("div",null,[Ji,e(D,{modelValue:R.available_stocks,"onUpdate:modelValue":b[3]||(b[3]=p=>R.available_stocks=p),dense:"",outlined:"",type:"number",suffix:"kg/s"},null,8,["modelValue"])])]),_:1}),e(Be,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(I,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:f.dismiss},null,8,["onClick"]),e(I,{class:"glossy",color:"teal",label:"Create",onClick:C,disable:!r.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},Zi={class:"row justify-between"},eu={class:"q-my-sm"},tu={__name:"PremixTable",setup(d){const y=gt(),V=T(()=>y.premixes),v=we().params.branch_id,w=U(!1),P=U("");U(!1);const u=U({rowsPerPage:0}),_=T(()=>P.value?V.value.filter(h=>h.name.toLowerCase().includes(P.value.toLowerCase())):V.value);Ne(async()=>{v&&await m(v)});const m=async h=>{try{w.value=!0;const c=await y.fetchBranchPremix(h);V.value=c,console.log("premix branch fetch data",V.value)}catch(c){console.log(c)}finally{w.value=!1}},r=[{name:"name",label:"Premix Name",align:"center",field:h=>h.name},{name:"available_stocks",label:"Available Stocks",align:"center",field:"available_stocks"},{name:"status",label:"Status",align:"center",field:"status"}];return(h,c)=>(k(),A(K,null,[a("div",Zi,[a("div",null,[e(D,{class:"q-pb-lg q-pl-md",modelValue:P.value,"onUpdate:modelValue":c[0]||(c[0]=R=>P.value=R),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"1500px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(te,{name:"search"})]),_:1},8,["modelValue"])]),a("div",eu,[e(Xi)])]),a("div",null,[e($e,{class:"table-container sticky-header",filter:P.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:r,rows:_.value,"row-key":"name","virtual-scroll":"",pagination:u.value,"onUpdate:pagination":c[1]||(c[1]=R=>u.value=R),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"}},null,8,["filter","rows","pagination"])])],64))}},au={__name:"PremixPage",setup(d){return(y,V)=>(k(),A("div",null,[e(tu)]))}};const ou={class:"elegant-container q-gutter-md"},lu={class:"text-h6 row justify-between"},nu={class:"q-gutter-sm"},su={class:"tab-container"},ru={__name:"BranchIdPage",setup(d){const y=we(),V=U(""),S=Vt(),v=async m=>(await ee.get(`/api/branches/${m}`)).data,w=async()=>{const m=y.params.branch_id,r=await v(m);r&&r.name?V.value=r.name:console.error("Branch data is missing 'name' property or invalid:",r)};Ne(()=>{w()});const P=m=>m?m.split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join(" "):"",u=U("products"),_=()=>{De.show(),S.push("/admin/branches").finally(()=>{De.hide()})};return(m,r)=>(k(),F(Ct,{padding:""},{default:t(()=>[a("div",ou,[a("div",lu,[a("div",null,[e(I,{outline:"",flat:"",icon:"arrow_back",onClick:_}),e(Pe)]),a("div",null,[e(te,{name:"fa-solid fa-store",color:"red-6"}),q(" "+$(P(V.value)),1)])]),a("div",nu,[a("div",su,[e(Ye,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=h=>u.value=h),dense:"",class:"bg-grey-2 text-grey-7 tabs-as-cards","active-color":"red-6","indicator-color":"transparent",align:"justify"},{default:t(()=>[e(ke,{name:"products",label:"Products"}),e(ke,{name:"rawMaterials",label:"Raw Materials"}),e(ke,{name:"recipe",label:"Recipe"}),e(ke,{name:"premix",label:"Premix"}),e(ke,{name:"production",label:"Production"}),e(ke,{name:"transaction",label:"Transactions"})]),_:1},8,["modelValue"])]),e(M,{class:"q-mt-sm"},{default:t(()=>[e(Ge,{modelValue:u.value,"onUpdate:modelValue":r[1]||(r[1]=h=>u.value=h),animated:""},{default:t(()=>[e(xe,{name:"products"},{default:t(()=>[e(aa)]),_:1}),e(xe,{name:"rawMaterials"},{default:t(()=>[e(Ra)]),_:1}),e(xe,{name:"recipe"},{default:t(()=>[e(Hi)]),_:1}),e(xe,{name:"premix"},{default:t(()=>[e(au)]),_:1}),e(xe,{name:"production"},{default:t(()=>[e($s)]),_:1}),e(xe,{name:"transaction"},{default:t(()=>[e(ei)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1}))}};var Gu=Z(ru,[["__scopeId","data-v-d5e8a05e"]]);export{Gu as default};
