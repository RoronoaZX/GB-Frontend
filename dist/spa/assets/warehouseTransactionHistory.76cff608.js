import{c as T,r as S,o as _,a3 as q,f as e,w as t,Q as U,I as R,J as a,$ as o,M as j,a0 as d,be as K,a2 as Z,K as he,aJ as xe,ae as fe,a4 as F,N as ne,O as G,R as W,z as ce,L as ee,e as A,a5 as H,a1 as oe,bc as pe,bJ as Le}from"./index.4dee972f.js";import{Q as se}from"./QTab.14a905c7.js";import{Q as Pe}from"./QTabs.3c7abc4c.js";import{Q as le}from"./QTabPanel.ec931824.js";import{Q as Ne}from"./QTabPanels.c2c54d58.js";import{Q as de}from"./QSpinnerDots.946b71b6.js";import{Q as Y}from"./QBadge.1ef0508f.js";import{Q as me}from"./QScrollArea.0931b6b5.js";import{u as E}from"./warehouse.dd72124d.js";import{u as te}from"./premix.f77cbe58.js";import{q as re}from"./date.db82a6e6.js";import{u as ue}from"./use-quasar.156bcf27.js";import{a as g}from"./QSelect.fa297e11.js";import{a as z,b as v}from"./QMenu.cc28e3f5.js";import{Q as B}from"./QList.10eca19b.js";import{C as ge}from"./ClosePopup.4d75ceed.js";import{u as ie}from"./use-dialog-plugin-component.fccb4480.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as Se}from"./QPagination.4ab2f72b.js";import{Q as Ie,a as Fe}from"./QTable.7b789916.js";import{u as ye}from"./stock-delivery.86091251.js";import{u as Me}from"./user.4d6a484a.js";import"./QResizeObserver.44cda3bd.js";import"./rtl.276c3f1b.js";import"./use-panel.d667f054.js";import"./touch.9135741d.js";import"./selection.1daf8a21.js";import"./use-render-cache.3aae9b27.js";import"./QScrollObserver.11002095.js";import"./TouchPan.72ddd35a.js";import"./axios.b9b62565.js";import"./QChip.da6eaa54.js";import"./use-virtual-scroll.8edefa0b.js";import"./position-engine.bd4e6659.js";import"./QVirtualScroll.f87b62ae.js";const Qe=l=>(G("data-v-a39c1e44"),l=l(),W(),l),Ye={class:"row justify-between"},He={class:"text-h6"},Be=Qe(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),Oe=Qe(()=>a("div",{class:"text-h6"},"Decline Report",-1)),Ke={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){const{dialogRef:D,onDialogHide:I,onDialogOK:$,onDialogCancel:w}=ie(),p=E(),C=T(()=>p.user);console.log("userdata",C.value);const k=C.value.data.employee_id,P=te(),y=l;console.log("report",y.report);const x=S(!1),h=S(""),V=S(!1),N=()=>{V.value=!0},f=c=>{const r=b=>b?b.charAt(0).toUpperCase()+b.slice(1).toLowerCase():"",n=c.firstname?r(c.firstname):"No Firstname",i=c.middlename?r(c.middlename).charAt(0)+".":"",m=c.lastname?r(c.lastname):"No Lastname";return`${n} ${i} ${m}`},s=async()=>{try{const c={id:y.report.id,request_premixes_id:y.report.id,branch_premix_id:y.report.branch_premix_id,employee_id:k,status:y.report.status,quantity:y.report.quantity,warehouse_id:y.report.warehouse_id,notes:"Confirmed Premix"},r=await P.confirmPremix(c);console.log("Report confirmedss:",r),ne.create({type:"positive",message:"Report confirmed successfully"}),x.value=!1}catch(c){console.error(c)}},u=async()=>{const c={id:y.report.id,request_premixes_id:y.report.id,branch_premix_id:y.report.branch_premix_id,employee_id:k,status:"decline",quantity:y.report.quantity,warehouse_id:y.report.warehouse_id,notes:h.value};await P.declinePremix(c),V.value=!1};return(c,r)=>(_(),q(F,null,[e(Z,{ref_key:"dialogRef",ref:D,modelValue:x.value,"onUpdate:modelValue":r[1]||(r[1]=n=>x.value=n),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",Ye,[a("div",He,o(l.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:r[0]||(r[0]=n=>x.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[a("div",null,"Baker: "+o(f(l.report.employee)),1),a("div",null," Branch: "+o(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[d(" Status: "),e(Y,{color:"warning",outlined:""},{default:t(()=>[d(o(l.report.status),1)]),_:1})])]),_:1}),e(R,null,{default:t(()=>[Be]),_:1}),e(R,null,{default:t(()=>[e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(o(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(o(l.report.quantity),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(R,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(j,{color:"negative",label:"Decline",class:"action-btn",onClick:N}),e(j,{color:"positive",label:"Confirm",class:"action-btn",onClick:s})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]),e(Z,{modelValue:V.value,"onUpdate:modelValue":r[3]||(r[3]=n=>V.value=n)},{default:t(()=>[e(U,null,{default:t(()=>[e(R,null,{default:t(()=>[Oe]),_:1}),e(R,null,{default:t(()=>[e(he,{modelValue:h.value,"onUpdate:modelValue":r[2]||(r[2]=n=>h.value=n),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[n=>!!n||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(xe,{align:"right"},{default:t(()=>[fe(e(j,{flat:"",label:"Cancel",color:"primary"},null,512),[[ge]]),e(j,{flat:"",label:"Confirm",color:"negative",onClick:u})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ee=O(Ke,[["__scopeId","data-v-a39c1e44"]]);const Re=l=>(G("data-v-292fa318"),l=l(),W(),l),Ge={key:0,class:"spinner-wrapper"},We={key:1,class:"q-mt-xl"},Je={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},Xe=Re(()=>a("div",{class:"text-h6 text-grey-7 q-mt-sm"},o("No Premixes available."),-1)),Ze=Re(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},o("Check again later."),-1)),et={class:"q-gutter-md q-ma-md"},tt={class:"row items-start justify-between"},at={class:"col-8 column q-gutter-y-xs"},st={class:"text-body1 text-weight-bold text-primary-dark"},lt={class:"text-caption text-grey-6 text-weight-meduim"},ot={class:"col-4 column items-end q-gutter-y-xs"},nt={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},rt={class:"row justify-between items-end"},it={class:"column q-gutter-y-xs"},ct=Re(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),dt={class:"text-body2 text-weight-semibold text-grey-9"},ut={__name:"PendingPage",setup(l){const D=E(),I=T(()=>D.user);console.log("userdata",I.value);const $=te(),w=T(()=>$.pendingPremixData),p=I.value.device.reference_id;console.log("warehouseId",p);const C=S("pending"),k=S(!0),P=S(!1),y=ue();ce(async()=>{p&&await N()});const x=s=>re.formatDate(s,"MMM DD, YYYY || hh:mm A"),h=s=>s?s.toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "):"",V=s=>{const u=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",c=s.firstname?u(s.firstname):"No Firstname",r=s.middlename?u(s.middlename).charAt(0)+".":"",n=s.lastname?u(s.lastname):"No Lastname";return`${c} ${r} ${n}`},N=async()=>{try{k.value=!0,await $.fetchPendingPremix(p,C.value),w.value.length||(P.value=!0)}catch{P.value=!0}finally{k.value=!1}},f=s=>{y.dialog({component:Ee,componentProps:{report:s}})};return(s,u)=>k.value?(_(),q("div",Ge,[e(de,{size:"50px",color:"primary"})])):(_(),q("div",We,[w.value.length===0?(_(),q("div",Je,[e(ee,{name:"search_off",size:"60px",color:"grey-6"}),Xe,Ze])):(_(),A(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",et,[(_(!0),q(F,null,H(w.value,(c,r)=>(_(),A(U,{key:r,onClick:n=>f(c),class:"pending-card elegant-card emphasized-card"},{default:t(()=>[e(R,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var n,i;return[a("div",tt,[a("div",at,[a("div",st," Premix: "+o(h(c.name)||"-"),1),a("div",lt,o(x(c.created_at)||"-"),1)]),a("div",ot,[a("div",null,[e(Y,{color:"warning",class:"text-weight-bold q-px-md q-py-sm pending-badge"},{default:t(()=>[d(" PENDING ")]),_:1})]),a("div",nt,o(((i=(n=c.branch_premix)==null?void 0:n.branch_recipe)==null?void 0:i.branch.name)||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",rt,[a("div",it,[ct,a("div",dt,o(V(c.employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var mt=O(ut,[["__scopeId","data-v-292fa318"]]);const _t={class:"row justify-between"},pt={class:"text-h6"},ft=a("div",{class:"text-h6",align:"center"},"Premix",-1),gt=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),vt={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var u,c,r;const{dialogRef:D,onDialogHide:I,onDialogOK:$,onDialogCancel:w}=ie(),p=S(!1),C=E(),k=T(()=>C.user);console.log("userdata",k.value);const P=k.value.data.employee_id,y=te(),x=l,h=n=>{const i=Number(n);return isNaN(i)?"":(i%1===0,i.toString())},V=(n,i)=>{if(i==="Pcs")return`${n} pcs`;if(i==="Grams"){if(n>=1e3){let m=n/1e3;return`${m%1===0?m.toString():m.toString().replace(/^0+/,"")} kgs`}return`${n} g`}return`${n} ${i}`},N=((r=(c=(u=x.report)==null?void 0:u.branch_premix)==null?void 0:c.branch_recipe)==null?void 0:r.ingredient_groups)||"Undefined";console.log("ingrdientsData",N),console.log("report to proceed",x.report);const f=n=>{const i=L=>L?L.charAt(0).toUpperCase()+L.slice(1).toLowerCase():"",m=n.firstname?i(n.firstname):"No Firstname",b=n.middlename?i(n.middlename).charAt(0)+".":"",Q=n.lastname?i(n.lastname):"No Lastname";return`${m} ${b} ${Q}`},s=async()=>{try{const n={id:x.report.id,request_premixes_id:x.report.id,branch_premix_id:x.report.branch_premix_id,employee_id:P,status:"process",quantity:x.report.quantity,warehouse_id:x.report.warehouse_id,notes:"Process Premix"},i=await y.processPremix(n);console.log("Report Process:",i),ne.create({type:"positive",message:"Premix proceed to process successfully"}),p.value=!1}catch(n){console.error(n)}};return(n,i)=>(_(),A(Z,{ref_key:"dialogRef",ref:D,modelValue:p.value,"onUpdate:modelValue":i[1]||(i[1]=m=>p.value=m),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",_t,[a("div",pt,o(l.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:i[0]||(i[0]=m=>p.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[a("div",null,"Baker: "+o(f(l.report.employee)),1),a("div",null," Branch: "+o(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[d(" Status: "),e(Y,{color:"green",outlined:""},{default:t(()=>[d(o(l.report.status),1)]),_:1})])]),_:1}),e(R,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[ft,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(o(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(o(h(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[gt,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(_(!0),q(F,null,H(K(N),(m,b)=>(_(),A(z,{key:b},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(o(m.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[d(o(m.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(o(V(m.quantity*l.report.quantity,m.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(R,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[fe(e(j,{flat:"",label:"Cancel",color:"negative"},null,512),[[ge]]),e(j,{color:"primary",label:"Process",class:"action-btn",onClick:s})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const be=l=>(G("data-v-33fd577a"),l=l(),W(),l),ht={key:0,class:"spinner-wrapper"},xt={key:1,class:"q-mt-xl"},yt={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},bt=be(()=>a("div",{class:"text-h6 text-grey-7 q-mt-sm"},o("No Premixes available."),-1)),$t=be(()=>a("div",{class:"text-body1 text-grey-7 q-mt-sm"},o("Check again later."),-1)),wt={class:"q-gutter-md q-ma-md"},kt={class:"row items-start justify-between"},qt={class:"col-8 column q-gutter-y-xs"},Dt={class:"text-body1 text-weight-bold text-primary-dark"},Ct={class:"text-caption text-grey-6 text-weight-medium"},Pt={class:"col-4 column items-end q-gutter-y-xs"},Nt={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},St={class:"row justify-between items-end"},Rt={class:"column q-gutter-y-xs"},Vt=be(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),It={class:"text-body2 text-weight-semibold text-grey-9"},Qt={class:"col-5 column"},At=be(()=>a("div",{class:"text-caption text-grey-7"},"Confirmed by:",-1)),Tt={class:"text-body2 text-weight-semibold text-grey-9"},zt={__name:"ConfirmPage",setup(l){const D=E(),$=T(()=>D.user).value.device.reference_id;console.log("warehouseId",$);const w=te(),p=T(()=>w.confirmPremixData);console.log("confirmedPremixData",p.value);const C=S("confirmed"),k=S(!0),P=S(!1),y=ue();ce(async()=>{$&&await N()});const x=s=>s?s.toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "):"",h=s=>re.formatDate(s,"MMM DD, YYYY || hh:mm A"),V=s=>{const u=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",c=s.firstname?u(s.firstname):"No Firstname",r=s.middlename?u(s.middlename).charAt(0)+".":"",n=s.lastname?u(s.lastname):"No Lastname";return`${c} ${r} ${n}`},N=async()=>{try{k.value=!0,await w.fetchConfirmPremix($,C.value),p.value.length||(P.value=!0)}catch{P.value=!0}finally{k.value=!1}},f=s=>{y.dialog({component:vt,componentProps:{report:s}})};return(s,u)=>k.value?(_(),q("div",ht,[e(de,{size:"50px",color:"primary"})])):(_(),q("div",xt,[p.value.length===0?(_(),q("div",yt,[e(ee,{name:"warning",color:"grey-6",size:"60px"}),bt,$t])):(_(),A(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",wt,[(_(!0),q(F,null,H(p.value,(c,r)=>(_(),A(U,{key:r,onClick:n=>f(c),class:"elegant-card emphasized-card"},{default:t(()=>[e(R,{class:"q-gutter-sm enhanced-card-section"},{default:t(()=>{var n,i,m;return[a("div",kt,[a("div",qt,[a("div",Dt," Premix: "+o(x(c.name)||"-"),1),a("div",Ct,o(h(c.created_at)||"-"),1)]),a("div",Pt,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm confirmed-badge"},{default:t(()=>[d(" CONFIRMED ")]),_:1})]),a("div",Nt,o(((m=(i=(n=c.branch_premix)==null?void 0:n.branch_recipe)==null?void 0:i.branch)==null?void 0:m.name)||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",St,[a("div",Rt,[Vt,a("div",It,o(V(c.employee)||"-"),1)]),a("div",Qt,[At,a("div",Tt,o(V(c.history[0].employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var jt=O(zt,[["__scopeId","data-v-33fd577a"]]);const Ut={class:"row justify-between"},Lt={class:"text-h6"},Ft=a("div",{class:"text-h6",align:"center"},"Premix",-1),Mt=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),Yt={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var h,V,N;const{dialogRef:D,onDialogHide:I,onDialogOK:$,onDialogCancel:w}=ie(),p=S(!1),C=l,k=f=>{const s=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",u=f.firstname?s(f.firstname):"No Firstname",c=f.middlename?s(f.middlename).charAt(0)+".":"",r=f.lastname?s(f.lastname):"No Lastname";return`${u} ${c} ${r}`},P=f=>{const s=Number(f);return isNaN(s)?"":(s%1===0,s.toString())},y=(f,s)=>{if(s==="Pcs")return`${f} pcs`;if(s==="Grams"){if(f>=1e3){let u=f/1e3;return`${u%1===0?u.toString():u.toString().replace(/^0+/,"")} kgs`}return`${f} g`}return`${f} ${s}`},x=((N=(V=(h=C.report)==null?void 0:h.branch_premix)==null?void 0:V.branch_recipe)==null?void 0:N.ingredient_groups)||"Undefined";return console.log("ingrdientsData",x),(f,s)=>(_(),q("div",null,[e(Z,{ref_key:"dialogRef",ref:D,modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=u=>p.value=u),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",Ut,[a("div",Lt,o(l.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:s[0]||(s[0]=u=>p.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[a("div",null,"Baker: "+o(k(l.report.employee)),1),a("div",null," Branch: "+o(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[d(" Status: "),e(Y,{color:"red-6",outlined:""},{default:t(()=>[d(o(l.report.status),1)]),_:1})])]),_:1}),e(R,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[Ft,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(o(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(o(P(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[Mt,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(_(!0),q(F,null,H(K(x),(u,c)=>(_(),A(z,{key:c},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(o(u.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[d(o(u.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(o(y(u.quantity*l.report.quantity,u.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])]))}};const $e=l=>(G("data-v-72783351"),l=l(),W(),l),Ht={key:0,class:"spinner-wrapper"},Bt={key:1},Ot={key:0,class:"column items-center text-center q-pa-lg no-data-message"},Kt=$e(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},o("No Premixes available."),-1)),Et=$e(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},o("Check again later."),-1)),Gt={class:"q-gutter-md q-ma-md"},Wt={class:"row items-start justify-between"},Jt={class:"col-8 column q-gutter-y-xs"},Xt={class:"text-body1 text-weight-bold text-primary-dark"},Zt={class:"text-caption text-grey-6 text-weight-medium"},ea={class:"col-4 column items-end q-gutter-y-xs"},ta={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},aa={class:"row items-end justify-between"},sa={class:"column q-gutter-y-xs"},la=$e(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),oa={class:"text-body2 text-weight-semibold text-grey-9"},na={class:"col-5 column"},ra=$e(()=>a("div",{class:"text-caption text-grey-7"},"Declined By:",-1)),ia={class:"text-body2 text-weight-semibold text-grey-9"},ca={key:2,class:"q-pt-lg flex flex-center"},da={__name:"DeclinePage",setup(l){const D=E(),$=T(()=>D.user).value.device.reference_id;console.log("warehouseId",$);const w=te(),p=T(()=>w.declinePremixData);console.log("declinedPremixData",p.value);const C=S("declined"),k=S(!0),P=S(!1),y=ue(),x=S(""),h=T(()=>{var r;return((r=w.declinePremixData)==null?void 0:r.pagination)||{current_page:1,last_page:1,per_page:3}});console.log("pagination",h.value);const V=r=>re.formatDate(r,"MMM DD, YYYY || hh:mm A"),N=r=>r?r.toLowerCase().split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"",f=r=>{const n=Q=>Q?Q.charAt(0).toUpperCase()+Q.slice(1).toLowerCase():"",i=r.firstname?n(r.firstname):"No Firstname",m=r.middlename?n(r.middlename).charAt(0)+".":"",b=r.lastname?n(r.lastname):"No Lastname";return`${i} ${m} ${b}`},s=async(r=1)=>{try{k.value=!0,await w.fetchDeclinePremix($,C.value,h.value.current_page,h.value.per_page,x.value),p.value.length||(P.value=!0),console.log("declinedPremixData",p.value)}catch{P.value=!0}finally{k.value=!1}};ce(async()=>{$&&await s($,C.value,h.value.current_page)});const u=async()=>{s($,C.value,h.value.current_page)},c=r=>{y.dialog({component:Yt,componentProps:{report:r}})};return(r,n)=>(_(),q(F,null,[a("div",null,[e(he,{outlined:"",dense:"",placeholder:"Search declined delivery",class:"q-mb-md","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6"},{prepend:t(()=>[e(ee,{name:"search",color:"grey-6"})]),_:1})]),k.value?(_(),q("div",Ht,[e(de,{size:"50px",color:"primary"})])):(_(),q("div",Bt,[p.value.length===0?(_(),q("div",Ot,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),Kt,Et])):(_(),A(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Gt,[(_(!0),q(F,null,H(p.value.data,(i,m)=>(_(),A(U,{key:m,onClick:b=>c(i),class:"elegant-card emphasized-card"},{default:t(()=>[e(R,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",Wt,[a("div",Jt,[a("div",Xt," Premix: "+o(N(i.name)||"-"),1),a("div",Zt,o(V(i.created_at)),1)]),a("div",ea,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm declined-badge text-uppercase"},{default:t(()=>[d(o(i.status),1)]),_:2},1024)]),a("div",ta,o(i.branch_premix.branch_recipe.branch.name||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",aa,[a("div",sa,[la,a("div",oa,o(f(i.employee)||"-"),1)]),a("div",na,[ra,a("div",ia,o(f(i.history[0].employee)||"-"),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))])),h.value.last_page>1?(_(),q("div",ca,[e(Se,{modelValue:h.value.current_page,"onUpdate:modelValue":[n[0]||(n[0]=i=>h.value.current_page=i),u],max:h.value.last_page,"max-pages":3,"boundary-links":"","direction-links":"","icon-first":"first_page","icon-last":"last_page","icon-prev":"chevron_left","icon-next":"chevron_right",color:"primary","active-color":"white","active-text-color":"primary",class:"elegant-pagination"},null,8,["modelValue","max"])])):pe("",!0)],64))}};var ua=O(da,[["__scopeId","data-v-72783351"]]);const ma={class:"row justify-between"},_a={class:"text-h6"},pa=a("div",{class:"text-h6",align:"center"},"Premix",-1),fa=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),ga={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var c,r,n;const{dialogRef:D,onDialogHide:I,onDialogOK:$,onDialogCancel:w}=ie(),p=E(),C=T(()=>p.user);console.log("userdata",C.value);const k=C.value.data.employee_id,P=te(),y=l;console.log("report",y.report);const x=S(!1),h=((n=(r=(c=y.report)==null?void 0:c.branch_premix)==null?void 0:r.branch_recipe)==null?void 0:n.ingredient_groups)||"Undefined";console.log("ingrdientsData",h);const V=i=>{const m=J=>J?J.charAt(0).toUpperCase()+J.slice(1).toLowerCase():"",b=i.firstname?m(i.firstname):"No Firstname",Q=i.middlename?m(i.middlename).charAt(0)+".":"",L=i.lastname?m(i.lastname):"No Lastname";return`${b} ${Q} ${L}`},N=i=>{const m=Number(i);return isNaN(m)?"":(m%1===0,m.toString())},f=(i,m)=>{if(m==="Pcs")return`${i} pcs`;if(m==="Grams"){if(i>=1e3){let b=i/1e3;return`${b%1===0?b.toString():b.toString().replace(/^0+/,"")} kgs`}return`${i} g`}return`${i} ${m}`},s=T(()=>h.map(i=>{const m=parseFloat(i.quantity)*parseFloat(y.report.quantity);return{...i,totalQuantity:m,formattedQuantity:f(m,i.ingredient.unit)}}));console.log("computedIngredients",s.value);const u=async()=>{try{const i={id:y.report.id,request_premixes_id:y.report.id,branch_premix_id:y.report.branch_premix_id,employee_id:k,status:"completed",quantity:y.report.quantity,warehouse_id:y.report.warehouse_id,notes:"Completed Premix",ingredients:s.value.map(b=>({ingredient_id:b.ingredient.id,quantity:b.totalQuantity,unit:b.ingredient.unit}))},m=await P.completedPremix(i);console.log("Report Process:",m),ne.create({type:"positive",message:"Premix completed to process successfully"}),x.value=!1}catch(i){console.error(i),ne.create({type:"negative",message:"An error occurred while processing the premix."})}};return(i,m)=>(_(),A(Z,{ref_key:"dialogRef",ref:D,modelValue:x.value,"onUpdate:modelValue":m[1]||(m[1]=b=>x.value=b),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",ma,[a("div",_a,o(l.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:m[0]||(m[0]=b=>x.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[a("div",null,"Baker: "+o(V(l.report.employee)),1),a("div",null," Branch: "+o(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[d(" Status: "),e(Y,{color:"primary",outlined:""},{default:t(()=>[d(o(l.report.status),1)]),_:1})])]),_:1}),e(R,null,{default:t(()=>[pa]),_:1}),e(R,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(o(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(o(N(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[a("div",null,[fa,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(_(!0),q(F,null,H(s.value,(b,Q)=>(_(),A(z,{key:Q},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(o(b.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[d(o(b.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(o(f(b.quantity*y.report.quantity,b.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1}),e(R,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[fe(e(j,{flat:"",label:"Cancel",color:"primary"},null,512),[[ge]]),e(j,{color:"cyan-7",label:"Completed",class:"action-btn",onClick:u})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const we=l=>(G("data-v-7316aad8"),l=l(),W(),l),va={key:0,class:"spinner-wrapper"},ha={key:1},xa={key:0,class:"column items-center text-center q-pa-lg no-data-message"},ya=we(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},o("No Premixes available."),-1)),ba=we(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},o("Check again later."),-1)),$a={class:"q-gutter-md q-ma-md"},wa={class:"row items-start justify-between"},ka={class:"col-8 column q-gutter-y-xs"},qa={class:"text-body1 text-weight-bold text-primary-dark"},Da={class:"text-caption text-grey-6 text-weight-dark"},Ca={class:"col-4 column items-end q-gutter-y-xs"},Pa={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Na={class:"row items-end justify-between"},Sa={class:"column q-gutter-y-xs"},Ra=we(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),Va={class:"text-body2 text-weight-semibold text-grey-9"},Ia={class:"col-5 column"},Qa=we(()=>a("div",{class:"text-caption text-grey-7"},"Scaler:",-1)),Aa={class:"text-body2 text-weight-semibold text-grey-9"},Ta={__name:"ProcessPage",setup(l){const D=E(),$=T(()=>D.user).value.device.reference_id;console.log("warehouseId",$);const w=te(),p=T(()=>w.processPremixData);console.log("processPremixData",p.value);const C=S("process"),k=S(!0),P=S(!1),y=ue();ce(async()=>{$&&await N()});const x=s=>re.formatDate(s,"MMM DD, YYYY || hh:mm A"),h=s=>s?s.toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "):"",V=s=>{const u=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",c=s.firstname?u(s.firstname):"No Firstname",r=s.middlename?u(s.middlename).charAt(0)+".":"",n=s.lastname?u(s.lastname):"No Lastname";return`${c} ${r} ${n}`},N=async()=>{try{k.value=!0,await w.fetchProcessPremix($,C.value),p.value.length||(P.value=!0)}catch{P.value=!0}finally{k.value=!1}},f=s=>{y.dialog({component:ga,componentProps:{report:s}})};return(s,u)=>k.value?(_(),q("div",va,[e(de,{size:"50px",color:"primary"})])):(_(),q("div",ha,[p.value.length===0?(_(),q("div",xa,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),ya,ba])):(_(),A(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",$a,[(_(!0),q(F,null,H(p.value,(c,r)=>(_(),A(U,{key:r,onClick:n=>f(c),class:"elegant-card emphasized-card"},{default:t(()=>[e(R,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var n,i,m;return[a("div",wa,[a("div",ka,[a("div",qa," Premix: "+o(h(c.name)||"-"),1),a("div",Da,o(x(c.created_at)||"-"),1)]),a("div",Ca,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm process-badge text-uppercase"},{default:t(()=>[d(o(c.status),1)]),_:2},1024)]),a("div",Pa,o(((m=(i=(n=c.branch_premix)==null?void 0:n.branch_recipe)==null?void 0:i.branch)==null?void 0:m.name)||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",Na,[a("div",Sa,[Ra,a("div",Va,o(V(c.employee)||"-"),1)]),a("div",Ia,[Qa,a("div",Aa,o(V(c.history[0].employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var za=O(Ta,[["__scopeId","data-v-7316aad8"]]);const ja={class:"row justify-between"},Ua={class:"text-h6"},La=a("div",{class:"text-h6",align:"center"},"Premix",-1),Fa=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),Ma={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var u,c,r;const{dialogRef:D,onDialogHide:I,onDialogOK:$,onDialogCancel:w}=ie(),p=S(!1),C=E(),k=T(()=>C.user);console.log("userdata",k.value);const P=k.value.data.employee_id,y=te(),x=l,h=n=>{const i=Number(n);return isNaN(i)?"":(i%1===0,i.toString())},V=(n,i)=>{if(i==="Pcs")return`${n} pcs`;if(i==="Grams"){if(n>=1e3){let m=n/1e3;return`${m%1===0?m.toString():m.toString().replace(/^0+/,"")} kgs`}return`${n} g`}return`${n} ${i}`},N=((r=(c=(u=x.report)==null?void 0:u.branch_premix)==null?void 0:c.branch_recipe)==null?void 0:r.ingredient_groups)||"Undefined";console.log("ingrdientsData",N),console.log("report to proceed",x.report);const f=n=>{const i=L=>L?L.charAt(0).toUpperCase()+L.slice(1).toLowerCase():"",m=n.firstname?i(n.firstname):"No Firstname",b=n.middlename?i(n.middlename).charAt(0)+".":"",Q=n.lastname?i(n.lastname):"No Lastname";return`${m} ${b} ${Q}`},s=async()=>{try{const n={id:x.report.id,request_premixes_id:x.report.id,branch_premix_id:x.report.branch_premix_id,employee_id:P,status:"to deliver",quantity:x.report.quantity,warehouse_id:x.report.warehouse_id,notes:"To-Deliver Premix"},i=await y.toDeliverPremix(n);console.log("Report To Deliver:",i),ne.create({type:"positive",message:"Premix To Deliver to process successfully"}),p.value=!1}catch(n){console.error(n)}};return(n,i)=>(_(),q("div",null,[e(Z,{ref_key:"dialogRef",ref:D,modelValue:p.value,"onUpdate:modelValue":i[1]||(i[1]=m=>p.value=m),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",ja,[a("div",Ua,o(l.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:i[0]||(i[0]=m=>p.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[a("div",null,"Baker: "+o(f(l.report.employee)),1),a("div",null," Branch: "+o(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[d(" Status: "),e(Y,{color:"black",outlined:""},{default:t(()=>[d(o(l.report.status),1)]),_:1})])]),_:1}),e(R,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[La,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(o(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(o(h(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[Fa,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(_(!0),q(F,null,H(K(N),(m,b)=>(_(),A(z,{key:b},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(o(m.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[d(o(m.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(o(V(m.quantity*l.report.quantity,m.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(R,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[fe(e(j,{flat:"",label:"Cancel",color:"negative"},null,512),[[ge]]),e(j,{color:"dark",label:"TO-Deliver",class:"action-btn",onClick:s})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])]))}};const ke=l=>(G("data-v-22a17292"),l=l(),W(),l),Ya={key:0,class:"spinner-wrapper"},Ha={key:1},Ba={key:0,class:"column items-center text-center q-pa-lg no-data-message"},Oa=ke(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},o("No Premixes available."),-1)),Ka=ke(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},o("Check again later."),-1)),Ea={class:"q-gutter-md q-ma-md"},Ga={class:"row items-start justify-between"},Wa={class:"col-8 column q-gutter-y-xs"},Ja={class:"text-body1 text-weight-bold text-primary-dark"},Xa={class:"text-caption text-grey-6 text-weight-dark"},Za={class:"col-4 column items-end q-gutter-y-xs"},es={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},ts={class:"row items-end justify-between"},as={class:"column q-gutter-y-xs"},ss=ke(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),ls={class:"text-body2 text-weight-semibold text-grey-9"},os={class:"col-5 column"},ns=ke(()=>a("div",{class:"text-caption text-grey-7"},"Scaler:",-1)),rs={class:"text-body2 text-weight-semibold text-grey-9"},is={__name:"CompletedPage",setup(l){const D=E(),$=T(()=>D.user).value.device.reference_id;console.log("warehouseId",$);const w=te(),p=T(()=>w.completedPremixData);console.log("completedPremixData",p.value);const C=S("completed"),k=S(!0),P=S(!1),y=ue();ce(async()=>{$&&await N()});const x=s=>re.formatDate(s,"MMM DD, YYYY || hh:mm A"),h=s=>s?s.toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "):"",V=s=>{const u=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",c=s.firstname?u(s.firstname):"No Firstname",r=s.middlename?u(s.middlename).charAt(0)+".":"",n=s.lastname?u(s.lastname):"No Lastname";return`${c} ${r} ${n}`},N=async()=>{try{k.value=!0,await w.fetchCompletedPremix($,C.value),p.value.length||(P.value=!0)}catch{P.value=!0}finally{k.value=!1}},f=s=>{y.dialog({component:Ma,componentProps:{report:s}})};return(s,u)=>k.value?(_(),q("div",Ya,[e(de,{size:"50px",color:"primary"})])):(_(),q("div",Ha,[p.value.length===0?(_(),q("div",Ba,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),Oa,Ka])):(_(),A(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Ea,[(_(!0),q(F,null,H(p.value,(c,r)=>(_(),A(U,{key:r,onClick:n=>f(c),class:"elegant-card emphasized-card"},{default:t(()=>[e(R,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",Ga,[a("div",Wa,[a("div",Ja," Premix: "+o(h(c.name)||"-"),1),a("div",Xa,o(x(c.created_at)||"-"),1)]),a("div",Za,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm completed-badge text-uppercase"},{default:t(()=>[d(o(c.status),1)]),_:2},1024)]),a("div",es,o(c.branch_premix.branch_recipe.branch.name||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",ts,[a("div",as,[ss,a("div",ls,o(V(c.employee)),1)]),a("div",os,[ns,a("div",rs,o(V(c.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var cs=O(is,[["__scopeId","data-v-22a17292"]]);const ds={class:"row justify-between"},us={class:"text-h6"},ms=a("div",{class:"text-h6",align:"center"},"Premix",-1),_s=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),ps={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var f,s,u;const{dialogRef:D,onDialogHide:I}=ie(),$=S(!1),w=E(),p=T(()=>w.user);console.log("userdata",p.value);const C=p.value.data.employee_id,k=te(),P=l;console.log("props report",P.report);const y=c=>{const r=Number(c);return isNaN(r)?"":(r%1===0,r.toString())},x=(c,r)=>{if(r==="Pcs")return`${c} pcs`;if(r==="Grams"){if(c>=1e3){let n=c/1e3;return`${n%1===0?n.toString():n.toString().replace(/^0+/,"")} kgs`}return`${c} g`}return`${c} ${r}`},h=((u=(s=(f=P.report)==null?void 0:f.branch_premix)==null?void 0:s.branch_recipe)==null?void 0:u.ingredient_groups)||"Undefined";console.log("ingrdientsData",h),console.log("report to proceed",P.report);const V=c=>{const r=b=>b?b.charAt(0).toUpperCase()+b.slice(1).toLowerCase():"",n=c.firstname?r(c.firstname):"No Firstname",i=c.middlename?r(c.middlename).charAt(0)+".":"",m=c.lastname?r(c.lastname):"No Lastname";return`${n} ${i} ${m}`},N=async()=>{try{const c={id:P.report.id,request_premixes_id:P.report.id,branch_premix_id:P.report.branch_premix_id,employee_id:C,status:"to receive",quantity:P.report.quantity,warehouse_id:P.report.warehouse_id,notes:"To Receive Premix"},r=await k.toReceivePremix(c);console.log("Report Process:",r),ne.create({type:"positive",message:"Premix to receive to process successfully"}),$.value=!1}catch(c){console.error(c)}};return(c,r)=>(_(),A(Z,{ref_key:"dialogRef",ref:D,modelValue:$.value,"onUpdate:modelValue":r[1]||(r[1]=n=>$.value=n),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",ds,[a("div",us,o(l.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:r[0]||(r[0]=n=>$.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[a("div",null,"Baker: "+o(V(l.report.employee)),1),a("div",null," Branch: "+o(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[d(" Status: "),e(Y,{color:"brown-9",outlined:""},{default:t(()=>[d(o(l.report.status),1)]),_:1})])]),_:1}),e(R,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[ms,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(o(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(o(y(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[_s,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(_(!0),q(F,null,H(K(h),(n,i)=>(_(),A(z,{key:i},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(o(n.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[d(o(n.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(o(x(n.quantity*l.report.quantity,n.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(R,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[fe(e(j,{flat:"",label:"Cancel",color:"negative"},null,512),[[ge]]),e(j,{color:"brown-9",label:"TO Receive",class:"action-btn",onClick:N})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const qe=l=>(G("data-v-60d056c6"),l=l(),W(),l),fs={key:0,class:"spinner-wrapper"},gs={key:1},vs={key:0,class:"column items-center text-center q-pa-lg no-data-message"},hs=qe(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},o("No Premixes available."),-1)),xs=qe(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},o("Check again later."),-1)),ys={class:"q-gutter-md q-ma-md"},bs={class:"row items-start justify-between"},$s={class:"col-8 column q-gutter-y-xs"},ws={class:"text-body1 text-weight-bold text-primary-dark"},ks={class:"text-caption text-grey-6 text-weight-dark"},qs={class:"col-4 column items-end q-gutter-y-xs"},Ds={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Cs={class:"row items-end justify-between"},Ps={class:"column q-gutter-y-xs"},Ns=qe(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),Ss={class:"text-body2 text-weight-semibold text-grey-9"},Rs={class:"col-5 column"},Vs=qe(()=>a("div",{class:"text-caption text-grey-7"},"Scaler:",-1)),Is={class:"text-body2 text-weight-semibold text-grey-9"},Qs={__name:"ToDeliverPage",setup(l){const D=E(),$=T(()=>D.user).value.device.reference_id;console.log("warehouseIssd",$);const w=te(),p=T(()=>w.toDeliverPremixData);console.log("toDeliverPremixData",p.value);const C=S("to deliver"),k=S(!0),P=S(!1),y=ue();ce(async()=>{$&&await V()});const x=f=>re.formatDate(f,"MMM DD, YYYY || hh:mm A"),h=f=>{const s=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",u=f.firstname?s(f.firstname):"No Firstname",c=f.middlename?s(f.middlename).charAt(0)+".":"",r=f.lastname?s(f.lastname):"No Lastname";return`${u} ${c} ${r}`},V=async()=>{try{k.value=!0,await w.fetchToDeliverPremix($,C.value),p.value.length||(P.value=!0)}catch{P.value=!0}finally{k.value=!1}},N=f=>{y.dialog({component:ps,componentProps:{report:f}})};return(f,s)=>k.value?(_(),q("div",fs,[e(de,{size:"50px",color:"primary"})])):(_(),q("div",gs,[p.value.length===0?(_(),q("div",vs,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),hs,xs])):(_(),A(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",ys,[(_(!0),q(F,null,H(p.value,(u,c)=>(_(),A(U,{key:c,onClick:r=>N(u),class:"elegant-card emphasized-card"},{default:t(()=>[e(R,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",bs,[a("div",$s,[a("div",ws," Premix: "+o(Le(u.name)||"-"),1),a("div",ks,o(x(u.created_at)||"-"),1)]),a("div",qs,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm to-deliver-badge text-uppercase"},{default:t(()=>[d(o(u.status),1)]),_:2},1024)]),a("div",Ds,o(u.branch_premix.branch_recipe.branch.name||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",Cs,[a("div",Ps,[Ns,a("div",Ss,o(h(u.employee)),1)]),a("div",Rs,[Vs,a("div",Is,o(h(u.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var As=O(Qs,[["__scopeId","data-v-60d056c6"]]);const Ts={class:"row justify-between"},zs={class:"text-h6"},js=a("div",{class:"text-h6",align:"center"},"Premix",-1),Us=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),Ls={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var h,V,N;const{dialogRef:D,onDialogHide:I}=ie(),$=S(!1),w=E(),p=T(()=>w.user);console.log("userdata",p.value),p.value.data.employee_id,te();const C=l,k=f=>{const s=Number(f);return isNaN(s)?"":(s%1===0,s.toString())},P=(f,s)=>{if(s==="Pcs")return`${f} pcs`;if(s==="Grams"){if(f>=1e3){let u=f/1e3;return`${u%1===0?u.toString():u.toString().replace(/^0+/,"")} kgs`}return`${f} g`}return`${f} ${s}`},y=((N=(V=(h=C.report)==null?void 0:h.branch_premix)==null?void 0:V.branch_recipe)==null?void 0:N.ingredient_groups)||"Undefined";console.log("ingrdientsData",y),console.log("report to proceed",C.report);const x=f=>{const s=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",u=f.firstname?s(f.firstname):"No Firstname",c=f.middlename?s(f.middlename).charAt(0)+".":"",r=f.lastname?s(f.lastname):"No Lastname";return`${u} ${c} ${r}`};return(f,s)=>(_(),A(Z,{ref_key:"dialogRef",ref:D,modelValue:$.value,"onUpdate:modelValue":s[1]||(s[1]=u=>$.value=u),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",Ts,[a("div",zs,o(l.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:s[0]||(s[0]=u=>$.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[a("div",null,"Baker: "+o(x(l.report.employee)),1),a("div",null," Branch: "+o(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[d(" Status: "),e(Y,{color:"amber-10",outlined:""},{default:t(()=>[d(o(l.report.status),1)]),_:1})])]),_:1}),e(R,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[js,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(o(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(o(k(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[Us,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(_(!0),q(F,null,H(K(y),(u,c)=>(_(),A(z,{key:c},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(o(u.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[d(o(u.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(o(P(u.quantity*l.report.quantity,u.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const De=l=>(G("data-v-3af211aa"),l=l(),W(),l),Fs={key:0,class:"spinner-wrapper"},Ms={key:1},Ys={key:0,class:"column items-center text-center q-pa-lg no-data-message"},Hs=De(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},o("No Premixes available."),-1)),Bs=De(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},o("Check again later."),-1)),Os={class:"q-gutter-md q-ma-md"},Ks={class:"row items-start justify-between"},Es={class:"col-8 column q-gutter-y-xs"},Gs={class:"text-body1 text-weight-bold text-primary-dark"},Ws={class:"text-caption text-grey-6 text-weight-medium"},Js={class:"col-4 column items-end q-gutter-y-xs"},Xs={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Zs={class:"row items-end justify-between"},el={class:"column q-gutter-y-xs"},tl=De(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),al={class:"text-body2 text-weight-semibold text-grey-9"},sl={class:"col-5 column"},ll=De(()=>a("div",{class:"text-caption text-grey-7"},"Scaler:",-1)),ol={class:"text-body2 text-weight-semibold text-grey-9"},nl={__name:"ToReceivePage",setup(l){const D=E(),$=T(()=>D.user).value.device.reference_id;console.log("warehouseId",$);const w=te(),p=T(()=>w.toReceivePremixData);console.log("toReceivePremixData",p.value);const C=S("process"),k=S(!0),P=S(!1),y=ue();ce(async()=>{$&&await N()});const x=s=>re.formatDate(s,"MMM DD, YYYY || hh:mm A"),h=s=>s?s.toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "):"",V=s=>{const u=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",c=s.firstname?u(s.firstname):"No Firstname",r=s.middlename?u(s.middlename).charAt(0)+".":"",n=s.lastname?u(s.lastname):"No Lastname";return`${c} ${r} ${n}`},N=async()=>{try{k.value=!0,await w.fetchToReceivePremix($,C.value),p.value.length||(P.value=!0)}catch{P.value=!0}finally{k.value=!1}},f=s=>{y.dialog({component:Ls,componentProps:{report:s}})};return(s,u)=>k.value?(_(),q("div",Fs,[e(de,{size:"50px",color:"primary"})])):(_(),q("div",Ms,[p.value.length===0?(_(),q("div",Ys,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),Hs,Bs])):(_(),A(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Os,[(_(!0),q(F,null,H(p.value,(c,r)=>(_(),A(U,{key:r,onClick:n=>f(c),class:"elegant-card emphasized-card"},{default:t(()=>[e(R,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",Ks,[a("div",Es,[a("div",Gs," Premix: "+o(h(c.name)||"-"),1),a("div",Ws,o(x(c.created_at)),1)]),a("div",Js,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm to-receive-badge text-uppercase"},{default:t(()=>[d(o(c.status),1)]),_:2},1024)]),a("div",Xs,o(c.branch_premix.branch_recipe.branch.name||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",Zs,[a("div",el,[tl,a("div",al,o(V(c.employee)||"-"),1)]),a("div",sl,[ll,a("div",ol,o(V(c.history[0].employee)||"-"),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var rl=O(nl,[["__scopeId","data-v-3af211aa"]]);const il={class:"row justify-between"},cl={class:"text-h6"},dl=a("div",{class:"text-h6",align:"center"},"Premix",-1),ul=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),ml={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var h,V,N;const D=l;console.log("report",D.report);const I=S(!1),$=()=>{I.value=!0},w=((N=(V=(h=D.report)==null?void 0:h.branch_premix)==null?void 0:V.branch_recipe)==null?void 0:N.ingredient_groups)||"Undefined";console.log("ingrdientsData",w);const p=f=>f?f.toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "):"",C=f=>{const s=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",u=f.firstname?s(f.firstname):"No Firstname",c=f.middlename?s(f.middlename).charAt(0)+".":"",r=f.lastname?s(f.lastname):"No Lastname";return`${u} ${c} ${r}`},k=f=>{const s=Number(f);return isNaN(s)?"":(s%1===0,s.toString())},P=(f,s)=>{if(s==="Pcs")return`${f} pcs`;if(s==="Grams"){if(f>=1e3){let u=f/1e3;return`${u%1===0?u.toString():u.toString().replace(/^0+/,"")} kgs`}return`${f} g`}return`${f} ${s}`},y=f=>re.formatDate(f,"MMM DD, YYYY || hh:mm A"),x=T(()=>w.map(f=>{const s=parseFloat(f.quantity)*parseFloat(D.report.quantity);return{...f,totalQuantity:s,formattedQuantity:P(s,f.ingredient.unit)}}));return(f,s)=>(_(),q(F,null,[a("div",null,[e(j,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:$})]),e(Z,{modelValue:I.value,"onUpdate:modelValue":s[1]||(s[1]=u=>I.value=u)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",il,[a("div",cl,o(p(l.report.name)||"-"),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:s[0]||(s[0]=u=>I.value=!1)})])]),_:1}),e(R,null,{default:t(()=>{var u;return[a("div",null,"Date: "+o(y(l.report.created_at)||"-"),1),a("div",null,"Baker: "+o(C(l.report.employee)||"-"),1),a("div",null," Branch: "+o(l.report.branch_premix.branch_recipe.branch.name||"-"),1),a("div",null,[d(" Status: "),e(Y,{color:"green",outlined:""},{default:t(()=>[d(o(l.report.status||"-"),1)]),_:1})]),a("div",null," Received By: "+o(C((u=l.report.history[0])==null?void 0:u.employee)||"-"),1)]}),_:1}),e(R,null,{default:t(()=>[dl]),_:1}),e(R,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(o(p(l.report.name)||"-"),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(o(k(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[a("div",null,[ul,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(_(!0),q(F,null,H(x.value,(u,c)=>(_(),A(z,{key:c},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(o(u.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[d(o(u.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(o(P(u.quantity*D.report.quantity,u.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const _l=l=>(G("data-v-3abe5ed6"),l=l(),W(),l),pl={key:0,class:"spinner-wrapper"},fl={key:1},gl={key:0,class:"data-error"},vl=_l(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),hl={__name:"ReceivedPage",setup(l){const D=E(),$=T(()=>D.user).value.device.reference_id;console.log("warehouseId",$);const w=te(),p=T(()=>w.receivePremixData);console.log("receivePremixData",p.value);const C=S([]),k=S({page:1,rowsPerPage:0,rowsNumber:0}),P=S("process"),y=S(!0),x=S(!1);ce(async()=>{$&&await s($),console.log("receivePremixData",p.value)});const h=r=>re.formatDate(r,"MMM DD, YYYY || hh:mm A"),V=r=>r?r.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",N=r=>r?r.toLowerCase().split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"",f=r=>{const n=Q=>Q?Q.charAt(0).toUpperCase()+Q.slice(1).toLowerCase():"",i=r.firstname?n(r.firstname):"No Firstname",m=r.middlename?n(r.middlename).charAt(0)+".":"",b=r.lastname?n(r.lastname):"No Lastname";return`${i} ${m} ${b}`},s=async(r,n=0,i=5)=>{try{y.value=!0,await w.fetchReceivePremix(r,P.value,n,i),console.log("receivePremixDatssa",p.value);const{data:m,current_page:b,per_page:Q,total:L}=p.value;C.value=m,console.log("premixData.value",C.value),k.value.page=b,k.value.rowsPerPage=Q,k.value.rowsNumber=L,p.value.length||(x.value=!0)}catch{x.value=!0}finally{y.value=!1}},u=r=>{s($,r.pagination.page,r.pagination.rowsPerPage)},c=[{name:"created_at",label:"Date / Time",align:"left",field:r=>h(r.created_at)||"Not Available",sortable:!0},{name:"employee",label:"Employee",align:"left",field:r=>f(r.employee)||"Not Available",sortable:!0},{name:"branch",label:"Branch Name",align:"left",field:r=>r.branch_premix.branch_recipe.branch.name||"Not Available",sortable:!0},{name:"premix_name",label:"Premix Name",align:"left",field:r=>N(r.name)||"Not Available",sortable:!0},{name:"status",label:"Status",align:"left",field:"status",sortable:!0},{name:"action",label:"Action",align:"left",field:"action",sortable:!0}];return(r,n)=>y.value?(_(),q("div",pl,[e(de,{size:"50px",color:"primary"})])):(_(),q("div",fl,[C.value.length===0?(_(),q("div",gl,[e(ee,{name:"warning",color:"warning",size:"4em"}),vl])):(_(),A(Fe,{key:1,rows:C.value,columns:c,pagination:k.value,"onUpdate:pagination":n[0]||(n[0]=i=>k.value=i),"rows-per-page-options":[3,5,10,0],onRequest:u,flat:"",bordered:""},{"body-cell-status":t(i=>[e(Ie,{props:i},{default:t(()=>[e(Y,{color:"green"},{default:t(()=>[d(o(V(i.row.status)),1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-action":t(i=>[e(Ie,{props:i},{default:t(()=>[e(ml,{report:i.row},null,8,["report"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"]))]))}};var xl=O(hl,[["__scopeId","data-v-3abe5ed6"]]);const yl={class:"q-gutter-y-sm"},bl={__name:"PremixTab",setup(l){const D=S("pendingReports"),I=T(()=>{switch(D.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";case"processReports":return"blue-9";case"completedReports":return"blue-grey-10";case"toDeliverReports":return"brown-6";case"toReceiveReports":return"purple-1";case"receive":return"orange-7";default:return"light-green-13"}});return($,w)=>(_(),A(U,{flat:""},{default:t(()=>[e(oe),a("div",yl,[e(Pe,{modelValue:D.value,"onUpdate:modelValue":w[0]||(w[0]=p=>D.value=p),"indicator-color":I.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(se,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Premix"}),e(se,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Premix"}),e(se,{class:"text-dark",name:"declineReports",label:"\u{1F534}Decline Premix"}),e(se,{class:"text-dark",name:"processReports",label:"\u{1F535}Process Premix"}),e(se,{class:"text-dark",name:"completedReports",label:"\u26ABCompleted Premix"}),e(se,{class:"text-dark",name:"toDeliverReports",label:"\u{1F7E4}To Deliver Premix"}),e(se,{class:"text-dark",name:"toReceiveReports",label:"\u26AATo Receive Premix"}),e(se,{class:"text-dark",name:"receive",label:"\u{1F7E0}Receive Premix"})]),_:1},8,["modelValue","indicator-color"])]),e(Ne,{modelValue:D.value,"onUpdate:modelValue":w[1]||(w[1]=p=>D.value=p),animated:""},{default:t(()=>[e(le,{name:"pendingReports"},{default:t(()=>[e(mt)]),_:1}),e(le,{name:"confirmReports"},{default:t(()=>[e(jt)]),_:1}),e(le,{name:"declineReports"},{default:t(()=>[e(ua)]),_:1}),e(le,{name:"processReports"},{default:t(()=>[e(za)]),_:1}),e(le,{name:"completedReports"},{default:t(()=>[e(cs)]),_:1}),e(le,{name:"toDeliverReports"},{default:t(()=>[e(As)]),_:1}),e(le,{name:"toReceiveReports"},{default:t(()=>[e(rl)]),_:1}),e(le,{name:"receive"},{default:t(()=>[e(xl)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var $l=O(bl,[["__scopeId","data-v-07a51121"]]);const Ae=l=>(G("data-v-aa3acf16"),l=l(),W(),l),wl=Ae(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Report",-1)),kl={key:0},ql=Ae(()=>a("div",{class:"text-positive text-subtitle1"}," Please confirm again to finalize this report. ",-1)),Dl={__name:"ConfirmDialog",setup(l){const{dialogRef:D,onDialogHide:I,onDialogOK:$,onDialogCancel:w}=ie(),p=S(!1),C=()=>{p.value?$():p.value=!0};return(k,P)=>(_(),A(Z,{ref_key:"dialogRef",ref:D,onHide:K(I)},{default:t(()=>[e(U,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(R,{class:"q-pt-none q-pb-sm"},{default:t(()=>[wl,p.value?pe("",!0):(_(),q("p",kl,"Are you sure you want to confirm this report?"))]),_:1}),p.value?(_(),A(R,{key:0},{default:t(()=>[ql]),_:1})):pe("",!0),e(oe,{class:"q-mb-md"}),e(R,null,{default:t(()=>[e(xe,{align:"right",class:"q-pt-none"},{default:t(()=>[fe(e(j,{flat:"",dense:"",label:"No",color:"primary",class:"q-mr-sm"},null,512),[[ge]]),e(j,{dense:"",label:p.value?"Confirm":"Yes! Confirm",color:"positive",class:"q-btn-rounded q-px-lg",onClick:C},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Cl=O(Dl,[["__scopeId","data-v-aa3acf16"]]);const Pl=l=>(G("data-v-b44cae3c"),l=l(),W(),l),Nl=Pl(()=>a("div",{class:"text-h5 q-mb-xs"},"Decline Report",-1)),Sl={key:0},Rl={__name:"DeclinedDialog",setup(l){const{dialogRef:D,onDialogHide:I,onDialogOK:$,onDialogCancel:w}=ie(),p=S(!1),C=S(""),k=S(null),P=()=>{p.value?k.value.validate()&&$({remarks:C.value}):p.value=!0};return(y,x)=>(_(),A(Z,{ref_key:"dialogRef",ref:D,onHide:K(I),persistent:""},{default:t(()=>[e(U,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(R,{class:"q-pt-none q-pb-sm"},{default:t(()=>[Nl,p.value?pe("",!0):(_(),q("p",Sl,"Are you sure you want to decline this report?"))]),_:1}),p.value?(_(),A(R,{key:0},{default:t(()=>[e(he,{modelValue:C.value,"onUpdate:modelValue":x[0]||(x[0]=h=>C.value=h),type:"textarea",label:"Reason for declining",filled:"",autogrow:"",dense:"",ref_key:"remarksInput",ref:k,rules:[h=>!!h||"Remarks are required"]},null,8,["modelValue","rules"])]),_:1})):pe("",!0),e(oe,{class:"q-mb-md"}),e(R,null,{default:t(()=>[e(xe,{align:"right",class:"q-pt-none"},{default:t(()=>[fe(e(j,{flat:"",dense:"",label:"No",color:"primary",class:"q-mr-sm"},null,512),[[ge]]),e(j,{dense:"",label:p.value?"Submit Decline":"Yes! Decline",color:"negative",class:"q-btn-rounded q-px-lg",onClick:P},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Vl=O(Rl,[["__scopeId","data-v-b44cae3c"]]);const Il=l=>(G("data-v-2b0fd850"),l=l(),W(),l),Ql={class:"row justify-between"},Al={class:"text-h6"},Tl=Il(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),zl={key:1,class:"text-caption text-grey-6 q-mt-md"},jl={__name:"TransactionView",props:{report:{type:Object,required:!0}},emits:["fetchAgain"],setup(l,{emit:D}){const I=Me(),$=T(()=>I.userData);console.log("userData in TransactionView:",$.value);const w=ye(),{dialogRef:p,onDialogHide:C,onDialogOK:k,onDialogCancel:P}=ie(),y=l;console.log("report",y.report);const x=S(!1),h=ue(),V=r=>r?r.toLowerCase().split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"",N=r=>r==null?"No Quantity":parseFloat(r),f=()=>{h.dialog({component:Cl}).onOk(r=>{console.log("Remarks from child:",r),s(y.report)}).onCancel(()=>{console.log("Cancelled")})},s=async r=>{var n,i,m,b,Q,L,J,ae,ve,_e;try{h.loading.show(),console.log("Confirming report",r);const M=r.items.map(Ce=>{const je=parseFloat(Ce.quantity)||0,Ue=parseFloat(Ce.gram)||0;return{...Ce,total_grams:je*Ue}});console.log("Per Item Totals:",M),console.log("employueee id:",(m=(i=(n=$.value)==null?void 0:n.data)==null?void 0:i.employee)==null?void 0:m.id);const ze={...r,employee_id:((L=(Q=(b=$.value)==null?void 0:b.data)==null?void 0:Q.employee)==null?void 0:L.id)||"0",status:"confirmed",items:M},X=await w.confirmDeliveryStocks(ze);console.log("responsesss",X),(X==null?void 0:X.data)||((J=X==null?void 0:X.data)==null?void 0:J.message)==="Delivery confirmed successfully."?(ne.create({type:"positive",message:X.data.message||"Delivery Confirmed Successfully"}),(X==null?void 0:X.status)===200&&(k({action:"confirmed"}),x.value=!1)):ne.create({type:"negative",message:((ae=X==null?void 0:X.data)==null?void 0:ae.message)||"Failed to Confirm deliveryq"}),console.log("responssssse",X)}catch(M){console.log(M),ne.create({type:"negative",message:((_e=(ve=M==null?void 0:M.response)==null?void 0:ve.data)==null?void 0:_e.message)||"Failed to Confirm delivery"})}finally{h.loading.hide()}},u=()=>{h.dialog({component:Vl}).onOk(r=>{console.log("Remarks from child:",r.remarks),c(y.report.id,r.remarks)}).onCancel(()=>{console.log("Cancelled")})},c=async(r,n)=>{var i,m,b,Q,L,J,ae,ve;try{h.loading.show(),console.log("Declining report",r,"with remarks:",n);const _e={id:r,employee_id:((b=(m=(i=$.value)==null?void 0:i.data)==null?void 0:m.employee)==null?void 0:b.id)||"0",status:"declined",remarks:n},M=await w.declineDeliveryStocks(_e);(M==null?void 0:M.data)||((Q=M==null?void 0:M.data)==null?void 0:Q.message)==="Delivery declined successfully."?(ne.create({type:"positive",message:((L=M==null?void 0:M.data)==null?void 0:L.message)||"Delivery Declined Successfully"}),(M==null?void 0:M.status)===200&&(k({action:"declined"}),x.value=!1)):ne.create({type:"negative",message:((J=M==null?void 0:M.data)==null?void 0:J.message)||"Failed to Decline delivery"}),console.log("responsessssss",M)}catch(_e){console.log(_e),ne.create({type:"negative",message:((ve=(ae=_e==null?void 0:_e.response)==null?void 0:ae.data)==null?void 0:ve.message)||"Failed to decline delivery. Please try again."})}finally{h.loading.hide()}};return(r,n)=>(_(),A(Z,{ref_key:"dialogRef",ref:p,modelValue:x.value,"onUpdate:modelValue":n[1]||(n[1]=i=>x.value=i),onHide:K(C)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,{class:"emphasized-header"},{default:t(()=>[a("div",Ql,[a("div",Al,"From: "+o(V(l.report.from_name)),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:n[0]||(n[0]=i=>x.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[a("div",null,[Tl,l.report.items&&l.report.items.length?(_(),A(B,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(z,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d(" Raw Materials Code ")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d("Stocks Category")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,null,{default:t(()=>[d(" Quantity ")]),_:1})]),_:1})]),_:1}),(_(!0),q(F,null,H(l.report.items,(i,m)=>(_(),A(z,{key:m},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>{var b;return[d(o(((b=i.raw_material)==null?void 0:b.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d(o(i.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,null,{default:t(()=>[d(o(N(i.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(_(),q("div",zl," No items in this delivery "))])]),_:1}),e(xe,{class:"report-actions q-ma-sm q-gutter-sm",align:"right"},{default:t(()=>[e(j,{color:"negative",label:"Decline",class:"action-btn",onClick:u}),e(j,{color:"positive",label:"Confirm",class:"action-btn",onClick:f})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var Ul=O(jl,[["__scopeId","data-v-2b0fd850"]]);const Ll={key:0,class:"spinner-wrapper"},Fl={key:1,class:"q-mt-xl"},Ml={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},Yl={class:"text-h6 text-grey-7 q-mt-sm"},Hl={class:"text-body1 text-grey-6 q-mt-sm"},Bl={class:"q-gutter-md q-ma-md"},Ol={class:"row items-start justify-between"},Kl={class:"col-8 column q-gutter-y-xs"},El={class:"text-body1 text-weight-bold text-primary-dark"},Gl={class:"text-caption text-grey-6 text-weight-meduim"},Wl={class:"col-4 column items-end q-gutter-y-xs"},Jl={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Xl={__name:"PendingPage",setup(l){const D=E(),I=T(()=>D.user);console.log("userdata",I.value);const $=ye(),w=T(()=>$.pendingStocks),p=I.value.device.reference_id;console.log("warehouseId",p);const C=S("pending"),k=S("Warehouse"),P=S(!0),y=S(!1),x=ue(),h=s=>s?s.toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "):"",V=s=>re.formatDate(s,"MMM DD, YYYY || hh:mm A"),N=async()=>{try{P.value=!0,await $.fetchPendingDeliveryReports(p,C.value,k.value),w.value.length||(y.value=!0),console.log("stockDelivery",w.value)}catch(s){console.log(s)}finally{P.value=!1}};ce(async()=>{p&&await N(p,C.value)});const f=(s,u)=>{x.dialog({component:Ul,componentProps:{report:s}}).onOk(c=>{var r;if(console.log("response from child:",c),(c==null?void 0:c.action)==="declined"||(c==null?void 0:c.action)==="confirmed"){const n=(r=$.pendingStocks)==null?void 0:r.data;if(Array.isArray(n)){const i=n.findIndex(m=>m.id===s.id);i!==-1&&n.splice(i,1)}}})};return(s,u)=>P.value?(_(),q("div",Ll,[e(de,{size:"50px",color:"primary"})])):(_(),q("div",Fl,[w.value.data.length===0?(_(),q("div",Ml,[e(ee,{name:"search_off",size:"60px",color:"grey-6"}),a("div",Yl,o(s.searchQuery?"No deliveries found for your search.":"No deliveries available."),1),a("div",Hl,o(s.searchQuery?"Try another search term.":"Check again later."),1)])):(_(),A(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Bl,[(_(!0),q(F,null,H(w.value.data,(c,r)=>(_(),A(U,{key:r,onClick:n=>f(c,r),class:"pending-card elegant-card emphasized-card"},{default:t(()=>[e(R,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",Ol,[a("div",Kl,[a("div",El," From: "+o(h(c.from_name)||"-"),1),a("div",Gl,o(V(c.created_at)||"-"),1)]),a("div",Wl,[a("div",null,[e(Y,{color:"warning",class:"text-weight-bold q-px-md q-py-sm pending-badge"},{default:t(()=>[d(" PENDING ")]),_:1})]),a("div",Jl,o(c.items.length||"-")+" items ",1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Zl=O(Xl,[["__scopeId","data-v-4759fa89"]]);const eo=l=>(G("data-v-2856f3dc"),l=l(),W(),l),to={class:"row justify-between"},ao={class:"text-h6"},so=eo(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),lo={key:1,class:"text-caption text-grey-6 q-mt-md"},oo={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){const{dialogRef:D,onDialogHide:I,onDialogOK:$,onDialogCancel:w}=ie();console.log("report",l.report);const C=S(!1),k=y=>y?y.toLowerCase().split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" "):"",P=y=>y==null?"No Quantity":parseFloat(y);return(y,x)=>(_(),A(Z,{ref_key:"dialogRef",ref:D,modelValue:C.value,"onUpdate:modelValue":x[1]||(x[1]=h=>C.value=h),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,{class:"emphasized-header"},{default:t(()=>[a("div",to,[a("div",ao,"From: "+o(k(l.report.from_name)),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:x[0]||(x[0]=h=>C.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[d(" Status: "),e(Y,{color:"green"},{default:t(()=>[d(o(l.report.status),1)]),_:1})]),_:1}),e(R,null,{default:t(()=>[a("div",null,[so,l.report.items&&l.report.items.length?(_(),A(B,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(z,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d(" Raw Materials Code ")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d("Stocks Category")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,null,{default:t(()=>[d(" Quantity ")]),_:1})]),_:1})]),_:1}),(_(!0),q(F,null,H(l.report.items,(h,V)=>(_(),A(z,{key:V},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>{var N;return[d(o(((N=h.raw_material)==null?void 0:N.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d(o(h.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,null,{default:t(()=>[d(o(P(h.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(_(),q("div",lo," No items in this delivery "))])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var no=O(oo,[["__scopeId","data-v-2856f3dc"]]);const ro=l=>(G("data-v-59f83460"),l=l(),W(),l),io={key:0,class:"spinner-wrapper"},co={key:1,class:"q-mt-xl"},uo={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},mo={class:"text-h6 text-grey-7 q-mt-sm"},_o={class:"text-body1 text-grey-6 q-mt-xs"},po={class:"q-gutter-md q-ma-md"},fo={class:"row items-start justify-between"},go={class:"col-8 column q-gutter-y-xs"},vo={class:"text-body1 text-weight-bold text-primary-dark"},ho={class:"text-caption text-grey-6 text-weight-medium"},xo={class:"col-4 column items-end q-gutter-y-xs"},yo={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},bo={class:"row justify-between items-end"},$o={class:"column q-gutter-y-xs"},wo=ro(()=>a("div",{class:"text-caption text-grey-7"},"Confirmed By:",-1)),ko={class:"text-body2 text-weight-semibold text-grey-9"},qo={key:2,class:"q-pt-md flex flex-center"},Do={__name:"ConfirmPage",setup(l){const D=E(),I=T(()=>D.user);console.log("userdata",I.value);const $=ye(),w=T(()=>$.confirmStocks),p=I.value.device.reference_id;console.log("warehouseId",p);const C=S("confirmed"),k=S("Warehouse"),P=S(!0),y=S(!1),x=ue();S(null);const h=S();let V=null;const N=T(()=>{var m;return((m=$.confirmStocks)==null?void 0:m.pagination)||{current_page:1,last_page:1,per_page:3}}),f=m=>m?m.toLowerCase().split(" ").map(b=>b.charAt(0).toUpperCase()+b.slice(1)).join(" "):"",s=m=>{const b=ae=>ae?ae.charAt(0).toUpperCase()+ae.slice(1).toLowerCase():"",Q=m.firstname?b(m.firstname):"No Firstname",L=m.middlename?b(m.middlename).charAt(0)+".":"",J=m.lastname?b(m.lastname):"No Lastname";return`${Q} ${L} ${J}`},u=m=>re.formatDate(m,"MMM DD, YYYY || hh:mm A"),c=async()=>{try{P.value=!0,await $.fetchConfirmedDeliveryReports(p,C.value,k.value,N.value.current_page,N.value.per_page,h.value),w.value.length||(y.value=!0),console.log("stockDeliverysss",w.value)}catch(m){console.log(m)}finally{P.value=!1}};ce(async()=>{p&&await c(p,C.value,k.value,N.value.current_page)});const r=async()=>{c(p,C.value,k.value,N.value.current_page)},n=()=>{V&&clearTimeout(V),V=setTimeout(()=>{c()},500)},i=m=>{x.dialog({component:no,componentProps:{report:m}})};return(m,b)=>(_(),q(F,null,[a("div",null,[e(he,{outlined:"",dense:"",placeholder:"Search delivery",class:"q-mb-sm","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6",modelValue:h.value,"onUpdate:modelValue":[b[0]||(b[0]=Q=>h.value=Q),n]},{append:t(()=>[e(ee,{name:"search"})]),_:1},8,["modelValue"])]),P.value?(_(),q("div",io,[e(de,{size:"50px",color:"primary"})])):(_(),q("div",co,[w.value.data.length===0?(_(),q("div",uo,[e(ee,{name:"search_off",size:"60px",color:"grey-6"}),a("div",mo,o(h.value?"No deliveries found for your search.":"No deliveries available."),1),a("div",_o,o(h.value?"Try another search term.":"Check again later."),1)])):(_(),A(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",po,[(_(!0),q(F,null,H(w.value.data,(Q,L)=>(_(),A(U,{key:L,onClick:J=>i(Q),class:"confirmed-card elegant-card emphasized-card"},{default:t(()=>[e(R,{class:"q-gutter-sm enhanced-card-section"},{default:t(()=>[a("div",fo,[a("div",go,[a("div",vo," From: "+o(f(Q.from_name)||"-"),1),a("div",ho,o(u(Q.created_at)||"-"),1)]),a("div",xo,[a("div",null,[e(Y,{color:"positive",class:"text-weight-bold q-px-md q-py-sm confirmed-badge"},{default:t(()=>[d(" CONFIRMED ")]),_:1})]),a("div",yo,o(Q.items.length||"-")+" items ",1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",bo,[a("div",$o,[wo,a("div",ko,o(s(Q.approved_by)||"-"),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))])),N.value.last_page>1?(_(),q("div",qo,[e(Se,{modelValue:N.value.current_page,"onUpdate:modelValue":b[1]||(b[1]=Q=>N.value.current_page=Q),max:N.value.last_page,"max-pages":3,"boundary-links":"","direction-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward",onClick:r},null,8,["modelValue","max"])])):pe("",!0)],64))}};var Co=O(Do,[["__scopeId","data-v-59f83460"]]);const Ve=l=>(G("data-v-5512bd22"),l=l(),W(),l),Po={class:"row justify-between"},No={class:"text-h6"},So=Ve(()=>a("span",{class:"text-bold"},"Status:",-1)),Ro=Ve(()=>a("span",{class:"text-bold"},"Remark:",-1)),Vo=Ve(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),Io={key:1,class:"text-caption text-grey-6 q-mt-md"},Qo={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){const{dialogRef:D,onDialogHide:I,onDialogOK:$,onDialogCancel:w}=ie();console.log("report",l.report);const C=S(!1),k=y=>y?y.toLowerCase().split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" "):"",P=y=>y==null?"No Quantity":parseFloat(y);return(y,x)=>(_(),A(Z,{ref_key:"dialogRef",ref:D,modelValue:C.value,"onUpdate:modelValue":x[1]||(x[1]=h=>C.value=h),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",Po,[a("div",No,"From: "+o(k(l.report.from_name)),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:x[0]||(x[0]=h=>C.value=!1)})])]),_:1}),e(R,{class:"text-caption text-grey-7 q-mt-sm"},{default:t(()=>[So,e(Y,{color:"negative"},{default:t(()=>[d(o(l.report.status),1)]),_:1}),a("div",null,[Ro,d(" "+o(l.report.remarks||"No Remark"),1)])]),_:1}),e(R,null,{default:t(()=>[a("div",null,[Vo,l.report.items&&l.report.items.length?(_(),A(B,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(z,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d(" Raw Materials Code ")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d("Stocks Category")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{side:""},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(_(!0),q(F,null,H(l.report.items,(h,V)=>(_(),A(z,{key:V},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>{var N;return[d(o(((N=h.raw_material)==null?void 0:N.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d(o(h.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,null,{default:t(()=>[d(o(P(h.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(_(),q("div",Io," No items in this delivery "))])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var Ao=O(Qo,[["__scopeId","data-v-5512bd22"]]);const Te=l=>(G("data-v-06ffae62"),l=l(),W(),l),To={key:0,class:"spinner-wrapper"},zo={key:1,class:"q-mt-xl"},jo={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},Uo={class:"text-h6 text-grey-7 q-mt-md"},Lo={class:"text-body1 text-grey-6 q-mt-sm"},Fo={class:"q-gutter-md q-pb-md"},Mo={class:"row items-start justify-between"},Yo={class:"col-8 column q-gutter-y-xs"},Ho={class:"text-body1 text-weight-bold text-primary-dark"},Bo={class:"text-caption text-grey-6 text-weight-medium"},Oo={class:"col-4 column items-end q-gutter-y-xs"},Ko={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Eo={class:"row justify-between items-end"},Go={class:"column q-gutter-y-xs"},Wo=Te(()=>a("div",{class:"text-caption text-grey-7"},"Declined By:",-1)),Jo={class:"text-body2 text-weight-semibold text-grey-9"},Xo={class:"col-5 column"},Zo=Te(()=>a("div",{class:"text-caption text-grey-7"},"Remark:",-1)),en={class:"text-body2 text-grey-8 remarks-text"},tn={key:2,class:"q-pt-lg flex flex-center"},an={__name:"DeclinePage",setup(l){const D=E(),I=T(()=>D.user);console.log("userdata",I.value);const $=ye(),w=T(()=>$.declinedStocks),p=I.value.device.reference_id;console.log("warehouseId",p);const C=S("declined"),k=S("Warehouse"),P=S(!0),y=S(!1),x=ue(),h=S();let V=null;const N=T(()=>{var m;return((m=$.declinedStocks)==null?void 0:m.pagination)||{current_page:1,last_page:1,per_page:3}}),f=m=>m?m.toLowerCase().split(" ").map(b=>b.charAt(0).toUpperCase()+b.slice(1)).join(" "):"",s=m=>{const b=ae=>ae?ae.charAt(0).toUpperCase()+ae.slice(1).toLowerCase():"",Q=m.firstname?b(m.firstname):"No Firstname",L=m.middlename?b(m.middlename).charAt(0)+".":"",J=m.lastname?b(m.lastname):"No Lastname";return`${Q} ${L} ${J}`},u=m=>re.formatDate(m,"MMM DD, YYYY || hh:mm A"),c=async(m=1)=>{try{P.value=!0,await $.fetchDeclinedDeliveryReports(p,C.value,k.value,N.value.current_page,N.value.per_page,h.value),w.value.length||(y.value=!0),console.log("stockDeliveryDeclinedsss",w.value)}catch(b){console.log(b)}finally{P.value=!1}};ce(async()=>{p&&await c(p,C.value,k.value,N.value.current_page)});const r=async()=>{c(p,C.value,k.value,N.value.current_page)},n=async()=>{V&&clearTimeout(V),V=setTimeout(()=>{c(1)},500)},i=m=>{x.dialog({component:Ao,componentProps:{report:m}})};return(m,b)=>(_(),q(F,null,[a("div",null,[e(he,{outlined:"",dense:"",placeholder:"Search delivery",class:"q-mb-md search-input-elegant","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6",modelValue:h.value,"onUpdate:modelValue":[b[0]||(b[0]=Q=>h.value=Q),n]},{prepend:t(()=>[e(ee,{name:"search",color:"grey-6"})]),_:1},8,["modelValue"])]),P.value?(_(),q("div",To,[e(de,{size:"50px",color:"primary"})])):(_(),q("div",zo,[w.value.data.length===0?(_(),q("div",jo,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),a("div",Uo,o(h.value?"No deliveries found for your search.":"No deliveries available."),1),a("div",Lo,o(h.value?"Try another search term.":"Check again later."),1)])):(_(),A(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Fo,[(_(!0),q(F,null,H(w.value.data,(Q,L)=>(_(),A(U,{key:L,onClick:J=>i(Q),class:"declined-card elegant-card emphasized-card"},{default:t(()=>[e(R,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",Mo,[a("div",Yo,[a("div",Ho," From: "+o(f(Q.from_name)),1),a("div",Bo,o(u(Q.created_at)),1)]),a("div",Oo,[a("div",null,[e(Y,{color:"negative",class:"text-weight-bold q-px-md q-py-sm declined-badge"},{default:t(()=>[d(" DECLINED ")]),_:1})]),a("div",Ko,o(Q.items.length)+" items ",1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",Eo,[a("div",Go,[Wo,a("div",Jo,o(s(Q.approved_by)),1)]),a("div",Xo,[Zo,a("div",en,o(Q.remarks||"\u2014 No remark provided \u2014"),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))])),N.value.last_page>1?(_(),q("div",tn,[e(Se,{modelValue:N.value.current_page,"onUpdate:modelValue":[b[1]||(b[1]=Q=>N.value.current_page=Q),r],max:N.value.last_page,"max-pages":5,"boundary-links":"","direction-links":"","icon-first":"first_page","icon-last":"last_page","icon-prev":"chevron_left","icon-next":"chevron_right",color:"primary","active-color":"white","active-text-color":"primary",class:"elegant-pagination"},null,8,["modelValue","max"])])):pe("",!0)],64))}};var sn=O(an,[["__scopeId","data-v-06ffae62"]]);const ln={class:"q-gutter-y-sm"},on={__name:"StocksDeliveryPage",setup(l){const D=S("pending"),I=T(()=>{switch(D.value){case"pending":return"warning";case"confirmed":return"green-13";case"declined":return"red-6";default:return"light-green-13"}});return($,w)=>(_(),A(U,{flat:""},{default:t(()=>[e(oe),a("div",ln,[e(Pe,{modelValue:D.value,"onUpdate:modelValue":w[0]||(w[0]=p=>D.value=p),"indicator-color":I.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(se,{class:"text-dark",name:"pending",label:"Pending"}),e(se,{class:"text-dark",name:"confirmed",label:"Confirmed"}),e(se,{class:"text-dark",name:"declined",label:"Declined"})]),_:1},8,["modelValue","indicator-color"])]),e(Ne,{modelValue:D.value,"onUpdate:modelValue":w[1]||(w[1]=p=>D.value=p),animated:""},{default:t(()=>[e(le,{name:"pending"},{default:t(()=>[e(Zl)]),_:1}),e(le,{name:"confirmed"},{default:t(()=>[e(Co)]),_:1}),e(le,{name:"declined"},{default:t(()=>[e(sn)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},nn={class:"q-gutter-y-sm"},Yn={__name:"warehouseTransactionHistory",setup(l){const D=S("premix"),I=T(()=>{switch(D.value){case"premix":return"brown";case"stocks_delivery":return"teal-5";default:return"light-green-13"}});return($,w)=>(_(),A(U,{flat:""},{default:t(()=>[e(R,{class:"text-h6"},{default:t(()=>[d(" Transaction History ")]),_:1}),a("div",nn,[e(Pe,{modelValue:D.value,"onUpdate:modelValue":w[0]||(w[0]=p=>D.value=p),"indicator-color":I.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(se,{class:"text-dark",name:"premix",label:"Premix"}),e(se,{class:"text-dark",name:"stocks_delivery",label:"Stocks Delivery"})]),_:1},8,["modelValue","indicator-color"])]),e(Ne,{modelValue:D.value,"onUpdate:modelValue":w[1]||(w[1]=p=>D.value=p),animated:""},{default:t(()=>[e(le,{name:"premix"},{default:t(()=>[e($l)]),_:1}),e(le,{name:"stocks_delivery"},{default:t(()=>[e(on)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Yn as default};
