import{Q as B}from"./QBadge.96207a3e.js";import{n as y,t as J,o as _,a2 as x,a as e,w as t,$ as C,M as w,Q as U,I as W,ad as E,a0 as M,J as o,K as V,aI as G,a1 as K,a3 as P,O as z,R as L,c as $,H as ae,g as O,z as te,u as oe,L as R,_ as N,bb as se,a4 as le,bc as ne}from"./index.c0815fe7.js";import{Q as re}from"./QPage.29418ba7.js";import{Q as de}from"./QSpinnerDots.a78a847f.js";import{Q as D,a as ie}from"./QTable.dfe2f370.js";import{Q as X}from"./QTooltip.accbf9dc.js";import{Q as Y}from"./QSpace.c091a9af.js";import{Q as Z}from"./QSelect.05275e45.js";import{C as F}from"./ClosePopup.4b193f5f.js";import{u as A}from"./warehouse.27456a7f.js";import{_ as Q}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as H,a as ue}from"./QItem.8ed247ee.js";import{Q as ce}from"./QList.f58bc619.js";import{u as me}from"./employee.fae363d3.js";import"./QVirtualScroll.3d0a0f44.js";import"./use-virtual-scroll.3725db76.js";import"./rtl.276c3f1b.js";import"./QMenu.e92add0c.js";import"./selection.e5e21d1b.js";import"./QItemLabel.0cd88901.js";import"./axios.950c72e0.js";const S=n=>(z("data-v-174f64e8"),n=n(),L(),n),pe=S(()=>o("div",{class:"text-h5 q-mr-md"},"\u{1F3ED} Edit Warehouse",-1)),_e={class:"q-mt-lg q-animated q-animate-bounce"},he=S(()=>o("div",null,"Name of Warehouse",-1)),ve={class:"q-mt-md q-animated q-animate-bounce"},fe=S(()=>o("div",null,"Location",-1)),ge={class:"q-mt-md q-animated q-animate-bounce"},we=S(()=>o("div",null,"Person In-charge",-1)),be={class:"row q-gutter-x-sm q-mt-md"},ye={class:"col-6 q-animated q-animate-bounce"},qe=S(()=>o("div",null,"Phone Number",-1)),xe={class:"col-5 q-animated q-animate-bounce"},Ve=S(()=>o("div",null,"Status",-1)),Ce={__name:"WarehouseEditComponent",props:["edit"],setup(n){const b=A(),c=y(!1),u=["Open","Closed"],g=n,d=J({name:"",location:"",person_incharge:"",phone:"",status:null}),q=()=>{Object.assign(d,g.edit.row),c.value=!0},m=async()=>{try{const f={...g.edit.row,...d};await b.updateWarehouses(g.edit.row.id,f),c.value=!1}catch(f){console.error("Failed to update ingredients:",f)}};return(f,i)=>(_(),x(P,null,[e(w,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:"",onClick:q},{default:t(()=>[e(X,{class:"bg-positive",delay:200},{default:t(()=>[C("Edit")]),_:1})]),_:1}),e(K,{modelValue:c.value,"onUpdate:modelValue":i[5]||(i[5]=r=>c.value=r),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:t(()=>[e(U,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:t(()=>[e(W,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:t(()=>[pe,e(Y),E(e(w,{icon:"close",flat:"",dense:"",round:""},null,512),[[F]])]),_:1}),e(M,{class:"separator-gradient"}),e(W,{class:"q-px-xl q-pt-none q-pb-lg"},{default:t(()=>[o("div",_e,[he,e(V,{modelValue:d.name,"onUpdate:modelValue":i[0]||(i[0]=r=>d.name=r),outlined:"",dense:""},null,8,["modelValue"])]),o("div",ve,[fe,e(V,{modelValue:d.location,"onUpdate:modelValue":i[1]||(i[1]=r=>d.location=r),outlined:"",dense:""},null,8,["modelValue"])]),o("div",ge,[we,e(V,{modelValue:d.person_incharge,"onUpdate:modelValue":i[2]||(i[2]=r=>d.person_incharge=r),outlined:"",dense:""},null,8,["modelValue"])]),o("div",be,[o("div",ye,[qe,e(V,{modelValue:d.phone,"onUpdate:modelValue":i[3]||(i[3]=r=>d.phone=r),outlined:"",dense:"",mask:"(+63) ### - ### - ####",placeholder:"(+63)### - ### - ####",rules:[r=>r&&r.length>0]},null,8,["modelValue","rules"])]),o("div",xe,[Ve,e(Z,{modelValue:d.status,"onUpdate:modelValue":i[4]||(i[4]=r=>d.status=r),outlined:"",dense:"",options:u,behavior:"menu"},null,8,["modelValue"])])])]),_:1}),e(G,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:t(()=>[E(e(w,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[F]]),e(w,{class:"glossy",color:"teal",label:"Save",onClick:m})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var $e=Q(Ce,[["__scopeId","data-v-174f64e8"]]);const ee=n=>(z("data-v-0db17e38"),n=n(),L(),n),We=ee(()=>o("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),ke=ee(()=>o("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),Qe={__name:"WarehouseDeleteComponent",props:["delete"],setup(n){const b=A(),c=n,u=y(!1),g=()=>{u.value=!0},d=async()=>{try{await b.deleteWarehouse(c.delete.row.id)}catch(q){console.error("Error deleting item:",q)}u.value=!1};return(q,m)=>(_(),x(P,null,[e(w,{onClick:g,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:""},{default:t(()=>[e(X,{class:"bg-negative",delay:200},{default:t(()=>[C("Delete")]),_:1})]),_:1}),e(K,{modelValue:u.value,"onUpdate:modelValue":m[0]||(m[0]=f=>u.value=f)},{default:t(()=>[e(U,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(W,{class:"q-pt-none q-pb-sm"},{default:t(()=>[We,ke]),_:1}),e(M,{class:"q-mb-md"}),e(G,{align:"right",class:"q-pt-none"},{default:t(()=>[E(e(w,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[F]]),e(w,{dense:"",label:"Delete",color:"negative",onClick:d,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Se=Q(Qe,[["__scopeId","data-v-0db17e38"]]);const Ie={};function De(n,b){return _(),$(w,{to:"/admin/warehouse/warehouse_1",outline:"",size:"sm","text-color":"red-6",dense:"",label:"Go to warehouse"})}var Ne=Q(Ie,[["render",De]]);const Ue=n=>(z("data-v-4d73cf3f"),n=n(),L(),n),Ee={key:0,class:"spinner-wrapper"},Fe={key:1},Pe={key:0,class:"data-error"},ze=Ue(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Le={class:"row justify-center q-gutter-x-md"},Ae={__name:"WarehouseTableComponent",setup(n){ae();const b=A(),c=y(""),u=y(!0),g=O(()=>b.warehouses),d=y(!1),q=y({rowPerPage:0}),m=O(()=>c.value?g.value.filter(a=>a.name.toLowerCase().includes(c.value.toLowerCase())):g.value);te(async()=>{const a=await f();console.log("respisne warehouse",a)});const f=async()=>{try{u.value=!0;const a=await b.fetchWarehouses();g.value.length||(d.value=!0),console.log("wawrehouse respo",a)}catch{d.value=!0}finally{u.value=!1}};oe(c,async a=>{u.value=!0,await new Promise(h=>setTimeout(h,1e3)),u.value=!1,d.value=m.value.length===0});const i=a=>{const h=s=>s?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():"",l=a.firstname?h(a.firstname):"No Firstname",v=a.middlename?h(a.middlename).charAt(0)+".":"",p=a.lastname?h(a.lastname):"No Lastname";return`${l} ${v} ${p}`},r=a=>a?a.split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1).toLowerCase()).join(" "):"",T=[{name:"name",label:"Name of Warehouse",align:"left",field:a=>a.name,format:a=>`${a}`,sortable:!0},{name:"location",label:"Location",align:"left",field:"location",sortable:!0},{name:"personIncharge",label:"Person In-charge",align:"left",field:a=>i(a)},{name:"phone",label:"Phone",align:"center",field:"phone"},{name:"status",label:"Status",align:"left",field:"status"},{name:"action",label:"Action",align:"center",field:"action"}],j=a=>a==="Open"?"info":"accent";return(a,h)=>(_(),x(P,null,[o("div",null,[e(V,{modelValue:c.value,"onUpdate:modelValue":h[0]||(h[0]=l=>c.value=l),class:"q-pb-lg q-pl-sm",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100",style:{width:"500px","max-width":"1500px","min-width":"100px"}},{append:t(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])]),u.value?(_(),x("div",Ee,[e(de,{size:"50px",color:"primary"})])):(_(),x("div",Fe,[m.value.length===0?(_(),x("div",Pe,[e(R,{name:"warning",color:"warning",size:"4em"}),ze])):(_(),$(ie,{key:1,class:"table-container elegant-container sticky-header",filter:c.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"400px"},columns:T,rows:m.value,"row-key":"name","virtual-scroll":"",pagination:q.value,"onUpdate:pagination":h[1]||(h[1]=l=>q.value=l),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-name":t(l=>[e(D,{props:l},{default:t(()=>[C(N(r(l.row.name)),1)]),_:2},1032,["props"])]),"body-cell-location":t(l=>[e(D,{props:l},{default:t(()=>[C(N(r(l.row.location)),1)]),_:2},1032,["props"])]),"body-cell-personIncharge":t(l=>[e(D,{props:l},{default:t(()=>[C(N(i(l.row.employees)),1)]),_:2},1032,["props"])]),"body-cell-status":t(l=>[e(D,{key:"name",props:l},{default:t(()=>[e(B,{outline:"",color:j(l.row.status)},{default:t(()=>[C(N(l.row.status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-action":t(l=>[e(D,{props:l},{default:t(()=>[o("div",Le,[e($e,{edit:l},null,8,["edit"]),e(Se,{delete:l},null,8,["delete"]),e(Ne)])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Te=Q(Ae,[["__scopeId","data-v-4d73cf3f"]]);const I=n=>(z("data-v-05118953"),n=n(),L(),n),je=I(()=>o("div",{class:"text-h5 q-mr-md"},"\u{1F3ED} Add New Warehouse",-1)),Be={class:"q-mt-lg q-animated q-animate-bounce"},Oe=I(()=>o("div",null,"Name of Warehouse",-1)),Re={class:"q-mt-md q-animated q-animate-bounce"},Me=I(()=>o("div",null,"Location",-1)),Ge={class:"q-mt-md q-animated q-animate-bounce"},Ke=I(()=>o("div",null,"Person In-charge",-1)),He={key:0,class:"custom-list z-top"},Je={class:"row q-gutter-x-sm q-mt-md"},Xe={class:"col-6 q-animated q-animate-bounce"},Ye=I(()=>o("div",null,"Phone Number",-1)),Ze={class:"col-5 q-animated q-animate-bounce"},ea=I(()=>o("div",null,"Status",-1)),aa={__name:"WarehouseCreateComponent",setup(n){const b=me(),c=A(),u=y(!1),g=O(()=>b.employee),d=["Open","Close"],q=()=>{u.value=!0},m=y(""),f=y(!1),i=y(!1),r=y(!1),T=async()=>{m.value.trim()&&(r.value=!0,await b.searchCertainEmployee(m.value),r.value=!1,f.value=!0)},j=v=>{console.log("Selected Employee:",v),a.employee_id=v.id,a.employee_name=`${v.firstname} ${v.middlename?v.middlename.charAt(0)+".":""} ${v.lastname}`,m.value=`${v.firstname} ${v.middlename?v.middlename.charAt(0)+".":""} ${v.lastname}`,f.value=!1,console.log("Filled addNewBranchForm Data:",a)},a=J({name:"",location:"",employee_id:"",employee_name:"",phone:"",status:null}),h=async()=>{console.log("awarehoouse data send",a),i.value=!0;const v=await c.createWarehouses(a);console.log("redssdfs",v),i.value=!1,l(),u.value=!1},l=()=>{a.name="",a.location="",a.person_incharge="",a.phone="",m.value=null,a.employee="",a.status=[""]};return(v,p)=>(_(),x("div",null,[e(w,{outline:"",icon:"add_circle",label:"Add Warehouse",onClick:q,style:{"background-color":"#ef4444"}}),e(K,{modelValue:u.value,"onUpdate:modelValue":p[6]||(p[6]=s=>u.value=s),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:t(()=>[e(U,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:t(()=>[e(W,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:t(()=>[je,e(Y),E(e(w,{icon:"close",flat:"",dense:"",round:""},null,512),[[F]])]),_:1}),e(M,{class:"separator-gradient"}),e(W,{class:"q-px-xl q-pt-none q-pb-lg"},{default:t(()=>[o("div",Be,[Oe,e(V,{class:"text-capitalize",modelValue:a.name,"onUpdate:modelValue":p[0]||(p[0]=s=>a.name=s),outlined:"",dense:"",rules:[s=>s&&s.length>0]},null,8,["modelValue","rules"])]),o("div",Re,[Me,e(V,{class:"text-capitalize",modelValue:a.location,"onUpdate:modelValue":p[1]||(p[1]=s=>a.location=s),outlined:"",dense:"",rules:[s=>s&&s.length>0]},null,8,["modelValue","rules"])]),o("div",Ge,[Ke,e(V,{modelValue:m.value,"onUpdate:modelValue":[p[2]||(p[2]=s=>m.value=s),T],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name or position",onFocus:p[3]||(p[3]=s=>f.value=!0)},{append:t(()=>[r.value?(_(),$(se,{key:1,color:"grey",size:"sm"})):(_(),$(R,{key:0,name:"search"}))]),default:t(()=>[f.value&&m.value?(_(),x("div",He,[e(U,null,{default:t(()=>[e(ce,{separator:""},{default:t(()=>{var s;return[(s=g.value)!=null&&s.length?(_(!0),x(P,{key:1},le(g.value,k=>(_(),$(H,{onClick:ra=>j(k),key:k.id,clickable:""},{default:t(()=>[e(ue,null,{default:t(()=>[C(N(`${k.firstname} ${k.middlename?k.middlename.charAt(0)+".":""} ${k.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(_(),$(H,{key:0},{default:t(()=>[C(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):ne("",!0)]),_:1},8,["modelValue"])]),o("div",Je,[o("div",Xe,[Ye,e(V,{modelValue:a.phone,"onUpdate:modelValue":p[4]||(p[4]=s=>a.phone=s),outlined:"",dense:"",mask:"(+63) ### - ### - ####",placeholder:"(+63)### - ### - ####",rules:[s=>s&&s.length>0]},null,8,["modelValue","rules"])]),o("div",Ze,[ea,e(Z,{modelValue:a.status,"onUpdate:modelValue":p[5]||(p[5]=s=>a.status=s),outlined:"",dense:"",options:d,"hide-dropdown-icon":"",behavior:"menu"},null,8,["modelValue"])])])]),_:1}),e(G,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:t(()=>[E(e(w,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[F]]),e(w,{class:"glossy",color:"teal",label:"Create",onClick:h,loading:i.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var ta=Q(aa,[["__scopeId","data-v-05118953"]]);const oa={class:"text-h6 text-dark"},sa={class:"q-gutter-x-sm"},la={align:"right"},na={__name:"WarehousePage",setup(n){return(b,c)=>(_(),$(re,null,{default:t(()=>[e(U,{class:"elegant-container",flat:""},{default:t(()=>[e(W,{class:"row justify-between"},{default:t(()=>[o("div",oa,[o("div",sa,[e(B,{label:"Open",outline:"",color:"info"}),e(B,{label:"Closed",outline:"",color:"accent"})])]),o("div",la,[e(ta)])]),_:1}),e(W,null,{default:t(()=>[e(Te)]),_:1})]),_:1})]),_:1}))}};var Qa=Q(na,[["__scopeId","data-v-7966fcdc"]]);export{Qa as default};
