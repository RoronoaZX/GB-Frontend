import{c as oe,r as k,t as Se,u as ie,z as ce,o as m,a3 as B,f as e,w as t,L as ne,Q as ue,J as a,I as K,ae as me,M as L,a0 as s,e as E,K as ae,be as ee,a1 as qe,a4 as z,a5 as re,$ as y,bf as Ae,aJ as Re,a2 as Ve,O as _e,R as fe,aK as N,N as De,bg as ke,d as je}from"./index.ca72f247.js";import{Q as Be}from"./QTab.9bf6243c.js";import{Q as ze}from"./QTabs.35fdbdf7.js";import{Q as Ue}from"./QTabPanel.eb75678f.js";import{Q as Ze}from"./QTabPanels.c204656b.js";import{Q as Je}from"./QPage.c5c8524f.js";import{Q as Ie}from"./QSkeleton.5e8b97b1.js";import{a as te,b as p}from"./QMenu.a8d5f7aa.js";import{Q as X,a as f}from"./QSelect.a1c4ed00.js";import{Q as ge}from"./QList.7330d34c.js";import{Q as Xe}from"./QPagination.b4c646c0.js";import{Q as Ce}from"./QTooltip.3e12865c.js";import{u as Qe}from"./stock-delivery.3972e1cd.js";import{C as pe}from"./ClosePopup.77864f63.js";import{u as et}from"./warehouse.89a20565.js";import{u as tt}from"./branch.603580a4.js";import{u as at}from"./raw-material.596a4eea.js";import{u as be}from"./use-quasar.f96041ec.js";import{u as lt}from"./user.54b07de1.js";import{_ as ve}from"./plugin-vue_export-helper.21dcd24c.js";import{u as Ee}from"./use-dialog-plugin-component.48c22021.js";import{t as he}from"./typography-format.6bffeec7.js";import{q as de}from"./date.7612c2b8.js";import{b as Ge}from"./badge-color.f568cd69.js";import{b as ot,Q as Pe,a as rt}from"./QTable.6ef48ae6.js";import{Q as st}from"./QTr.d444abec.js";import{Q as it}from"./QPopupEdit.4f44d374.js";import{Q as Ye}from"./QChip.ead5e565.js";import{Q as nt}from"./QSpinnerIos.dc610790.js";import{Q as ut}from"./QInnerLoading.08c73dfb.js";import{api as He}from"./axios.0019c736.js";import{Q as dt}from"./QSpace.888473d1.js";import"./QResizeObserver.f1935b07.js";import"./rtl.276c3f1b.js";import"./use-panel.54489bd1.js";import"./touch.9135741d.js";import"./selection.66bddd9a.js";import"./use-render-cache.3aae9b27.js";import"./position-engine.a63ef796.js";import"./use-virtual-scroll.645c1690.js";import"./employee.0c9aaa4c.js";import"./QVirtualScroll.eb023b79.js";const Ne=g=>(_e("data-v-4fe356ec"),g=g(),fe(),g),ct=Ne(()=>a("div",{class:"text-h6 text-weight-bold text-white"}," Create Stocks Delivery ",-1)),mt={class:"row justify-between text-h6 text-white"},pt=Ne(()=>a("div",null,"\u{1F69A} Deliver Stocks",-1)),_t={class:"row justify-between"},ft={class:"q-mt-md"},vt={class:"q-mt-md"},yt={class:"q-my-md"},gt=Ne(()=>a("div",{class:"q-ma-sm"},"Raw Materials Name",-1)),bt={key:0,class:"row q-mt-md q-gutter-md"},ht={class:"q-mt-sm",align:"right"},xt={__name:"StocksDeliveryButton",emits:["reFetchDelivery"],setup(g,{emit:U}){var Te,Fe,Me;const Y=lt(),R=oe(()=>Y.userData);console.log("producttable user data",R.value),(Me=(Fe=(Te=R.value)==null?void 0:Te.data)==null?void 0:Fe.employee)!=null&&Me.id;const H=Qe(),I=tt(),P=k([]),q=k(P.value),w=et(),G=k([]),S=k(G.value),r=at(),$=k([]),D=k([]),T=U,W=be(),b=Se({name:"",quantity:"",unit:""}),Z=[{label:"Supplier",value:"Supplier"},{label:"Warehouse",value:"Warehouse"},{label:"Branch",value:"Branch"}],v=[{label:"Warehouse",value:"Warehouse"},{label:"Branch",value:"Branch"}];oe(()=>$.value.length>0);const C=k(""),A=[{label:"Sack",value:"sack"},{label:"Can",value:"can"},{label:"Bottle",value:"bottle"},{label:"Box",value:"box"},{label:"Margarine Tub",value:"baro"},{label:"Gallon",value:"gallon"},{label:"Kilo",value:"kilo"},{label:"Gram",value:"gram"},{label:"Pieces",value:"pcs"}],l=k({quantity:0,kilo:0,gram:0,price:0,pricePerGram:0,pcs:0}),c={sack:{fields:[{model:"quantity",label:"Sack Quantity",type:"number"},{model:"kilo",label:"Kilo per Sack",type:"number"},{model:"gram",label:"Grams",type:"number",readonly:!0},{model:"price",label:"Price per Sack",type:"number",prefix:"\u20B1"},{model:"pricePerGram",label:"Price per Gram",readonly:!0,prefix:"\u20B1"}]},can:{fields:[{model:"quantity",label:"Can Quantity",type:"number"},{model:"kilo",label:"Kilo per Can",type:"number"},{model:"gram",label:"Grams",type:"number"},{model:"price",label:"Price per Can",type:"number",prefix:"\u20B1"},{model:"pricePerGram",label:"Price per Gram",readonly:!0,prefix:"\u20B1"}]},bottle:{fields:[{model:"quantity",label:"Bottle Quantity",type:"number"},{model:"kilo",label:"Kilo per Bottle",type:"number"},{model:"gram",label:"Grams"},{model:"price",label:"Price per Bottle",type:"number",prefix:"\u20B1"},{model:"pricePerGram",label:"Price per Gram",readonly:!0,prefix:"\u20B1"}]},box:{fields:[{model:"quantity",label:"Box Quantity",type:"number"},{model:"pcs",label:"Pieces per Box",type:"number"},{model:"kilo",label:"Kilo per Piece",type:"number"},{model:"gram",label:"Grams"},{model:"price",label:"Price per Pcs",type:"number",prefix:"\u20B1"},{model:"pricePerGram",label:"Price per Gram",readonly:!0,prefix:"\u20B1"}]},gallon:{fields:[{model:"quantity",label:"Gallon Quantity",type:"number"},{model:"kilo",label:"Kilo per Gallon",type:"number"},{model:"gram",label:"Grams"},{model:"price",label:"Price per Gallon",type:"number"},{model:"pricePerGram",label:"Price per Gram",readonly:!0}]},baro:{fields:[{model:"quantity",label:"Tub Quantity",type:"number"},{model:"kilo",label:"Kilo per Tub",type:"number"},{model:"gram",label:"Grams",readonly:!0},{model:"price",label:"Price per Tub",type:"number"},{model:"pricePerGram",label:"Price per Gram",readonly:!0}]}},i=oe(()=>c[C.value]||null);ie(l,n=>{n.kilo&&!isNaN(n.kilo)&&(n.gram=n.kilo*1e3),n.price>0&&n.gram>0?n.pricePerGram=n.price/n.gram:n.pricePerGram=0},{deep:!0});const h=k(!1);k(!1);const F=()=>{!b.name||!C.value||($.value.push({raw_materials_id:b.name.value,raw_materials_name:b.name.label,unit_type:b.name.suffix,category:C.value,quantity:l.value.quantity,kilo:l.value.kilo,gram:l.value.gram,pcs:l.value.pcs,price_per_unit:l.value.price,price_per_gram:l.value.pricePerGram}),console.log("\u{1F4E6} rawMaterialsGroups:",$.value),b.name="",C.value="",l.value={quantity:0,kilo:0,gram:0,price:0,pricePerGram:0,pcs:0})},J=k(!1),se=()=>{J.value=!0},xe=()=>{J.value=!1,Oe()},u=k(""),x=k("");ce(async()=>{await I.fetchBranches(),P.value=I.branches.map(n=>({label:n.name,value:n.id})),q.value=P.value});const Q=(n,_)=>{_(()=>{const o=n.toLowerCase();q.value=n===""?P.value:P.value.filter(M=>M.label.toLowerCase().includes(o))})};ce(async()=>{await w.fetchWarehouses(),G.value=w.warehouses.map(n=>({label:n.name,value:n.id})),S.value=G.value});const j=(n,_)=>{_(()=>{const o=n.toLowerCase();S.value=n===""?G.value:G.value.filter(M=>M.label.toLowerCase().includes(o))})},ye=k(D.value),$e=async()=>{const n=x.value,_=d.to.value||null;try{h.value=!0,await r.fetchBranchWarehouseRawMaterials(n,_),D.value=r.rawMaterials.map(o=>({label:o.name,value:o.id,suffix:o.unit})),ye.value=D.value}catch(o){console.error("Error fetching raw materials: ",o)}finally{h.value=!1}};ce($e);const Oe=()=>{b.name="",b.quantity="",b.unit="",C.value="",l.value={quantity:0,kilo:0,gram:0,price:0,pricePerGram:0,pcs:0},$.value=[],d.raw_material_id=0,d.from="",d.from_name="",d.from_designation="",d.to="",d.to_name="",d.to_designation="",d.supplier_name="",d.quantity=0,d.price_per_unit=0,d.remarks="",d.status="pending",u.value="",x.value=""},We=(n,_)=>{_(()=>{if(n==="")ye.value=D.value;else{const o=n.toLowerCase();ye.value=D.value.filter(M=>M.label.toLowerCase().includes(o))}})},d=Se({raw_material_id:0,from:"",from_name:"",from_designation:"",to:"",to_name:"",to_designation:"",supplier_name:"",quantity:0,price_per_unit:0,remarks:"",status:"Pending"});ie(u,n=>{d.from_designation=n,n==="Supplier"?(d.from="",d.from_name="",d.supplier_name=""):(n==="Warehouse"||n==="Branch")&&(d.from="",d.from_name="")}),ie(x,n=>{d.to_designation=n,(n==="Warehouse"||n==="Branch")&&(d.to="")}),ie([x,()=>d.to],async([n,_])=>{n&&_&&(console.log("\u{1F4E6} Fetching raw materials for:",n,_),await $e())});const Ke=async()=>{var _,o;const n={employee_id:((o=(_=R.value)==null?void 0:_.data)==null?void 0:o.employee_id)||"0",from_designation:u.value,from_id:d.from||null,from_name:u.value==="Supplier"?d.supplier_name:d.from_name,to_designation:x.value,to_id:d.to.value||null,remarks:d.remarks,status:"pending",raw_materials_groups:$.value||[]};console.log("Payloadssss : ",n),W.loading.show();try{console.log("Payload : ",n);const M=await H.createDeliveryStock(n);if(console.log("Response : ",M),M&&M.message==="Raw materials delivery created successfully")T("reFetchDelivery"),xe();else{console.error("\u274C Failed to save delivery: ",M.message);return}}catch(M){console.error("\u274C Failed to save delivery:",M)}finally{W.loading.hide()}};return(n,_)=>(m(),B(z,null,[e(ue,{flat:"",class:"bg-amber-4 q-pa-md rounded-borders-lg row items-center justify-center cursor-pointer custom-shadow-light",onClick:se,style:{width:"300px"}},{default:t(()=>[e(ne,{name:"add_circle",size:"md",color:"white",class:"q-mr-sm"}),ct]),_:1}),a("div",null,[e(Ve,{modelValue:J.value,"onUpdate:modelValue":_[11]||(_[11]=o=>J.value=o)},{default:t(()=>[e(ue,{style:{width:"820px","max-width":"80vw"}},{default:t(()=>[e(K,{class:"gradient-btn"},{default:t(()=>[a("div",mt,[pt,a("div",null,[me(e(L,{icon:"close",flat:"",dense:"",round:""},null,512),[[pe]])])])]),_:1}),e(K,null,{default:t(()=>[a("div",_t,[a("div",null,[a("div",null,[s(" From: "),e(X,{modelValue:u.value,"onUpdate:modelValue":_[0]||(_[0]=o=>u.value=o),options:Z,"emit-value":"","map-options":"",label:"Select Source",outlined:"",dense:"",style:{width:"200px"}},null,8,["modelValue"])]),a("div",ft,[u.value==="Supplier"?(m(),E(ae,{key:0,modelValue:d.supplier_name,"onUpdate:modelValue":_[1]||(_[1]=o=>d.supplier_name=o),outlined:"",dense:"",label:"Enter Supplier Company Name",style:{width:"350px"}},null,8,["modelValue"])):ee("",!0),u.value==="Warehouse"?(m(),E(X,{key:1,modelValue:d.from,"onUpdate:modelValue":[_[2]||(_[2]=o=>d.from=o),_[3]||(_[3]=o=>{const M=S.value.find(we=>we.value===o);d.from_name=(M==null?void 0:M.label)||""})],outlined:"",dense:"",flat:"","use-input":"",clearable:"","input-debounce":"0",options:S.value,"emit-value":"","map-options":"",label:"Search Warehouse",onFilter:j,behavior:"menu","hide-dropdown-icon":"",style:{width:"350px"}},null,8,["modelValue","options"])):ee("",!0),u.value==="Branch"?(m(),E(X,{key:2,modelValue:d.from,"onUpdate:modelValue":[_[4]||(_[4]=o=>d.from=o),_[5]||(_[5]=o=>{const M=q.value.find(we=>we.value===o);d.from_name=(M==null?void 0:M.label)||""})],outlined:"",dense:"",flat:"","use-input":"",clearable:"","input-debounce":"0",options:q.value,"emit-value":"","map-options":"",label:"Search Branch",onFilter:Q,behavior:"menu","hide-dropdown-icon":"",style:{width:"350px"}},null,8,["modelValue","options"])):ee("",!0)])]),a("div",null,[a("div",null,[s(" To: "),e(X,{modelValue:x.value,"onUpdate:modelValue":_[6]||(_[6]=o=>x.value=o),options:v,"emit-value":"","map-options":"",label:"Select Destination",outlined:"",dense:"",style:{width:"200px"}},null,8,["modelValue"]),a("div",vt,[x.value==="Warehouse"?(m(),E(X,{key:0,modelValue:d.to,"onUpdate:modelValue":_[7]||(_[7]=o=>d.to=o),outlined:"",flat:"",dense:"","use-input":"",clearable:"","input-debounce":"0",options:S.value,label:"Search Warehouse",onFilter:j,"hide-dropdown-icon":"",behavior:"menu",style:{width:"350px"}},null,8,["modelValue","options"])):ee("",!0),x.value==="Branch"?(m(),E(X,{key:1,modelValue:d.to,"onUpdate:modelValue":_[8]||(_[8]=o=>d.to=o),outlined:"",dense:"",flat:"","use-input":"",clearable:"","input-debounce":"0",options:q.value,label:"Search Branch",onFilter:Q,behavior:"menu","hide-dropdown-icon":"",style:{width:"350px"}},null,8,["modelValue","options"])):ee("",!0)])])])])]),_:1}),e(qe,{class:"q-my-md"}),e(K,null,{default:t(()=>[a("div",null,[a("div",null,[e(ge,{dense:"",separator:"",class:"box"},{default:t(()=>[e(te,null,{default:t(()=>[e(p,null,{default:t(()=>[e(f,{class:"text-overline"},{default:t(()=>[s(" Raw Materials Name ")]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,{class:"text-overline"},{default:t(()=>[s(" Stocks Category ")]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,{class:"text-overline"},{default:t(()=>[s(" Quantity ")]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,{class:"text-overline"},{default:t(()=>[s(" Price per Unit ")]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,{class:"text-overline"},{default:t(()=>[s(" Price per Gram ")]),_:1})]),_:1}),e(p,{side:""},{default:t(()=>[e(f,null,{default:t(()=>[s("Action")]),_:1})]),_:1})]),_:1}),(m(!0),B(z,null,re($.value,o=>(m(),E(te,{key:o.id},{default:t(()=>[e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[s(y(o.raw_materials_name),1)]),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[s(y(o.category),1)]),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[s(y(o.quantity),1)]),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[s(" \u20B1 "+y(o.price_per_unit),1)]),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[s(" \u20B1 "+y(o.price_per_gram),1)]),_:2},1024)]),_:2},1024),e(p,{side:""},{default:t(()=>[e(L,{dense:"",flat:"",round:"",icon:"delete",color:"red",onClick:M=>$.value.splice($.value.indexOf(o),1)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1}),e(K,null,{default:t(()=>[a("div",yt,[gt,e(X,{modelValue:b.name,"onUpdate:modelValue":_[9]||(_[9]=o=>b.name=o),debounce:"100",outlined:"",clearable:"","chips-color":"primary",options:ye.value,dense:"",label:"Raw Materials",behavior:"menu","use-input":"","hide-dropdown-icon":"",onFilter:We},{"no-option":t(()=>[e(te,null,{default:t(()=>[e(p,{class:"text-grey"},{default:t(()=>[s(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),a("div",null,[a("div",null,[e(X,{modelValue:C.value,"onUpdate:modelValue":_[10]||(_[10]=o=>C.value=o),options:A,"emit-value":"","map-options":"",outlined:"",behavior:"menu",dense:"",label:"Select Category"},null,8,["modelValue"])]),i.value?(m(),B("div",bt,[(m(!0),B(z,null,re(i.value.fields,o=>(m(),B("div",{key:o.model},[e(ae,{modelValue:l.value[o.model],"onUpdate:modelValue":M=>l.value[o.model]=M,modelModifiers:{number:!0},label:o.label,type:o.type||"text",readonly:o.readonly||!1,prefix:o.prefix||"",outlined:"",flat:"",dense:"",style:Ae({width:o.width||"150px"})},null,8,["modelValue","onUpdate:modelValue","label","type","readonly","prefix","style"])]))),128))])):ee("",!0)]),a("div",ht,[e(L,{padding:"sm lg",outline:"",dense:"",icon:"add",color:"purple",onClick:F})])]),_:1}),e(qe,{class:"q-my-md"}),e(Re,{align:"right"},{default:t(()=>[me((m(),E(L,{outline:""},{default:t(()=>[s("Cancel")]),_:1})),[[pe]]),e(L,{onClick:Ke},{default:t(()=>[s("Proceed")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var wt=ve(xt,[["__scopeId","data-v-4fe356ec"]]);const kt={class:"row justify-between text-h6 text-dark"},Pt=a("div",null,"\u270F\uFE0F Edit Delivery",-1),St={class:"q-mb-md"},qt={key:0,class:"row q-mt-md q-gutter-md"},Dt={__name:"EditDialog",props:{item:{type:Object,required:!0},delivery:{type:Object,required:!0}},setup(g){const{capitalizeFirstLetter:U}=he(),{dialogRef:Y,onDialogHide:R,onDialogOK:H,onDialogCancel:I}=Ee(),P=be(),q=Qe();k(!1);const w=g,G=k(w.item.category||""),S=k({...w.item});ie(S,v=>{Object.keys(v).forEach(C=>{["gram","kilo","pcs","price_per_gram","price_per_unit"].includes(C)&&(S.value[C]=v[C])})});const r=[{label:"Sack",value:"sack"},{label:"Can",value:"can"},{label:"Bottle",value:"bottle"},{label:"Box",value:"box"},{label:"Margarine Tub",value:"baro"},{label:"Gallon",value:"gallon"},{label:"Kilo",value:"kilo"},{label:"Gram",value:"gram"},{label:"Pieces",value:"pcs"}],$={sack:{fields:[{model:"quantity",label:"Sack Quantity",type:"number"},{model:"kilo",label:"Kilo per Sack",type:"number"},{model:"gram",label:"Grams",type:"number",readonly:!0},{model:"price",label:"Price per Sack",type:"number",prefix:"\u20B1"},{model:"pricePerGram",label:"Price per Gram",type:"number",readonly:!0,prefix:"\u20B1"}]},can:{fields:[{model:"quantity",label:"Can Quantity",type:"number"},{model:"kilo",label:"Kilo per Can",type:"number"},{model:"gram",label:"Grams",type:"number"},{model:"price",label:"Price per Can",type:"number",prefix:"\u20B1"},{model:"pricePerGram",label:"Price per Gram",type:"number",readonly:!0,prefix:"\u20B1"}]},bottle:{fields:[{model:"quantity",label:"Bottle Quantity",type:"number"},{model:"kilo",label:"Kilo per Bottle",type:"number"},{model:"gram",label:"Grams"},{model:"price",label:"Price per Bottle",type:"number",prefix:"\u20B1"},{model:"pricePerGram",label:"Price per Gram",readonly:!0,prefix:"\u20B1"}]},box:{fields:[{model:"quantity",label:"Box Quantity",type:"number"},{model:"pcs",label:"Pieces per Box",type:"number"},{model:"kilo",label:"Kilo per Piece",type:"number"},{model:"gram",label:"Grams"},{model:"price",label:"Price per Box",type:"number",prefix:"\u20B1"},{model:"pricePerGram",label:"Price per Gram",readonly:!0,prefix:"\u20B1"}]},gallon:{fields:[{model:"quantity",label:"Gallon Quantity",type:"number"},{model:"kilo",label:"Kilo per Gallon",type:"number"},{model:"gram",label:"Grams"},{model:"price",label:"Price per Gallon",type:"number"},{model:"pricePerGram",label:"Price per Gram",readonly:!0}]},baro:{fields:[{model:"quantity",label:"Tub Quantity",type:"number"},{model:"kilo",label:"Kilo per Tub",type:"number"},{model:"gram",label:"Grams",readonly:!0},{model:"price",label:"Price per Tub",type:"number"},{model:"pricePerGram",label:"Price per Gram",readonly:!0}]}};console.log("props item",w.item),console.log("props delivery",w.delivery);const D=oe(()=>$[G.value]||null),T=v=>{if(v==null||v==="")return"";const C=parseFloat(v);return C===0?"0":C%1===0?C.toFixed(0):C.toFixed(3).replace(/\.?0+$/,"")},W=v=>v==null||isNaN(v)?0:parseFloat(parseFloat(v).toString()),b=Se({quantity:T(w.item.quantity||0),kilo:T(w.item.kilo||0),gram:T(w.item.gram||0),pcs:T(w.item.pcs||0),price:W(w.item.price_per_unit||0),pricePerGram:W(w.item.price_per_gram||0)});ie(b,v=>{(v.kilo&&v.quantity&&!isNaN(v.kilo)&&!isNaN(v.quantity)||v.kilo&&!isNaN(v.kilo))&&(v.gram=v.kilo*1e3),v.price>0&&v.gram>0?v.pricePerGram=v.price/v.gram:v.pricePerGram=0},{deep:!0});const Z=async()=>{var A,l;const v={quantity:b.quantity,kilo:b.kilo,gram:b.gram,pcs:b.pcs,price:b.price,price_per_gram:b.pricePerGram,category:G.value,raw_material_id:w.item.raw_material.id,delivery_id:w.delivery.id};console.log("\u{1F7E1} Raw edited data (before cleanup):",v);const C={to_designation:w.delivery.to_designation,quantity:parseFloat(b.quantity||0),kilo:parseFloat(b.kilo||0),gram:parseFloat(b.gram||0),total_grams:parseFloat(b.gram||0),pcs:parseFloat(b.pcs||0),price_per_unit:parseFloat(b.price||0),price_per_gram:parseFloat(b.pricePerGram||0),category:G.value,raw_material_id:w.item.raw_material.id,delivery_su_id:w.item.id,rm_delivery_id:w.delivery.id,item_id:w.item.id,unit_type:w.item.unit_type};P.loading.show();try{console.log("\u{1F7E2} Cleaned data (ready to save):",C);const c=await q.updateDeliveryStocks(C);console.log("Resonse data in componnet:",c),c.data&&c.data.message==="Delivery stock item updated successfully."?(R(),De.create({type:"positive",message:((A=c==null?void 0:c.data)==null?void 0:A.message)||"Delivery stock item updated successfully.",timeout:3e3})):De.create({type:"negative",message:((l=c==null?void 0:c.data)==null?void 0:l.message)||"Failed to update delivery stock item.",timeout:3e3})}catch(c){console.log("error",c)}finally{P.loading.hide()}};return(v,C)=>(m(),E(Ve,{ref_key:"dialogRef",ref:Y,onHide:N(R),persistent:""},{default:t(()=>[e(ue,{style:{width:"820px","max-width":"80vw"}},{default:t(()=>[e(K,{class:"gradient-btn"},{default:t(()=>[a("div",kt,[Pt,a("div",null,[me(e(L,{icon:"close",flat:"",dense:"",round:""},null,512),[[pe]])])])]),_:1}),e(K,null,{default:t(()=>[a("div",null," From: "+y(N(U)(g.delivery.from_name)||"N/A"),1),a("div",null," To: "+y(N(U)(g.delivery.to_data.name)||"N/A"),1)]),_:1}),e(K,null,{default:t(()=>[a("div",St," Raw Materials Name: "+y(N(U)(g.item.raw_material.name)||"N/A"),1),a("div",null,[e(X,{modelValue:G.value,"onUpdate:modelValue":C[0]||(C[0]=A=>G.value=A),options:r,"emit-value":"","map-options":"",outlined:"",behavior:"menu",dense:"",label:"Select Category"},null,8,["modelValue"])]),D.value?(m(),B("div",qt,[(m(!0),B(z,null,re(D.value.fields,A=>(m(),B("div",{key:A.model},[e(ae,{modelValue:b[A.model],"onUpdate:modelValue":l=>b[A.model]=l,modelModifiers:{number:!0},label:A.label,type:A.type||"text",readonly:A.readonly||!1,prefix:A.prefix||"",outlined:"",flat:"",dense:"",style:Ae({width:A.width||"150px"})},null,8,["modelValue","onUpdate:modelValue","label","type","readonly","prefix","style"])]))),128))])):ee("",!0)]),_:1}),e(qe,{class:"q-my-md"}),e(Re,{align:"right"},{default:t(()=>[me((m(),E(L,{outline:""},{default:t(()=>[s("Cancel")]),_:1})),[[pe]]),e(L,{onClick:Z},{default:t(()=>[s("Save")]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const le=g=>(_e("data-v-6849092c"),g=g(),fe(),g),Ct={class:"q-mb-sm",align:"right"},Vt={class:"row q-col-gutter-md"},Qt={class:"col-xs-12 col-md-4"},Gt=le(()=>a("div",{class:"text-h6 text-weight-bold q-mb-sm text-grey-8"}," Delivery Transaction List ",-1)),Nt={class:"row items-center text-caption"},$t={key:0,class:"q-pt-md flex flex-center"},Tt={class:"col-xs-12 col-md-8"},Ft=le(()=>a("div",{class:"row justify-between"},[a("div",{class:"text-h6 text-weight-bold q-mb-sm text-grey-8"}," Items / Raw materials Delivery Details ")],-1)),Mt={key:0},Bt={class:"q-mb-md"},Ut={class:"row items-center"},It=le(()=>a("span",{class:"text-grey-7 text-caption"},"Delivery Date:",-1)),Ht={key:0},At={key:1},Rt={class:"q-ml-md"},Et={key:1,class:"row q-gutter-sm"},Yt={class:"row justify-between q-col-gutter-md q-mb-md"},Lt={class:"col-xs-12 col-sm-4"},Ot=le(()=>a("span",{class:"text-grey-7 text-caption"},"From:",-1)),Wt={class:"text-subtitle1 text-weight-bold"},Kt={class:""},jt=le(()=>a("span",{class:"text-grey-7 text-caption"},"To:",-1)),zt={class:"text-subtitle1 text-weight-bold"},Zt={class:"row justify-between col-xs-12 col-sm-4 q-mb-md"},Jt={class:""},Xt=le(()=>a("span",{class:"text-grey-7 text-caption"},"Status:",-1)),ea={class:"row items-center"},ta={key:0},aa=le(()=>a("span",{class:"text-grey-7 text-caption"},"Remarks:",-1)),la=le(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),oa=le(()=>a("span",null,"Edit",-1)),ra={key:1,class:"text-caption text-grey-6 q-mt-md"},sa={key:1,class:"text-h6 text-grey-6 q-my-xl text-center"},ia={__name:"CreateDeliveryTab",setup(g){const{formatTimestamp:U,capitalizeFirstLetter:Y,formatPricePerGram:R,formatPrice:H}=he(),{getStatusColor:I}=Ge(),P=Qe(),q=be();k(!1);const w=oe(()=>P.deliveryStocks.data),G=oe(()=>P.loading),S=oe(()=>{var u;return((u=P.deliveryStocks)==null?void 0:u.pagination)||{current_page:1,last_page:1,per_page:5}}),r=k(null),$=k("");let D=null;const T=k(!1),W=k(""),b=k(""),Z=u=>{if(!u)return{datePart:"",timePart:""};const x=de.formatDate(u,"YYYY-MM-DD hh:mm A",{timeZone:"Asia/Manila"}),[V,Q,O]=x.split(" ");return{datePart:V,timePart:`${Q} ${O}`}},v=(u,x)=>{x==="date"&&(W.value=u),x==="time"&&(b.value=u)},C=()=>{if(r.value){const u=Z(r.value.created_at);W.value=u.datePart,b.value=u.timePart,T.value=!0}},A=async()=>{var u,x,V;try{if(G.value=!0,!((u=r.value)!=null&&u.id))return;const Q=`${W.value} ${b.value}`;console.log("Saving new datetime:",Q);const O=await P.updateDeliveryDate(r.value.id,Q);console.log("Response after update:",O);const j=(O==null?void 0:O.message)||"Unknown server response.";(O==null?void 0:O.new_created_at)&&j.includes("successfully")?(r.value.created_at=O.new_created_at,q.notify({type:"positive",message:j}),console.log("Updated created_at inUI:",r.value.created_at)):q.notify({type:"warning",message:j||"Delivery date was not updated."})}catch(Q){console.error("Error updating date:",Q);const O=((V=(x=Q.response)==null?void 0:x.data)==null?void 0:V.message)||"Failed to update delivery date & time.";q.notify({type:"negative",message:O})}finally{G.value=!1,T.value=!1}},l=()=>{T.value=!1},c=()=>{D&&clearTimeout(D),D=setTimeout(()=>{i(1)},500)},i=async(u=1)=>{q.loading.show();try{await P.fetchDeliveryStocks(u,S.value.per_page,$.value),!w.value.length&&r.value&&(r.value=null),r.value&&!w.value.some(x=>x.id===r.value.id)&&(r.value=null),!r.value&&w.value.length>0&&(r.value=w.value[0]),console.log("deliveryList",w.value),console.log("pagination",S.value)}catch(x){console.error("Error fetching delivery stocks in component:",x),q.notify({type:"negative",message:"Failed to load deliveries. Please try again."})}finally{q.loading.hide()}};ce(()=>{i(S.value.current_page)});const h=(u,x)=>{console.log("Editing item:",u),console.log("Parent delivery:",x),q.dialog({component:Dt,componentProps:{item:u,delivery:x}})},F=u=>{r.value=u},J=u=>{i(u)},se=u=>u==null?"No Quantity":parseFloat(u);ie(r,u=>{console.log("Selected Delivery changed:",u)});const xe=u=>{if(!r.value||u.id!==r.value.id)return"";switch(u.to_designation){case"Warehouse":return"selected-delivery-item";case"Branch":return"branch-selected-item";case"Supplier":return"default-selected-item";default:return""}};return(u,x)=>(m(),B(z,null,[a("div",Ct,[e(wt,{onReFetchDelivery:i})]),a("div",Vt,[a("div",Qt,[e(ue,{flat:"",class:"bg-white q-pa-md rounded-borders-lg custom-shadow-light"},{default:t(()=>[Gt,e(ae,{outlined:"",dense:"",placeholder:"Search delivery",class:"q-mb-sm","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6",modelValue:$.value,"onUpdate:modelValue":[x[0]||(x[0]=V=>$.value=V),c]},{append:t(()=>[e(ne,{name:"search",color:"grey-6"})]),_:1},8,["modelValue"]),e(ge,{separator:""},{default:t(()=>[G.value?(m(!0),B(z,{key:0},re(S.value.per_page,V=>(m(),E(te,{key:V},{default:t(()=>[e(p,null,{default:t(()=>[e(Ie,{type:"text",width:"80%"}),e(Ie,{type:"text",width:"40%"})]),_:1})]),_:2},1024))),128)):(m(!0),B(z,{key:1},re(w.value.data,V=>(m(),E(te,{key:V.id,class:ke(["q-py-md",xe(V)]),clickable:"",onClick:Q=>F(V)},{default:t(()=>[e(p,null,{default:t(()=>[e(f,{class:"text-subtitle1 text-weight-bold text-grey-8"},{default:t(()=>{var Q;return[s(y(N(Y)(((Q=V.to_data)==null?void 0:Q.name)||"N/A")),1)]}),_:2},1024),e(f,{caption:"",class:"text-grey-6"},{default:t(()=>[s(y(V.items.length||"N/A")+" items ",1)]),_:2},1024)]),_:2},1024),e(p,{side:""},{default:t(()=>[e(f,null,{default:t(()=>[s(y(N(U)(V.created_at)||"N/A"),1)]),_:2},1024),a("div",Nt,[e(ne,{name:"fiber_manual_record",color:V.status?N(I)(V.status):"grey-6",size:"8px",class:"q-mr-xs"},null,8,["color"]),a("span",{class:ke(V.status?`text-${N(I)(V.status)}`:"text-grey-6")},y(N(Y)(V.status||"No Status")),3)])]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1}),S.value.last_page>1?(m(),B("div",$t,[e(Xe,{modelValue:S.value.current_page,"onUpdate:modelValue":[x[1]||(x[1]=V=>S.value.current_page=V),J],max:S.value.last_page,"max-pages":5,"boundary-links":"","direction-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward"},null,8,["modelValue","max"])])):ee("",!0)]),_:1})]),a("div",Tt,[e(ue,{flat:"",class:"bg-white q-pa-md rounded-borders-lg custom-shadow-light"},{default:t(()=>[e(K,null,{default:t(()=>[Ft]),_:1}),e(K,null,{default:t(()=>{var V;return[r.value?(m(),B("div",Mt,[a("div",Bt,[a("div",Ut,[a("div",null,[It,T.value?(m(),B("div",At,[e(ae,{filled:"",outlined:"",dense:"","model-value":Z(r.value.created_at).datePart,"onUpdate:modelValue":x[2]||(x[2]=Q=>v(Q,"date")),mask:"####-##-##",label:"Date",hint:"Format: YYYY-MM-DD",class:"q-mb-sm"},null,8,["model-value"]),e(ae,{filled:"",outlined:"",dense:"","model-value":Z(r.value.created_at).timePart,"onUpdate:modelValue":x[3]||(x[3]=Q=>v(Q,"time")),mask:"##:## AA",label:"Time (AM/PM)"},null,8,["model-value"])])):(m(),B("div",Ht,y(N(U)(r.value.created_at)),1))]),a("div",Rt,[T.value?(m(),B("div",Et,[e(L,{flat:"",round:"",dense:"",icon:"check",color:"positive",onClick:A}),e(L,{flat:"",round:"",dense:"",icon:"close",color:"negative",onClick:l})])):(m(),E(L,{key:0,flat:"",round:"",dense:"",icon:"edit",color:"primary",onClick:C},{default:t(()=>[e(Ce,null,{default:t(()=>[s("Edit Date & Time")]),_:1})]),_:1}))])])]),a("div",Yt,[a("div",Lt,[Ot,a("div",Wt,y(N(Y)(r.value.from_name||"No Name")),1)]),a("div",Kt,[jt,a("div",zt,y(N(Y)(((V=r.value.to_data)==null?void 0:V.name)||"No Name")),1)])]),a("div",Zt,[a("div",Jt,[Xt,a("div",ea,[e(ne,{name:"fiber_manual_record",color:N(I)(r.value.status),size:"10px",class:"q-mr-xs"},null,8,["color"]),a("span",{class:ke(r.value.status?`text-${N(I)(r.value.status)}`:"text-grey-6")},y(N(Y)(r.value.status||"No Status")),3)])]),r.value.status==="declined"?(m(),B("div",ta,[aa,a("div",null,y(r.value.remarks||"No Remarks"),1)])):ee("",!0)]),a("div",null,[la,r.value.items&&r.value.items.length?(m(),E(ge,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(te,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[s(" Raw Materials Name ")]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[s(" Raw Materials Code ")]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[s(" Stocks Category ")]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[s(" Quantity ")]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[s(" Price per Unit ")]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[s(" Price per Gram ")]),_:1})]),_:1}),e(p,{side:""},{default:t(()=>[e(f,null,{default:t(()=>[s(" Action ")]),_:1})]),_:1})]),_:1}),(m(!0),B(z,null,re(r.value.items,(Q,O)=>(m(),E(te,{key:O},{default:t(()=>[e(p,null,{default:t(()=>[e(f,null,{default:t(()=>{var j;return[s(y(((j=Q.raw_material)==null?void 0:j.name)||"No Name"),1)]}),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>{var j;return[s(y(((j=Q.raw_material)==null?void 0:j.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[s(y(Q.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[s(y(se(Q.quantity)),1)]),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[s(y(N(H)(Q.price_per_unit)),1)]),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(f,null,{default:t(()=>[s(y(N(R)(Q.price_per_gram)),1)]),_:2},1024)]),_:2},1024),e(p,{side:""},{default:t(()=>[e(f,null,{default:t(()=>[e(L,{color:"dark",flat:"",round:"",dense:"",icon:"edit",onClick:j=>h(Q,r.value)},null,8,["onClick"]),e(Ce,null,{default:t(()=>[oa]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(m(),B("div",ra," No items in this delivery "))])])):(m(),B("div",sa," Select a delivery from the list to see details "))]}),_:1})]),_:1})])])],64))}};var na=ve(ia,[["__scopeId","data-v-6849092c"]]);const ua=je("supplier-history",()=>{const g=k(null),U=k([]);return{supplierHistory:g,supplierHistories:U,fetchSupplierHistory:async(H=1,I=5,P="")=>{console.log("store history");try{const q=await He.get("/api/fetch-supplier-records",{params:{page:H,per_page:I,search:P}});console.log("responsess",q.data),U.value=q.data,console.log("supplierHistoriesssss",U.value)}catch(q){console.log("error",q)}},updateSupplierHistoriesDateTime:async(H,I)=>{console.log("Updating date time for delivery:",H,"to new time:",I);try{const P=await He.put(`/api/update-supplier-history-date-time/${H}`,{created_at:I});return console.log("response",P.data),P.data}catch(P){console.log("Error updating date time:",P)}}}});const Le=g=>(_e("data-v-9cbcc820"),g=g(),fe(),g),da={class:"text-h6 text-white"},ca=Le(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),ma=Le(()=>a("strong",null,"Total Cost:",-1)),pa={__name:"ViewIngredientItems",props:{row:{type:Object,required:!0}},setup(g){const{capitalizeFirstLetter:U}=he(),{getStatusColor:Y}=Ge(),{dialogRef:R,onDialogHide:H}=Ee(),I=g;console.log("props",I.row);const P=G=>{const S=parseFloat(G);return isNaN(S)?"\u20B10.00":`\u20B1${S.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`},q=G=>{const S=parseFloat(G.quantity)||0,r=parseFloat(G.price_per_unit)||0;return S*r},w=G=>G.reduce((r,$)=>{const D=parseFloat($.quantity)||0,T=parseFloat($.price_per_unit)||0;return r+D*T},0);return(G,S)=>(m(),E(Ve,{ref_key:"dialogRef",ref:R,onHide:N(H),persistent:"","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(ue,{style:{width:"820px","max-width":"80vw"}},{default:t(()=>[e(K,{class:"row bg-background text-h6"},{default:t(()=>[a("div",da,y(N(U)(g.row.supplier_name||"N/A")),1),e(dt),a("div",null,[me(e(L,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[pe]])])]),_:1}),e(K,null,{default:t(()=>[a("div",null,[s(" Status: "),e(Ye,{color:N(Y)(g.row.status),outline:"",square:"",dense:""},{default:t(()=>[s(y(N(U)(g.row.status)||"N/A"),1)]),_:1},8,["color"])])]),_:1}),e(K,null,{default:t(()=>[ca]),_:1}),e(K,null,{default:t(()=>[e(ge,{dense:"",separator:"",class:"box"},{default:t(()=>[e(te,null,{default:t(()=>[e(p,null,{default:t(()=>[e(f,{class:"text-overline"},{default:t(()=>[s(" Raw Materials Name ")]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,{class:"text-overline"},{default:t(()=>[s(" Code ")]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,{class:"text-overline"},{default:t(()=>[s(" Quantity ")]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(f,{class:"text-overline"},{default:t(()=>[s(" TCPI ")]),_:1})]),_:1}),e(p,{side:""},{default:t(()=>[e(f,{class:"text-overline"},{default:t(()=>[s(" Total Cost ")]),_:1})]),_:1})]),_:1}),(m(!0),B(z,null,re(I.row.supplier_ingredients,(r,$)=>(m(),E(te,{key:$},{default:t(()=>[e(p,null,{default:t(()=>[e(f,{class:"text-caption"},{default:t(()=>{var D;return[s(y(((D=r.raw_materials)==null?void 0:D.name)||"N/A"),1)]}),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(f,{class:"text-caption"},{default:t(()=>{var D;return[s(y(((D=r.raw_materials)==null?void 0:D.code)||"N/A"),1)]}),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(f,{class:"text-caption"},{default:t(()=>[s(y(parseFloat(r.quantity||"N/A"))+" "+y(r.category||""),1)]),_:2},1024)]),_:2},1024),e(p,null,{default:t(()=>[e(f,{class:"text-caption"},{default:t(()=>[s(y(P(parseFloat(r.price_per_unit||"N/A"))),1)]),_:2},1024)]),_:2},1024),e(p,{side:""},{default:t(()=>[e(f,{class:"text-caption"},{default:t(()=>[s(y(P(q(r)||"N/A")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(K,{class:"q-mt-md text-right text-subtitle1"},{default:t(()=>[ma,s(" "+y(P(w(I.row.supplier_ingredients)||"\u20B10.00")),1)]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var _a=ve(pa,[["__scopeId","data-v-9cbcc820"]]);const fa=g=>(_e("data-v-9fb2d940"),g=g(),fe(),g),va=fa(()=>a("div",{class:"text-h6 text-primary text-center q-mb-sm"}," Edit Date & Time ",-1)),ya={class:"text-subtitle2 q-mb-sm"},ga={class:"row justify-end q-mt-md"},ba={__name:"SupplierHistoryTab",setup(g){const{formatTimestamp:U,capitalizeFirstLetter:Y}=he(),{getStatusColor:R}=Ge(),H=ua(),I=oe(()=>H.supplierHistories),P=l=>{if(!l)return"";const c=de.extractDate(l,"YYYY-MM-DDTHH:mm:ss.SSSZ");return de.formatDate(c,"YYYY-MM-DD hh:mm AA")},q=l=>{if(!l)return{datePart:"",timePart:""};const c=l.replace(/\.\d+Z$/,"Z"),i=new Date(c);if(isNaN(i))return console.error("Invalid date string: ",l),{datePart:"",timePart:""};const h=de.formatDate(i,"YYYY-MM-DD"),F=de.formatDate(i,"hh:mm A");return{datePart:h,timePart:F}},w=l=>l&&l.split(" ")[0]||"",G=l=>{if(!l)return"";const c=l.split(" ");return c.length===3?`${c[1]} ${c[2]}`:c.length===2?c[1]:""},S=(l,c,i)=>{let h=w(l.value||P(l.initialValue)),F=G(l.value||P(l.initialValue));i==="date"?h=c:i==="time"&&(F=c),h&&F?l.value=`${h} ${F}`:h?l.value=h:F?l.value=F:l.value=""},r=k([]),$=be(),D=k(!1),T=k({page:1,rowsPerPage:0,rowsNumber:0}),W=k(""),b=async(l,c)=>{if(!(!l.rm_delivery_id||!c))try{D.value=!0;const i=/\d{1,2}:\d{2}/.test(c);let h=c;if(!i){const se=q(l.created_at).timePart||"12:00 AM";h=`${c} ${se}`}const F=await H.updateSupplierHistoriesDateTime(l.rm_delivery_id,h);console.log("Updated datetime payload:",h),console.log("response",F),F!=null&&F.created_at&&(l.created_at=F.created_at),$.notify({type:"positive",message:"Date & time updated successfully!",position:"top"})}catch(i){console.error("Error updating DTR:",i),$.notify({type:"negative",message:"Failed to update date & time.",position:"top"})}finally{D.value=!1}},Z=async(l=0,c=5,i="")=>{console.log("Fetching recipe costs in store...");try{D.value=!0,I.value=await H.fetchSupplierHistory(l,c,i),console.log("supplierHistories",I.value);const{data:h,current_page:F,per_page:J,total:se}=I.value;r.value=h,console.log("supplierHistoriesData.value",r.value),T.value.page=F,console.log("pagination.value.page",T.value.page),T.value.rowsPerPage=J,console.log("pagination.value.rowsPerPage",T.value.rowsPerPage),T.value.rowsNumber=se,console.log("pagination.value.rowsNumber",T.value.rowsNumber)}catch(h){console.log("Error fetching recipe costs:",h),De.create({message:"Error fetching recipe costs",color:"negative",position:"top"})}finally{D.value=!1}};ce(Z);const v=l=>{console.log("props",l),Z(l.pagination.page,l.pagination.rowsPerPage,l.filter)},C=l=>{console.log("Editing row:",l),$.dialog({component:_a,componentProps:{row:l}})},A=[{name:"date",required:!0,label:"Date",align:"center",field:"created_at"},{name:"supplier",required:!0,label:"Supplier",align:"center",field:l=>l.supplier_name?Y(l.supplier_name):"N/A"},{name:"status",required:!0,label:"Status",align:"center",field:"status"},{name:"number_of_items",required:!0,label:"Items",align:"center"}];return(l,c)=>(m(),B(z,null,[a("div",null,[e(ae,{class:"q-pb-lg q-pl-mb",modelValue:W.value,"onUpdate:modelValue":[c[0]||(c[0]=i=>W.value=i),W.value],outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:"",style:{width:"450px","max-width":"1500px","min-width":"100px"}},{append:t(()=>[e(ne,{name:"search"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),e(rt,{flat:"",bordered:"","row-key":"id",columns:A,rows:r.value||[],loading:D.value,pagination:T.value,"onUpdate:pagination":c[1]||(c[1]=i=>T.value=i),"rows-per-page-options":[5,7,10,0],filter:W.value,onRequest:v},{header:t(i=>[e(st,{props:i,class:"gradient-header text-white text-weight-bold"},{default:t(()=>[(m(!0),B(z,null,re(i.cols,h=>(m(),E(ot,{key:h.name,props:i,class:"text-center text-subtitle2"},{default:t(()=>[s(y(h.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell-date":t(i=>[e(Pe,{props:i,class:"cursor-pointer"},{default:t(()=>[a("span",null,[s(y(i.row.created_at?N(U)(i.row.created_at):"N/A")+" ",1),e(Ce,{class:"bg-blue-grey-8"},{default:t(()=>[s(" Edit Date ")]),_:1})]),e(it,{modelValue:i.row.created_at,"onUpdate:modelValue":h=>i.row.created_at=h,persistent:"",onSave:h=>b(i.row,h)},{default:t(h=>[a("div",null,[va,a("div",ya," Supplier: "+y(N(Y)(i.row.supplier_name)),1),e(ae,{filled:"","model-value":q(i.row.created_at).datePart,"onUpdate:modelValue":F=>S(h,F,"date"),mask:"####-##-##",label:"Date",hint:"Format: YYYY-MM-DD",class:"q-mb-sm"},null,8,["model-value","onUpdate:modelValue"]),e(ae,{filled:"","model-value":q(i.row.created_at).timePart,"onUpdate:modelValue":F=>S(h,F,"time"),mask:"##:## AA",label:"Time (AM/PM)"},null,8,["model-value","onUpdate:modelValue"]),a("div",ga,[e(L,{flat:"",label:"Cancel",color:"primary",onClick:h.cancel},null,8,["onClick"]),e(L,{flat:"",label:"Save",color:"primary",onClick:h.set},null,8,["onClick"])])])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"])]),"body-cell-status":t(i=>[e(Pe,{props:i},{default:t(()=>[e(Ye,{color:N(R)(i.row.status),"text-color":"white",size:"sm",square:""},{default:t(()=>[s(y(N(Y)(i.row.status)||"N/A"),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-number_of_items":t(i=>[e(Pe,{props:i},{default:t(()=>[e(L,{flat:"",dense:"",color:"primary",label:`${i.row.supplier_ingredients.length} ${i.row.supplier_ingredients.length===1?"item":"items"}`,onClick:h=>C(i.row)},null,8,["label","onClick"])]),_:2},1032,["props"])]),loading:t(()=>[e(ut,{showing:""},{default:t(()=>[e(nt,{size:"50px",color:"grey-10"})]),_:1})]),_:1},8,["rows","loading","pagination","filter"])],64))}};var ha=ve(ba,[["__scopeId","data-v-9fb2d940"]]);const xa=g=>(_e("data-v-3184aad5"),g=g(),fe(),g),wa={class:"q-pa-md q-gutter-sm flex flex-column items-center"},ka=xa(()=>a("div",{class:"text-weight-bold"},"Create Delivery",-1)),Pa={__name:"StocksPage",setup(g){const U=k("delivery");return(Y,R)=>(m(),E(Je,{class:"q-pa-md bg-grey-2"},{default:t(()=>[a("div",null,[e(ze,{modelValue:U.value,"onUpdate:modelValue":R[0]||(R[0]=H=>U.value=H),dense:"",outline:"",flat:"","no-caps":"","inline-label":"",class:"user-tab justify-center q-ma-md",align:"justify","active-color":"teal","indicator-color":"teal"},{default:t(()=>[e(Be,{class:"text-grey-7",name:"delivery"},{default:t(()=>[a("div",wa,[e(ne),ka])]),_:1}),e(Be,{class:"text-grey-7",name:"supplier_history",label:"Supplier History"})]),_:1},8,["modelValue"])]),e(Ze,{modelValue:U.value,"onUpdate:modelValue":R[1]||(R[1]=H=>U.value=H),animated:"",class:"bg-grey-2"},{default:t(()=>[e(Ue,{name:"delivery"},{default:t(()=>[e(na)]),_:1}),e(Ue,{name:"supplier_history"},{default:t(()=>[e(ha)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var pl=ve(Pa,[["__scopeId","data-v-3184aad5"]]);export{pl as default};
