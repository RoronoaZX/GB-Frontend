import{r as g,c as G,z as X,u as qe,o as b,a3 as R,J as n,f as e,w as l,K as f,a0 as U,$ as F,bf as E,bb as N,aK as ie,e as $,bd as L,M as P,Q as z,ae as O,bh as Se,a2 as le,a4 as J,t as pe,L as Y,I as M,aJ as ce,O as ye,R as ge,d as ve,N as ee,bc as he,a5 as we}from"./index.910c5d89.js";import{Q as I}from"./QTooltip.30eb7606.js";import{Q as K}from"./QPopupEdit.c0d87753.js";import{Q,a as Te}from"./QTable.136f186f.js";import{Q as $e}from"./QBadge.151c3917.js";import{Q as W}from"./QSelect.c365d1b0.js";import{Q as Ae}from"./QSpinnerIos.52d255ef.js";import{Q as Pe}from"./QInnerLoading.09ba8530.js";import{C as j}from"./ClosePopup.e881cbae.js";import{f as me,u as be,t as de,a as Ce,g as Fe,b as Me,e as ue,c as re,d as Ne,h as Ie,i as Qe,j as Re,k as ze,v as fe,l as Be,m as Ke,n as Le,o as We}from"./useEmployeeFunctions.f819c234.js";import{u as oe}from"./employee.1d771f28.js";import{_ as Oe}from"./GB_LOGO.b766a815.js";import{p as Ve,v as je}from"./vfs_fontes.6ee410e6.js";import{_ as Z}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as _e}from"./QSpace.1a3bac14.js";import{u as xe}from"./branch.752ec5e1.js";import{a as te,b as Ee}from"./QMenu.08ee43ed.js";import{Q as Ue}from"./QList.f7840e8e.js";import{api as De}from"./axios.b52a58d3.js";import{u as He}from"./warehouse.7b2bf6c1.js";import"./position-engine.4c388694.js";import"./selection.6f067596.js";import"./QVirtualScroll.b09d8b07.js";import"./use-virtual-scroll.51195a51.js";import"./rtl.276c3f1b.js";import"./QChip.7756a18f.js";import"./date.9007c85d.js";var Ge="/assets/IDLogo.76e564fd.png";Ve.exports.vfs=je;function Je(V,v){const T=g(!1),q=g(""),h=w=>{D(V,S=>{D(v,_=>{const k=x(w,S,_);Ve.exports.createPdf(k).getDataUrl(m=>{q.value=m,T.value=!0})})})},D=(w,S)=>{const _=new FileReader,k=new XMLHttpRequest;k.open("GET",w,!0),k.responseType="blob",k.onload=function(){k.status===200?(_.readAsDataURL(k.response),_.onloadend=function(){S(_.result)}):console.error("Failed to load image.")},k.send()},x=(w,S,_)=>({pageSize:{width:323,height:204},pageMargins:[0,0,0,0],background:[{image:_,width:140,opacity:.1,absolutePosition:{x:70,y:15}}],content:[{canvas:[{type:"rect",x:0,y:0,w:260,h:150,lineWidth:1,lineColor:"black",dash:{length:4}}],absolutePosition:{x:0,y:0}},{alignment:"justify",columns:[{image:S,width:100,height:153,alignment:"left",margin:[-8,-4,0,0]},{stack:[{text:"GB Bakeshop",style:"header",color:"red",margin:[0,0,50,0]},{text:`Name  : ${me(w)}`,style:"name"},{text:`Position : ${w.position}`,style:"position"},{text:`Phone  : ${w.phone}`,style:"info"},{qr:`${w.id} - ${me(w)} - ${w.position}`,fit:87,foreground:"red",background:"yellow",margin:[30,7,0,0]}]}]}],styles:{header:{fontSize:15,bold:!0,alignment:"center"},name:{fontSize:8,bold:!0,margin:[5,1,0,0]},position:{fontSize:8,margin:[5,2,0,0]},info:{fontSize:7,margin:[5,2,0,0]},address:{fontSize:7,margin:[0,5,0,0]}}});return{dialog:T,pdfUrl:q,handlePrintID:h}}const Xe={style:{width:"100%"}},Ye={class:"text-subtitle2"},Ze={class:"row q-gutter-md"},et={class:"row justify-center q-gutter-x-md"},tt={class:"text-white q-ma-sm",align:"right"},lt=["src"],ot={__name:"TableSection",setup(V){const{dialog:v,pdfUrl:T,handlePrintID:q}=Je(Ge,Oe),h=be(),D=oe(),x=G(()=>D.employees),w=g([]),S=u=>{var o;return console.log("designation_type:",(o=u.designation)==null?void 0:o.designation_type),We(u)},_=g({page:1,rowsPerPage:0,rowsNumber:0}),k=g("");g(!1),console.log("employees fetch madepaker",x.value),X(async()=>{await r()}),X(async()=>{await h.fetchEmploymentType(),ue.value=h.employmentType.map(u=>({label:u.category,value:u.id})),console.log("Employment Type Options:",ue.value)});const B=g(null);console.log("===================================="),console.log("employmentTypeIdsss",B.value),console.log("====================================");const r=async(u=0,a=5,o="")=>{try{de.value=!0,x.value=await D.fetchEmployeeWithEmploymentType(u,a,o),console.log("fetchEmployeeWithEmploymentType",x.value);const{data:t,current_page:i,per_page:p,total:c}=x.value;w.value=t,console.log("employeesRowsData.value",w.value),_.value.page=i,console.log("pagination.value.page",_.value.page),_.value.rowsPerPage=p,console.log("pagination.value.rowsPerPage",_.value.rowsPerPage),_.value.rowsNumber=c,console.log("pagination.value.rowsNumber",_.value.rowsNumber)}catch(t){console.log("employee madepaker",t)}finally{de.value=!1}},A=u=>{console.log("porps",u),r(u.pagination.page,u.pagination.rowsPerPage,u.filter)};return qe(k,async u=>{await r(_.value.page,_.value.rowsPerPage,u)}),(u,a)=>(b(),R(J,null,[n("div",Xe,[e(Te,{class:"user-card",title:"Employees",rows:w.value,columns:E(Le),"row-key":"fullname",pagination:_.value,"onUpdate:pagination":a[1]||(a[1]=o=>_.value=o),"rows-per-page-options":[5,7,10,0],loading:E(de),filter:k.value,onRequest:A},{"top-right":l(()=>[e(f,{modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=o=>k.value=o),outlined:"",dense:"",flat:"",label:"Search",debounce:"300",style:{width:"300px"}},null,8,["modelValue"])]),"body-cell-fullname":l(o=>[e(Q,{key:"fullname",props:o},{default:l(()=>[n("div",Ye,[U(F(E(me)(o.row))+" ",1),e(I,{class:"bg-blue-grey-8",offset:[10,10]},{default:l(()=>[U(" Edit Employee Name ")]),_:1})]),e(K,{modelValue:o.row,"onUpdate:modelValue":[t=>o.row=t,t=>E(Ce)(o.row,t)],buttons:"",title:"Edit Employee Full Name"},{default:l(({value:t,set:i})=>[n("div",Ze,[e(f,{class:"text-capitalize",modelValue:t.firstname,"onUpdate:modelValue":p=>t.firstname=p,label:"First Name",outlined:"",flat:"",color:"positive",dense:"",autofucos:"",onKeyup:N(p=>i(t),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),e(f,{class:"text-capitalize",modelValue:t.middlename,"onUpdate:modelValue":p=>t.middlename=p,label:"Middle Name",outlined:"",flat:"",color:"positive",dense:"",autofucos:"",onKeyup:N(p=>i(t),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),e(f,{class:"text-capitalize",modelValue:t.lastname,"onUpdate:modelValue":p=>t.lastname=p,label:"Last Name",outlined:"",flat:"",color:"positive",dense:"",autofucos:"",onKeyup:N(p=>i(t),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-employmentType":l(o=>[e(Q,{props:o},{default:l(()=>{var t;return[e($e,{color:E(Fe)((t=o.row.employment_type)==null?void 0:t.category)},{default:l(()=>{var i;return[U(F(((i=o.row.employment_type)==null?void 0:i.category)||"N/A")+" ",1),e(I,{class:"bg-blue-grey-8",offset:[10,10]},{default:l(()=>[U(" Edit Employment Type ")]),_:1})]}),_:2},1032,["color"]),e(K,{modelValue:o.row.employment_type.id,"onUpdate:modelValue":i=>o.row.employment_type.id=i,buttons:"",title:"Edit Employment Type",onSave:i=>E(Me)(o.row,i,r)},{default:l(i=>[e(W,{modelValue:i.value,"onUpdate:modelValue":p=>i.value=p,options:E(ue),autofocus:"","option-label":"label","option-value":"value","emit-value":"","map-options":"",dense:"",outlined:"",behavior:"menu",onKey:p=>i.set(i.value)},null,8,["modelValue","onUpdate:modelValue","options","onKey"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]}),_:2},1032,["props"])]),"body-cell-address":l(o=>[e(Q,{props:o,style:{"text-align":"justify"}},{default:l(()=>[n("div",null,[U(F(E(re)(o.row.address))+" ",1),e(I,{class:"bg-blue-grey-8",offset:[10,10]},{default:l(()=>[U(" Edit Address ")]),_:1})]),e(K,{"onUpdate:modelValue":[t=>E(Ne)(o.row,t),t=>o.row.address=t],modelValue:o.row.address,buttons:"",title:"Edit Address"},{default:l(t=>[e(f,{class:"text-capitalize",modelValue:t.value,"onUpdate:modelValue":i=>t.value=i,dense:"",autofocus:"",counter:"",onKeyup:N(t.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-phone":l(o=>[e(Q,{props:o},{default:l(()=>[n("div",null,[U(F(E(re)(o.row.phone))+" ",1),e(I,{class:"bg-blue-grey-8",offset:[10,10]},{default:l(()=>[U(" Edit Phone ")]),_:1})]),e(K,{"onUpdate:modelValue":[t=>E(Ie)(o.row,t),t=>o.row.phone=t],modelValue:o.row.phone,buttons:"",title:"Edit Phone"},{default:l(t=>[e(f,{modelValue:t.value,"onUpdate:modelValue":i=>t.value=i,dense:"",autofocus:"",mask:"+(63) ### - ### - ####",counter:"",onKeyup:N(t.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-birthdate":l(o=>[e(Q,{props:o},{default:l(()=>[n("div",null,[U(F(E(Qe)(o.row.birthdate))+" ",1),e(I,{class:"bg-blue-grey-8",offset:[10,10]},{default:l(()=>[U(" Edit Birthdate ")]),_:1})]),e(K,{"onUpdate:modelValue":[t=>E(Re)(o.row,t),t=>o.row.birthdate=t],modelValue:o.row.birthdate,buttons:"",title:"Edit Birthdate"},{default:l(t=>[e(f,{modelValue:t.value,"onUpdate:modelValue":i=>t.value=i,dense:"",autofocus:"",type:"date",hint:"mm/dd/yyyy",onKeyup:N(t.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-designation":l(o=>[e(Q,{props:o},{default:l(()=>{var t,i;return[n("div",{class:ie({"editable-cell":o.row.designation})},[U(F(E(re)((t=o.row.designation)==null?void 0:t.name)||"N/A")+" ",1),(i=o.row.designation)!=null&&i.name?(b(),$(I,{key:0,class:"bg-blue-grey-8",offset:[10,10]},{default:l(()=>[U(" Edit Designation ")]),_:1})):L("",!0)],2),o.row.designation?(b(),$(K,{key:0,modelValue:o.row.designation.id,"onUpdate:modelValue":p=>o.row.designation.id=p,buttons:"",title:"Edit Employee designation",onSave:p=>E(ze)(o.row.designation,p,r)},{default:l(p=>[e(W,{modelValue:p.value,"onUpdate:modelValue":c=>p.value=c,options:S(o.row),"option-value":"id","option-label":"name","emit-value":"","map-options":"",dense:"",outlined:"",onKeyup:N(c=>p.set(p.value),["enter"])},null,8,["modelValue","onUpdate:modelValue","options","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])):L("",!0)]}),_:2},1032,["props"])]),"body-cell-time_in":l(o=>[e(Q,{props:o},{default:l(()=>{var t;return[n("div",{class:ie({"editable-cell":o.row.designation})},[U(F(((t=o.row.designation)==null?void 0:t.time_in)||"N/A")+" ",1),o.row.designation?(b(),$(I,{key:0,class:"bg-blue-grey-8",offset:[10,10]},{default:l(()=>[U(" Edit Time In ")]),_:1})):L("",!0)],2),o.row.designation?(b(),$(K,{key:0,"onUpdate:modelValue":[i=>E(Be)(o.row.designation,i),i=>o.row.designation.time_in=i],modelValue:o.row.designation.time_in,buttons:"",title:"Edit Employee Time In"},{default:l(i=>[e(f,{modelValue:i.value,"onUpdate:modelValue":[p=>i.value=p,p=>i.value=p],"model-value":i.value,dense:"",autofocus:"",mask:"##:## AA",rules:[E(fe)],hint:"Format: 01:00 AM/PM",onKeyup:N(i.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","model-value","rules","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])):L("",!0)]}),_:2},1032,["props"])]),"body-cell-time_out":l(o=>[e(Q,{props:o},{default:l(()=>{var t;return[n("div",{class:ie({"editable-cell":o.row.designation})},[U(F(((t=o.row.designation)==null?void 0:t.time_out)||"N/A")+" ",1),o.row.designation?(b(),$(I,{key:0,class:"bg-blue-grey-8",offset:[10,10]},{default:l(()=>[U(" Edit Time Out ")]),_:1})):L("",!0)],2),o.row.designation?(b(),$(K,{key:0,"onUpdate:modelValue":[i=>E(Ke)(o.row.designation,i),i=>o.row.designation.time_out=i],modelValue:o.row.designation.time_out,buttons:"",title:"Edit Employee Time Out"},{default:l(i=>[e(f,{modelValue:i.value,"onUpdate:modelValue":[p=>i.value=p,p=>i.value=p],"model-value":i.value,dense:"",autofocus:"",mask:"##:## AA",rules:[E(fe)],hint:"Format: 01:00 AM/PM",onKeyup:N(i.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","model-value","rules","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])):L("",!0)]}),_:2},1032,["props"])]),"body-cell-actions":l(o=>[e(Q,{props:o},{default:l(()=>[n("div",et,[e(P,{round:"",dense:"",size:"md",color:"black",icon:"print",flat:"",onClick:t=>E(q)(o.row)},{default:l(()=>[e(I,{class:"bg-black",delay:200},{default:l(()=>[U(" Print ")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),loading:l(()=>[e(Pe,{showing:""},{default:l(()=>[e(Ae,{size:"50px",color:"grey-10"})]),_:1})]),_:1},8,["rows","columns","pagination","loading","filter"])]),e(le,{modelValue:E(v),"onUpdate:modelValue":a[2]||(a[2]=o=>Se(v)?v.value=o:null),persistent:""},{default:l(()=>[e(z,{class:"bg-gradient",style:{width:"700px","max-width":"80vw"}},{default:l(()=>[n("div",tt,[O(e(P,{icon:"close",flat:"",dense:"",round:""},null,512),[[j]])]),n("div",null,[n("iframe",{src:E(T),width:"100%",height:"700px"},null,8,lt)])]),_:1})]),_:1},8,["modelValue"])],64))}};var at=Z(ot,[["__scopeId","data-v-0ef33c0a"]]);const ke=V=>(ye("data-v-8756ce02"),V=V(),ge(),V),nt={class:"q-mb-md text-center"},st=ke(()=>n("div",{class:"text-center"},[n("div",{class:"text-h6"},"Add Employee")],-1)),it=ke(()=>n("div",{class:"text-h5 q-mr-md"},"\u{1F468}\u200D\u{1F4BC}\u{1F469}\u200D\u{1F4BC} Add New Employee",-1)),dt={class:"q-gutter-y-sm"},ut={class:"q-gutter-y-sm q-mx-auto"},rt={class:"row q-gutter-x-sm item-start"},mt={class:"row q-gutter-x-sm"},pt={__name:"RegisterEmployee",setup(V){const v=oe(),T=g(!1),q=g(!1),h=()=>{T.value=!0};xe();const D=be(),x=["Super Admin","Admin","Supervisor","Scaler","Lamesador","Hornero","Baker","Cake Maker","Cashier","Sales Clerk","Utility","Not Yet Assigned"],w=["Male","Female"],S=g([]),_=g([]);g([]),g(S.value),X(async()=>{await D.fetchEmploymentType(),_.value=D.employmentType.map(A=>({label:A.category,value:A.id}))});const m=pe({firstname:"",middlename:"",lastname:"",address:"",birthdate:"",sex:"",phone:"",position:"",employment_type:""}),B=async()=>{q.value=!0;const A={...m,employment_type_id:m.employment_type.value,status:"Active"};console.log("employee",A),await v.createEmployee(A),q.value=!1,r(),T.value=!1},r=()=>{m.firstname="",m.middlename="",m.lastname="",m.address="",m.birthdate="",m.sex="",m.phone="",m.position="",m.employment_type=""};return(A,u)=>(b(),R(J,null,[e(z,{class:"q-pa-md user-card",onClick:h},{default:l(()=>[n("div",nt,[e(Y,{name:"person_add",size:"70px",color:"yellow-7"})]),st]),_:1}),e(le,{modelValue:T.value,"onUpdate:modelValue":u[9]||(u[9]=a=>T.value=a),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:l(()=>[e(z,{style:{width:"500px","max-width":"120vw"}},{default:l(()=>[e(M,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:l(()=>[it,e(_e),O(e(P,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[j]])]),_:1}),e(M,null,{default:l(()=>[n("div",dt,[n("div",ut,[e(f,{class:"text-capitalize",modelValue:m.firstname,"onUpdate:modelValue":u[0]||(u[0]=a=>m.firstname=a),outlined:"",dense:"",label:"First Name",rules:[a=>a&&a.length>0||"Required"]},null,8,["modelValue","rules"]),e(f,{class:"text-capitalize",modelValue:m.middlename,"onUpdate:modelValue":u[1]||(u[1]=a=>m.middlename=a),outlined:"",dense:"",label:"Middle Name",rules:[a=>a&&a.length>0||"Required"]},null,8,["modelValue","rules"]),e(f,{class:"text-capitalize",modelValue:m.lastname,"onUpdate:modelValue":u[2]||(u[2]=a=>m.lastname=a),outlined:"",dense:"",label:"Last Name",rules:[a=>a&&a.length>0||"Required"]},null,8,["modelValue","rules"]),e(f,{class:"text-capitalize",modelValue:m.address,"onUpdate:modelValue":u[3]||(u[3]=a=>m.address=a),outlined:"",dense:"",label:"Address",rules:[a=>a&&a.length>0||"Required"]},null,8,["modelValue","rules"])]),n("div",rt,[n("div",null,[e(f,{modelValue:m.birthdate,"onUpdate:modelValue":u[4]||(u[4]=a=>m.birthdate=a),outlined:"",dense:"",label:"Birthdate",type:"date",style:{width:"230px"},rules:[a=>a&&a.length>0||"Required"]},null,8,["modelValue","rules"])]),n("div",null,[e(f,{modelValue:m.phone,"onUpdate:modelValue":u[5]||(u[5]=a=>m.phone=a),outlined:"",dense:"",label:"Phone Number",mask:"+(63) ### - ### - ####",placeholder:"(+63) ### - ### - ####",rules:[a=>a&&a.length>0||"Required"],style:{width:"230px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","rules"])])]),n("div",mt,[n("div",null,[e(W,{modelValue:m.sex,"onUpdate:modelValue":u[6]||(u[6]=a=>m.sex=a),dense:"",outlined:"",label:"Sex",options:w,rules:[a=>a&&a.length>0||"Required"],style:{width:"120px"},behavior:"menu","hide-dropdown-icon":""},null,8,["modelValue","rules"])]),n("div",null,[e(W,{modelValue:m.position,"onUpdate:modelValue":u[7]||(u[7]=a=>m.position=a),outlined:"",dense:"","hide-dropdown-icon":"",label:"Position",options:x,rules:[a=>a&&a.length>0||"Required"],behavior:"menu",style:{width:"175px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","rules"])]),n("div",null,[e(W,{modelValue:m.employment_type,"onUpdate:modelValue":u[8]||(u[8]=a=>m.employment_type=a),outlined:"",dense:"","hide-dropdown-icon":"",label:"Employment Type",options:_.value,behavior:"menu",style:{width:"155px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","options"])])])])]),_:1}),e(ce,{class:"row q-px-lg q-py-sm q-pt-none",align:"left"},{default:l(()=>[O(e(P,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[j]]),e(P,{class:"glossy",color:"teal",label:"Add",icon:"add",onClick:B,loading:q.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var ct=Z(pt,[["__scopeId","data-v-8756ce02"]]);const yt=ve("designations",()=>{const V=g(null),v=g([]);return{designation:V,designations:v,createDesignation:async q=>{try{const h=await De.post("/api/branchEmployee",q);h&&h.data?(v.value.unshift(h.data),ee.create({type:"positive",message:"Employee created successfully",setTimeout:1e3,position:"top"})):console.error("Unexpected API Response:",h)}catch(h){console.error("Error creating employee:",h),ee.create({type:"negative",message:"Failed to create employeesss",setTimeout:1e3})}}}});const ae=V=>(ye("data-v-1c9fdef4"),V=V(),ge(),V),gt={class:"q-mb-md text-center"},_t=ae(()=>n("div",{class:"text-center"},[n("div",{class:"text-subtitle1 text-weight-medium"},"Branch Designations")],-1)),ft=ae(()=>n("div",{class:"text-h5 q-mr-md"},"\u{1F468}\u200D\u{1F4BC}\u{1F469}\u200D\u{1F4BC} Branch Designation",-1)),vt={key:0,class:"custom-list z-top"},ht={class:"row justify-between q-gutter-md"},wt={class:"row q-gutter-x-md"},bt=ae(()=>n("div",{class:"q-my-md"},"Designation",-1)),Vt=ae(()=>n("div",{class:"q-my-md"},"Time Schedule",-1)),xt={class:"row justify-between q-gutter-x-md"},Et={__name:"BranchDesignationEmployee",setup(V){G(()=>{const s=window.innerWidth;return s>1200?"500px":s>768?"80vw":"95vw"});const v=g(!1),T=yt(),q=oe(),h=xe(),D=g([]);g([]);const x=g(""),w=g(D.value),S=g(!1),_=g(!1),k=G(()=>q.employee),m=async()=>{x.value.trim()&&(_.value=!0,await q.searchCertainEmployee(x.value),_.value=!1)},B=G(()=>{const s=/^(0[1-9]|1[0-2]):([0-5][0-9]) (AM|PM)$/;return!r.employee_id||!r.employee_name||!r.position||!r.branch_name||!r.time_in||!r.time_out||!s.test(r.time_in)||!s.test(r.time_out)}),r=pe({employee_id:"",employee_name:"",position:"",branch_name:"",time_in:"",time_out:""});X(async()=>{await h.fetchBranches(),D.value=h.branches.map(s=>({label:s.name,value:s.id})),w.value=D.value});const u=(s,d)=>{d(()=>{const y=s.toLowerCase();w.value=s===""?D.value:D.value.filter(C=>C.label.toLowerCase().includes(y))})},a=s=>{console.log("Selected Employee:",s),r.employee_id=s.id,r.employee_name=o(s),r.position=s.position,x.value="",console.log("Filled Designation Data:",r)},o=s=>{const d=se=>se?se.charAt(0).toUpperCase()+se.slice(1).toLowerCase():"",y=s.firstname?d(s.firstname):"No Firstname",C=s.middlename?d(s.middlename).charAt(0)+".":"",H=s.lastname?d(s.lastname):"No Lastname";return`${y} ${C} ${H}`},t=()=>{v.value=!0},i=()=>{r.employee_id="",r.employee_name="",r.position="",r.branch_name="",r.time_in="",r.time_out=""},p=s=>/^(0[1-9]|1[0-2]):([0-5][0-9]) (AM|PM)$/.test(s)||"Time format must be HH:MM AM/PM (e.g., 01:00 AM)",c=async()=>{S.value=!0;const s={...r,branch_id:r.branch_name.value};await T.createDesignation(s),console.log("Designation Data to Save:",s),S.value=!1,v.value=!1,i()};return(s,d)=>(b(),R(J,null,[e(z,{class:"q-pa-md user-card",onClick:t,align:"center"},{default:l(()=>[n("div",gt,[e(Y,{name:"add_business",size:"20px",color:"red-7"})]),_t]),_:1}),e(le,{modelValue:v.value,"onUpdate:modelValue":d[6]||(d[6]=y=>v.value=y),"backdrop-filter":"blur(4px) saturate(150%)",position:"right"},{default:l(()=>[e(z,{style:{width:"550px","max-width":"100vw"}},{default:l(()=>[e(M,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:l(()=>[ft,e(_e),O(e(P,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[j]])]),_:1}),e(M,null,{default:l(()=>[n("div",null,[e(f,{modelValue:x.value,"onUpdate:modelValue":[d[0]||(d[0]=y=>x.value=y),m],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name or position"},{append:l(()=>[_.value?(b(),$(he,{key:1,color:"grey",size:"sm"})):(b(),$(Y,{key:0,name:"search"}))]),default:l(()=>[x.value?(b(),R("div",vt,[e(z,null,{default:l(()=>[e(Ue,{separator:""},{default:l(()=>{var y;return[(y=k.value)!=null&&y.length?(b(!0),R(J,{key:1},we(k.value,C=>(b(),$(te,{onClick:H=>a(C),key:C.id,clickable:""},{default:l(()=>[e(Ee,null,{default:l(()=>[U(F(o(C)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(b(),$(te,{key:0},{default:l(()=>[U(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):L("",!0)]),_:1},8,["modelValue"])])]),_:1}),e(M,null,{default:l(()=>[n("div",ht,[e(f,{outlined:"",readonly:"",dense:"",label:"Full Name",modelValue:r.employee_name,"onUpdate:modelValue":d[1]||(d[1]=y=>r.employee_name=y),style:{width:"350px"},rules:[y=>!!y||"Employee name is required"]},null,8,["modelValue","rules"]),e(f,{outlined:"",readonly:"",dense:"",label:"Position",modelValue:r.position,"onUpdate:modelValue":d[2]||(d[2]=y=>r.position=y),style:{width:"150px"},rules:[y=>!!y||"Position is required"]},null,8,["modelValue","rules"])])]),_:1}),e(M,null,{default:l(()=>[n("div",wt,[n("div",null,[bt,e(W,{modelValue:r.branch_name,"onUpdate:modelValue":d[3]||(d[3]=y=>r.branch_name=y),outlined:"",flat:"",dense:"","use-input":"",clearable:"","input-debounce":"0",options:w.value,label:"Branch",onFilter:u,"hide-dropdown-icon":"",behavior:"menu",style:{width:"200px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","options"])]),n("div",null,[Vt,n("div",xt,[e(f,{modelValue:r.time_in,"onUpdate:modelValue":d[4]||(d[4]=y=>r.time_in=y),outlined:"",flat:"",dense:"",mask:"##:## AA",label:"Time IN",rules:[p],hint:"Format: 08:00 AM/PM",style:{width:"140px","max-width":"500px","min-width":"100px"},"hide-dropdown-icon":""},null,8,["modelValue","rules"]),e(f,{modelValue:r.time_out,"onUpdate:modelValue":d[5]||(d[5]=y=>r.time_out=y),outlined:"",flat:"",dense:"",mask:"##:## AA",label:"Time OUT",rules:[p],hint:"Format: 01:00 AM/PM",style:{width:"140px","max-width":"500px","min-width":"100px"},"hide-dropdown-icon":""},null,8,["modelValue","rules"])])])])]),_:1}),e(ce,{class:"row q-px-lg q-py-sm q-pt-none",align:"left"},{default:l(()=>[O(e(P,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[j]]),e(P,{class:"glossy",color:"teal",label:"Add",onClick:c,loading:S.value,disable:B.value},null,8,["loading","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ut=Z(Et,[["__scopeId","data-v-1c9fdef4"]]);const Dt=ve("warehouseEmployee",()=>{const V=g(null),v=g([]);return{warehouseEmployee:V,warehouseEmployees:v,createWarehouseEmployee:async q=>{console.log("Creating employee with data:",q);try{const h=await De.post("/api/warehouse-employee",q);v.value=h.data,ee.create({type:"positive",message:"Employee created successfully",setTimeout:1e3,position:"top"}),console.log("Response:",h.data)}catch(h){console.error("Error creating employee:",h),ee.create({type:"negative",message:"Failed to create employeesss",setTimeout:1e3})}}}});const ne=V=>(ye("data-v-7d7dae92"),V=V(),ge(),V),kt={class:"q-mb-md text-center"},qt=ne(()=>n("div",{class:"text-center"},[n("div",{class:"text-subtitle1 text-weight-medium"}," Warehouse Designations ")],-1)),St=ne(()=>n("div",{class:"text-h5 q-mr-md"},"\u{1F468}\u200D\u{1F4BC}\u{1F469}\u200D\u{1F4BC} Warehouse Designation",-1)),Tt={key:0,class:"custom-list z-top"},$t={class:"row justify-between q-gutter-md"},At={class:"row q-gutter-x-md"},Pt=ne(()=>n("div",{class:"q-my-md"},"Designation",-1)),Ct=ne(()=>n("div",{class:"q-my-md"},"Time Schedule",-1)),Ft={class:"row justify-between q-gutter-x-md"},Mt={__name:"WarehouseDesignationEmployee",setup(V){G(()=>{const c=window.innerWidth;return c>1200?"500px":c>768?"80vw":"95vw"});const v=g(!1),T=Dt(),q=oe(),h=He(),D=g([]);g([]);const x=g(""),w=g(D.value),S=g(!1),_=g(!1),k=G(()=>q.employee),m=async()=>{x.value.trim()&&(_.value=!0,await q.searchCertainEmployee(x.value),_.value=!1)},B=c=>/^(0[1-9]|1[0-2]):[0-5][0-9] (AM|PM)$/i.test(c)||"Time format must be HH:MM AM/PM (e.g., 01:00 AM)";X(async()=>{await h.fetchWarehouses(),D.value=h.warehouses.map(c=>({label:c.name,value:c.id})),w.value=D.value});const A=(c,s)=>{s(()=>{const d=c.toLowerCase();w.value=c===""?D.value:D.value.filter(y=>y.label.toLowerCase().includes(d))})},u=c=>{console.log("Selected Employee:",c),t.employee_id=c.id,t.employee_name=a(c),t.position=c.position,x.value="",console.log("Filled Designation Data:",t)},a=c=>{const s=H=>H?H.charAt(0).toUpperCase()+H.slice(1).toLowerCase():"",d=c.firstname?s(c.firstname):"No Firstname",y=c.middlename?s(c.middlename).charAt(0)+".":"",C=c.lastname?s(c.lastname):"No Lastname";return`${d} ${y} ${C}`},o=()=>{v.value=!0},t=pe({employee_id:"",employee_name:"",position:"",warehouse_name:"",time_in:"",time_out:""}),i=()=>{t.employee_id="",t.employee_name="",t.position="",t.warehouse_name="",t.time_in="",t.time_out=""},p=async()=>{S.value=!0;const c={...t,warehouse_id:t.warehouse_name.value};await T.createWarehouseEmployee(c),console.log("Designation Data to Save:",c),S.value=!1,i(),v.value=!1};return(c,s)=>(b(),R(J,null,[e(z,{class:"q-pa-md user-card",onClick:o,align:"center"},{default:l(()=>[n("div",kt,[e(Y,{name:"factory",size:"20px",color:`blue-grey-6
`})]),qt]),_:1}),e(le,{modelValue:v.value,"onUpdate:modelValue":s[6]||(s[6]=d=>v.value=d),"backdrop-filter":"blur(4px) saturate(150%)",position:"right"},{default:l(()=>[e(z,{style:{width:"550px","max-width":"100vw"}},{default:l(()=>[e(M,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:l(()=>[St,e(_e),O(e(P,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[j]])]),_:1}),e(M,null,{default:l(()=>[n("div",null,[e(f,{modelValue:x.value,"onUpdate:modelValue":[s[0]||(s[0]=d=>x.value=d),m],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name or position"},{append:l(()=>[_.value?(b(),$(he,{key:1,color:"grey",size:"sm"})):(b(),$(Y,{key:0,name:"search"}))]),default:l(()=>[x.value?(b(),R("div",Tt,[e(z,null,{default:l(()=>[e(Ue,{separator:""},{default:l(()=>{var d;return[(d=k.value)!=null&&d.length?(b(!0),R(J,{key:1},we(k.value,y=>(b(),$(te,{onClick:C=>u(y),key:y.id,clickable:""},{default:l(()=>[e(Ee,null,{default:l(()=>[U(F(a(y)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(b(),$(te,{key:0},{default:l(()=>[U(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):L("",!0)]),_:1},8,["modelValue"])])]),_:1}),e(M,null,{default:l(()=>[n("div",$t,[e(f,{outlined:"",readonly:"",dense:"",label:"Full Name",modelValue:t.employee_name,"onUpdate:modelValue":s[1]||(s[1]=d=>t.employee_name=d),style:{width:"350px"}},null,8,["modelValue"]),e(f,{outlined:"",readonly:"",dense:"",label:"Position",modelValue:t.position,"onUpdate:modelValue":s[2]||(s[2]=d=>t.position=d),style:{width:"150px"}},null,8,["modelValue"])])]),_:1}),e(M,null,{default:l(()=>[n("div",At,[n("div",null,[Pt,e(W,{modelValue:t.warehouse_name,"onUpdate:modelValue":s[3]||(s[3]=d=>t.warehouse_name=d),outlined:"",flat:"",dense:"","use-input":"",clearable:"","input-debounce":"0",options:w.value,label:"Warehouse",onFilter:A,"hide-dropdown-icon":"",behavior:"menu",style:{width:"200px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","options"])]),n("div",null,[Ct,n("div",Ft,[e(f,{modelValue:t.time_in,"onUpdate:modelValue":s[4]||(s[4]=d=>t.time_in=d),outlined:"",flat:"",dense:"",mask:"##:## AA",label:"Time IN",rules:[B],hint:"Format: 08:00 AM/PM",style:{width:"140px","max-width":"500px","min-width":"100px"},"hide-dropdown-icon":""},null,8,["modelValue","rules"]),e(f,{modelValue:t.time_out,"onUpdate:modelValue":s[5]||(s[5]=d=>t.time_out=d),outlined:"",flat:"",dense:"",mask:"##:## AA",label:"Time OUT",rules:[B],hint:"Format: 01:00 AM/PM",style:{width:"140px","max-width":"500px","min-width":"100px"},"hide-dropdown-icon":""},null,8,["modelValue","rules"])])])])]),_:1}),e(ce,{class:"row q-px-lg q-py-sm q-pt-none",align:"left"},{default:l(()=>[O(e(P,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[j]]),e(P,{class:"glossy",color:"teal",label:"Add",onClick:p,loading:S.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Nt=Z(Mt,[["__scopeId","data-v-7d7dae92"]]);const It={class:"row justify-between"},Qt={class:"col-12 col-md-9 col-lg-9 q-pa-sm"},Rt={class:"col-12 col-md-3 col-lg-3 q-gutter-y-md q-pa-sm card-side"},zt={class:"row2"},Bt={__name:"EmployeesPage",setup(V){return(v,T)=>(b(),R("div",It,[n("div",Qt,[e(at)]),n("div",Rt,[e(ct),n("div",zt,[e(Ut),e(Nt)])])]))}};var _l=Z(Bt,[["__scopeId","data-v-71812045"]]);export{_l as default};
