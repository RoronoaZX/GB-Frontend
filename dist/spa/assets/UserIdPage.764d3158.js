import{be as T,H as O,r as P,z,t as se,u as ae,o as C,e as oe,w as t,f as e,Q as q,J as l,I as y,ae as H,M as v,K as S,aJ as de,bf as E,a2 as ne,O as I,R as Q,c as ie,a3 as F,Z as ue,$ as f,L as re,a0 as p,bd as _e,P as L}from"./index.9c8a4528.js";import{Q as M}from"./QList.7a5cbdea.js";import{Q as ce}from"./QPopupEdit.e5925ac9.js";import{Q as me}from"./QChip.f3f24389.js";import{Q as i,a as s}from"./QItem.79038d7b.js";import{u as he}from"./use-quasar.a532cfb3.js";import{Q as pe}from"./QPopupProxy.39ff3e59.js";import{u as Y}from"./user.1b851c2c.js";import{Q as U}from"./QSelect.d712c632.js";import{C as j}from"./ClosePopup.3e5d09f4.js";import{u as fe}from"./use-dialog-plugin-component.ebb1e661.js";import{u as ve}from"./branch.24ee0ac8.js";import{_ as A}from"./plugin-vue_export-helper.21dcd24c.js";import"./QMenu.63a17720.js";import"./position-engine.98981152.js";import"./selection.a59c97e3.js";import"./axios.d1cc2cbe.js";import"./QItemLabel.04380d57.js";import"./use-virtual-scroll.cde1d264.js";import"./warehouse.07589eac.js";import"./employee.8b7d34b9.js";const J=_=>(I("data-v-b56ff042"),_=_(),Q(),_),ge={class:"row justify-between"},xe={class:"row justify-between"},be=J(()=>l("div",{class:"text-h4 text-weight-light"},"Edit Employee Profile",-1)),ye={class:"q-gutter-y-sm"},we={class:"row q-gutter-x-sm item-start"},Se={class:"row q-gutter-x-md"},De=J(()=>l("div",null,"Designation",-1)),Pe={class:"row q-gutter-x-md"},$e={__name:"UserEditDialog",props:["userData"],emits:["user","hide","ok","cancel"],setup(_,{emit:x}){const{dialogRef:w,onDialogHide:c,onDialogOK:N,onDialogCancel:B}=fe();T(),O();const $=Y(),V=ve(),b=P([]),D=P(b.value);P(!0);const m=P(!1),h=_;console.log("userDialogdata",h.userData);const u=P({...h.userData});console.log("localUserData",u);const g=["Male","Female"],R=["Current","Former"],K=["Super Admin","Admin","Scaler","Lamesador","Hornero","Baker","Cashier","Sales Clerk","Utility","Not Yet Assigned"];z(async()=>{await V.fetchBranches(),b.value=V.branches.map(r=>({label:r.name,value:r.id})),D.value=b.value});const Z=(r,n)=>{n(()=>{const a=r.toLowerCase();D.value=r===""?b.value:b.value.filter(k=>k.label.toLowerCase().includes(a))})},G=r=>/^(0[1-9]|1[0-2]):[0-5][0-9] (AM|PM)$/i.test(r)||"Invalid time format",W=r=>{const n=new Date(`1970-01-01T${r}`),a={hour:"2-digit",minute:"2-digit",hour12:!0};return n.toLocaleTimeString(void 0,a)},X=r=>{if(!r)return"";const n=new Date(r),a=n.getFullYear(),k=String(n.getMonth()+1).padStart(2,"0"),le=String(n.getDate()).padStart(2,"0");return`${a}-${k}-${le}`},d=se({fullname:"",user_address:"",user_birthdate:"",user_sex:"",user_status:"",user_phone_number:"",user_position:"",user_branch_name:"",user_time_shift:""});ae(()=>h.userData,r=>{r&&(u.value={...r},console.log("update data",u.value),d.fullname=u.value.name,d.user_address=u.value.address,d.user_birthdate=X(u.value.birthdate),d.user_sex=u.value.sex,d.user_status=u.value.status,d.user_phone_number=u.value.phone,d.user_position=u.value.role,d.user_branch_name=u.value.branch_employee.branch.name,d.user_time_shift=W(u.value.branch_employee.time_shift))},{immediate:!0});const ee=async()=>{try{const r={name:d.fullname,address:d.user_address,birthdate:d.user_birthdate,sex:d.user_sex,status:d.user_status,phone:d.user_phone_number,role:d.user_position,branch_id:d.user_branch_name.value||u.value.branch_employee.branch.id,time_shift:d.user_time_shift};console.log("Saving user data:",r),await $.updateUser(h.userData.id,r);const n=h.userData.id,a=await $.fetchUserById(n);m.value=!1,te()}catch(r){console.error("Error saving user data:",r)}},te=()=>{d.fullname="",d.user_address="",d.user_birthdate="",d.user_sex="",d.user_status="",d.user_phone_number="",d.user_position="",d.user_branch_name="",d.user_time_shift=""};return(r,n)=>(C(),oe(ne,{ref_key:"dialogRef",ref:w,modelValue:m.value,"onUpdate:modelValue":n[9]||(n[9]=a=>m.value=a),onHide:E(c),onOk:r.handleSave,onCancel:E(B)},{default:t(()=>[e(q,{class:"q-pa-sm"},{default:t(()=>[l("div",ge,[l("div",null,[e(y,null,{default:t(()=>[l("div",xe,[be,l("div",null,[H(e(v,{icon:"close",flat:"",dense:"",round:""},null,512),[[j]])])])]),_:1}),e(y,null,{default:t(()=>[l("div",ye,[e(S,{modelValue:d.fullname,"onUpdate:modelValue":n[0]||(n[0]=a=>d.fullname=a),class:"text-capitalize",outlined:"",dense:"",label:"Full Name",rules:[a=>a&&a.length>0||"Required"]},null,8,["modelValue","rules"]),e(S,{modelValue:d.user_address,"onUpdate:modelValue":n[1]||(n[1]=a=>d.user_address=a),class:"text-capitalize",outlined:"",dense:"",label:"Address",rules:[a=>a&&a.length>0||"Required"]},null,8,["modelValue","rules"]),l("div",we,[e(S,{modelValue:d.user_birthdate,"onUpdate:modelValue":n[2]||(n[2]=a=>d.user_birthdate=a),outlined:"",dense:"",label:"Birthdate",type:"date",hint:"mm/dd/yyyy",style:{width:"230px"},rules:[a=>a&&a.length>0||"Required"]},null,8,["modelValue","rules"]),e(U,{modelValue:d.user_sex,"onUpdate:modelValue":n[3]||(n[3]=a=>d.user_sex=a),dense:"",outlined:"",label:"Sex",options:g,rules:[a=>a&&a.length>0||"Required"],style:{width:"120px"},behavior:"menu","hide-dropdown-icon":""},null,8,["modelValue","rules"]),e(U,{modelValue:d.user_status,"onUpdate:modelValue":n[4]||(n[4]=a=>d.user_status=a),options:R,dense:"",outlined:"","hide-dropdown-icon":"",label:"Status",style:{width:"100px"},rules:[a=>a&&a.length>0||"Required"],behavior:"menu"},null,8,["modelValue","rules"])]),l("div",Se,[e(S,{modelValue:d.user_phone_number,"onUpdate:modelValue":n[5]||(n[5]=a=>d.user_phone_number=a),outlined:"",dense:"",label:"Phone Number",mask:"+(63) ### - ### - ####",placeholder:"(+63) ### - ### - ####",rules:[a=>a&&a.length>0||"Required"],style:{width:"300px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","rules"]),e(U,{modelValue:d.user_position,"onUpdate:modelValue":n[6]||(n[6]=a=>d.user_position=a),outlined:"",dense:"","hide-dropdown-icon":"",label:"Position",options:K,rules:[a=>a&&a.length>0||"Required"],style:{width:"150px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","rules"])]),De,l("div",Pe,[e(U,{modelValue:d.user_branch_name,"onUpdate:modelValue":n[7]||(n[7]=a=>d.user_branch_name=a),outlined:"",flat:"",dense:"","use-input":"",clearable:"","input-debounce":"0",options:D.value,label:"Branch",onFilter:Z,style:{width:"250px","max-width":"500px","min-width":"100px"},"hide-dropdown-icon":"",behavior:"menu"},null,8,["modelValue","options"]),e(S,{modelValue:d.user_time_shift,"onUpdate:modelValue":n[8]||(n[8]=a=>d.user_time_shift=a),outlined:"",flat:"",dense:"",mask:"##:## AA",label:"Time Schedule",rules:G,hint:"Format: 01:00 AM/PM",style:{width:"200px","max-width":"500px","min-width":"100px"}},null,8,["modelValue"])])])]),_:1}),e(de,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:t(()=>[H(e(v,{class:"glossy",color:"grey-9",label:"Cancel"},null,512),[[j]]),e(v,{class:"glossy",color:"teal",label:"Save",onClick:ee})]),_:1})])])]),_:1})]),_:1},8,["modelValue","onHide","onOk","onCancel"]))}};var Ve=A($e,[["__scopeId","data-v-b56ff042"]]);const Ue=_=>(I("data-v-193211ab"),_=_(),Q(),_),Ce={key:0},qe=Ue(()=>l("img",{src:"https://cdn.quasar.dev/img/boy-avatar.png",alt:"Profile Picture"},null,-1)),Ie={align:"center"},Qe={class:"text-h5 text-center"},Ae={class:"text-subtitle2 text-center q-mb-md"},Be={class:"email-container"},Re={class:"email-text"},ke={align:"center"},Ee={__name:"UserProfileCard",setup(_){const x=T();O();const w=Y(),c=ie(()=>w.user);console.log("Page user ID",x.params.user_id);const N=async()=>{try{L.show();const m=x.params.user_id,h=await w.fetchUserById(m);console.log("Fetched User Data:",c.value)}catch(m){console.error("Error fetching user data:",m)}finally{L.hide()}};z(()=>{N()});const B=m=>{switch(m){case"Super Admin":return"negative";case"Admin":return"blue-grey-8";case"Scaler":return"info";case"Lamesador":return"indigo";case"Hornero":return"purple";case"Baker":return"warning";case"Cashier":return"secondary";case"Sales Clerk":return"deep-orange";case"Utility":return"deep-purple";case"Not Yet Assigned":return"grey";default:return"grey"}},$=he(),V=m=>{$.dialog({component:Ve,componentProps:{userData:m}})},b=m=>{const[h,u]=m.split(":");let g=parseInt(h,10);const R=g>=12?"PM":"AM";return g=g%12||12,`${String(g).padStart(2,"0")}:${u} ${R}`},D=()=>{pe.show({ref:"emailPopup"})};return(m,h)=>c.value&&c.value.branch_employee?(C(),F("div",Ce,[e(q,{class:"profile-card q-pa-md"},{default:t(()=>[e(y,{class:"row items-center justify-center"},{default:t(()=>[e(ue,{size:"100px"},{default:t(()=>[qe]),_:1})]),_:1}),e(y,null,{default:t(()=>[l("div",Ie,[l("div",Qe,f(c.value.name),1),l("div",Ae,[l("div",Be,[e(ce,{modelValue:c.value.email,"onUpdate:modelValue":h[0]||(h[0]=u=>c.value.email=u),title:"Edit Email",buttons:"",persistent:"","auto-save":"",fit:"",onSave:m.onSave,"transition-show":"scale","transition-hide":"scale"},{default:t(u=>[e(S,{modelValue:u.value,"onUpdate:modelValue":g=>u.value=g,dense:"",type:"email",rules:[m.emailRule],placeholder:"Email",class:"popup-input",filled:"",borderless:""},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:1},8,["modelValue","onSave"]),l("div",{class:"email-display",onClick:D},[l("span",Re,f(c.value.email),1),e(re,{name:"edit",size:"sm",class:"edit-icon text-primary"})])])]),e(me,{"text-color":"white",color:B(c.value.role)},{default:t(()=>[p(f(c.value.role),1)]),_:1},8,["color"])]),e(M,{separator:""},{default:t(()=>[e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[p("Designation:")]),_:1}),e(s,null,{default:t(()=>{var u;return[p(f((u=c.value.branch_employee.branch)==null?void 0:u.name),1)]}),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[p("Time Shift:")]),_:1}),e(s,null,{default:t(()=>[p(f(b(c.value.branch_employee.time_shift)),1)]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[p("Phone:")]),_:1}),e(s,null,{default:t(()=>[p(f(c.value.phone),1)]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[p("Address:")]),_:1}),e(s,null,{default:t(()=>[p(f(c.value.address),1)]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[p("Employment Status:")]),_:1}),e(s,null,{default:t(()=>[p(f(`${c.value.status} ${c.value.role}`),1)]),_:1})]),_:1})]),_:1}),l("div",ke,[e(v,{label:"Edit Profile",color:"positive",class:"q-mt-md",onClick:h[1]||(h[1]=u=>V(c.value))})])]),_:1})]),_:1})])):_e("",!0)}};var Oe=A(Ee,[["__scopeId","data-v-193211ab"]]);const o=_=>(I("data-v-c0697b62"),_=_(),Q(),_),Fe=o(()=>l("div",{class:"row justify-between"},[l("div",{class:"text-h6"},"Pay Slip"),l("div",null,[l("div",{class:"text-caption text-weight-light"}," Period Start Date: Aug. 11, 2024 "),l("div",{class:"text-caption text-weight-light"}," Period Ending Date: Aug. 25, 2024 "),l("div",{class:"text-caption text-weight-light"}," Payroll Date: Sept. 05, 2024 ")])],-1)),Me={class:"row q-gutter-md justify-between"},Ne={class:"col-5"},He=o(()=>l("div",{class:"text-h7"},"Earnings Summary",-1)),Le=o(()=>l("div",null,"Regular Pay:",-1)),je={class:"text-right"},Te=o(()=>l("div",null,"Overtime Pay:",-1)),ze=o(()=>l("div",{class:"text-right"},"\u20B1120.00",-1)),Ye=o(()=>l("div",null,"Holiday Pay:",-1)),Je=o(()=>l("div",{class:"text-right"},"\u20B1160.00",-1)),Ke=o(()=>l("div",null,"COLA:",-1)),Ze=o(()=>l("div",{class:"text-right"},"\u20B1160.00",-1)),Ge=o(()=>l("div",null,"Night Differential:",-1)),We=o(()=>l("div",{class:"text-right"},"\u20B1160.00",-1)),Xe=o(()=>l("div",null,"Daily Allowance:",-1)),et=o(()=>l("div",{class:"text-right"},"\u20B1160.00",-1)),tt=o(()=>l("div",null,"Quota Over/ Over Time:",-1)),lt=o(()=>l("div",{class:"text-right"},"\u20B1160.00",-1)),st=o(()=>l("div",null,"Other INC./ Adjustment:",-1)),at=o(()=>l("div",{class:"text-right"},"\u20B1160.00",-1)),ot={class:"col-5"},dt=o(()=>l("div",{class:"text-h7"},"Deductions Summary",-1)),nt=o(()=>l("div",null,"New Credits:",-1)),it=o(()=>l("div",{class:"text-right"},"\u20B1200.00",-1)),ut=o(()=>l("div",null,"Prev Credits:",-1)),rt=o(()=>l("div",{class:"text-right"},"\u20B1200.00",-1)),_t=o(()=>l("div",null,"Uniform:",-1)),ct=o(()=>l("div",{class:"text-right"},"\u20B1200.00",-1)),mt=o(()=>l("div",null,"Penalty:",-1)),ht=o(()=>l("div",{class:"text-right"},"\u20B1200.00",-1)),pt=o(()=>l("div",null,"Cash Advance:",-1)),ft=o(()=>l("div",{class:"text-right"},"\u20B1200.00",-1)),vt=o(()=>l("div",null,"Other / Motor:",-1)),gt=o(()=>l("div",{class:"text-right"},"\u20B1200.00",-1)),xt=o(()=>l("div",null,"Late/s:",-1)),bt=o(()=>l("div",{class:"text-right"},"\u20B1200.00",-1)),yt=o(()=>l("div",null,"Short/s:",-1)),wt=o(()=>l("div",{class:"text-right"},"\u20B1200.00",-1)),St=o(()=>l("div",null,"SSS:",-1)),Dt=o(()=>l("div",{class:"text-right"},"\u20B1200.00",-1)),Pt=o(()=>l("div",null,"HDMF:",-1)),$t=o(()=>l("div",{class:"text-right"},"\u20B1200.00",-1)),Vt=o(()=>l("div",null,"PHIC:",-1)),Ut=o(()=>l("div",{class:"text-right"},"\u20B1200.00",-1)),Ct=o(()=>l("div",null,"SSS Loan:",-1)),qt=o(()=>l("div",{class:"text-right"},"\u20B1200.00",-1)),It=o(()=>l("div",null,"HDMF Loan:",-1)),Qt=o(()=>l("div",{class:"text-right"},"\u20B1200.00",-1)),At=o(()=>l("div",{class:"text-h7"},"Net Pay",-1)),Bt=o(()=>l("div",{class:"text-right"},"\u20B1890.00",-1)),Rt=480,kt={__name:"UserPaySlipCard",setup(_){const x=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(Rt);return console.log(x),(w,c)=>(C(),F("div",null,[e(q,{class:"account-card q-pa-md"},{default:t(()=>[e(y,null,{default:t(()=>[Fe]),_:1}),e(y,null,{default:t(()=>[e(M,{separator:""},{default:t(()=>[l("div",Me,[l("div",Ne,[e(i,null,{default:t(()=>[e(s,{align:"center"},{default:t(()=>[He]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[Le]),_:1}),e(s,{side:""},{default:t(()=>[l("div",je,f(E(x)),1)]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[Te]),_:1}),e(s,{side:""},{default:t(()=>[ze]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[Ye]),_:1}),e(s,{side:""},{default:t(()=>[Je]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[Ke]),_:1}),e(s,{side:""},{default:t(()=>[Ze]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[Ge]),_:1}),e(s,{side:""},{default:t(()=>[We]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[Xe]),_:1}),e(s,{side:""},{default:t(()=>[et]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[tt]),_:1}),e(s,{side:""},{default:t(()=>[lt]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[st]),_:1}),e(s,{side:""},{default:t(()=>[at]),_:1})]),_:1})]),l("div",ot,[e(i,null,{default:t(()=>[e(s,{align:"center"},{default:t(()=>[dt]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[nt]),_:1}),e(s,{side:""},{default:t(()=>[it]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[ut]),_:1}),e(s,{side:""},{default:t(()=>[rt]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[_t]),_:1}),e(s,{side:""},{default:t(()=>[ct]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[mt]),_:1}),e(s,{side:""},{default:t(()=>[ht]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[pt]),_:1}),e(s,{side:""},{default:t(()=>[ft]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[vt]),_:1}),e(s,{side:""},{default:t(()=>[gt]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[xt]),_:1}),e(s,{side:""},{default:t(()=>[bt]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[yt]),_:1}),e(s,{side:""},{default:t(()=>[wt]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[St]),_:1}),e(s,{side:""},{default:t(()=>[Dt]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[Pt]),_:1}),e(s,{side:""},{default:t(()=>[$t]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[Vt]),_:1}),e(s,{side:""},{default:t(()=>[Ut]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[Ct]),_:1}),e(s,{side:""},{default:t(()=>[qt]),_:1})]),_:1}),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[It]),_:1}),e(s,{side:""},{default:t(()=>[Qt]),_:1})]),_:1})])]),e(i,null,{default:t(()=>[e(s,null,{default:t(()=>[At]),_:1}),e(s,{side:""},{default:t(()=>[Bt]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}};var Et=A(kt,[["__scopeId","data-v-c0697b62"]]);const Ot=_=>(I("data-v-f9de9342"),_=_(),Q(),_),Ft={class:"q-pa-xm"},Mt={class:"row q-ma-sm"},Nt={class:"user-profile-page q-pa-md"},Ht={class:"row q-col-gutter-md"},Lt={class:"col-12 col-md-4"},jt={class:"col-12 col-md-8"},Tt={class:"row q-col-gutter-md"},zt={class:"col-12"},Yt={class:"col-12"},Jt=Ot(()=>l("div",{class:"text-h6"},"My Bills",-1)),Kt={__name:"UserIdPage",setup(_){return O(),(x,w)=>(C(),F("div",Ft,[l("div",Mt,[e(v,{flat:"",dense:"",icon:"arrow_back_ios",rounded:"",to:"/admin/users"}),e(v,{dense:"",label:"Cash Advance / CA"}),e(v,{dense:"",label:"Uniform"}),e(v,{dense:"",label:"Benefits"}),e(v,{dense:"",label:""})]),l("div",null,[l("div",Nt,[l("div",Ht,[l("div",Lt,[e(Oe)]),l("div",jt,[l("div",Tt,[l("div",zt,[e(Et)]),l("div",Yt,[e(q,{class:"bills-card q-pa-md"},{default:t(()=>[e(y,null,{default:t(()=>[Jt]),_:1}),e(M,{separator:""})]),_:1})])])])])])])]))}};var gl=A(Kt,[["__scopeId","data-v-f9de9342"]]);export{gl as default};
