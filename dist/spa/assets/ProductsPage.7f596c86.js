import{ax as ht,aS as ft,g as yt,r as x,q as et,c as k,j as He,at as Te,af as bt,k as xt,t as Ie,u as Y,o as g,a3 as B,J as e,f as t,w as a,a4 as G,a5 as be,e as H,Q as K,bg as J,$ as y,aK as z,a1 as Pe,I as C,M as L,K as U,a2 as ue,P as Se,N as Ce,O as _e,R as me,L as E,ae as Oe,be as se,aI as lt,a0 as Z,bK as wt,bL as $t,bd as qt,aJ as nt,z as Ke}from"./index.86555a02.js";import{Q as qe}from"./QTab.db1bcd0e.js";import{Q as kt}from"./QTabs.69f5274c.js";import{Q as fe}from"./QTabPanel.fe756d51.js";import{Q as Pt}from"./QTabPanels.d70892a5.js";import{Q as Be}from"./QScrollArea.71954bd9.js";import{Q as Le}from"./QSpinnerIos.7bf057c5.js";import{u as ae}from"./sales-report.b983813b.js";import{t as pe}from"./typography-format.03b576dc.js";import{_ as ee}from"./plugin-vue_export-helper.21dcd24c.js";import{a as ke,b as X}from"./QMenu.a7e76834.js";import{Q as tt}from"./QList.ed241797.js";import{Q as St,a as ye}from"./QSelect.4a5afec3.js";import{C as Ve}from"./ClosePopup.36ab3faf.js";import{u as Ct}from"./branch.36b06f51.js";import"./other-product.9621d0df.js";import{a as Ot,Q as Me}from"./QTable.3e0b8829.js";import{Q as rt}from"./QBadge.f396bb9d.js";import"./QSpinnerGears.ad224ce8.js";import{Q as st}from"./QInnerLoading.6a9d6eaf.js";import{u as ge}from"./use-quasar.315d0740.js";import{Q as Ee}from"./QChip.772b8c1a.js";import{u as je}from"./use-dialog-plugin-component.1a494174.js";import{u as ze}from"./branch-product.d024ea46.js";import{Q as Vt}from"./QTooltip.d7878e40.js";import{Q as It}from"./QBtnGroup.04508386.js";import"./QPagination.866f62d0.js";import{u as Bt}from"./cake-maker-report.79fea370.js";import"./QResizeObserver.54bdf6c2.js";import"./rtl.276c3f1b.js";import"./use-panel.9d2df6a6.js";import"./touch.9135741d.js";import"./selection.9de241bc.js";import"./use-render-cache.3aae9b27.js";import"./QScrollObserver.72e5600d.js";import"./TouchPan.3bb31985.js";import"./axios.b83de87b.js";import"./date.e8db5187.js";import"./position-engine.d27e24be.js";import"./use-virtual-scroll.398b16aa.js";import"./warehouse.0e60f793.js";import"./employee.cc97aa54.js";import"./QVirtualScroll.db2b41de.js";import"./product.960f1ac8.js";const at={threshold:0,root:null,rootMargin:"0px"};function ot(o,i,m){let f,u,h;typeof m=="function"?(f=m,u=at,h=i.cfg===void 0):(f=m.handler,u=Object.assign({},at,m.cfg),h=i.cfg===void 0||ft(i.cfg,u)===!1),i.handler!==f&&(i.handler=f),h===!0&&(i.cfg=u,i.observer!==void 0&&i.observer.unobserve(o),i.observer=new IntersectionObserver(([s])=>{if(typeof i.handler=="function"){if(s.rootBounds===null&&document.body.contains(o)===!0){i.observer.unobserve(o),i.observer.observe(o);return}(i.handler(s,i.observer)===!1||i.once===!0&&s.isIntersecting===!0)&&it(o)}},u),i.observer.observe(o))}function it(o){const i=o.__qvisible;i!==void 0&&(i.observer!==void 0&&i.observer.unobserve(o),delete o.__qvisible)}var Rt=ht({name:"intersection",mounted(o,{modifiers:i,value:m}){const f={once:i.once===!0};ot(o,f,m),o.__qvisible=f},updated(o,i){const m=o.__qvisible;m!==void 0&&ot(o,m,i.value)},beforeUnmount:it}),Re=yt({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(o,{slots:i,emit:m}){const f=x(et.value===!0?o.ssrPrerender:!1),u=k(()=>o.root!==void 0||o.margin!==void 0||o.threshold!==void 0?{handler:D,cfg:{root:o.root,rootMargin:o.margin,threshold:o.threshold}}:D),h=k(()=>o.disable!==!0&&(et.value!==!0||o.once!==!0||o.ssrPrerender!==!0)),s=k(()=>[[Rt,u.value,void 0,{once:o.once}]]),p=k(()=>`--q-transition-duration: ${o.transitionDuration}ms`);function D(d){f.value!==d.isIntersecting&&(f.value=d.isIntersecting,o.onVisibility!==void 0&&m("visibility",f.value))}function j(){if(f.value===!0)return[He("div",{key:"content",style:p.value},xt(i.default))];if(i.hidden!==void 0)return[He("div",{key:"hidden",style:p.value},i.hidden())]}return()=>{const d=o.transition?[He(Te,{name:"q-transition--"+o.transition},j)]:j();return bt(o.tag,{class:"q-intersection"},d,"main",h.value,()=>s.value)}}});const ne=o=>(_e("data-v-3aa8caaa"),o=o(),me(),o),Dt={class:"q-mt-md"},Qt={key:0,class:"text-center q-pa-md"},At={key:1,class:"row q-pa-lg q-gutter-y-lg"},Tt=ne(()=>e("img",{src:"https://cdn.quasar.dev/img/chicken-salad.jpg"},null,-1)),Lt={class:"q-pa-xm row q-gutter-x-sm justify-between"},jt=ne(()=>e("div",null,"Quantity:",-1)),zt={class:"q-pa-xm row q-gutter-x-sm justify-between"},Nt=ne(()=>e("div",null,"Price:",-1)),Ut={class:"row justify-between"},Ft={class:"text-h6"},Ht={class:"q-mb-lg row justify-between"},Mt=ne(()=>e("div",{class:"text-weight-light"},"Remainings",-1)),Et=ne(()=>e("div",{class:"text-weight-light"},"Bread Out",-1)),Kt={class:"row q-gutter-xm justify-between"},Zt={class:"q-gutter-sm"},Jt=ne(()=>e("div",{class:"text-weight-light"},"Beginning/s",-1)),Gt=ne(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),Wt={class:"q-gutter-sm"},Xt=ne(()=>e("div",{class:"text-weight-light"},"New Production",-1)),Yt=ne(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),es={class:"q-gutter-sm"},ts=ne(()=>e("div",{class:"text-weight-light"},"Price",-1)),ss={align:"right"},as={__name:"BreadCard",props:{filter:String},setup(o){var v,q,n;const{capitalizeFirstLetter:i,formatPrice:m}=pe(),f=ae(),u=f.user;console.log("userdataa",u);const h=((v=u.device)==null?void 0:v.reference_id)||((n=(q=u.device)==null?void 0:q.reference)==null?void 0:n.id)||"0";console.log("branchIdsss",h);const s=x(null),p=x(!1),D=x(!1),j=o,d=r=>{s.value=r,p.value=!0},_=Ie({breadSold:0,remainnings:"",beginnings:0,breadOut:""}),I=x({remainnings:"",breadOut:""}),P=r=>{I.value[r]=""},R=()=>{I.value.remainnings="",I.value.breadOut="";let r=!0;return _.remainnings||(I.value.remainnings="Remaining is required",r=!1),_.breadOut||(I.value.breadOut="Bread Out is required",r=!1),r},O=()=>{if(s.value){console.log("selectedItem",s.value);const r=parseInt(s.value.total_quantity)||0,l=parseInt(_.remainnings)||0,c=parseInt(_.breadOut)||0,$=l+c;_.breadSold=r-$}};Y(()=>_.remainnings,r=>{O()}),Y(()=>_.breadOut,r=>{O()});const N=k(()=>s.value?_.breadSold*s.value.price:0);k(()=>m(N.value));const Q=k(()=>f.breadProducts);Y(Q,r=>{});const F=k(()=>{var r;return((r=Q.value)==null?void 0:r.filter(l=>l.product.name.toLowerCase().includes(j.filter.toLowerCase())))||[]}),w=()=>{s.value=null,_.breadSold=0,_.remainnings="",_.beginnings=0,_.breadOut="",p.value=!1},b=()=>{var l;if(!R())return;Se.show({spinner:Le,message:`${i(s.value.product.name)} putting to the list...`,messageColor:"white"});const r={user_id:u==null?void 0:u.data.id,branch_id:h||((l=u.device)==null?void 0:l.reference_id),product_id:s.value.product.id,name:s.value.product.name,total:s.value.total_quantity,new_production:s.value.new_production,bread_sold:_.breadSold,bread_out:_.breadOut,beginnings:s.value.beginnings,remaining:_.remainnings,price:s.value.price,sales:N.value,new_production:s.value.new_production,branch_new_production:0};console.log("report",r),f.updateBreadReport(r),Ce.create({message:"Product added successfully",color:"positive",position:"top"}),setTimeout(()=>{Se.hide(),w()},500)};return(r,l)=>(g(),B(G,null,[e("div",Dt,[t(Be,{style:{height:"700px","max-width":"1500px"}},{default:a(()=>[!F.value||F.value.length===0?(g(),B("div",Qt," No data available ")):(g(),B("div",At,[(g(!0),B(G,null,be(F.value,(c,$)=>(g(),H(Re,{key:$,once:"",transition:"scale",class:"example-item q-gutter-sm"},{default:a(()=>[t(K,{onClick:T=>d(c),class:"q-ma-sm my-card"},{default:a(()=>[Tt,e("div",{class:J(["q-pa-sm",{"text-subtitle2":c.product.name.length<=5,"text-caption text-weight-medium":c.product.name.length>10&&c.product.name.length<=20,"text-caption":c.product.name.length>20}])},y(z(i)(c.product.name)),3),t(Pe),t(C,{class:"text-subtitle2 text-weight-regular"},{default:a(()=>[e("div",Lt,[jt,e("div",null,y(c.total_quantity),1)]),e("div",zt,[Nt,e("div",null,y(z(m)(c.price)),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]))]),_:1})]),e("div",null,[t(ue,{modelValue:p.value,"onUpdate:modelValue":l[4]||(l[4]=c=>p.value=c),persistent:""},{default:a(()=>[t(K,{class:"my-card q-pa-md",style:{width:"700px","max-width":"80vw"}},{default:a(()=>[t(C,null,{default:a(()=>[e("div",Ut,[e("div",Ft,y(z(i)(s.value?s.value.product.name:"")),1),e("div",null,[t(L,{round:"",dense:"",flat:"",icon:"close",onClick:w})])])]),_:1}),t(C,null,{default:a(()=>[e("div",Ht,[e("div",null,[Mt,t(U,{modelValue:_.remainnings,"onUpdate:modelValue":[l[0]||(l[0]=c=>_.remainnings=c),l[1]||(l[1]=c=>P("remainnings"))],dense:"",outlined:"",mask:"#####",suffix:"pcs",placeholder:"0",type:"number",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[c=>!!c||"Remainnings is required"],error:!!I.value.remainnings,"error-message":I.value.remainnings?"Remainings is required":""},null,8,["modelValue","rules","error","error-message"])]),e("div",null,[Et,t(U,{modelValue:_.breadOut,"onUpdate:modelValue":[l[2]||(l[2]=c=>_.breadOut=c),l[3]||(l[3]=c=>P("breadOut"))],dense:"",outlined:"",type:"number",mask:"#####",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[c=>!!c||"Bread out is required"],error:!!I.value.breadOut,"error-message":I.value.breadOut},null,8,["modelValue","rules","error","error-message"])])]),e("div",Kt,[e("div",Zt,[Jt,t(U,{dense:"",outlined:"",readonly:"",label:s.value?s.value.beginnings:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[Gt]),_:1},8,["label"])]),e("div",Wt,[Xt,t(U,{dense:"",outlined:"",readonly:"",label:s.value?s.value.new_production:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[Yt]),_:1},8,["label"])]),e("div",es,[ts,t(U,{dense:"",outlined:"",readonly:"",label:s.value?z(m)(s.value.price):"",style:{width:"150px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),_:1}),t(C,null,{default:a(()=>[e("div",ss,[t(L,{color:"red-6",label:"Ok",loading:D.value,onClick:b},null,8,["loading"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var os=ee(as,[["__scopeId","data-v-3aa8caaa"]]);const Ne={__name:"SearchEngine",emits:["update-search"],setup(o,{emit:i}){const m=x(""),f=i,u=()=>{f("update-search",m.value)};return(h,s)=>(g(),H(U,{rounded:"",outlined:"",dense:"",debounce:"300",modelValue:m.value,"onUpdate:modelValue":[s[0]||(s[0]=p=>m.value=p),u],placeholder:"Search products...",class:"q-mb-md",style:{width:"500px","max-width":"1500px","min-width":"100px"}},{append:a(()=>[t(E,{name:"search"})]),_:1},8,["modelValue"]))}};const re=o=>(_e("data-v-c7295ab8"),o=o(),me(),o),ls={class:"row items-center justify-between no-wrap"},ns={class:"text-h5 text-weight-bold"},rs={key:0},is={key:1},ds=re(()=>e("div",{class:"text-subtitle1 q-mt-xs opacity-80"}," Transfer products to branch locations / Add new products ",-1)),cs={class:"scrollable-content"},us=re(()=>e("div",{class:"text-subtitle2 text-grey-8 q-mb-md"}," Select Transfer Method ",-1)),_s={class:"action-cards row q-gutter-md"},ms=re(()=>e("div",{class:"text-caption text-grey-7 q-mt-xs"}," Add product to this branch ",-1)),vs=re(()=>e("div",{class:"text-caption text-grey-7 q-mt-xs"}," Send products to existing branch ",-1)),ps=re(()=>e("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"}," Select Destination Branch ",-1)),gs={class:"relative-position"},hs={key:0,class:"branch-dropdown z-top"},fs={key:0,class:"selected-branch q-mt-md"},ys={key:0,class:"products-section"},bs=re(()=>e("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"}," Add Products to Transfer ",-1)),xs={class:"row q-col-gutter-md items-end"},ws={class:"col-7"},$s={class:"q-ml-xl"},qs={class:"col-3"},ks={class:"col-2"},Ps={key:0,class:"q-mt-sm"},Ss={class:"text-subtitle2 text-grey-8 q-mb-sm"},Cs=re(()=>e("div",{class:"text-weight-medium"},"Product",-1)),Os=re(()=>e("div",{class:"text-weight-medium"},"Price",-1)),Vs=re(()=>e("div",{class:"text-weight-medium"},"Quantity",-1)),Is=re(()=>e("div",{class:"text-weight-medium"},"Actions",-1)),Bs={class:"q-pa-xm"},Rs={__name:"SendingProductsToBranchButton",props:{category:{type:String,required:!0}},setup(o){var Ze,Je,Ge,We,Xe,Ye;const i=o,m=k(()=>{var A;return{selecta:"bg-selecta",bread:"bg-bread",softdrinks:"bg-softdrinks",other:"bg-other"}[(A=i.category)==null?void 0:A.toLowerCase()]||"bg-gradient"}),f=S=>{if(!S)return"inventory_2";switch(S.toLowerCase()){case"bread":return"bakery_dining";case"selecta":return"icecream";case"softdrinks":return"local_drink";case"other":return"category";default:return"inventory_2"}},u=S=>{if(!S)return"grey-6";switch(S.toLowerCase()){case"bread":return"brown";case"selecta":return"red-7";case"softdrinks":return"purple-10";case"other":return"blue-grey-9";default:return"grey-6"}};console.log("Category Props",i.category);const{capitalizeFirstLetter:h,formatPrice:s}=pe(),{dialogRef:p,onDialogHide:D}=je(),j=ae(),d=k(()=>j.branchProducts);console.log("branchProducsssts",d.value);const _=Ct(),I=k(()=>_.branch),P=ze(),R=k(()=>j.user);console.log("user data",R.value);const O=((Je=(Ze=R.value)==null?void 0:Ze.device)==null?void 0:Je.reference_id)||((We=(Ge=R.value.device)==null?void 0:Ge.reference)==null?void 0:We.id)||"";console.log("branchId",O);const N=((Ye=(Xe=R.value)==null?void 0:Xe.employee)==null?void 0:Ye.employee_id)||"",Q=ge(),F=x(!1),w=x(!1),b=x(!1),v=x(null),q=x(""),n=x(!1),r=x(!1),l=x(!1),c=x(null);x("");const $=x([]),T=x([]),W=async()=>{q.value.trim()?(n.value=!0,await _.search(q.value),n.value=!1,r.value=!0):(_.branch=[],r.value=!1)},oe=()=>{Array.isArray(I.value)&&I.value.length>0&&(r.value=!0)},xe=k(()=>!!q.value),we=S=>{console.log("branchssssss",S),q.value=h(S.name),te.branch_id=S.id,l.value=!0,r.value=!1},$e=k(()=>d.value.filter(S=>S.category==="Bread")),Qe=k(()=>d.value.filter(S=>S.category==="Selecta")),dt=k(()=>d.value.filter(S=>S.category==="Softdrinks")),ct=k(()=>d.value.filter(S=>S.category==="Others")),Ae=S=>{console.log("productsssssss",S);const A=new Map;return S.forEach(M=>{A.has(M.product.id)||A.set(M.product.id,{label:h(M.product.name),value:M.product.id,price:M.price,total_quantity:M.total_quantity})}),[...A.values()].sort((M,he)=>M.label.localeCompare(he.label,void 0,{sensitivity:"base"}))},ut=k(()=>{switch(i.category){case"Bread":return Ae($e.value);case"Selecta":return Ae(Qe.value);case"Softdrinks":return Ae(dt.value);case"Other":return Ae(ct.value);default:return[]}});Y(ut,S=>{T.value=S,$.value=S},{immediate:!0});const _t=(S,A,V)=>{A(()=>{if(S==="")$.value=T.value;else{const M=S.toLowerCase();$.value=T.value.filter(he=>he.label.toLowerCase().indexOf(M)>-1)}})},le=x([]),te=Ie({branch_id:O,quantity:""}),mt=()=>{console.log("Selected Product:",c.value),console.log("Action:",v.value),console.log("Branch ID:",te.branch_id),console.log("Quantity:",te.quantity);const S=le.value.find(gt=>gt.product_id.value===c.value.value);if(S){Q.notify({type:"warning",message:`${S.label} is already in the list`,icon:"warning"});return}const A=c.value,V=A.label,M=A.total_quantity||0,he=parseInt(te.quantity);if(v.value==="send"&&he>M){Q.notify({type:"negative",message:`Only ${M} pcs available for ${V}`,icon:"error"});return}le.value.push({product_id:A,label:A.label,quantity:he,price:A.price}),console.log("sendingProductsList.value",le.value),c.value=null,te.quantity=""},vt=S=>{le.value.splice(S,1),Q.notify({type:"info",message:"Product removed from list"})},pt=async()=>{if(!v.value||le.value.length===0||v.value==="send"&&!te.branch_id){Q.notify({type:"negative",message:"Please select branch and add products to the list"});return}b.value=!0;const S=v.value==="add"?O:te.branch_id,A={from_branch_id:O,to_branch_id:S,employee_id:N,category:i.category,status:"pending",action:v.value,remark:"",products:le.value.map(V=>({product_id:V.product_id.value,quantity:V.quantity,price:V.price}))};console.log("Sending products to branch:",A);try{const V=await P.sendProductsToBranch(A);if(!V.success){Q.notify({type:"negative",message:V.errors||V.message||"Something went wrong"}),V.errors&&console.error("validation errors",V.errors);return}Q.notify({type:"positive",message:V.message||"Products processed successfully"}),le.value=[],te.branch_id=""}finally{b.value=!1}};return(S,A)=>(g(),H(ue,{ref_key:"dialogRef",ref:p,onHide:z(D),modelValue:F.value,"onUpdate:modelValue":A[6]||(A[6]=V=>F.value=V),"transition-show":"slide-up","transition-hide":"slide-down",persistent:""},{default:a(()=>[t(K,{class:"dialog-card"},{default:a(()=>[t(C,{class:J(["dialog-header",m.value])},{default:a(()=>[e("div",ls,[e("div",ns,[o.category!=="Bread"?(g(),B("div",rs," Send / Add "+y(o.category)+" Products To Branch ",1)):(g(),B("div",is,"Send "+y(o.category)+" Products To Branch",1))]),Oe(t(L,{icon:"close",flat:"",dense:"",round:"",class:"close-btn"},null,512),[[Ve]])]),ds]),_:1},8,["class"]),e("div",cs,[t(C,{class:"action-section q-pb-none"},{default:a(()=>[us,e("div",_s,[o.category!=="Bread"?(g(),H(K,{key:0,flat:"",bordered:"",class:J(["action-card cursor-pointer",v.value==="add"?"action-card-active":""]),onClick:A[0]||(A[0]=V=>v.value="add")},{default:a(()=>[t(C,{class:"text-center"},{default:a(()=>[t(E,{name:"add_circle",size:"lg",color:v.value==="add"?"primary":"grey-6",class:"q-mb-sm"},null,8,["color"]),e("div",{class:J(["text-subtitle2",v.value==="add"?"text-primary text-weight-medium":"text-weight-medium"])}," Add Products ",2),ms]),_:1})]),_:1},8,["class"])):se("",!0),t(K,{flat:"",bordered:"",class:J(["action-card cursor-pointer",v.value==="send"?"action-card-active":""]),onClick:A[1]||(A[1]=V=>v.value="send")},{default:a(()=>[t(C,{class:"text-center"},{default:a(()=>[t(E,{name:"location_on",size:"lg",color:v.value==="send"?"primary":"grey-6",class:"q-mb-sm"},null,8,["color"]),e("div",{class:J(["text-subtitle2",v.value==="send"?"text-primary text-weight-medium":"text-weight-medium"])}," Select Branch ",2),vs]),_:1})]),_:1},8,["class"])])]),_:1}),t(Te,{name:"slide-fade"},{default:a(()=>[v.value==="send"?(g(),H(C,{key:0,class:"branch-section q-pt-md"},{default:a(()=>[ps,e("div",gs,[t(U,{modelValue:q.value,"onUpdate:modelValue":[A[3]||(A[3]=V=>q.value=V),W],onFocus:oe,outlined:"",rounded:"",dense:"",debounce:"500",placeholder:"Search branch by name...",loading:n.value,color:"primary",class:"branch-search"},{prepend:a(()=>[t(E,{name:"search"})]),append:a(()=>[q.value?(g(),H(E,{key:0,name:"clear",class:"cursor-pointer",onClick:A[2]||(A[2]=lt(V=>q.value="",["stop"]))})):se("",!0)]),_:1},8,["modelValue","loading"]),t(Te,{name:"fade"},{default:a(()=>[r.value&&xe.value?(g(),B("div",hs,[t(K,{class:"shadow-3"},{default:a(()=>[t(tt,{separator:""},{default:a(()=>[I.value.length?se("",!0):(g(),H(ke,{key:0},{default:a(()=>[t(X,null,{default:a(()=>[Z(" No Branch Found ")]),_:1})]),_:1})),(g(!0),B(G,null,be(I.value,V=>(g(),H(ke,{key:V.id,clickable:"",onClick:M=>we(V)},{default:a(()=>[t(X,null,{default:a(()=>[Z(y(z(h)(V.name)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})])):se("",!0)]),_:1})]),S.selectedBranch?(g(),B("div",fs,[t(Ee,{color:"primary","text-color":"white",icon:"check_circle",class:"q-pa-sm"},{default:a(()=>[Z(" Selected: "+y(z(h)(S.selectedBranch.name)),1)]),_:1})])):se("",!0)]),_:1})):se("",!0)]),_:1}),t(Te,{name:"slide-fade"},{default:a(()=>[v.value==="add"||v.value==="send"?(g(),B("div",ys,[t(C,null,{default:a(()=>[bs,e("div",xs,[e("div",ws,[e("div",$s,y(i.category)+" Product",1),t(St,{modelValue:c.value,"onUpdate:modelValue":A[4]||(A[4]=V=>c.value=V),options:$.value,onFilter:_t,debounce:"3000",outlined:"",dense:"",behavior:"menu","use-input":"","hide-dropdown-icon":"","input-debounce":"300",clearable:"",style:{width:"215px","max-width":"600px","min-width":"80px"},color:"primary",loading:w.value,disable:w.value},{prepend:a(()=>[t(E,{name:"inventory"})]),"no-option":a(()=>[t(ke,null,{default:a(()=>[t(X,{class:"text-grey"},{default:a(()=>[t(ye,null,{default:a(()=>[Z("No products found")]),_:1})]),_:1})]),_:1})]),option:a(({itemProps:V,opt:M})=>[t(ke,wt($t(V)),{default:a(()=>[t(X,{avatar:""},{default:a(()=>[t(E,{name:f(i.category),color:u(i.category)},null,8,["name","color"])]),_:1}),t(X,null,{default:a(()=>[t(ye,null,{default:a(()=>[Z(y(M.label),1)]),_:2},1024),t(ye,{caption:""},{default:a(()=>[Z(" \u2022 Available: "+y(M.total_quantity)+" pcs ",1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","loading","disable"])]),e("div",qs,[t(U,{modelValue:te.quantity,"onUpdate:modelValue":A[5]||(A[5]=V=>te.quantity=V),type:"number",outlined:"",dense:"",placeholder:"Quantity",min:"1",color:"primary"},null,8,["modelValue"])]),e("div",ks,[t(L,{color:"primary",icon:"add",class:"full-height",onClick:mt,disabled:!c.value||!te.quantity||te.quantity<=0,loading:w.value},null,8,["disabled","loading"])])]),c.value?(g(),B("div",Ps,[t(Ee,{size:"sm",color:"blue-1","text-color":"blue-8",icon:"info"},{default:a(()=>[Z(" Available : "+y(c.value.total_quantity)+" pcs ",1)]),_:1}),c.value.price?(g(),H(Ee,{key:0,size:"sm",color:"green-1","text-color":"green-8",class:"q-ml-xs"},{default:a(()=>[Z(" Price: "+y(z(s)(c.value.price)),1)]),_:1})):se("",!0)])):se("",!0)]),_:1}),t(C,{class:"products-list-card"},{default:a(()=>[e("div",Ss,[Z(" Products to Transfer "),t(rt,{color:"primary",class:"q-ml-sm"},{default:a(()=>[Z(y(le.value.length),1)]),_:1})]),t(K,{flat:"",bordered:"",class:"products-list-card"},{default:a(()=>[t(tt,{separator:""},{default:a(()=>[t(ke,{class:"bg-grey-2 text-grey-8"},{default:a(()=>[t(X,{class:"col-6"},{default:a(()=>[Cs]),_:1}),t(X,{class:"col-2"},{default:a(()=>[Os]),_:1}),t(X,{class:"col-2"},{default:a(()=>[Vs]),_:1}),t(X,{side:""},{default:a(()=>[Is]),_:1})]),_:1}),(g(!0),B(G,null,be(le.value,(V,M)=>(g(),H(ke,{key:V.product_id},{default:a(()=>[t(X,{class:"col-6"},{default:a(()=>[t(ye,{class:"text-caption"},{default:a(()=>[Z(y(z(h)(V.label)),1)]),_:2},1024)]),_:2},1024),t(X,{class:"col-2"},{default:a(()=>[t(ye,{class:"text-caption q-ml-md"},{default:a(()=>[Z(y(z(s)(V.price||0)),1)]),_:2},1024)]),_:2},1024),t(X,{class:"col-2"},{default:a(()=>[t(ye,{class:"text-caption q-ml-md"},{default:a(()=>[Z(y(V.quantity)+" pcs ",1)]),_:2},1024)]),_:2},1024),t(X,{side:""},{default:a(()=>[t(ye,null,{default:a(()=>[t(L,{dense:"",flat:"",round:"",icon:"backspace",color:"grey-10",onClick:he=>vt(M)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])):se("",!0)]),_:1})]),e("div",{class:J(["dialog-footer q-pa-sm",m.value]),align:"right"},[e("div",Bs,[t(L,{color:"red-6",icon:"send",onClick:pt,loading:b.value,disabled:le.value.length<=0},null,8,["loading","disabled"])])],2)]),_:1})]),_:1},8,["onHide","modelValue"]))}};var Ue=ee(Rs,[["__scopeId","data-v-c7295ab8"]]);const Ds=o=>(_e("data-v-bc1428ac"),o=o(),me(),o),Qs={class:"row items-center justify-between"},As={class:"text-h6 text-weight-medium text-dark"},Ts={class:"product-badge-label"},Ls={class:"row items-center justify-between"},js={class:"col"},zs={class:"row items-center q-mb-xs"},Ns={class:"product-category-icon q-mr-sm"},Us={class:"product-name-compact"},Fs={class:"col-auto"},Hs={class:"row items-center"},Ms={class:"price-compact"},Es=Ds(()=>e("div",{class:"divider"},null,-1)),Ks={class:"quantity-compact"},Zs={class:"quantity-number q-ml-md"},Js={__name:"ProceedDialog",props:{productDetails:Object,category:String},setup(o){const{dialogRef:i,onDialogHide:m}=je(),{formatDate:f,formatFullname:u,formatPrice:h,capitalizeFirstLetter:s}=pe();console.log("propssss",o);const D=ae(),j=k(()=>D.user);console.log("user datsssssa",j.value);const d=k(()=>{var w,b,v,q,n;return((v=(b=(w=j.value)==null?void 0:w.data)==null?void 0:b.employee)==null?void 0:v.id)||((n=(q=j.value)==null?void 0:q.data)==null?void 0:n.employee_id)||""});console.log("useeessrId",d.value);const _=ze(),I=x(!1),P=x(""),R=x(!1),O=ge(),N=async w=>{var v,q;if(!P.value.trim())return;console.log("Remark:",P.value.trim()),console.log("product",w);const b={id:w.id,empoyee_id:d.value,branch_id:w.to_branch_id,product_id:w.product_id,quantity:w.added_product,status:"confirmed",remark:P.value.trim()};try{R.value=!0,console.log("datssa",b);const n=await _.receivedSendBranchProducts(b);console.log("Received Branch Products:",n),Q(),I.value=!1}catch(n){console.log("Error saving remark:",n),O.notify({type:"negative",message:(q=(v=n==null?void 0:n.response)==null?void 0:v.data)==null?void 0:q.message})}finally{R.value=!1}},Q=()=>{P.value=""},F=w=>({bread:"bakery_dining",selecta:"icecream",softdrinks:"local_drink",other:"category"})[w==null?void 0:w.toLowerCase()]||"inventory_2";return(w,b)=>(g(),H(ue,{ref_key:"dialogRef",ref:i,onHide:z(m),modelValue:I.value,"onUpdate:modelValue":b[3]||(b[3]=v=>I.value=v),persistent:""},{default:a(()=>[t(K,{class:"compact-remark-dialog"},{default:a(()=>[t(C,{class:"q-pa-lg border-bottom"},{default:a(()=>[e("div",Qs,[e("div",As,[t(E,{name:"sticky_note_2",size:"20px",class:"q-mr-sm text-primary"}),Z(" Add Remark ")]),Oe(t(L,{icon:"close",flat:"",round:"",dense:"",onClick:Q},null,512),[[Ve]])])]),_:1}),t(C,null,{default:a(()=>{var v,q,n,r;return[e("div",Ts,[e("div",Ls,[e("div",js,[e("div",zs,[e("div",Ns,[t(E,{name:F(o.category),size:"16px"},null,8,["name"])]),e("div",Us,y(z(s)(((q=(v=o.productDetails)==null?void 0:v.product)==null?void 0:q.name)||"N/A")),1)])]),e("div",Fs,[e("div",Hs,[e("div",Ms,y(z(h)((n=o.productDetails)==null?void 0:n.price)||"N/A"),1),Es,e("div",Ks,[t(E,{name:"layers",size:"14px",class:"q-mr-xs"}),e("span",Zs,y(`${((r=o.productDetails)==null?void 0:r.added_product)||0} pcs`),1)])])])])])]}),_:1}),t(C,{class:"q-pa-lg"},{default:a(()=>[t(U,{modelValue:P.value,"onUpdate:modelValue":b[0]||(b[0]=v=>P.value=v),outlined:"",type:"textarea",placeholder:"Type your remark here...",autogrow:"",maxlength:1e3,counter:"",class:"q-mb-md","input-style":{minHeight:"100px",resize:"none"},onKeydown:b[1]||(b[1]=qt(lt(v=>N(o.productDetails),["ctrl"]),["enter"]))},null,8,["modelValue"])]),_:1}),t(nt,{class:"q-px-lg q-pb-lg"},{default:a(()=>[t(L,{label:"Proceed",color:"primary",class:"full-width",unelevated:"",disable:!P.value.trim(),onClick:b[2]||(b[2]=v=>N(o.productDetails))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide","modelValue"]))}};var Gs=ee(Js,[["__scopeId","data-v-bc1428ac"]]);const ve=o=>(_e("data-v-02cee310"),o=o(),me(),o),Ws={class:"header-content q-px-lg q-py-lg"},Xs={class:"row items-center justify-between"},Ys={class:"row items-center q-gutter-md"},ea={class:"icon-wrapper"},ta={class:"text-h4 text-weight-bold text-white"},sa=ve(()=>e("div",{class:"text-subtitle1 text-white opacity-80 q-mt-xs"}," Transaction Details ",-1)),aa=ve(()=>e("div",{class:"wave-decoration"},[e("svg",{viewBox:"0 0 1200 120",preserveAspectRatio:"none"},[e("path",{d:"M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z",opacity:".25",fill:"currentColor"}),e("path",{d:"M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z",opacity:".5",fill:"currentColor"}),e("path",{d:"M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z",fill:"currentColor"})])],-1)),oa={class:"scrollable-content"},la={class:"row q-col-gutter-lg q-mb-xl"},na={class:"col-12 col-sm-4"},ra={class:"info-card"},ia={class:"row items-center q-gutter-sm q-mb-sm"},da=ve(()=>e("div",{class:"text-subtitle2 text-grey-7"},"Date & Time",-1)),ca={class:"text-h6 text-weight-medium"},ua={class:"col-12 col-sm-4"},_a={class:"info-card"},ma={class:"row items-center q-gutter-sm q-mb-sm"},va=ve(()=>e("div",{class:"text-subtitle2 text-grey-7"},"Cashier",-1)),pa={class:"text-h6 text-weight-medium"},ga={class:"col-12 col-sm-4"},ha={class:"info-card"},fa={class:"row items-center q-gutter-sm q-mb-sm"},ya={class:"text-subtitle2 text-grey-7"},ba={class:"text-h6 text-weight-medium"},xa={class:"product-card q-mb-xl"},wa=ve(()=>e("div",{class:"text-h6 text-weight-bold q-mb-md"}," Product Information ",-1)),$a={class:"row items-center q-gutter-lg"},qa={class:"col-auto"},ka={class:"col"},Pa={class:"text-h5 text-weight-bold q-mb-xs"},Sa={class:"row items-center q-gutter-xl"},Ca={class:"column"},Oa=ve(()=>e("div",{class:"text-subtitle2 text-grey-7"},"Price",-1)),Va={class:"column"},Ia=ve(()=>e("div",{class:"text-subtitle2 text-grey-7"},"Quantity",-1)),Ba={class:"text-h5 text-weight-bold"},Ra=ve(()=>e("span",{class:"text-subtitle1 text-grey-7"},"pcs",-1)),Da={class:"column"},Qa=ve(()=>e("div",{class:"text-subtitle2 text-grey-7"},"Total",-1)),Aa={class:"text-h5 text-weight-bold"},Ta={key:0,class:"row justify-end q-gutter-md"},La={__name:"ViewDetails",props:{index:{type:Number,required:!0},productDetails:{type:Object,required:!0},category:{type:String,required:!0}},setup(o){const i=o;console.log("props",i);const{dialogRef:m,onDialogHide:f}=je(),u=x(!0),h=x(!1),s=ge(),{formatDate:p,formatFullname:D,formatPrice:j,capitalizeFirstLetter:d}=pe(),_=k(()=>{var b;return{selecta:"bg-selecta",bread:"bg-bread",softdrinks:"bg-softdrinks",other:"bg-other"}[(b=i.category)==null?void 0:b.toLowerCase()]||"bg-primary"}),I=(w,b=null)=>({bread:"brown",selecta:"pink",softdrinks:"blue",other:"blue-grey-7"})[w==null?void 0:w.toLowerCase()]||(b?`text-${b}`:"text-primary"),P=ae(),R=k(()=>P.user),O=k(()=>{var w,b,v,q,n;return((b=(w=R.value)==null?void 0:w.device)==null?void 0:b.reference_id)||((n=(q=(v=R.value)==null?void 0:v.device)==null?void 0:q.reference)==null?void 0:n.id)||""}),N=w=>({bread:"bakery_dining",selecta:"icecream",softdrinks:"local_drink",other:"category"})[w==null?void 0:w.toLowerCase()]||"inventory_2",Q=(w,b)=>{if(!w||!b)return j("N/A");const v=parseFloat(w)*parseInt(b);return j(v)},F=()=>{s.dialog({component:Gs,componentProps:{productDetails:i.productDetails,category:i.category}})};return(w,b)=>(g(),H(ue,{ref_key:"dialogRef",ref:m,onHide:z(f),modelValue:h.value,"onUpdate:modelValue":b[1]||(b[1]=v=>h.value=v),maximized:u.value,"transition-show":"slide-up","transition-hide":"slide-down",persistent:""},{default:a(()=>[t(K,{class:"bg-white"},{default:a(()=>[e("div",{class:J(["header-wrapper",_.value])},[e("div",Ws,[e("div",Xs,[e("div",Ys,[e("div",ea,[t(E,{name:N(o.category),size:"40px",class:"icon"},null,8,["name"])]),e("div",null,[e("div",ta,y(o.category),1),sa])]),Oe(t(L,{icon:"close",class:"text-white",flat:"",round:"",dense:""},null,512),[[Ve]])])]),aa],2),e("div",oa,[t(C,{class:"q-pt-xl q-pb-sm"},{default:a(()=>{var v,q,n,r,l,c,$,T,W,oe,xe,we,$e,Qe;return[e("div",la,[e("div",na,[e("div",ra,[e("div",ia,[t(E,{name:"event",color:"grey-6",size:"20px"}),da]),e("div",ca,y(z(p)(((v=o.productDetails)==null?void 0:v.created_at)||"No Date")),1)])]),e("div",ua,[e("div",_a,[e("div",ma,[t(E,{name:"person",color:"grey-6",size:"20px"}),va]),e("div",pa,y(z(D)(((q=o.productDetails)==null?void 0:q.employee)||"No Cashier")),1)])]),e("div",ga,[e("div",ha,[e("div",fa,[t(E,{name:"store",color:"grey-6",size:"20px"}),e("div",ya,y(((n=o.productDetails)==null?void 0:n.to_branch_id)===O.value?"Source":"Destination"),1)]),e("div",ba,y(((r=o.productDetails)==null?void 0:r.to_branch_id)===O.value?((c=(l=o.productDetails)==null?void 0:l.from_branch)==null?void 0:c.name)||"No Branch":((T=($=o.productDetails)==null?void 0:$.to_branch)==null?void 0:T.name)||"No Branch"),1)])])]),e("div",xa,[wa,e("div",$a,[e("div",qa,[e("div",{class:J(["product-icon",_.value])},[t(E,{name:N(o.category),size:"32px",class:"text-white"},null,8,["name"])],2)]),e("div",ka,[e("div",Pa,y(z(d)(((oe=(W=o.productDetails)==null?void 0:W.product)==null?void 0:oe.name)||"N/A")),1),e("div",Sa,[e("div",Ca,[Oa,e("div",{class:J(["text-h5 text-weight-bold",I(o.category)])},y(z(j)(((xe=o.productDetails)==null?void 0:xe.price)||"N/A")),3)]),e("div",Va,[Ia,e("div",Ba,[Z(y(((we=o.productDetails)==null?void 0:we.added_product)||"N/A")+" ",1),Ra])]),e("div",Da,[Qa,e("div",Aa,y(Q(($e=o.productDetails)==null?void 0:$e.price,(Qe=o.productDetails)==null?void 0:Qe.added_product)),1)])])])])])]}),_:1})]),t(C,{class:"q-pa-sm",align:"right"},{default:a(()=>{var v,q,n;return[O.value===((v=o.productDetails)==null?void 0:v.to_branch_id)&&((q=o.productDetails)==null?void 0:q.status)==="pending"&&((n=o.productDetails)==null?void 0:n.action)==="send"?(g(),B("div",Ta,[t(L,{label:"Receive Product",color:I(o.category,"positive"),padding:"12px 32px",class:"rounded-btn text-dark",icon:N(o.category),onClick:b[0]||(b[0]=r=>F(o.productDetails))},null,8,["color","icon"])])):se("",!0)]}),_:1})]),_:1})]),_:1},8,["onHide","modelValue","maximized"]))}};var ja=ee(La,[["__scopeId","data-v-02cee310"]]);const za=o=>(_e("data-v-49c5dfa5"),o=o(),me(),o),Na={class:"row items-center justify-between q-gutter-md"},Ua={class:"row items-center q-gutter-sm"},Fa={class:"text-h5 text-weight-bold"},Ha=za(()=>e("div",{class:"text-subtitle1 opacity-85 q-mt-xs"}," Transfer to branches or update inventory ",-1)),Ma={key:1},Ea={class:"text-subtitle1 text-weight-medium text-primary"},Ka={class:"full-width row flex-center text-accent q-gutter-sm q-py-xl"},Za={__name:"ViewAddProductsButton",props:{category:{type:String,required:!0}},setup(o){const i=o,m=x(""),{dialogRef:f,onDialogHide:u}=je(),h=x(!0),{formatDate:s,formatTime:p,formatFullname:D,capitalizeFirstLetter:j}=pe(),d=ae(),_=k(()=>d.user),I=k(()=>{var c,$,T,W,oe;return(($=(c=_.value)==null?void 0:c.device)==null?void 0:$.reference_id)||((oe=(W=(T=_.value)==null?void 0:T.device)==null?void 0:W.reference)==null?void 0:oe.id)||""}),P=ge(),R=x({page:1,rowsPerPage:0,rowsNumber:0}),O=ze(),N=k(()=>O.branchSendAddedProd),Q=x([]),F=x(!1),w=async(c=0,$=5,T="")=>{if(!!I.value){F.value=!0;try{const W=await O.fetchSendAddedBranchProducts(i.category,I.value,c,$,T),{data:oe,current_page:xe,per_page:we,total:$e}=N.value;console.log("branchProducts.value",N.value),console.log("data",oe),Q.value=oe,console.log("rows.value",Q.value),R.value={page:xe,rowsPerPage:we,rowsNumber:$e}}catch(W){console.error("Failed to load branch products:",W)}finally{F.value=!1}}};Ke(w);const b=c=>{w(c.pagination.page,c.pagination.rowsPerPage,c.filter)};Y(m,async c=>{R.value.page=1,await w(R.value.page,R.value.rowsPerPage,c)});const v=k(()=>{var $;return{selecta:"bg-selecta",bread:"bg-bread",softdrinks:"bg-softdrinks",other:"bg-other"}[($=i.category)==null?void 0:$.toLowerCase()]||"bg-primary"}),q=c=>({bread:"bakery_dining",selecta:"icecream",softdrinks:"local_drink",other:"category"})[c==null?void 0:c.toLowerCase()]||"inventory_2",n=c=>{const $=(c||"").toLowerCase();return $.includes("pending")?"orange":$.includes("confirmed")||$.includes("approved")?"positive":$.includes("cancel")||$.includes("reject")?"negative":"grey-7"},r=c=>{console.log("View:",c),P.dialog({component:ja,componentProps:{productDetails:c,category:i.category}})},l=[{name:"product",label:"Product",field:c=>{var $;return j((($=c.product)==null?void 0:$.name)||"")},align:"left",sortable:!0},{name:"date",label:"Date / Time",field:c=>`${s(c.created_at)} ${p(c.created_at)}`,align:"left",sortable:!0},{name:"employee",label:"Staff",field:c=>D(c.employee),align:"left",sortable:!0},{name:"from_branch",label:"Source",field:c=>{var $;return j((($=c.from_branch)==null?void 0:$.name)||"\u2014")},align:"left",sortable:!0},{name:"to_branch",label:"Destination",field:c=>{var $;return c.action==="add"?"Need to be approved by Admin":j((($=c.to_branch)==null?void 0:$.name)||"\u2014")},align:"left",sortable:!0},{name:"status",label:"Status",field:c=>j(c.status||""),align:"center",sortable:!0},{name:"action",label:"Actions",align:"right"}];return(c,$)=>(g(),H(ue,{ref_key:"dialogRef",ref:f,onHide:z(u),modelValue:c.dialog,"onUpdate:modelValue":$[2]||($[2]=T=>c.dialog=T),maximized:h.value,"transition-show":"slide-up","transition-hide":"slide-down",persistent:""},{default:a(()=>[t(K,{class:"bg-white rounded-borders",style:{width:"95vw","max-width":"1100px","border-radius":"16px",overflow:"hidden"}},{default:a(()=>[t(C,{class:J(["dialog-header text-white",v.value])},{default:a(()=>[e("div",Na,[e("div",Ua,[t(E,{name:q(o.category),size:"xl"},null,8,["name"]),e("div",null,[e("div",Fa,y(o.category==="Bread"?"Send":"Send / Add")+" "+y(o.category)+" Products ",1),Ha])]),Oe(t(L,{icon:"close",flat:"",round:"",dense:"",class:"bg-white text-grey-8",size:"md",onClick:z(u)},null,8,["onClick"]),[[Ve]])])]),_:1},8,["class"]),t(C,{class:"q-pa-lg"},{default:a(()=>[Q.value.length>3?(g(),H(U,{key:0,modelValue:m.value,"onUpdate:modelValue":$[0]||($[0]=T=>m.value=T),outlined:"",dense:"",debounce:"300",placeholder:"Search product, staff, destination...",class:"q-mb-lg"},{prepend:a(()=>[t(E,{name:"search"})]),_:1},8,["modelValue"])):se("",!0),F.value?(g(),H(st,{key:2,showing:""})):(g(),B("div",Ma,[t(Ot,{rows:Q.value,columns:l,"row-key":"id",flat:"",square:"",bordered:"",pagination:R.value,"onUpdate:pagination":$[1]||($[1]=T=>R.value=T),loading:F.value,"rows-per-page-options":[5,10,0],filter:m.value,onRequest:b,class:"my-sticky-modern-table shadow-1 rounded-borders","wrap-cells":"","virtual-scroll":""},{"body-cell-status":a(T=>[t(Me,{props:T,class:"text-center"},{default:a(()=>[t(rt,{color:n(T.value),"text-color":"white",class:"q-pa-sm q-px-md text-weight-medium text-uppercase",rounded:"",label:T.value},null,8,["color","label"])]),_:2},1032,["props"])]),"body-cell-product":a(T=>[t(Me,{props:T},{default:a(()=>[e("div",Ea,y(T.value),1)]),_:2},1032,["props"])]),"body-cell-action":a(T=>[t(Me,{props:T,class:"text-right"},{default:a(()=>[t(It,{flat:""},{default:a(()=>[t(L,{flat:"",round:"",dense:"",color:"primary",icon:"visibility",onClick:W=>r(T.row)},{default:a(()=>[t(Vt,{anchor:"bottom middle",offset:[0,8]},{default:a(()=>[Z("View Details")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),loading:a(()=>[t(st,{showing:""},{default:a(()=>[t(Le,{size:"50px",color:"grey-10"})]),_:1})]),"no-data":a(({icon:T,message:W})=>[e("div",Ka,[t(E,{name:T,size:"2rem"},null,8,["name"]),e("span",null,y(W||"No products found in this category."),1)])]),_:1},8,["rows","pagination","loading","filter"])]))]),_:1}),t(nt,{align:"right",class:"q-pa-md bg-grey-2"},{default:a(()=>[Oe(t(L,{flat:"",label:"Close",color:"grey-8",class:"q-mr-sm"},null,512),[[Ve]])]),_:1})]),_:1})]),_:1},8,["onHide","modelValue","maximized"]))}};var Fe=ee(Za,[["__scopeId","data-v-49c5dfa5"]]);const Ja={class:"q-gutter-y-md"},Ga={class:"row justify-between"},Wa={class:"row q-gutter-md"},Xa={__name:"BreadPage",setup(o){const i=x(""),m=ge(),f=s=>{i.value=s},u=s=>{m.dialog({component:Ue,componentProps:{category:s}})},h=s=>{m.dialog({component:Fe,componentProps:{category:s}})};return(s,p)=>(g(),B(G,null,[e("div",Ja,[e("div",Ga,[e("div",null,[t(Ne,{onUpdateSearch:f})]),e("div",Wa,[e("div",null,[t(L,{class:"bg-gradient text-white",outlined:"",label:"Send Bread To Branch",onClick:p[0]||(p[0]=D=>u("Bread"))})]),e("div",null,[t(L,{class:"add-bg-gradient text-white",outlined:"",label:"Added Bread",onClick:p[1]||(p[1]=D=>h("Bread"))})])])])]),e("div",null,[t(os,{filter:i.value},null,8,["filter"])])],64))}};var Ya=ee(Xa,[["__scopeId","data-v-ab8c5e86"]]);const ie=o=>(_e("data-v-f7895152"),o=o(),me(),o),eo={class:"q-mt-md"},to={key:0,class:"text-center q-pa-md"},so={key:1,class:"row q-pa-lg q-gutter-sm q-gutter-y-md"},ao=ie(()=>e("img",{src:"https://cdn.quasar.dev/img/chicken-salad.jpg"},null,-1)),oo={class:"q-pa-xm row q-gutter-x-sm justify-between"},lo=ie(()=>e("div",null,"Quantity:",-1)),no={class:"q-pa-xm row q-gutter-x-sm justify-between"},ro=ie(()=>e("div",null,"Price:",-1)),io={class:"row justify-between"},co={class:"text-h6"},uo={class:"q-mb-lg row justify-between"},_o=ie(()=>e("div",{class:"text-weight-light"},"Remainings",-1)),mo=ie(()=>e("div",{class:"text-weight-light"},"Selecta Out",-1)),vo={class:"row q-gutter-xm justify-between"},po={class:"q-gutter-sm"},go=ie(()=>e("div",{class:"text-weight-light"},"Beginnings",-1)),ho=ie(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),fo={class:"q-gutter-sm"},yo=ie(()=>e("div",{class:"text-weight-light"},"Added Stocks",-1)),bo=ie(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),xo={class:"q-gutter-sm"},wo=ie(()=>e("div",{class:"text-weight-light"},"Price",-1)),$o={align:"right"},qo={__name:"SelectaCard",props:{filter:String},setup(o){var b,v,q;const{capitalizeFirstLetter:i,formatPrice:m}=pe(),f=ae(),u=f.user;console.log("userData",u);const h=((b=u==null?void 0:u.device)==null?void 0:b.reference_id)||((q=(v=u==null?void 0:u.device)==null?void 0:v.reference)==null?void 0:q.id)||"0";console.log("branchId",h);const s=x(null),p=x(!1);x(!1);const D=o,j=n=>{s.value=n,console.log("selectedItem",s.value),p.value=!0},d=Ie({selectaSold:0,selectaRemainings:"",selectaBeginnings:0,selectaOut:""}),_=x({selectaRemainings:"",selectaOut:""}),I=n=>{_.value[n]=""},P=()=>{_.value.selectaRemainings="",_.value.selectaOut="";let n=!0;return d.selectaRemainings||(_.value.selectaRemainings="Remaining is required",n=!1),d.selectaOut||(_.value.selectaOut="Selecta Out is required",n=!1),n},R=k(()=>s.value?(console.log("selectedItem",s.value),d.selectaSold*s.value.price):0);k(()=>m(R.value));const O=()=>{if(s.value){const n=parseInt(s.value.total_quantity)||0,r=parseInt(d.selectaRemainings)||0,l=parseInt(d.selectaOut)||0,c=r+l;d.selectaSold=n-c}};Y(()=>d.selectaRemainings,n=>{O()}),Y(()=>d.selectaOut,n=>{O()});const N=k(()=>f.selectaProducts);Y(N,n=>{});const Q=k(()=>{var n;return((n=N.value)==null?void 0:n.filter(r=>r.product.name.toLowerCase().includes(D.filter.toLowerCase())))||[]}),F=()=>{s.value=null,d.selectaSold=0,d.selectaRemainings="",d.selectaBeginnings=0,d.selectaOut="",p.value=!1},w=()=>{var r;if(!P())return;Se.show({spinner:Le,message:`${i(s.value.product.name)} putting to the list...`,messageColor:"white"});const n={user_id:u==null?void 0:u.data.id,branch_id:h||((r=u==null?void 0:u.device)==null?void 0:r.branch_id),product_id:s.value.product.id,name:s.value.product.name,total:s.value.total_quantity,added_stocks:s.value.new_production,sold:d.selectaSold,out:d.selectaOut,beginnings:s.value.beginnings,remaining:d.selectaRemainings,price:s.value.price,sales:R.value,new_production:0};console.log("report",n),f.updateSelectaReport(n),Ce.create({message:"Product added successfully",color:"positive",position:"top"}),setTimeout(()=>{Se.hide(),F()},500)};return(n,r)=>(g(),B(G,null,[e("div",eo,[t(Be,{style:{height:"calc(100vh - 150px)","max-width":"1500px"}},{default:a(()=>[!Q.value||Q.value.length===0?(g(),B("div",to," No data available ")):(g(),B("div",so,[(g(!0),B(G,null,be(Q.value,(l,c)=>(g(),H(Re,{key:c,once:"",transition:"scale",class:"example-item"},{default:a(()=>[t(K,{onClick:$=>j(l),class:"q-ma-sm my-card"},{default:a(()=>[ao,e("div",{class:J(["q-pa-sm",{"text-subtitle2":l.product.name.length<=5,"text-caption text-weight-medium":l.product.name.length>10&&l.product.name.length<=20,"text-caption":l.product.name.length>20}])},y(z(i)(l.product.name)),3),t(Pe),t(C,{class:"text-subtitle2 text-weight-regular"},{default:a(()=>[e("div",oo,[lo,e("div",null,y(l.total_quantity),1)]),e("div",no,[ro,e("div",null,y(z(m)(l.price)),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]))]),_:1})]),e("div",null,[t(ue,{modelValue:p.value,"onUpdate:modelValue":r[4]||(r[4]=l=>p.value=l),persistent:""},{default:a(()=>[t(K,{class:"my-card q-pa-md",style:{width:"700px","max-width":"80vw"}},{default:a(()=>[t(C,null,{default:a(()=>[e("div",io,[e("div",co,y(z(i)(s.value?s.value.product.name:"")),1),e("div",null,[t(L,{round:"",dense:"",flat:"",icon:"close",onClick:F})])])]),_:1}),t(C,null,{default:a(()=>[e("div",uo,[e("div",null,[_o,t(U,{modelValue:d.selectaRemainings,"onUpdate:modelValue":[r[0]||(r[0]=l=>d.selectaRemainings=l),r[1]||(r[1]=l=>I("selectaRemainings"))],dense:"",outlined:"",mask:"#####",type:"number",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[l=>!!l||"Remainnings is required"],error:!!_.value.selectaRemainings,"error-message":_.value.selectaRemainings},null,8,["modelValue","rules","error","error-message"])]),e("div",null,[mo,t(U,{modelValue:d.selectaOut,"onUpdate:modelValue":[r[2]||(r[2]=l=>d.selectaOut=l),r[3]||(r[3]=l=>I("selectaOut"))],dense:"",outlined:"",mask:"#####",type:"number",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[l=>!!l||"Selecta out is required"],error:!!_.value.selectaOut,"error-message":_.value.selectaOut},null,8,["modelValue","rules","error","error-message"])])]),e("div",vo,[e("div",po,[go,t(U,{dense:"",outlined:"",readonly:"",label:s.value?s.value.beginnings:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[ho]),_:1},8,["label"])]),e("div",fo,[yo,t(U,{dense:"",outlined:"",readonly:"",label:s.value?s.value.new_production:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[bo]),_:1},8,["label"])]),e("div",xo,[wo,t(U,{dense:"",outlined:"",readonly:"",label:s.value?n.formatCurrency(s.value.price):"",style:{width:"150px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),_:1}),t(C,null,{default:a(()=>[e("div",$o,[t(L,{color:"red-6",label:"Ok",onClick:w})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var ko=ee(qo,[["__scopeId","data-v-f7895152"]]);const Po={class:"q-gutter-y-md"},So={class:"row q-gutter-md"},Co={class:"row q-gutter-md"},Oo={__name:"SelectaPage",setup(o){const i=x(""),m=ge(),f=s=>{i.value=s},u=s=>{m.dialog({component:Ue,componentProps:{category:s}})},h=s=>{m.dialog({component:Fe,componentProps:{category:s}})};return(s,p)=>(g(),B(G,null,[e("div",Po,[e("div",So,[e("div",null,[t(Ne,{onUpdateSearch:f})]),e("div",Co,[e("div",null,[t(L,{class:"bg-gradient text-white",outlined:"",label:"Send Selecta to Branch",onClick:p[0]||(p[0]=D=>u("Selecta"))})]),e("div",null,[t(L,{class:"add-bg-gradient text-white",outlined:"",label:"Added Selecta",onClick:p[1]||(p[1]=D=>h("Selecta"))})])])])]),e("div",null,[t(ko,{filter:i.value},null,8,["filter"])])],64))}};var Vo=ee(Oo,[["__scopeId","data-v-7bbff322"]]);const Io={__name:"NestleCard",setup(o){return ae(),(i,m)=>(g(),B("div",null,"This is Nestle Page"))}},Bo={__name:"NestlePage",setup(o){return x(""),(i,m)=>(g(),B("div",null,[t(Io)]))}};const de=o=>(_e("data-v-8c42c686"),o=o(),me(),o),Ro={class:"q-mt-md"},Do={key:0,class:"text-center q-pa-md"},Qo={key:1,class:"row q-pa-lg q-gutter-sm q-gutter-y-md"},Ao=de(()=>e("img",{src:"https://cdn.quasar.dev/img/chicken-salad.jpg"},null,-1)),To={class:"q-pa-xm row q-gutter-x-sm justify-between"},Lo=de(()=>e("div",null,"Quantity:",-1)),jo={class:"q-pa-xm row q-gutter-x-sm justify-between"},zo=de(()=>e("div",null,"Price:",-1)),No={class:"row justify-between"},Uo={class:"text-h6"},Fo={class:"q-mb-lg row justify-between"},Ho=de(()=>e("div",{class:"text-weight-light"},"Remainings",-1)),Mo=de(()=>e("div",{class:"text-weight-light"},"Softdrinks Out",-1)),Eo={class:"row q-gutter-xm justify-between"},Ko={class:"q-gutter-sm"},Zo=de(()=>e("div",{class:"text-weight-light"},"Beginnings",-1)),Jo=de(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),Go={class:"q-gutter-sm"},Wo=de(()=>e("div",{class:"text-weight-light"},"Added Stocks",-1)),Xo=de(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),Yo={class:"q-gutter-sm"},el=de(()=>e("div",{class:"text-weight-light"},"Price",-1)),tl={align:"right"},sl={__name:"SoftdrinksCard",props:{filter:String},setup(o){var b,v,q;const{capitalizeFirstLetter:i,formatPrice:m}=pe(),f=ae(),u=f.user;console.log("userData",u);const h=((b=u==null?void 0:u.device)==null?void 0:b.reference_id)||((q=(v=u.device)==null?void 0:v.reference)==null?void 0:q.id)||"0";console.log("branchId",h);const s=x(null),p=x(!1);x(!1);const D=o,j=n=>{s.value=n,console.log("selectedItemss",s.value),p.value=!0},d=Ie({softdrinksSold:0,remainnings:"",beginnings:0,softdrinksOut:""}),_=x({remainnings:"",softdrinksOut:""}),I=n=>{_.value[n]=""},P=()=>{_.value.remainnings="",_.value.softdrinksOut="";let n=!0;return d.remainnings||(_.value.remainnings="Remaining is required",n=!1),d.softdrinksOut||(_.value.softdrinksOut="Softdrinks Out is required",n=!1),n},R=k(()=>s.value?d.softdrinksSold*s.value.price:0);k(()=>m(R.value));const O=()=>{if(s.value){const n=parseInt(s.value.total_quantity)||0,r=parseInt(d.remainnings)||0,l=parseInt(d.softdrinksOut)||0,c=r+l;d.softdrinksSold=n-c}};Y(()=>d.remainnings,n=>{O()}),Y(()=>d.softdrinksOut,n=>{O()});const N=k(()=>f.softdrinksProducts);Y(N,n=>{});const Q=k(()=>{var n;return((n=N.value)==null?void 0:n.filter(r=>r.product.name.toLowerCase().includes(D.filter.toLowerCase())))||[]}),F=()=>{s.value=null,d.softdrinksSold=0,d.remainnings="",d.beginnings=0,d.softdrinksOut="",p.value=!1},w=()=>{var r;if(!P())return;Se.show({spinner:Le,message:`${i(s.value.product.name)} putting to the list...`,messageColor:"white"});const n={user_id:u==null?void 0:u.data.id,branch_id:h||((r=u==null?void 0:u.device)==null?void 0:r.branch_id),product_id:s.value.product.id,name:s.value.product.name,total:s.value.total_quantity,added_stocks:s.value.new_production,sold:d.softdrinksSold,out:d.softdrinksOut,beginnings:s.value.beginnings,remaining:d.remainnings,price:s.value.price,sales:R.value,new_production:0};console.log("report",n),f.updateSoftdrinksReport(n),Ce.create({message:"Product added successfully",color:"positive",position:"top"}),setTimeout(()=>{Se.hide(),F()},2e3)};return(n,r)=>(g(),B(G,null,[e("div",Ro,[t(Be,{style:{height:"450px","max-width":"1500px"}},{default:a(()=>[!Q.value||Q.value.length===0?(g(),B("div",Do," No data available ")):(g(),B("div",Qo,[(g(!0),B(G,null,be(Q.value,(l,c)=>(g(),H(Re,{key:c,once:"",transition:"scale",class:"example-item"},{default:a(()=>[t(K,{onClick:$=>j(l),class:"q-ma-sm my-card"},{default:a(()=>[Ao,e("div",{class:J(["q-pa-sm",{"text-subtitle2":l.product.name.length<=5,"text-caption text-weight-medium":l.product.name.length>10&&l.product.name.length<=20,"text-caption":l.product.name.length>20}])},y(z(i)(l.product.name)),3),t(Pe),t(C,{class:"text-subtitle2 text-weight-regular"},{default:a(()=>[e("div",To,[Lo,e("div",null,y(l.total_quantity),1)]),e("div",jo,[zo,e("div",null,y(z(m)(l.price)),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]))]),_:1})]),e("div",null,[t(ue,{modelValue:p.value,"onUpdate:modelValue":r[4]||(r[4]=l=>p.value=l),persistent:""},{default:a(()=>[t(K,{class:"my-card q-pa-md",style:{width:"700px","max-width":"80vw"}},{default:a(()=>[t(C,null,{default:a(()=>[e("div",No,[e("div",Uo,y(z(i)(s.value?s.value.product.name:"")),1),e("div",null,[t(L,{round:"",dense:"",flat:"",icon:"close",onClick:F})])])]),_:1}),t(C,null,{default:a(()=>[e("div",Fo,[e("div",null,[Ho,t(U,{modelValue:d.remainnings,"onUpdate:modelValue":[r[0]||(r[0]=l=>d.remainnings=l),r[1]||(r[1]=l=>I("remainnings"))],dense:"",outlined:"",mask:"#####",type:"number",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[l=>!!l||"Softdrinks out is required"],error:!!_.value.remainnings,"error-message":_.value.remainnings},null,8,["modelValue","rules","error","error-message"])]),e("div",null,[Mo,t(U,{modelValue:d.softdrinksOut,"onUpdate:modelValue":[r[2]||(r[2]=l=>d.softdrinksOut=l),r[3]||(r[3]=l=>I("softdrinksOut"))],dense:"",outlined:"",mask:"#####",type:"number",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[l=>!!l||"Softdrinks out is required"],error:!!_.value.softdrinksOut,"error-message":_.value.softdrinksOut},null,8,["modelValue","rules","error","error-message"])])]),e("div",Eo,[e("div",Ko,[Zo,t(U,{dense:"",outlined:"",readonly:"",label:s.value?s.value.beginnings:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[Jo]),_:1},8,["label"])]),e("div",Go,[Wo,t(U,{dense:"",outlined:"",readonly:"",label:s.value?s.value.new_production:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[Xo]),_:1},8,["label"])]),e("div",Yo,[el,t(U,{dense:"",outlined:"",readonly:"",label:s.value?n.formatCurrency(s.value.price):"",style:{width:"150px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),_:1}),t(C,null,{default:a(()=>[e("div",tl,[t(L,{color:"red-6",label:"Ok",onClick:w})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var al=ee(sl,[["__scopeId","data-v-8c42c686"]]);const ol={class:"q-gutter-y-md"},ll={class:"row q-gutter-md"},nl={class:"row q-gutter-md"},rl={__name:"SoftdrinksPage",setup(o){const i=x(""),m=ge(),f=s=>{i.value=s},u=s=>{m.dialog({component:Ue,componentProps:{category:s}})},h=s=>{m.dialog({component:Fe,componentProps:{category:s}})};return(s,p)=>(g(),B(G,null,[e("div",ol,[e("div",ll,[e("div",null,[t(Ne,{onUpdateSearch:f})]),e("div",nl,[e("div",null,[t(L,{class:"bg-gradient text-white",outlined:"",label:"Send Softdrinks To Branch",onClick:p[0]||(p[0]=D=>u("Softdrinks"))})]),e("div",null,[t(L,{class:"add-bg-gradient text-white",outlined:"",label:"Added Softdrinks",onClick:p[1]||(p[1]=D=>h("Softdrinks"))})])])])]),e("div",null,[t(al,{filter:i.value},null,8,["filter"])])],64))}};var il=ee(rl,[["__scopeId","data-v-9ef21600"]]);const De=o=>(_e("data-v-48231c1e"),o=o(),me(),o),dl={class:"q-mt-md"},cl={class:"row q-pa-lg q-gutter-sm q-gutter-y-md"},ul=De(()=>e("img",{src:"https://cdn.quasar.dev/img/chicken-salad.jpg"},null,-1)),_l={class:"q-pa-xm row q-gutter-x-sm justify-between"},ml=De(()=>e("div",null,"Layers",-1)),vl={class:"q-pa-xm row q-gutter-x-sm justify-between"},pl=De(()=>e("div",null,"Price:",-1)),gl={class:"row justify-between"},hl={class:"text-h6"},fl={class:"row q-gutter-x-sm"},yl=De(()=>e("div",{class:"text-subtitle2"},"Layer /s :",-1)),bl={class:"text-weight-light"},xl={class:"row q-gutter-x-sm"},wl=De(()=>e("div",{class:"text-subtitle2"},"Price :",-1)),$l={class:"text-weight-light"},ql={__name:"CakeCard",setup(o){const i=ae(),m=Bt(),f=k(()=>m.onDisplayProducts),u=localStorage.getItem("branch_id"),h=x(null),s=x(!1);Ke(async()=>{u&&await p()});const p=async()=>{const P=await m.fetchOnDisplayProducts(u);f.value=P,console.log("sdfasdfas",f.value)},D=P=>P?P.split(" ").map(R=>R.charAt(0).toUpperCase()+R.slice(1).toLowerCase()).join(" "):"",j=P=>{h.value=P,s.value=!0},d=P=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(P).replace("\u20B1","\u20B1 "),_=async()=>{if(h.value){const P={cake_report_id:h.value.id,name:h.value.name,price:h.value.price,sales_status:"sold"};console.log(P),i.updateCakeReport(P),Ce.create({type:"positive",message:`${P.name} is sold`})}s.value=!1},I=async()=>{if(h.value){const P={cake_report_id:h.value.id,name:h.value.name,price:h.value.price,sales_status:"pull out"};i.updateCakeReport(P),Ce.create({type:"warning",message:`${P.name} is pull out`})}s.value=!1};return(P,R)=>(g(),B(G,null,[e("div",dl,[t(Be,{style:{height:"450px","max-width":"1500px"}},{default:a(()=>[e("div",cl,[(g(!0),B(G,null,be(f.value,(O,N)=>(g(),H(Re,{key:N,once:"",transition:"scale",class:"example-item"},{default:a(()=>[t(K,{onClick:Q=>j(O),class:"q-ma-sm my-card"},{default:a(()=>[ul,e("div",{class:J(["q-pa-sm",{"text-h6":O.name.length<=10,"text-caption text-weight-medium":O.name.length>10&&O.name.length<=20,"text-caption text-weight-medium":O.name.length>20}])},y(D(O.name)),3),t(Pe),t(C,null,{default:a(()=>[e("div",_l,[ml,e("div",null,y(O.layers),1)]),e("div",vl,[pl,e("div",null,y(d(O.price)),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))])]),_:1})]),t(ue,{modelValue:s.value,"onUpdate:modelValue":R[0]||(R[0]=O=>s.value=O)},{default:a(()=>[t(K,null,{default:a(()=>[t(C,null,{default:a(()=>[e("div",gl,[e("div",hl,y(D(h.value.name)),1),e("div",null,[Oe(t(L,{round:"",dense:"",flat:"",icon:"close"},null,512),[[Ve]])])])]),_:1}),t(Pe),t(C,{class:"row justify-between"},{default:a(()=>[e("div",fl,[yl,e("div",bl,y(h.value.layers),1)]),e("div",xl,[wl,e("div",$l,y(d(h.value.price)),1)])]),_:1}),t(C,{class:"q-gutter-x-md"},{default:a(()=>[t(L,{label:"Sold",color:"primary",unelevated:"",class:"rounded-borders",icon:"check_circle",onClick:_}),t(L,{label:"Pull Out",color:"negative",outline:"",class:"rounded-borders",icon:"close",onClick:I})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var kl=ee(ql,[["__scopeId","data-v-48231c1e"]]);const Pl={__name:"CakePage",setup(o){return(i,m)=>(g(),B("div",null,[t(kl)]))}};const ce=o=>(_e("data-v-1ed567a2"),o=o(),me(),o),Sl={class:"q-mt-md"},Cl={key:0,class:"text-center q-pa-md"},Ol={key:1,class:"row q-pa-lg q-gutter-y-lg"},Vl=ce(()=>e("img",{src:"https://cdn.quasar.dev/img/chicken-salad.jpg"},null,-1)),Il={class:"q-pa-xm row q-gutter-x-sm justify-between"},Bl=ce(()=>e("div",null,"Quantity:",-1)),Rl={class:"q-pa-xm row q-gutter-x-sm justify-between"},Dl=ce(()=>e("div",null,"Price:",-1)),Ql={class:"text-h6"},Al={class:"q-mb-lg row justify-between"},Tl=ce(()=>e("div",{class:"text-weight-light"},"Remainings",-1)),Ll=ce(()=>e("div",{class:"text-weight-light"},"Product Out",-1)),jl={class:"row q-gutter-xm justify-between"},zl={class:"q-gutter-sm"},Nl=ce(()=>e("div",{class:"text-weight-light"},"Beginnings",-1)),Ul=ce(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),Fl={class:"q-gutter-sm"},Hl=ce(()=>e("div",{class:"text-weight-light"},"Added Stocks",-1)),Ml=ce(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),El={class:"q-gutter-sm"},Kl=ce(()=>e("div",{class:"text-weight-light"},"Price",-1)),Zl={align:"right"},Jl={__name:"OtherCard",props:{filter:String},setup(o){var b,v,q;const{capitalizeFirstLetter:i,formatPrice:m}=pe(),f=ae(),u=f.user;console.log("userdata for branch",u);const h=((b=u==null?void 0:u.device)==null?void 0:b.reference_id)||((q=(v=u.device)==null?void 0:v.reference)==null?void 0:q.id)||"0";console.log("branchId",h);const s=x(null),p=x(!1);x(!1);const D=o,j=n=>{s.value=n,console.log("selectedItemsssss",s.value),p.value=!0},d=Ie({otherProductSold:0,remainnings:"",beginnings:0,otherProductOut:""}),_=x({remainnings:"",otherProductOut:""}),I=n=>{_.value[n]=""},P=()=>{_.value.remainnings="",_.value.otherProductOut="";let n=!0;return d.remainnings||(_.value.remainnings="Remaining is required",n=!1),d.otherProductOut||(_.value.otherProductOut="Product Out is required",n=!1),n},R=()=>{if(s.value){const n=parseInt(s.value.total_quantity)||0,r=parseInt(d.remainnings)||0,l=parseInt(d.otherProductOut)||0,c=r+l;d.otherProductSold=n-c}};Y(()=>d.remainnings,n=>{R()}),Y(()=>d.otherProductOut,n=>{R()});const O=k(()=>f.othersProducts);console.log("othersProducts",O.value);const N=k(()=>s.value?d.otherProductSold*s.value.price:0);k(()=>formatCurrency(N.value));const Q=k(()=>{var n;return((n=O.value)==null?void 0:n.filter(r=>r.product.name.toLowerCase().includes(D.filter.toLowerCase())))||[]}),F=()=>{s.value=null,d.otherProductOut="",d.beginnings=0,d.otherProductSold=0,d.remainnings="",p.value=!1},w=async()=>{var r;if(!P())return;const n={user_id:u==null?void 0:u.data.id,branch_id:h||((r=u==null?void 0:u.device)==null?void 0:r.branch_id),product_id:s.value.product.id,name:s.value.product.name,total:s.value.total_quantity,sold:d.otherProductSold,out:d.otherProductOut,added_stocks:s.value.new_production,beginnings:s.value.beginnings,remaining:d.remainnings,price:s.value.price,sales:N.value,new_production:0};console.log("report",n),f.updateOtherProductsReport(n),Ce.create({message:"Product added successfully",color:"positive",position:"top"}),F()};return(n,r)=>(g(),B(G,null,[e("div",Sl,[t(Be,{style:{height:"700px","max-width":"1500px"}},{default:a(()=>[!Q.value||Q.value.length===0?(g(),B("div",Cl," No data available ")):(g(),B("div",Ol,[(g(!0),B(G,null,be(Q.value,(l,c)=>(g(),H(Re,{key:c,once:"",transition:"scale",class:"example-item q-gutter-sm"},{default:a(()=>[t(K,{onClick:$=>j(l),class:"q-ma-sm my-card"},{default:a(()=>[Vl,e("div",{class:J(["q-pa-sm",{"text-subtitle2":l.product.name.length<=5,"text-caption text-weight-medium":l.product.name.length>10&&l.product.name.length<=20,"text-caption":l.product.name.length>20}])},y(z(i)(l.product.name)),3),t(Pe),t(C,{class:"text-subtitle2 text-weight-regular"},{default:a(()=>[e("div",Il,[Bl,e("div",null,y(l.total_quantity),1)]),e("div",Rl,[Dl,e("div",null,y(z(m)(l.price)),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]))]),_:1})]),e("div",null,[t(ue,{modelValue:p.value,"onUpdate:modelValue":r[4]||(r[4]=l=>p.value=l),persistent:""},{default:a(()=>[t(K,{class:"my-card q-pa-md",style:{width:"700px","max-width":"80vw"}},{default:a(()=>[t(C,{class:"row justify-between"},{default:a(()=>[e("div",Ql,y(z(i)(s.value?s.value.product.name:"")),1),e("div",null,[t(L,{round:"",dense:"",flat:"",icon:"close",onClick:F})])]),_:1}),t(C,null,{default:a(()=>[e("div",Al,[e("div",null,[Tl,t(U,{modelValue:d.remainnings,"onUpdate:modelValue":[r[0]||(r[0]=l=>d.remainnings=l),r[1]||(r[1]=l=>I("remainnings"))],dense:"",outlined:"",mask:"#####",suffix:"pcs",placeholder:"0",type:"number",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[l=>!!l||"Remainnings out is required"],error:!!_.value.remainnings,"error-message":_.value.remainnings},null,8,["modelValue","rules","error","error-message"])]),e("div",null,[Ll,t(U,{modelValue:d.otherProductOut,"onUpdate:modelValue":[r[2]||(r[2]=l=>d.otherProductOut=l),r[3]||(r[3]=l=>I("otherProductOut"))],dense:"",outlined:"",type:"number",mask:"#####",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[l=>!!l||"Product out is required"],error:!!_.value.otherProductOut,"error-message":_.value.otherProductOut},null,8,["modelValue","rules","error","error-message"])])]),e("div",jl,[e("div",zl,[Nl,t(U,{dense:"",outlined:"",readonly:"",label:s.value?s.value.beginnings:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[Ul]),_:1},8,["label"])]),e("div",Fl,[Hl,t(U,{dense:"",outlined:"",readonly:"",label:s.value?s.value.new_production:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[Ml]),_:1},8,["label"])]),e("div",El,[Kl,t(U,{dense:"",outlined:"",readonly:"",label:s.value?n.formatCurrency(s.value.price):"",style:{width:"150px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),_:1}),t(C,null,{default:a(()=>[e("div",Zl,[t(L,{color:"red-6",label:"Ok",onClick:w})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var Gl=ee(Jl,[["__scopeId","data-v-1ed567a2"]]);const Wl={class:"q-gutter-y-md"},Xl={class:"row q-gutter-md"},Yl={class:"row q-gutter-md"},en={__name:"OtherPage",setup(o){const i=x(""),m=ge(),f=s=>{i.value=s},u=s=>{m.dialog({component:Ue,componentProps:{category:s}})},h=s=>{m.dialog({component:Fe,componentProps:{category:s}})};return(s,p)=>(g(),B("div",Wl,[e("div",Xl,[e("div",null,[t(Ne,{onUpdateSearch:f})]),e("div",Yl,[e("div",null,[t(L,{class:"bg-gradient text-white",outlined:"",label:"Send Other Product to Branch",onClick:p[0]||(p[0]=D=>u("Other"))})]),e("div",null,[t(L,{class:"add-bg-gradient text-white",outlined:"",label:"Added Othe Prod",onClick:p[1]||(p[1]=D=>h("Other"))})])])]),e("div",null,[t(Gl,{filter:i.value},null,8,["filter"])])]))}};var tn=ee(en,[["__scopeId","data-v-10e371e7"]]);const sn={class:"text-h6 text-white"},Zn={__name:"ProductsPage",setup(o){var s,p,D;const i=x("bread"),m=ae();ze();const f=m.user,u=((s=f.device)==null?void 0:s.refence_id)||((D=(p=f.device)==null?void 0:p.reference)==null?void 0:D.id)||"0",h=async()=>{await m.fetchBranchProducts(u),console.log("sales report productsdsdsd breadProducts",m.breadProducts),console.log("sales report productsdsdsd selectaProducts",m.selectaProducts),console.log("sales report productsdsdsd othersProducts",m.othersProducts),console.log("sales report productsdsdsd softdrinksProducts",m.softdrinksProducts)};return Ke(async()=>{u&&await h()}),(j,d)=>(g(),H(K,{flat:""},{default:a(()=>[t(C,{style:{"background-color":"#ef4444"}},{default:a(()=>[e("div",sn,[t(E,{name:"fa-solid fa-store"}),Z(" Store Branches ")])]),_:1}),t(C,null,{default:a(()=>[t(kt,{modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=_=>i.value=_),dense:"",class:"bg-white","active-color":"red-6","indicator-color":"red-6",align:"justify"},{default:a(()=>[t(qe,{name:"bread",label:"Bread"}),t(qe,{name:"selecta",label:"Selecta"}),t(qe,{name:"nestle",label:"Nestl\xE9"}),t(qe,{name:"softdrinks",label:"Softdrinks"}),t(qe,{name:"cake",label:"Cake /s"}),t(qe,{name:"others",label:"Other /s"})]),_:1},8,["modelValue"])]),_:1}),t(C,null,{default:a(()=>[t(Pt,{modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=_=>i.value=_),animated:""},{default:a(()=>[t(fe,{name:"bread"},{default:a(()=>[e("div",null,[t(Ya)])]),_:1}),t(fe,{name:"selecta"},{default:a(()=>[e("div",null,[t(Vo)])]),_:1}),t(fe,{name:"nestle"},{default:a(()=>[e("div",null,[t(Bo)])]),_:1}),t(fe,{name:"softdrinks"},{default:a(()=>[e("div",null,[t(il)])]),_:1}),t(fe,{name:"cake"},{default:a(()=>[t(Pl)]),_:1}),t(fe,{name:"others"},{default:a(()=>[t(tn)]),_:1}),t(fe)]),_:1},8,["modelValue"])]),_:1})]),_:1}))}};export{Zn as default};
