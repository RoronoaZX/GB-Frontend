import{i as re,h as E,c as w,l as ae,m as ie,k as ne,j as O,g as ce,r as v,u as j,A as ue,at as de,C as pe,bt as fe,H as me,z as ve,bE as he,o as q,e as R,w as t,J as l,f as e,L as h,K as _e,a3 as P,a5 as W,I as A,Q as J,a4 as F,be as ge,a0 as B,$ as I,M as X,ae as Y,Z as xe,aK as U,bf as Z,aI as ye,O as we,R as be}from"./index.19c08288.js";import{Q as N,a as Qe}from"./QSelect.ca8d5c71.js";import{Q as p}from"./QSkeleton.9b87febc.js";import{a as S,b as c,Q as Ce}from"./QMenu.d1a26ae6.js";import{Q as M}from"./QList.1c87c0bc.js";import{Q as qe}from"./QChip.6d9dd3bc.js";import{Q as Se}from"./QImg.765761e1.js";import{Q as ke}from"./QSpinnerIos.7895d53b.js";import{Q as Ie}from"./QInnerLoading.0fc8808f.js";import{Q as Ve}from"./QTooltip.3ff0ed9f.js";import{Q as $e}from"./QPage.6c80a80c.js";import{C as G}from"./ClosePopup.55e68bf0.js";import{u as Te}from"./employee.f2bf7739.js";import{f as ee}from"./useEmployeeFunctions.a0aa569b.js";import{_ as ze}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-virtual-scroll.6453203a.js";import"./rtl.276c3f1b.js";import"./selection.218a9897.js";import"./position-engine.cfd801ca.js";import"./axios.46eb9b8a.js";import"./date.22b50280.js";import"./branch.d0705714.js";import"./warehouse.10d4d8e1.js";import"./employment-type.e547bbbd.js";const te={position:{type:String,default:"bottom-right",validator:s=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(s)},offset:{type:Array,validator:s=>s.length===2},expand:Boolean};function Ae(){const{props:s,proxy:{$q:C}}=ae(),_=re(ie,E);if(_===E)return console.error("QPageSticky needs to be child of QLayout"),E;const V=w(()=>{const i=s.position;return{top:i.indexOf("top")!==-1,right:i.indexOf("right")!==-1,bottom:i.indexOf("bottom")!==-1,left:i.indexOf("left")!==-1,vertical:i==="top"||i==="bottom",horizontal:i==="left"||i==="right"}}),n=w(()=>_.header.offset),g=w(()=>_.right.offset),d=w(()=>_.footer.offset),u=w(()=>_.left.offset),b=w(()=>{let i=0,f=0;const m=V.value,$=C.lang.rtl===!0?-1:1;m.top===!0&&n.value!==0?f=`${n.value}px`:m.bottom===!0&&d.value!==0&&(f=`${-d.value}px`),m.left===!0&&u.value!==0?i=`${$*u.value}px`:m.right===!0&&g.value!==0&&(i=`${-$*g.value}px`);const y={transform:`translate(${i}, ${f})`};return s.offset&&(y.margin=`${s.offset[1]}px ${s.offset[0]}px`),m.vertical===!0?(u.value!==0&&(y[C.lang.rtl===!0?"right":"left"]=`${u.value}px`),g.value!==0&&(y[C.lang.rtl===!0?"left":"right"]=`${g.value}px`)):m.horizontal===!0&&(n.value!==0&&(y.top=`${n.value}px`),d.value!==0&&(y.bottom=`${d.value}px`)),y}),Q=w(()=>`q-page-sticky row flex-center fixed-${s.position} q-page-sticky--${s.expand===!0?"expand":"shrink"}`);function x(i){const f=ne(i.default);return O("div",{class:Q.value,style:b.value},s.expand===!0?f:[O("div",f)])}return{$layout:_,getStickyContent:x}}var Be=ce({name:"QPageScroller",props:{...te,scrollOffset:{type:Number,default:1e3},reverse:Boolean,duration:{type:Number,default:300},offset:{...te.offset,default:()=>[18,18]}},emits:["click"],setup(s,{slots:C,emit:_}){const{proxy:{$q:V}}=ae(),{$layout:n,getStickyContent:g}=Ae(),d=v(null);let u;const b=w(()=>n.height.value-(n.isContainer.value===!0?n.containerHeight.value:V.screen.height));function Q(){return s.reverse===!0?b.value-n.scroll.value.position>s.scrollOffset:n.scroll.value.position>s.scrollOffset}const x=v(Q());function i(){const k=Q();x.value!==k&&(x.value=k)}function f(){s.reverse===!0?u===void 0&&(u=j(b,i)):m()}j(n.scroll,i),j(()=>s.reverse,f);function m(){u!==void 0&&(u(),u=void 0)}function $(k){const D=pe(n.isContainer.value===!0?d.value:n.rootRef.value);fe(D,s.reverse===!0?n.height.value:0,s.duration),_("click",k)}function y(){return x.value===!0?O("div",{ref:d,class:"q-page-scroller",onClick:$},g(C)):null}return f(),ue(m),()=>O(de,{name:"q-transition--fade"},y)}}),oe="/assets/boy-avatar.8512a60a.png";const H=s=>(we("data-v-3f8b26ad"),s=s(),be(),s),Pe={class:"row q-col-gutter-md q-mb-lg"},Le={class:"col-12 col-sm-6 col-md-4"},Ne={class:"col-12 col-sm-6 col-md-8"},Oe={class:"row q-col-gutter-md"},De={class:"col-6 col-md-3"},Ee={class:"col-6 col-md-3"},je={class:"col-6 col-md-3"},Re={class:"col-6 col-md-3"},Fe={class:"row q-col-gutter-lg"},Ue={class:"row items-center justify-between no-wrap"},Me={class:"text-center q-pt-sm"},He={class:"row items-center justify-end"},Ke={key:0,class:"col-12 text-center text-grey-7 q-mt-xl"},We=H(()=>l("div",{class:"text-h6 q-mt-md"},"No employees found",-1)),Je=H(()=>l("p",null,"Try adjusting your search or filter criteria.",-1)),Xe={class:"row items-center justify-between no-wrap"},Ye={class:"text-center q-pt-sm"},Ze={class:"text-h6 q-mt-md"},Ge={class:"text-caption text-grey-7"},et={class:"row items-center no-wrap text-grey-8"},tt=["href"],ot=["href"],at={class:"row items-center justify-between text-caption text-grey-7"},lt=H(()=>l("span",null,null,-1)),st=["onClick"],rt={__name:"PayslipPage",setup(s){const C=Te(),_=me(),V=w(()=>C.employees),n=v([]),g=v(!0),d=v(null),u=v(""),b=v(null),Q=v(null),x=v(null),i=v([]),f=v([]),m=v([]),$=()=>{window.scrollTo({top:0,behavior:"smooth"})},y=async()=>{g.value=!0;try{V.value=await C.fetchEmployeeWithEmploymentTypeAndDesignation();const{data:a}=V.value;n.value=a,a&&a.length>0&&(i.value=[...new Set(a.map(r=>r.employment_type.category))],m.value=[...new Set(a.map(r=>r.position))],f.value=[...new Set(a.map(r=>r.status))])}catch(a){console.error("Error fetching employees:",a)}finally{g.value=!1}},k=w(()=>{let a=n.value;if(u.value){const r=u.value.toLowerCase();a=a.filter(o=>ee(o).toLowerCase().includes(r))}return b.value&&(a=a.filter(r=>r.employment_type.category===b.value)),Q.value&&(a=a.filter(r=>r.status===Q.value)),x.value&&(a=a.filter(r=>r.position===x.value)),a});ve(()=>{y()});const D=a=>{d.value=a.id,setTimeout(()=>{d.value===a.id&&(d.value=null)},5e3),setTimeout(()=>{_.push({name:"employee-profile-page",params:{employee_id:a.id}})},300)};he(()=>{d.value=null});const T={Active:{label:"Active",chipColor:"green-6",chipTextColor:"white",icon:"lens",borderColor:"#68B984"},Invited:{label:"Invited",chipColor:"grey-10",chipTextColor:"white",icon:"check",borderColor:"#333333"},Inactive:{label:"Inactive",chipColor:"grey-4",chipTextColor:"grey-8",icon:"pause",borderColor:"#BDBDBD"}};function L(a){return T[a]||T.Inactive}function le(a){return{borderBottom:`4px solid ${(T[a]||T.Inactive).borderColor}`}}function se(a){return{color:(T[a]||T.Inactive).borderColor}}return(a,r)=>(q(),R($e,{class:"q-pa-md"},{default:t(()=>[l("div",Pe,[l("div",Le,[e(_e,{outlined:"",dense:"",modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=o=>u.value=o),placeholder:"Search",class:"bg-white"},{prepend:t(()=>[e(h,{name:"search"})]),_:1},8,["modelValue"])]),l("div",Ne,[l("div",Oe,[l("div",De,[e(N,{outlined:"",dense:"",modelValue:b.value,"onUpdate:modelValue":r[1]||(r[1]=o=>b.value=o),options:i.value,label:"Type",class:"bg-white",clearable:""},{prepend:t(()=>[e(h,{name:"workspaces_outline"})]),_:1},8,["modelValue","options"])]),l("div",Ee,[e(N,{outlined:"",dense:"",modelValue:Q.value,"onUpdate:modelValue":r[2]||(r[2]=o=>Q.value=o),options:f.value,label:"Status",class:"bg-white",clearable:""},{prepend:t(()=>[e(h,{name:"show_chart"})]),_:1},8,["modelValue","options"])]),l("div",je,[e(N,{outlined:"",dense:"",modelValue:x.value,"onUpdate:modelValue":r[3]||(r[3]=o=>x.value=o),options:m.value,label:"Role",class:"bg-white",clearable:""},{prepend:t(()=>[e(h,{name:"badge"})]),_:1},8,["modelValue","options"])]),l("div",Re,[e(N,{outlined:"",dense:"",label:"Advance Filter",class:"bg-white",options:["Feature not available"],disable:""},{prepend:t(()=>[e(h,{name:"filter_alt"})]),_:1})])])])]),l("div",Fe,[g.value?(q(),P(F,{key:0},W(8,o=>l("div",{key:o,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[e(J,{flat:"",bordered:""},{default:t(()=>[e(A,null,{default:t(()=>[l("div",Ue,[e(p,{type:"QChip",width:"85px",height:"24px"}),e(p,{type:"QBtn"})]),l("div",Me,[e(p,{type:"QAvatar",size:"90px",class:"q-mx-auto"}),e(p,{type:"text",height:"28px",width:"60%",class:"q-mt-md q-mx-auto"}),e(p,{type:"text",height:"20px",width:"40%",class:"q-mt-xs q-mx-auto"})])]),_:1}),e(A,{class:"q-pt-none"},{default:t(()=>[e(M,{dense:""},{default:t(()=>[e(S,{class:"q-px-none"},{default:t(()=>[e(c,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(p,{type:"QAvatar",size:"24px"})]),_:1}),e(c,null,{default:t(()=>[e(p,{type:"text",width:"60%"})]),_:1}),e(c,{side:""},{default:t(()=>[e(p,{type:"text",width:"65px"})]),_:1})]),_:1}),e(S,{class:"q-px-none"},{default:t(()=>[e(c,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(p,{type:"QAvatar",size:"24px"})]),_:1}),e(c,null,{default:t(()=>[e(p,{type:"text",width:"85%"})]),_:1})]),_:1}),e(S,{class:"q-px-none"},{default:t(()=>[e(c,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(p,{type:"QAvatar",size:"24px"})]),_:1}),e(c,null,{default:t(()=>[e(p,{type:"text",width:"70%"})]),_:1})]),_:1})]),_:1})]),_:1}),e(A,{class:"q-pt-none"},{default:t(()=>[l("div",He,[e(p,{type:"text",width:"90px",height:"20px"})])]),_:1})]),_:1})])),64)):(q(),P(F,{key:1},[k.value.length===0?(q(),P("div",Ke,[e(h,{name:"person_search",size:"4em"}),We,Je])):ge("",!0),(q(!0),P(F,null,W(k.value,o=>(q(),P("div",{key:o.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[e(J,{class:"employee-card",flat:"",bordered:"",style:Z(le(o.status))},{default:t(()=>[e(A,null,{default:t(()=>[l("div",Xe,[e(qe,{icon:L(o.status).icon,color:L(o.status).chipColor,"text-color":L(o.status).chipTextColor,class:"text-weight-bold",size:"xs"},{default:t(()=>[B(I(L(o.status).label),1)]),_:2},1032,["icon","color","text-color"]),e(X,{icon:"more_horiz",round:"",flat:"",dense:""},{default:t(()=>[e(Ce,null,{default:t(()=>[e(M,{style:{"min-width":"100px"}},{default:t(()=>[Y((q(),R(S,{clickable:""},{default:t(()=>[e(c,null,{default:t(()=>[B("Edit")]),_:1})]),_:1})),[[G]]),Y((q(),R(S,{clickable:""},{default:t(()=>[e(c,null,{default:t(()=>[B("Delete")]),_:1})]),_:1})),[[G]])]),_:1})]),_:1})]),_:1})]),l("div",Ye,[e(xe,{size:"90px"},{default:t(()=>[e(Se,{src:o.avatar||U(oe),"error-src":U(oe),"spinner-color":"primary",style:{height:"90px",width:"90px"}},null,8,["src","error-src"])]),_:2},1024),l("div",Ze,I(U(ee)(o)),1),l("div",Ge,I(o.position),1)])]),_:2},1024),e(A,{class:"q-pt-none"},{default:t(()=>[e(M,{dense:""},{default:t(()=>[e(S,{class:"q-px-none"},{default:t(()=>[e(c,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(h,{name:"storefront",color:"grey-8"})]),_:1}),e(c,null,{default:t(()=>[e(Qe,{class:"text-grey-8 ellipsis"},{default:t(()=>{var z;return[B(I(((z=o==null?void 0:o.designation)==null?void 0:z.name)||"N/A"),1)]}),_:2},1024)]),_:2},1024),e(c,{side:""},{default:t(()=>[l("div",et,[e(h,{name:"schedule",class:"q-mr-xs"}),l("span",null,I(o.employment_type.category||"N/A"),1)])]),_:2},1024)]),_:2},1024),e(S,{class:"q-px-none"},{default:t(()=>[e(c,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(h,{name:"email",color:"grey-8"})]),_:1}),e(c,null,{default:t(()=>{var z,K;return[l("a",{href:"mailto:"+(((z=o==null?void 0:o.user_designation)==null?void 0:z.email)||""),class:"contact-pill"},I(((K=o==null?void 0:o.user_designation)==null?void 0:K.email)||"N/A"),9,tt)]}),_:2},1024)]),_:2},1024),e(S,{class:"q-px-none"},{default:t(()=>[e(c,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(h,{name:"phone",color:"grey-8"})]),_:1}),e(c,null,{default:t(()=>[l("a",{href:"tel:"+(o.phone||"").replace(/\D/g,""),class:"contact-pill"},I(o.phone||"N/A"),9,ot)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(A,{class:"q-pt-none"},{default:t(()=>[l("div",at,[lt,l("a",{href:"#",style:Z([se(o.status),{"text-decoration":"none",cursor:"pointer"}]),class:"text-weight-bold",onClick:ye(z=>D(o),["prevent"])},[B(" View details "),e(h,{name:"arrow_forward_ios",size:"0.7em",class:"q-ml-xs"})],12,st)])]),_:2},1024),e(Ie,{showing:d.value===o.id,label:"Loading...","label-class":"text-primary","label-style":"font-size: 1.1em"},{default:t(()=>[e(ke,{size:"50px",color:"primary"})]),_:2},1032,["showing"])]),_:2},1032,["style"])]))),128))],64))]),e(Be,{position:"bottom-right","scroll-offset":100,offset:[18,18],"transition-show":"jump-up","transition-hide":"jump-down"},{default:t(()=>[e(X,{icon:"keyboard_arrow_up",round:"",size:"md","text-color":"white",onClick:$,class:"gradient-btn"},{default:t(()=>[e(Ve,{class:"gradient-tooltip"},{default:t(()=>[B(" Back to top ")]),_:1})]),_:1})]),_:1})]),_:1}))}};var Tt=ze(rt,[["__scopeId","data-v-3f8b26ad"]]);export{Tt as default};
