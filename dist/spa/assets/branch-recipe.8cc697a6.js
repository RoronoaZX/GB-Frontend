import{d,r as n,P as t,N as i}from"./index.396b8b2c.js";import{api as r}from"./axios.afda6b01.js";const v=d("branchRecipe",()=>{const o=n(null),s=n([]),p=n([]),l=async a=>{const e=await r.get(`/api/branches/${a}/recipes`);s.value=e.data};return{branchRecipe:o,branchRecipes:s,ingredients:p,saveBranchRecipe:async a=>{console.log("saveBranchRecipeStore",a),t.show();try{const e=await r.post("/api/branch-recipe",a);if(e.data.message==="Branch recipe saved successfully"){const c=s.value.find(h=>h.id===a.recipe_id);s.value=e.data,console.log("branchRecipes",e.data),i.create({type:"positive",message:"Branch product saved successfully",position:"top"})}else e.data.message==="The recipe already exists in this branch."&&i.create({type:"warning",message:"The product already exists in this branch.",position:"top"});l()}catch(e){console.log("error",e)}finally{t.hide()}},fetchBranchRecipes:l,deleteRecipe:async a=>{t.show();try{const e=await r.delete(`/api/branch-recipe/${a}`);s.value=s.value.filter(c=>c.id!==a),i.create({type:"positive",icon:"warning",message:"Recipe succesfully deleted",timeout:1e3})}catch(e){i.create({message:`Failed to delete item: ${e.message}`,type:"negative",position:"top-right"})}finally{t.hide()}},searchBranchRecipe:async(a,e)=>{console.log("searchBranchRecipe",a,e);const c=await r.get("/api/branch-recipe-search",{params:{keyword:a,branch_id:e}});o.value=c.data,console.log("branch recipe",c.data)},fetchBranchRawMaterials:async(a,e)=>{console.log("fetchBranchRawMaterials",a,e);try{const c=await r.get(`/api/branch/${e}/ingredients`,{params:{category:a}});console.log("ingredients",c.data),p.value=c.data}catch(c){console.log("error",c)}}}});export{v as u};
