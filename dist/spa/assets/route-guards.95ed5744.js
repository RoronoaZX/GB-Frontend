import{b as m,P as i}from"./index.eb8a22e6.js";import{api as f}from"./axios.ae26f54b.js";import{u as d}from"./baker-report.2e155436.js";import{u as p}from"./sales-report.4224c09b.js";import{u as g}from"./supervisor.1abb3515.js";import{u as h}from"./cake-maker-report.d8ec1670.js";import{u as n}from"./warehouse-rawMaterials.11739130.js";import"./raw-material.1297202a.js";var C=m(async({router:c})=>{c.beforeEach(async(o,k,e)=>{var l;const s=localStorage.getItem("token"),r=localStorage.getItem("role"),t=localStorage.getItem("uuid");if(i.value=!0,s&&t)try{const a=await f.get("/api/profile",{headers:{Authorization:`Bearer ${s}`,"Device-UUID":t}});console.log("userss:",a.data);const u=a.data.device;console.log("device:",u),d().setUser(a.data),p().setUser(a.data),g().setUser(a.data),h().setUser(a.data),n().setUser(a.data),o.path==="/"?r==="Admin"?e("/admin/dashboard"):r==="Baker"?e("/branch/baker"):r==="Cake Maker"?e("/branch/cake_maker"):r==="Cashier"?e("/branch/sales_lady/products"):e():e()}catch(a){console.error("Error fetching user profile:",((l=a.response)==null?void 0:l.data)||a.message),localStorage.removeItem("token"),localStorage.removeItem("role"),o.path!=="/"?e("/"):e()}finally{i.value=!1}else o.path!=="/"?e("/"):e()})});export{C as default};
