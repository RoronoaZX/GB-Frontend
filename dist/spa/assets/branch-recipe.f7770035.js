import{d as l,n as p,P as r,N as i}from"./index.c0815fe7.js";import{api as t}from"./axios.950c72e0.js";const R=l("branchRecipe",()=>{const n=p(null),c=p([]),o=async a=>{const e=await t.get(`/api/branches/${a}/recipes`);c.value=e.data};return{branchRecipe:n,branchRecipes:c,saveBranchRecipe:async a=>{console.log("saveBranchRecipeStore",a),r.show();try{const e=await t.post("/api/branch-recipe",a);if(e.data.message==="Branch recipe saved successfully"){const s=c.value.find(h=>h.id===a.recipe_id);c.value=e.data,console.log("branchRecipes",e.data),i.create({type:"positive",message:"Branch product saved successfully",position:"top"})}else e.data.message==="The recipe already exists in this branch."&&i.create({type:"warning",message:"The product already exists in this branch.",position:"top"});o()}catch(e){console.log("error",e)}finally{r.hide()}},fetchBranchRecipes:o,deleteRecipe:async a=>{r.show();try{const e=await t.delete(`/api/branch-recipe/${a}`);c.value=c.value.filter(s=>s.id!==a),i.create({type:"positive",icon:"warning",message:"Recipe succesfully deleted",timeout:1e3})}catch(e){i.create({message:`Failed to delete item: ${e.message}`,type:"negative",position:"top-right"})}finally{r.hide()}},searchBranchRecipe:async(a,e)=>{const s=await t.get("/api/branch-recipe-search",{params:{keyword:a,branch_id:e}});n.value=s.data,console.log("branch recipe",s.data)}}});export{R as u};
