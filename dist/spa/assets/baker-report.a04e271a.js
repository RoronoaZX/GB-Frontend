import{d as M,r as c,c as R,N as p,P as h}from"./index.d33a0c66.js";import{api as r}from"./axios.69b58a8d.js";const C=M("bakerReportsStore",()=>{const u=c({}),d=c([]),t=c([]),y=c([]),l=c([]),f=c({}),i=c({data:[],pagination:{total:0,per_page:3,current_page:1,last_page:1,from:0,to:0}}),m=e=>{u.value=e},b=e=>{t.value.push(e)},k=e=>{t.value.splice(e,1)},w=e=>{f.value=e},_=()=>{u.value={},t.value=[]},E=async e=>{const a=await r.get(`/api/branch/${e}/rawMaterials`);y.value=a.data},S=async(e,a=1,o=5,n="")=>{console.log("userId",e),console.log("page",a),console.log("per_page",o),console.log("search",n);try{const s=await r.get(`/api/branch/${e}/bakerReport`,{params:{page:a,per_page:o,search:n}});return i.value.data=s.data,console.log("response.data report response",s.data),i.value.pagination=s.data.pagination,console.log("bakerReport.value.pagination",i.value.pagination),s.data}catch(s){console.error("Error fetching baker reports:",s)}},I=async()=>{const e=await r.get("/api/initial-baker-report");d.value=e.data},x=async e=>{const a=await r.get(`/api/branch/${e}/bakerDoughReport`);t.value=a.data},$=async e=>{try{await r.post("/api/admin-create-admin-insert-recipe-baker-report",{reports:e}),p.create({type:"positive",message:"Report successfully sent"})}catch(a){console.log(a)}},B=async e=>{try{await r.post("/api/admin-create-baker-report",{reports:e}),p.create({type:"positive",message:"Report successfully sent"}),t.value=[]}catch(a){console.log(a)}},D=async()=>{var e,a;try{h.show(),await r.post("/api/initial-baker-report",{reports:t.value,employee_in_shift:l.value,overall_kilo:v.value,total_employees:g.value}),console.log("Reports to be saved reports:",t.value),console.log("Reports to be saved employeeInShift:",l.value),console.log("Reports to be saved overallKilo:",v.value),console.log("Reports to be saved totalEmployeesInShift:",g.value),p.create({type:"positive",message:"Report successfully sent"}),t.value=[],l.value=[]}catch(o){console.error("Error saving report:",o),p.create({type:"negative",message:((a=(e=o.response)==null?void 0:e.data)==null?void 0:a.message)||"ERROR"})}finally{h.hide()}},A=async e=>{try{const a=await r.post(`/api/confirm-initial-baker-report/${e}`);if(a.status===200){const o=t.value.findIndex(n=>n.id===e);o!==-1&&t.value.splice(o,1)}return a.data}catch(a){throw console.error("Error confirming report:",a),a}},K=async(e,a)=>{try{const o=await r.post(`/api/decline-initial-baker-report/${e}`,{remark:a});if(o.status===200){const n=t.value.findIndex(s=>s.id===e);n!==-1&&t.value.splice(n,1)}return o.data}catch(o){console.error("Error declining report:",o)}},v=R(()=>t.value.reduce((e,a)=>e+(parseFloat(a.kilo)||0),0)),g=R(()=>l.value.length);return{recipes:u,reportToView:d,reports:t,rawmaterials:y,employeeInShift:l,user:f,bakerReport:i,setRecipe:m,setReport:b,removeReport:k,setUser:w,clearData:_,fetchBranchRawMaterials:E,fetchBakerReport:S,fetchAllReports:I,fetchDoughReports:x,adminAddRecipebakerReport:$,adminBakerCreateReports:B,createReports:D,confirmReport:A,declineReport:K,overallKilo:v,totalEmployeesInShift:g}});export{C as u};
