import{c as B,r as _,t as H,u as D,o as m,a3 as f,f as e,M as E,w as t,Q as W,I as N,ae as de,J as o,K as x,e as I,L as C,bc as _e,a0 as p,bd as F,a4 as G,a5 as Y,$ as g,a1 as J,b6 as K,bC as j,aJ as Z,a2 as ee,O as te,R as ae,N as ie,z as fe}from"./index.94c77fd6.js";import{b as ve,Q as R,a as ye}from"./QTable.c51a3968.js";import{Q as ge}from"./QTr.8d6dd874.js";import{Q as re}from"./QSpinnerIos.50425f75.js";import{Q as ue}from"./QInnerLoading.91165b51.js";import{Q as be}from"./QPage.3fc3d23e.js";import{Q as me}from"./QSpace.65df66a4.js";import{Q as A,a as w}from"./QItem.8c9b5e82.js";import{Q as he}from"./QList.efc29e9c.js";import{C as ce}from"./ClosePopup.f93b8122.js";import{u as Pe}from"./employee.650041bf.js";import{u as le}from"./uniform.69d10628.js";/* empty css                                                                 */import{_ as se}from"./plugin-vue_export-helper.21dcd24c.js";import"./axios.669ebcd4.js";import{Q as xe}from"./QTooltip.4dab85c8.js";import{a as $}from"./QItemLabel.489c9a54.js";import"./QVirtualScroll.4001b6e2.js";import"./use-virtual-scroll.01174c13.js";import"./QSelect.3d607b48.js";import"./QChip.f7beea7b.js";import"./QMenu.ede0aec6.js";import"./position-engine.27bd2550.js";import"./selection.a3acc90c.js";const oe=c=>(te("data-v-0e5c6e4e"),c=c(),ae(),c),Ve=oe(()=>o("div",{class:"text-h6 text-weight-bold"},"\u{1F9E5} Add Uniform",-1)),we={style:{position:"relative"}},Se={key:0,class:"dropdown-list"},qe={class:"row q-col-gutter-md q-mt-lg"},$e={class:"col-12 col-sm-6"},Ue=oe(()=>o("div",{class:"text-subtitle2 text-grey-7 q-mb-xs"}," Employee Name: ",-1)),ke={class:"text-body1 text-weight-medium"},ze={class:"col-12 col-sm-6"},Qe=oe(()=>o("div",{class:"text-subtitle2 text-grey-7 q-mb-xs"},"Position:",-1)),Ne={class:"text-body1 text-weight-medium"},Le={class:"col-6"},Ce={class:"text-center q-mb-sm"},Fe={key:0,class:"row items-start"},Ae={class:"col-6"},Te={key:0,class:"col-6 q-gutter-sm"},Ie={class:"col-6"},Ee={class:"text-center q-mb-sm"},Oe={key:0,class:"row items-start"},Xe={class:"col-6"},Me={key:0,class:"col-6 q-gutter-sm"},Be={class:"row q-col-gutter-md"},Re={class:"col-4"},De={class:"col-4"},Je={class:"col-4"},Ke={__name:"AddUniform",emits:["created"],setup(c,{emit:L}){const U=L,V=Pe(),S=B(()=>V.employees),q=le(),v=_(""),b=_(!1),s=_(!1),P=_(!1),y=_(0),h=_(0),k=_(!1),T=_(!1),i=H({employee_id:"",employee_name:"",employee_position:"",tShirtsize:"",pantsSize:"",tShirtPcs:0,tShirtPrice:0,pantsPcs:0,pantsPrice:0,numberOfPayments:1}),M=()=>{b.value=!0},z=async()=>{v.value.trim()&&(T.value=!0,await V.searchEmployee(v.value),T.value=!1)},u=r=>{i.employee_id=r.id,i.employee_name=`${r.firstname} ${r.middlename?r.middlename.charAt(0)+".":""} ${r.lastname}`,i.employee_position=r.position,v.value=""},n=()=>{i.employee_id="",i.employee_name="",i.employee_position="",i.tShirtsize="",i.pantsSize="",i.tShirtPcs=0,i.tShirtPrice=0,i.pantsPcs=0,i.pantsPrice=0,i.numberOfPayments=1,s.value=!1,P.value=!1,y.value=0,h.value=0};D([()=>i.tShirtPcs,()=>i.tShirtPrice,()=>i.pantsPcs,()=>i.pantsPrice],()=>{y.value=i.tShirtPcs*i.tShirtPrice+i.pantsPcs*i.pantsPrice}),D([y,()=>i.numberOfPayments],()=>{h.value=y.value/(i.numberOfPayments||1)});const a=async()=>{k.value=!0;try{await q.createUniforms({...i,totalAmount:y.value,paymentPerPayroll:h.value,remaining_payments:y.value}),U("created"),b.value=!1,n()}catch(r){console.error(r)}finally{k.value=!1}};return(r,l)=>(m(),f("div",null,[e(E,{padding:"sm md",label:"Add Uniform",icon:"add_circle",size:"md",class:"gradient-btn text-white",onClick:M}),e(ee,{modelValue:b.value,"onUpdate:modelValue":l[12]||(l[12]=d=>b.value=d),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(W,{class:"uniform-dialog-card"},{default:t(()=>[e(N,{class:"dialog-header row items-center no-wrap"},{default:t(()=>[Ve,e(me),de(e(E,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},null,512),[[ce]])]),_:1}),e(N,{class:"q-pt-lg q-pb-md q-px-lg"},{default:t(()=>[o("div",we,[e(x,{modelValue:v.value,"onUpdate:modelValue":[l[0]||(l[0]=d=>v.value=d),z],label:"Search Employee",outlined:"",dense:"",rounded:"",debounce:"500",placeholder:"Enter name",clearable:""},{append:t(()=>[T.value?(m(),I(_e,{key:1,color:"primary",size:"sm"})):(m(),I(C,{key:0,name:"search"}))]),_:1},8,["modelValue"]),v.value?(m(),f("div",Se,[e(he,{separator:""},{default:t(()=>{var d;return[(d=S.value)!=null&&d.length?F("",!0):(m(),I(A,{key:0},{default:t(()=>[e(w,{class:"text-grey-7"},{default:t(()=>[p("No employee record")]),_:1})]),_:1})),(m(!0),f(G,null,Y(S.value,Q=>(m(),I(A,{key:Q.id,clickable:"",onClick:O=>u(Q)},{default:t(()=>[e(w,null,{default:t(()=>[p(g(`${Q.firstname} ${Q.middlename?Q.middlename.charAt(0)+".":""} ${Q.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]}),_:1})])):F("",!0)]),o("div",qe,[o("div",$e,[Ue,o("div",ke,g(i.employee_name||"-------"),1)]),o("div",ze,[Qe,o("div",Ne,g(i.employee_position||"-------"),1)])])]),_:1}),e(J,{inset:"",class:"q-mx-lg q-my-md"}),e(N,{class:"row q-col-gutter-md q-px-lg"},{default:t(()=>[o("div",Le,[o("div",Ce,[e(K,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=d=>s.value=d),label:"T-Shirt",color:"deep-orange","keep-color":""},null,8,["modelValue"])]),s.value?(m(),f("div",Fe,[o("div",Ae,[e(j,{modelValue:i.tShirtsize,"onUpdate:modelValue":l[2]||(l[2]=d=>i.tShirtsize=d),options:[{label:"18",value:"18"},{label:"S",value:"S"},{label:"M",value:"M"},{label:"L",value:"L"}],type:"radio",dense:"",color:"deep-orange"},null,8,["modelValue"])]),i.tShirtsize?(m(),f("div",Te,[e(x,{modelValue:i.tShirtPcs,"onUpdate:modelValue":l[3]||(l[3]=d=>i.tShirtPcs=d),dense:"",outlined:"",label:"pcs"},null,8,["modelValue"]),e(x,{modelValue:i.tShirtPrice,"onUpdate:modelValue":l[4]||(l[4]=d=>i.tShirtPrice=d),dense:"",outlined:"",label:"price"},null,8,["modelValue"])])):F("",!0)])):F("",!0)]),o("div",Ie,[o("div",Ee,[e(K,{modelValue:P.value,"onUpdate:modelValue":l[5]||(l[5]=d=>P.value=d),label:"Pants",color:"brown-6","keep-color":""},null,8,["modelValue"])]),P.value?(m(),f("div",Oe,[o("div",Xe,[e(j,{modelValue:i.pantsSize,"onUpdate:modelValue":l[6]||(l[6]=d=>i.pantsSize=d),options:[{label:"M",value:"M"},{label:"L",value:"L"},{label:"XL",value:"XL"},{label:"XXL",value:"XXL"}],type:"radio",dense:"",color:"brown"},null,8,["modelValue"])]),i.pantsSize?(m(),f("div",Me,[e(x,{modelValue:i.pantsPcs,"onUpdate:modelValue":l[7]||(l[7]=d=>i.pantsPcs=d),dense:"",outlined:"",label:"pcs"},null,8,["modelValue"]),e(x,{modelValue:i.pantsPrice,"onUpdate:modelValue":l[8]||(l[8]=d=>i.pantsPrice=d),dense:"",outlined:"",label:"price"},null,8,["modelValue"])])):F("",!0)])):F("",!0)])]),_:1}),e(N,{class:"q-px-lg q-pb-md"},{default:t(()=>[o("div",Be,[o("div",Re,[e(x,{modelValue:i.numberOfPayments,"onUpdate:modelValue":l[9]||(l[9]=d=>i.numberOfPayments=d),label:"Number of Payments",type:"number",outlined:"",dense:""},null,8,["modelValue"])]),o("div",De,[e(x,{modelValue:y.value,"onUpdate:modelValue":l[10]||(l[10]=d=>y.value=d),label:"Total Amount",outlined:"",dense:"",readonly:""},null,8,["modelValue"])]),o("div",Je,[e(x,{modelValue:h.value,"onUpdate:modelValue":l[11]||(l[11]=d=>h.value=d),label:"Per Payroll",outlined:"",dense:"",readonly:""},null,8,["modelValue"])])])]),_:1}),e(Z,{align:"right",class:"q-px-lg q-pb-lg"},{default:t(()=>[e(E,{size:"md",padding:"sm lg","no-caps":"",label:"Save","icon-right":"send",class:"gradient-btn text-white",onClick:a,loading:k.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var je=se(Ke,[["__scopeId","data-v-0e5c6e4e"]]);const ne=c=>(te("data-v-2d3cfa48"),c=c(),ae(),c),Ge=ne(()=>o("div",{class:"text-h6"},"\u{1F9E5} Edit Uniform",-1)),He={class:"row q-col-gutter-md q-mt-lg"},We={class:"col-12 col-sm-6"},Ye=ne(()=>o("div",{class:"text-subtitle2 text-grey-7 q-md-xs"},"Employee Name:",-1)),Ze={class:"text-body1 text-weight-medium"},et={class:"col-12 col-sm-6"},tt=ne(()=>o("div",{class:"text-subtitle2 text-grey-7 q-md-xs"},"Position:",-1)),at={class:"text-body1 text-weight-medium"},lt={class:"col-5"},st={class:"q-mb-lg",align:"center"},ot={key:0,class:"row q-ml-sm q-mt-sm"},nt={class:"col-6"},it={class:"q-gutter-md"},dt={class:"col-6"},rt={class:"q-mb-lg",align:"center"},ut={key:0,class:"row q-ml-sm q-mt-sm"},mt={class:"col-6 q-pl-xl"},ct={class:"q-gutter-md q-pl-lg"},pt={class:"row q-col-gutter-md"},_t={class:"col-4"},ft={class:"col-4"},vt={class:"col-4"},yt={__name:"EditUniform",props:["edit"],emits:["edited"],setup(c,{emit:L}){const U=L,V=c;console.log("edit",V.edit);const S=le(),q=_(!1),v=_(!1),b=H({...V.edit}),s=H({numberOfPayments:0,remaining_payments:V.edit.remaining_payments||0,tShirtsize:"",tShirtPcs:"",tShirtPrice:"",pantsSize:"",pantsPcs:"",pantsPrice:""}),P=_(!1),y=_(!1),h=B(()=>{const u=P.value&&s.tShirtPcs&&s.tShirtPrice?parseFloat(s.tShirtPcs)*parseFloat(s.tShirtPrice):0,n=y.value&&s.pantsPcs&&s.pantsPrice?parseFloat(s.pantsPcs)*parseFloat(s.pantsPrice):0;return u+n}),k=B(()=>{const u=parseFloat(s.numberOfPayments),n=h.value;return u>0?(n/u).toFixed(2):0}),T=()=>{var a,r,l,d;const u=(r=(a=V.edit)==null?void 0:a.t_shirt)==null?void 0:r[0],n=(d=(l=V.edit)==null?void 0:l.pants)==null?void 0:d[0];P.value=!!u,y.value=!!n,s.tShirtsize=(u==null?void 0:u.size)||"",s.tShirtPcs=(u==null?void 0:u.pcs)||"",s.tShirtPrice=(u==null?void 0:u.price)||"",s.pantsSize=(n==null?void 0:n.size)||"",s.pantsPcs=(n==null?void 0:n.pcs)||"",s.pantsPrice=(n==null?void 0:n.price)||"",s.numberOfPayments=V.edit.number_of_payments||0,q.value=!0},i=()=>{P.value=!1,y.value=!1,s.tShirtsize="",s.tShirtPcs="",s.tShirtPrice="",s.pantsSize="",s.pantsPcs="",s.pantsPrice="",s.numberOfPayments="",s.remaining_payments=0},M=u=>{const n=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",a=u.firstname?n(u.firstname):"No Firstname",r=u.middlename?n(u.middlename).charAt(0)+".":"",l=u.lastname?n(u.lastname):"No Lastname";return`${a} ${r} ${l}`.trim()};D(()=>[s.numberOfPayments,h.value],([u,n])=>{const a=parseFloat(u),r=parseFloat(n);s.paymentPerPayroll=!isNaN(a)&&!isNaN(r)&&a>0?(r/a).toFixed(2):0});const z=async()=>{const u=isNaN(parseFloat(s.remaining_payments))?0:parseFloat(s.remaining_payments),n={...b,t_shirt:P.value?[{size:s.tShirtsize,pcs:s.tShirtPcs,price:s.tShirtPrice}]:[],pants:y.value?[{size:s.pantsSize,pcs:s.pantsPcs,price:s.pantsPrice}]:[],number_of_payments:s.numberOfPayments,total_amount:parseFloat(h.value),payments_per_payroll:parseFloat(k.value),remaining_payments:u};console.log("Updated uniform data:",n);try{v.value=!0,await S.updateUnifrom(n),U("edited"),ie.create({message:"Uniform changes saved successfully",color:"positive",position:"top",timeout:2e3}),q.value=!1,i()}catch(a){console.error("Error saving uniform changes:",a),ie.create({message:"Failed to save uniform changes",color:"negative",position:"top",timeout:2e3})}finally{v.value=!1}};return(u,n)=>(m(),f(G,null,[e(E,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:"",onClick:T},{default:t(()=>[e(xe,{class:"bg-positive",delay:200},{default:t(()=>[p("Edit")]),_:1})]),_:1}),e(ee,{modelValue:q.value,"onUpdate:modelValue":n[11]||(n[11]=a=>q.value=a),persistent:"",position:"right","backdrop-filter":"blur(6px) saturate(150%)"},{default:t(()=>[e(W,{style:{width:"600px","max-width":"90vw"}},{default:t(()=>[e(N,{class:"row items-center dialog-header text-white rounded-borders-top q-pa-md"},{default:t(()=>[Ge,e(me),de(e(E,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},null,512),[[ce]])]),_:1}),e(N,{class:"q-pb-lg q-px-lg"},{default:t(()=>[o("div",He,[o("div",We,[Ye,o("div",Ze,g(c.edit.employee?M(c.edit.employee):"----"),1)]),o("div",et,[tt,o("div",at,g(c.edit.employee.position?c.edit.employee.position:"-----"),1)])])]),_:1}),e(J,{inset:"",class:"q-mx-lg q-my-md"}),e(N,{class:"q-gutter-md row"},{default:t(()=>[o("div",lt,[o("div",st,[e(K,{"keep-color":"",modelValue:P.value,"onUpdate:modelValue":n[0]||(n[0]=a=>P.value=a),label:"T-Shirt",color:"deep-orange"},null,8,["modelValue"])]),P.value?(m(),f("div",ot,[o("div",nt,[e(j,{modelValue:s.tShirtsize,"onUpdate:modelValue":n[1]||(n[1]=a=>s.tShirtsize=a),options:[{label:"18",value:"18"},{label:"S",value:"S"},{label:"M",value:"M"},{label:"L",value:"L"}],color:"deep-orange",type:"radio",dense:""},null,8,["modelValue"])]),o("div",it,[e(x,{modelValue:s.tShirtPcs,"onUpdate:modelValue":n[2]||(n[2]=a=>s.tShirtPcs=a),label:"pcs",outlined:"",dense:"",style:{width:"100px"}},null,8,["modelValue"]),e(x,{modelValue:s.tShirtPrice,"onUpdate:modelValue":n[3]||(n[3]=a=>s.tShirtPrice=a),label:"price",outlined:"",dense:"",style:{width:"100px"}},null,8,["modelValue"])])])):F("",!0)]),o("div",dt,[o("div",rt,[e(K,{"keep-color":"",modelValue:y.value,"onUpdate:modelValue":n[4]||(n[4]=a=>y.value=a),label:"Pants",color:"brown-6"},null,8,["modelValue"])]),y.value?(m(),f("div",ut,[o("div",mt,[e(j,{modelValue:s.pantsSize,"onUpdate:modelValue":n[5]||(n[5]=a=>s.pantsSize=a),options:[{label:"M",value:"M"},{label:"L",value:"L"},{label:"XL",value:"XL"},{label:"XXL",value:"XXL"}],color:"brown",type:"radio",dense:""},null,8,["modelValue"])]),o("div",ct,[e(x,{modelValue:s.pantsPcs,"onUpdate:modelValue":n[6]||(n[6]=a=>s.pantsPcs=a),label:"pcs",outlined:"",dense:"",style:{width:"100px"}},null,8,["modelValue"]),e(x,{modelValue:s.pantsPrice,"onUpdate:modelValue":n[7]||(n[7]=a=>s.pantsPrice=a),label:"price",outlined:"",dense:"",style:{width:"100px"}},null,8,["modelValue"])])])):F("",!0)])]),_:1}),e(N,{class:"q-ma-lg"},{default:t(()=>[o("div",pt,[o("div",_t,[e(x,{modelValue:s.numberOfPayments,"onUpdate:modelValue":n[8]||(n[8]=a=>s.numberOfPayments=a),label:"Number of Payments",type:"number",outlined:"",dense:""},null,8,["modelValue"])]),o("div",ft,[e(x,{modelValue:h.value,"onUpdate:modelValue":n[9]||(n[9]=a=>h.value=a),label:"Total Amount",outlined:"",dense:"",readonly:""},null,8,["modelValue"])]),o("div",vt,[e(x,{modelValue:k.value,"onUpdate:modelValue":n[10]||(n[10]=a=>k.value=a),label:"Per Payroll",outlined:"",dense:"",readonly:""},null,8,["modelValue"])])])]),_:1}),e(Z,{align:"right"},{default:t(()=>[e(E,{size:"md",padding:"xs md","no-caps":"",label:"Save Edit","icon-right":"send",class:"gradient-btn text-white",onClick:z,loading:v.value},null,8,["loading"])]),_:1}),e(ue,{showing:v.value},{default:t(()=>[e(re,{size:"50px",color:"primary"})]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"])],64))}};var gt=se(yt,[["__scopeId","data-v-2d3cfa48"]]);const bt={class:"text-subtitle1 text-primary text-weight-bold"},ht={key:1,class:"q-pa-md q-mb-md rounded-borders bg-grey-2 shadow-2"},Pt={class:"text-subtitle1 text-primary text-weight-bold"},xt={__name:"ViewUniformDetails",props:{modelValue:Boolean,items:Array,label:String},emits:["update:modelValue"],setup(c,{emit:L}){const U=c,V=L,S=B({get:()=>U.modelValue,set:v=>V("update:modelValue",v)});function q(){V("update:modelValue",!1)}return(v,b)=>(m(),I(ee,{modelValue:S.value,"onUpdate:modelValue":b[0]||(b[0]=s=>S.value=s),"backdrop-filter":"blur(6px) saturate(150%)"},{default:t(()=>[e(W,{style:{"max-width":"400px",width:"90vw"},class:"bg-transparent no-shadow"},{default:t(()=>[e(Z,{align:"right",class:"q-pa-sm"},{default:t(()=>[e(E,{flat:"",rounded:"",dense:"",icon:"close",onClick:q,class:"text-white"})]),_:1}),e(N,{class:"q-pa-md"},{default:t(()=>[c.items.length>0?(m(!0),f(G,{key:0},Y(c.items,(s,P)=>(m(),f("div",{key:P,class:"q-pa-md q-mb-md rounded-borders bg-grey-2 shadow-2"},[o("div",bt,g(c.label),1),e(J,{spaced:"",color:"grey-4"}),e(A,{dense:""},{default:t(()=>[e(w,{avatar:""},{default:t(()=>[e(C,{name:"straighten",color:"blue-grey-7"})]),_:1}),e(w,null,{default:t(()=>[e($,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Size")]),_:1}),e($,{class:"text-weight-medium"},{default:t(()=>[p(g(s.size||"N/A"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(A,{dense:""},{default:t(()=>[e(w,{avatar:""},{default:t(()=>[e(C,{name:"inventory_2",color:"blue-grey-7"})]),_:1}),e(w,null,{default:t(()=>[e($,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Quantity")]),_:1}),e($,{class:"text-weight-medium"},{default:t(()=>[p(g(s.pcs||0)+" pcs",1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(A,{dense:""},{default:t(()=>[e(w,{avatar:""},{default:t(()=>[e(C,{name:"attach_money",color:"blue-grey-7"})]),_:1}),e(w,null,{default:t(()=>[e($,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Amount")]),_:1}),e($,{class:"text-weight-medium"},{default:t(()=>[p("\u20B1"+g(parseFloat(s.price).toFixed(2)||"0.00"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)):(m(),f("div",ht,[o("div",Pt,g(c.label),1),e(J,{spaced:"",color:"grey-4"}),e(A,{dense:""},{default:t(()=>[e(w,{avatar:""},{default:t(()=>[e(C,{name:"straighten",color:"blue-grey-7"})]),_:1}),e(w,null,{default:t(()=>[e($,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Size")]),_:1}),e($,{class:"text-weight-medium"},{default:t(()=>[p("N/A")]),_:1})]),_:1})]),_:1}),e(A,{dense:""},{default:t(()=>[e(w,{avatar:""},{default:t(()=>[e(C,{name:"inventory_2",color:"blue-grey-7"})]),_:1}),e(w,null,{default:t(()=>[e($,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Quantity")]),_:1}),e($,{class:"text-weight-medium"},{default:t(()=>[p("0 pcs")]),_:1})]),_:1})]),_:1}),e(A,{dense:""},{default:t(()=>[e(w,{avatar:""},{default:t(()=>[e(C,{name:"attach_money",color:"blue-grey-7"})]),_:1}),e(w,null,{default:t(()=>[e($,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Amount")]),_:1}),e($,{class:"text-weight-medium"},{default:t(()=>[p("\u20B10.00")]),_:1})]),_:1})]),_:1})]))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},X=c=>(te("data-v-0db94058"),c=c(),ae(),c),Vt={class:"row justify-between q-mb-md",align:"right"},wt={class:"row q-gutter-md"},St={key:0,class:"text-green-8 text-bold q-px-sm q-py-xs rounded-borders",style:{"background-color":"#e0ffe0",border:"1px solid #a0f0a0"}},qt={key:1},$t={key:0},Ut={class:"q-mb-sm q-pb-sm"},kt={class:"q-ml-sm"},zt={class:"q-my-none text-caption"},Qt=X(()=>o("span",{class:"text-bold"},"Size:",-1)),Nt={class:"q-my-none text-caption"},Lt=X(()=>o("span",{class:"text-bold"},"Qty:",-1)),Ct={class:"q-my-none text-caption"},Ft=X(()=>o("span",{class:"text-bold"},"Price:",-1)),At={key:1},Tt={key:0},It={class:"q-ml-sm"},Et={class:"q-my-none text-caption"},Ot=X(()=>o("span",{class:"text-bold"},"Size:",-1)),Xt={class:"q-my-none text-caption"},Mt=X(()=>o("span",{class:"text-bold"},"Qty:",-1)),Bt={class:"q-my-none text-caption"},Rt=X(()=>o("span",{class:"text-bold"},"Price:",-1)),Dt={key:1},Jt={__name:"UniformTable",setup(c){const L=le(),U=_(""),V=B(()=>L.uniforms),S=_([]),q=_(!1),v=_(!1),b=_({rowsPerPage:0,rowsPerPage:0,rowsNumber:0}),s=_(!1),P=_([]),y=_("");fe(async()=>{await h()});const h=async(a=1,r=7,l="")=>{try{q.value=!0,S.value=await L.fetchUniform(a,r,l),console.log("uniform",S.value);const{data:d,current_page:Q,per_page:O,total:pe}=V.value;b.value.page=Q,b.value.rowsPerPage=O,b.value.rowsNumber=pe,S.value=d,console.log("uniformss",S.value)}catch(d){console.log("error fetching madepakeer",d)}finally{q.value=!1}};let k;const T=()=>{v.value=!0,clearTimeout(k),k=setTimeout(()=>{v.value=!1},500)},i=a=>{h(a.pagination.page,a.pagination.rowsPerPage,a.filter)};D(U,async a=>{v.value=!0,await h(b.value.page,b.value.rowsPerPage,a),v.value=!1});const M=a=>{const r=O=>O?O.charAt(0).toUpperCase()+O.slice(1).toLowerCase():"",l=a.firstname?r(a.firstname):"No Firstname",d=a.middlename?r(a.middlename).charAt(0)+".":"",Q=a.lastname?r(a.lastname):"No Lastname";return`${l} ${d} ${Q}`.trim()},z=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(a),u=a=>{if(!a)return" - - ";const r=new Date(a);return isNaN(r.getTime())?" - - ":r.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},n=[{name:"date",required:!0,label:"Date",align:"left",field:a=>u(a.created_at)},{name:"name",required:!0,label:"Name",align:"left",field:a=>M(a.employee)},{name:"number_of_payments",required:!0,label:"Number of Payments",align:"center",field:"number_of_payments"},{name:"total_amount",required:!0,label:"Total Amount",align:"center",field:a=>z(a.total_amount)},{name:"payments_per_payroll",required:!0,label:"Payments Per Payroll",align:"center",field:a=>z(a.payments_per_payroll)},{name:"remaining_payments",required:!0,label:"Remaining Payments",align:"center",field:a=>a.remaining_payments==="0.00"?"Paid":z(a.remaining_payments)},{name:"t_shirt",label:"\u{1F455} T-Shirt",align:"center",field:"t_shirt"},{name:"pants",label:"\u{1F456} Pants",align:"center",field:"pants"},{name:"actions",label:"Actions",align:"center",field:"actions"}];return(a,r)=>(m(),I(be,{class:"q-my-md"},{default:t(()=>[o("div",Vt,[o("div",wt,[e(je,{onCreated:h})]),e(x,{modelValue:U.value,"onUpdate:modelValue":[r[0]||(r[0]=l=>U.value=l),T],outlined:"",dense:"",flat:"",label:"Search",style:{width:"300px"}},{append:t(()=>[o("div",null,[e(C,{name:"search"})])]),_:1},8,["modelValue"])]),e(ye,{filter:U.value,rows:S.value,columns:n,"row-key":"name",pagination:b.value,"onUpdate:pagination":r[1]||(r[1]=l=>b.value=l),"rows-per-page-options":[5,7,10,0],onRequest:i,loading:q.value},{header:t(l=>[e(ge,{props:l,class:"gradient-header text-white text-weight-bold"},{default:t(()=>[(m(!0),f(G,null,Y(l.cols,d=>(m(),I(ve,{key:d.name,props:l,class:"text-center text-subtitle2"},{default:t(()=>[p(g(d.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell-remaining_payments":t(l=>[e(R,{props:l},{default:t(()=>[l.row.remaining_payments==="0.00"?(m(),f("span",St," Paid ")):(m(),f("span",qt,g(z(l.row.remaining_payments)),1))]),_:2},1032,["props"])]),"body-cell-t_shirt":t(l=>[e(R,{props:l},{default:t(()=>[l.row.t_shirt[0]?(m(),f("div",$t,[o("div",Ut,[o("div",kt,[o("p",zt,[Qt,p(" "+g(l.row.t_shirt[0].size),1)]),o("p",Nt,[Lt,p(" "+g(l.row.t_shirt[0].pcs)+" pcs ",1)]),o("p",Ct,[Ft,p(" "+g(z(l.row.t_shirt[0].price)),1)])])])])):(m(),f("div",At,"\u{1F455} No Data"))]),_:2},1032,["props"])]),"body-cell-pants":t(l=>[e(R,{props:l},{default:t(()=>[l.row.pants[0]?(m(),f("div",Tt,[o("div",It,[o("p",Et,[Ot,p(" "+g(l.row.pants[0].size),1)]),o("p",Xt,[Mt,p(" "+g(l.row.pants[0].pcs)+" pcs ",1)]),o("p",Bt,[Rt,p(" "+g(z(l.row.pants[0].price)),1)])])])):(m(),f("div",Dt,"\u{1F456} No Data"))]),_:2},1032,["props"])]),"body-cell-actions":t(l=>[e(R,{props:l},{default:t(()=>[e(gt,{edit:l.row,onEdited:h},null,8,["edit"])]),_:2},1032,["props"])]),loading:t(()=>[e(ue,{showing:""},{default:t(()=>[e(re,{size:"50px",color:"grey-10"})]),_:1})]),_:1},8,["filter","rows","pagination","loading"]),e(xt,{modelValue:s.value,"onUpdate:modelValue":r[2]||(r[2]=l=>s.value=l),items:P.value,label:y.value},null,8,["modelValue","items","label"])]),_:1}))}};var ya=se(Jt,[["__scopeId","data-v-0db94058"]]);export{ya as default};
