import{g as ie,j as de,k as ue,r as _,t as L,z as H,o as v,e as S,w as o,f as e,I as k,J as n,bf as me,Z,a3 as C,L as g,be as B,K as w,Q as A,O as G,R as X,c as R,a0 as I,a4 as O,a5 as T,$ as D,M as N,ae as ee,a2 as se,aK as F,bd as ae,N as j,H as pe,a1 as K,aJ as ce}from"./index.536f313a.js";import{_ as M}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as te,a as E}from"./QStepper.10081666.js";import{C as le}from"./ClosePopup.a3901c5e.js";import{a as Y,b as _e}from"./QMenu.c2653d65.js";import{Q as ve}from"./QList.a496b4b0.js";import"./branch.c39f3118.js";import{u as fe}from"./employee.1db281c2.js";import{Q as oe}from"./QChip.9e14e026.js";import{u as J}from"./user.26c0e5e9.js";import{Q}from"./QSkeleton.4d75e5b9.js";import{Q as he}from"./QPopupEdit.a2a7e406.js";import{Q as ge}from"./QPage.7a541497.js";import{u as ye}from"./use-quasar.9daa0345.js";import"./QPopupProxy.212b74fe.js";import{Q as be}from"./QSpace.a55a2edd.js";import{Q as we}from"./QTooltip.8f443475.js";import{u as xe}from"./use-dialog-plugin-component.5f642282.js";import{t as re}from"./typography-format.51d7bebc.js";import{b as $e}from"./badge-color.f568cd69.js";import"./QTable.496c07ed.js";import"./QSlideTransition.44834521.js";import"./use-panel.8acbf807.js";import"./touch.9135741d.js";import"./selection.4d492b33.js";import"./use-render-cache.3aae9b27.js";import"./position-engine.4f956450.js";import"./warehouse.762e58d5.js";import"./axios.59b0a6e8.js";import"./date.2494dc19.js";import"./QVirtualScroll.9a977734.js";import"./use-virtual-scroll.0c92ff03.js";import"./rtl.276c3f1b.js";import"./QSelect.5b238b68.js";var ne=ie({name:"QStepperNavigation",setup(y,{slots:x}){return()=>de("div",{class:"q-stepper__nav"},ue(x.default))}});const Ve=y=>(G("data-v-94f93548"),y=y(),X(),y),Ue={class:"text-h6",align:"center"},qe={for:"fileInput"},Pe=["src"],Ce={key:0,class:"overlay"},ke=Ve(()=>n("div",null,"Profile",-1)),De={class:"q-gutter-y-sm"},Se="Profile Picture",Qe={__name:"UserStep1",props:["userData"],emits:["updateData"],setup(y){_("");const x=_(!0),i=_(!0),h=_(150),U=_(!1),d=_("https://cdn.quasar.dev/img/boy-avatar.png"),{userData:p}=y,r=L({email:"",password:"",confirmPass:""});H(()=>{Object.assign(r,p)});const $=()=>{d.value="https://cdn.quasar.dev/img/boy-avatar.png"},P=()=>{console.log("Edit image clicked")},V=l=>{const t=l.target.files[0];if(t){const s=new FileReader;s.onload=()=>{d.value=s.result},s.readAsDataURL(t)}};return(l,t)=>(v(),S(A,{flat:"",class:"q-pa-sm",style:{width:"500px","max-width":"80vw"}},{default:o(()=>[e(k,null,{default:o(()=>[n("div",Ue,[n("div",{class:"profile-picture",style:me({width:h.value+"px",height:h.value+"px"})},[n("label",qe,[e(Z,{size:"150px",color:"grey-2"},{default:o(()=>[n("img",{src:d.value,alt:Se,onError:$},null,40,Pe)]),_:1}),n("input",{type:"file",outlined:"",id:"fileInput",accept:"image/*",style:{display:"none"},onChange:V},null,32)]),U.value?(v(),C("div",Ce,[e(g,{name:"edit",onClick:P,class:"edit-icon"})])):B("",!0)],4),ke])]),_:1}),e(k,null,{default:o(()=>[n("div",De,[n("div",null,[e(w,{"onUpdate:modelValue":[t[0]||(t[0]=s=>l.$emit("updateData",r)),t[1]||(t[1]=s=>r.email=s)],modelValue:r.email,outlined:"",dense:"",placeholder:"email","lazy-rules":"",rules:[s=>s&&s.length>0||"Email required"],type:"email",suffix:"@gmail.com"},{prepend:o(()=>[e(g,{name:"mail"})]),_:1},8,["modelValue","rules"])]),n("div",null,[e(w,{modelValue:r.password,"onUpdate:modelValue":[t[3]||(t[3]=s=>r.password=s),t[4]||(t[4]=s=>l.$emit("updateData",r))],outlined:"",dense:"",placeholder:"Password",type:x.value?"password":"text","lazy-rules":"",rules:[s=>s&&s.length>0||"Password is required"]},{prepend:o(()=>[e(g,{name:"lock"})]),append:o(()=>[e(g,{name:x.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[2]||(t[2]=s=>x.value=!x.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"])]),n("div",null,[e(w,{modelValue:r.confirmPass,"onUpdate:modelValue":[t[6]||(t[6]=s=>r.confirmPass=s),t[7]||(t[7]=s=>l.$emit("updateData",r))],outlined:"",dense:"",type:i.value?"password":"text",placeholder:"Confirm password","lazy-rules":"",rules:[()=>r.password===r.confirmPass||"Passwords doesn't match"]},{prepend:o(()=>[e(g,{name:"lock"})]),append:o(()=>[e(g,{name:i.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[5]||(t[5]=s=>i.value=!i.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"])])])]),_:1})]),_:1}))}};var Ae=M(Qe,[["__scopeId","data-v-94f93548"]]);const Ne={class:"q-my-md"},Ie={key:0,class:"custom-list z-top"},ze={class:"q-gutter-y-sm"},Fe={class:"q-gutter-y-sm q-mx-auto"},Re={class:"row q-gutter-x-sm item-start"},Ee={class:"row q-gutter-x-md"},Be=n("div",null,"Designation",-1),Oe={class:"row q-gutter-x-md"},je={__name:"UserStep2",props:{userData:{type:Object,default:()=>({})}},emits:["updateData"],setup(y,{emit:x}){const i=x,{userData:h}=y,U=fe(),d=_(""),p=R(()=>U.employees),r=async()=>{d.value.trim()&&await U.searchEmployeesWithDesignation(d.value)},$=t=>{const s=m=>m?m.charAt(0).toUpperCase()+m.slice(1).toLowerCase():"",a=t.firstname?s(t.firstname):"No Firstname",u=t.middlename?s(t.middlename).charAt(0)+".":"",f=t.lastname?s(t.lastname):"No Lastname";return`${a} ${u} ${f}`},P=t=>{if(!t)return"Not Applicable";const[s,a]=t.split(":"),u=new Date;return u.setHours(s,a),u.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})},V=t=>{var s,a,u,f;l.employee_id=t.id||"Not Available",l.user_first_name=t.firstname||"",l.user_middle_name=t.middlename||"",l.user_last_name=t.lastname||"",l.user_address=t.address||"No Address",l.user_birthdate=t.birthdate||"Not Provided",l.user_sex=t.sex||"Unknown",l.user_phone_number=t.phone||"No Phone",l.user_position=t.position||"Not Assigned",l.user_branch_name=((a=(s=t.branch_employee)==null?void 0:s.branch)==null?void 0:a.name)||"Not Applicable",l.user_time_shift=(u=t.branch_employee)!=null&&u.time_shift?P((f=t.branch_employee)==null?void 0:f.time_shift):"Not Applicable",d.value="",i("updateData",l)},l=L({employee_id:"",user_first_name:"",user_middle_name:"",user_last_name:"",user_address:"",user_birthdate:"",user_sex:"",user_phone_number:"",user_position:"",user_branch_name:"",user_time_shift:""});return console.log("userPersonalInfoForm:",l),H(()=>{Object.assign(l,h)}),(t,s)=>(v(),S(A,{flat:"",style:{width:"500px","max-width":"80vw"}},{default:o(()=>[n("div",Ne,[e(w,{dense:"",rounded:"",outlined:"",placeholder:"Search employee",modelValue:d.value,"onUpdate:modelValue":[s[0]||(s[0]=a=>d.value=a),r],debounce:"500"},{append:o(()=>[e(g,{name:"search"})]),default:o(()=>[d.value?(v(),C("div",Ie,[e(A,null,{default:o(()=>[e(ve,{separator:""},{default:o(()=>{var a;return[(a=p.value)!=null&&a.length?(v(!0),C(O,{key:1},T(p.value,u=>(v(),S(Y,{onClick:f=>V(u),key:u.id,clickable:""},{default:o(()=>[e(_e,null,{default:o(()=>[I(D($(u)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(v(),S(Y,{key:0},{default:o(()=>[I(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):B("",!0)]),_:1},8,["modelValue"])]),e(k,null,{default:o(()=>[n("div",ze,[n("div",Fe,[e(w,{class:"text-capitalize",modelValue:l.user_first_name,"onUpdate:modelValue":[s[1]||(s[1]=a=>l.user_first_name=a),s[2]||(s[2]=a=>t.$emit("updateData",l))],outlined:"",dense:"",readonly:"",label:"First Name",rules:[a=>a&&a.length>0||"Required"]},null,8,["modelValue","rules"]),e(w,{class:"text-capitalize",modelValue:l.user_middle_name,"onUpdate:modelValue":[s[3]||(s[3]=a=>l.user_middle_name=a),s[4]||(s[4]=a=>t.$emit("updateData",l))],outlined:"",readonly:"",dense:"",label:"Middle Name",rules:[a=>a&&a.length>0||"Required"]},null,8,["modelValue","rules"]),e(w,{class:"text-capitalize",modelValue:l.user_last_name,"onUpdate:modelValue":[s[5]||(s[5]=a=>l.user_last_name=a),s[6]||(s[6]=a=>t.$emit("updateData",l))],outlined:"",dense:"",readonly:"",label:"Last Name",rules:[a=>a&&a.length>0||"Required"]},null,8,["modelValue","rules"]),e(w,{class:"text-capitalize",modelValue:l.user_address,"onUpdate:modelValue":[s[7]||(s[7]=a=>l.user_address=a),s[8]||(s[8]=a=>t.$emit("updateData",l))],outlined:"",dense:"",readonly:"",label:"Address",rules:[a=>a&&a.length>0||"Required"]},null,8,["modelValue","rules"])]),n("div",Re,[n("div",null,[e(w,{modelValue:l.user_birthdate,"onUpdate:modelValue":[s[9]||(s[9]=a=>l.user_birthdate=a),s[10]||(s[10]=a=>t.$emit("updateData",l))],outlined:"",dense:"",readonly:"",label:"Birthdate",type:"date",style:{width:"230px"},rules:[a=>a&&a.length>0||"Required"]},null,8,["modelValue","rules"])]),n("div",null,[e(w,{modelValue:l.user_sex,"onUpdate:modelValue":[s[11]||(s[11]=a=>l.user_sex=a),s[12]||(s[12]=a=>t.$emit("updateData",l))],dense:"",outlined:"",readonly:"",label:"Sex",options:t.genderOptions,rules:[a=>a&&a.length>0||"Required"],style:{width:"120px"},behavior:"menu","hide-dropdown-icon":""},null,8,["modelValue","options","rules"])])]),n("div",Ee,[n("div",null,[e(w,{modelValue:l.user_phone_number,"onUpdate:modelValue":[s[13]||(s[13]=a=>l.user_phone_number=a),s[14]||(s[14]=a=>t.$emit("updateData",l))],outlined:"",dense:"",readonly:"",label:"Phone Number",mask:"+(63) ### - ### - ####",placeholder:"(+63) ### - ### - ####",rules:[a=>a&&a.length>0||"Required"],style:{width:"300px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","rules"])]),n("div",null,[e(w,{modelValue:l.user_position,"onUpdate:modelValue":[s[15]||(s[15]=a=>l.user_position=a),s[16]||(s[16]=a=>t.$emit("updateData",l))],outlined:"",dense:"",readonly:"","hide-dropdown-icon":"",label:"Position",options:t.positionOptions,rules:[a=>a&&a.length>0||"Required"],style:{width:"150px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","options","rules"])])]),Be,n("div",Oe,[n("div",null,[e(w,{modelValue:l.user_branch_name,"onUpdate:modelValue":[s[17]||(s[17]=a=>l.user_branch_name=a),s[18]||(s[18]=a=>t.$emit("updateData",l))],outlined:"",flat:"",readonly:"",dense:"","use-input":"",clearable:"","input-debounce":"0",options:t.filterBranchOptions,label:"Branch",onFilter:t.filteredBranches,style:{width:"250px","max-width":"500px","min-width":"100px"},"hide-dropdown-icon":"",behavior:"menu"},null,8,["modelValue","options","onFilter"])]),n("div",null,[e(w,{outlined:"",modelValue:l.user_time_shift,"onUpdate:modelValue":[s[19]||(s[19]=a=>l.user_time_shift=a),s[20]||(s[20]=a=>t.$emit("updateData",l))],flat:"",dense:"",readonly:"",mask:"##:## AA",label:"Time Schedule",rules:t.valididateTime,hint:"Format: 01:00 AM/PM",style:{width:"200px","max-width":"500px","min-width":"100px"},"hide-dropdown-icon":""},null,8,["modelValue","rules"])])])])]),_:1})]),_:1}))}},Le=n("div",{class:"text-h6"},"User Profile",-1),Te={class:"col-6"},Me={class:"col-6"},Ke={class:"q-pa-sm"},He={__name:"UserStepFinish",props:["userData"],emits:["save"],setup(y,{emit:x}){const{userData:i}=y;console.log("user data",i);function h(d){return d.split(/[\s,]+/).map(p=>p.split(/([.-]+)/).map($=>$.charAt(0).toUpperCase()+$.slice(1).toLowerCase()).join("")).join(" ")}const U=R(()=>[{label:"Username:",value:`${i.email}@gmail.com`},{label:"Full Name:",value:`${i.user_first_name.charAt(0).toUpperCase()}${i.user_first_name.slice(1)} ${i.user_middle_name.charAt(0).toUpperCase()}${i.user_middle_name.slice(1)} ${i.user_last_name.charAt(0).toUpperCase()}${i.user_last_name.slice(1)}`},{label:"Address:",value:h(i.user_address)},{label:"Birthdate:",value:i.user_birthdate.charAt(0).toUpperCase()+i.user_birthdate.slice(1)},{label:"Sex:",value:i.user_sex.charAt(0).toUpperCase()+i.user_sex.slice(1)},{label:"Position:",value:`${i.user_position.charAt(0).toUpperCase()+i.user_position.slice(1)}`},{label:"Phone Number:",value:i.user_phone_number.charAt(0).toUpperCase()+i.user_phone_number.slice(1)},{label:"Position:",value:i.user_position.charAt(0).toUpperCase()+i.user_position.slice(1)},{label:"Designation:",value:i.user_position||""},{label:"Branch:",value:i.user_branch_name||""},{label:"Time Shift:",value:i.user_time_shift||""}]);return(d,p)=>(v(),S(A,{flat:""},{default:o(()=>[e(k,null,{default:o(()=>[Le]),_:1}),e(k,null,{default:o(()=>[(v(!0),C(O,null,T(U.value,(r,$)=>(v(),C("div",{key:$,class:"row"},[n("div",Te,[e(oe,{square:"",color:"grey-1"},{default:o(()=>[I(D(r.label),1)]),_:2},1024)]),n("div",Me,[n("div",Ke,D(r.value),1)])]))),128))]),_:1})]),_:1}))}};const Je={class:"q-ma-xm",align:"right"},We={__name:"UsersCreate",setup(y){const x=R(()=>i.users),i=J(),h=_(1),U=_(!0);_(!1);const d=_(!1),p=L({email:"",password:"",confirmPass:""}),r=L({employee_id:"",user_first_name:"",user_middle_name:"",user_last_name:"",user_address:"",user_birthdate:"",user_sex:"",user_phone_number:"",user_position:"",user_branch_name:"",user_time_shift:""}),$=u=>{Object.assign(p,u),U.value=!(p.password&&p.confirmPass&&p.password===p.confirmPass)},P=u=>{console.log("setsuer data",u),Object.assign(r,u),U.value=!(r.employee_id&&r.user_first_name&&r.user_last_name&&r.user_address&&r.user_birthdate&&r.user_sex&&r.user_phone_number&&r.user_position&&r.user_branch_name)},V=R(()=>({...p,...r})),l=()=>{d.value=!0},t=()=>{h.value===3?a():h.value++},s=()=>{p.email="",p.password="",p.confirmPass="",r.employee_id="",r.user_first_name="",r.user_middle_name="",r.user_last_name="",r.user_address="",r.user_birthdate="",r.user_sex="",r.user_phone_number="",r.user_position="",r.user_branch_name="",r.user_time_shift="",h.value=1,U.value=!0},a=async()=>{try{const u={employee_id:r.employee_id,email:`${p.email}@gmail.com`,password:p.password,role:r.user_position};console.log("userdata to send:",u),await i.registerUser(u),d.value=!1,s(),x.value=await i.fetchUsers()}catch{}};return(u,f)=>(v(),C(O,null,[n("div",null,[e(N,{class:"text-dark q-pa-sm",outline:"",icon:"add_circle",label:"Add User",onClick:l})]),e(se,{modelValue:d.value,"onUpdate:modelValue":f[2]||(f[2]=m=>d.value=m),persistent:"","full-height":""},{default:o(()=>[e(A,null,{default:o(()=>[n("div",Je,[ee(e(N,{class:"q-ma-sm",icon:"close",flat:"",dense:"",round:""},null,512),[[le]])]),n("div",null,[e(te,{class:"",modelValue:h.value,"onUpdate:modelValue":f[1]||(f[1]=m=>h.value=m),ref:"stepper",animated:"","done-color":"green","active-color":"blue","inactive-color":"grey",flat:"",align:"center"},{navigation:o(()=>[e(ne,{class:"q-ma-none"},{default:o(()=>[n("div",null,[h.value>1?(v(),S(N,{key:0,flat:"",color:"primary",onClick:f[0]||(f[0]=m=>u.$refs.stepper.previous()),label:"Back",class:"q-ml-sm"})):B("",!0),e(N,{disable:U.value,onClick:t,color:"primary",label:h.value===3?"Save":"Continue"},null,8,["disable","label"])])]),_:1})]),default:o(()=>[e(E,{name:1,title:"Sign Up",icon:"settings",done:h.value>1},{default:o(()=>[e(Ae,{onUpdateData:$,userData:p},null,8,["userData"])]),_:1},8,["done"]),e(E,{name:2,title:"Personal Info",icon:"settings",done:h.value>2},{default:o(()=>[e(je,{onUpdateData:P,userData:r},null,8,["userData"])]),_:1},8,["done"]),e(E,{name:3,title:"Checked Personal Info",icon:"settings",done:h.value>3},{default:o(()=>[e(He,{userData:V.value,onSave:a},null,8,["userData"])]),_:1},8,["done"])]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["modelValue"])],64))}};var Ye=M(We,[["__scopeId","data-v-e1cd34c0"]]);const Ze={class:"text-bold"},Ge={key:0,class:"text-negative text-caption q-mt-xs"},Xe={__name:"ChangingPassword",props:{user:Object},setup(y){const{formatFullname:x}=re(),i=J(),h=y,{dialogRef:U}=xe(),d=_(1),p=_(""),r=_(0),$=_(""),P=_(""),V=_(""),l=_(!1),t=_(!1),s=_(!1),a=R(()=>d.value===1?$.value.length===0:d.value===2?P.value.length<6||P.value!==V.value:!1),u=()=>{a.value||f()},f=async()=>{var q,c;if(d.value===1){if(p.value="",!await i.verifyUserPassword(((c=(q=i.userData)==null?void 0:q.data)==null?void 0:c.id)||0,$.value)){r.value++,r.value===1?p.value="Invalid admin password!":r.value===2?p.value="Still incorrect. Make sure you're the admin.":r.value===3?p.value="Pag sure uy!":r.value>=4&&(p.value="Too many failed attempts! Please try again later.");return}d.value=2;return}d.value===2&&m()},m=async()=>{var q,c;try{const b={user_id:h.user.id,new_password:P.value,new_password_confirmation:V.value},z=await i.updatePassword(b);console.log("response from database about password change:",z),z!=null&&z.success?(j.create({type:"positive",message:z.message||"Password updated successfully."}),U.value.hide()):j.create({type:"negative",message:z.message||"Failed to update password."})}catch(b){j.create({type:"negative",message:((c=(q=b.response)==null?void 0:q.data)==null?void 0:c.message)||"Server error occurred."})}};return(q,c)=>(v(),S(se,{ref_key:"dialogRef",ref:U},{default:o(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:o(()=>[e(k,{class:"row items-center"},{default:o(()=>[n("div",null,[I(" Changing "),n("span",Ze,D(F(x)(y.user)),1),I(" Password ")]),e(be),ee((v(),S(N,{icon:"close",flat:"",dense:"",round:""},{default:o(()=>[e(we,{class:"bg-blue-grey-6",delay:200},{default:o(()=>[I("Close")]),_:1})]),_:1})),[[le]])]),_:1}),e(k,null,{default:o(()=>[e(te,{modelValue:d.value,"onUpdate:modelValue":c[7]||(c[7]=b=>d.value=b),ref:"stepper",animated:"",flat:"",dense:"",color:"primary","done-color":"green","active-color":"blue","inactive-color":"grey",onKeyup:ae(u,["enter"])},{navigation:o(()=>[e(ne,{class:"q-ma-none"},{default:o(()=>[n("div",null,[d.value>1?(v(),S(N,{key:0,flat:"",color:"primary",onClick:c[6]||(c[6]=b=>q.$refs.stepper.previous()),label:"Back",class:"q-mr-sm"})):B("",!0),e(N,{color:"primary",disable:a.value,onClick:f,label:d.value===2?"Save":"Continue"},null,8,["disable","label"])])]),_:1})]),default:o(()=>[e(E,{name:1,title:"Verify Admin Password",icon:"password"},{default:o(()=>[e(w,{modelValue:$.value,"onUpdate:modelValue":c[1]||(c[1]=b=>$.value=b),outlined:"",placeholder:"Admin Password",type:l.value?"text":"password",class:"q-mb-md"},{prepend:o(()=>[e(g,{name:"lock"})]),append:o(()=>[e(g,{name:l.value?"visibility":"visibility_off",class:"cursor-pointer",onClick:c[0]||(c[0]=b=>l.value=!l.value)},null,8,["name"])]),_:1},8,["modelValue","type"]),p.value?(v(),C("div",Ge,D(p.value),1)):B("",!0)]),_:1}),e(E,{name:2,title:"Set New Employee Password",icon:"key"},{default:o(()=>[e(w,{modelValue:P.value,"onUpdate:modelValue":c[3]||(c[3]=b=>P.value=b),outlined:"",placeholder:"New Password",type:t.value?"text":"password","lazy-rules":"",rules:[b=>b&&b.length>=6||"Min 6 characters"],class:"q-mb-md"},{prepend:o(()=>[e(g,{name:"lock"})]),append:o(()=>[e(g,{name:t.value?"visibility":"visibility_off",class:"cursor-pointer",onClick:c[2]||(c[2]=b=>t.value=!t.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),e(w,{modelValue:V.value,"onUpdate:modelValue":c[5]||(c[5]=b=>V.value=b),outlined:"",placeholder:"Confirm Password",type:s.value?"text":"password","lazy-rules":"",rules:[()=>P.value===V.value||"Passwords don't match"],class:"q-mb-md"},{prepend:o(()=>[e(g,{name:"lock"})]),append:o(()=>[e(g,{name:s.value?"visibility":"visibility_off",class:"cursor-pointer",onClick:c[4]||(c[4]=b=>s.value=!s.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},512))}};const W=y=>(G("data-v-87e97566"),y=y(),X(),y),es={class:"q-pa-md elegant-container"},ss={key:0,class:"skeleton-wrapper row q-col-gutter-md"},as={key:1,class:"data-error"},ts=W(()=>n("div",null,"No data available",-1)),ls={key:2,class:"q-pa-md row q-col-gutter-md"},os=W(()=>n("img",{src:"https://cdn.quasar.dev/img/mountains.jpg"},null,-1)),rs={class:"q-mt-lg"},ns={class:"text-h6 text-weight-medium elegant-name text-capitalize"},is={class:"q-mb-sm elegant-detail"},ds={class:"email-display"},us={class:"email-text"},ms={class:"q-mb-sm elegant-detail"},ps={class:"email-display"},cs=W(()=>n("span",null,"********",-1)),_s={class:"q-mb-sm elegant-detail"},vs={class:"q-mb-sm elegant-detail"},fs={class:"q-mb-sm elegant-detail text-capitalize"},hs={__name:"UsersCard",setup(y){const{capitalizeFirstLetter:x,formatFullname:i,formatDate:h}=re(),{getUserBadgePositionColor:U}=$e(),d=J();pe(),_(null);const p=ye(),r=R(()=>d.users);console.log("userdatasssss  ",r.value),H(async()=>{await $()});const $=async()=>{try{V.value=!0,r.value=await d.fetchUsers(),r.value.length||(l.value=!0),console.log("Users",r.value)}catch(u){console.log("error fetching recipe: ",u),l.value=!0}finally{V.value=!1}},P=u=>{p.dialog({component:Xe,componentProps:{user:u}}).onOk(f=>{console.log("Password changed data:",f)})},V=_(!0),l=_(!1),t=_(""),s=async()=>{V.value=!0,l.value=!1,await d.searchUser(t.value),V.value=!1},a=async(u,f)=>{try{const m=u.id;r.value.email=f,await d.updateEmail(m,f),j.create({type:"positive",message:"yeah"})}catch(m){console.log("===================================="),console.log("ERRRR",m),console.log("====================================")}};return(u,f)=>(v(),S(ge,null,{default:o(()=>[n("div",es,[n("div",null,[e(w,{class:"q-pb-lg",modelValue:t.value,"onUpdate:modelValue":[f[0]||(f[0]=m=>t.value=m),s],outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:"",style:{width:"100%","max-width":"600px"}},{append:o(()=>[e(g,{name:"search"})]),_:1},8,["modelValue"])]),V.value?(v(),C("div",ss,[(v(),C(O,null,T(8,m=>n("div",{class:"col-xs-12 col-sm-6 col-md-4 col-lg-3",key:m},[e(A,{class:"user-card skeleton-card"},{default:o(()=>[e(Q,{height:"200px",class:"q-mb-md"}),e(k,{class:"text-center"},{default:o(()=>[e(Q,{type:"circle",size:"80px",class:"q-mb-md"}),e(Q,{type:"text",width:"60%",class:"q-mt-lg"}),e(Q,{type:"text",width:"40%",class:"q-mt-sm"})]),_:1}),e(K),e(k,null,{default:o(()=>[e(Q,{type:"text",width:"80%",class:"q-mb-sm"}),e(Q,{type:"text",width:"60%",class:"q-mb-sm"}),e(Q,{type:"text",width:"70%",class:"q-mb-sm"}),e(Q,{type:"text",width:"50%",class:"q-mb-sm"}),e(Q,{type:"text",width:"90%",class:"q-mt-md"})]),_:1}),e(K),e(ce,{class:"q-pa-md text-center"},{default:o(()=>[e(Q,{type:"rect",width:"40%",height:"36px"})]),_:1})]),_:1})])),64))])):l.value?(v(),C("div",as,[e(g,{name:"error",size:"50px",color:"negative"}),ts])):(v(),C("div",ls,[(v(!0),C(O,null,T(r.value,m=>(v(),C("div",{key:m.id,class:"col-xs-12 col-sm-6 col-md-4 col-lg-3"},[e(A,{class:"user-card"},{default:o(()=>[os,e(k,{class:"text-center"},{default:o(()=>[n("div",null,[e(Z,{icon:"person",size:"80px",color:"primary","text-color":"white",class:"q-mb-md absolute",style:{top:"0",left:"12px",transform:"translateY(-50%)"}})]),n("div",rs,[n("div",ns,D(F(i)(m)),1),e(oe,{color:F(U)(m.role),"text-color":"white",class:"q-mt-sm elegant-chip"},{default:o(()=>[I(D(F(x)(m.role||"")),1)]),_:2},1032,["color"])])]),_:2},1024),e(K,{class:"separator q-mx-md"}),e(k,null,{default:o(()=>[n("div",is,[e(g,{name:"mail",class:"q-mr-sm"}),e(he,{"onUpdate:modelValue":[q=>a(m,q),q=>m.email=q],modelValue:m.email,title:"Edit Email",persistent:"","auto-save":"",buttons:"","label-set":"Save","label-cancel":"Close",fit:"","transition-show":"scale","transition-hide":"scale"},{default:o(q=>[e(w,{modelValue:q.value,"onUpdate:modelValue":c=>q.value=c,dense:"",type:"email",rules:[u.emailRule],placeholder:"Email",class:"popup-input",filled:"",borderless:"",onKeyup:ae(q.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","rules","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"]),n("div",ds,[n("span",us,D(m.email),1),e(g,{name:"edit",size:"sm",class:"edit-icon text-light-green-13"})])]),n("div",ms,[e(g,{name:"lock",class:"q-mr-sm"}),n("div",ps,[cs,e(N,{flat:"",dense:"",size:"sm",color:"primary",label:"change",class:"q-mt-sm",onClick:q=>P(m)},null,8,["onClick"])])]),n("div",_s,[e(g,{name:"calendar_today",class:"q-mr-sm"}),n("span",null,D(F(h)(m.birthdate||"-")),1)]),n("div",vs,[e(g,{name:"smartphone",class:"q-mr-sm"}),n("span",null,D(m.phone||"-"),1)]),n("div",fs,[e(g,{name:"location_on",class:"q-mr-sm"}),n("span",null,D(F(x)(m.address||"-")),1)])]),_:2},1024)]),_:2},1024)]))),128))]))])]),_:1}))}};var gs=M(hs,[["__scopeId","data-v-87e97566"]]);const ys={align:"right"},bs={__name:"UsersPage",setup(y){return(x,i)=>(v(),S(A,{class:"elegant-container",flat:""},{default:o(()=>[e(k,null,{default:o(()=>[n("div",ys,[e(Ye)])]),_:1}),e(k,null,{default:o(()=>[e(gs)]),_:1})]),_:1}))}};var sa=M(bs,[["__scopeId","data-v-c3cb77fa"]]);export{sa as default};
