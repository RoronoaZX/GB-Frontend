import{c as j,r as V,o as i,a3 as C,f as e,w as t,Q as B,I,J as a,$ as l,aK as n,M as U,a0 as o,a2 as te,K as xe,aJ as we,ae as ve,a4 as L,N as re,O as A,R as E,z as ce,L as ae,e as z,a5 as K,a1 as se,be as pe}from"./index.ca72f247.js";import{Q as le}from"./QTab.9bf6243c.js";import{Q as Te}from"./QTabs.35fdbdf7.js";import{Q as oe}from"./QTabPanel.eb75678f.js";import{Q as Ne}from"./QTabPanels.c204656b.js";import{Q as de}from"./QSpinnerDots.f3b67178.js";import{Q as Y}from"./QBadge.2dc625c4.js";import{Q as _e}from"./QScrollArea.936ac575.js";import{u as J}from"./warehouse.89a20565.js";import{u as ne}from"./premix.947cc303.js";import{u as ue}from"./use-quasar.f96041ec.js";import{t as W}from"./typography-format.6bffeec7.js";import{a as u}from"./QSelect.a1c4ed00.js";import{a as F,b as _}from"./QMenu.a8d5f7aa.js";import{Q as G}from"./QList.7330d34c.js";import{C as fe}from"./ClosePopup.77864f63.js";import{u as ie}from"./use-dialog-plugin-component.48c22021.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as Qe}from"./QPagination.b4c646c0.js";import{Q as je,a as Ze}from"./QTable.6ef48ae6.js";import{q as ze}from"./date.7612c2b8.js";import{u as $e}from"./stock-delivery.3972e1cd.js";import{u as et}from"./user.54b07de1.js";import"./QResizeObserver.f1935b07.js";import"./rtl.276c3f1b.js";import"./use-panel.54489bd1.js";import"./touch.9135741d.js";import"./selection.66bddd9a.js";import"./use-render-cache.3aae9b27.js";import"./QScrollObserver.64426a74.js";import"./TouchPan.dc58667a.js";import"./axios.0019c736.js";import"./QChip.ead5e565.js";import"./use-virtual-scroll.645c1690.js";import"./position-engine.a63ef796.js";import"./QVirtualScroll.eb023b79.js";const Ue=s=>(A("data-v-e718d594"),s=s(),E(),s),tt={class:"row justify-between"},at={class:"text-h6"},st=Ue(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),lt=Ue(()=>a("div",{class:"text-h6"},"Decline Report",-1)),ot={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){const{capitalizeFirstLetter:c,formatFullname:R,formatRequestQuantity:N}=W(),{dialogRef:D,onDialogHide:$}=ie(),y=J(),P=j(()=>y.user);console.log("userdata",P.value);const q=P.value.data.employee_id,S=ne(),f=s;console.log("report",f.report);const b=V(!1),k=V(""),m=V(!1),w=()=>{m.value=!0},h=async()=>{try{const r={id:f.report.id,request_premixes_id:f.report.id,branch_premix_id:f.report.branch_premix_id,employee_id:q,status:f.report.status,quantity:f.report.quantity,warehouse_id:f.report.warehouse_id,notes:"Confirmed Premix"},x=await S.confirmPremix(r);console.log("Report confirmedss:",x),re.create({type:"positive",message:"Report confirmed successfully"}),b.value=!1}catch(r){console.error(r)}},Q=async()=>{const r={id:f.report.id,request_premixes_id:f.report.id,branch_premix_id:f.report.branch_premix_id,employee_id:q,status:"decline",quantity:f.report.quantity,warehouse_id:f.report.warehouse_id,notes:k.value};await S.declinePremix(r),m.value=!1};return(r,x)=>(i(),C(L,null,[e(te,{ref_key:"dialogRef",ref:D,modelValue:b.value,"onUpdate:modelValue":x[1]||(x[1]=g=>b.value=g),onHide:n($)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(I,{class:"emphasized-header"},{default:t(()=>[a("div",tt,[a("div",at,l(n(c)(s.report.name)||"-"),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:x[0]||(x[0]=g=>b.value=!1)})])]),_:1}),e(I,null,{default:t(()=>{var g,v,d;return[a("div",null,"Baker: "+l(n(R)(s.report.employee)||"-"),1),a("div",null," Branch: "+l(n(c)((d=(v=(g=s.report.branch_premix)==null?void 0:g.branch_recipe)==null?void 0:v.branch)==null?void 0:d.name)||"-"),1),a("div",null,[o(" Status: "),e(Y,{color:"warning",outlined:""},{default:t(()=>[o(l(n(c)(s.report.status)||"No Status"),1)]),_:1})])]}),_:1}),e(I,null,{default:t(()=>[st]),_:1}),e(I,null,{default:t(()=>[e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Premix Name")]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-h6"},{default:t(()=>[o(l(n(c)(s.report.name)||"-"),1)]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-h6"},{default:t(()=>[o(l(n(N)(s.report.quantity)||"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(I,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(U,{color:"negative",label:"Decline",class:"action-btn",onClick:w}),e(U,{color:"positive",label:"Confirm",class:"action-btn",onClick:h})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]),e(te,{modelValue:m.value,"onUpdate:modelValue":x[3]||(x[3]=g=>m.value=g)},{default:t(()=>[e(B,null,{default:t(()=>[e(I,null,{default:t(()=>[lt]),_:1}),e(I,null,{default:t(()=>[e(xe,{modelValue:k.value,"onUpdate:modelValue":x[2]||(x[2]=g=>k.value=g),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[g=>!!g||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(we,{align:"right"},{default:t(()=>[ve(e(U,{flat:"",label:"Cancel",color:"primary"},null,512),[[fe]]),e(U,{flat:"",label:"Confirm",color:"negative",onClick:Q})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var nt=O(ot,[["__scopeId","data-v-e718d594"]]);const Fe=s=>(A("data-v-27d0c077"),s=s(),E(),s),rt={key:0,class:"spinner-wrapper"},it={key:1,class:"q-mt-xl"},ct={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},dt=Fe(()=>a("div",{class:"text-h6 text-grey-7 q-mt-sm"},l("No Premixes available."),-1)),ut=Fe(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},l("Check again later."),-1)),_t={class:"q-gutter-md q-ma-md"},mt={class:"row items-start justify-between"},pt={class:"col-8 column q-gutter-y-xs"},vt={class:"text-body1 text-weight-bold text-primary-dark"},ft={class:"text-caption text-grey-6 text-weight-meduim"},gt={class:"col-4 column items-end q-gutter-y-xs"},yt={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},ht={class:"row justify-between items-end"},xt={class:"column q-gutter-y-xs"},bt=Fe(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),wt={class:"text-body2 text-weight-semibold text-grey-9"},$t={__name:"PendingPage",setup(s){const{capitalizeFirstLetter:c,formatFullname:R,formatTimestamp:N}=W(),D=J(),$=j(()=>D.user);console.log("userdata",$.value);const y=ne(),P=j(()=>y.pendingPremixData),q=$.value.device.reference_id;console.log("warehouseId",q);const S=V("pending"),f=V(!0),b=V(!1),k=ue();ce(async()=>{q&&await m()});const m=async()=>{try{f.value=!0,await y.fetchPendingPremix(q,S.value),P.value.length||(b.value=!0)}catch{b.value=!0}finally{f.value=!1}},w=h=>{k.dialog({component:nt,componentProps:{report:h}})};return(h,Q)=>f.value?(i(),C("div",rt,[e(de,{size:"50px",color:"primary"})])):(i(),C("div",it,[P.value.length===0?(i(),C("div",ct,[e(ae,{name:"search_off",size:"60px",color:"grey-6"}),dt,ut])):(i(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",_t,[(i(!0),C(L,null,K(P.value,(r,x)=>(i(),z(B,{key:x,onClick:g=>w(r),class:"pending-card elegant-card emphasized-card"},{default:t(()=>[e(I,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var g,v;return[a("div",mt,[a("div",pt,[a("div",vt," Premix: "+l(n(c)(r.name)||"-"),1),a("div",ft,l(n(N)(r.created_at)||"-"),1)]),a("div",gt,[a("div",null,[e(Y,{color:"warning",class:"text-weight-bold q-px-md q-py-sm pending-badge"},{default:t(()=>[o(" PENDING ")]),_:1})]),a("div",yt,l(((v=(g=r.branch_premix)==null?void 0:g.branch_recipe)==null?void 0:v.branch.name)||"-"),1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",ht,[a("div",xt,[bt,a("div",wt,l(n(R)(r.employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var qt=O($t,[["__scopeId","data-v-27d0c077"]]);const Be=s=>(A("data-v-74781296"),s=s(),E(),s),kt={class:"row justify-between"},Dt={class:"text-h6"},Pt=Be(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),Ct=Be(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),St={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var r,x,g;const{capitalizeFirstLetter:c,formatFullname:R,formatQuantity:N,formatRequestQuantity:D}=W(),{dialogRef:$,onDialogHide:y,onDialogOK:P,onDialogCancel:q}=ie(),S=V(!1),f=J(),b=j(()=>f.user);console.log("userdata",b.value);const k=b.value.data.employee_id,m=ne(),w=s,h=((g=(x=(r=w.report)==null?void 0:r.branch_premix)==null?void 0:x.branch_recipe)==null?void 0:g.ingredient_groups)||"Undefined";console.log("ingrdientsData",h),console.log("report to proceed",w.report);const Q=async()=>{try{const v={id:w.report.id,request_premixes_id:w.report.id,branch_premix_id:w.report.branch_premix_id,employee_id:k,status:"process",quantity:w.report.quantity,warehouse_id:w.report.warehouse_id,notes:"Process Premix"},d=await m.processPremix(v);console.log("Report Process:",d),re.create({type:"positive",message:"Premix proceed to process successfully"}),S.value=!1}catch(v){console.error(v)}};return(v,d)=>(i(),z(te,{ref_key:"dialogRef",ref:$,modelValue:S.value,"onUpdate:modelValue":d[1]||(d[1]=p=>S.value=p),onHide:n(y)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(I,{class:"emphasized-header"},{default:t(()=>[a("div",kt,[a("div",Dt,l(n(c)(s.report.name)||"-"),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=p=>S.value=!1)})])]),_:1}),e(I,null,{default:t(()=>{var p,T,H;return[a("div",null,"Baker: "+l(n(R)(s.report.employee)||"-"),1),a("div",null," Branch: "+l(n(c)((H=(T=(p=s.report.branch_premix)==null?void 0:p.branch_recipe)==null?void 0:T.branch)==null?void 0:H.name)||"-"),1),a("div",null,[o(" Status: "),e(Y,{color:"green",outlined:""},{default:t(()=>[o(l(n(c)(s.report.status)||"-"),1)]),_:1})])]}),_:1}),e(I,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[Pt,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Premix Name")]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-h6"},{default:t(()=>[o(l(n(c)(s.report.name)||"-"),1)]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-h6"},{default:t(()=>[o(l(n(D)(s.report.quantity)||"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[Ct,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o(" Code")]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o(" Name")]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Quantity")]),_:1})]),_:1})]),_:1}),(i(!0),C(L,null,K(n(h),(p,T)=>(i(),z(F,{key:T},{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-subtitle1"},{default:t(()=>[o(l(p.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(_,null,{default:t(()=>[e(u,{class:"text-subtitle1",align:"left"},{default:t(()=>[o(l(p.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(_,{side:""},{default:t(()=>[e(u,{class:"text-subtitle1"},{default:t(()=>[o(l(n(N)(p.quantity*s.report.quantity,p.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(I,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ve(e(U,{flat:"",label:"Cancel",color:"negative"},null,512),[[fe]]),e(U,{color:"primary",label:"Process",class:"action-btn",onClick:Q})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var Rt=O(St,[["__scopeId","data-v-74781296"]]);const qe=s=>(A("data-v-5fc65b42"),s=s(),E(),s),Vt={key:0,class:"spinner-wrapper"},It={key:1,class:"q-mt-xl"},Tt={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},Nt=qe(()=>a("div",{class:"text-h6 text-grey-7 q-mt-sm"},l("No Premixes available."),-1)),Qt=qe(()=>a("div",{class:"text-body1 text-grey-7 q-mt-sm"},l("Check again later."),-1)),zt={class:"q-gutter-md q-ma-md"},Ft={class:"row items-start justify-between"},jt={class:"col-8 column q-gutter-y-xs"},Ut={class:"text-body1 text-weight-bold text-primary-dark"},Bt={class:"text-caption text-grey-6 text-weight-medium"},Ht={class:"col-4 column items-end q-gutter-y-xs"},Lt={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm text-capitalize"},Ot={class:"row justify-between items-end"},Mt={class:"column q-gutter-y-xs"},At=qe(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),Et={class:"text-body2 text-weight-semibold text-grey-9"},Yt={class:"col-5 column"},Kt=qe(()=>a("div",{class:"text-caption text-grey-7"},"Confirmed by:",-1)),Wt={class:"text-body2 text-weight-semibold text-grey-9"},Gt={__name:"ConfirmPage",setup(s){const{capitalizeFirstLetter:c,formatFullname:R,formatTimestamp:N}=W(),D=J(),y=j(()=>D.user).value.device.reference_id;console.log("warehouseId",y);const P=ne(),q=j(()=>P.confirmPremixData);console.log("confirmedPremixData",q.value);const S=V("confirmed"),f=V(!0),b=V(!1),k=ue();ce(async()=>{y&&await m()});const m=async()=>{try{f.value=!0,await P.fetchConfirmPremix(y,S.value),q.value.length||(b.value=!0)}catch{b.value=!0}finally{f.value=!1}},w=h=>{k.dialog({component:Rt,componentProps:{report:h}})};return(h,Q)=>f.value?(i(),C("div",Vt,[e(de,{size:"50px",color:"primary"})])):(i(),C("div",It,[q.value.length===0?(i(),C("div",Tt,[e(ae,{name:"warning",color:"grey-6",size:"60px"}),Nt,Qt])):(i(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",zt,[(i(!0),C(L,null,K(q.value,(r,x)=>(i(),z(B,{key:x,onClick:g=>w(r),class:"elegant-card emphasized-card"},{default:t(()=>[e(I,{class:"q-gutter-sm enhanced-card-section"},{default:t(()=>{var g,v,d;return[a("div",Ft,[a("div",jt,[a("div",Ut," Premix: "+l(n(c)(r.name)||"-"),1),a("div",Bt,l(n(N)(r.created_at)||"-"),1)]),a("div",Ht,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm confirmed-badge"},{default:t(()=>[o(" CONFIRMED ")]),_:1})]),a("div",Lt,l(n(c)((d=(v=(g=r.branch_premix)==null?void 0:g.branch_recipe)==null?void 0:v.branch)==null?void 0:d.name)||"-"),1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",Ot,[a("div",Mt,[At,a("div",Et,l(n(R)(r.employee)||"-"),1)]),a("div",Yt,[Kt,a("div",Wt,l(n(R)(r.history[0].employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Jt=O(Gt,[["__scopeId","data-v-5fc65b42"]]);const He=s=>(A("data-v-301f0b78"),s=s(),E(),s),Xt={class:"row justify-between"},Zt={class:"text-h6"},ea=He(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),ta=He(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),aa={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var k,m,w;const{capitalizeFirstLetter:c,formatFullname:R,formatRequestQuantity:N,formatQuantity:D}=W(),{dialogRef:$,onDialogHide:y,onDialogOK:P,onDialogCancel:q}=ie(),S=V(!1),f=s;console.log("report to decline",f.report);const b=((w=(m=(k=f.report)==null?void 0:k.branch_premix)==null?void 0:m.branch_recipe)==null?void 0:w.ingredient_groups)||"Undefined";return console.log("ingrdientsData",b),(h,Q)=>(i(),C("div",null,[e(te,{ref_key:"dialogRef",ref:$,modelValue:S.value,"onUpdate:modelValue":Q[1]||(Q[1]=r=>S.value=r),onHide:n(y)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(I,{class:"emphasized-header"},{default:t(()=>[a("div",Xt,[a("div",Zt,l(n(c)(s.report.name)||"-"),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:Q[0]||(Q[0]=r=>S.value=!1)})])]),_:1}),e(I,null,{default:t(()=>{var r,x;return[a("div",null,"Baker: "+l(n(R)(s.report.employee)||"-"),1),a("div",null," Branch: "+l(n(c)((x=(r=s.report.branch_premix)==null?void 0:r.branch_recipe)==null?void 0:x.branch.name)||"-"),1),a("div",null,[o(" Status: "),e(Y,{color:"red-6",outlined:""},{default:t(()=>[o(l(n(c)(s.report.status)||"-"),1)]),_:1})])]}),_:1}),e(I,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[ea,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Premix Name")]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-h6"},{default:t(()=>[o(l(n(c)(s.report.name)||"-"),1)]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-h6"},{default:t(()=>[o(l(n(N)(s.report.quantity)||"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[ta,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o(" Code")]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o(" Name")]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Quantity")]),_:1})]),_:1})]),_:1}),(i(!0),C(L,null,K(n(b),(r,x)=>(i(),z(F,{key:x},{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-subtitle1"},{default:t(()=>[o(l(r.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(_,null,{default:t(()=>[e(u,{class:"text-subtitle1",align:"left"},{default:t(()=>[o(l(n(c)(r.ingredient.name)||"-"),1)]),_:2},1024)]),_:2},1024),e(_,{side:""},{default:t(()=>[e(u,{class:"text-subtitle1"},{default:t(()=>[o(l(n(D)(r.quantity*s.report.quantity,r.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])]))}};var sa=O(aa,[["__scopeId","data-v-301f0b78"]]);const ke=s=>(A("data-v-0a89e1b0"),s=s(),E(),s),la={key:0,class:"spinner-wrapper"},oa={key:1},na={key:0,class:"column items-center text-center q-pa-lg no-data-message"},ra=ke(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},l("No Premixes available."),-1)),ia=ke(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},l("Check again later."),-1)),ca={class:"q-gutter-md q-ma-md"},da={class:"row items-start justify-between"},ua={class:"col-8 column q-gutter-y-xs"},_a={class:"text-body1 text-weight-bold text-primary-dark"},ma={class:"text-caption text-grey-6 text-weight-medium"},pa={class:"col-4 column items-end q-gutter-y-xs"},va={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},fa={class:"row items-end justify-between"},ga={class:"column q-gutter-y-xs"},ya=ke(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),ha={class:"text-body2 text-weight-semibold text-grey-9"},xa={class:"col-5 column"},ba=ke(()=>a("div",{class:"text-caption text-grey-7"},"Declined By:",-1)),wa={class:"text-body2 text-weight-semibold text-grey-9"},$a={key:2,class:"q-pt-lg flex flex-center"},qa={__name:"DeclinePage",setup(s){const{capitalizeFirstLetter:c,formatFullname:R,formatTimestamp:N}=W(),D=J(),y=j(()=>D.user).value.device.reference_id;console.log("warehouseId",y);const P=ne(),q=j(()=>P.declinePremixData);console.log("declinedPremixData",q.value);const S=V("declined"),f=V(!0),b=V(!1),k=ue(),m=V("");let w=null;const h=j(()=>{var v;return((v=P.declinePremixData)==null?void 0:v.pagination)||{current_page:1,last_page:1,per_page:3}});console.log("pagination",h.value);const Q=async(v=1)=>{try{f.value=!0,await P.fetchDeclinePremix(y,S.value,h.value.current_page,h.value.per_page,m.value),q.value.length||(b.value=!0),console.log("declinedPremixData",q.value)}catch{b.value=!0}finally{f.value=!1}};ce(async()=>{y&&await Q(y,S.value,h.value.current_page)});const r=async()=>{Q(y,S.value,h.value.current_page)},x=async()=>{w&&clearTimeout(w),w=setTimeout(()=>{Q(y,S.value,h.value.current_page)})},g=v=>{k.dialog({component:sa,componentProps:{report:v}})};return(v,d)=>(i(),C(L,null,[a("div",null,[e(xe,{outlined:"",dense:"",placeholder:"Search declined delivery",class:"q-mb-md","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6",modelValue:m.value,"onUpdate:modelValue":[d[0]||(d[0]=p=>m.value=p),x]},{prepend:t(()=>[e(ae,{name:"search",color:"grey-6"})]),_:1},8,["modelValue"])]),f.value?(i(),C("div",la,[e(de,{size:"50px",color:"primary"})])):(i(),C("div",oa,[q.value.length===0?(i(),C("div",na,[e(ae,{name:"search_off",size:"60px",color:"grey-5"}),ra,ia])):(i(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",ca,[(i(!0),C(L,null,K(q.value.data,(p,T)=>(i(),z(B,{key:T,onClick:H=>g(p),class:"elegant-card emphasized-card"},{default:t(()=>[e(I,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var H,ee,X;return[a("div",da,[a("div",ua,[a("div",_a," Premix: "+l(n(c)(p.name)||"-"),1),a("div",ma,l(n(N)(p.created_at)||"-"),1)]),a("div",pa,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm declined-badge"},{default:t(()=>[o(l(n(c)(p.status)||"-"),1)]),_:2},1024)]),a("div",va,l(n(c)((X=(ee=(H=p.branch_premix)==null?void 0:H.branch_recipe)==null?void 0:ee.branch)==null?void 0:X.name)||"-"),1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",fa,[a("div",ga,[ya,a("div",ha,l(n(R)(p.employee)||"-"),1)]),a("div",xa,[ba,a("div",wa,l(n(R)(p.history[0].employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))])),h.value.last_page>1?(i(),C("div",$a,[e(Qe,{modelValue:h.value.current_page,"onUpdate:modelValue":[d[1]||(d[1]=p=>h.value.current_page=p),r],max:h.value.last_page,"max-pages":3,"boundary-links":"","direction-links":"","icon-first":"first_page","icon-last":"last_page","icon-prev":"chevron_left","icon-next":"chevron_right",color:"primary","active-color":"white","active-text-color":"primary",class:"elegant-pagination"},null,8,["modelValue","max"])])):pe("",!0)],64))}};var ka=O(qa,[["__scopeId","data-v-0a89e1b0"]]);const Le=s=>(A("data-v-4b686fff"),s=s(),E(),s),Da={class:"row justify-between"},Pa={class:"text-h6"},Ca=Le(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),Sa=Le(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Ra={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var x,g,v;const{capitalizeFirstLetter:c,formatFullname:R,formatRequestQuantity:N,formatQuantity:D}=W(),{dialogRef:$,onDialogHide:y,onDialogOK:P,onDialogCancel:q}=ie(),S=J(),f=j(()=>S.user);console.log("userdata",f.value);const b=f.value.data.employee_id,k=ne(),m=s;console.log("report",m.report);const w=V(!1),h=((v=(g=(x=m.report)==null?void 0:x.branch_premix)==null?void 0:g.branch_recipe)==null?void 0:v.ingredient_groups)||"Undefined";console.log("ingrdientsData",h);const Q=j(()=>h.map(d=>{const p=parseFloat(d.quantity)*parseFloat(m.report.quantity);return{...d,totalQuantity:p,formattedQuantity:D(p,d.ingredient.unit)}}));console.log("computedIngredients",Q.value);const r=async()=>{try{const d={id:m.report.id,request_premixes_id:m.report.id,branch_premix_id:m.report.branch_premix_id,employee_id:b,status:"completed",quantity:m.report.quantity,warehouse_id:m.report.warehouse_id,notes:"Completed Premix",ingredients:Q.value.map(T=>({ingredient_id:T.ingredient.id,quantity:T.totalQuantity,unit:T.ingredient.unit}))},p=await k.completedPremix(d);console.log("Report Process:",p),re.create({type:"positive",message:"Premix completed to process successfully"}),w.value=!1}catch(d){console.error(d),re.create({type:"negative",message:"An error occurred while processing the premix."})}};return(d,p)=>(i(),z(te,{ref_key:"dialogRef",ref:$,modelValue:w.value,"onUpdate:modelValue":p[1]||(p[1]=T=>w.value=T),onHide:n(y)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(I,{class:"emphasized-header"},{default:t(()=>[a("div",Da,[a("div",Pa,l(n(c)(s.report.name)||"-"),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:p[0]||(p[0]=T=>w.value=!1)})])]),_:1}),e(I,null,{default:t(()=>[a("div",null,"Baker: "+l(n(R)(s.report.employee)||"-"),1),a("div",null," Branch: "+l(n(c)(s.report.branch_premix.branch_recipe.branch.name)||"-"),1),a("div",null,[o(" Status: "),e(Y,{color:"primary",outlined:""},{default:t(()=>[o(l(n(c)(s.report.status)||"-"),1)]),_:1})])]),_:1}),e(I,null,{default:t(()=>[Ca]),_:1}),e(I,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Premix Name")]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-h6"},{default:t(()=>[o(l(n(c)(s.report.name)||"-"),1)]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-h6"},{default:t(()=>[o(l(n(N)(s.report.quantity)||"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[a("div",null,[Sa,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o(" Code")]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o(" Name")]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Quantity")]),_:1})]),_:1})]),_:1}),(i(!0),C(L,null,K(Q.value,(T,H)=>(i(),z(F,{key:H},{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-subtitle1"},{default:t(()=>[o(l(T.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(_,null,{default:t(()=>[e(u,{class:"text-subtitle1",align:"left"},{default:t(()=>[o(l(n(c)(T.ingredient.name)||"-"),1)]),_:2},1024)]),_:2},1024),e(_,{side:""},{default:t(()=>[e(u,{class:"text-subtitle1"},{default:t(()=>[o(l(n(D)(T.quantity*m.report.quantity,T.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1}),e(I,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ve(e(U,{flat:"",label:"Cancel",color:"primary"},null,512),[[fe]]),e(U,{color:"cyan-7",label:"Completed",class:"action-btn",onClick:r})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var Va=O(Ra,[["__scopeId","data-v-4b686fff"]]);const De=s=>(A("data-v-e0e63d02"),s=s(),E(),s),Ia={key:0,class:"spinner-wrapper"},Ta={key:1},Na={key:0,class:"column items-center text-center q-pa-lg no-data-message"},Qa=De(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},l("No Premixes available."),-1)),za=De(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},l("Check again later."),-1)),Fa={class:"q-gutter-md q-ma-md"},ja={class:"row items-start justify-between"},Ua={class:"col-8 column q-gutter-y-xs"},Ba={class:"text-body1 text-weight-bold text-primary-dark"},Ha={class:"text-caption text-grey-6 text-weight-dark"},La={class:"col-4 column items-end q-gutter-y-xs"},Oa={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Ma={class:"row items-end justify-between"},Aa={class:"column q-gutter-y-xs"},Ea=De(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),Ya={class:"text-body2 text-weight-semibold text-grey-9"},Ka={class:"col-5 column"},Wa=De(()=>a("div",{class:"text-caption text-grey-7"},"Scaler:",-1)),Ga={class:"text-body2 text-weight-semibold text-grey-9"},Ja={__name:"ProcessPage",setup(s){const{capitalizeFirstLetter:c,formatFullname:R,formatTimestamp:N}=W(),D=J(),y=j(()=>D.user).value.device.reference_id;console.log("warehouseId",y);const P=ne(),q=j(()=>P.processPremixData);console.log("processPremixData",q.value);const S=V("process"),f=V(!0),b=V(!1),k=ue();ce(async()=>{y&&await m()});const m=async()=>{try{f.value=!0,await P.fetchProcessPremix(y,S.value),q.value.length||(b.value=!0)}catch{b.value=!0}finally{f.value=!1}},w=h=>{k.dialog({component:Va,componentProps:{report:h}})};return(h,Q)=>f.value?(i(),C("div",Ia,[e(de,{size:"50px",color:"primary"})])):(i(),C("div",Ta,[q.value.length===0?(i(),C("div",Na,[e(ae,{name:"search_off",size:"60px",color:"grey-5"}),Qa,za])):(i(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Fa,[(i(!0),C(L,null,K(q.value,(r,x)=>(i(),z(B,{key:x,onClick:g=>w(r),class:"elegant-card emphasized-card"},{default:t(()=>[e(I,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var g,v,d;return[a("div",ja,[a("div",Ua,[a("div",Ba," Premix: "+l(n(c)(r.name)||"-"),1),a("div",Ha,l(n(N)(r.created_at)||"-"),1)]),a("div",La,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm process-badge text-uppercase"},{default:t(()=>[o(l(r.status),1)]),_:2},1024)]),a("div",Oa,l(n(c)((d=(v=(g=r.branch_premix)==null?void 0:g.branch_recipe)==null?void 0:v.branch)==null?void 0:d.name)||"-"),1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",Ma,[a("div",Aa,[Ea,a("div",Ya,l(n(R)(r.employee)||"-"),1)]),a("div",Ka,[Wa,a("div",Ga,l(n(R)(r.history[0].employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Xa=O(Ja,[["__scopeId","data-v-e0e63d02"]]);const Oe=s=>(A("data-v-52761715"),s=s(),E(),s),Za={class:"row justify-between"},es={class:"text-h6"},ts=Oe(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),as=Oe(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),ss={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var r,x,g;const{capitalizeFirstLetter:c,formatFullname:R,formatRequestQuantity:N,formatQuantity:D}=W(),{dialogRef:$,onDialogHide:y,onDialogOK:P,onDialogCancel:q}=ie(),S=V(!1),f=J(),b=j(()=>f.user);console.log("userdata",b.value);const k=b.value.data.employee_id,m=ne(),w=s,h=((g=(x=(r=w.report)==null?void 0:r.branch_premix)==null?void 0:x.branch_recipe)==null?void 0:g.ingredient_groups)||"Undefined";console.log("ingrdientsData",h),console.log("report to proceed",w.report);const Q=async()=>{try{const v={id:w.report.id,request_premixes_id:w.report.id,branch_premix_id:w.report.branch_premix_id,employee_id:k,status:"to deliver",quantity:w.report.quantity,warehouse_id:w.report.warehouse_id,notes:"To-Deliver Premix"},d=await m.toDeliverPremix(v);console.log("Report To Deliver:",d),re.create({type:"positive",message:"Premix To Deliver to process successfully"}),S.value=!1}catch(v){console.error(v)}};return(v,d)=>(i(),C("div",null,[e(te,{ref_key:"dialogRef",ref:$,modelValue:S.value,"onUpdate:modelValue":d[1]||(d[1]=p=>S.value=p),onHide:n(y)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(I,{class:"emphasized-header"},{default:t(()=>[a("div",Za,[a("div",es,l(n(c)(s.report.name)||"-"),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=p=>S.value=!1)})])]),_:1}),e(I,null,{default:t(()=>[a("div",null,"Baker: "+l(n(R)(s.report.employee)),1),a("div",null," Branch: "+l(s.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[o(" Status: "),e(Y,{color:"black",outlined:""},{default:t(()=>[o(l(n(c)(s.report.status)||"-"),1)]),_:1})])]),_:1}),e(I,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[ts,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Premix Name")]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-h6"},{default:t(()=>[o(l(n(c)(s.report.name)||"-"),1)]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-h6"},{default:t(()=>[o(l(n(N)(s.report.quantity)||"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[as,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o(" Code")]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o(" Name")]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Quantity")]),_:1})]),_:1})]),_:1}),(i(!0),C(L,null,K(n(h),(p,T)=>(i(),z(F,{key:T},{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-subtitle1"},{default:t(()=>[o(l(p.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(_,null,{default:t(()=>[e(u,{class:"text-subtitle1",align:"left"},{default:t(()=>[o(l(n(c)(p.ingredient.name)||"-"),1)]),_:2},1024)]),_:2},1024),e(_,{side:""},{default:t(()=>[e(u,{class:"text-subtitle1"},{default:t(()=>[o(l(n(D)(p.quantity*s.report.quantity,p.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(I,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ve(e(U,{flat:"",label:"Cancel",color:"negative"},null,512),[[fe]]),e(U,{color:"dark",label:"TO-Deliver",class:"action-btn",onClick:Q})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])]))}};var ls=O(ss,[["__scopeId","data-v-52761715"]]);const Pe=s=>(A("data-v-3500f029"),s=s(),E(),s),os={key:0,class:"spinner-wrapper"},ns={key:1},rs={key:0,class:"column items-center text-center q-pa-lg no-data-message"},is=Pe(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},l("No Premixes available."),-1)),cs=Pe(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},l("Check again later."),-1)),ds={class:"q-gutter-md q-ma-md"},us={class:"row items-start justify-between"},_s={class:"col-8 column q-gutter-y-xs"},ms={class:"text-body1 text-weight-bold text-primary-dark"},ps={class:"text-caption text-grey-6 text-weight-dark"},vs={class:"col-4 column items-end q-gutter-y-xs"},fs={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},gs={class:"row items-end justify-between"},ys={class:"column q-gutter-y-xs"},hs=Pe(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),xs={class:"text-body2 text-weight-semibold text-grey-9"},bs={class:"col-5 column"},ws=Pe(()=>a("div",{class:"text-caption text-grey-7"},"Scaler:",-1)),$s={class:"text-body2 text-weight-semibold text-grey-9"},qs={__name:"CompletedPage",setup(s){const{capitalizeFirstLetter:c,formatFullname:R,formatTimestamp:N}=W(),D=J(),y=j(()=>D.user).value.device.reference_id;console.log("warehouseId",y);const P=ne(),q=j(()=>P.completedPremixData);console.log("completedPremixData",q.value);const S=V("completed"),f=V(!0),b=V(!1),k=ue();ce(async()=>{y&&await m()});const m=async()=>{try{f.value=!0,await P.fetchCompletedPremix(y,S.value),q.value.length||(b.value=!0)}catch{b.value=!0}finally{f.value=!1}},w=h=>{k.dialog({component:ls,componentProps:{report:h}})};return(h,Q)=>f.value?(i(),C("div",os,[e(de,{size:"50px",color:"primary"})])):(i(),C("div",ns,[q.value.length===0?(i(),C("div",rs,[e(ae,{name:"search_off",size:"60px",color:"grey-5"}),is,cs])):(i(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",ds,[(i(!0),C(L,null,K(q.value,(r,x)=>(i(),z(B,{key:x,onClick:g=>w(r),class:"elegant-card emphasized-card"},{default:t(()=>[e(I,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var g,v,d;return[a("div",us,[a("div",_s,[a("div",ms," Premix: "+l(n(c)(r.name)||"-"),1),a("div",ps,l(n(N)(r.created_at)||"-"),1)]),a("div",vs,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm completed-badge text-uppercase"},{default:t(()=>[o(l(r.status),1)]),_:2},1024)]),a("div",fs,l(n(c)((d=(v=(g=r.branch_premix)==null?void 0:g.branch_recipe)==null?void 0:v.branch)==null?void 0:d.name)||"-"),1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",gs,[a("div",ys,[hs,a("div",xs,l(n(R)(r.employee)||"-"),1)]),a("div",bs,[ws,a("div",$s,l(n(R)(r.history[0].employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var ks=O(qs,[["__scopeId","data-v-3500f029"]]);const Me=s=>(A("data-v-6a90361e"),s=s(),E(),s),Ds={class:"row justify-between"},Ps={class:"text-h6"},Cs=Me(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),Ss=Me(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Rs={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var h,Q,r;const{capitalizeFirstLetter:c,formatFullname:R,formatRequestQuantity:N,formatQuantity:D}=W(),{dialogRef:$,onDialogHide:y}=ie(),P=V(!1),q=J(),S=j(()=>q.user);console.log("userdata",S.value);const f=S.value.data.employee_id,b=ne(),k=s;console.log("props report",k.report);const m=((r=(Q=(h=k.report)==null?void 0:h.branch_premix)==null?void 0:Q.branch_recipe)==null?void 0:r.ingredient_groups)||"Undefined";console.log("ingrdientsData",m),console.log("report to proceed",k.report);const w=async()=>{try{const x={id:k.report.id,request_premixes_id:k.report.id,branch_premix_id:k.report.branch_premix_id,employee_id:f,status:"to receive",quantity:k.report.quantity,warehouse_id:k.report.warehouse_id,notes:"To Receive Premix"},g=await b.toReceivePremix(x);console.log("Report Process:",g),re.create({type:"positive",message:"Premix to receive to process successfully"}),P.value=!1}catch(x){console.error(x)}};return(x,g)=>(i(),z(te,{ref_key:"dialogRef",ref:$,modelValue:P.value,"onUpdate:modelValue":g[1]||(g[1]=v=>P.value=v),onHide:n(y)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(I,{class:"emphasized-header"},{default:t(()=>[a("div",Ds,[a("div",Ps,l(n(c)(s.report.name)||"-"),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:g[0]||(g[0]=v=>P.value=!1)})])]),_:1}),e(I,null,{default:t(()=>{var v,d,p;return[a("div",null,"Baker: "+l(n(R)(s.report.employee)),1),a("div",null," Branch: "+l(n(c)((p=(d=(v=s.report.branch_premix)==null?void 0:v.branch_recipe)==null?void 0:d.branch)==null?void 0:p.name)||"-"),1),a("div",null,[o(" Status: "),e(Y,{color:"brown-9",outlined:""},{default:t(()=>[o(l(n(c)(s.report.status)||"-"),1)]),_:1})])]}),_:1}),e(I,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[Cs,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Premix Name")]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-h6"},{default:t(()=>[o(l(n(c)(s.report.name)||"-"),1)]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-h6"},{default:t(()=>[o(l(n(N)(s.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[Ss,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o(" Code")]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o(" Name")]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Quantity")]),_:1})]),_:1})]),_:1}),(i(!0),C(L,null,K(n(m),(v,d)=>(i(),z(F,{key:d},{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-subtitle1"},{default:t(()=>[o(l(v.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(_,null,{default:t(()=>[e(u,{class:"text-subtitle1",align:"left"},{default:t(()=>[o(l(n(c)(v.ingredient.name)||"-"),1)]),_:2},1024)]),_:2},1024),e(_,{side:""},{default:t(()=>[e(u,{class:"text-subtitle1"},{default:t(()=>[o(l(n(D)(v.quantity*s.report.quantity,v.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(I,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ve(e(U,{flat:"",label:"Cancel",color:"negative"},null,512),[[fe]]),e(U,{color:"brown-9",label:"TO Receive",class:"action-btn",onClick:w})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var Vs=O(Rs,[["__scopeId","data-v-6a90361e"]]);const Ce=s=>(A("data-v-04c705aa"),s=s(),E(),s),Is={key:0,class:"spinner-wrapper"},Ts={key:1},Ns={key:0,class:"column items-center text-center q-pa-lg no-data-message"},Qs=Ce(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},l("No Premixes available."),-1)),zs=Ce(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},l("Check again later."),-1)),Fs={class:"q-gutter-md q-ma-md"},js={class:"row items-start justify-between"},Us={class:"col-8 column q-gutter-y-xs"},Bs={class:"text-body1 text-weight-bold text-primary-dark"},Hs={class:"text-caption text-grey-6 text-weight-dark"},Ls={class:"col-4 column items-end q-gutter-y-xs"},Os={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Ms={class:"row items-end justify-between"},As={class:"column q-gutter-y-xs"},Es=Ce(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),Ys={class:"text-body2 text-weight-semibold text-grey-9"},Ks={class:"col-5 column"},Ws=Ce(()=>a("div",{class:"text-caption text-grey-7"},"Scaler:",-1)),Gs={class:"text-body2 text-weight-semibold text-grey-9"},Js={__name:"ToDeliverPage",setup(s){const{capitalizeFirstLetter:c,formatFullname:R,formatTimestamp:N}=W(),D=J(),y=j(()=>D.user).value.device.reference_id;console.log("warehouseIssd",y);const P=ne(),q=j(()=>P.toDeliverPremixData);console.log("toDeliverPremixData",q.value);const S=V("to deliver"),f=V(!0),b=V(!1),k=ue();ce(async()=>{y&&await m()});const m=async()=>{try{f.value=!0,await P.fetchToDeliverPremix(y,S.value),q.value.length||(b.value=!0)}catch{b.value=!0}finally{f.value=!1}},w=h=>{k.dialog({component:Vs,componentProps:{report:h}})};return(h,Q)=>f.value?(i(),C("div",Is,[e(de,{size:"50px",color:"primary"})])):(i(),C("div",Ts,[q.value.length===0?(i(),C("div",Ns,[e(ae,{name:"search_off",size:"60px",color:"grey-5"}),Qs,zs])):(i(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Fs,[(i(!0),C(L,null,K(q.value,(r,x)=>(i(),z(B,{key:x,onClick:g=>w(r),class:"elegant-card emphasized-card"},{default:t(()=>[e(I,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var g,v,d;return[a("div",js,[a("div",Us,[a("div",Bs," Premix: "+l(n(c)(r.name)||"-"),1),a("div",Hs,l(n(N)(r.created_at)||"-"),1)]),a("div",Ls,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm to-deliver-badge text-uppercase"},{default:t(()=>[o(l(r.status),1)]),_:2},1024)]),a("div",Os,l(n(c)((d=(v=(g=r==null?void 0:r.branch_premix)==null?void 0:g.branch_recipe)==null?void 0:v.branch)==null?void 0:d.name)||"-"),1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",Ms,[a("div",As,[Es,a("div",Ys,l(n(R)(r.employee)),1)]),a("div",Ks,[Ws,a("div",Gs,l(n(R)(r.history[0].employee)),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Xs=O(Js,[["__scopeId","data-v-04c705aa"]]);const Ae=s=>(A("data-v-124b9cba"),s=s(),E(),s),Zs={class:"row justify-between"},el={class:"text-h6"},tl=Ae(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),al=Ae(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),sl={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var k,m,w;const{capitalizeFirstLetter:c,formatFullname:R,formatRequestQuantity:N,formatQuantity:D}=W(),{dialogRef:$,onDialogHide:y}=ie(),P=V(!1),q=J(),S=j(()=>q.user);console.log("userdata",S.value);const f=s,b=((w=(m=(k=f.report)==null?void 0:k.branch_premix)==null?void 0:m.branch_recipe)==null?void 0:w.ingredient_groups)||"Undefined";return console.log("ingrdientsData",b),console.log("report to proceed",f.report),(h,Q)=>(i(),z(te,{ref_key:"dialogRef",ref:$,modelValue:P.value,"onUpdate:modelValue":Q[1]||(Q[1]=r=>P.value=r),onHide:n(y)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(I,{class:"emphasized-header"},{default:t(()=>[a("div",Zs,[a("div",el,l(n(c)(s.report.name)||"-"),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:Q[0]||(Q[0]=r=>P.value=!1)})])]),_:1}),e(I,null,{default:t(()=>{var r,x,g,v;return[a("div",null,"Baker: "+l(n(R)(s.report.employee)||"-"),1),a("div",null," Branch: "+l(n(c)((v=(g=(x=(r=s.report)==null?void 0:r.branch_premix)==null?void 0:x.branch_recipe)==null?void 0:g.branch)==null?void 0:v.name)||"-"),1),a("div",null,[o(" Status: "),e(Y,{color:"amber-10",outlined:""},{default:t(()=>[o(l(n(c)(s.report.status)||"-"),1)]),_:1})])]}),_:1}),e(I,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[tl,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Premix Name")]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-h6"},{default:t(()=>[o(l(n(c)(s.report.name)||"-"),1)]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-h6"},{default:t(()=>[o(l(n(N)(s.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[al,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o(" Code")]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o(" Name")]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Quantity")]),_:1})]),_:1})]),_:1}),(i(!0),C(L,null,K(n(b),(r,x)=>(i(),z(F,{key:x},{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-subtitle1"},{default:t(()=>[o(l(r.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(_,null,{default:t(()=>[e(u,{class:"text-subtitle1",align:"left"},{default:t(()=>[o(l(n(c)(r.ingredient.name)),1)]),_:2},1024)]),_:2},1024),e(_,{side:""},{default:t(()=>[e(u,{class:"text-subtitle1"},{default:t(()=>[o(l(n(D)(r.quantity*s.report.quantity,r.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var ll=O(sl,[["__scopeId","data-v-124b9cba"]]);const Se=s=>(A("data-v-9396133c"),s=s(),E(),s),ol={key:0,class:"spinner-wrapper"},nl={key:1},rl={key:0,class:"column items-center text-center q-pa-lg no-data-message"},il=Se(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},l("No Premixes available."),-1)),cl=Se(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},l("Check again later."),-1)),dl={class:"q-gutter-md q-ma-md"},ul={class:"row items-start justify-between"},_l={class:"col-8 column q-gutter-y-xs"},ml={class:"text-body1 text-weight-bold text-primary-dark"},pl={class:"text-caption text-grey-6 text-weight-medium"},vl={class:"col-4 column items-end q-gutter-y-xs"},fl={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},gl={class:"row items-end justify-between"},yl={class:"column q-gutter-y-xs"},hl=Se(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),xl={class:"text-body2 text-weight-semibold text-grey-9"},bl={class:"col-5 column"},wl=Se(()=>a("div",{class:"text-caption text-grey-7"},"Scaler:",-1)),$l={class:"text-body2 text-weight-semibold text-grey-9"},ql={__name:"ToReceivePage",setup(s){const{capitalizeFirstLetter:c,formatFullname:R,formatTimestamp:N}=W(),D=J(),y=j(()=>D.user).value.device.reference_id;console.log("warehouseId",y);const P=ne(),q=j(()=>P.toReceivePremixData);console.log("toReceivePremixData",q.value);const S=V("process"),f=V(!0),b=V(!1),k=ue();ce(async()=>{y&&await m()});const m=async()=>{try{f.value=!0,await P.fetchToReceivePremix(y,S.value),q.value.length||(b.value=!0)}catch{b.value=!0}finally{f.value=!1}},w=h=>{k.dialog({component:ll,componentProps:{report:h}})};return(h,Q)=>f.value?(i(),C("div",ol,[e(de,{size:"50px",color:"primary"})])):(i(),C("div",nl,[q.value.length===0?(i(),C("div",rl,[e(ae,{name:"search_off",size:"60px",color:"grey-5"}),il,cl])):(i(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",dl,[(i(!0),C(L,null,K(q.value,(r,x)=>(i(),z(B,{key:x,onClick:g=>w(r),class:"elegant-card emphasized-card"},{default:t(()=>[e(I,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var g,v;return[a("div",ul,[a("div",_l,[a("div",ml," Premix: "+l(n(c)(r.name)||"-"),1),a("div",pl,l(n(N)(r.created_at)),1)]),a("div",vl,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm to-receive-badge text-uppercase"},{default:t(()=>[o(l(r.status),1)]),_:2},1024)]),a("div",fl,l(n(c)((v=(g=r==null?void 0:r.branch_premix)==null?void 0:g.branch_recipe)==null?void 0:v.branch.name)||"-"),1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",gl,[a("div",yl,[hl,a("div",xl,l(n(R)(r.employee)||"-"),1)]),a("div",bl,[wl,a("div",$l,l(n(R)(r.history[0].employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var kl=O(ql,[["__scopeId","data-v-9396133c"]]);const Ee=s=>(A("data-v-4502cbbf"),s=s(),E(),s),Dl={class:"row justify-between"},Pl={class:"text-h6"},Cl=Ee(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),Sl=Ee(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Rl={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var f,b,k;const{capitalizeFirstLetter:c,formatTimestamp:R,formatFullname:N,formatRequestQuantity:D,formatQuantity:$}=W(),y=s;console.log("reportsss",y.report);const P=V(!1),q=()=>{P.value=!0},S=((k=(b=(f=y.report)==null?void 0:f.branch_premix)==null?void 0:b.branch_recipe)==null?void 0:k.ingredient_groups)||"Undefined";return console.log("ingrdientsData",S),(m,w)=>(i(),C(L,null,[a("div",null,[e(U,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:q})]),e(te,{modelValue:P.value,"onUpdate:modelValue":w[1]||(w[1]=h=>P.value=h)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(I,{class:"emphasized-header"},{default:t(()=>[a("div",Dl,[a("div",Pl,l(n(c)(s.report.name)||"-"),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:w[0]||(w[0]=h=>P.value=!1)})])]),_:1}),e(I,null,{default:t(()=>{var h;return[a("div",null,"Date: "+l(n(R)(s.report.created_at)||"-"),1),a("div",null,"Baker: "+l(n(N)(s.report.employee)||"-"),1),a("div",null," Branch: "+l(s.report.branch_premix.branch_recipe.branch.name||"-"),1),a("div",null,[o(" Status: "),e(Y,{color:"orange-7",outlined:""},{default:t(()=>[o(l(n(c)(s.report.status)||"-"),1)]),_:1})]),a("div",null," Received By: "+l(n(N)((h=s.report.history[0])==null?void 0:h.employee)||"-"),1)]}),_:1}),e(I,null,{default:t(()=>[Cl]),_:1}),e(I,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Premix Name")]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-h6"},{default:t(()=>[o(l(n(c)(s.report.name)||"-"),1)]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-h6"},{default:t(()=>[o(l(n(D)(s.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[a("div",null,[Sl,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o(" Code")]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o(" Name")]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,{class:"text-overline"},{default:t(()=>[o("Quantity")]),_:1})]),_:1})]),_:1}),(i(!0),C(L,null,K(n(S),(h,Q)=>(i(),z(F,{key:Q},{default:t(()=>[e(_,null,{default:t(()=>[e(u,{class:"text-subtitle1"},{default:t(()=>[o(l(h.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(_,null,{default:t(()=>[e(u,{class:"text-subtitle1",align:"left"},{default:t(()=>[o(l(n(c)(h.ingredient.name)||"-"),1)]),_:2},1024)]),_:2},1024),e(_,{side:""},{default:t(()=>[e(u,{class:"text-subtitle1"},{default:t(()=>[o(l(n($)(h.quantity*y.report.quantity,h.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Vl=O(Rl,[["__scopeId","data-v-4502cbbf"]]);const Il=s=>(A("data-v-bdbb7b0e"),s=s(),E(),s),Tl={key:0,class:"spinner-wrapper"},Nl={key:1},Ql={key:0,class:"data-error"},zl=Il(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Fl={__name:"ReceivedPage",setup(s){const{capitalizeFirstLetter:c,formatFullname:R,formatTimestamp:N}=W(),D=J(),y=j(()=>D.user).value.device.reference_id;console.log("warehouseId",y);const P=ne(),q=j(()=>P.receivePremixData);console.log("receivePremixData",q.value);const S=V([]),f=V({page:1,rowsPerPage:0,rowsNumber:0}),b=V("process"),k=V(!0),m=V(!1);ce(async()=>{y&&await w(y),console.log("receivePremixData",q.value)});const w=async(r,x=0,g=5)=>{try{k.value=!0,await P.fetchReceivePremix(r,b.value,x,g),console.log("receivePremixDatssa",q.value);const{data:v,current_page:d,per_page:p,total:T}=q.value;S.value=v,console.log("premixData.value",S.value),f.value.page=d,f.value.rowsPerPage=p,f.value.rowsNumber=T,q.value.length||(m.value=!0)}catch{m.value=!0}finally{k.value=!1}},h=r=>{w(y,r.pagination.page,r.pagination.rowsPerPage)},Q=[{name:"created_at",label:"Date / Time",align:"left",field:r=>N(r.created_at)||"Not Available",sortable:!0},{name:"employee",label:"Employee",align:"left",field:r=>R(r.employee)||"Not Available",sortable:!0},{name:"branch",label:"Branch Name",align:"left",field:r=>{var x,g,v;return c((v=(g=(x=r==null?void 0:r.branch_premix)==null?void 0:x.branch_recipe)==null?void 0:g.branch)==null?void 0:v.name)||"Not Available"},sortable:!0},{name:"premix_name",label:"Premix Name",align:"left",field:r=>c(r.name)||"Not Available",sortable:!0},{name:"status",label:"Status",align:"left",field:"status",sortable:!0},{name:"action",label:"Action",align:"left",field:"action",sortable:!0}];return(r,x)=>k.value?(i(),C("div",Tl,[e(de,{size:"50px",color:"primary"})])):(i(),C("div",Nl,[S.value.length===0?(i(),C("div",Ql,[e(ae,{name:"warning",color:"warning",size:"4em"}),zl])):(i(),z(Ze,{key:1,rows:S.value,columns:Q,pagination:f.value,"onUpdate:pagination":x[0]||(x[0]=g=>f.value=g),"rows-per-page-options":[3,5,10,0],onRequest:h,flat:"",bordered:""},{"body-cell-status":t(g=>[e(je,{props:g},{default:t(()=>[e(Y,{color:"orange-7"},{default:t(()=>[o(l(n(c)(g.row.status)),1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-action":t(g=>[e(je,{props:g},{default:t(()=>[e(Vl,{report:g.row},null,8,["report"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"]))]))}};var jl=O(Fl,[["__scopeId","data-v-bdbb7b0e"]]);const Ul={class:"q-gutter-y-sm"},Bl={__name:"PremixTab",setup(s){const c=V("pendingReports"),R=j(()=>{switch(c.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";case"processReports":return"blue-9";case"completedReports":return"blue-grey-10";case"toDeliverReports":return"brown-6";case"toReceiveReports":return"purple-1";case"receive":return"orange-7";default:return"light-green-13"}});return(N,D)=>(i(),z(B,{flat:""},{default:t(()=>[e(se),a("div",Ul,[e(Te,{modelValue:c.value,"onUpdate:modelValue":D[0]||(D[0]=$=>c.value=$),"indicator-color":R.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(le,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Premix"}),e(le,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Premix"}),e(le,{class:"text-dark",name:"declineReports",label:"\u{1F534}Decline Premix"}),e(le,{class:"text-dark",name:"processReports",label:"\u{1F535}Process Premix"}),e(le,{class:"text-dark",name:"completedReports",label:"\u26ABCompleted Premix"}),e(le,{class:"text-dark",name:"toDeliverReports",label:"\u{1F7E4}To Deliver Premix"}),e(le,{class:"text-dark",name:"toReceiveReports",label:"\u26AATo Receive Premix"}),e(le,{class:"text-dark",name:"receive",label:"\u{1F7E0}Receive Premix"})]),_:1},8,["modelValue","indicator-color"])]),e(Ne,{modelValue:c.value,"onUpdate:modelValue":D[1]||(D[1]=$=>c.value=$),animated:""},{default:t(()=>[e(oe,{name:"pendingReports"},{default:t(()=>[e(qt)]),_:1}),e(oe,{name:"confirmReports"},{default:t(()=>[e(Jt)]),_:1}),e(oe,{name:"declineReports"},{default:t(()=>[e(ka)]),_:1}),e(oe,{name:"processReports"},{default:t(()=>[e(Xa)]),_:1}),e(oe,{name:"completedReports"},{default:t(()=>[e(ks)]),_:1}),e(oe,{name:"toDeliverReports"},{default:t(()=>[e(Xs)]),_:1}),e(oe,{name:"toReceiveReports"},{default:t(()=>[e(kl)]),_:1}),e(oe,{name:"receive"},{default:t(()=>[e(jl)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var Hl=O(Bl,[["__scopeId","data-v-07a51121"]]);const Ye=s=>(A("data-v-aa3acf16"),s=s(),E(),s),Ll=Ye(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Report",-1)),Ol={key:0},Ml=Ye(()=>a("div",{class:"text-positive text-subtitle1"}," Please confirm again to finalize this report. ",-1)),Al={__name:"ConfirmDialog",setup(s){const{dialogRef:c,onDialogHide:R,onDialogOK:N,onDialogCancel:D}=ie(),$=V(!1),y=()=>{$.value?N():$.value=!0};return(P,q)=>(i(),z(te,{ref_key:"dialogRef",ref:c,onHide:n(R)},{default:t(()=>[e(B,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(I,{class:"q-pt-none q-pb-sm"},{default:t(()=>[Ll,$.value?pe("",!0):(i(),C("p",Ol,"Are you sure you want to confirm this report?"))]),_:1}),$.value?(i(),z(I,{key:0},{default:t(()=>[Ml]),_:1})):pe("",!0),e(se,{class:"q-mb-md"}),e(I,null,{default:t(()=>[e(we,{align:"right",class:"q-pt-none"},{default:t(()=>[ve(e(U,{flat:"",dense:"",label:"No",color:"primary",class:"q-mr-sm"},null,512),[[fe]]),e(U,{dense:"",label:$.value?"Confirm":"Yes! Confirm",color:"positive",class:"q-btn-rounded q-px-lg",onClick:y},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var El=O(Al,[["__scopeId","data-v-aa3acf16"]]);const Yl=s=>(A("data-v-b44cae3c"),s=s(),E(),s),Kl=Yl(()=>a("div",{class:"text-h5 q-mb-xs"},"Decline Report",-1)),Wl={key:0},Gl={__name:"DeclinedDialog",setup(s){const{dialogRef:c,onDialogHide:R,onDialogOK:N,onDialogCancel:D}=ie(),$=V(!1),y=V(""),P=V(null),q=()=>{$.value?P.value.validate()&&N({remarks:y.value}):$.value=!0};return(S,f)=>(i(),z(te,{ref_key:"dialogRef",ref:c,onHide:n(R),persistent:""},{default:t(()=>[e(B,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(I,{class:"q-pt-none q-pb-sm"},{default:t(()=>[Kl,$.value?pe("",!0):(i(),C("p",Wl,"Are you sure you want to decline this report?"))]),_:1}),$.value?(i(),z(I,{key:0},{default:t(()=>[e(xe,{modelValue:y.value,"onUpdate:modelValue":f[0]||(f[0]=b=>y.value=b),type:"textarea",label:"Reason for declining",filled:"",autogrow:"",dense:"",ref_key:"remarksInput",ref:P,rules:[b=>!!b||"Remarks are required"]},null,8,["modelValue","rules"])]),_:1})):pe("",!0),e(se,{class:"q-mb-md"}),e(I,null,{default:t(()=>[e(we,{align:"right",class:"q-pt-none"},{default:t(()=>[ve(e(U,{flat:"",dense:"",label:"No",color:"primary",class:"q-mr-sm"},null,512),[[fe]]),e(U,{dense:"",label:$.value?"Submit Decline":"Yes! Decline",color:"negative",class:"q-btn-rounded q-px-lg",onClick:q},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Jl=O(Gl,[["__scopeId","data-v-b44cae3c"]]);const Re=s=>(A("data-v-46db6907"),s=s(),E(),s),Xl={class:"row justify-between"},Zl={class:"text-h6"},eo=Re(()=>a("span",{class:"text-bold"},"Date:",-1)),to=Re(()=>a("span",{class:"text-bold"},"Created By:",-1)),ao=Re(()=>a("span",{class:"text-bold"},"Status:",-1)),so={class:"q-mt-md"},lo=Re(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),oo={key:1,class:"text-caption text-grey-6 q-mt-md"},no={__name:"TransactionView",props:{report:{type:Object,required:!0}},emits:["fetchAgain"],setup(s,{emit:c}){const{capitalizeFirstLetter:R,formatFullname:N,formatTimestamp:D}=W(),$=et(),y=j(()=>$.userData);console.log("userData in TransactionView:",y.value);const P=$e(),{dialogRef:q,onDialogHide:S,onDialogOK:f,onDialogCancel:b}=ie(),k=s;console.log("report",k.report);const m=V(!1),w=ue(),h=v=>v==null?"No Quantity":parseFloat(v),Q=()=>{w.dialog({component:El}).onOk(v=>{console.log("Remarks from child:",v),r(k.report)}).onCancel(()=>{console.log("Cancelled")})},r=async v=>{var d,p,T,H,ee,X,ge,ye,he,me;try{w.loading.show(),console.log("Confirming report",v);const M=v.items.map(Ie=>{const Je=parseFloat(Ie.quantity)||0,Xe=parseFloat(Ie.gram)||0;return{...Ie,total_grams:Je*Xe}});console.log("Per Item Totals:",M),console.log("employueee id:",(T=(p=(d=y.value)==null?void 0:d.data)==null?void 0:p.employee)==null?void 0:T.id);const Ge={...v,employee_id:((X=(ee=(H=y.value)==null?void 0:H.data)==null?void 0:ee.employee)==null?void 0:X.id)||"0",status:"confirmed",items:M},Z=await P.confirmDeliveryStocks(Ge);console.log("responsesss",Z),(Z==null?void 0:Z.data)||((ge=Z==null?void 0:Z.data)==null?void 0:ge.message)==="Delivery confirmed successfully."?(re.create({type:"positive",message:Z.data.message||"Delivery Confirmed Successfully"}),(Z==null?void 0:Z.status)===200&&(f({action:"confirmed"}),m.value=!1)):re.create({type:"negative",message:((ye=Z==null?void 0:Z.data)==null?void 0:ye.message)||"Failed to Confirm deliveryq"}),console.log("responssssse",Z)}catch(M){console.log(M),re.create({type:"negative",message:((me=(he=M==null?void 0:M.response)==null?void 0:he.data)==null?void 0:me.message)||"Failed to Confirm delivery"})}finally{w.loading.hide()}},x=()=>{w.dialog({component:Jl}).onOk(v=>{console.log("Remarks from child:",v.remarks),g(k.report.id,v.remarks)}).onCancel(()=>{console.log("Cancelled")})},g=async(v,d)=>{var p,T,H,ee,X,ge,ye,he;try{w.loading.show(),console.log("Declining report",v,"with remarks:",d);const me={id:v,employee_id:((H=(T=(p=y.value)==null?void 0:p.data)==null?void 0:T.employee)==null?void 0:H.id)||"0",status:"declined",remarks:d},M=await P.declineDeliveryStocks(me);(M==null?void 0:M.data)||((ee=M==null?void 0:M.data)==null?void 0:ee.message)==="Delivery declined successfully."?(re.create({type:"positive",message:((X=M==null?void 0:M.data)==null?void 0:X.message)||"Delivery Declined Successfully"}),(M==null?void 0:M.status)===200&&(f({action:"declined"}),m.value=!1)):re.create({type:"negative",message:((ge=M==null?void 0:M.data)==null?void 0:ge.message)||"Failed to Decline delivery"}),console.log("responsessssss",M)}catch(me){console.log(me),re.create({type:"negative",message:((he=(ye=me==null?void 0:me.response)==null?void 0:ye.data)==null?void 0:he.message)||"Failed to decline delivery. Please try again."})}finally{w.loading.hide()}};return(v,d)=>(i(),z(te,{ref_key:"dialogRef",ref:q,modelValue:m.value,"onUpdate:modelValue":d[1]||(d[1]=p=>m.value=p),onHide:n(S)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(I,{class:"emphasized-header"},{default:t(()=>[a("div",Xl,[a("div",Zl," From: "+l(n(R)(s.report.from_name)),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=p=>m.value=!1)})])]),_:1}),e(I,{class:"text-caption text-grey-7 q-mt-sm"},{default:t(()=>[a("div",null,[eo,o(" "+l(n(D)(s.report.created_at)||"-"),1)]),a("div",null,[to,o(" "+l(n(N)(s.report.employee)||"-"),1)]),a("div",null,[ao,e(Y,{color:"warning",outlined:""},{default:t(()=>[o(l(n(R)(s.report.status)||"-"),1)]),_:1})]),a("div",so,[lo,s.report.items&&s.report.items.length?(i(),z(G,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(F,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[o(" Raw Materials Code ")]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[o("Stocks Category")]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,null,{default:t(()=>[o(" Quantity ")]),_:1})]),_:1})]),_:1}),(i(!0),C(L,null,K(s.report.items,(p,T)=>(i(),z(F,{key:T},{default:t(()=>[e(_,null,{default:t(()=>[e(u,null,{default:t(()=>{var H;return[o(l(((H=p.raw_material)==null?void 0:H.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[o(l(p.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(_,{side:""},{default:t(()=>[e(u,null,{default:t(()=>[o(l(h(p.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(i(),C("div",oo," No items in this delivery "))])]),_:1}),e(we,{class:"report-actions q-ma-sm q-gutter-sm",align:"right"},{default:t(()=>[e(U,{color:"negative",label:"Decline",class:"action-btn",onClick:x}),e(U,{color:"positive",label:"Confirm",class:"action-btn",onClick:Q})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var ro=O(no,[["__scopeId","data-v-46db6907"]]);const io=s=>(A("data-v-19af4d50"),s=s(),E(),s),co={key:0,class:"spinner-wrapper"},uo={key:1,class:"q-mt-xl"},_o={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},mo={class:"text-h6 text-grey-7 q-mt-sm"},po={class:"text-body1 text-grey-6 q-mt-sm"},vo={class:"q-gutter-md q-ma-md"},fo={class:"row items-start justify-between"},go={class:"col-8 column q-gutter-y-xs"},yo={class:"text-body1 text-weight-bold text-primary-dark"},ho={class:"text-caption text-grey-6 text-weight-meduim"},xo={class:"col-4 column items-end q-gutter-y-xs"},bo={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},wo={class:"row justify-between items-end"},$o={class:"column q-gutter-y-xs"},qo=io(()=>a("div",{class:"text-caption text-grey-7"},"Created By:",-1)),ko={class:"text-body2 text-weight-semibold text-grey-9"},Do={__name:"PendingPage",setup(s){const{capitalizeFirstLetter:c,formatFullname:R}=W(),N=J(),D=j(()=>N.user);console.log("userdata",D.value);const $=$e(),y=j(()=>$.pendingStocks),P=D.value.device.reference_id;console.log("warehouseId",P);const q=V("pending"),S=V("Warehouse"),f=V(!0),b=V(!1),k=ue(),m=Q=>ze.formatDate(Q,"MMM DD, YYYY || hh:mm A"),w=async()=>{try{f.value=!0,await $.fetchPendingDeliveryReports(P,q.value,S.value),y.value.length||(b.value=!0),console.log("stockDelivery",y.value)}catch(Q){console.log(Q)}finally{f.value=!1}};ce(async()=>{P&&await w(P,q.value)});const h=(Q,r)=>{k.dialog({component:ro,componentProps:{report:Q}}).onOk(x=>{var g;if(console.log("response from child:",x),(x==null?void 0:x.action)==="declined"||(x==null?void 0:x.action)==="confirmed"){const v=(g=$.pendingStocks)==null?void 0:g.data;if(Array.isArray(v)){const d=v.findIndex(p=>p.id===Q.id);d!==-1&&v.splice(d,1)}}})};return(Q,r)=>f.value?(i(),C("div",co,[e(de,{size:"50px",color:"primary"})])):(i(),C("div",uo,[y.value.data.length===0?(i(),C("div",_o,[e(ae,{name:"search_off",size:"60px",color:"grey-6"}),a("div",mo,l(Q.searchQuery?"No deliveries found for your search.":"No deliveries available."),1),a("div",po,l(Q.searchQuery?"Try another search term.":"Check again later."),1)])):(i(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",vo,[(i(!0),C(L,null,K(y.value.data,(x,g)=>(i(),z(B,{key:g,onClick:v=>h(x,g),class:"pending-card elegant-card emphasized-card"},{default:t(()=>[e(I,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",fo,[a("div",go,[a("div",yo," From: "+l(n(c)(x.from_name)||"-"),1),a("div",ho,l(m(x.created_at)||"-"),1)]),a("div",xo,[a("div",null,[e(Y,{color:"warning",class:"text-weight-bold q-px-md q-py-sm pending-badge"},{default:t(()=>[o(" PENDING ")]),_:1})]),a("div",bo,l(x.items.length||"-")+" items ",1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",wo,[a("div",$o,[qo,a("div",ko,l(n(R)(x.employee)||"-"),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Po=O(Do,[["__scopeId","data-v-19af4d50"]]);const Ve=s=>(A("data-v-894985ac"),s=s(),E(),s),Co={class:"row justify-between"},So={class:"text-h6"},Ro=Ve(()=>a("span",{class:"text-bold"},"Date:",-1)),Vo=Ve(()=>a("span",{class:"text-bold"}," Created By:",-1)),Io=Ve(()=>a("span",{class:"text-bold"},"Status:",-1)),To=Ve(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),No={key:1,class:"text-caption text-grey-6 q-mt-md"},Qo={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){const{capitalizeFirstLetter:c,formatTimestamp:R,formatFullname:N}=W(),{dialogRef:D,onDialogHide:$,onDialogOK:y,onDialogCancel:P}=ie();console.log("report",s.report);const S=V(!1),f=b=>b==null?"No Quantity":parseFloat(b);return(b,k)=>(i(),z(te,{ref_key:"dialogRef",ref:D,modelValue:S.value,"onUpdate:modelValue":k[1]||(k[1]=m=>S.value=m),onHide:n($)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(I,{class:"emphasized-header"},{default:t(()=>[a("div",Co,[a("div",So," From: "+l(n(c)(s.report.from_name)),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:k[0]||(k[0]=m=>S.value=!1)})])]),_:1}),e(I,{class:"text-caption text-grey-7 q-mt-sm"},{default:t(()=>[a("div",null,[a("div",null,[Ro,o(" "+l(n(R)(s.report.created_at)),1)]),a("div",null,[Vo,o(" "+l(n(N)(s.report.employee)),1)]),Io,e(Y,{color:"green"},{default:t(()=>[o(l(n(c)(s.report.status||"No Status")),1)]),_:1})])]),_:1}),e(I,null,{default:t(()=>[a("div",null,[To,s.report.items&&s.report.items.length?(i(),z(G,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(F,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[o(" Raw Materials Code ")]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[o("Stocks Category")]),_:1})]),_:1}),e(_,{side:""},{default:t(()=>[e(u,null,{default:t(()=>[o(" Quantity ")]),_:1})]),_:1})]),_:1}),(i(!0),C(L,null,K(s.report.items,(m,w)=>(i(),z(F,{key:w},{default:t(()=>[e(_,null,{default:t(()=>[e(u,null,{default:t(()=>{var h;return[o(l(((h=m.raw_material)==null?void 0:h.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[o(l(m.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(_,{side:""},{default:t(()=>[e(u,null,{default:t(()=>[o(l(f(m.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(i(),C("div",No," No items in this delivery "))])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var zo=O(Qo,[["__scopeId","data-v-894985ac"]]);const Ke=s=>(A("data-v-76ddba08"),s=s(),E(),s),Fo={key:0,class:"spinner-wrapper"},jo={key:1,class:"q-mt-xl"},Uo={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},Bo={class:"text-h6 text-grey-7 q-mt-sm"},Ho={class:"text-body1 text-grey-6 q-mt-xs"},Lo={class:"q-gutter-md q-ma-md"},Oo={class:"row items-start justify-between"},Mo={class:"col-8 column q-gutter-y-xs"},Ao={class:"text-body1 text-weight-bold text-primary-dark"},Eo={class:"text-caption text-grey-6 text-weight-medium"},Yo={class:"col-4 column items-end q-gutter-y-xs"},Ko={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Wo={class:"row justify-between items-end"},Go={class:"column q-gutter-y-xs"},Jo=Ke(()=>a("div",{class:"text-caption text-grey-7"},"Created By:",-1)),Xo={class:"text-body2 text-weight-semibold text-grey-9"},Zo={class:"col-5 column"},en=Ke(()=>a("div",{class:"text-caption text-grey-7"},"Confirmed By:",-1)),tn={class:"text-body2 text-weight-semibold text-grey-9"},an={key:2,class:"q-pt-md flex flex-center"},sn={__name:"ConfirmPage",setup(s){const c=J(),R=j(()=>c.user);console.log("userdata",R.value);const N=$e(),D=j(()=>N.confirmStocks),$=R.value.device.reference_id;console.log("warehouseId",$);const y=V("confirmed"),P=V("Warehouse"),q=V(!0),S=V(!1),f=ue();V(null);const b=V();let k=null;const m=j(()=>{var d;return((d=N.confirmStocks)==null?void 0:d.pagination)||{current_page:1,last_page:1,per_page:3}}),w=d=>d?d.toLowerCase().split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" "):"",h=d=>{const p=X=>X?X.charAt(0).toUpperCase()+X.slice(1).toLowerCase():"",T=d.firstname?p(d.firstname):"No Firstname",H=d.middlename?p(d.middlename).charAt(0)+".":"",ee=d.lastname?p(d.lastname):"No Lastname";return`${T} ${H} ${ee}`},Q=d=>ze.formatDate(d,"MMM DD, YYYY || hh:mm A"),r=async()=>{try{q.value=!0,await N.fetchConfirmedDeliveryReports($,y.value,P.value,m.value.current_page,m.value.per_page,b.value),D.value.length||(S.value=!0),console.log("stockDeliverysss",D.value)}catch(d){console.log(d)}finally{q.value=!1}};ce(async()=>{$&&await r($,y.value,P.value,m.value.current_page)});const x=async()=>{r($,y.value,P.value,m.value.current_page)},g=()=>{k&&clearTimeout(k),k=setTimeout(()=>{r()},500)},v=d=>{f.dialog({component:zo,componentProps:{report:d}})};return(d,p)=>(i(),C(L,null,[a("div",null,[e(xe,{outlined:"",dense:"",placeholder:"Search delivery",class:"q-mb-sm","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6",modelValue:b.value,"onUpdate:modelValue":[p[0]||(p[0]=T=>b.value=T),g]},{append:t(()=>[e(ae,{name:"search"})]),_:1},8,["modelValue"])]),q.value?(i(),C("div",Fo,[e(de,{size:"50px",color:"primary"})])):(i(),C("div",jo,[D.value.data.length===0?(i(),C("div",Uo,[e(ae,{name:"search_off",size:"60px",color:"grey-6"}),a("div",Bo,l(b.value?"No deliveries found for your search.":"No deliveries available."),1),a("div",Ho,l(b.value?"Try another search term.":"Check again later."),1)])):(i(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Lo,[(i(!0),C(L,null,K(D.value.data,(T,H)=>(i(),z(B,{key:H,onClick:ee=>v(T),class:"confirmed-card elegant-card emphasized-card"},{default:t(()=>[e(I,{class:"q-gutter-sm enhanced-card-section"},{default:t(()=>[a("div",Oo,[a("div",Mo,[a("div",Ao," From: "+l(w(T.from_name)||"-"),1),a("div",Eo,l(Q(T.created_at)||"-"),1)]),a("div",Yo,[a("div",null,[e(Y,{color:"positive",class:"text-weight-bold q-px-md q-py-sm confirmed-badge"},{default:t(()=>[o(" CONFIRMED ")]),_:1})]),a("div",Ko,l(T.items.length||"-")+" items ",1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",Wo,[a("div",Go,[Jo,a("div",Xo,l(h(T.employee)||"-"),1)]),a("div",Zo,[en,a("div",tn,l(h(T.approved_by)||"-"),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))])),m.value.last_page>1?(i(),C("div",an,[e(Qe,{modelValue:m.value.current_page,"onUpdate:modelValue":p[1]||(p[1]=T=>m.value.current_page=T),max:m.value.last_page,"max-pages":3,"boundary-links":"","direction-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward",onClick:x},null,8,["modelValue","max"])])):pe("",!0)],64))}};var ln=O(sn,[["__scopeId","data-v-76ddba08"]]);const be=s=>(A("data-v-3fcf7d94"),s=s(),E(),s),on={class:"row justify-between"},nn={class:"text-h6"},rn=be(()=>a("span",{class:"text-bold"},"Date:",-1)),cn=be(()=>a("span",{class:"text-bold"},"Created By:",-1)),dn=be(()=>a("span",{class:"text-bold"},"Status:",-1)),un=be(()=>a("span",{class:"text-bold"},"Remark:",-1)),_n=be(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),mn={key:1,class:"text-caption text-grey-6 q-mt-md"},pn={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){const{capitalizeFirstLetter:c,formatTimestamp:R,formatFullname:N}=W(),{dialogRef:D,onDialogHide:$,onDialogOK:y,onDialogCancel:P}=ie();console.log("report",s.report);const S=V(!1),f=b=>b==null?"No Quantity":parseFloat(b);return(b,k)=>(i(),z(te,{ref_key:"dialogRef",ref:D,modelValue:S.value,"onUpdate:modelValue":k[1]||(k[1]=m=>S.value=m),onHide:n($)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(I,{class:"emphasized-header"},{default:t(()=>[a("div",on,[a("div",nn," From: "+l(n(c)(s.report.from_name)),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:k[0]||(k[0]=m=>S.value=!1)})])]),_:1}),e(I,{class:"text-caption text-grey-7 q-mt-sm"},{default:t(()=>[a("div",null,[rn,o(" "+l(n(R)(s.report.created_at)),1)]),a("div",null,[cn,o(" "+l(n(N)(s.report.employee)||"-"),1)]),dn,e(Y,{color:"negative"},{default:t(()=>[o(l(n(c)(s.report.status||"No Status")),1)]),_:1}),a("div",null,[un,o(" "+l(n(c)(s.report.remarks||"No Remark")),1)])]),_:1}),e(I,null,{default:t(()=>[a("div",null,[_n,s.report.items&&s.report.items.length?(i(),z(G,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(F,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[o(" Raw Materials Code ")]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[o("Stocks Category")]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(u,{side:""},{default:t(()=>[o("Quantity")]),_:1})]),_:1})]),_:1}),(i(!0),C(L,null,K(s.report.items,(m,w)=>(i(),z(F,{key:w},{default:t(()=>[e(_,null,{default:t(()=>[e(u,null,{default:t(()=>{var h;return[o(l(((h=m.raw_material)==null?void 0:h.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(_,null,{default:t(()=>[e(u,null,{default:t(()=>[o(l(m.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(_,{side:""},{default:t(()=>[e(u,null,{default:t(()=>[o(l(f(m.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(i(),C("div",mn," No items in this delivery "))])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var vn=O(pn,[["__scopeId","data-v-3fcf7d94"]]);const We=s=>(A("data-v-41b98b80"),s=s(),E(),s),fn={key:0,class:"spinner-wrapper"},gn={key:1,class:"q-mt-xl"},yn={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},hn={class:"text-h6 text-grey-7 q-mt-md"},xn={class:"text-body1 text-grey-6 q-mt-sm"},bn={class:"q-gutter-md q-pb-md"},wn={class:"row items-start justify-between"},$n={class:"col-8 column q-gutter-y-xs"},qn={class:"text-body1 text-weight-bold text-primary-dark"},kn={class:"text-caption text-grey-6 text-weight-medium"},Dn={class:"col-4 column items-end q-gutter-y-xs"},Pn={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Cn={class:"row justify-between items-end"},Sn={class:"column q-gutter-y-xs"},Rn=We(()=>a("div",{class:"text-caption text-grey-7"},"Declined By:",-1)),Vn={class:"text-body2 text-weight-semibold text-grey-9"},In={class:"col-5 column"},Tn=We(()=>a("div",{class:"text-caption text-grey-7"},"Remark:",-1)),Nn={class:"text-body2 text-grey-8 remarks-text"},Qn={key:2,class:"q-pt-lg flex flex-center"},zn={__name:"DeclinePage",setup(s){const c=J(),R=j(()=>c.user);console.log("userdata",R.value);const N=$e(),D=j(()=>N.declinedStocks),$=R.value.device.reference_id;console.log("warehouseId",$);const y=V("declined"),P=V("Warehouse"),q=V(!0),S=V(!1),f=ue(),b=V();let k=null;const m=j(()=>{var d;return((d=N.declinedStocks)==null?void 0:d.pagination)||{current_page:1,last_page:1,per_page:3}}),w=d=>d?d.toLowerCase().split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" "):"",h=d=>{const p=X=>X?X.charAt(0).toUpperCase()+X.slice(1).toLowerCase():"",T=d.firstname?p(d.firstname):"No Firstname",H=d.middlename?p(d.middlename).charAt(0)+".":"",ee=d.lastname?p(d.lastname):"No Lastname";return`${T} ${H} ${ee}`},Q=d=>ze.formatDate(d,"MMM DD, YYYY || hh:mm A"),r=async(d=1)=>{try{q.value=!0,await N.fetchDeclinedDeliveryReports($,y.value,P.value,m.value.current_page,m.value.per_page,b.value),D.value.length||(S.value=!0),console.log("stockDeliveryDeclinedsss",D.value)}catch(p){console.log(p)}finally{q.value=!1}};ce(async()=>{$&&await r($,y.value,P.value,m.value.current_page)});const x=async()=>{r($,y.value,P.value,m.value.current_page)},g=async()=>{k&&clearTimeout(k),k=setTimeout(()=>{r(1)},500)},v=d=>{f.dialog({component:vn,componentProps:{report:d}})};return(d,p)=>(i(),C(L,null,[a("div",null,[e(xe,{outlined:"",dense:"",placeholder:"Search delivery",class:"q-mb-md search-input-elegant","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6",modelValue:b.value,"onUpdate:modelValue":[p[0]||(p[0]=T=>b.value=T),g]},{prepend:t(()=>[e(ae,{name:"search",color:"grey-6"})]),_:1},8,["modelValue"])]),q.value?(i(),C("div",fn,[e(de,{size:"50px",color:"primary"})])):(i(),C("div",gn,[D.value.data.length===0?(i(),C("div",yn,[e(ae,{name:"search_off",size:"60px",color:"grey-5"}),a("div",hn,l(b.value?"No deliveries found for your search.":"No deliveries available."),1),a("div",xn,l(b.value?"Try another search term.":"Check again later."),1)])):(i(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",bn,[(i(!0),C(L,null,K(D.value.data,(T,H)=>(i(),z(B,{key:H,onClick:ee=>v(T),class:"declined-card elegant-card emphasized-card"},{default:t(()=>[e(I,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",wn,[a("div",$n,[a("div",qn," From: "+l(w(T.from_name)),1),a("div",kn,l(Q(T.created_at)),1)]),a("div",Dn,[a("div",null,[e(Y,{color:"negative",class:"text-weight-bold q-px-md q-py-sm declined-badge"},{default:t(()=>[o(" DECLINED ")]),_:1})]),a("div",Pn,l(T.items.length)+" items ",1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",Cn,[a("div",Sn,[Rn,a("div",Vn,l(h(T.approved_by)),1)]),a("div",In,[Tn,a("div",Nn,l(w(T.remarks||"\u2014 No remark provided \u2014")),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))])),m.value.last_page>1?(i(),C("div",Qn,[e(Qe,{modelValue:m.value.current_page,"onUpdate:modelValue":[p[1]||(p[1]=T=>m.value.current_page=T),x],max:m.value.last_page,"max-pages":5,"boundary-links":"","direction-links":"","icon-first":"first_page","icon-last":"last_page","icon-prev":"chevron_left","icon-next":"chevron_right",color:"primary","active-color":"white","active-text-color":"primary",class:"elegant-pagination"},null,8,["modelValue","max"])])):pe("",!0)],64))}};var Fn=O(zn,[["__scopeId","data-v-41b98b80"]]);const jn={class:"q-gutter-y-sm"},Un={__name:"StocksDeliveryPage",setup(s){const c=V("pending"),R=j(()=>{switch(c.value){case"pending":return"warning";case"confirmed":return"green-13";case"declined":return"red-6";default:return"light-green-13"}});return(N,D)=>(i(),z(B,{flat:""},{default:t(()=>[e(se),a("div",jn,[e(Te,{modelValue:c.value,"onUpdate:modelValue":D[0]||(D[0]=$=>c.value=$),"indicator-color":R.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(le,{class:"text-dark",name:"pending",label:"Pending"}),e(le,{class:"text-dark",name:"confirmed",label:"Confirmed"}),e(le,{class:"text-dark",name:"declined",label:"Declined"})]),_:1},8,["modelValue","indicator-color"])]),e(Ne,{modelValue:c.value,"onUpdate:modelValue":D[1]||(D[1]=$=>c.value=$),animated:""},{default:t(()=>[e(oe,{name:"pending"},{default:t(()=>[e(Po)]),_:1}),e(oe,{name:"confirmed"},{default:t(()=>[e(ln)]),_:1}),e(oe,{name:"declined"},{default:t(()=>[e(Fn)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Bn={class:"q-gutter-y-sm"},$r={__name:"warehouseTransactionHistory",setup(s){const c=V("premix"),R=j(()=>{switch(c.value){case"premix":return"brown";case"stocks_delivery":return"teal-5";default:return"light-green-13"}});return(N,D)=>(i(),z(B,{flat:""},{default:t(()=>[e(I,{class:"text-h6"},{default:t(()=>[o(" Transaction History ")]),_:1}),a("div",Bn,[e(Te,{modelValue:c.value,"onUpdate:modelValue":D[0]||(D[0]=$=>c.value=$),"indicator-color":R.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(le,{class:"text-dark",name:"premix",label:"Premix"}),e(le,{class:"text-dark",name:"stocks_delivery",label:"Stocks Delivery"})]),_:1},8,["modelValue","indicator-color"])]),e(Ne,{modelValue:c.value,"onUpdate:modelValue":D[1]||(D[1]=$=>c.value=$),animated:""},{default:t(()=>[e(oe,{name:"premix"},{default:t(()=>[e(Hl)]),_:1}),e(oe,{name:"stocks_delivery"},{default:t(()=>[e(Un)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{$r as default};
