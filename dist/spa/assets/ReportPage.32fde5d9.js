import{o as m,e as R,M,r as b,a3 as h,f as e,w as t,Q as j,I as V,J as a,$ as i,a0 as d,a1 as K,a4 as D,a5 as I,bd as N,a2 as J,O as U,R as z,H as G,c as F,bH as W,bf as P,bc as X,L as Z}from"./index.285f8271.js";import{_ as T}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as ee}from"./QBadge.97abd51d.js";import{Q as Y,a as te}from"./QTable.046f094e.js";import{Q as ae}from"./QPagination.ec4b2c58.js";import{Q as re}from"./QBanner.8dd211e6.js";import{u as se}from"./baker-report.7e32840f.js";import{Q as oe}from"./QChip.1e528a6f.js";import{a as p}from"./QSelect.e3e891d5.js";import{a as Q,b as l}from"./QMenu.0fc945de.js";import{Q as L}from"./QList.8a67a6d7.js";import{q as E}from"./date.50720472.js";import"./QVirtualScroll.0aea0995.js";import"./use-virtual-scroll.742001ac.js";import"./rtl.276c3f1b.js";import"./selection.5637fac7.js";import"./axios.44f1f867.js";import"./position-engine.aecd056e.js";const le={};function ne(r,x){return m(),R(M,{class:"q-pa-sm",color:"red-6",dense:"",elevated:"",icon:"add_circle",label:"Create Report",to:"/branch/baker/create_report"})}var ie=T(le,[["render",ne]]);const f=r=>(U("data-v-4a9eb3ec"),r=r(),z(),r),ce={class:"text-h6 text-weight-regular"},de={class:"row justify-between"},ue={class:"section-content"},_e={class:"row q-gutter-x-sm"},me=f(()=>a("div",{class:"text-subtitle2"},"Date:",-1)),pe={class:"text-body1 text-weight-light"},fe={class:"row q-gutter-x-sm"},ge=f(()=>a("div",{class:"text-subtitle2"},"Branch:",-1)),ve={class:"text-body1 text-weight-light"},he={class:"row q-gutter-x-sm"},be=f(()=>a("div",{class:"text-subtitle2"},"Baker:",-1)),xe={class:"text-body1 text-weight-light"},we={class:"row q-gutter-x-sm"},ye=f(()=>a("div",{class:"text-subtitle2"},"Remarks:",-1)),ke={class:"text-body1 text-weight-light"},Qe={class:"row q-mt-sm item-start q-gutter-x-xl"},qe={class:"row q-gutter-x-sm text-overline"},$e=f(()=>a("div",null,"Kilo:",-1)),Re={class:"text-weight-light"},Ce={class:"row q-gutter-x-sm text-overline"},Be=f(()=>a("div",null,"Over:",-1)),De={class:"text-weight-light"},Ve={class:"row q-gutter-x-sm text-overline"},Ne=f(()=>a("div",null,"Short:",-1)),Se={class:"text-weight-light"},Ie={class:"row q-gutter-x-sm text-overline"},Le=f(()=>a("div",null,"Actual Target:",-1)),Me={class:"text-weight-light"},Te={class:"row justify-between"},Ae=f(()=>a("div",{class:"section-title",align:"center"},"Ingredients",-1)),Fe={key:0},Pe=f(()=>a("div",{class:"section-title",align:"center"},"Breads",-1)),Ye={key:1},je=f(()=>a("div",{class:"section-title",align:"center"},"Fillings",-1)),Ue={__name:"ReportView",props:{report:{type:Object,required:!0}},setup(r){console.log("bakerView",r.report);const w=b(!1),y=s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase(),k=s=>s?s.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",C=s=>{const n=u=>u?u.charAt(0).toUpperCase()+u.slice(1).toLowerCase():"",c=s.firstname?n(s.firstname):"No Firstname",g=s.middlename?n(s.middlename).charAt(0)+".":"",o=s.lastname?n(s.lastname):"No Lastname";return`${c} ${g} ${o}`.trim()},q=s=>{switch(s){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},B=()=>{w.value=!0},v=s=>E.formatDate(s,"MMMM D, YYYY"),$=s=>{if(s>=1e3){const n=s/1e3;return`${n} ${n===1?"kg":"kgs"}`}return`${s} g`},A=s=>{const n=Number(s)||0;return parseFloat(n.toFixed(3)).toString()};return(s,n)=>(m(),h(D,null,[e(M,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:B}),e(J,{modelValue:w.value,"onUpdate:modelValue":n[1]||(n[1]=c=>w.value=c),class:"report-dialog"},{default:t(()=>[e(j,{class:"report-card"},{default:t(()=>[e(V,{class:"report-header"},{default:t(()=>[a("div",ce,i(k(r.report.branch_recipe.recipe.name))+" - "+i(r.report.recipe_category),1),e(M,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:n[0]||(n[0]=c=>w.value=!1)})]),_:1}),e(V,null,{default:t(()=>[a("div",de,[a("div",null,[a("div",ue,[a("div",_e,[me,a("div",pe,i(v(r.report.created_at)),1)]),a("div",fe,[ge,a("div",ve,i(k(r.report.branch.name)),1)]),a("div",he,[be,a("div",xe,i(C(r.report.user.employee)),1)]),a("div",we,[ye,a("div",ke,i(r.report.remark?r.report.remark:"N/A"),1)])])]),a("div",null,[e(oe,{square:"",color:q(r.report.status),"text-color":"white"},{default:t(()=>[d(i(y(r.report.status)),1)]),_:1},8,["color"])])]),a("div",Qe,[a("div",qe,[$e,a("div",Re,i(A(r.report.kilo)),1)]),a("div",Ce,[Be,a("div",De,i(r.report.over),1)]),a("div",Ve,[Ne,a("div",Se,i(r.report.short),1)]),a("div",Ie,[Le,a("div",Me,i(r.report.actual_target),1)])]),e(K,{class:"q-my-md"}),a("div",Te,[a("div",null,[Ae,e(L,{dense:"",separator:"",class:"q-pa-md box"},{default:t(()=>[e(Q,null,{default:t(()=>[e(l,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[d("Code")]),_:1})]),_:1}),e(l),e(l),e(l,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[d("Quantity")]),_:1})]),_:1}),e(l,{side:""})]),_:1}),(m(!0),h(D,null,I(r.report.ingredient_bakers_reports,(c,g)=>(m(),R(Q,{key:g},{default:t(()=>[e(l,null,{default:t(()=>[e(p,{class:"text-caption justify",align:"center"},{default:t(()=>[d(i(c.ingredients.code),1)]),_:2},1024)]),_:2},1024),e(l),e(l,null,{default:t(()=>[e(p,{class:"text-caption",align:"center"},{default:t(()=>[d(i($(c.quantity)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),r.report.bread_bakers_reports&&r.report.bread_bakers_reports.length?(m(),h("div",Fe,[Pe,e(L,{dense:"",separator:"",class:"q-pa-md box"},{default:t(()=>[e(Q,null,{default:t(()=>[e(l,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[d("Bread Name")]),_:1})]),_:1}),e(l),e(l,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(m(!0),h(D,null,I(r.report.bread_bakers_reports,(c,g)=>(m(),R(Q,{key:g},{default:t(()=>[e(l,null,{default:t(()=>[e(p,{class:"text-caption",align:"center"},{default:t(()=>[d(i(c.bread.name),1)]),_:2},1024)]),_:2},1024),e(l),e(l,null,{default:t(()=>[e(p,{class:"text-caption",align:"center"},{default:t(()=>[d(i(c.bread_production)+" pcs ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):N("",!0),r.report.filling_bakers_reports&&r.report.filling_bakers_reports.length?(m(),h("div",Ye,[je,e(L,{dense:"",separator:"",class:"q-pa-md box"},{default:t(()=>[e(Q,null,{default:t(()=>[e(l,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[d("Bread Name")]),_:1})]),_:1}),e(l),e(l,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(m(!0),h(D,null,I(r.report.filling_bakers_reports,(c,g)=>(m(),R(Q,{key:g},{default:t(()=>[e(l,null,{default:t(()=>[e(p,{class:"text-caption",align:"center"},{default:t(()=>[d(i(c.bread.name),1)]),_:2},1024)]),_:2},1024),e(l),e(l,null,{default:t(()=>[e(p,{class:"text-caption",align:"center"},{default:t(()=>[d(i(c.filling_production)+" pcs ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):N("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var ze=T(Ue,[["__scopeId","data-v-4a9eb3ec"]]);const Ee=r=>(U("data-v-3522f0b4"),r=r(),z(),r),Oe={class:"q-mt-sm q-gutter-md"},He=Ee(()=>a("div",null,null,-1)),Ke={class:"table-container"},Je={class:"q-pa-lg flex flex-center"},Ge={key:0,class:"loading-overlay row justify-center items-center"},We={key:1,class:"q-pa-md q-gutter-md row justify-center"},Xe={__name:"ReportTable",setup(r){var g;G();const x=se();F(()=>x.reportToView);const y=((g=F(()=>x.user).value)==null?void 0:g.data.id)||"";b("");const k=b(!0);b(!1);const C=b(!1),q=b([]),B=b(1),v=b({page:1,rowsPerPage:10,rowsNumber:10,sortBy:"id",descending:!1}),$=async()=>{k.value=!0;try{const{page:o,rowsNumber:u,rowsPerPage:_,sortBy:O,descending:H}=v.value,S=await x.fetchBakerReport(y,o,u,_,O,H);q.value=S.data,B.value=S.last_page,v.value.rowsPerPage=S.per_page||10,C.value=q.value.length===0}catch(o){console.error("Error fetching baker report:",o)}k.value=!1};W(()=>{y&&$()});const s=[{name:"date",align:"left",label:"Date",field:"created_at",format:o=>E.formatDate(o,"MMMM D, YYYY"),sortable:!0},{name:"name",label:"Reports Name",align:"center",field:o=>o.branch_recipe&&o.branch_recipe.recipe?{name:o.branch_recipe.recipe.name,category:o.branch_recipe.recipe.category}:{name:"N/A",category:"N/A"},format:o=>`${o.name} (${o.category})`,sortable:!0},{name:"status",align:"center",label:"Status",field:"status"},{name:"view",align:"right",label:"View",field:"view"}],n=o=>{switch(o){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},c=o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase();return(o,u)=>(m(),h("div",Oe,[He,a("div",Ke,[e(te,{rows:q.value,columns:s,"row-key":"id",flat:"",bordered:"",dense:"",modelValue:v.value,"onUpdate:modelValue":u[0]||(u[0]=_=>v.value=_),pagination:v.value,"rows-per-page-options":[10],onRequest:u[1]||(u[1]=_=>$(P(y)))},{"body-cell-status":t(_=>[e(Y,{key:"name",props:_},{default:t(()=>[e(ee,{outlined:"",color:n(_.row.status)},{default:t(()=>[d(i(c(_.row.status)),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-view":t(_=>[e(Y,{props:_},{default:t(()=>[a("div",null,[e(ze,{report:_.row},null,8,["report"])])]),_:2},1032,["props"])]),_:1},8,["rows","modelValue","pagination"]),a("div",Je,[e(ae,{modelValue:v.value.page,"onUpdate:modelValue":[u[2]||(u[2]=_=>v.value.page=_),u[3]||(u[3]=_=>$(P(y)))],color:"purple",max:B.value,"max-pages":5,"boundary-numbers":""},null,8,["modelValue","max"])]),k.value?(m(),h("div",Ge,[e(X,{size:"50px"})])):N("",!0),C.value?(m(),h("div",We,[e(re,{class:"bg-grey-1",dense:""},{default:t(()=>[d(" No data available ")]),_:1})])):N("",!0)])]))}};var Ze=T(Xe,[["__scopeId","data-v-3522f0b4"]]);const et={class:"text-h6 text-white"},tt={class:"q-gutter-y-lg"},at={align:"right"},wt={__name:"ReportPage",setup(r){return(x,w)=>(m(),R(j,{flat:""},{default:t(()=>[e(V,{style:{"background-color":"#ef4444"}},{default:t(()=>[a("div",et,[e(Z,{name:"fa-solid fa-layer-group"}),d(" Report ")])]),_:1}),e(V,null,{default:t(()=>[a("div",tt,[a("div",at,[e(ie)]),a("div",null,[e(Ze)])])]),_:1})]),_:1}))}};export{wt as default};
