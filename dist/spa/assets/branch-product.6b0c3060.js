import{d as g,r as s,c as f,P as i,N as n}from"./index.e3af296d.js";import{api as a}from"./axios.a9f2bd60.js";import{u as B}from"./product.d9bc6b25.js";const $=g("branchProducts",()=>{const p=s(null),r=s([]),h=s([]),l=B(),u=f(()=>l.products);return console.log("Branch PRoductssss:",u.value),{branchId:h,branchProduct:p,branchProducts:r,fetchBranchProducts:async t=>{const c=await a.get(`/api/branches/${t}/products`);r.value=c.data},createBranchProducts:async t=>{i.show();try{const{category:c,price:o}=t,e=await a.post("/api/branch-products",t);if(e.data.message==="Branch product saved successfully"){const d=u.value.find(y=>y.id===t.product_id),P={...e.data,category:c||"No Category",price:o?parseInt(o):0,product:d||{name:"No Product",category:"Unknown"},total_quantity:t.total_quantity};r.value.unshift(P),n.create({type:"positive",message:"Branch product saved successfully",position:"top"})}else e.data.message==="The product already exists in this branch."&&n.create({type:"warning",message:"The product already exists in this branch.",position:"top"})}catch{n.create({type:"negative",message:"An error occurred while saving the branch product.",position:"top"})}finally{i.hide()}},updateBranchProductPrice:async t=>{await a.put(`/api/update-branch-products/${t}`,{price:newPrice});const c=r.value.findIndex(o=>o.id===t);c!==-1&&(r.value[c].price=newPrice)},deleteBranchProducts:async t=>{await a.delete(`/api/branch-products/${t}`),r.value=r.value.filter(c=>c.id!==t)},searchBranchProducts:async({branches_id:t,query:c,category:o})=>{console.log("Branch ID:",t),console.log("Query:",c),console.log("Category:",o);try{const e=await a.post("/api/search-branch-products",{branches_id:t,query:c,category:o});r.value=e.data,console.log("Branch Products:",e.data)}catch(e){console.log("Error:",e)}}}});export{$ as u};
