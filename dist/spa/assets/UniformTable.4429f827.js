import{b as ce,Q as B,a as pe}from"./QTable.2adee4fd.js";import{Q as _e}from"./QTr.c081fc3e.js";import{Q as ie}from"./QSpinnerIos.9aa52c72.js";import{Q as de}from"./QInnerLoading.276e5908.js";import{Q as fe}from"./QPage.0121c117.js";import{c as X,r as _,t as G,u as R,o as c,a3 as f,f as e,M as F,w as t,Q as H,I as k,ae as re,J as n,e as M,a0 as p,bd as L,a4 as j,a5 as W,$ as g,a1 as D,b6 as J,bC as K,K as w,aJ as Y,a2 as Z,O as ee,R as te,N as ne,L as I,z as ve}from"./index.73558343.js";import{Q as ue}from"./QSpace.78ee7954.js";import{a as A,b as V}from"./QMenu.9ccc6342.js";import{Q as ge}from"./QList.682a9538.js";import{C as me}from"./ClosePopup.a94591c5.js";import{u as ye}from"./employee.7b6b5d78.js";import{u as ae}from"./uniform.54106cc1.js";import{_ as be,a as he}from"./TableFilter.af4f8531.js";import{_ as le}from"./plugin-vue_export-helper.21dcd24c.js";import"./axios.96348fde.js";import{Q as Pe}from"./QTooltip.e8d7f078.js";import{a as $}from"./QSelect.4520d271.js";import"./QVirtualScroll.3130b294.js";import"./use-virtual-scroll.b1ab32cf.js";import"./rtl.276c3f1b.js";import"./position-engine.98a98976.js";import"./selection.596f429f.js";import"./QChip.05bfccfc.js";const se=m=>(ee("data-v-10eeb7f7"),m=m(),te(),m),xe=se(()=>n("div",{class:"text-h6 text-weight-bold"},"\u{1F9E5} Add Uniform",-1)),Ve={style:{position:"relative"}},we={key:0,class:"dropdown-list"},Se={class:"row q-col-gutter-md q-mt-lg"},qe={class:"col-12 col-sm-6"},$e=se(()=>n("div",{class:"text-subtitle2 text-grey-7 q-mb-xs"}," Employee Name: ",-1)),Ue={class:"text-body1 text-weight-medium"},ze={class:"col-12 col-sm-6"},ke=se(()=>n("div",{class:"text-subtitle2 text-grey-7 q-mb-xs"},"Position:",-1)),Qe={class:"text-body1 text-weight-medium"},Ne={class:"col-6"},Le={class:"text-center q-mb-sm"},Ae={key:0,class:"row items-start"},Ce={class:"col-6"},Fe={key:0,class:"col-6 q-gutter-sm"},Ie={class:"col-6"},Te={class:"text-center q-mb-sm"},Oe={key:0,class:"row items-start"},Ee={class:"col-6"},Xe={key:0,class:"col-6 q-gutter-sm"},Me={class:"row q-col-gutter-md"},Be={class:"col-4"},Re={class:"col-4"},De={class:"col-4"},Je={__name:"AddUniform",emits:["created"],setup(m,{emit:Q}){const U=Q,x=ye(),S=X(()=>x.employees),q=ae(),y=_(""),b=_(!1),s=_(!1),P=_(!1),v=_(0),h=_(0),z=_(!1),C=_(!1),i=G({employee_id:"",employee_name:"",employee_position:"",tShirtsize:"",pantsSize:"",tShirtPcs:0,tShirtPrice:0,pantsPcs:0,pantsPrice:0,numberOfPayments:1}),O=()=>{b.value=!0},E=async()=>{y.value.trim()&&(C.value=!0,await x.searchEmployee(y.value),C.value=!1)},o=u=>{i.employee_id=u.id,i.employee_name=`${u.firstname} ${u.middlename?u.middlename.charAt(0)+".":""} ${u.lastname}`,i.employee_position=u.position,y.value=""},l=()=>{i.employee_id="",i.employee_name="",i.employee_position="",i.tShirtsize="",i.pantsSize="",i.tShirtPcs=0,i.tShirtPrice=0,i.pantsPcs=0,i.pantsPrice=0,i.numberOfPayments=1,s.value=!1,P.value=!1,v.value=0,h.value=0};R([()=>i.tShirtPcs,()=>i.tShirtPrice,()=>i.pantsPcs,()=>i.pantsPrice],()=>{v.value=i.tShirtPcs*i.tShirtPrice+i.pantsPcs*i.pantsPrice}),R([v,()=>i.numberOfPayments],()=>{h.value=v.value/(i.numberOfPayments||1)});const a=async()=>{z.value=!0;try{await q.createUniforms({...i,totalAmount:v.value,paymentPerPayroll:h.value,remaining_payments:v.value}),U("created"),b.value=!1,l()}catch(u){console.error(u)}finally{z.value=!1}};return(u,r)=>(c(),f("div",null,[e(F,{padding:"sm md",label:"Add Uniform",icon:"add_circle",size:"md",class:"gradient-btn text-white",onClick:O}),e(Z,{modelValue:b.value,"onUpdate:modelValue":r[12]||(r[12]=d=>b.value=d),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(H,{class:"uniform-dialog-card"},{default:t(()=>[e(k,{class:"dialog-header row items-center no-wrap"},{default:t(()=>[xe,e(ue),re(e(F,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},null,512),[[me]])]),_:1}),e(k,{class:"q-pt-lg q-pb-md q-px-lg"},{default:t(()=>[n("div",Ve,[e(be,{modelValue:y.value,"onUpdate:modelValue":[r[0]||(r[0]=d=>y.value=d),E],"search-loading":C.value},null,8,["modelValue","search-loading"]),y.value?(c(),f("div",we,[e(ge,{separator:""},{default:t(()=>{var d;return[(d=S.value)!=null&&d.length?L("",!0):(c(),M(A,{key:0},{default:t(()=>[e(V,{class:"text-grey-7"},{default:t(()=>[p("No employee record")]),_:1})]),_:1})),(c(!0),f(j,null,W(S.value,N=>(c(),M(A,{key:N.id,clickable:"",onClick:Jt=>o(N)},{default:t(()=>[e(V,null,{default:t(()=>[p(g(`${N.firstname} ${N.middlename?N.middlename.charAt(0)+".":""} ${N.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]}),_:1})])):L("",!0)]),n("div",Se,[n("div",qe,[$e,n("div",Ue,g(i.employee_name||"-------"),1)]),n("div",ze,[ke,n("div",Qe,g(i.employee_position||"-------"),1)])])]),_:1}),e(D,{inset:"",class:"q-mx-lg q-my-md"}),e(k,{class:"row q-col-gutter-md q-px-lg"},{default:t(()=>[n("div",Ne,[n("div",Le,[e(J,{modelValue:s.value,"onUpdate:modelValue":r[1]||(r[1]=d=>s.value=d),label:"T-Shirt",color:"deep-orange","keep-color":""},null,8,["modelValue"])]),s.value?(c(),f("div",Ae,[n("div",Ce,[e(K,{modelValue:i.tShirtsize,"onUpdate:modelValue":r[2]||(r[2]=d=>i.tShirtsize=d),options:[{label:"18",value:"18"},{label:"S",value:"S"},{label:"M",value:"M"},{label:"L",value:"L"}],type:"radio",dense:"",color:"deep-orange"},null,8,["modelValue"])]),i.tShirtsize?(c(),f("div",Fe,[e(w,{modelValue:i.tShirtPcs,"onUpdate:modelValue":r[3]||(r[3]=d=>i.tShirtPcs=d),dense:"",outlined:"",label:"pcs"},null,8,["modelValue"]),e(w,{modelValue:i.tShirtPrice,"onUpdate:modelValue":r[4]||(r[4]=d=>i.tShirtPrice=d),dense:"",outlined:"",label:"price"},null,8,["modelValue"])])):L("",!0)])):L("",!0)]),n("div",Ie,[n("div",Te,[e(J,{modelValue:P.value,"onUpdate:modelValue":r[5]||(r[5]=d=>P.value=d),label:"Pants",color:"brown-6","keep-color":""},null,8,["modelValue"])]),P.value?(c(),f("div",Oe,[n("div",Ee,[e(K,{modelValue:i.pantsSize,"onUpdate:modelValue":r[6]||(r[6]=d=>i.pantsSize=d),options:[{label:"M",value:"M"},{label:"L",value:"L"},{label:"XL",value:"XL"},{label:"XXL",value:"XXL"}],type:"radio",dense:"",color:"brown"},null,8,["modelValue"])]),i.pantsSize?(c(),f("div",Xe,[e(w,{modelValue:i.pantsPcs,"onUpdate:modelValue":r[7]||(r[7]=d=>i.pantsPcs=d),dense:"",outlined:"",label:"pcs"},null,8,["modelValue"]),e(w,{modelValue:i.pantsPrice,"onUpdate:modelValue":r[8]||(r[8]=d=>i.pantsPrice=d),dense:"",outlined:"",label:"price"},null,8,["modelValue"])])):L("",!0)])):L("",!0)])]),_:1}),e(k,{class:"q-px-lg q-pb-md"},{default:t(()=>[n("div",Me,[n("div",Be,[e(w,{modelValue:i.numberOfPayments,"onUpdate:modelValue":r[9]||(r[9]=d=>i.numberOfPayments=d),label:"Number of Payments",type:"number",outlined:"",dense:""},null,8,["modelValue"])]),n("div",Re,[e(w,{modelValue:v.value,"onUpdate:modelValue":r[10]||(r[10]=d=>v.value=d),label:"Total Amount",outlined:"",dense:"",readonly:""},null,8,["modelValue"])]),n("div",De,[e(w,{modelValue:h.value,"onUpdate:modelValue":r[11]||(r[11]=d=>h.value=d),label:"Per Payroll",outlined:"",dense:"",readonly:""},null,8,["modelValue"])])])]),_:1}),e(Y,{align:"right",class:"q-px-lg q-pb-lg"},{default:t(()=>[e(F,{size:"md",padding:"sm lg","no-caps":"",label:"Save","icon-right":"send",class:"gradient-btn text-white",onClick:a,loading:z.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var Ke=le(Je,[["__scopeId","data-v-10eeb7f7"]]);const oe=m=>(ee("data-v-2d3cfa48"),m=m(),te(),m),je=oe(()=>n("div",{class:"text-h6"},"\u{1F9E5} Edit Uniform",-1)),Ge={class:"row q-col-gutter-md q-mt-lg"},He={class:"col-12 col-sm-6"},We=oe(()=>n("div",{class:"text-subtitle2 text-grey-7 q-md-xs"},"Employee Name:",-1)),Ye={class:"text-body1 text-weight-medium"},Ze={class:"col-12 col-sm-6"},et=oe(()=>n("div",{class:"text-subtitle2 text-grey-7 q-md-xs"},"Position:",-1)),tt={class:"text-body1 text-weight-medium"},at={class:"col-5"},lt={class:"q-mb-lg",align:"center"},st={key:0,class:"row q-ml-sm q-mt-sm"},ot={class:"col-6"},nt={class:"q-gutter-md"},it={class:"col-6"},dt={class:"q-mb-lg",align:"center"},rt={key:0,class:"row q-ml-sm q-mt-sm"},ut={class:"col-6 q-pl-xl"},mt={class:"q-gutter-md q-pl-lg"},ct={class:"row q-col-gutter-md"},pt={class:"col-4"},_t={class:"col-4"},ft={class:"col-4"},vt={__name:"EditUniform",props:["edit"],emits:["edited"],setup(m,{emit:Q}){const U=Q,x=m;console.log("edit",x.edit);const S=ae(),q=_(!1),y=_(!1),b=G({...x.edit}),s=G({numberOfPayments:0,remaining_payments:x.edit.remaining_payments||0,tShirtsize:"",tShirtPcs:"",tShirtPrice:"",pantsSize:"",pantsPcs:"",pantsPrice:""}),P=_(!1),v=_(!1),h=X(()=>{const o=P.value&&s.tShirtPcs&&s.tShirtPrice?parseFloat(s.tShirtPcs)*parseFloat(s.tShirtPrice):0,l=v.value&&s.pantsPcs&&s.pantsPrice?parseFloat(s.pantsPcs)*parseFloat(s.pantsPrice):0;return o+l}),z=X(()=>{const o=parseFloat(s.numberOfPayments),l=h.value;return o>0?(l/o).toFixed(2):0}),C=()=>{var a,u,r,d;const o=(u=(a=x.edit)==null?void 0:a.t_shirt)==null?void 0:u[0],l=(d=(r=x.edit)==null?void 0:r.pants)==null?void 0:d[0];P.value=!!o,v.value=!!l,s.tShirtsize=(o==null?void 0:o.size)||"",s.tShirtPcs=(o==null?void 0:o.pcs)||"",s.tShirtPrice=(o==null?void 0:o.price)||"",s.pantsSize=(l==null?void 0:l.size)||"",s.pantsPcs=(l==null?void 0:l.pcs)||"",s.pantsPrice=(l==null?void 0:l.price)||"",s.numberOfPayments=x.edit.number_of_payments||0,q.value=!0},i=()=>{P.value=!1,v.value=!1,s.tShirtsize="",s.tShirtPcs="",s.tShirtPrice="",s.pantsSize="",s.pantsPcs="",s.pantsPrice="",s.numberOfPayments="",s.remaining_payments=0},O=o=>{const l=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",a=o.firstname?l(o.firstname):"No Firstname",u=o.middlename?l(o.middlename).charAt(0)+".":"",r=o.lastname?l(o.lastname):"No Lastname";return`${a} ${u} ${r}`.trim()};R(()=>[s.numberOfPayments,h.value],([o,l])=>{const a=parseFloat(o),u=parseFloat(l);s.paymentPerPayroll=!isNaN(a)&&!isNaN(u)&&a>0?(u/a).toFixed(2):0});const E=async()=>{const o=isNaN(parseFloat(s.remaining_payments))?0:parseFloat(s.remaining_payments),l={...b,t_shirt:P.value?[{size:s.tShirtsize,pcs:s.tShirtPcs,price:s.tShirtPrice}]:[],pants:v.value?[{size:s.pantsSize,pcs:s.pantsPcs,price:s.pantsPrice}]:[],number_of_payments:s.numberOfPayments,total_amount:parseFloat(h.value),payments_per_payroll:parseFloat(z.value),remaining_payments:o};console.log("Updated uniform data:",l);try{y.value=!0,await S.updateUnifrom(l),U("edited"),ne.create({message:"Uniform changes saved successfully",color:"positive",position:"top",timeout:2e3}),q.value=!1,i()}catch(a){console.error("Error saving uniform changes:",a),ne.create({message:"Failed to save uniform changes",color:"negative",position:"top",timeout:2e3})}finally{y.value=!1}};return(o,l)=>(c(),f(j,null,[e(F,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:"",onClick:C},{default:t(()=>[e(Pe,{class:"bg-positive",delay:200},{default:t(()=>[p("Edit")]),_:1})]),_:1}),e(Z,{modelValue:q.value,"onUpdate:modelValue":l[11]||(l[11]=a=>q.value=a),persistent:"",position:"right","backdrop-filter":"blur(6px) saturate(150%)"},{default:t(()=>[e(H,{style:{width:"600px","max-width":"90vw"}},{default:t(()=>[e(k,{class:"row items-center dialog-header text-white rounded-borders-top q-pa-md"},{default:t(()=>[je,e(ue),re(e(F,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},null,512),[[me]])]),_:1}),e(k,{class:"q-pb-lg q-px-lg"},{default:t(()=>[n("div",Ge,[n("div",He,[We,n("div",Ye,g(m.edit.employee?O(m.edit.employee):"----"),1)]),n("div",Ze,[et,n("div",tt,g(m.edit.employee.position?m.edit.employee.position:"-----"),1)])])]),_:1}),e(D,{inset:"",class:"q-mx-lg q-my-md"}),e(k,{class:"q-gutter-md row"},{default:t(()=>[n("div",at,[n("div",lt,[e(J,{"keep-color":"",modelValue:P.value,"onUpdate:modelValue":l[0]||(l[0]=a=>P.value=a),label:"T-Shirt",color:"deep-orange"},null,8,["modelValue"])]),P.value?(c(),f("div",st,[n("div",ot,[e(K,{modelValue:s.tShirtsize,"onUpdate:modelValue":l[1]||(l[1]=a=>s.tShirtsize=a),options:[{label:"18",value:"18"},{label:"S",value:"S"},{label:"M",value:"M"},{label:"L",value:"L"}],color:"deep-orange",type:"radio",dense:""},null,8,["modelValue"])]),n("div",nt,[e(w,{modelValue:s.tShirtPcs,"onUpdate:modelValue":l[2]||(l[2]=a=>s.tShirtPcs=a),label:"pcs",outlined:"",dense:"",style:{width:"100px"}},null,8,["modelValue"]),e(w,{modelValue:s.tShirtPrice,"onUpdate:modelValue":l[3]||(l[3]=a=>s.tShirtPrice=a),label:"price",outlined:"",dense:"",style:{width:"100px"}},null,8,["modelValue"])])])):L("",!0)]),n("div",it,[n("div",dt,[e(J,{"keep-color":"",modelValue:v.value,"onUpdate:modelValue":l[4]||(l[4]=a=>v.value=a),label:"Pants",color:"brown-6"},null,8,["modelValue"])]),v.value?(c(),f("div",rt,[n("div",ut,[e(K,{modelValue:s.pantsSize,"onUpdate:modelValue":l[5]||(l[5]=a=>s.pantsSize=a),options:[{label:"M",value:"M"},{label:"L",value:"L"},{label:"XL",value:"XL"},{label:"XXL",value:"XXL"}],color:"brown",type:"radio",dense:""},null,8,["modelValue"])]),n("div",mt,[e(w,{modelValue:s.pantsPcs,"onUpdate:modelValue":l[6]||(l[6]=a=>s.pantsPcs=a),label:"pcs",outlined:"",dense:"",style:{width:"100px"}},null,8,["modelValue"]),e(w,{modelValue:s.pantsPrice,"onUpdate:modelValue":l[7]||(l[7]=a=>s.pantsPrice=a),label:"price",outlined:"",dense:"",style:{width:"100px"}},null,8,["modelValue"])])])):L("",!0)])]),_:1}),e(k,{class:"q-ma-lg"},{default:t(()=>[n("div",ct,[n("div",pt,[e(w,{modelValue:s.numberOfPayments,"onUpdate:modelValue":l[8]||(l[8]=a=>s.numberOfPayments=a),label:"Number of Payments",type:"number",outlined:"",dense:""},null,8,["modelValue"])]),n("div",_t,[e(w,{modelValue:h.value,"onUpdate:modelValue":l[9]||(l[9]=a=>h.value=a),label:"Total Amount",outlined:"",dense:"",readonly:""},null,8,["modelValue"])]),n("div",ft,[e(w,{modelValue:z.value,"onUpdate:modelValue":l[10]||(l[10]=a=>z.value=a),label:"Per Payroll",outlined:"",dense:"",readonly:""},null,8,["modelValue"])])])]),_:1}),e(Y,{align:"right"},{default:t(()=>[e(F,{size:"md",padding:"xs md","no-caps":"",label:"Save Edit","icon-right":"send",class:"gradient-btn text-white",onClick:E,loading:y.value},null,8,["loading"])]),_:1}),e(de,{showing:y.value},{default:t(()=>[e(ie,{size:"50px",color:"primary"})]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"])],64))}};var gt=le(vt,[["__scopeId","data-v-2d3cfa48"]]);const yt={class:"text-subtitle1 text-primary text-weight-bold"},bt={key:1,class:"q-pa-md q-mb-md rounded-borders bg-grey-2 shadow-2"},ht={class:"text-subtitle1 text-primary text-weight-bold"},Pt={__name:"ViewUniformDetails",props:{modelValue:Boolean,items:Array,label:String},emits:["update:modelValue"],setup(m,{emit:Q}){const U=m,x=Q,S=X({get:()=>U.modelValue,set:y=>x("update:modelValue",y)});function q(){x("update:modelValue",!1)}return(y,b)=>(c(),M(Z,{modelValue:S.value,"onUpdate:modelValue":b[0]||(b[0]=s=>S.value=s),"backdrop-filter":"blur(6px) saturate(150%)"},{default:t(()=>[e(H,{style:{"max-width":"400px",width:"90vw"},class:"bg-transparent no-shadow"},{default:t(()=>[e(Y,{align:"right",class:"q-pa-sm"},{default:t(()=>[e(F,{flat:"",rounded:"",dense:"",icon:"close",onClick:q,class:"text-white"})]),_:1}),e(k,{class:"q-pa-md"},{default:t(()=>[m.items.length>0?(c(!0),f(j,{key:0},W(m.items,(s,P)=>(c(),f("div",{key:P,class:"q-pa-md q-mb-md rounded-borders bg-grey-2 shadow-2"},[n("div",yt,g(m.label),1),e(D,{spaced:"",color:"grey-4"}),e(A,{dense:""},{default:t(()=>[e(V,{avatar:""},{default:t(()=>[e(I,{name:"straighten",color:"blue-grey-7"})]),_:1}),e(V,null,{default:t(()=>[e($,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Size")]),_:1}),e($,{class:"text-weight-medium"},{default:t(()=>[p(g(s.size||"N/A"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(A,{dense:""},{default:t(()=>[e(V,{avatar:""},{default:t(()=>[e(I,{name:"inventory_2",color:"blue-grey-7"})]),_:1}),e(V,null,{default:t(()=>[e($,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Quantity")]),_:1}),e($,{class:"text-weight-medium"},{default:t(()=>[p(g(s.pcs||0)+" pcs",1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(A,{dense:""},{default:t(()=>[e(V,{avatar:""},{default:t(()=>[e(I,{name:"attach_money",color:"blue-grey-7"})]),_:1}),e(V,null,{default:t(()=>[e($,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Amount")]),_:1}),e($,{class:"text-weight-medium"},{default:t(()=>[p("\u20B1"+g(parseFloat(s.price).toFixed(2)||"0.00"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)):(c(),f("div",bt,[n("div",ht,g(m.label),1),e(D,{spaced:"",color:"grey-4"}),e(A,{dense:""},{default:t(()=>[e(V,{avatar:""},{default:t(()=>[e(I,{name:"straighten",color:"blue-grey-7"})]),_:1}),e(V,null,{default:t(()=>[e($,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Size")]),_:1}),e($,{class:"text-weight-medium"},{default:t(()=>[p("N/A")]),_:1})]),_:1})]),_:1}),e(A,{dense:""},{default:t(()=>[e(V,{avatar:""},{default:t(()=>[e(I,{name:"inventory_2",color:"blue-grey-7"})]),_:1}),e(V,null,{default:t(()=>[e($,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Quantity")]),_:1}),e($,{class:"text-weight-medium"},{default:t(()=>[p("0 pcs")]),_:1})]),_:1})]),_:1}),e(A,{dense:""},{default:t(()=>[e(V,{avatar:""},{default:t(()=>[e(I,{name:"attach_money",color:"blue-grey-7"})]),_:1}),e(V,null,{default:t(()=>[e($,{caption:"",class:"text-grey-7"},{default:t(()=>[p("Amount")]),_:1}),e($,{class:"text-weight-medium"},{default:t(()=>[p("\u20B10.00")]),_:1})]),_:1})]),_:1})]))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};const T=m=>(ee("data-v-4d12eb6a"),m=m(),te(),m),xt={class:"row justify-between q-mb-md",align:"right"},Vt={class:"row q-gutter-md"},wt={key:0,class:"text-green-8 text-bold q-px-sm q-py-xs rounded-borders",style:{"background-color":"#e0ffe0",border:"1px solid #a0f0a0"}},St={key:1},qt={key:0},$t={class:"q-mb-sm q-pb-sm"},Ut={class:"q-ml-sm"},zt={class:"q-my-none text-caption"},kt=T(()=>n("span",{class:"text-bold"},"Size:",-1)),Qt={class:"q-my-none text-caption"},Nt=T(()=>n("span",{class:"text-bold"},"Qty:",-1)),Lt={class:"q-my-none text-caption"},At=T(()=>n("span",{class:"text-bold"},"Price:",-1)),Ct={key:1},Ft={key:0},It={class:"q-ml-sm"},Tt={class:"q-my-none text-caption"},Ot=T(()=>n("span",{class:"text-bold"},"Size:",-1)),Et={class:"q-my-none text-caption"},Xt=T(()=>n("span",{class:"text-bold"},"Qty:",-1)),Mt={class:"q-my-none text-caption"},Bt=T(()=>n("span",{class:"text-bold"},"Price:",-1)),Rt={key:1},Dt={__name:"UniformTable",setup(m){const Q=ae(),U=_(""),x=X(()=>Q.uniforms),S=_([]),q=_(!1),y=_(!1),b=_({rowsPerPage:0,rowsPerPage:0,rowsNumber:0}),s=_(!1),P=_([]),v=_("");ve(async()=>{await h()});const h=async(o=1,l=7,a="")=>{try{q.value=!0,S.value=await Q.fetchUniform(o,l,a),console.log("uniform",S.value);const{data:u,current_page:r,per_page:d,total:N}=x.value;b.value.page=r,b.value.rowsPerPage=d,b.value.rowsNumber=N,S.value=u,console.log("uniformss",S.value)}catch(u){console.log("error fetching madepakeer",u)}finally{q.value=!1}},z=o=>{h(o.pagination.page,o.pagination.rowsPerPage,o.filter)};R(U,async o=>{y.value=!0,await h(b.value.page,b.value.rowsPerPage,o),y.value=!1});const C=o=>{const l=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",a=o.firstname?l(o.firstname):"No Firstname",u=o.middlename?l(o.middlename).charAt(0)+".":"",r=o.lastname?l(o.lastname):"No Lastname";return`${a} ${u} ${r}`.trim()},i=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(o),O=o=>{if(!o)return" - - ";const l=new Date(o);return isNaN(l.getTime())?" - - ":l.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},E=[{name:"date",required:!0,label:"Date",align:"left",field:o=>O(o.created_at)},{name:"name",required:!0,label:"Name",align:"left",field:o=>C(o.employee)},{name:"number_of_payments",required:!0,label:"Number of Payments",align:"center",field:"number_of_payments"},{name:"total_amount",required:!0,label:"Total Amount",align:"center",field:o=>i(o.total_amount)},{name:"payments_per_payroll",required:!0,label:"Payments Per Payroll",align:"center",field:o=>i(o.payments_per_payroll)},{name:"remaining_payments",required:!0,label:"Remaining Payments",align:"center",field:o=>o.remaining_payments==="0.00"?"Paid":i(o.remaining_payments)},{name:"t_shirt",label:"\u{1F455} T-Shirt",align:"center",field:"t_shirt"},{name:"pants",label:"\u{1F456} Pants",align:"center",field:"pants"},{name:"actions",label:"Actions",align:"center",field:"actions"}];return(o,l)=>(c(),M(fe,{class:"q-my-md"},{default:t(()=>[n("div",xt,[n("div",Vt,[e(Ke,{onCreated:h})]),e(he,{modelValue:U.value,"onUpdate:modelValue":[l[0]||(l[0]=a=>U.value=a),U.value]},null,8,["modelValue","onUpdate:modelValue"])]),e(pe,{filter:U.value,rows:S.value,columns:E,"row-key":"name",pagination:b.value,"onUpdate:pagination":l[1]||(l[1]=a=>b.value=a),"rows-per-page-options":[5,7,10,0],onRequest:z,loading:q.value},{header:t(a=>[e(_e,{props:a,class:"gradient-header text-white text-weight-bold"},{default:t(()=>[(c(!0),f(j,null,W(a.cols,u=>(c(),M(ce,{key:u.name,props:a,class:"text-center text-subtitle2"},{default:t(()=>[p(g(u.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell-remaining_payments":t(a=>[e(B,{props:a},{default:t(()=>[a.row.remaining_payments==="0.00"?(c(),f("span",wt," Paid ")):(c(),f("span",St,g(i(a.row.remaining_payments)),1))]),_:2},1032,["props"])]),"body-cell-t_shirt":t(a=>[e(B,{props:a},{default:t(()=>[a.row.t_shirt[0]?(c(),f("div",qt,[n("div",$t,[n("div",Ut,[n("p",zt,[kt,p(" "+g(a.row.t_shirt[0].size),1)]),n("p",Qt,[Nt,p(" "+g(a.row.t_shirt[0].pcs)+" pcs ",1)]),n("p",Lt,[At,p(" "+g(i(a.row.t_shirt[0].price)),1)])])])])):(c(),f("div",Ct,"\u{1F455} No Data"))]),_:2},1032,["props"])]),"body-cell-pants":t(a=>[e(B,{props:a},{default:t(()=>[a.row.pants[0]?(c(),f("div",Ft,[n("div",It,[n("p",Tt,[Ot,p(" "+g(a.row.pants[0].size),1)]),n("p",Et,[Xt,p(" "+g(a.row.pants[0].pcs)+" pcs ",1)]),n("p",Mt,[Bt,p(" "+g(i(a.row.pants[0].price)),1)])])])):(c(),f("div",Rt,"\u{1F456} No Data"))]),_:2},1032,["props"])]),"body-cell-actions":t(a=>[e(B,{props:a},{default:t(()=>[e(gt,{edit:a.row,onEdited:h},null,8,["edit"])]),_:2},1032,["props"])]),loading:t(()=>[e(de,{showing:""},{default:t(()=>[e(ie,{size:"50px",color:"grey-10"})]),_:1})]),_:1},8,["filter","rows","pagination","loading"]),e(Pt,{modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=a=>s.value=a),items:P.value,label:v.value},null,8,["modelValue","items","label"])]),_:1}))}};var va=le(Dt,[["__scopeId","data-v-4d12eb6a"]]);export{va as default};
