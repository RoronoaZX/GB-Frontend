import{d as p,N as a,P as i}from"./index.73558343.js";import{api as s}from"./axios.96348fde.js";const h=p("bakerReportsStore",{state:()=>({recipes:{},reportToView:[],reports:[],rawmaterials:[],employeeInShift:[],user:{}}),actions:{setRecipe(e){this.recipes=e},setReport(e){this.reports.push(e)},removeReport(e){this.reports.splice(e,1)},setUser(e){this.user=e},clearData(){this.recipes={},this.reports=[]},async fetchBranchRawMaterials(e){const t=await s.get(`/api/branch/${e}/rawMaterials`);this.rawmaterials=t.data},async fetchBakerReport(e,t,r){try{return(await s.get(`/api/branch/${e}/bakerReport`+window.location.search,{params:{page:t,per_page:r}})).data}catch(o){console.error("Error fetching baker reports:",o)}},async fetchAllReports(){const e=await s.get("/api/initial-baker-report");this.reportToView=e.data},async fetchDoughReports(e){const t=await s.get(`/api/branch/${e}/bakerDoughReport`);console.log("===================================="),console.log("response",t.data),console.log("===================================="),this.reports=t.data},async adminAddRecipebakerReport(e){console.log("data admin send RecipebakerReport adding ",e);try{const t=await s.post("/api/admin-create-admin-insert-recipe-baker-report",{reports:e});a.create({type:"positive",message:"Report successfully send",timeout:1e3})}catch(t){console.log(t)}},async adminBakerCreateReports(e){console.log("data admin send",e);try{console.log("data admin to send:",this.reports);const t=await s.post("/api/admin-create-baker-report",{reports:e});a.create({type:"positive",message:"Report successfully send",timeout:1e3}),this.reports=[]}catch(t){console.log(t)}},async createReports(){console.log("data to send:",this.reports),console.log("employeeInShift",this.employeeInShift),console.log("overallkilo:",this.overallKilo);try{console.log("data to send:",this.reports),i.show();const e=await s.post("/api/initial-baker-report",{reports:this.reports,employee_in_shift:this.employeeInShift,overall_kilo:this.overallKilo,total_employees:this.totalEmployeesInShift});a.create({type:"positive",message:"Report successfully send",timeout:1e3}),console.log("Reports to be saved reports:",this.reports),console.log("Reports to be saved employeeInShift:",this.employeeInShift),this.reports=[],this.employeeInShift=[],this.overallKilo=0,this.totalEmployeesInShift=0}catch(e){console.error("Error saving report:",e),a.create({type:"negative",message:e.response.data.message||"ERROR",timeout:1e3})}finally{i.hide()}},async confirmReport(e){try{const t=await s.post(`/api/confirm-initial-baker-report/${e}`);if(console.log("Confirming report with ID:",e),t.status===200){const r=this.reports.findIndex(o=>o.id===e);r!==-1&&this.reports.splice(r,1)}return t.data}catch(t){throw console.error("Error confirming report:",t),t}},async declineReport(e,t){try{const r=await s.post(`/api/decline-initial-baker-report/${e}`,{remark:t});if(r.status===200){const o=this.reports.findIndex(n=>n.id===e);o!==-1&&this.reports.splice(o,1)}return r.data}catch(r){console.error("Error declining report:",r)}}},getters:{overallKilo(e){return e.reports.reduce((t,r)=>{const o=parseFloat(r.kilo)||0;return t+o},0)},totalEmployeesInShift(e){return e.employeeInShift.length}}});export{h as u};
