import{d as i,r as _,c as g,N as v}from"./index.737f7d12.js";import{api as u}from"./axios.851ed218.js";i("payroll",()=>{const r=_(null),e=_([]);return{payroll:r,payrollPerCutOff:e,fetchPayrollPerCutOff:async o=>{console.log("employee ID in fetfching payrol:",o);try{const n=await u.get(`/api/fetch-payroll-cut-off/${o}`)}catch{}}}});const m=i("employee-incentives",()=>{const r=_(null),e=_([]);return{employeeIncentive:r,employeeIncentives:e,fetchEmployeeIncentives:async(o,n,p)=>{try{const l=await u.get(`/api/fetch-employee-incentives-per-cut-off/${o}/${n}/${p}`);console.log("\u2705 Response:",l.data),e.value=l.data}catch(l){console.error("\u274C API error:",l)}}}});const f=i("employee-charges",()=>{const r=_(null),e=_([]),y=g(()=>e.value.reduce((a,t)=>a+(parseFloat(t.charges_amount)||0),0));return{employeeCharge:r,employeeCharges:e,totalCharges:y,fetchEmployeeCharges:async a=>{try{console.log("Fetching charges for: ",a);const t=await u.get(`/api/employee-charges/${a.fromDate}/${a.toDate}/${a.employeeID}`);e.value=t.data||[],console.log("Charges loaded: ",e.value)}catch(t){console.error("Error fetching employee charges: ",t),e.value=[]}},updateChargeById:async a=>{try{const t=await u.put(`/api/employee-charges/${a.id}`,{charges_amount:a.charges_amount});if(console.log("Update response: ",t),t.status===200){const c=e.value.findIndex(s=>s.id===a.id);c!==-1&&(e.value[c]={...e.value[c],charges_amount:a.charges_amount},e.value=[...e.value])}else console.warn("Failed to update charge on serve:",t)}catch(t){console.error("Error updating charge: ",t)}},setCharges:a=>{e.value=a||[]},clearCharges:()=>{e.value=[],r.value=null}}});const C=i("payslips",()=>{const r=_(null),e=_([]);return{payslip:r,payslips:e,createPayslip:async(o,{showSuccess:n=!1}={})=>{var p,l,a,t,c;console.log("data payslip data",o);try{const s=await u.post("/api/payslip",o);return n&&((p=s.data)==null?void 0:p.message)==="Payslip saved successfully"&&v.create({type:"positive",message:"Payslip saved successfully!",timeout:3e3}),s.data}catch(s){throw console.log("payslipsss error",s),((a=(l=s.response)==null?void 0:l.data)==null?void 0:a.message)==="Payslip already exists"?v.create({type:"warning",message:"Duplicate payslip detected. A payslip with the same details already exists!",timeout:5e3}):v.create({type:"negative",message:`${((c=(t=s.response)==null?void 0:t.data)==null?void 0:c.message)||"Something went wrong"}!`,timeout:5e3}),s}}}});export{f as a,C as b,m as u};
