import{c as S,o as d,a3 as _,be as T,J as s,f as e,w as a,e as I,Q as Y,I as F,L as J,$ as c,M as U,a1 as K,a4 as N,a5 as A,O as ee,R as te,r as M,t as ne,u as H,a0 as p,K as G,bo as ie,N as re,z as de,H as ue}from"./index.2b1de70f.js";import{Q as ce}from"./QSpace.6f5be180.js";import{Q as le}from"./QExpansionItem.63458edd.js";import{Q as _e}from"./QVirtualScroll.b4dc0a33.js";import{u as z}from"./baker-report.3fd38dfa.js";import{_ as Z}from"./plugin-vue_export-helper.21dcd24c.js";import{b as P,a as D,Q as oe}from"./QSelect.e59e8e7e.js";import{a as L,b}from"./QMenu.f19a9477.js";import{Q as X}from"./QList.97526116.js";import{u as me}from"./branch-recipe.46cbbfb7.js";import{Q as pe}from"./QTooltip.12de2be0.js";import{Q as ve}from"./QSlideItem.a60b0802.js";import{u as he}from"./employee.78a98ba7.js";import{u as fe}from"./use-quasar.f993034f.js";import{u as ye}from"./incentive-bases.81c67ddc.js";import"./QSlideTransition.00651ffb.js";import"./use-virtual-scroll.62921bb6.js";import"./rtl.276c3f1b.js";import"./axios.11c08e85.js";import"./QChip.5f0d57bb.js";import"./selection.37bcf9b3.js";import"./position-engine.3ef59a57.js";import"./TouchPan.00007ba5.js";import"./touch.9135741d.js";import"./use-render-cache.3aae9b27.js";const O=f=>(ee("data-v-43e6479e"),f=f(),te(),f),ge={key:0,class:"text-h6 q-mb-md",align:"center"},be={key:1,class:"row wrap justify-center"},xe={class:"row justify-between q-gutter-x-md"},we={class:"row items-center"},ke={class:"text-subtitle1 q-ml-sm"},$e={class:"content-section"},Se={class:"q-mt-xs row justify-between"},qe=O(()=>s("div",null,"Kilo",-1)),Ce={class:"q-mt-xs row justify-between"},Ie=O(()=>s("div",null,"Short",-1)),Re={class:"q-mt-xs row justify-between"},Qe=O(()=>s("div",null,"Over",-1)),Ve={class:"q-mt-xs row justify-between"},Be=O(()=>s("div",null,"Actual Target",-1)),Le={class:"q-pl-md"},Fe={class:"row justify-between"},Ne={class:"q-pl-md"},Ae={class:"row justify-between"},Ee={key:2,class:"flex flex-center column q-pa-md",style:{"min-height":"250px"}},je=O(()=>s("div",{class:"text-h6 text-grey-7 q-mb-xs"},"No reports list",-1)),Te=O(()=>s("div",{class:"text-subtitle2 text-grey-6 text-center"}," Type a report to see it here ",-1)),De={__name:"ReportListComponent",setup(f){const x=z(),u=S(()=>x.reports);console.log("bakers report:",u.value);const q=v=>{x.removeReport(v)},i=v=>v?v.split(" ").map(w=>w.charAt(0).toUpperCase()+w.slice(1).toLowerCase()).join(" "):"";return(v,w)=>(d(),_(N,null,[u.value.length>0?(d(),_("div",ge," Report List ")):T("",!0),u.value.length>0?(d(),_("div",be,[s("div",null,[e(_e,{items:u.value,"scroll-target":"body","virtual-scroll-horizontal":"",class:"my-virtual-scroll"},{default:a(({item:t,index:y})=>[(d(),I(Y,{flat:"",bordered:"",class:"q-gutter-sm my-card",key:y},{default:a(()=>[e(F,null,{default:a(()=>[s("div",xe,[s("div",we,[e(J,{name:"assignment",color:"primary"}),s("div",ke,c(i(t.recipe_name))+" - "+c(t.recipe_category),1)]),s("div",null,[e(U,{flat:"",round:"",icon:"close",onClick:m=>q(y),class:"text-negative close-btn"},null,8,["onClick"])])])]),_:2},1024),e(K),e(F,null,{default:a(()=>[s("div",$e,[s("div",Se,[qe,s("div",null,c(t.kilo)+" kgs",1)]),s("div",Ce,[Ie,s("div",null,c(t.short)+" pcs",1)]),s("div",Re,[Qe,s("div",null,c(t.over)+" pcs",1)]),s("div",Ve,[Be,s("div",null,c(t.actual_target)+" pcs",1)]),(d(),I(le,{key:"breads-"+y,label:"Breads",dense:"",class:""},{default:a(()=>[s("ul",Le,[(d(!0),_(N,null,A(t.breads,(m,k)=>(d(),_("li",{key:"bread-"+k,class:"q-my-sm"},[s("div",Fe,[s("div",null,c(m.bread_name),1),s("div",null,c(m.bread_production),1)])]))),128))])]),_:2},1024)),(d(),I(le,{key:"ingredients-"+y,label:"Ingredients",dense:"",class:""},{default:a(()=>[s("ul",Ne,[(d(!0),_(N,null,A(t.ingredients,(m,k)=>(d(),_("li",{key:"ingredient-"+k,class:"q-my-sm"},[s("div",Ae,[s("div",null,c(m.code),1),s("div",null,c(m.quantity)+" "+c(m.unit),1)])]))),128))])]),_:2},1024))])]),_:2},1024)]),_:2},1024))]),_:1},8,["items"])])])):(d(),_("div",Ee,[e(J,{name:"sentiment_very_dissatisfied",color:"grey-5",size:"80px",class:"q-md-sm"}),je,Te]))],64))}};var Ue=Z(De,[["__scopeId","data-v-43e6479e"]]);const se=f=>(ee("data-v-987d3d80"),f=f(),te(),f),ze={class:"row justify-center"},Oe={class:"text-h6 q-ma-sm"},We={class:"row q-gutter-sm"},Pe={class:"row q-mt-sm q-gutter-sm"},Ke={class:"q-mb-md"},Me=se(()=>s("div",{class:"q-mt-sm"},"Kilo",-1)),He={class:"q-mt-md q-gutter-md"},Je={key:0},Ge=se(()=>s("div",{class:"q-mt-sm"},null,-1)),Xe=se(()=>s("div",{class:"text-h6 q-mt-sm",align:"center"},"Ingredients List",-1)),Ye={class:"q-mt-lg"},Ze={class:"ingredient-quantity"},et={class:"ingredient-quantity"},tt={__name:"ReportRecipeInputComponent",setup(f){const x=z(),u=S(()=>x.user);console.log("ersssssw:",u.value);const q=M(!1),i=S(()=>x.recipes);console.log("erwe:",i.value);const v=S(()=>{var l,r,h,C;const o=(r=(l=i.value)==null?void 0:l.name)!=null?r:"Recipe Name",n=(C=(h=i.value)==null?void 0:h.category)!=null?C:"Category";return`${o} - ${n}`}),w=o=>o?o.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",t=ne({user_id:null,branch_id:null,branch_recipe_id:null,recipe_name:"",recipe_category:"",kilo:0,short:0,over:0,target:0,actual_target:0,breads:[]}),y=()=>{var l;const o=parseFloat(t.kilo),n=parseFloat((l=i.value)==null?void 0:l.target);if(!isNaN(o)&&!isNaN(n)){const r=o*n;t.actual_target=Math.ceil(r)}else t.actual_target=0},m=()=>{const o=t.breads.reduce((l,r)=>l+(parseFloat(r.value)||0),0),n=t.actual_target;o===n?(t.short=0,t.over=0):o>n?(t.over=o-n,t.short=0):o<n&&(t.short=n-o,t.over=0)},k=()=>{var o,n;i.value="",v.value="",t.recipe_name="",t.kilo="",t.short=0,t.over=0,t.target=0,t.actual_target=0,t.breads=((n=(o=i.value)==null?void 0:o.bread_groups)==null?void 0:n.map(l=>({id:l.product_id,bread_name:l.bread_name,value:""})))||[]},R=()=>{console.log("Report datasss:",t),q.value=!0,setTimeout(async()=>{var o,n,l,r,h,C,W;try{t.user_id=((o=u.value)==null?void 0:o.data.id)||"",t.branch_id=((l=(n=u.value)==null?void 0:n.device)==null?void 0:l.reference_id)||"",t.branch_recipe_id=((r=i.value)==null?void 0:r.id)||"",t.recipe_name=((h=i.value)==null?void 0:h.name)||"",t.target=((C=i.value)==null?void 0:C.target)||"",t.recipe_category=((W=i.value)==null?void 0:W.category)||"";const j={user_id:t.user_id,branch_id:t.branch_id,branch_recipe_id:t.branch_recipe_id,recipe_name:t.recipe_name,recipe_category:t.recipe_category,status:"pending",kilo:t.kilo,short:t.short,over:t.over,target:t.target,actual_target:t.actual_target,breads:t.breads.map(Q=>({bread_id:Q.id,bread_name:Q.bread_name,bread_production:parseInt(Q.value,10)||0})),ingredients:E.value.map(Q=>({ingredients_id:Q.raw_materials_id,code:Q.code,quantity:Q.multipliedQuantity,unit:Q.unit}))};console.log("reportssss dATA:",j),x.setReport(j),console.log("Report data set to store:",x.reports),re.create({message:`${v.value} added to list`,type:"positive",position:"center",timeout:500}),k(),x.recipes={}}catch(j){console.error("Error generating report:",j)}finally{q.value=!1}},1e3)},E=S(()=>{var n;const o=parseFloat(t.kilo)||0;return(((n=i.value)==null?void 0:n.ingredients)||[]).map(l=>{const r=parseFloat(l.quantity)||0,h=o*r,C=h%1===0?h:parseFloat(h.toFixed(2));return{...l,multipliedQuantity:C}})});return H(()=>t.kilo,()=>{y(),m()}),H(()=>{var o;return(o=i.value)==null?void 0:o.ingredients},()=>{m()},{deep:!0}),H(()=>t.breads.map(o=>o.value),m,{deep:!0}),H(()=>{var o;return(o=i.value)==null?void 0:o.bread_groups},()=>{var o;t.breads=Array.isArray((o=i.value)==null?void 0:o.bread_groups)?i.value.bread_groups.map(n=>({id:n.product_id,bread_name:n.bread_name,value:""})):[],m()}),(o,n)=>{var l;return d(),_("div",ze,[s("div",null,[s("div",null,[s("div",Oe,c(w(v.value)),1)]),s("div",We,[s("div",null,[p(" Target Pcs "),s("div",null,[e(P,{readonly:"",outlined:"",type:"number",dense:"",label:((l=i.value)==null?void 0:l.target)||0,style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["label"])])]),s("div",null,[p(" Actual Target "),s("div",null,[e(P,{readonly:"",outlined:"",dense:"",label:t.actual_target,style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),s("div",Pe,[s("div",null,[p(" Short "),s("div",null,[e(P,{readonly:"",outlined:"",type:"number",dense:"",label:t.short,style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["label"])])]),s("div",null,[p(" Over "),s("div",null,[e(P,{readonly:"",outlined:"",dense:"",label:t.over,style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),s("div",Ke,[Me,s("div",null,[e(G,{outlined:"",dense:"",modelValue:t.kilo,"onUpdate:modelValue":n[0]||(n[0]=r=>t.kilo=r),type:"number",placeholder:"kgs",style:{width:"210px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])])]),s("div",He,[t.breads.length?(d(),_("div",Je,[(d(!0),_(N,null,A(t.breads,(r,h)=>(d(),_("div",{key:r.id,class:"q-my-md"},[s("div",null,[s("div",null,c(r.bread_name),1),s("div",null,[e(G,{outlined:"",modelValue:t.breads[h].value,"onUpdate:modelValue":C=>t.breads[h].value=C,dense:"",type:"number",placeholder:"Pcs",style:{width:"210px","max-width":"300px","min-width":"50px"}},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))])):T("",!0)]),Ge,e(U,{outline:"",dense:"",size:"md",icon:"add",label:"Report",class:"text-purple",loading:q.value,onClick:R},{isLoading:a(()=>[e(ie,{size:"20px"})]),_:1},8,["loading"])]),s("div",null,[Xe,s("div",Ye,[e(P,{readonly:"",outlined:"",style:{width:"400px","max-width":"450px","min-width":"100px"}},{control:a(()=>[e(X,{dense:"",separator:""},{default:a(()=>[(d(!0),_(N,null,A(E.value,(r,h)=>(d(),I(L,{key:h,class:"q-pa-xs justify-between"},{default:a(()=>[e(b,null,{default:a(()=>[e(D,{class:"ingredient-name"},{default:a(()=>[p(c(r.code),1)]),_:2},1024)]),_:2},1024),e(b,{side:"",class:"text-right"},{default:a(()=>[s("div",Ze,c(r.multipliedQuantity),1)]),_:2},1024),e(b,{side:"",class:"text-right"},{default:a(()=>[s("div",et,c(r.unit),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])}}};var st=Z(tt,[["__scopeId","data-v-987d3d80"]]);const at={key:0,class:"custom-list z-top"},lt={__name:"ReportSearchComponent",setup(f){var R,E;const x=z(),u=M(""),q=z(),i=me(),v=S(()=>q.user);console.log("erw:",v.value);const w=S(()=>i.branchRecipe),t=((E=(R=v.value)==null?void 0:R.device)==null?void 0:E.reference_id)||"";console.log("branch_id in serach  ",t);const y=async()=>{i.searchBranchRecipe(u.value,t),console.log("searchQuery.value",u.value),console.log("branch_id",t)},m=o=>{console.log("branch recipe",o),x.setRecipe(o),u.value=""},k=o=>o?o.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"";return console.log("recipessss",w.value),(o,n)=>(d(),I(G,{modelValue:u.value,"onUpdate:modelValue":[n[0]||(n[0]=l=>u.value=l),y],debounce:"1000",outlined:"",rounded:"",placeholder:"Search Recipe",dense:""},{append:a(()=>[s("div",null,[e(J,{name:"search"})])]),default:a(()=>[u.value?(d(),_("div",at,[e(Y,null,{default:a(()=>[e(X,{separator:""},{default:a(()=>{var l;return[(l=w.value)!=null&&l.length?(d(!0),_(N,{key:1},A(w.value,r=>(d(),I(L,{onClick:h=>m(r),key:r.id,clickable:""},{default:a(()=>[e(b,null,{default:a(()=>[e(D,null,{default:a(()=>[p(c(k(r==null?void 0:r.name)),1)]),_:2},1024)]),_:2},1024),e(b,null,{default:a(()=>[e(D,{side:""},{default:a(()=>[p(c(r==null?void 0:r.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(d(),I(L,{key:0},{default:a(()=>[p(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):T("",!0)]),_:1},8,["modelValue"]))}};var ot=Z(lt,[["__scopeId","data-v-480c0746"]]);const nt=f=>(ee("data-v-d5565544"),f=f(),te(),f),it={class:"q-pa-md bg-grey-1",style:{"min-height":"100vh"}},rt=nt(()=>s("div",{class:"text-h6 text-primary text-center"}," Employee with-in Shifts ",-1)),dt={class:"col-grow",style:{position:"relative"}},ut={key:0,class:"dropdown-list"},ct={__name:"EmployeeWithInShiftsComponent",setup(f){const x=he(),u=S(()=>x.employees),q=z(),i=S(()=>q.employeeInShift),v=ye(),w=S(()=>v.incentivesBases);console.log("incentivesBase",w.value);const t=S(()=>q.user);console.log("userData in EmployeeWithInShiftsComponent:",t.value);const y=M(""),m=M(!1),k=M(!1),R=fe();de(async()=>{await v.fetchIncentivesBases(),console.log("incentivesBase",w.value)});const o=["half day","whole day"],n=["Baker","Lamesador","Hornero"],l=ne({user_employee_id:t.value.data.employee_id,employee_id:"",employee_name:"",designation:"",shift_status:""}),r=async()=>{if(y.value.trim()){m.value=!0;try{await x.searchEmployee(y.value),m.value=!1,k.value=!0,console.log("employeess",u)}catch(g){console.error("Search failed:",g),R.notify({color:"negative",message:"Failed to fetch employees",icon:"report_problem"})}finally{m.value=!1,k.value=!0}}},h=S(()=>y.value&&u.value.length>0),C=g=>{l.employee_id=g.id,l.employee_name=`${g.firstname} ${g.middlename?g.middlename.charAt(0)+".":""} ${g.lastname}`,y.value=`${g.firstname} ${g.middlename?g.middlename.charAt(0)+".":""} ${g.lastname}`,k.value=!1},W=()=>{y.value="",k.value=!1,l.employee_id="",l.employee_name="",l.designation="",l.shift_status=""},j=()=>{if(console.log("Employee ID:",l.employee_id),console.log("Designation:",l.designation),console.log("Shift Status:",l.shift_status),!l.employee_id||!l.designation||!l.shift_status){R.notify({color:"orange-8",textColor:"white",icon:"warning",message:"Please fill in all before adding."}),console.warn("\u274C Missing data. Cannot add to list.");return}if(i.value.some(V=>V.employee_id===l.employee_id)){R.notify({color:"amber",textColor:"black",icon:"info",message:"This employee is already in the shift list."});return}i.value.push({...l}),R.notify({color:"positive",icon:"check_circle",message:`${l.employee_name} has been added to the shift.`}),W()},Q=g=>{const V=i.value[g].employee_name;i.value.splice(g,1),R.notify({color:"negative",message:`${V} has been removed from the list.`})};return(g,V)=>(d(),_("div",it,[e(Y,{class:"my-card"},{default:a(()=>[e(F,null,{default:a(()=>[rt]),_:1}),e(F,{class:"q-ma-sm q-gutter-md row items-center"},{default:a(()=>[s("div",dt,[e(G,{modelValue:y.value,"onUpdate:modelValue":[V[0]||(V[0]=$=>y.value=$),r],onClear:W,loading:m.value,label:"Search Employee",filled:"",clearable:"",debounce:"500",placeholder:"Enter employee name"},null,8,["modelValue","loading"]),h.value&&k.value?(d(),_("div",ut,[e(X,{separator:""},{default:a(()=>{var $;return[($=u.value)!=null&&$.length?T("",!0):(d(),I(L,{key:0},{default:a(()=>[e(b,{class:"text-grey-7"},{default:a(()=>[p(" No employee found. ")]),_:1})]),_:1})),(d(!0),_(N,null,A(u.value,B=>(d(),I(L,{key:B.id,clickable:"",onClick:ae=>C(B)},{default:a(()=>[e(b,null,{default:a(()=>[p(c(`${B.firstname} ${B.middlename?B.middlename.charAt(0)+".":""} ${B.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]}),_:1})])):T("",!0)]),e(oe,{modelValue:l.designation,"onUpdate:modelValue":V[1]||(V[1]=$=>l.designation=$),options:n,filled:"",label:"Designation",style:{width:"170px"},behavior:"menu"},null,8,["modelValue"]),e(oe,{modelValue:l.shift_status,"onUpdate:modelValue":V[2]||(V[2]=$=>l.shift_status=$),options:o,filled:"",label:"Shift status",style:{width:"130px"},behavior:"menu"},null,8,["modelValue"]),e(U,{rounded:"",label:"Add to list","icon-right":"add_circle_outline",color:"primary",onClick:j,class:"q-px-lg"})]),_:1}),e(K,{class:"q-mx-md q-mt-md"}),e(F,null,{default:a(()=>[e(X,{separator:"",class:"q-mt-sm"},{default:a(()=>[e(L,{class:"text-bold text-uppercase text-grey-7"},{default:a(()=>[e(b,null,{default:a(()=>[p("Name")]),_:1}),e(b,null,{default:a(()=>[p("Designation")]),_:1}),e(b,null,{default:a(()=>[p("Shift status")]),_:1}),e(b,{side:""},{default:a(()=>[p("Action")]),_:1})]),_:1}),i.value.length===0?(d(),I(L,{key:0,class:"text-italic text-grey-6 text-center"},{default:a(()=>[e(b,null,{default:a(()=>[p("No employees added to shift.")]),_:1})]),_:1})):T("",!0),(d(!0),_(N,null,A(i.value,($,B)=>(d(),I(ve,{key:$.employee_id,"right-color":"negative",onRight:ae=>Q(B)},{right:a(()=>[e(J,{name:"delete"})]),default:a(()=>[e(L,{class:"list-item"},{default:a(()=>[e(b,null,{default:a(()=>[e(D,{class:"text-bold"},{default:a(()=>[p(c($.employee_name),1)]),_:2},1024)]),_:2},1024),e(b,null,{default:a(()=>[e(D,null,{default:a(()=>[p(c($.designation),1)]),_:2},1024)]),_:2},1024),e(b,null,{default:a(()=>[e(D,null,{default:a(()=>[p(c($.shift_status),1)]),_:2},1024)]),_:2},1024),e(b,{side:""},{default:a(()=>[e(U,{flat:"",round:"",icon:"close",color:"red",size:"sm",onClick:ae=>i.value.splice(B,1)},{default:a(()=>[e(pe,null,{default:a(()=>[p("Remove from list")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onRight"]))),128))]),_:1})]),_:1})]),_:1})]))}};var _t=Z(ct,[["__scopeId","data-v-d5565544"]]);const mt={class:"text-h6 text-dark row justify-between"},pt=s("div",null,"Bakers Report",-1),vt={class:"q-gutter-y-md"},ht={class:"q-gutter-y-md"},ft={align:"right",class:"q-mt-md"},Ot={__name:"ReportIdCreatePage",setup(f){const x=ue(),u=z(),q=S(()=>u.recipes);console.log("report",q);const i=()=>{u.clearData(),x.push("/branch/baker/report")},v=async()=>{u.createReports()};return(w,t)=>(d(),_("div",null,[e(Y,{flat:""},{default:a(()=>[e(F,null,{default:a(()=>[s("div",mt,[s("div",null,[e(U,{outline:"",flat:"",icon:"arrow_back",onClick:i})]),e(ce),pt])]),_:1}),e(F,null,{default:a(()=>[s("div",null,[e(ot)]),s("div",vt,[s("div",null,[e(st)])])]),_:1}),e(K),e(F,null,{default:a(()=>[s("div",ht,[s("div",null,[e(Ue)])])]),_:1}),e(K),e(_t),e(K),s("div",ft,[e(U,{outlined:"",color:"red-6",icon:"edit",label:"Create",onClick:v})])]),_:1})]))}};export{Ot as default};
