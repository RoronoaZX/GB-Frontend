import{d as ae,r as m,c as H,z as J,u as Ve,o as U,a3 as A,J as i,f as e,w as l,K as v,a0 as q,$ as F,bf as k,bb as L,M as T,Q as I,ae as R,bh as Ee,a2 as te,a4 as O,t as ne,L as X,I as C,aJ as se,O as ie,R as de,N as Z,e as N,bc as ye,a5 as fe,bd as ge}from"./index.fe067f2a.js";import{Q as W}from"./QTooltip.03cefe2c.js";import{Q as G}from"./QPopupEdit.5cd76643.js";import{Q as K,a as De}from"./QTable.31271360.js";import{Q as Ue}from"./QBadge.1b005443.js";import{Q as M}from"./QSelect.b3dc2a83.js";import{Q as Se}from"./QSpinnerIos.e0d12448.js";import{Q as qe}from"./QInnerLoading.3d7974a4.js";import{C as B}from"./ClosePopup.535e35c9.js";import{f as oe,u as ke,g as $e,a as Te,c as ce,b as Pe,d as Ce,e as Ae,h as Ie,i as Ne}from"./useEmployeeFunctions.905396fb.js";import{u as le}from"./employee.16936fe6.js";import{api as ue}from"./axios.1553f882.js";import{_ as Qe}from"./GB_LOGO.b766a815.js";import{p as he,v as Fe}from"./vfs_fontes.6ee410e6.js";import{_ as Y}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as re}from"./QSpace.199bd831.js";import{u as _e}from"./branch.a0c0a3ce.js";import{Q as ee,a as ve}from"./QItem.4191fc7f.js";import{Q as we}from"./QList.f8b1e54e.js";import{u as Re}from"./warehouse.ea75fa37.js";import"./position-engine.76939301.js";import"./selection.60979bf6.js";import"./QMenu.87272370.js";import"./QVirtualScroll.e1fb70b9.js";import"./use-virtual-scroll.4ffd47fc.js";import"./rtl.276c3f1b.js";import"./QItemLabel.aaa5cfce.js";import"./QChip.0aa5c09d.js";import"./date.f00045d0.js";const be=ae("employmentType",()=>{const y=m(null);return{employmentType:y,fetchEmploymentType:async()=>{const x=await ue.get("/api/employment-types");y.value=x.data,console.log("Employementresponse",x.data)}}});var Be="/assets/IDLogo.76e564fd.png";he.exports.vfs=Fe;function ze(y,f){const x=m(!1),E=m(""),h=g=>{_(y,V=>{_(f,p=>{const b=w(g,V,p);he.exports.createPdf(b).getDataUrl(u=>{E.value=u,x.value=!0})})})},_=(g,V)=>{const p=new FileReader,b=new XMLHttpRequest;b.open("GET",g,!0),b.responseType="blob",b.onload=function(){b.status===200?(p.readAsDataURL(b.response),p.onloadend=function(){V(p.result)}):console.error("Failed to load image.")},b.send()},w=(g,V,p)=>({pageSize:{width:323,height:204},pageMargins:[0,0,0,0],background:[{image:p,width:140,opacity:.1,absolutePosition:{x:70,y:15}}],content:[{canvas:[{type:"rect",x:0,y:0,w:260,h:150,lineWidth:1,lineColor:"black",dash:{length:4}}],absolutePosition:{x:0,y:0}},{alignment:"justify",columns:[{image:V,width:100,height:153,alignment:"left",margin:[-8,-4,0,0]},{stack:[{text:"GB Bakeshop",style:"header",color:"red",margin:[0,0,50,0]},{text:`Name  : ${oe(g)}`,style:"name"},{text:`Position : ${g.position}`,style:"position"},{text:`Phone  : ${g.phone}`,style:"info"},{qr:`${g.id} - ${oe(g)} - ${g.position}`,fit:87,foreground:"red",background:"yellow",margin:[30,7,0,0]}]}]}],styles:{header:{fontSize:15,bold:!0,alignment:"center"},name:{fontSize:8,bold:!0,margin:[5,1,0,0]},position:{fontSize:8,margin:[5,2,0,0]},info:{fontSize:7,margin:[5,2,0,0]},address:{fontSize:7,margin:[0,5,0,0]}}});return{dialog:x,pdfUrl:E,handlePrintID:h}}const Le={style:{width:"100%"}},We={class:"text-subtitle2"},Ke={class:"row q-gutter-md"},Me={class:"row justify-center q-gutter-x-md"},Oe={class:"text-white q-ma-sm",align:"right"},je=["src"],Ge={__name:"TableSection",setup(y){const{dialog:f,pdfUrl:x,handlePrintID:E}=ze(Be,Qe),h=be(),_=m([]),w=le(),g=H(()=>w.employees),V=m([]),p=m({page:1,rowsPerPage:0,rowsNumber:0}),b=m(""),u=m(!1);console.log("employees fetch madepaker",g.value),J(async()=>{await c()}),J(async()=>{await h.fetchEmploymentType(),_.value=h.employmentType.map(D=>({label:D.category,value:D.id})),console.log("Employment Type Options:",_.value)});const P=m(null),$=D=>{var o;P.value=((o=D.employment_type)==null?void 0:o.id)||null,console.log("Initial employmentTypeId:",P.value)};console.log("===================================="),console.log("employmentTypeIdsss",P.value),console.log("====================================");const c=async(D=0,o=5,d="")=>{try{u.value=!0,g.value=await w.fetchEmployeeWithEmploymentType(D,o,d),console.log("fetchEmployeeWithEmploymentType",g.value);const{data:s,current_page:t,per_page:a,total:r}=g.value;V.value=s,console.log("employeesRowsData.value",V.value),p.value.page=t,console.log("pagination.value.page",p.value.page),p.value.rowsPerPage=a,console.log("pagination.value.rowsPerPage",p.value.rowsPerPage),p.value.rowsNumber=r,console.log("pagination.value.rowsNumber",p.value.rowsNumber)}catch(s){console.log("employee madepaker",s)}finally{u.value=!1}},n=D=>{console.log("porps",D),c(D.pagination.page,D.pagination.rowsPerPage,D.filter)};return Ve(b,async D=>{await c(p.value.page,p.value.rowsPerPage,D)}),(D,o)=>(U(),A(O,null,[i("div",Le,[e(De,{class:"user-card",title:"Employees",rows:V.value,columns:k(Ne),"row-key":"fullname",pagination:p.value,"onUpdate:pagination":o[2]||(o[2]=d=>p.value=d),"rows-per-page-options":[5,7,10,0],loading:u.value,filter:b.value,onRequest:n},{"top-right":l(()=>[e(v,{modelValue:b.value,"onUpdate:modelValue":o[0]||(o[0]=d=>b.value=d),outlined:"",dense:"",flat:"",label:"Search",debounce:"300",style:{width:"300px"}},null,8,["modelValue"])]),"body-cell-fullname":l(d=>[e(K,{key:"fullname",props:d},{default:l(()=>[i("div",We,[q(F(k(oe)(d.row))+" ",1),e(W,{class:"bg-blue-grey-8",offset:[10,10]},{default:l(()=>[q(" Edit Employee Name ")]),_:1})]),e(G,{modelValue:d.row,"onUpdate:modelValue":[s=>d.row=s,s=>k(ke)(d.row,s)],buttons:"",title:"Edit Employee Full Name"},{default:l(({value:s,set:t})=>[i("div",Ke,[e(v,{class:"text-capitalize",modelValue:s.firstname,"onUpdate:modelValue":a=>s.firstname=a,label:"First Name",outlined:"",flat:"",color:"positive",dense:"",autofucos:"",onKeyup:L(a=>t(s),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),e(v,{class:"text-capitalize",modelValue:s.middlename,"onUpdate:modelValue":a=>s.middlename=a,label:"Middle Name",outlined:"",flat:"",color:"positive",dense:"",autofucos:"",onKeyup:L(a=>t(s),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),e(v,{class:"text-capitalize",modelValue:s.lastname,"onUpdate:modelValue":a=>s.lastname=a,label:"Last Name",outlined:"",flat:"",color:"positive",dense:"",autofucos:"",onKeyup:L(a=>t(s),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-employmentType":l(d=>[e(K,{props:d},{default:l(()=>{var s;return[e(Ue,{color:k($e)((s=d.row.employment_type)==null?void 0:s.category)},{default:l(()=>{var t;return[q(F(((t=d.row.employment_type)==null?void 0:t.category)||"N/A")+" ",1),e(W,{class:"bg-blue-grey-8",offset:[10,10]},{default:l(()=>[q(" Edit Employment Type ")]),_:1})]}),_:2},1032,["color"]),e(G,{modelValue:P.value,"onUpdate:modelValue":o[1]||(o[1]=t=>P.value=t),onBeforeShow:()=>$(d.row),onSave:t=>k(Te)(d.row,t),buttons:"",title:"Edit Employment Type"},{default:l(t=>[e(M,{modelValue:t.value,"onUpdate:modelValue":[a=>t.value=a,P.value],dense:"",autofocus:"",options:_.value,"option-label":"label","option-value":"value",behavior:"menu"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1032,["modelValue","onBeforeShow","onSave"])]}),_:2},1032,["props"])]),"body-cell-address":l(d=>[e(K,{props:d,style:{"text-align":"justify"}},{default:l(()=>[i("div",null,[q(F(k(ce)(d.row.address))+" ",1),e(W,{class:"bg-blue-grey-8",offset:[10,10]},{default:l(()=>[q(" Edit Address ")]),_:1})]),e(G,{"onUpdate:modelValue":[s=>k(Pe)(d.row,s),s=>d.row.address=s],modelValue:d.row.address,buttons:"",title:"Edit Address"},{default:l(s=>[e(v,{class:"text-capitalize",modelValue:s.value,"onUpdate:modelValue":t=>s.value=t,dense:"",autofocus:"",counter:"",onKeyup:L(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-phone":l(d=>[e(K,{props:d},{default:l(()=>[i("div",null,[q(F(k(ce)(d.row.phone))+" ",1),e(W,{class:"bg-blue-grey-8",offset:[10,10]},{default:l(()=>[q(" Edit Phone ")]),_:1})]),e(G,{"onUpdate:modelValue":[s=>k(Ce)(d.row,s),s=>d.row.phone=s],modelValue:d.row.phone,buttons:"",title:"Edit Phone"},{default:l(s=>[e(v,{modelValue:s.value,"onUpdate:modelValue":t=>s.value=t,dense:"",autofocus:"",mask:"+(63) ### - ### - ####",counter:"",onKeyup:L(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-birthdate":l(d=>[e(K,{props:d},{default:l(()=>[i("div",null,[q(F(k(Ae)(d.row.birthdate))+" ",1),e(W,{class:"bg-blue-grey-8",offset:[10,10]},{default:l(()=>[q(" Edit Birthdate ")]),_:1})]),e(G,{"onUpdate:modelValue":[s=>k(Ie)(d.row,s),s=>d.row.birthdate=s],modelValue:d.row.birthdate,buttons:"",title:"Edit Birthdate"},{default:l(s=>[e(v,{modelValue:s.value,"onUpdate:modelValue":t=>s.value=t,dense:"",autofocus:"",type:"date",hint:"mm/dd/yyyy",onKeyup:L(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-actions":l(d=>[e(K,{props:d},{default:l(()=>[i("div",Me,[e(T,{round:"",dense:"",size:"md",color:"black",icon:"print",flat:"",onClick:s=>k(E)(d.row)},{default:l(()=>[e(W,{class:"bg-black",delay:200},{default:l(()=>[q(" Print ")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),loading:l(()=>[e(qe,{showing:""},{default:l(()=>[e(Se,{size:"50px",color:"grey-10"})]),_:1})]),_:1},8,["rows","columns","pagination","loading","filter"])]),e(te,{modelValue:k(f),"onUpdate:modelValue":o[3]||(o[3]=d=>Ee(f)?f.value=d:null),persistent:""},{default:l(()=>[e(I,{class:"bg-gradient",style:{width:"700px","max-width":"80vw"}},{default:l(()=>[i("div",Oe,[R(e(T,{icon:"close",flat:"",dense:"",round:""},null,512),[[B]])]),i("div",null,[i("iframe",{src:k(x),width:"100%",height:"700px"},null,8,je)])]),_:1})]),_:1},8,["modelValue"])],64))}};var He=Y(Ge,[["__scopeId","data-v-5f9e5672"]]);const xe=y=>(ie("data-v-8756ce02"),y=y(),de(),y),Je={class:"q-mb-md text-center"},Xe=xe(()=>i("div",{class:"text-center"},[i("div",{class:"text-h6"},"Add Employee")],-1)),Ye=xe(()=>i("div",{class:"text-h5 q-mr-md"},"\u{1F468}\u200D\u{1F4BC}\u{1F469}\u200D\u{1F4BC} Add New Employee",-1)),Ze={class:"q-gutter-y-sm"},et={class:"q-gutter-y-sm q-mx-auto"},tt={class:"row q-gutter-x-sm item-start"},lt={class:"row q-gutter-x-sm"},ot={__name:"RegisterEmployee",setup(y){const f=le(),x=m(!1),E=m(!1),h=()=>{x.value=!0};_e();const _=be(),w=["Super Admin","Admin","Supervisor","Scaler","Lamesador","Hornero","Baker","Cake Maker","Cashier","Sales Clerk","Utility","Not Yet Assigned"],g=["Male","Female"],V=m([]),p=m([]);m([]),m(V.value),J(async()=>{await _.fetchEmploymentType(),p.value=_.employmentType.map($=>({label:$.category,value:$.id}))});const u=ne({firstname:"",middlename:"",lastname:"",address:"",birthdate:"",sex:"",phone:"",position:"",employment_type:""}),z=async()=>{E.value=!0;const $={...u,employment_type_id:u.employment_type.value,status:"Active"};console.log("employee",$),await f.createEmployee($),E.value=!1,P(),x.value=!1},P=()=>{u.firstname="",u.middlename="",u.lastname="",u.address="",u.birthdate="",u.sex="",u.phone="",u.position="",u.employment_type=""};return($,c)=>(U(),A(O,null,[e(I,{class:"q-pa-md user-card",onClick:h},{default:l(()=>[i("div",Je,[e(X,{name:"person_add",size:"70px",color:"yellow-7"})]),Xe]),_:1}),e(te,{modelValue:x.value,"onUpdate:modelValue":c[9]||(c[9]=n=>x.value=n),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:l(()=>[e(I,{style:{width:"500px","max-width":"120vw"}},{default:l(()=>[e(C,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:l(()=>[Ye,e(re),R(e(T,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[B]])]),_:1}),e(C,null,{default:l(()=>[i("div",Ze,[i("div",et,[e(v,{class:"text-capitalize",modelValue:u.firstname,"onUpdate:modelValue":c[0]||(c[0]=n=>u.firstname=n),outlined:"",dense:"",label:"First Name",rules:[n=>n&&n.length>0||"Required"]},null,8,["modelValue","rules"]),e(v,{class:"text-capitalize",modelValue:u.middlename,"onUpdate:modelValue":c[1]||(c[1]=n=>u.middlename=n),outlined:"",dense:"",label:"Middle Name",rules:[n=>n&&n.length>0||"Required"]},null,8,["modelValue","rules"]),e(v,{class:"text-capitalize",modelValue:u.lastname,"onUpdate:modelValue":c[2]||(c[2]=n=>u.lastname=n),outlined:"",dense:"",label:"Last Name",rules:[n=>n&&n.length>0||"Required"]},null,8,["modelValue","rules"]),e(v,{class:"text-capitalize",modelValue:u.address,"onUpdate:modelValue":c[3]||(c[3]=n=>u.address=n),outlined:"",dense:"",label:"Address",rules:[n=>n&&n.length>0||"Required"]},null,8,["modelValue","rules"])]),i("div",tt,[i("div",null,[e(v,{modelValue:u.birthdate,"onUpdate:modelValue":c[4]||(c[4]=n=>u.birthdate=n),outlined:"",dense:"",label:"Birthdate",type:"date",style:{width:"230px"},rules:[n=>n&&n.length>0||"Required"]},null,8,["modelValue","rules"])]),i("div",null,[e(v,{modelValue:u.phone,"onUpdate:modelValue":c[5]||(c[5]=n=>u.phone=n),outlined:"",dense:"",label:"Phone Number",mask:"+(63) ### - ### - ####",placeholder:"(+63) ### - ### - ####",rules:[n=>n&&n.length>0||"Required"],style:{width:"230px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","rules"])])]),i("div",lt,[i("div",null,[e(M,{modelValue:u.sex,"onUpdate:modelValue":c[6]||(c[6]=n=>u.sex=n),dense:"",outlined:"",label:"Sex",options:g,rules:[n=>n&&n.length>0||"Required"],style:{width:"120px"},behavior:"menu","hide-dropdown-icon":""},null,8,["modelValue","rules"])]),i("div",null,[e(M,{modelValue:u.position,"onUpdate:modelValue":c[7]||(c[7]=n=>u.position=n),outlined:"",dense:"","hide-dropdown-icon":"",label:"Position",options:w,rules:[n=>n&&n.length>0||"Required"],behavior:"menu",style:{width:"175px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","rules"])]),i("div",null,[e(M,{modelValue:u.employment_type,"onUpdate:modelValue":c[8]||(c[8]=n=>u.employment_type=n),outlined:"",dense:"","hide-dropdown-icon":"",label:"Employment Type",options:p.value,behavior:"menu",style:{width:"155px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","options"])])])])]),_:1}),e(se,{class:"row q-px-lg q-py-sm q-pt-none",align:"left"},{default:l(()=>[R(e(T,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[B]]),e(T,{class:"glossy",color:"teal",label:"Add",icon:"add",onClick:z,loading:E.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var at=Y(ot,[["__scopeId","data-v-8756ce02"]]);const nt=ae("designations",()=>{const y=m(null),f=m([]);return{designation:y,designations:f,createDesignation:async E=>{try{const h=await ue.post("/api/branchEmployee",E);h&&h.data?(f.value.unshift(h.data),Z.create({type:"positive",message:"Employee created successfully",setTimeout:1e3,position:"top"})):console.error("Unexpected API Response:",h)}catch(h){console.error("Error creating employee:",h),Z.create({type:"negative",message:"Failed to create employeesss",setTimeout:1e3})}}}});const me=y=>(ie("data-v-e0249b88"),y=y(),de(),y),st={class:"q-mb-md text-center"},it=me(()=>i("div",{class:"text-center"},[i("div",{class:"text-subtitle1 text-weight-medium"},"Branch Designations")],-1)),dt=me(()=>i("div",{class:"text-h5 q-mr-md"},"\u{1F468}\u200D\u{1F4BC}\u{1F469}\u200D\u{1F4BC} Branch Designation",-1)),ut={key:0,class:"custom-list z-top"},rt={class:"row q-gutter-md"},mt=me(()=>i("div",{class:"q-my-md"},"Designation",-1)),pt={class:"row q-gutter-x-md"},ct={__name:"BranchDesignationEmployee",setup(y){H(()=>{const t=window.innerWidth;return t>1200?"500px":t>768?"80vw":"95vw"});const f=m(!1),x=nt(),E=le(),h=_e(),_=m([]);m([]);const w=m(""),g=m(_.value),V=m(!1),p=m(!1),b=H(()=>E.employee),u=async()=>{w.value.trim()&&(p.value=!0,await E.searchCertainEmployee(w.value),p.value=!1)},z=t=>/^(0[1-9]|1[0-2]):[0-5][0-9] (AM|PM)$/i.test(t)||"Invalid time format";J(async()=>{await h.fetchBranches(),_.value=h.branches.map(t=>({label:t.name,value:t.id})),g.value=_.value});const $=(t,a)=>{a(()=>{const r=t.toLowerCase();g.value=t===""?_.value:_.value.filter(S=>S.label.toLowerCase().includes(r))})},c=t=>{console.log("Selected Employee:",t),o.employee_id=t.id,o.employee_name=n(t),o.position=t.position,w.value="",console.log("Filled Designation Data:",o)},n=t=>{const a=Q=>Q?Q.charAt(0).toUpperCase()+Q.slice(1).toLowerCase():"",r=t.firstname?a(t.firstname):"No Firstname",S=t.middlename?a(t.middlename).charAt(0)+".":"",j=t.lastname?a(t.lastname):"No Lastname";return`${r} ${S} ${j}`},D=()=>{f.value=!0},o=ne({employee_id:"",employee_name:"",position:"",branch_name:"",time_shift:""}),d=()=>{o.employee_id="",o.employee_name="",o.position="",o.branch_name="",o.time_shift=""},s=async()=>{V.value=!0;const t={...o,branch_id:o.branch_name.value};await x.createDesignation(t),console.log("Designation Data to Save:",t),V.value=!1,d(),f.value=!1};return(t,a)=>(U(),A(O,null,[e(I,{class:"q-pa-md user-card",onClick:D,align:"center"},{default:l(()=>[i("div",st,[e(X,{name:"add_business",size:"20px",color:"red-7"})]),it]),_:1}),e(te,{modelValue:f.value,"onUpdate:modelValue":a[5]||(a[5]=r=>f.value=r),"backdrop-filter":"blur(4px) saturate(150%)",position:"right"},{default:l(()=>[e(I,{style:{width:"800px","max-width":"100vw"}},{default:l(()=>[e(C,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:l(()=>[dt,e(re),R(e(T,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[B]])]),_:1}),e(C,null,{default:l(()=>[i("div",null,[e(v,{modelValue:w.value,"onUpdate:modelValue":[a[0]||(a[0]=r=>w.value=r),u],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name or position"},{append:l(()=>[p.value?(U(),N(ye,{key:1,color:"grey",size:"sm"})):(U(),N(X,{key:0,name:"search"}))]),default:l(()=>[w.value?(U(),A("div",ut,[e(I,null,{default:l(()=>[e(we,{separator:""},{default:l(()=>{var r;return[(r=b.value)!=null&&r.length?(U(!0),A(O,{key:1},fe(b.value,S=>(U(),N(ee,{onClick:j=>c(S),key:S.id,clickable:""},{default:l(()=>[e(ve,null,{default:l(()=>[q(F(n(S)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(U(),N(ee,{key:0},{default:l(()=>[q(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):ge("",!0)]),_:1},8,["modelValue"])])]),_:1}),e(C,null,{default:l(()=>[i("div",rt,[e(v,{outlined:"",readonly:"",dense:"",label:"Full Name",modelValue:o.employee_name,"onUpdate:modelValue":a[1]||(a[1]=r=>o.employee_name=r),style:{width:"300px"}},null,8,["modelValue"]),e(v,{outlined:"",readonly:"",dense:"",label:"Position",modelValue:o.position,"onUpdate:modelValue":a[2]||(a[2]=r=>o.position=r),style:{width:"150px"}},null,8,["modelValue"])])]),_:1}),e(C,null,{default:l(()=>[mt,i("div",pt,[i("div",null,[e(M,{modelValue:o.branch_name,"onUpdate:modelValue":a[3]||(a[3]=r=>o.branch_name=r),outlined:"",flat:"",dense:"","use-input":"",clearable:"","input-debounce":"0",options:g.value,label:"Branch",onFilter:$,"hide-dropdown-icon":"",behavior:"menu",style:{width:"250px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","options"])]),i("div",null,[e(v,{modelValue:o.time_shift,"onUpdate:modelValue":a[4]||(a[4]=r=>o.time_shift=r),outlined:"",flat:"",dense:"",mask:"##:## AA",label:"Time Schedule",rules:z,hint:"Format: 01:00 AM/PM",style:{width:"200px","max-width":"500px","min-width":"100px"},"hide-dropdown-icon":""},null,8,["modelValue"])])])]),_:1}),e(se,{class:"row q-px-lg q-py-sm q-pt-none",align:"left"},{default:l(()=>[R(e(T,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[B]]),e(T,{class:"glossy",color:"teal",label:"Add",onClick:s,loading:V.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var yt=Y(ct,[["__scopeId","data-v-e0249b88"]]);const ft=ae("warehouseEmployee",()=>{const y=m(null),f=m([]);return{warehouseEmployee:y,warehouseEmployees:f,createWarehouseEmployee:async E=>{try{const h=await ue.post("/api/warehouse-employee",E);f.value=h.data,Z.create({type:"positive",message:"Employee created successfully",setTimeout:1e3,position:"top"}),console.log("Response:",h.data)}catch(h){console.error("Error creating employee:",h),Z.create({type:"negative",message:"Failed to create employeesss",setTimeout:1e3})}}}});const pe=y=>(ie("data-v-2e2929c2"),y=y(),de(),y),gt={class:"q-mb-md text-center"},ht=pe(()=>i("div",{class:"text-center"},[i("div",{class:"text-subtitle1 text-weight-medium"}," Warehouse Designations ")],-1)),_t=pe(()=>i("div",{class:"text-h5 q-mr-md"},"\u{1F468}\u200D\u{1F4BC}\u{1F469}\u200D\u{1F4BC} Add Employee Designation",-1)),vt={key:0,class:"custom-list z-top"},wt={class:"row q-gutter-md"},bt=pe(()=>i("div",{class:"q-my-md"},"Designation",-1)),xt={class:"row q-gutter-x-md"},Vt={__name:"WarehouseDesignationEmployee",setup(y){H(()=>{const t=window.innerWidth;return t>1200?"500px":t>768?"80vw":"95vw"});const f=m(!1),x=ft(),E=le(),h=Re(),_=m([]);m([]);const w=m(""),g=m(_.value),V=m(!1),p=m(!1),b=H(()=>E.employee),u=async()=>{w.value.trim()&&(p.value=!0,await E.searchCertainEmployee(w.value),p.value=!1)},z=t=>/^(0[1-9]|1[0-2]):[0-5][0-9] (AM|PM)$/i.test(t)||"Invalid time format";J(async()=>{await h.fetchWarehouses(),_.value=h.warehouses.map(t=>({label:t.name,value:t.id})),g.value=_.value});const $=(t,a)=>{a(()=>{const r=t.toLowerCase();g.value=t===""?_.value:_.value.filter(S=>S.label.toLowerCase().includes(r))})},c=t=>{console.log("Selected Employee:",t),o.employee_id=t.id,o.employee_name=n(t),o.position=t.position,w.value="",console.log("Filled Designation Data:",o)},n=t=>{const a=Q=>Q?Q.charAt(0).toUpperCase()+Q.slice(1).toLowerCase():"",r=t.firstname?a(t.firstname):"No Firstname",S=t.middlename?a(t.middlename).charAt(0)+".":"",j=t.lastname?a(t.lastname):"No Lastname";return`${r} ${S} ${j}`},D=()=>{f.value=!0},o=ne({employee_id:"",employee_name:"",position:"",warehouse_name:"",time_shift:""}),d=()=>{o.employee_id="",o.employee_name="",o.position="",o.warehouse_name="",o.time_shift=""},s=async()=>{V.value=!0;const t={...o,warehouse_id:o.warehouse_name.value};await x.createWarehouseEmployee(t),console.log("Designation Data to Save:",t),V.value=!1,d(),f.value=!1};return(t,a)=>(U(),A(O,null,[e(I,{class:"q-pa-md user-card",onClick:D,align:"center"},{default:l(()=>[i("div",gt,[e(X,{name:"factory",size:"20px",color:`blue-grey-6\r
`})]),ht]),_:1}),e(te,{modelValue:f.value,"onUpdate:modelValue":a[5]||(a[5]=r=>f.value=r),"backdrop-filter":"blur(4px) saturate(150%)",position:"right"},{default:l(()=>[e(I,{style:{width:"600px","max-width":"100vw"}},{default:l(()=>[e(C,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:l(()=>[_t,e(re),R(e(T,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[B]])]),_:1}),e(C,null,{default:l(()=>[i("div",null,[e(v,{modelValue:w.value,"onUpdate:modelValue":[a[0]||(a[0]=r=>w.value=r),u],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name or position"},{append:l(()=>[p.value?(U(),N(ye,{key:1,color:"grey",size:"sm"})):(U(),N(X,{key:0,name:"search"}))]),default:l(()=>[w.value?(U(),A("div",vt,[e(I,null,{default:l(()=>[e(we,{separator:""},{default:l(()=>{var r;return[(r=b.value)!=null&&r.length?(U(!0),A(O,{key:1},fe(b.value,S=>(U(),N(ee,{onClick:j=>c(S),key:S.id,clickable:""},{default:l(()=>[e(ve,null,{default:l(()=>[q(F(n(S)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(U(),N(ee,{key:0},{default:l(()=>[q(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):ge("",!0)]),_:1},8,["modelValue"])])]),_:1}),e(C,null,{default:l(()=>[i("div",wt,[e(v,{outlined:"",readonly:"",dense:"",label:"Full Name",modelValue:o.employee_name,"onUpdate:modelValue":a[1]||(a[1]=r=>o.employee_name=r),style:{width:"300px"}},null,8,["modelValue"]),e(v,{outlined:"",readonly:"",dense:"",label:"Position",modelValue:o.position,"onUpdate:modelValue":a[2]||(a[2]=r=>o.position=r),style:{width:"150px"}},null,8,["modelValue"])])]),_:1}),e(C,null,{default:l(()=>[bt,i("div",xt,[i("div",null,[e(M,{modelValue:o.warehouse_name,"onUpdate:modelValue":a[3]||(a[3]=r=>o.warehouse_name=r),outlined:"",flat:"",dense:"","use-input":"",clearable:"","input-debounce":"0",options:g.value,label:"Warehouse",onFilter:$,"hide-dropdown-icon":"",behavior:"menu",style:{width:"250px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","options"])]),i("div",null,[e(v,{modelValue:o.time_shift,"onUpdate:modelValue":a[4]||(a[4]=r=>o.time_shift=r),outlined:"",flat:"",dense:"",mask:"##:## AA",label:"Time Schedule",rules:z,hint:"Format: 01:00 AM/PM",style:{width:"200px","max-width":"500px","min-width":"100px"},"hide-dropdown-icon":""},null,8,["modelValue"])])])]),_:1}),e(se,{class:"row q-px-lg q-py-sm q-pt-none",align:"left"},{default:l(()=>[R(e(T,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[B]]),e(T,{class:"glossy",color:"teal",label:"Add",onClick:s,loading:V.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Et=Y(Vt,[["__scopeId","data-v-2e2929c2"]]);const Dt={class:"row justify-between"},Ut={class:"col-12 col-md-9 col-lg-9 q-pa-sm"},St={class:"col-12 col-md-3 col-lg-3 q-gutter-y-md q-pa-sm card-side"},qt={class:"row2"},kt={__name:"EmployeesPage",setup(y){return(f,x)=>(U(),A("div",Dt,[i("div",Ut,[e(He)]),i("div",St,[e(at),i("div",qt,[e(yt),e(Et)])])]))}};var nl=Y(kt,[["__scopeId","data-v-71812045"]]);export{nl as default};
