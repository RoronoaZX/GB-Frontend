import{h as W,z as ie,o as p,c as C,w as a,e,I as F,J as t,_ as z,a0 as fe,Q as O,O as oe,R as ne,a2 as U,a3 as K,r as h,L as H,bb as me,K as q,d as Ve,$ as B,ba as Ee,M,ad as ae,a1 as he,t as we,aI as xe,N as re,a4 as ye,bc as de,be as lt,Z as nt,u as Be,b5 as ot,bn as be,aJ as Ue}from"./index.6d6c5126.js";import{a as ue,Q as je,c as ce,b as Qe}from"./QTabPanels.9bc819a5.js";import{Q as yt}from"./QPage.dcaa442f.js";import{u as pe}from"./employee.d7bd95cb.js";import{_ as X}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as st}from"./QVirtualScroll.f2b37730.js";import{u as He}from"./branch.4fc95f96.js";import{u as ht}from"./warehouse.e76ecc77.js";import{Q as ve}from"./QTooltip.51814056.js";import{Q as Te}from"./QPopupEdit.40629d2e.js";import{Q as J}from"./QTd.ff4103ba.js";import{Q as _e}from"./QBadge.21b0c684.js";import{Q as ze}from"./QSelect.1f0082a7.js";import{Q as ke}from"./QTable.1a880a00.js";import{C as le}from"./ClosePopup.111d3f28.js";import{q as Ce}from"./date.c48ce0e4.js";import{u as gt}from"./use-quasar.f220daf8.js";import{api as G}from"./axios.40292506.js";import{_ as bt}from"./GB_LOGO.b766a815.js";import{Q as $e}from"./QSpace.a9a4f1b3.js";import{p as Fe,v as it}from"./vfs_fontes.3eb8cb31.js";import{Q as te,a as Se}from"./QItem.3bd9e38f.js";import{Q as De}from"./QList.3a7cac99.js";import{Q as Me}from"./QChip.73cc47c9.js";import{Q as wt}from"./QIntersection.de9a6b52.js";import"./QResizeObserver.08444ea8.js";import"./rtl.4979ba33.js";import"./use-panel.2ca85b05.js";import"./touch.9135741d.js";import"./selection.10fc1e0e.js";import"./use-virtual-scroll.d6ec0b6b.js";import"./QMenu.ee11008d.js";const Ne=y=>(oe("data-v-187f8741"),y=y(),ne(),y),xt={class:"col q-pa-md"},$t=Ne(()=>t("div",{class:"text-h6"},"Total Employee",-1)),Vt=Ne(()=>t("div",{class:"text-caption text-grey-6"},"Total Number Of Employees",-1)),kt={class:"text-h3 text-primary q-my-sm"},St=Ne(()=>t("div",{class:"text-caption text-grey-7"},"Employees",-1)),Dt=Ne(()=>t("div",{class:"col q-pa-md"},[t("div",{class:"text-h6"},"Salary Per Month"),t("div",{class:"text-caption text-grey-6"}," Current Total Salary Per Month "),t("div",{class:"text-h3 text-positive q-my-sm"},"\u20B1 52,962"),t("div",{class:"text-caption text-grey-7"},"PHP")],-1)),At=Ne(()=>t("div",{class:"col q-pa-md"},[t("div",{class:"text-h6"},"Benefits Fund"),t("div",{class:"text-caption text-grey-6"},"For all Employees Per Month"),t("div",{class:"text-h3 text-warning q-my-sm"},"\u20B1 200,123"),t("div",{class:"text-caption text-grey-7"},"PHP")],-1)),qt={__name:"TotalEmployeeSalaryBenefits",setup(y){const d=pe(),v=W(()=>d.employees);ie(async()=>{await c()});const c=async()=>{try{v.value=await d.fetchAllEmployee()}catch(b){console.log("error fetching employee: ",b)}};return(b,n)=>(p(),C(O,{class:"q-pa-md q-mb-md q-mt-sm text-center user-card"},{default:a(()=>[e(F,{horizontal:""},{default:a(()=>[t("div",xt,[$t,Vt,t("div",kt,z(v.value.length),1),St]),e(fe,{vertical:""}),Dt,e(fe,{vertical:""}),At]),_:1})]),_:1}))}};var Et=X(qt,[["__scopeId","data-v-187f8741"]]);const Pt=y=>(oe("data-v-109cadaa"),y=y(),ne(),y),Ut={class:"row justify-between"},Tt=Pt(()=>t("div",{class:"text-h6"},"Branch Employee",-1)),Ct={class:"text-caption text-grey-6"},zt={class:"text-subtitle2"},Nt={class:"text-h6 text-grey-6"},It={__name:"BranchEmployeeCard",setup(y){const d=He(),v=W(()=>d.branches);console.log("branchWithEmploye",v.value),ie(async()=>{await c()});const c=async()=>{try{v.value=await d.fetchBranchWithEmployee(),console.log("branches",v.value)}catch(b){console.log("error fetching branch: ",b)}};return(b,n)=>(p(),C(O,{class:"user-card",style:{height:"300px"}},{default:a(()=>[e(F,null,{default:a(()=>[t("div",Ut,[t("div",null,[Tt,t("div",Ct," Total Number of Branch : "+z(v.value.length),1)])])]),_:1}),e(F,null,{default:a(()=>[e(st,{items:v.value,"scroll-target":"body","virtual-scroll-horizontal":"",class:"my-virtual-scroll",align:"center"},{default:a(({item:o,index:r})=>[(p(),C(O,{flat:"",bordered:"",dense:"",key:r,class:"my-card"},{default:a(()=>[e(F,{class:"bg-grey-2"},{default:a(()=>[t("div",zt,z(o.name),1)]),_:2},1024),e(fe),e(F,null,{default:a(()=>{var _;return[t("div",Nt,z((_=o==null?void 0:o.branch_employee)==null?void 0:_.length),1)]}),_:2},1024)]),_:2},1024))]),_:1},8,["items"])]),_:1})]),_:1}))}};var Rt=X(It,[["__scopeId","data-v-109cadaa"]]);const Bt=y=>(oe("data-v-207a294b"),y=y(),ne(),y),Ft={class:"row justify-between"},Mt=Bt(()=>t("div",{class:"text-h6"},"Warehouse Employee",-1)),Lt={class:"text-caption text-grey-6"},Ot={class:"text-subtitle2"},jt={class:"text-h6 text-grey-6"},Qt={__name:"WarehouseEmployeCard",setup(y){const d=ht(),v=W(()=>d.warehouses);ie(async()=>{await c()});const c=async()=>{try{v.value=await d.fetchWarehouseWithEmployee(),console.log("warehouses",v.value)}catch(b){console.log("error fetching recipe: ",b)}};return(b,n)=>(p(),C(O,{class:"user-card",style:{height:"300px"}},{default:a(()=>[e(F,null,{default:a(()=>[t("div",Ft,[t("div",null,[Mt,t("div",Lt," Total Number of Warehouse : "+z(v.value.length),1)])])]),_:1}),e(F,null,{default:a(()=>[e(st,{items:v.value,"scroll-target":"body","virtual-scroll-horizontal":"",class:"my-virtual-scroll"},{default:a(({item:o,index:r})=>[(p(),C(O,{flat:"",bordered:"",dense:"",key:r,class:"my-card",style:{display:"inline-block",width:"auto"},align:"center"},{default:a(()=>[e(F,{class:"bg-grey-2"},{default:a(()=>[t("div",Ot,z(o.name),1)]),_:2},1024),e(fe),e(F,null,{default:a(()=>{var _;return[t("div",jt,z((_=o==null?void 0:o.warehouse_employee)==null?void 0:_.length),1)]}),_:2},1024)]),_:2},1024))]),_:1},8,["items"])]),_:1})]),_:1}))}};var Ht=X(Qt,[["__scopeId","data-v-207a294b"]]);const Kt={class:"row justify-between"},Wt={class:"col-6 q-pr-sm"},Yt={class:"col-6 q-pl-sm"},Xt={__name:"DashboardPage",setup(y){return(d,v)=>(p(),U(K,null,[e(Et),t("div",Kt,[t("div",Wt,[e(Rt)]),t("div",Yt,[e(Ht)])])],64))}},Jt={__name:"SearchEmployee",setup(y){const d=pe(),v=h(""),c=h(!1),b=async()=>{c.value=!0,await d.searchEmployee(v.value),c.value=!1};return(n,o)=>(p(),U("div",null,[e(q,{modelValue:v.value,"onUpdate:modelValue":[o[0]||(o[0]=r=>v.value=r),b],outlined:"",dense:"",flat:"",label:"Search",debounce:"1000",style:{width:"300px"}},{append:a(()=>[t("div",null,[c.value?(p(),C(me,{key:1,color:"grey",size:"sm"})):(p(),C(H,{key:0,name:"search"}))])]),_:1},8,["modelValue"])]))}},rt=Ve("employmentType",()=>{const y=h(null);return{employmentType:y,fetchEmploymentType:async()=>{const v=await G.get("/api/employment-types");y.value=v.data,console.log("Employementresponse",v.data)}}});var Gt="/assets/IDLogo.76e564fd.png";const Zt={style:{width:"100%"}},ea={class:"text-subtitle2"},ta={class:"row q-gutter-md"},aa={class:"row justify-center q-gutter-x-md"},la={class:"text-white q-ma-sm",align:"right"},oa=["src"],na={__name:"TableSection",setup(y){Fe.exports.vfs=it;const d=rt(),v=h([]),c=pe(),b=W(()=>c.employees),n=h({rowsPerPage:0});console.log("employees fetch madepaker",b.value),ie(async()=>{await i()}),ie(async()=>{await d.fetchEmploymentType(),v.value=d.employmentType.map(k=>({label:k.category,value:k.id})),console.log("Employment Type Options:",v.value)});const r=h(null),_=k=>{var N;r.value=((N=k.employment_type)==null?void 0:N.id)||null,console.log("Initial employmentTypeId:",r.value)};console.log("===================================="),console.log("employmentTypeIdsss",r.value),console.log("====================================");const i=async()=>{try{b.value=await c.fetchEmployeeWithEmploymentType(),console.log("fetchEmployeeWithEmploymentType",b.value)}catch(k){console.log("employee madepaker",k)}},w=k=>Ce.formatDate(k,"MMMM DD, YYYY"),$=k=>{const N=ee=>ee?ee.charAt(0).toUpperCase()+ee.slice(1).toLowerCase():"",E=k.firstname?N(k.firstname):"No Firstname",T=k.middlename?N(k.middlename).charAt(0)+".":"",Q=k.lastname?N(k.lastname):"No Lastname";return`${E} ${T} ${Q}`},g=k=>k?k.split(" ").map(N=>N.charAt(0).toUpperCase()+N.slice(1).toLowerCase()).join(" "):"",D=async(k,N)=>{console.log("data",k),console.log("val",N);const E={id:k.id,firstname:N.firstname||k.firstname,middlename:N.middlename||k.middlename,lastname:N.lastname||k.lastname};await c.updateEmployeeFullname(E)},V=async(k,N)=>{console.log("updateEmploymentType triggered"),console.log("row",k),console.log("New employment type ID:",N);const E={id:k.id,employment_type_id:N.value};await c.updateEmployeeEmploymentType(E)},m=async(k,N)=>{console.log("data",k),console.log("val",N);const E={id:k.id,address:N};await c.updateEmployeeAddress(E)},l=async(k,N)=>{console.log("data",k),console.log("val",N);const E={id:k.id,phone:N};await c.updateEmployeePhone(E)},u=async(k,N)=>{console.log("data",k),console.log("val",N);const E={id:k.id,birthdate:N};await c.updateEmployeebirthdate(E)},f=[{name:"fullname",required:!0,label:"Full Name",align:"center",field:k=>$(k),format:k=>`${k}`,sortable:!0},{name:"employmentType",label:"Employment Type",align:"center",field:k=>k.employment_type?k.employment_type.category:"N/A",format:k=>`${k}`},{name:"address",required:!0,label:"Address",align:"center",field:"address",sortable:!0},{name:"phone",required:!0,label:"Phone",align:"center",field:"phone",format:k=>`${k}`,sortable:!0},{name:"birthdate",required:!0,label:"Birthdate",align:"center",field:"birthdate",format:k=>w(k),sortable:!0},{name:"actions",align:"center",label:"Action",field:"actions"}];gt();const s=h(!1),L=h(""),P=k=>{x(Gt,N=>{x(bt,E=>{const T=S(k,N,E);Fe.exports.createPdf(T).getDataUrl(Q=>{L.value=Q,s.value=!0})})})},x=(k,N)=>{const E=new FileReader,T=new XMLHttpRequest;T.open("GET",k,!0),T.responseType="blob",T.onload=function(){T.status===200?(E.readAsDataURL(T.response),E.onloadend=function(){N(E.result)}):console.error("Failed to load image.")},T.send()},S=(k,N,E)=>({pageSize:{width:323,height:204},pageMargins:[0,0,0,0],background:[{image:E,width:140,opacity:.1,absolutePosition:{x:70,y:15}}],content:[{canvas:[{type:"rect",x:0,y:0,w:260,h:150,lineWidth:1,lineColor:"black",dash:{length:4}}],absolutePosition:{x:0,y:0}},{alignment:"justify",columns:[{image:N,width:100,height:153,alignment:"left",margin:[-8,-4,0,0]},{stack:[{text:"GB Bakeshop",style:"header",color:"red",margin:[0,0,50,0]},{text:`Name  : ${$(k)}`,style:"name"},{text:`Position : ${k.position}`,style:"position"},{text:`Phone  : ${k.phone}`,style:"info"},{qr:`${k.id.toString()} - ${$(k)} - ${k.position}`,fit:87,foreground:"red",background:"yellow",margin:[30,7,0,0]}]}]}],styles:{header:{fontSize:15,bold:!0,alignment:"center"},name:{fontSize:8,bold:!0,margin:[5,1,0,0]},position:{fontSize:8,margin:[5,2,0,0]},info:{fontSize:7,margin:[5,2,0,0]},address:{fontSize:7,margin:[0,5,0,0]}}}),j=k=>{switch(k){case"Regular":return"blue-8";case"Trainee":return"orange-5";case"Part-time":return"teal-5";default:return"grey"}};return(k,N)=>(p(),U(K,null,[t("div",Zt,[e(ke,{title:"Employees",rows:b.value,columns:f,"row-key":"fullname","hide-bottom":"",pagination:n.value,"onUpdate:pagination":N[1]||(N[1]=E=>n.value=E),class:"custom-table",style:{"max-width":"100%",height:"460px"}},{"top-right":a(()=>[e(Jt)]),"body-cell-fullname":a(E=>[e(J,{key:"fullname",props:E},{default:a(()=>[t("div",ea,[B(z($(E.row))+" ",1),e(ve,{class:"bg-blue-grey-8",offset:[10,10]},{default:a(()=>[B(" Edit Employee Name ")]),_:1})]),e(Te,{modelValue:E.row,"onUpdate:modelValue":[T=>E.row=T,T=>D(E.row,T)],buttons:"",title:"Edit Employee Full Name"},{default:a(({value:T,set:Q})=>[t("div",ta,[e(q,{class:"text-capitalize",modelValue:T.firstname,"onUpdate:modelValue":ee=>T.firstname=ee,label:"First Name",outlined:"",flat:"",color:"positive",dense:"",autofucos:"",onKeyup:Ee(ee=>Q(T),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),e(q,{class:"text-capitalize",modelValue:T.middlename,"onUpdate:modelValue":ee=>T.middlename=ee,label:"Middle Name",outlined:"",flat:"",color:"positive",dense:"",autofucos:"",onKeyup:Ee(ee=>Q(T),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),e(q,{class:"text-capitalize",modelValue:T.lastname,"onUpdate:modelValue":ee=>T.lastname=ee,label:"Last Name",outlined:"",flat:"",color:"positive",dense:"",autofucos:"",onKeyup:Ee(ee=>Q(T),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-employmentType":a(E=>[e(J,{props:E},{default:a(()=>{var T;return[e(_e,{color:j((T=E.row.employment_type)==null?void 0:T.category)},{default:a(()=>{var Q;return[B(z(((Q=E.row.employment_type)==null?void 0:Q.category)||"N/A")+" ",1),e(ve,{class:"bg-blue-grey-8",offset:[10,10]},{default:a(()=>[B(" Edit Employment Type ")]),_:1})]}),_:2},1032,["color"]),e(Te,{modelValue:r.value,"onUpdate:modelValue":N[0]||(N[0]=Q=>r.value=Q),onBeforeShow:()=>_(E.row),onSave:Q=>V(E.row,Q),buttons:"",title:"Edit Employment Type"},{default:a(Q=>[e(ze,{modelValue:Q.value,"onUpdate:modelValue":[ee=>Q.value=ee,r.value],dense:"",autofocus:"",options:v.value,"option-label":"label","option-value":"value",behavior:"menu"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1032,["modelValue","onBeforeShow","onSave"])]}),_:2},1032,["props"])]),"body-cell-address":a(E=>[e(J,{props:E},{default:a(()=>[t("div",null,[B(z(g(E.row.address))+" ",1),e(ve,{class:"bg-blue-grey-8",offset:[10,10]},{default:a(()=>[B(" Edit Address ")]),_:1})]),e(Te,{"onUpdate:modelValue":[T=>m(E.row,T),T=>E.row.address=T],modelValue:E.row.address,buttons:"",title:"Edit Address"},{default:a(T=>[e(q,{class:"text-capitalize",modelValue:T.value,"onUpdate:modelValue":Q=>T.value=Q,dense:"",autofocus:"",counter:"",onKeyup:Ee(T.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-phone":a(E=>[e(J,{props:E},{default:a(()=>[t("div",null,[B(z(g(E.row.phone))+" ",1),e(ve,{class:"bg-blue-grey-8",offset:[10,10]},{default:a(()=>[B(" Edit Phone ")]),_:1})]),e(Te,{"onUpdate:modelValue":[T=>l(E.row,T),T=>E.row.phone=T],modelValue:E.row.phone,buttons:"",title:"Edit Phone"},{default:a(T=>[e(q,{modelValue:T.value,"onUpdate:modelValue":Q=>T.value=Q,dense:"",autofocus:"",mask:"+(63) ### - ### - ####",counter:"",onKeyup:Ee(T.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-birthdate":a(E=>[e(J,{props:E},{default:a(()=>[t("div",null,[B(z(w(E.row.birthdate))+" ",1),e(ve,{class:"bg-blue-grey-8",offset:[10,10]},{default:a(()=>[B(" Edit Birthdate ")]),_:1})]),e(Te,{"onUpdate:modelValue":[T=>u(E.row,T),T=>E.row.birthdate=T],modelValue:E.row.birthdate,buttons:"",title:"Edit Birthdate"},{default:a(T=>[e(q,{modelValue:T.value,"onUpdate:modelValue":Q=>T.value=Q,dense:"",autofocus:"",type:"date",hint:"mm/dd/yyyy",onKeyup:Ee(T.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-actions":a(E=>[e(J,{props:E},{default:a(()=>[t("div",aa,[e(M,{round:"",dense:"",size:"md",color:"black",icon:"print",flat:"",onClick:T=>P(E.row)},{default:a(()=>[e(ve,{class:"bg-black",delay:200},{default:a(()=>[B(" Print ")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])]),e(he,{modelValue:s.value,"onUpdate:modelValue":N[2]||(N[2]=E=>s.value=E),persistent:""},{default:a(()=>[e(O,{class:"bg-gradient",style:{width:"700px","max-width":"80vw"}},{default:a(()=>[t("div",la,[ae(e(M,{icon:"close",flat:"",dense:"",round:""},null,512),[[le]])]),t("div",null,[t("iframe",{src:L.value,width:"100%",height:"700px"},null,8,oa)])]),_:1})]),_:1},8,["modelValue"])],64))}};var sa=X(na,[["__scopeId","data-v-70a69339"]]);const dt=y=>(oe("data-v-14c4e08f"),y=y(),ne(),y),ia={class:"q-mb-md text-center"},ra=dt(()=>t("div",{class:"text-center"},[t("div",{class:"text-h6"},"Add Employee")],-1)),da=dt(()=>t("div",{class:"text-h5 q-mr-md"},"\u{1F468}\u200D\u{1F4BC}\u{1F469}\u200D\u{1F4BC} Add New Employee",-1)),ua={class:"q-gutter-y-sm"},ca={class:"q-gutter-y-sm q-mx-auto"},ma={class:"row q-gutter-x-sm item-start"},pa={class:"row q-gutter-x-sm"},_a={__name:"RegisterEmployee",setup(y){const d=pe(),v=h(!1),c=h(!1),b=()=>{v.value=!0};He();const n=rt(),o=["Super Admin","Admin","Supervisor","Scaler","Lamesador","Hornero","Baker","Cake Maker","Cashier","Sales Clerk","Utility","Not Yet Assigned"],r=["Male","Female"],_=h([]),i=h([]);h([]),h(_.value),ie(async()=>{await n.fetchEmploymentType(),i.value=n.employmentType.map(V=>({label:V.category,value:V.id}))});const $=we({firstname:"",middlename:"",lastname:"",address:"",birthdate:"",sex:"",phone:"",position:"",employment_type:""}),g=async()=>{c.value=!0;const V={...$,employment_type_id:$.employment_type.value};console.log("employee",V),await d.createEmployee(V),c.value=!1,D(),v.value=!1},D=()=>{$.firstname="",$.middlename="",$.lastname="",$.address="",$.birthdate="",$.sex="",$.phone="",$.position="",$.employment_type=""};return(V,m)=>(p(),U(K,null,[e(O,{class:"q-pa-md user-card",onClick:b},{default:a(()=>[t("div",ia,[e(H,{name:"person_add",size:"70px",color:"yellow-7"})]),ra]),_:1}),e(he,{modelValue:v.value,"onUpdate:modelValue":m[9]||(m[9]=l=>v.value=l),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:a(()=>[e(O,{style:{width:"500px","max-width":"120vw"}},{default:a(()=>[e(F,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:a(()=>[da,e($e),ae(e(M,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(F,null,{default:a(()=>[t("div",ua,[t("div",ca,[e(q,{class:"text-capitalize",modelValue:$.firstname,"onUpdate:modelValue":m[0]||(m[0]=l=>$.firstname=l),outlined:"",dense:"",label:"First Name",rules:[l=>l&&l.length>0||"Required"]},null,8,["modelValue","rules"]),e(q,{class:"text-capitalize",modelValue:$.middlename,"onUpdate:modelValue":m[1]||(m[1]=l=>$.middlename=l),outlined:"",dense:"",label:"Middle Name",rules:[l=>l&&l.length>0||"Required"]},null,8,["modelValue","rules"]),e(q,{class:"text-capitalize",modelValue:$.lastname,"onUpdate:modelValue":m[2]||(m[2]=l=>$.lastname=l),outlined:"",dense:"",label:"Last Name",rules:[l=>l&&l.length>0||"Required"]},null,8,["modelValue","rules"]),e(q,{class:"text-capitalize",modelValue:$.address,"onUpdate:modelValue":m[3]||(m[3]=l=>$.address=l),outlined:"",dense:"",label:"Address",rules:[l=>l&&l.length>0||"Required"]},null,8,["modelValue","rules"])]),t("div",ma,[t("div",null,[e(q,{modelValue:$.birthdate,"onUpdate:modelValue":m[4]||(m[4]=l=>$.birthdate=l),outlined:"",dense:"",label:"Birthdate",type:"date",style:{width:"230px"},rules:[l=>l&&l.length>0||"Required"]},null,8,["modelValue","rules"])]),t("div",null,[e(q,{modelValue:$.phone,"onUpdate:modelValue":m[5]||(m[5]=l=>$.phone=l),outlined:"",dense:"",label:"Phone Number",mask:"+(63) ### - ### - ####",placeholder:"(+63) ### - ### - ####",rules:[l=>l&&l.length>0||"Required"],style:{width:"230px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","rules"])])]),t("div",pa,[t("div",null,[e(ze,{modelValue:$.sex,"onUpdate:modelValue":m[6]||(m[6]=l=>$.sex=l),dense:"",outlined:"",label:"Sex",options:r,rules:[l=>l&&l.length>0||"Required"],style:{width:"120px"},behavior:"menu","hide-dropdown-icon":""},null,8,["modelValue","rules"])]),t("div",null,[e(ze,{modelValue:$.position,"onUpdate:modelValue":m[7]||(m[7]=l=>$.position=l),outlined:"",dense:"","hide-dropdown-icon":"",label:"Position",options:o,rules:[l=>l&&l.length>0||"Required"],behavior:"menu",style:{width:"175px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","rules"])]),t("div",null,[e(ze,{modelValue:$.employment_type,"onUpdate:modelValue":m[8]||(m[8]=l=>$.employment_type=l),outlined:"",dense:"","hide-dropdown-icon":"",label:"Employment Type",options:i.value,behavior:"menu",style:{width:"155px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","options"])])])])]),_:1}),e(xe,{class:"row q-px-lg q-py-sm q-pt-none",align:"left"},{default:a(()=>[ae(e(M,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[le]]),e(M,{class:"glossy",color:"teal",label:"Add",icon:"add",onClick:g,loading:c.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var va=X(_a,[["__scopeId","data-v-14c4e08f"]]);const fa=Ve("designations",()=>{const y=h(null),d=h([]);return{designation:y,designations:d,createDesignation:async c=>{try{const b=await G.post("/api/branchEmployee",c);b&&b.data?(d.value.unshift(b.data),re.create({type:"positive",message:"Employee created successfully",setTimeout:1e3,position:"top"})):console.error("Unexpected API Response:",b)}catch(b){console.error("Error creating employee:",b),re.create({type:"negative",message:"Failed to create employeesss",setTimeout:1e3})}}}});const Ke=y=>(oe("data-v-846fe76c"),y=y(),ne(),y),ya={class:"q-mb-md text-center"},ha=Ke(()=>t("div",{class:"text-center"},[t("div",{class:"text-subtitle1 text-weight-medium"}," Add Employee Designations ")],-1)),ga=Ke(()=>t("div",{class:"text-h5 q-mr-md"},"\u{1F468}\u200D\u{1F4BC}\u{1F469}\u200D\u{1F4BC} Add Employee Designation",-1)),ba={key:0,class:"custom-list z-top"},wa={class:"row q-gutter-md"},xa=Ke(()=>t("div",{class:"q-my-md"},"Designation",-1)),$a={class:"row q-gutter-x-md"},Va={__name:"DesignationEmployee",setup(y){W(()=>{const P=window.innerWidth;return P>1200?"500px":P>768?"80vw":"95vw"});const d=h(!1),v=fa(),c=pe(),b=He(),n=h([]);h([]);const o=h(""),r=h(n.value),_=h(!1),i=h(!1),w=W(()=>c.employee),$=async()=>{o.value.trim()&&(i.value=!0,await c.searchCertainEmployee(o.value),i.value=!1)},g=P=>/^(0[1-9]|1[0-2]):[0-5][0-9] (AM|PM)$/i.test(P)||"Invalid time format";ie(async()=>{await b.fetchBranches(),n.value=b.branches.map(P=>({label:P.name,value:P.id})),r.value=n.value});const V=(P,x)=>{x(()=>{const S=P.toLowerCase();r.value=P===""?n.value:n.value.filter(j=>j.label.toLowerCase().includes(S))})},m=P=>{console.log("Selected Employee:",P),f.employee_id=P.id,f.employee_name=l(P),f.position=P.position,o.value="",console.log("Filled Designation Data:",f)},l=P=>{const x=N=>N?N.charAt(0).toUpperCase()+N.slice(1).toLowerCase():"",S=P.firstname?x(P.firstname):"No Firstname",j=P.middlename?x(P.middlename).charAt(0)+".":"",k=P.lastname?x(P.lastname):"No Lastname";return`${S} ${j} ${k}`},u=()=>{d.value=!0},f=we({employee_id:"",employee_name:"",position:"",branch_name:"",time_shift:""}),s=()=>{f.employee_id="",f.employee_name="",f.position="",f.branch_name="",f.time_shift=""},L=async()=>{_.value=!0;const P={...f,branch_id:f.branch_name.value};await v.createDesignation(P),console.log("Designation Data to Save:",P),_.value=!1,s(),d.value=!1};return(P,x)=>(p(),U(K,null,[e(O,{class:"q-pa-md user-card",onClick:u,align:"center"},{default:a(()=>[t("div",ya,[e(H,{name:"add_business",size:"60px",color:"yellow-7"})]),ha]),_:1}),e(he,{modelValue:d.value,"onUpdate:modelValue":x[5]||(x[5]=S=>d.value=S),"backdrop-filter":"blur(4px) saturate(150%)",position:"right"},{default:a(()=>[e(O,{style:{width:"500px","max-width":"100vw"}},{default:a(()=>[e(F,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:a(()=>[ga,e($e),ae(e(M,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(F,null,{default:a(()=>[t("div",null,[e(q,{modelValue:o.value,"onUpdate:modelValue":[x[0]||(x[0]=S=>o.value=S),$],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name or position"},{append:a(()=>[i.value?(p(),C(me,{key:1,color:"grey",size:"sm"})):(p(),C(H,{key:0,name:"search"}))]),default:a(()=>[o.value?(p(),U("div",ba,[e(O,null,{default:a(()=>[e(De,{separator:""},{default:a(()=>{var S;return[(S=w.value)!=null&&S.length?(p(!0),U(K,{key:1},ye(w.value,j=>(p(),C(te,{onClick:k=>m(j),key:j.id,clickable:""},{default:a(()=>[e(Se,null,{default:a(()=>[B(z(l(j)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(p(),C(te,{key:0},{default:a(()=>[B(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):de("",!0)]),_:1},8,["modelValue"])])]),_:1}),e(F,null,{default:a(()=>[t("div",wa,[e(q,{outlined:"",readonly:"",dense:"",label:"Full Name",modelValue:f.employee_name,"onUpdate:modelValue":x[1]||(x[1]=S=>f.employee_name=S),style:{width:"300px"}},null,8,["modelValue"]),e(q,{outlined:"",readonly:"",dense:"",label:"Position",modelValue:f.position,"onUpdate:modelValue":x[2]||(x[2]=S=>f.position=S),style:{width:"150px"}},null,8,["modelValue"])])]),_:1}),e(F,null,{default:a(()=>[xa,t("div",$a,[t("div",null,[e(ze,{modelValue:f.branch_name,"onUpdate:modelValue":x[3]||(x[3]=S=>f.branch_name=S),outlined:"",flat:"",dense:"","use-input":"",clearable:"","input-debounce":"0",options:r.value,label:"Branch",onFilter:V,"hide-dropdown-icon":"",behavior:"menu",style:{width:"250px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","options"])]),t("div",null,[e(q,{modelValue:f.time_shift,"onUpdate:modelValue":x[4]||(x[4]=S=>f.time_shift=S),outlined:"",flat:"",dense:"",mask:"##:## AA",label:"Time Schedule",rules:g,hint:"Format: 01:00 AM/PM",style:{width:"200px","max-width":"500px","min-width":"100px"},"hide-dropdown-icon":""},null,8,["modelValue"])])])]),_:1}),e(xe,{class:"row q-px-lg q-py-sm q-pt-none",align:"left"},{default:a(()=>[ae(e(M,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[le]]),e(M,{class:"glossy",color:"teal",label:"Add",onClick:L,loading:_.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var ka=X(Va,[["__scopeId","data-v-846fe76c"]]);const Sa={class:"row justify-between"},Da={class:"col-12 col-md-9 col-lg-9 q-pa-sm"},Aa={class:"col-12 col-md-3 col-lg-3 q-gutter-y-md q-pa-sm"},qa={__name:"EmployeesPage",setup(y){return(d,v)=>(p(),U("div",Sa,[t("div",Da,[e(sa)]),t("div",Aa,[e(va),e(ka)])]))}},Le=Ve("dtrs",()=>{const y=h(null),d=h([]),v=h([]),c=async()=>{try{const r=await G.get("/api/dtr");return r&&r.data?(d.value=r.data,r.data):(console.warn("No data returned from API."),d.value=[],[])}catch(r){return console.error("Error fetching DTR data:",r),d.value=[],[]}};return{dtr:y,dtrs:d,dtrCutOffData:v,fetchDTR:c,fetchDTRRange:async r=>{const _=await G.post("/api/dtr-data",r);v.value=_.data,console.log("Fetched DTR Data:",_.data)},saveOvertime:async r=>{const _=await G.post("/api/saveOvertime",r);d.value=_.data,c(),re.create({type:"positive",message:"Over Time Save"})},searchDTR:async r=>{try{console.log("Searching for DTR with keyword:",r);const _=await G.post(`/api/search-drt?keyword=${r}`);console.log("DTR response:",_),d.value=_.data}catch(_){console.error("Error searching DTR:",_)}}}});const Ea=y=>(oe("data-v-cac6b118"),y=y(),ne(),y),Pa=Ea(()=>t("div",{class:"text-h5 q-mr-md"},"\u{1F554} Add Over Time",-1)),Ua={class:"q-gutter-md"},Ta={class:"q-mb-lg"},Ca={key:0,class:"custom-list z-top"},za={class:"q-gutter-md q-my-lg"},Na={class:"q-mt-xl q-gutter-y-md"},Ia={class:"row justify-between"},Ra={class:"row justify-between"},Ba={__name:"OvertimeButton",setup(y){const d=Le(),v=pe(),c=h(""),b=W(()=>v.employees),n=async()=>{c.value.trim()&&await v.searchEmployee(c.value)},o=h(!1),r=()=>{o.value=!0},_=D=>/^(0[1-9]|1[0-2]):[0-5][0-9] (AM|PM)$/i.test(D)||"Invalid time format",i=D=>{w.employee_id=D.id,w.employee_name=`${D.firstname} ${D.middlename?D.middlename.charAt(0)+".":""} ${D.lastname}`,w.position=D.position,c.value=""},w=we({employee_id:"",employee_name:"",position:"",regularDateIN:"",dateIn:"",dateOut:"",timeIn:"",timeOut:""}),$=D=>{const V=f=>f?f.charAt(0).toUpperCase()+f.slice(1).toLowerCase():"",m=D.firstname?V(D.firstname):"No Firstname",l=D.middlename?V(D.middlename).charAt(0)+".":"",u=D.lastname?V(D.lastname):"No Lastname";return`${m} ${l} ${u}`},g=async()=>{const D=`${w.dateIn} ${w.timeIn}`,V=`${w.dateOut} ${w.timeOut}`,m={...w,overtime_in:D,overtime_out:V};await d.saveOvertime(m),console.log("overtime dATA",m)};return(D,V)=>(p(),U(K,null,[t("div",null,[e(M,{padding:"sm md",label:"Add Over Time",icon:"add_circle",size:"md",class:"gradient-btn text-white",onClick:r})]),t("div",null,[e(he,{modelValue:o.value,"onUpdate:modelValue":V[8]||(V[8]=m=>o.value=m),"full-height":"",persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:a(()=>[e(O,{style:{width:"400px","max-width":"80vw"}},{default:a(()=>[e(F,{class:"row items-center q-px-md q-py-sm gradient-btn text-white"},{default:a(()=>[Pa,e($e),ae(e(M,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(F,null,{default:a(()=>[t("div",Ua,[t("div",Ta,[e(q,{modelValue:c.value,"onUpdate:modelValue":[V[0]||(V[0]=m=>c.value=m),n],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name"},{append:a(()=>[e(H,{name:"search"})]),default:a(()=>[c.value?(p(),U("div",Ca,[e(O,null,{default:a(()=>[e(De,{separator:""},{default:a(()=>{var m;return[(m=b.value)!=null&&m.length?(p(!0),U(K,{key:1},ye(b.value,l=>(p(),C(te,{onClick:u=>i(l),key:l.id,clickable:""},{default:a(()=>[e(Se,null,{default:a(()=>[B(z($(l)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(p(),C(te,{key:0},{default:a(()=>[B(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):de("",!0)]),_:1},8,["modelValue"])]),t("div",null,[t("div",za,[e(q,{modelValue:w.employee_name,"onUpdate:modelValue":V[1]||(V[1]=m=>w.employee_name=m),outlined:"",dense:"",readonly:"",label:"Name"},null,8,["modelValue"]),e(q,{modelValue:w.position,"onUpdate:modelValue":V[2]||(V[2]=m=>w.position=m),outlined:"",dense:"",readonly:"",label:"Position"},null,8,["modelValue"])])])])]),_:1}),e(F,null,{default:a(()=>[e(q,{modelValue:w.regularDateIN,"onUpdate:modelValue":V[3]||(V[3]=m=>w.regularDateIN=m),outlined:"",dense:"",label:"Regular Date IN",type:"date"},null,8,["modelValue"])]),_:1}),e(F,null,{default:a(()=>[t("div",Na,[t("div",Ia,[t("div",null,[e(q,{modelValue:w.dateIn,"onUpdate:modelValue":V[4]||(V[4]=m=>w.dateIn=m),outlined:"",dense:"",label:"Date IN",type:"date",style:{width:"170px"}},null,8,["modelValue"])]),t("div",null,[e(q,{modelValue:w.timeIn,"onUpdate:modelValue":V[5]||(V[5]=m=>w.timeIn=m),label:"Time IN",dense:"",mask:"##:## AA",outlined:"",rules:_,hint:"Format: hh:mm AM/PM"},null,8,["modelValue"])])]),t("div",Ra,[t("div",null,[e(q,{modelValue:w.dateOut,"onUpdate:modelValue":V[6]||(V[6]=m=>w.dateOut=m),outlined:"",dense:"",label:"Date OUT",type:"date",style:{width:"170px"}},null,8,["modelValue"])]),t("div",null,[e(q,{modelValue:w.timeOut,"onUpdate:modelValue":V[7]||(V[7]=m=>w.timeOut=m),label:"Time OUT",dense:"",mask:"##:## AA",outlined:"",rules:_,hint:"Format: hh:mm AM/PM"},null,8,["modelValue"])])])])]),_:1}),e(F,null,{default:a(()=>[e(xe,{class:"q-mt-md"},{default:a(()=>[e(M,{size:"md",padding:"xs md",label:"save","icon-right":"send",class:"gradient-btn text-white",onClick:g})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var Fa=X(Ba,[["__scopeId","data-v-cac6b118"]]);const Ma={__name:"SearchDTR",setup(y){const d=Le(),v=h(""),c=h(!1),b=async()=>{c.value=!0,await d.searchDTR(v.value),c.value=!1};return(n,o)=>(p(),C(q,{modelValue:v.value,"onUpdate:modelValue":[o[0]||(o[0]=r=>v.value=r),b],outlined:"",dense:"",flat:"",label:"Search",debounce:"1000",style:{width:"300px"}},{append:a(()=>[t("div",null,[c.value?(p(),C(me,{key:1,color:"grey",size:"sm"})):(p(),C(H,{key:0,name:"search"}))])]),_:1},8,["modelValue"]))}};const ge=y=>(oe("data-v-b88dd3ca"),y=y(),ne(),y),La=ge(()=>t("div",{class:"text-h5 q-mr-md"},"\u{1F554} Edit Time",-1)),Oa={class:"row justify-between"},ja={class:"q-mt-lg q-gutter-md"},Qa={class:"row justify-between"},Ha=ge(()=>t("div",null,"Time IN",-1)),Ka=ge(()=>t("div",null,"Time OUT",-1)),Wa={class:"row justify-between"},Ya=ge(()=>t("div",null,"Lunch Break Start",-1)),Xa=ge(()=>t("div",null,"Lunch Break End",-1)),Ja={class:"row justify-between"},Ga=ge(()=>t("div",null,"Break Start",-1)),Za=ge(()=>t("div",null,"Break End",-1)),el={class:"row justify-between"},tl=ge(()=>t("div",null,"Over Time Start",-1)),al=ge(()=>t("div",null,"Over Time End",-1)),ll={__name:"EditDTR",props:["edit"],setup(y){const v=y.edit.row,c=h(),b=r=>{const _=g=>g?g.charAt(0).toUpperCase()+g.slice(1).toLowerCase():"",i=r.firstname?_(r.firstname):"No Firstname",w=r.middlename?_(r.middlename).charAt(0)+".":"",$=r.lastname?_(r.lastname):"No Lastname";return`${i} ${w} ${$}`.trim()},n=we({time_in:"",time_out:"",lunch_break_start:"",lunch_break_end:"",break_start:"",break_end:"",over_start:"",over_end:""}),o=()=>{Object.assign(n,v),c.value=!0};return(r,_)=>(p(),U(K,null,[e(M,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:"",onClick:o},{default:a(()=>[e(ve,{class:"bg-positive",delay:200},{default:a(()=>[B("Edit")]),_:1})]),_:1}),e(he,{modelValue:c.value,"onUpdate:modelValue":_[8]||(_[8]=i=>c.value=i)},{default:a(()=>[e(O,{style:{width:"500px","max-width":"80vw"}},{default:a(()=>[e(F,{class:"row items-center q-px-md q-py-sm gradient-btn text-white"},{default:a(()=>[La,e($e),ae(e(M,{icon:"close",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(F,null,{default:a(()=>[t("div",Oa,[t("div",null,"Name: "+z(b(lt(v).employee)),1),t("div",null," Position: "+z(lt(v).employee.position),1)]),t("div",ja,[t("div",Qa,[t("div",null,[Ha,e(q,{outlined:"",dense:"",modelValue:n.time_in,"onUpdate:modelValue":_[0]||(_[0]=i=>n.time_in=i)},null,8,["modelValue"])]),t("div",null,[Ka,e(q,{outlined:"",dense:"",modelValue:n.time_out,"onUpdate:modelValue":_[1]||(_[1]=i=>n.time_out=i)},null,8,["modelValue"])])]),t("div",Wa,[t("div",null,[Ya,e(q,{outlined:"",dense:"",modelValue:n.lunch_break_start,"onUpdate:modelValue":_[2]||(_[2]=i=>n.lunch_break_start=i)},null,8,["modelValue"])]),t("div",null,[Xa,e(q,{outlined:"",dense:"",modelValue:n.lunch_break_end,"onUpdate:modelValue":_[3]||(_[3]=i=>n.lunch_break_end=i)},null,8,["modelValue"])])]),t("div",Ja,[t("div",null,[Ga,e(q,{outlined:"",dense:"",modelValue:n.break_start,"onUpdate:modelValue":_[4]||(_[4]=i=>n.break_start=i)},null,8,["modelValue"])]),t("div",null,[Za,e(q,{outlined:"",dense:"",modelValue:n.break_end,"onUpdate:modelValue":_[5]||(_[5]=i=>n.break_end=i)},null,8,["modelValue"])])]),t("div",el,[t("div",null,[tl,e(q,{outlined:"",dense:"",modelValue:n.over_start,"onUpdate:modelValue":_[6]||(_[6]=i=>n.over_start=i)},null,8,["modelValue"])]),t("div",null,[al,e(q,{outlined:"",dense:"",modelValue:n.over_end,"onUpdate:modelValue":_[7]||(_[7]=i=>n.over_end=i)},null,8,["modelValue"])])])])]),_:1}),e(xe,{class:"row q-ma-md",align:"right"},{default:a(()=>[ae(e(M,{class:"btn-cancel glossy",color:"negative",label:"Cancel"},null,512),[[le]]),e(M,{class:"btn-create glossy",color:"positive",label:"Save"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var ol=X(ll,[["__scopeId","data-v-b88dd3ca"]]);const nl={class:"row justify-between q-mb-md",align:"right"},sl={key:1},il={key:1},rl={key:1},dl={key:1},ul={key:1},cl={key:1},ml={key:1},pl={key:1},_l={key:1},vl={class:"row justify-center q-gutter-x-md"},fl={__name:"AttendanceTable",setup(y){const d=h({rowsPerPage:0}),v=Le(),c=W(()=>v.dtrs);ie(async()=>{await b()});const b=async()=>{try{c.value=await v.fetchDTR(),console.log("dtrsss",c.value)}catch(u){console.log("Error fetching DTR data:",u)}},n=u=>{const f=x=>x?x.charAt(0).toUpperCase()+x.slice(1).toLowerCase():"",s=u.firstname?f(u.firstname):"No Firstname",L=u.middlename?f(u.middlename).charAt(0)+".":"",P=u.lastname?f(u.lastname):"No Lastname";return`${s} ${L} ${P}`.trim()},o=u=>{if(!u)return" - - ";const f=new Date(u);return isNaN(f.getTime())?" - - ":f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},r=u=>{if(!u)return" - - ";const f=new Date(u);if(isNaN(f.getTime()))return" - - ";let s=f.getHours();const L=f.getMinutes().toString().padStart(2,"0"),P=s>=12?"PM":"AM";return s=s%12,s=s||12,`${s}:${L} ${P}`},_=(u,f)=>{if(!u||!f)return{hours:0,minutes:0};const s=new Date(u),L=new Date(f);if(isNaN(s.getTime())||isNaN(L.getTime()))return{hours:0,minutes:0};const P=L-s,x=Math.floor(P/(1e3*60)),S=Math.floor(x/60),j=x%60;return{hours:S,minutes:j}},i=(u,f)=>{if(console.log("Input timeIn:",u),console.log("Input timeOut:",f),!u||!f)return" - - - ";const s=new Date(u),L=new Date(f);if(console.log("Parsed start date:",s),console.log("Parsed end date:",L),isNaN(s.getTime())||isNaN(L.getTime()))return console.log("Invalid date format detected")," - - - ";const P=L-s,x=Math.floor(P/(1e3*60)),S=Math.floor(x/60),j=x%60;return console.log("Calculated hours:",S),console.log("Calculated minutes:",j),`${S}h ${j}m`},w=(u,f)=>{const{hours:s,minutes:L}=_(u,f);return s>1||L>0?"green-7":"blue-grey-9"},$=(u,f)=>{const{hours:s,minutes:L}=_(u,f);return s>1||L>0?"check_circle":"access_time"},g=(u,f)=>{const{hours:s,minutes:L}=_(u,f);return s>0||L>15?"pink-13":"green-7"},D=(u,f)=>{const{hours:s,minutes:L}=_(u,f);return s>0||L>15?"access_time":"check_circle"},V=(u,f)=>{const{hours:s}=_(u,f);return s>9||s===9&&minutes>0?"blue-grey-9":s>=8?"green-7":"pink-13"},m=(u,f)=>{const s=_(u,f);return s>=9||s===9&&minutes>0?"alarm_on":s>=8?"check_circle":"access_time"},l=[{name:"name",required:!0,label:"Name",align:"left",field:u=>n(u.employee)},{name:"date_in",required:!0,label:"Date In",align:"center",field:"time_in",format:u=>o(u)},{name:"date_out",required:!0,label:"Date Out",align:"center",field:"time_out",format:u=>o(u)},{name:"time_in",required:!0,label:"Time In",align:"center",field:"time_in"},{name:"time_out",required:!0,label:"Time Out",align:"center",field:"time_out",format:u=>r(u)},{name:"lunch_break_start",required:!0,label:"Lunch Break Start",align:"center",field:"lunch_break_start",format:u=>r(u)},{name:"lunch_break_end",required:!0,label:"Lunch Break End",align:"center",field:"lunch_break_end",format:u=>r(u)},{name:"break_start",required:!0,label:"Break Start",align:"center",field:"break_start",format:u=>r(u)},{name:"break_end",required:!0,label:"Break End",align:"center",field:"break_end",format:u=>r(u)},{name:"break",required:!0,label:"Total Break",align:"center",field:u=>{const{hours:f,minutes:s}=_(u.break_start,u.break_end);return`${f}h ${s}m`}},{name:"lunch_break",required:!0,label:"Total Lunch break",align:"center",field:u=>{const{hours:f,minutes:s}=_(u.lunch_break_start,u.lunch_break_end);return`${f}h ${s}m`}},{name:"total_working_hours",required:!0,label:"Work Hours",align:"center",field:u=>{const{hours:f,minutes:s}=_(u.time_in,u.time_out);return`${f}h ${s}m`}},{name:"overtime_start",required:!0,label:"Overtime Start",align:"center",field:"overtime_start",format:u=>r(u)},{name:"overtime_end",required:!0,label:"Overtime End",align:"center",field:"overtime_end",format:u=>r(u)},{name:"total_overtime",required:!0,label:"OT Total Hours",align:"center",field:u=>{const f=i(u.overtime_start,u.overtime_end);if(typeof f=="string")return f;const{hours:s,minutes:L}=f;return`${s}h ${L}m`}},{name:"action",label:"Action",align:"center"}];return(u,f)=>(p(),U(K,null,[t("div",nl,[t("div",null,[e(Fa)]),e(Ma)]),t("div",null,[e(ke,{rows:c.value,columns:l,"row-key":"time_in",class:"sticky-header","hide-bottom":"",pagination:d.value,"onUpdate:pagination":f[0]||(f[0]=s=>d.value=s),"rows-per-page-options":[0]},{"body-cell-time_in":a(s=>[e(J,{props:s},{default:a(()=>[s.row.time_in?(p(),C(_e,{key:0,outline:"",color:"positive"},{default:a(()=>[B(z(r(s.row.time_in)),1)]),_:2},1024)):(p(),U("span",sl," - - - "))]),_:2},1032,["props"])]),"body-cell-time_out":a(s=>[e(J,{props:s},{default:a(()=>[s.row.time_out?(p(),C(_e,{key:0,outline:"",color:"purple-12"},{default:a(()=>[B(z(r(s.row.time_out)),1)]),_:2},1024)):(p(),U("span",il," - - - "))]),_:2},1032,["props"])]),"body-cell-lunch_break_start":a(s=>[e(J,{props:s},{default:a(()=>[s.row.lunch_break_start?(p(),C(_e,{key:0,outline:"",color:"amber-7"},{default:a(()=>[B(z(r(s.row.lunch_break_start)),1)]),_:2},1024)):(p(),U("span",rl," - - - "))]),_:2},1032,["props"])]),"body-cell-lunch_break_end":a(s=>[e(J,{props:s},{default:a(()=>[s.row.lunch_break_end?(p(),C(_e,{key:0,outline:"",color:"amber-4"},{default:a(()=>[B(z(r(s.row.lunch_break_end)),1)]),_:2},1024)):(p(),U("span",dl," - - - "))]),_:2},1032,["props"])]),"body-cell-break_start":a(s=>[e(J,{props:s},{default:a(()=>[s.row.break_start?(p(),C(_e,{key:0,outline:"",color:"blue-7"},{default:a(()=>[B(z(r(s.row.break_start)),1)]),_:2},1024)):(p(),U("span",ul," - - - "))]),_:2},1032,["props"])]),"body-cell-break_end":a(s=>[e(J,{props:s},{default:a(()=>[s.row.break_end?(p(),C(_e,{key:0,outline:"",color:"blue-4"},{default:a(()=>[B(z(r(s.row.break_end)),1)]),_:2},1024)):(p(),U("span",cl," - - - "))]),_:2},1032,["props"])]),"body-cell-break":a(s=>[e(J,{props:s},{default:a(()=>[s.row.break_start&&s.row.break_end?(p(),C(_e,{key:0,outline:"",color:g(s.row.break_start,s.row.break_end),class:"q-ma-xs",size:"md"},{default:a(()=>[e(H,{name:D(s.row.break_start,s.row.break_end),size:"xs",class:"q-mr-xs"},null,8,["name"]),B(" "+z(`${_(s.row.break_start,s.row.break_end).hours} Hrs : ${_(s.row.break_start,s.row.break_end).minutes} Min`),1)]),_:2},1032,["color"])):(p(),U("span",ml," - - - "))]),_:2},1032,["props"])]),"body-cell-lunch_break":a(s=>[e(J,{props:s},{default:a(()=>[s.row.lunch_break_start&&s.row.lunch_break_end?(p(),C(_e,{key:0,outline:"",color:w(s.row.lunch_break_start,s.row.lunch_break_end),class:"q-ma-xs",size:"md"},{default:a(()=>[e(H,{name:$(s.row.lunch_break_start,s.row.lunch_break_end),size:"xs",class:"q-mr-xs"},null,8,["name"]),B(" "+z(`${_(s.row.lunch_break_start,s.row.lunch_break_end).hours} Hrs : ${_(s.row.lunch_break_start,s.row.lunch_break_end).minutes} Min`),1)]),_:2},1032,["color"])):(p(),U("span",pl," - - - "))]),_:2},1032,["props"])]),"body-cell-total_working_hours":a(s=>[e(J,{props:s},{default:a(()=>[s.row.time_in&&s.row.time_out?(p(),C(_e,{key:0,outline:"",color:V(s.row.time_in,s.row.time_out),class:"q-ma-xs",size:"md"},{default:a(()=>[e(H,{name:m(s.row.time_in,s.row.time_out),size:"xs",class:"q-mr-xs"},null,8,["name"]),B(" "+z(`${_(s.row.time_in,s.row.time_out).hours} Hrs : ${_(s.row.time_in,s.row.time_out).minutes} Min`),1)]),_:2},1032,["color"])):(p(),U("span",_l," - - - "))]),_:2},1032,["props"])]),"body-cell-action":a(s=>[e(J,{props:s},{default:a(()=>[t("div",vl,[e(ol,{edit:s},null,8,["edit"])])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])])],64))}};var yl=X(fl,[["__scopeId","data-v-1982f392"]]);const ut=y=>(oe("data-v-2829b8dd"),y=y(),ne(),y),hl={class:"q-mb-md",align:"right"},gl={key:0,class:"custom-list z-top"},bl={class:"row"},wl={class:"col-3 q-ma-lg",align:"center"},xl={class:"q-pa-lg"},$l=["src","alt"],Vl={class:"row q-mt-lg",align:"left"},kl=ut(()=>t("div",{class:"col-3"},[t("div",null,"Name:"),t("div",null,"Position:"),t("div",null,"Age:")],-1)),Sl={class:"col-9"},Dl={class:"col-8 q-ml-lg"},Al={class:"row justify-between"},ql={class:"row justify-between q-mt-md"},El={class:"row"},Pl={class:"q-my-md"},Ul={class:"row justify-between text-h6 text-white"},Tl=ut(()=>t("div",null,"\u{1F5D3}\uFE0F Daily Time Record",-1)),Cl=["src"],zl={__name:"AttendanceSummary",setup(y){Fe.exports.vfs=it;const d=pe(),v=W(()=>d.employees),c=Le(),b=h("https://cdn.quasar.dev/img/boy-avatar.png"),n=h("");h(null);const o=h(null),r=h(""),_=h(""),i=h(""),w=h(""),$=h(""),g=h(!1),D=h("");h(!1);const V=()=>{b.value="https://cdn.quasar.dev/img/boy-avatar.png"},m=h({rowsPerPage:0}),l=async()=>{n.value.trim()&&await d.searchEmployee(n.value)},u=async A=>{n.value="",i.value=s(A),w.value=A.position||"Unknown",$.value=f(A.birthdate),o.value=A.id;const I=Ce.formatDate(new Date,"YYYY-MM-DD");if(I){const{startDate:R,endDate:Y}=P(I);r.value=R,_.value=Y;const Z={employee_id:o.value,start_date:r.value,end_date:_.value};await c.fetchDTRRange(Z),console.log("Request Data:",Z)}else console.error("Failed to format the current date")},f=A=>{if(!A)return"N/A";const I=new Date(A),R=new Date;let Y=R.getFullYear()-I.getFullYear();const Z=R.getMonth()-I.getMonth();return(Z<0||Z===0&&R.getDate()<I.getDate())&&Y--,Y},s=A=>{const I=se=>se?se.charAt(0).toUpperCase()+se.slice(1).toLowerCase():"",R=A.firstname?I(A.firstname):"No Firstname",Y=A.middlename?I(A.middlename).charAt(0)+".":"",Z=A.lastname?I(A.lastname):"No Lastname";return`${R} ${Y} ${Z}`},L=()=>{const A=Ce.formatDate(new Date,"YYYY-MM-DD"),{startDate:I,endDate:R}=P(A);r.value=I,_.value=R},P=A=>{if(!A)return console.error("Invalid formatted date:",A),{startDate:null,endDate:null};const I=parseInt(A.slice(8,10),10);let R,Y;if(I>=11&&I<=25)R=`${A.slice(0,7)}-11`,Y=`${A.slice(0,7)}-25`;else{const Z=I>=26?A.slice(5,7):(parseInt(A.slice(5,7),10)-1).toString().padStart(2,"0"),se=I>=26?(parseInt(A.slice(5,7),10)+1).toString().padStart(2,"0"):A.slice(5,7);R=`${A.slice(0,4)}-${Z}-26`,Y=`${A.slice(0,4)}-${se}-10`}return console.log("Calculated Start Date:",R),console.log("Calculated End Date:",Y),{startDate:R,endDate:Y}},x=A=>{const I=new Date(A);if(isNaN(I.getTime()))return" - - - ";const R={month:"short",day:"2-digit",year:"numeric"},Y=I.toLocaleDateString("en-US",R).replace(",",""),[Z,se,qe]=Y.split(" ");return`${Z}. ${se}, ${qe}`},S=x(r.value);console.log("formattedStart",S),x(new Date(r)),x(new Date(_));const j=W(()=>{const A=c.dtrCutOffData,I=(R,Y)=>{if(!R||!Y)return" - - - ";const Z=new Date(R),se=new Date(Y);if(isNaN(Z.getTime())||isNaN(se.getTime()))return" - - - ";const qe=se-Z;if(qe<=0)return" - - - ";const Re=Math.floor(qe/(1e3*60)),Pe=String(Math.floor(Re/60)).padStart(2,"0"),Oe=String(Re%60).padStart(2,"0");return`${Pe} h : ${Oe} m`};return A.map((R,Y)=>{const Z=R.time_in,se=R.time_out,qe=R.overtime_start,Re=R.overtime_end,Pe=I(Z,se),Oe=I(qe,Re);let Ze=" - - - ";const et=8;if(Pe!==" - - - "){const[pt,_t]=Pe.split(" h : "),tt=parseInt(pt,10)+parseInt(_t,10)/60;if(tt<et){const at=(et-tt)*60,vt=String(Math.floor(at/60)).padStart(2,"0"),ft=String(Math.floor(at%60)).padStart(2,"0");Ze=`${vt} h : ${ft} m`}}return{entry:Y+1,time_in:R.time_in,time_out:R.time_out,total_working_hours:Pe,undertime:Ze,overtime:Oe}})}),k=async()=>{o.value&&r.value&&_.value&&await c.fetchDTRRange({employee_id:o.value,start_date:r.value,end_date:_.value})};console.log("DTR ROW",j.value);const N=()=>{const A=new Date(r.value);A.setDate(A.getDate()-15);const{startDate:I,endDate:R}=P(Ce.formatDate(A,"YYYY-MM-DD"));r.value=I,_.value=R,k()},E=()=>{const A=new Date(_.value);A.setDate(A.getDate()+1);const{startDate:I,endDate:R}=P(Ce.formatDate(A,"YYYY-MM-DD"));r.value=I,_.value=R,k()},T=()=>{L(),k()};L();const Q=A=>{const I=ee();Fe.exports.createPdf(I).getDataUrl(R=>{D.value=R,g.value=!0})},ee=()=>({pageMargins:[40,40,-10,40],content:[{text:"Daily Time Record",style:"header"},{text:[{text:"From: ",bold:!1,fontSize:8},{text:` ${x(r.value)}`,bold:!0,decoration:"underline",fontSize:10}],margin:[0,0,0,3]},{text:[{text:"To: ",bold:!1,fontSize:8},{text:`     ${x(_.value)}`,bold:!0,decoration:"underline",fontSize:10}],margin:[0,0,0,10]},{columns:[{text:[{text:"Employee Name:",bold:!1,fontSize:8},{text:`  ${i.value}`,bold:!0,decoration:"underline",fontSize:10}]},{text:[{text:"Position:",bold:!1,fontSize:8},{text:`  ${w.value}`,bold:!0,decoration:"underline",fontSize:10}]},{text:[{text:"Age:",bold:!1,fontSize:8},{text:`  ${$.value}`,bold:!0,decoration:"underline",fontSize:10}]}],margin:[0,0,0,10]},{table:{headerRows:1,widths:["auto","auto","auto","auto","auto","auto"],body:[[{text:"Number of Days",bold:!0},{text:"Time In",bold:!0,alignment:"center"},{text:"Time Out",bold:!0,alignment:"center"},{text:"Total Working Hours",bold:!0},{text:"Undertime",bold:!0},{text:"Overtime",bold:!0}],...j.value.map(A=>[{text:A.entry,alignment:"center"},{text:A.time_in||" - - - ",alignment:"center"},{text:A.time_out||" - - - ",alignment:"center"},{text:A.total_working_hours||" - - - ",alignment:"center"},{text:A.undertime||" - - - ",alignment:"center"},{text:A.overtime||" - - - ",alignment:"center"}])]},layout:{hLineWidth:function(A,I){return A===0||A===I.table.body.length?1:.5},vLineWidth:function(A,I){return .5},hLineColor:function(A,I){return A===0||A===I.table.body.length?"black":"#ccc"},vLineColor:function(A,I){return"#ccc"}}}],styles:{header:{fontSize:14,bold:!0,alignment:"center",margin:[0,5,0,10]},tableHeader:{bold:!0,fontSize:13,color:"black"}},defaultStyle:{fontSize:9}}),mt=[{name:"number_of_days",required:!0,label:"NOD",align:"center",field:A=>A.entry,format:A=>`${A}`},{name:"in",align:"center",label:"IN",field:"time_in"},{name:"out",label:"OUT",align:"center",field:"time_out"},{name:"total_working_hours",label:"Total Working Hours",align:"center",field:"total_working_hours"},{name:"overtime",label:"Overtime",field:"overtime",align:"center"},{name:"undertime",label:"Undertime",field:"undertime",align:"center"}];return(A,I)=>(p(),U(K,null,[t("div",hl,[e(q,{modelValue:n.value,"onUpdate:modelValue":[I[0]||(I[0]=R=>n.value=R),l],debounce:"500",outlined:"",dense:"",flat:"",label:"Search",style:{width:"300px"}},{append:a(()=>[t("div",null,[e(H,{name:"search"})])]),default:a(()=>[n.value?(p(),U("div",gl,[e(O,null,{default:a(()=>[e(De,{separator:""},{default:a(()=>{var R;return[(R=v.value)!=null&&R.length?(p(!0),U(K,{key:1},ye(v.value,Y=>(p(),C(te,{key:Y.id,clickable:"",onClick:Z=>u(Y)},{default:a(()=>[e(Se,null,{default:a(()=>[B(z(s(Y)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(p(),C(te,{key:0},{default:a(()=>[B(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):de("",!0)]),_:1},8,["modelValue"])]),t("div",null,[e(O,{bordered:"",dense:"",flat:"",class:"q-pa-md"},{default:a(()=>[t("div",bl,[t("div",wl,[t("div",xl,[e(nt,{size:"150px",color:"grey-2"},{default:a(()=>[t("img",{src:b.value,alt:A.altText,onError:V},null,40,$l)]),_:1})]),t("div",Vl,[kl,t("div",Sl,[t("div",null,z(i.value),1),t("div",null,z(w.value),1),t("div",null,z($.value),1)])])]),e(fe,{vertical:""}),t("div",Dl,[t("div",Al,[t("div",null,"From: "+z(x(r.value)),1),t("div",null,"To: "+z(x(_.value)),1)]),t("div",ql,[t("div",null,[t("div",El,[e(M,{padding:"sm md",size:"sm",dense:"",flat:"",label:"prev",icon:"arrow_back_ios_new",onClick:N}),e(fe,{vertical:""}),e(M,{padding:"sm md",size:"sm",dense:"",flat:"",onClick:T},{default:a(()=>[B("CURRENT")]),_:1}),e(fe,{vertical:""}),e(M,{padding:"sm md",size:"sm",dense:"",flat:"",label:"next",icon:"arrow_forward_ios",onClick:E})])]),t("div",null,[e(M,{padding:"sm md",size:"sm",icon:"print",dense:"",label:"PRINT",class:"gradient-btn text-white",onClick:Q})])]),t("div",Pl,[e(ke,{flat:"",bordered:"",separator:"cell",rows:j.value,columns:mt,"row-key":"entry",class:"full-height-table",pagination:m.value,"onUpdate:pagination":I[1]||(I[1]=R=>m.value=R),"hide-bottom":""},null,8,["rows","pagination"])])])])]),_:1})]),e(he,{modelValue:g.value,"onUpdate:modelValue":I[2]||(I[2]=R=>g.value=R),"full-height":"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:a(()=>[e(O,{style:{width:"820px","max-width":"80vw"}},{default:a(()=>[e(F,{class:"gradient-btn"},{default:a(()=>[t("div",Ul,[Tl,t("div",null,[ae(e(M,{rounded:"",flat:"",dense:"",icon:"arrow_forward_ios"},null,512),[[le]])])])]),_:1}),t("div",null,[t("iframe",{src:D.value,width:"100%",height:"700px"},null,8,Cl)])]),_:1})]),_:1},8,["modelValue"])],64))}};var Nl=X(zl,[["__scopeId","data-v-2829b8dd"]]);const Il={class:"q-gutter-y-sm"},Rl={__name:"AttendancePage",setup(y){const d=h("dtr_overview");return(v,c)=>(p(),U("div",null,[t("div",Il,[e(je,{modelValue:d.value,"onUpdate:modelValue":c[0]||(c[0]=b=>d.value=b),"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:"gradient-btn"},{default:a(()=>[e(ue,{class:"text-white",name:"dtr_overview",icon:"event_available",label:"DTR Overview"}),e(ue,{class:"text-white",name:"attendance_summary",icon:"calendar_month",label:"Attendance Summary"})]),_:1},8,["modelValue"])]),e(Qe,{modelValue:d.value,"onUpdate:modelValue":c[1]||(c[1]=b=>d.value=b),animated:""},{default:a(()=>[e(ce,{name:"dtr_overview"},{default:a(()=>[e(yl)]),_:1}),e(ce,{name:"attendance_summary"},{default:a(()=>[e(Nl)]),_:1})]),_:1},8,["modelValue"])]))}};var Bl=X(Rl,[["__scopeId","data-v-db6c6d6e"]]);const We=Ve("employee-allowance",()=>{const y=h(null),d=h([]);return{allowance:y,allowances:d,createEmployeeAllowance:async n=>{try{const o=await G.post("/api/employee-allowance",n);console.log("employee response",o.data),d.value.unshift(o.data),re.create({type:"positive",message:"Allowance successfully created",timeout:1e3})}catch(o){console.log(o);let r="An error occurred. Please try again.";o.response&&o.response.status===409?r="Allowance for this employee already exists.":o.response&&o.response.status===422&&(r="Invalid data. Please check the inputs."),re.create({type:"negative",message:r,timeout:1e3})}},fetchEmployeeAllowance:async()=>{try{const n=await G.get("/api/employee-allowance");d.value=n.data}catch(n){console.log("error fetching allowance",n)}},searchAllowance:async n=>{try{console.log("Searching for employee with keyword:",n);const o=await G.post(`/api/search-allowance?keyword=${n}`);console.log("Allowance response:",o),d.value=o.data}catch(o){console.error("Error searching employee:",o)}}}});const Fl=y=>(oe("data-v-00bc7d3c"),y=y(),ne(),y),Ml=Fl(()=>t("div",{class:"text-h5 q-mr-md"},"\u{1F4BC} Add Employee Allowance",-1)),Ll={key:0,class:"custom-list z-top"},Ol={class:"q-gutter-md"},jl={__name:"AddAllowance",setup(y){const d=pe(),v=W(()=>d.employees),c=We(),b=W(()=>c.allowances),n=h(""),o=h(!1),r=h(!1),_=h(!1),i=()=>{o.value=!0},w=async()=>{n.value.trim()&&(_.value=!0,await d.searchEmployee(n.value),_.value=!1)},$=m=>{console.log("Selected Employee:",m),g.employee_id=m.id,g.employee_name=`${m.firstname} ${m.middlename?m.middlename.charAt(0)+".":""} ${m.lastname}`,g.employee_position=m.position,n.value="",console.log("Filled Designation Data:",g)},g=we({employee_id:"",employee_name:"",employee_position:"",amount:""}),D=()=>{g.employee_id="",g.employee_name="",g.employee_position="",g.amount=""},V=async()=>{r.value=!0;try{const m=await c.createEmployeeAllowance(g);console.log("data to be save",m),D(),b.value=await c.fetchEmployeeAllowance(),o.value=!1}catch(m){console.log(m)}finally{r.value=!1}};return(m,l)=>(p(),U("div",null,[e(M,{padding:"sm md",label:"Add Allowance",icon:"add_circle",size:"md",class:"gradient-btn text-white",onClick:i}),e(he,{modelValue:o.value,"onUpdate:modelValue":l[4]||(l[4]=u=>o.value=u),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:a(()=>[e(O,{style:{width:"400px","max-width":"80vw"}},{default:a(()=>[e(F,{class:"row items-center q-px-md q-py-sm gradient-btn text-white"},{default:a(()=>[Ml,e($e),ae(e(M,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(F,null,{default:a(()=>[e(q,{modelValue:n.value,"onUpdate:modelValue":[l[0]||(l[0]=u=>n.value=u),w],label:"Search Employee",outlined:"",dense:"",rounded:"",debounce:"500",placeholder:"Enter name"},{append:a(()=>[_.value?(p(),C(me,{key:1,color:"grey",size:"sm"})):(p(),C(H,{key:0,name:"search"}))]),default:a(()=>[n.value?(p(),U("div",Ll,[e(O,null,{default:a(()=>[e(De,{separator:""},{default:a(()=>{var u;return[(u=v.value)!=null&&u.length?(p(!0),U(K,{key:1},ye(v.value,f=>(p(),C(te,{onClick:s=>$(f),key:f.id,clickable:""},{default:a(()=>[e(Se,null,{default:a(()=>[B(z(`${f.firstname} ${f.middlename?f.middlename.charAt(0)+".":""} ${f.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(p(),C(te,{key:0},{default:a(()=>[B(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):de("",!0)]),_:1},8,["modelValue"])]),_:1}),e(F,null,{default:a(()=>[t("div",Ol,[e(q,{modelValue:g.employee_name,"onUpdate:modelValue":l[1]||(l[1]=u=>g.employee_name=u),outlined:"",dense:"",readonly:"",label:"Name"},null,8,["modelValue"]),e(q,{modelValue:g.employee_position,"onUpdate:modelValue":l[2]||(l[2]=u=>g.employee_position=u),outlined:"",dense:"",readonly:"",label:"Position"},null,8,["modelValue"])])]),_:1}),e(F,null,{default:a(()=>[e(q,{modelValue:g.amount,"onUpdate:modelValue":l[3]||(l[3]=u=>g.amount=u),outlined:"",dense:"",label:"Allowance amount"},null,8,["modelValue"])]),_:1}),e(xe,null,{default:a(()=>[e(M,{size:"md",padding:"xs md",label:"save","icon-right":"send",class:"gradient-btn text-white",onClick:V,loading:r.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var Ql=X(jl,[["__scopeId","data-v-00bc7d3c"]]);const Hl={__name:"SearchAllowance",setup(y){const d=We();W(()=>d.allowances);const v=h(""),c=h(!1),b=async()=>{c.value=!0,await d.searchAllowance(v.value),c.value=!1};return(n,o)=>(p(),U("div",null,[e(q,{modelValue:v.value,"onUpdate:modelValue":[o[0]||(o[0]=r=>v.value=r),b],outlined:"",dense:"",flat:"",label:"Search",debounce:"1000",style:{width:"300px"}},{append:a(()=>[t("div",null,[c.value?(p(),C(me,{key:1,color:"grey",size:"sm"})):(p(),C(H,{key:0,name:"search"}))])]),_:1},8,["modelValue"])]))}};const Kl={class:"row justify-between q-mb-md",align:"right"},Wl={__name:"AllowanceTable",setup(y){const d=We(),v=W(()=>d.allowances),c=h({rowsPerPage:0});ie(async()=>{await b()});const b=async()=>{try{v.value=await d.fetchEmployeeAllowance(),console.log("allowance",v.value)}catch(i){console.log("Error fetching allowance",i)}},n=i=>{const w=V=>V?V.charAt(0).toUpperCase()+V.slice(1).toLowerCase():"",$=i.firstname?w(i.firstname):"No Firstname",g=i.middlename?w(i.middlename).charAt(0)+".":"",D=i.lastname?w(i.lastname):"No Lastname";return`${$} ${g} ${D}`.trim()},o=i=>{if(!i)return" - - ";const w=new Date(i);return isNaN(w.getTime())?" - - ":w.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},r=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(i),_=[{name:"date",required:!0,label:"Date",align:"center",field:i=>o(i.created_at)},{name:"name",required:!0,label:"Name",align:"center",field:i=>n(i.employee)},{name:"amount",required:!0,label:"Amount",align:"center",field:i=>r(i.amount)},{name:"actions",required:!0,label:"Actions",align:"center",field:"actions"}];return(i,w)=>(p(),U(K,null,[t("div",Kl,[t("div",null,[e(Ql)]),e(Hl)]),e(ke,{class:"sticky-header",rows:v.value,columns:_,"row-key":"name",pagination:c.value,"onUpdate:pagination":w[0]||(w[0]=$=>c.value=$),"hide-bottom":""},{"body-cell-actions":a($=>[e(J,{props:$},{default:a(()=>[e(M,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:""},{default:a(()=>[e(ve,{class:"bg-positive",delay:200},{default:a(()=>[B("Edit")]),_:1})]),_:1})]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])],64))}};var Yl=X(Wl,[["__scopeId","data-v-718dbada"]]);const Ye=Ve("benefits",()=>{const y=h(null),d=h([]);return{benefit:y,benefits:d,fetchEmployeeBenefit:async()=>{try{const n=await G.get("/api/employee-benefit");d.value=n.data}catch(n){console.log("error fetching benefits",n)}},createEmployeeBenefit:async n=>{try{const o=await G.post("/api/employee-benefit",n);d.value.unshift(o.data),re.create({type:"positive",message:"Employee deductions successfully created",setTimeout:1e3})}catch(o){console.log(o);let r="An error occurred. Please try again.";o.response&&o.response.status===409?r="Allowance for this employee already exists.":o.response&&o.response.status===422&&(r="Invalid data. Please check the inputs."),re.create({type:"negative",message:r,timeout:5e3})}},searchBenefit:async n=>{try{console.log("Searching for employee with keyword:",n);const o=await G.post(`/api/search-benefit?keyword=${n}`);console.log("Allowance response:",o.data),d.value=o.data}catch(o){console.error("Benefits error",o)}}}});const Xe=y=>(oe("data-v-5d754b74"),y=y(),ne(),y),Xl=Xe(()=>t("div",{class:"text-h5 q-mr-md"},"\u{1F4BC} Add Employee Deductions",-1)),Jl={key:0,class:"custom-list z-top"},Gl={class:"row q-gutter-md text-subtitle1"},Zl=Xe(()=>t("div",null,"Name:",-1)),eo={class:"text-weight-medium"},to={class:"row q-gutter-md text-subtitle1"},ao=Xe(()=>t("div",null,"Position:",-1)),lo={class:"text-weight-medium"},oo={class:"q-gutter-y-md"},no={__name:"AddDeduction",setup(y){const d=pe(),v=W(()=>d.employees),c=Ye(),b=W(()=>c.benefits),n=h(""),o=h(!1),r=h(!1),_=h(!1),i=()=>{_.value=!0},w=async()=>{n.value.trim()&&(r.value=!0,await d.searchEmployee(n.value),r.value=!1)},$=m=>{console.log("Selected Employee:",m),g.employee_id=m.id,g.employee_name=`${m.firstname} ${m.middlename?m.middlename.charAt(0)+".":""} ${m.lastname} `,g.employee_position=m.position,n.value="",console.log("Filled Designation Data:",g)},g=we({employee_id:"",employee_name:"",employee_position:"",sss:"",hdmf:"",phic:""}),D=()=>{g.employee_id="",g.employee_name="",g.employee_position="",g.sss="",g.hdmf="",g.phic=""},V=async()=>{console.log("deductionss:",g),o.value=!0;try{const m=await c.createEmployeeBenefit(g);console.log("deduction",m),_.value=!1,D(),b.value=await c.fetchEmployeeBenefit()}catch(m){console.log("error",m)}finally{o.value=!1}};return(m,l)=>(p(),U("div",null,[e(M,{padding:"sm md",label:"Add Benefits",icon:"add_circle",size:"md",class:"gradient-btn text-white",onClick:i}),e(he,{modelValue:_.value,"onUpdate:modelValue":l[4]||(l[4]=u=>_.value=u),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:a(()=>[e(O,{style:{width:"400px","max-width":"80vw"}},{default:a(()=>[e(F,{class:"row items-center q-px-md q-py-sm gradient-btn text-white"},{default:a(()=>[Xl,e($e),ae(e(M,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(F,null,{default:a(()=>[e(q,{modelValue:n.value,"onUpdate:modelValue":[l[0]||(l[0]=u=>n.value=u),w],label:"Search Employee",outlined:"",rounded:"",dense:"",debounce:"500",placeholder:"Enter name"},{append:a(()=>[r.value?(p(),C(me,{key:1,color:"grey",size:"sm"})):(p(),C(H,{key:0,name:"search"}))]),default:a(()=>[n.value?(p(),U("div",Jl,[e(O,null,{default:a(()=>[e(De,{separator:""},{default:a(()=>{var u;return[(u=v.value)!=null&&u.length?(p(!0),U(K,{key:1},ye(v.value,f=>(p(),C(te,{onClick:s=>$(f),key:f.id,clickable:""},{default:a(()=>[e(Se,null,{default:a(()=>[B(z(`${f.firstname} ${f.middlename?f.middlename.charAt(0)+".":""} ${f.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(p(),C(te,{key:0},{default:a(()=>[B(" No employee record ")]),_:1}))]}),_:1})]),_:1})])):de("",!0)]),_:1},8,["modelValue"])]),_:1}),e(F,null,{default:a(()=>[t("div",Gl,[Zl,t("div",eo,z(g.employee_name?g.employee_name:"-------"),1)]),t("div",to,[ao,t("div",lo,z(g.employee_position?g.employee_position:"-------"),1)])]),_:1}),e(F,null,{default:a(()=>[t("div",oo,[t("div",null,[e(q,{modelValue:g.sss,"onUpdate:modelValue":l[1]||(l[1]=u=>g.sss=u),outlined:"",label:"SSS (Social Security System )"},null,8,["modelValue"])]),t("div",null,[e(q,{modelValue:g.hdmf,"onUpdate:modelValue":l[2]||(l[2]=u=>g.hdmf=u),outlined:"",label:"HDMF (Pag-IBIG Fund)"},null,8,["modelValue"])]),t("div",null,[e(q,{modelValue:g.phic,"onUpdate:modelValue":l[3]||(l[3]=u=>g.phic=u),outlined:"",label:"PHIC (Philippine Health Insurance Corporation)"},null,8,["modelValue"])])])]),_:1}),e(xe,null,{default:a(()=>[e(M,{size:"md",padding:"xs md",label:"save","icon-right":"send",class:"gradient-btn text-white",onClick:V,loading:o.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var so=X(no,[["__scopeId","data-v-5d754b74"]]);const io={__name:"SearchBenefit",setup(y){const d=Ye(),v=h(""),c=h(!1),b=async()=>{c.value=!0,await d.searchBenefit(v.value),c.value=!1};return(n,o)=>(p(),U("div",null,[e(q,{modelValue:v.value,"onUpdate:modelValue":[o[0]||(o[0]=r=>v.value=r),b],outlined:"",dense:"",flat:"",label:"Search",style:{width:"300px"}},{append:a(()=>[t("div",null,[c.value?(p(),C(me,{key:1,color:"grey",size:"sm"})):(p(),C(H,{key:0,name:"search"}))])]),_:1},8,["modelValue"])]))}};const ro={class:"row justify-between q-mb-md",align:"right"},uo={class:"row q-gutter-md"},co={__name:"BenefitsTable",setup(y){const d=Ye(),v=W(()=>d.benefits),c=h({rowsPerPage:0});ie(async()=>{await b()});const b=async()=>{try{v.value=await d.fetchEmployeeBenefit(),console.log("benefit",v.value)}catch(i){console.log("error fetching",i)}},n=i=>{const w=V=>V?V.charAt(0).toUpperCase()+V.slice(1).toLowerCase():"",$=i.firstname?w(i.firstname):"No Firstname",g=i.middlename?w(i.middlename).charAt(0)+".":"",D=i.lastname?w(i.lastname):"No Lastname";return`${$} ${g} ${D}`.trim()},o=i=>{if(!i)return" - - ";const w=new Date(i);return isNaN(w.getTime())?" - - ":w.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},r=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(i),_=[{name:"date",required:!0,label:"Date",align:"left",field:i=>o(i.created_at)},{name:"name",required:!0,label:"Name",align:"left",field:i=>n(i.employee)},{name:"sss",label:"Social Security System (SSS)",align:"center",field:i=>r(i.sss)},{name:"hdmf",label:"Pag-IBIG Fund (HDMF)",align:"center",field:i=>r(i.hdmf)},{name:"phic",label:"Phil - Health (PHIC)",align:"center",field:i=>r(i.phic)}];return(i,w)=>(p(),U(K,null,[t("div",ro,[t("div",uo,[t("div",null,[e(so)])]),e(io)]),e(ke,{class:"sticky-header",rows:v.value,columns:_,"row-key":"name","hide-bottom":"",pagination:c.value,"onUpdate:pagination":w[0]||(w[0]=$=>c.value=$)},null,8,["rows","pagination"])],64))}};var mo=X(co,[["__scopeId","data-v-1738f060"]]);const ct=Ve("uniform",()=>{const y=h(null),d=h([]);return{uniform:y,uniforms:d,fetchUniform:async()=>{try{const n=await G.get("/api/uniform");d.value=n.data}catch(n){console.log("error fetching uniform",n)}},createUniforms:async n=>{try{const o=await G.post("/api/uniform",n);d.value.unshift(o.data),re.create({type:"positive",message:"Allowance successfully created",timeout:1e3})}catch(o){console.log(o);let r="An error occurred. Please try again.";o.response&&o.response.status===409?r="Allowance for this employee already exists.":o.response&&o.response.status===422&&(r="Invalid data. Please check the inputs."),re.create({type:"negative",message:r,timeout:1e3})}},searchUniform:async n=>{try{console.log("Searching with keyword:",n);const o=await G.post(`/api/search-uniform?keyword=${n}`);console.log("UNIFORm response:",o),d.value=o.data}catch(o){console.error("Error searching employee:",o)}}}});const Ae=y=>(oe("data-v-2b527d9a"),y=y(),ne(),y),po=Ae(()=>t("div",{class:"text-h5 q-mr-md"},"\u{1F454} Add Uniform",-1)),_o={key:0,class:"custom-list z-top"},vo={class:"row q-gutter-md text-subtitle1"},fo=Ae(()=>t("div",null,"Name:",-1)),yo={class:"text-weight-medium"},ho={class:"row q-gutter-md text-subtitle1"},go=Ae(()=>t("div",null,"Position:",-1)),bo={class:"text-weight-medium"},wo={class:"row"},xo={class:"col-6"},$o={key:0,class:"q-gutter-sm q-pa-md"},Vo={key:0,class:"row q-gutter-x-sm"},ko={class:"col-6"},So={key:0,class:"q-gutter-sm q-pa-md"},Do={key:0,class:"row q-gutter-x-sm"},Ao={class:"row justify-between q-gutter-sm"},qo=Ae(()=>t("div",{class:"q-mt-lg text-subtitle1"},"Number of Payments",-1)),Eo=Ae(()=>t("div",{class:"q-mt-lg text-subtitle1"},"Total Amount",-1)),Po=Ae(()=>t("div",{class:"q-mt-lg text-subtitle1"},"Payments Per Payroll",-1)),Uo=Ae(()=>t("div",{class:"row q-gutter-sm"},null,-1)),To={__name:"AddUniform",setup(y){const d=pe(),v=W(()=>d.employees),c=ct(),b=W(()=>c.uniforms),n=h(""),o=h(!1),r=h(!1),_=h(!1),i=h(0),w=h(0),$=h(!1),g=h(!1),D=()=>{o.value=!0},V=async()=>{n.value.trim()&&(g.value=!0,await d.searchEmployee(n.value),g.value=!1)},m=P=>{console.log("Selected Employee:",P),l.employee_id=P.id,l.employee_name=`${P.firstname} ${P.middlename?P.middlename.charAt(0)+".":""} ${P.lastname} `,l.employee_position=P.position,n.value="",console.log("Filled Designation Data:",l)},l=we({employee_id:"",employee_name:"",employee_position:"",tShirtsize:"",pantsSize:"",tShirtPcs:0,tShirtPrice:0,pantsPcs:0,pantsPrice:0,numberOfPayments:1}),u=()=>{l.employee_id="",l.employee_name="",l.employee_position="",r.value=!1,_.value=!1,i.value=0,w.value=0,s(),f()},f=()=>{l.tShirtPcs="",l.tShirtsize="",l.tShirtPrice=""},s=()=>{l.pantsSize="",l.pantsPcs="",l.pantsPrice=""};Be(_,P=>{P||s()}),Be(r,P=>{P||f()}),Be([()=>l.tShirtPrice,()=>l.tShirtPcs,()=>l.pantsPrice,()=>l.pantsPcs],()=>{i.value=l.tShirtPrice*l.tShirtPcs+l.pantsPrice*l.pantsPcs},{immediate:!0}),Be([i,()=>l.numberOfPayments],()=>{w.value=Math.round(i.value/(l.numberOfPayments||1))},{immediate:!0});const L=async()=>{const P={employee_id:l.employee_id,employee_name:l.employee_name,employee_position:l.employee_position,tShirtsize:l.tShirtsize,pantsSize:l.pantsSize,tShirtPcs:l.tShirtPcs,tShirtPrice:l.tShirtPrice,pantsPcs:l.pantsPcs,pantsPrice:l.pantsPrice,totalAmount:i.value,paymentPerPayroll:w.value,numberOfPayments:l.numberOfPayments};console.log("payload",P);try{$.value=!0,await c.createUniforms(P),o.value=!1,u(),b.value=await c.fetchUniform()}catch(x){console.log(x),re.create({type:"negative",message:"error"})}finally{$.value=!1}};return(P,x)=>(p(),U("div",null,[e(M,{padding:"sm md",label:"Add Uniform",icon:"add_circle",size:"md",class:"gradient-btn text-white",onClick:D}),e(he,{modelValue:o.value,"onUpdate:modelValue":x[18]||(x[18]=S=>o.value=S),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:a(()=>[e(O,{style:{width:"600px","max-width":"80vw"}},{default:a(()=>[e(F,{class:"row items-center q-px-md q-py-sm gradient-btn text-white"},{default:a(()=>[po,e($e),ae(e(M,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(F,null,{default:a(()=>[e(q,{modelValue:n.value,"onUpdate:modelValue":[x[0]||(x[0]=S=>n.value=S),V],label:"Search Employee",outlined:"",rounded:"",dense:"",debounce:"500",placeholder:"Enter name"},{append:a(()=>[g.value?(p(),C(me,{key:1,color:"grey",size:"sm"})):(p(),C(H,{key:0,name:"search"}))]),default:a(()=>[n.value?(p(),U("div",_o,[e(O,null,{default:a(()=>[e(De,{separator:""},{default:a(()=>{var S;return[(S=v.value)!=null&&S.length?(p(!0),U(K,{key:1},ye(v.value,j=>(p(),C(te,{onClick:k=>m(j),key:j.id,clickable:""},{default:a(()=>[e(Se,null,{default:a(()=>[B(z(`${j.firstname} ${j.middlename?j.middlename.charAt(0)+".":""} ${j.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(p(),C(te,{key:0},{default:a(()=>[B(" No employee record ")]),_:1}))]}),_:1})]),_:1})])):de("",!0)]),_:1},8,["modelValue"])]),_:1}),e(F,null,{default:a(()=>[t("div",vo,[fo,t("div",yo,z(l.employee_name?l.employee_name:"-------"),1)]),t("div",ho,[go,t("div",bo,z(l.employee_position?l.employee_position:"-------"),1)])]),_:1}),e(F,null,{default:a(()=>[t("div",wo,[t("div",xo,[e(ot,{"keep-color":"",modelValue:r.value,"onUpdate:modelValue":x[1]||(x[1]=S=>r.value=S),label:"T-Shirt",color:"red"},null,8,["modelValue"]),r.value?(p(),U("div",$o,[t("div",null,[e(be,{"keep-color":"",modelValue:l.tShirtsize,"onUpdate:modelValue":x[2]||(x[2]=S=>l.tShirtsize=S),val:"18",label:"18",color:"teal"},null,8,["modelValue"]),e(be,{"keep-color":"",modelValue:l.tShirtsize,"onUpdate:modelValue":x[3]||(x[3]=S=>l.tShirtsize=S),val:"S",label:"S",color:"orange"},null,8,["modelValue"]),e(be,{"keep-color":"",modelValue:l.tShirtsize,"onUpdate:modelValue":x[4]||(x[4]=S=>l.tShirtsize=S),val:"M",label:"M",color:"red"},null,8,["modelValue"]),e(be,{"keep-color":"",modelValue:l.tShirtsize,"onUpdate:modelValue":x[5]||(x[5]=S=>l.tShirtsize=S),val:"L",label:"L",color:"cyan"},null,8,["modelValue"])]),l.tShirtsize?(p(),U("div",Vo,[e(q,{modelValue:l.tShirtPcs,"onUpdate:modelValue":x[6]||(x[6]=S=>l.tShirtPcs=S),dense:"",outlined:"",label:"pcs",style:{width:"100px"}},null,8,["modelValue"]),e(q,{modelValue:l.tShirtPrice,"onUpdate:modelValue":x[7]||(x[7]=S=>l.tShirtPrice=S),dense:"",outlined:"",label:"price",style:{width:"100px"}},null,8,["modelValue"])])):de("",!0)])):de("",!0)]),t("div",ko,[e(ot,{"keep-color":"",modelValue:_.value,"onUpdate:modelValue":x[8]||(x[8]=S=>_.value=S),label:"Pants",color:"brown-6"},null,8,["modelValue"]),_.value?(p(),U("div",So,[e(be,{"keep-color":"",modelValue:l.pantsSize,"onUpdate:modelValue":x[9]||(x[9]=S=>l.pantsSize=S),val:"M",label:"M",color:"red"},null,8,["modelValue"]),e(be,{"keep-color":"",modelValue:l.pantsSize,"onUpdate:modelValue":x[10]||(x[10]=S=>l.pantsSize=S),val:"L",label:"L",color:"cyan"},null,8,["modelValue"]),e(be,{"keep-color":"",modelValue:l.pantsSize,"onUpdate:modelValue":x[11]||(x[11]=S=>l.pantsSize=S),val:"XL",label:"XL",color:"purple-6"},null,8,["modelValue"]),e(be,{"keep-color":"",modelValue:l.pantsSize,"onUpdate:modelValue":x[12]||(x[12]=S=>l.pantsSize=S),val:"XXL",label:"XXL",color:"deep-orange-13"},null,8,["modelValue"]),l.pantsSize?(p(),U("div",Do,[e(q,{modelValue:l.pantsPcs,"onUpdate:modelValue":x[13]||(x[13]=S=>l.pantsPcs=S),dense:"",outlined:"",label:"pcs",style:{width:"100px"}},null,8,["modelValue"]),e(q,{modelValue:l.pantsPrice,"onUpdate:modelValue":x[14]||(x[14]=S=>l.pantsPrice=S),dense:"",outlined:"",label:"price",style:{width:"100px"}},null,8,["modelValue"])])):de("",!0)])):de("",!0)])])]),_:1}),e(F,null,{default:a(()=>[t("div",Ao,[t("div",null,[qo,e(q,{modelValue:l.numberOfPayments,"onUpdate:modelValue":x[15]||(x[15]=S=>l.numberOfPayments=S),outlined:"",flat:"",dense:""},null,8,["modelValue"])]),t("div",null,[Eo,e(q,{modelValue:i.value,"onUpdate:modelValue":x[16]||(x[16]=S=>i.value=S),outlined:"",readonly:"",flat:"",dense:""},null,8,["modelValue"]),Po,e(q,{modelValue:w.value,"onUpdate:modelValue":x[17]||(x[17]=S=>w.value=S),outlined:"",readonly:"",flat:"",dense:""},null,8,["modelValue"])])]),Uo]),_:1}),e(xe,null,{default:a(()=>[e(M,{size:"md",padding:"xs md",label:"save","icon-right":"send",class:"gradient-btn text-white",onClick:L,loading:$.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var Co=X(To,[["__scopeId","data-v-2b527d9a"]]);const zo={class:"row justify-between q-mb-md",align:"right"},No={class:"row q-gutter-md"},Io=t("div",{class:"q-pb-sm text-center text-h6 text-weight-bold text-subtitle2"}," T-Shirt ",-1),Ro={class:"row justify-between"},Bo=t("div",null,"Size :",-1),Fo={class:"row justify-between"},Mo=t("div",null,"PCS :",-1),Lo={class:"row justify-between"},Oo=t("div",null,"PRICE :",-1),jo=t("div",{class:"q-pb-sm text-center text-h6 text-weight-bold text-subtitle2"}," Pants ",-1),Qo={class:"row justify-between"},Ho=t("div",null,"Size :",-1),Ko={class:"row justify-between"},Wo=t("div",null,"PCS :",-1),Yo={class:"row justify-between"},Xo=t("div",null,"PRICE :",-1),Jo={__name:"UniformTable",setup(y){const d=ct(),v=h(""),c=W(()=>d.uniforms),b=h(!1),n=h({rowsPerPage:0});ie(async()=>{await o()});const o=async()=>{try{c.value=await d.fetchUniform(),console.log("uniform",c.value)}catch(D){console.log("error fetching madepakeer",D)}};let r;const _=()=>{b.value=!0,clearTimeout(r),r=setTimeout(()=>{b.value=!1},500)},i=D=>{const V=f=>f?f.charAt(0).toUpperCase()+f.slice(1).toLowerCase():"",m=D.firstname?V(D.firstname):"No Firstname",l=D.middlename?V(D.middlename).charAt(0)+".":"",u=D.lastname?V(D.lastname):"No Lastname";return`${m} ${l} ${u}`.trim()},w=D=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(D),$=D=>{if(!D)return" - - ";const V=new Date(D);return isNaN(V.getTime())?" - - ":V.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},g=[{name:"date",required:!0,label:"Date",align:"left",field:D=>$(D.created_at)},{name:"name",required:!0,label:"Name",align:"left",field:D=>i(D.employee)},{name:"number_of_payments",required:!0,label:"Number of Payments",align:"center",field:"number_of_payments"},{name:"total_amount",required:!0,label:"Total Amount",align:"center",field:D=>w(D.total_amount)},{name:"payments_per_payroll",required:!0,label:"Payments Per Payroll",align:"center",field:D=>w(D.payments_per_payroll)},{name:"t_shirt",label:"T-Shirt",align:"center",field:"t_shirt"},{name:"pants",label:"Pants",align:"center",field:"pants"}];return(D,V)=>(p(),U(K,null,[t("div",zo,[t("div",No,[e(Co)]),e(q,{modelValue:v.value,"onUpdate:modelValue":[V[0]||(V[0]=m=>v.value=m),_],outlined:"",dense:"",flat:"",label:"Search",style:{width:"300px"}},{append:a(()=>[t("div",null,[b.value?(p(),C(me,{key:1,size:"sm"})):(p(),C(H,{key:0,name:"search"}))])]),_:1},8,["modelValue"])]),e(ke,{class:"sticky-header",filter:v.value,rows:c.value,columns:g,"row-key":"name",pagination:n.value,"onUpdate:pagination":V[1]||(V[1]=m=>n.value=m),"hide-bottom":""},{"body-cell-t_shirt":a(m=>[e(J,{props:m},{default:a(()=>[e(ve,{offset:[0,10],delay:600,class:"bg-info text-dark text-subtitle1",style:{width:"200px"}},{default:a(()=>[Io,e(fe,{class:"q-mb-md",color:"yellow"}),(p(!0),U(K,null,ye(m.row.t_shirt,l=>(p(),U("div",{class:"",key:l.size},[t("div",Ro,[Bo,t("div",null,z(l.size),1)]),t("div",Fo,[Mo,t("div",null,z(l.pcs),1)]),t("div",Lo,[Oo,t("div",null,z(w(l.price)),1)])]))),128))]),_:2},1024),e(Me,{square:"",outline:"",color:"red-6",class:"text-white"},{default:a(()=>[B(z(m.row.t_shirt.length)+" T-Shirt ",1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-pants":a(m=>[e(J,{props:m},{default:a(()=>[e(ve,{offset:[0,10],delay:600,class:"bg-info text-dark text-subtitle1",style:{width:"200px"}},{default:a(()=>[jo,e(fe,{class:"q-mb-md",color:"yellow"}),(p(!0),U(K,null,ye(m.row.pants,l=>(p(),U("div",{class:"",key:l.size},[t("div",Qo,[Ho,t("div",null,z(l.size),1)]),t("div",Ko,[Wo,t("div",null,z(l.pcs),1)]),t("div",Yo,[Xo,t("div",null,z(w(l.price)),1)])]))),128))]),_:2},1024),e(Me,{square:"",outline:"",color:"brown-6",class:"text-white"},{default:a(()=>[B(z(m.row.pants.length)+" Pants ",1)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])],64))}},Je=Ve("cash-advance",()=>{const y=h(null),d=h([]);return{cashAdvance:y,cashAdvances:d,createCashAdvance:async n=>{try{const o=await G.post("/api/cash-advance",n);d.value.unshift(o.data),re.create({type:"positive",message:"Cash Advance save",setTimeout:1e3})}catch(o){console.log("CA error",o),re.create({type:"negative",message:"Error saving Cash Advance"})}},fetchCashAdvance:async()=>{try{const n=await G.get("/api/cash-advance");d.value=n.data}catch(n){console.log("===================================="),console.log(n),console.log("====================================")}},searchCashAdvance:async n=>{try{console.log("Searching for employee with keyword:",n);const o=await G.post(`/api/search-cash-advance?keyword=${n}`);console.log("CA response:",o),d.value=o.data}catch(o){console.error("Error searching CA:",o)}}}});const Ge=y=>(oe("data-v-084981bb"),y=y(),ne(),y),Go=Ge(()=>t("div",{class:"text-h5 q-mr-md"},"\u{1F4B2} Add Cash Advance",-1)),Zo={key:0,class:"custom-list z-top"},en={class:"row q-gutter-md text-subtitle1"},tn=Ge(()=>t("div",null,"Name:",-1)),an={class:"text-weight-meduim"},ln={class:"row q-gutter-md text-subtitle1"},on=Ge(()=>t("div",null,"Position:",-1)),nn={class:"text-weight-meduim"},sn={class:"q-gutter-y-md"},rn={__name:"CashAdvanceButton",setup(y){const d=pe(),v=W(()=>d.employees),c=Je(),b=W(()=>c.cashAdvances),n=h(""),o=h(!1),r=h(!1),_=h(!1),i=()=>{_.value=!0},w=async()=>{n.value.trim()&&(r.value=!0,await d.searchEmployee(n.value),r.value=!1)},$=m=>{console.log("Selected Employee:",m),g.employee_id=m.id,g.employee_name=`${m.firstname} ${m.middlename?m.middlename.charAt(0)+".":""} ${m.lastname} `,g.employee_position=m.position,n.value="",console.log("Filled Designation Data:",g)},g=we({employee_id:"",employee_name:"",employee_position:"",amount:"",reason:""}),D=()=>{g.employee_id="",g.employee_name="",g.employee_position="",g.amount="",g.reason=""},V=async()=>{console.log("cashAdvance",g),o.value=!0;try{const m=await c.createCashAdvance(g)}catch(m){console.log(m)}finally{o.value=!1}D(),b.value=await c.fetchCashAdvance(),_.value=!1};return(m,l)=>(p(),U("div",null,[e(M,{padding:"sm md",label:"Cash Advance",icon:"attach_money",size:"md",class:"gradient-btn text-white",onClick:i}),e(he,{modelValue:_.value,"onUpdate:modelValue":l[3]||(l[3]=u=>_.value=u),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:a(()=>[e(O,{style:{width:"400px","max-width":"80vw"}},{default:a(()=>[e(F,{class:"row items-center q-px-md q-py-sm gradient-btn text-white"},{default:a(()=>[Go,e($e),ae(e(M,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(F,null,{default:a(()=>[e(q,{modelValue:n.value,"onUpdate:modelValue":[l[0]||(l[0]=u=>n.value=u),w],label:"Search Employee",outlined:"",rounded:"",dense:"",debounce:"500",placeholder:"Enter name"},{append:a(()=>[r.value?(p(),C(me,{key:1,color:"grey",size:"sm"})):(p(),C(H,{key:0,name:"search"}))]),default:a(()=>[n.value?(p(),U("div",Zo,[e(O,null,{default:a(()=>[e(De,{separator:""},{default:a(()=>{var u;return[(u=v.value)!=null&&u.length?(p(!0),U(K,{key:1},ye(v.value,f=>(p(),C(te,{onClick:s=>$(f),key:f.id,clickable:""},{default:a(()=>[e(Se,null,{default:a(()=>[B(z(`${f.firstname} ${f.middlename?f.middlename.charAt(0)+".":""} ${f.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(p(),C(te,{key:0},{default:a(()=>[B(" No Employee record ")]),_:1}))]}),_:1})]),_:1})])):de("",!0)]),_:1},8,["modelValue"])]),_:1}),e(F,null,{default:a(()=>[t("div",en,[tn,t("div",an,z(g.employee_name?g.employee_name:"-------"),1)]),t("div",ln,[on,t("div",nn,z(g.employee_position?g.employee_position:"-------"),1)])]),_:1}),e(F,null,{default:a(()=>[t("div",sn,[t("div",null,[e(q,{modelValue:g.amount,"onUpdate:modelValue":l[1]||(l[1]=u=>g.amount=u),outlined:"",label:"Amount"},null,8,["modelValue"])]),t("div",null,[e(q,{modelValue:g.reason,"onUpdate:modelValue":l[2]||(l[2]=u=>g.reason=u),filled:"",type:"textarea",outlined:"",label:"Reason"},null,8,["modelValue"])])])]),_:1}),e(xe,null,{default:a(()=>[e(M,{size:"md",padding:"xs md",label:"save","icon-right":"send",class:"gradient-btn text-white",loading:o.value,onClick:V},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var dn=X(rn,[["__scopeId","data-v-084981bb"]]);const un={__name:"SearchCashAdvance",setup(y){const d=Je(),v=h(""),c=h(!1),b=async()=>{c.value=!0,await d.searchCashAdvance(v.value),c.value=!1};return(n,o)=>(p(),U("div",null,[e(q,{modelValue:v.value,"onUpdate:modelValue":[o[0]||(o[0]=r=>v.value=r),b],outlined:"",dense:"",flat:"",label:"Search",style:{width:"300px"}},{append:a(()=>[t("div",null,[c.value?(p(),C(me,{key:1,color:"grey",size:"sm"})):(p(),C(H,{key:0,name:"search"}))])]),_:1},8,["modelValue"])]))}},cn={class:"row justify-between q-mb-md",align:"right"},mn={class:"row q-gutter-md"},pn={__name:"CashAdvanceTable",setup(y){const d=Je(),v=W(()=>d.cashAdvances),c=h({rowsPerPage:0});ie(async()=>{await b()});const b=async()=>{try{v.value=await d.fetchCashAdvance(),console.log("CA",v.value)}catch(i){console.log("===================================="),console.log(i),console.log("====================================")}},n=i=>{const w=V=>V?V.charAt(0).toUpperCase()+V.slice(1).toLowerCase():"",$=i.firstname?w(i.firstname):"No Firstname",g=i.middlename?w(i.middlename).charAt(0)+".":"",D=i.lastname?w(i.lastname):"No Lastname";return`${$} ${g} ${D}`.trim()},o=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(i),r=i=>{if(!i)return" - - ";const w=new Date(i);return isNaN(w.getTime())?" - - ":w.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},_=[{name:"date",label:"Date",align:"left",field:i=>r(i.created_at)},{name:"name",label:"Employee Name",align:"left",field:i=>n(i.employee)},{name:"amount",label:"Amount",align:"center",field:i=>o(i.amount)},{name:"amount",label:"Amount",align:"center",field:"reason"}];return(i,w)=>(p(),U(K,null,[t("div",cn,[t("div",mn,[e(dn)]),e(un)]),e(ke,{rows:v.value,columns:_,class:"sticky-header","row-key":"name",pagination:c.value,"onUpdate:pagination":w[0]||(w[0]=$=>c.value=$),"hide-bottom":""},null,8,["rows","pagination"])],64))}};const _n={class:"q-gutter-y-sm"},vn={__name:"AllowanceDeductionPage",setup(y){const d=h("allowance");return(v,c)=>(p(),U("div",null,[t("div",_n,[e(je,{modelValue:d.value,"onUpdate:modelValue":c[0]||(c[0]=b=>d.value=b),"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:"gradient-btn"},{default:a(()=>[e(ue,{class:"text-white",name:"allowance",icon:"account_balance_wallet",label:"Allowance"}),e(ue,{class:"text-white",name:"benefits",icon:"view_timeline",label:"Benefits"}),e(ue,{class:"text-white",name:"uniform",icon:"settings_accessibility",label:"Uniform"}),e(ue,{class:"text-white",name:"cash-advance",icon:"wallet",label:"Cash Advance"})]),_:1},8,["modelValue"])]),e(Qe,{modelValue:d.value,"onUpdate:modelValue":c[1]||(c[1]=b=>d.value=b),animated:""},{default:a(()=>[e(ce,{name:"allowance"},{default:a(()=>[t("div",null,[e(Yl)])]),_:1}),e(ce,{name:"benefits"},{default:a(()=>[t("div",null,[e(mo)])]),_:1}),e(ce,{name:"uniform"},{default:a(()=>[t("div",null,[e(Jo)])]),_:1}),e(ce,{name:"cash-advance"},{default:a(()=>[t("div",null,[e(pn)])]),_:1})]),_:1},8,["modelValue"])]))}};var fn=X(vn,[["__scopeId","data-v-2dce1b45"]]);const yn={align:"right"},hn={class:"row q-gutter-lg"},gn=["src"],bn={class:"q-mt-lg",style:{"margin-top":"60px"}},wn={class:"text-h5 text-weight-bold elegant-name text-capitalize"},xn={align:"center"},$n={__name:"PayslipPage",setup(y){const d=h([{id:1,name:"John D. Doe",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/boy-avatar.png"},{id:2,name:"Jane Doe",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar2.jpg"},{id:3,name:"Sam Smith",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar1.jpg"},{id:4,name:"Chris Evans",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar4.jpg"},{id:5,name:"Alex Doesss",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar6.jpg"},{id:6,name:"John D. Doe",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/boy-avatar.png"},{id:7,name:"Jane Doe",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar2.jpg"},{id:8,name:"Sam Smith",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar1.jpg"},{id:9,name:"Chris Evans",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar4.jpg"},{id:10,name:"Alex Doe",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar6.jpg"}]);return(v,c)=>(p(),U(K,null,[t("div",yn,[e(q,{class:"q-pb-lg",outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:"",style:{width:"100%","max-width":"600px"}},{append:a(()=>[e(H,{name:"search"})]),_:1})]),t("div",hn,[(p(!0),U(K,null,ye(d.value,b=>(p(),C(wt,{key:b.id,class:"q-ma-md"},{default:a(()=>[e(O,{class:"q-pa-md q-mt-lg user-card",style:{"box-shadow":"0px 6px 14px rgba(0, 0, 0, 0.1)","border-radius":"12px",background:"linear-gradient(135deg, #2c3e50, #4ca1af)"}},{default:a(()=>[e(F,{class:"text-center q-pa-md",style:{position:"relative"}},{default:a(()=>[t("div",null,[e(nt,{size:"80px",color:"primary","text-color":"white",class:"q-ma-lg",style:{margin:"0 auto",position:"absolute",top:"-40px",left:"50%",transform:"translateX(-50%)"}},{default:a(()=>[t("img",{src:b.avatar},null,8,gn)]),_:2},1024)]),t("div",bn,[t("div",wn,z(b.name),1),e(Me,{"text-color":"white",class:"q-mt-sm elegant-chip",style:{"background-color":"#3b82f6","font-size":"14px",padding:"5px 10px"}},{default:a(()=>[B(z(b.position),1)]),_:2},1024),e(Me,{outline:"",square:"",color:"cyan-12",class:"q-mt-sm elegant-chip"},{default:a(()=>[B(" Regular ")]),_:1})])]),_:2},1024),e(fe,{class:"q-ma-sm"}),t("div",xn,[e(M,{padding:"sm md",label:"Open Payslip",size:"md",class:"gradient-btn text-darrk"})])]),_:2},1024)]),_:2},1024))),128))])],64))}};var Vn=X($n,[["__scopeId","data-v-21c1201b"]]);const Ie=y=>(oe("data-v-0272f827"),y=y(),ne(),y),kn={class:"q-pa-md q-gutter-sm flex flex-column items-center"},Sn=Ie(()=>t("div",{class:"text-weight-bold"},"Dashboard",-1)),Dn={class:"q-pa-md q-gutter-sm flex flex-column items-center"},An=Ie(()=>t("div",{class:"text-weight-bold text-lg"},"Employees",-1)),qn={class:"q-pa-md q-gutter-sm flex flex-column items-center"},En=Ie(()=>t("div",{class:"text-weight-bold text-lg"},"Attendance",-1)),Pn={class:"q-pa-md q-gutter-sm flex flex-column items-center"},Un=Ie(()=>t("div",{class:"text-weight-bold text-lg"},"Allowances & Deductions",-1)),Tn={class:"q-pa-sm q-gutter-sm flex flex-column items-center"},Cn=Ie(()=>t("div",{class:"text-weight-bold text-lg"},"Payslip",-1)),zn={__name:"PayrollPage",setup(y){h(),h("");const d=h("dashboard");return(v,c)=>(p(),C(yt,{class:"elegant-container",flat:""},{default:a(()=>[e(je,{modelValue:d.value,"onUpdate:modelValue":c[0]||(c[0]=b=>d.value=b),dense:"",outline:"",flat:"","no-caps":"","inline-label":"",class:"user-tab justify-center q-ma-md",align:"justify","active-color":"teal","indicator-class":"q-tab-indicator-green"},{default:a(()=>[e(ue,{name:"dashboard"},{default:a(()=>[t("div",kn,[e(H,{name:"insert_chart",size:"md",class:Ue(d.value==="dashboard"?"text-teal":"text-grey-7")},null,8,["class"]),Sn])]),_:1}),e(ue,{name:"employees"},{default:a(()=>[t("div",Dn,[e(H,{name:"group",size:"md",class:Ue(d.value==="employees"?"text-teal":"text-grey-7")},null,8,["class"]),An])]),_:1}),e(ue,{name:"attendance"},{default:a(()=>[t("div",qn,[e(H,{name:"access_time",size:"md",class:Ue(d.value==="attendance"?"text-teal":"text-grey-7")},null,8,["class"]),En])]),_:1}),e(ue,{name:"allowances"},{default:a(()=>[t("div",Pn,[e(H,{name:"add_circle_outline",size:"md",class:Ue(d.value==="allowances"?"text-teal":"text-grey-7")},null,8,["class"]),Un])]),_:1}),e(ue,{name:"payslip"},{default:a(()=>[t("div",Tn,[e(H,{name:"payment",size:"md",class:Ue(d.value==="payslip"?"text-teal":"text-grey-7")},null,8,["class"]),Cn])]),_:1})]),_:1},8,["modelValue"]),e(Qe,{modelValue:d.value,"onUpdate:modelValue":c[1]||(c[1]=b=>d.value=b),animated:"",style:{"background-color":"#f7f8fc"}},{default:a(()=>[e(ce,{name:"dashboard"},{default:a(()=>[e(Xt)]),_:1}),e(ce,{name:"employees"},{default:a(()=>[e(qa)]),_:1}),e(ce,{name:"attendance"},{default:a(()=>[e(Bl)]),_:1}),e(ce,{name:"allowances"},{default:a(()=>[e(fn)]),_:1}),e(ce,{name:"payslip"},{default:a(()=>[e(Vn)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var _s=X(zn,[["__scopeId","data-v-0272f827"]]);export{_s as default};
