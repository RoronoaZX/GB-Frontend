import{c as S,r as I,t as $,o as v,a3 as B,f as e,M as y,w as s,Q as D,I as h,ae as U,J as l,K as p,a1 as F,aJ as A,a2 as M,a4 as C,N as k,O as E,R as T,z as H,e as q,a5 as L,a0 as V,$ as N}from"./index.f2a38bfc.js";import{Q as z}from"./QPage.c63a04c9.js";import{Q as K}from"./QSpace.d9fd22eb.js";import{C as J}from"./ClosePopup.8251bbb9.js";import{u as P}from"./incentive-bases.c478ca14.js";import{_ as Q}from"./plugin-vue_export-helper.21dcd24c.js";import{b as R,Q as j,a as O}from"./QTable.905e549e.js";import{Q as G}from"./QTr.d7bb9cc1.js";import{Q as W}from"./QTooltip.d1f9e666.js";import{Q as X}from"./QPopupEdit.de6dcde2.js";import{u as Y}from"./use-quasar.05358767.js";import"./axios.a673ff31.js";import"./QVirtualScroll.1af3d7d7.js";import"./QList.51883198.js";import"./use-virtual-scroll.6d035bc4.js";import"./rtl.276c3f1b.js";import"./QSelect.4996e359.js";import"./QChip.57ca46e5.js";import"./QMenu.a0b892ed.js";import"./position-engine.1925e91d.js";import"./selection.0a9540c6.js";const _=d=>(E("data-v-436a0fa9"),d=d(),T(),d),Z=_(()=>l("div",{class:"text-h6 text-weight-bold text-primary"}," Baker Incentives Settings ",-1)),ee={class:"row q-col-gutter-md"},te={class:"col-6"},oe={class:"col-6"},ae={class:"settings-section"},le=_(()=>l("div",{class:"text-subtitle1 text-weight-medium text-primary q-mb-md"}," Incentives per Role ",-1)),se={class:"q-gutter-y-md"},re={class:"incentive-row"},ne=_(()=>l("div",{class:"role-label"},"Baker",-1)),ie={class:"incentive-row"},ue=_(()=>l("div",{class:"role-label"},"Lamesador",-1)),de={class:"incentive-row"},me=_(()=>l("div",{class:"role-label"},"Hornero",-1)),ce=_(()=>l("div",{class:"q-gutter-y-md"},null,-1)),pe={__name:"AddIncentives",setup(d){const m=P();S(()=>m.incentivesBases);const c=I(!1),f=()=>{c.value=!0},o=$({number_of_employees:0,target:0,baker:0,lamesador:0,hornero:0}),g=()=>{o.number_of_employees=0,o.target=0,o.baker=0,o.lamesador=0,o.hornero=0},x=async()=>{try{await m.createIncentives(o),k.create({message:"Data saved successfully",color:"green",position:"top",timeout:2e3}),g(),c.value=!1}catch(w){console.log("error",w),k.create({message:"Error saving data",color:"red",position:"top",timeout:2e3})}};return(w,r)=>(v(),B(C,null,[e(y,{label:"Add Incentives",onClick:f,rounded:"",class:"gradient-btn q-px-lg q-py-sm text-capitalize text-white"}),e(M,{modelValue:c.value,"onUpdate:modelValue":r[5]||(r[5]=u=>c.value=u)},{default:s(()=>[e(D,{class:"dialog-card q-pa-md"},{default:s(()=>[e(h,{class:"row items-center q-pb-md"},{default:s(()=>[Z,e(K),U(e(y,{icon:"close",flat:"",dense:"",round:""},null,512),[[J]])]),_:1}),e(h,{class:"q-pt-none"},{default:s(()=>[l("div",ee,[l("div",te,[e(p,{modelValue:o.number_of_employees,"onUpdate:modelValue":r[0]||(r[0]=u=>o.number_of_employees=u),outlined:"",dense:"",label:"Number of Employees",type:"number",color:"primary","bg-color":"white","input-class":"q-pl-sm",class:"role-input"},null,8,["modelValue"])]),l("div",oe,[e(p,{modelValue:o.target,"onUpdate:modelValue":r[1]||(r[1]=u=>o.target=u),outlined:"",dense:"",label:"Target Kilo",type:"number",color:"primary","bg-color":"white","input-class":"q-pl-sm"},null,8,["modelValue"])])]),e(F,{class:"q-my-lg"}),l("div",ae,[le,l("div",se,[l("div",re,[ne,e(p,{modelValue:o.baker,"onUpdate:modelValue":r[2]||(r[2]=u=>o.baker=u),outlined:"",dense:"",label:"Multiplied by:",type:"number",color:"primary","bg-color":"white","input-class":"q-pl-sm"},null,8,["modelValue"])]),l("div",ie,[ue,e(p,{modelValue:o.lamesador,"onUpdate:modelValue":r[3]||(r[3]=u=>o.lamesador=u),outlined:"",dense:"",label:"Multiplied by:",type:"number",color:"primary","bg-color":"white","input-class":"q-pl-sm"},null,8,["modelValue"])]),l("div",de,[me,e(p,{modelValue:o.hornero,"onUpdate:modelValue":r[4]||(r[4]=u=>o.hornero=u),outlined:"",dense:"",label:"Pesos:",type:"number",color:"primary","bg-color":"white","input-class":"q-pl-sm"},null,8,["modelValue"])])]),ce])]),_:1}),e(A,{align:"right",class:"q-pa-md"},{default:s(()=>[e(y,{color:"primary",label:"Save",onClick:x,rounded:"",class:"q-px-lg q-py-sm text-capitalize"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var _e=Q(pe,[["__scopeId","data-v-436a0fa9"]]);const fe=d=>(E("data-v-5edbc55c"),d=d(),T(),d),be={class:"q-pa-md",style:{"min-width":"300px","max-width":"400px"}},ve=fe(()=>l("div",{class:"text-h6 text-primary text-center q-mb-sm"}," Edit Number of Employees ",-1)),ye={class:"row justify-end q-mt-md"},ge={__name:"IncentivesTable",setup(d){const m=P(),c=S(()=>m.incentivesBases),f=Y(),o=I(null),g=I(!1),x=async(t,a)=>{if(Number(a)===Number(t.number_of_employees)){console.log("Value did not change, no API call made.");return}g.value=!0;try{await m.updateNumberEmployee(t.id,a),t.number_of_employees=a,f.notify({type:"positive",message:"Number of employees updated successfully."})}catch(n){if(console.error(n),n.response&&n.response.status===422){const i=n.response.data.error;f.notify({type:"negative",message:i||"An unexpected validation error occurred."})}else f.notify({type:"negative",message:"An error occurred while updating the number of employees."})}finally{g.value=!1}};H(async()=>{await m.fetchIncentivesBases()});const r=t=>{const a=parseFloat(t)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(a)},u=[{name:"number_of_employees",required:!0,label:"Number of Employee",align:"center",field:t=>t.number_of_employees},{name:"target",required:!0,label:"Target Kilo",align:"center",field:t=>t.target},{name:"baker_multiplier",required:!0,label:"Baker Multiplier",align:"center",field:t=>t.baker_multiplier,format:t=>{const a=parseFloat(t);return a?`x${a%1===0?a.toFixed(0):a}`:"0"}},{name:"lamesador_multiplier",required:!0,label:"Lamesador Multiplier",align:"center",field:t=>t.lamesador_multiplier,format:t=>{const a=parseFloat(t);return a?`x${a%1===0?a.toFixed(0):a}`:"0"}},{name:"hornero_incentives",required:!0,label:"Hornero Incentives",align:"center",field:t=>t.hornero_incentives,format:t=>r(t)}];return(t,a)=>(v(),q(O,{rows:c.value,columns:u},{header:s(n=>[e(G,{props:n,class:"gradient-header text-white text-weight-bold"},{default:s(()=>[(v(!0),B(C,null,L(n.cols,i=>(v(),q(R,{key:i.name,props:n,class:"text-center text-subtitle2"},{default:s(()=>[V(N(i.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell-number_of_employees":s(n=>[e(j,{props:n,class:"cursor-pointer"},{default:s(()=>[l("span",null,[V(N(n.row.number_of_employees?n.row.number_of_employees:" - - ")+" ",1),e(W,{class:"bg-blue-grey-8"},{default:s(()=>[V(" Edit Number of Employees ")]),_:1})]),e(X,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=i=>o.value=i),onBeforeShow:i=>o.value=n.row.number_of_employees,onHide:i=>x(n.row,i)},{default:s(i=>[l("div",be,[ve,e(p,{modelValue:i.value,"onUpdate:modelValue":b=>i.value=b,modelModifiers:{number:!0},outlined:"",dense:"",label:"Number of Employees",type:"number",autofocus:"",clearable:"",rules:[b=>!!b||"Number of employees is required",b=>b>0||"Number of employees must be greater than 0"]},null,8,["modelValue","onUpdate:modelValue","rules"]),l("div",ye,[e(y,{flat:"",label:"Close",color:"primary",onClick:i.cancel},null,8,["onClick"]),e(y,{flat:"",label:"Save",color:"primary",onClick:i.set},null,8,["onClick"])])])]),_:2},1032,["modelValue","onBeforeShow","onHide"])]),_:2},1032,["props"])]),_:1},8,["rows"]))}};var he=Q(ge,[["__scopeId","data-v-5edbc55c"]]);const xe={__name:"IncentivesPage",setup(d){return(m,c)=>(v(),q(z,{class:"q-pa-md"},{default:s(()=>[e(h,null,{default:s(()=>[e(_e)]),_:1}),e(h,null,{default:s(()=>[e(he)]),_:1})]),_:1}))}};var ze=Q(xe,[["__scopeId","data-v-ded65fc0"]]);export{ze as default};
