import{bd as xe,c as z,r as P,t as Oe,o as w,a2 as N,f as e,M as D,w as t,Q as O,I as R,ad as se,J as o,K as F,L as ie,e as L,$ as S,a3 as K,a4 as be,_ as b,bc as Ee,aI as Pe,a1 as W,a0 as Ye,N as ke,O as ae,R as oe,z as $e,u as Ae,ba as te,aJ as mt,be as Y,d as pt,P as je,aH as _t,H as gt}from"./index.ce1ba89f.js";import{Q as Ne}from"./QSpace.0e5d3e72.js";import{Q as Fe,a as pe,b as Le,c as _e}from"./QTabPanels.1213f832.js";import{Q as ft}from"./QPage.da9ac2da.js";import{Q as Ue,a as he,b as J}from"./QList.58c81567.js";import{b as ne}from"./use-virtual-scroll.09cf1884.js";import{C as re}from"./ClosePopup.19e4b701.js";import{u as Xe}from"./branch-product.598b9401.js";import{u as ot}from"./product.2a9fe761.js";import{Q as Ge}from"./QSpinnerDots.88bc952f.js";import{Q as j,a as fe}from"./QTable.d5ea8c89.js";import{Q as ue}from"./QBadge.0d6c1bb8.js";import{Q as de}from"./QTooltip.39a847ff.js";import{Q as le}from"./QPopupEdit.f34825bf.js";import{_ as X}from"./plugin-vue_export-helper.21dcd24c.js";import{api as Z}from"./axios.198f3ab8.js";import{u as Ze}from"./branch-rawMaterials.ab9e9b60.js";import{u as vt}from"./raw-material.eb715cb5.js";import{u as Ve}from"./use-dialog-plugin-component.fe0cd127.js";import{Q as bt}from"./QMenu.a54c0024.js";import{q as ge}from"./date.edcbc5a2.js";import{u as Se}from"./use-quasar.63fb7da3.js";import{p as Ke,v as nt}from"./vfs_fontes.3eb8cb31.js";import{Q as De}from"./QScrollArea.d80ab0b1.js";import{u as Te,a as Me,b as Je}from"./other-product.df92edca.js";import{Q as We}from"./QSelect.311c7ad7.js";import{u as yt}from"./recipe.ce6f34e3.js";import{u as Qe}from"./branch-recipe.adc123d9.js";import"./QResizeObserver.31764164.js";import"./use-panel.dd28fb0a.js";import"./touch.9135741d.js";import"./selection.aac5f9ba.js";import"./QVirtualScroll.ac60e723.js";import"./QScrollObserver.6ca70842.js";import"./TouchPan.10cc36e7.js";import"./QChip.9495ae28.js";const ht=o("div",{class:"text-h6"},"Create Branch Product",-1),wt={class:"q-mb-lg"},kt={key:0,class:"custom-list z-top"},xt=o("div",null,"Product Name",-1),$t=o("div",null,"Category",-1),Vt={class:"row justify-between"},Ct=o("div",null,"Beginnings",-1),Rt=o("div",null,"Total Quantity",-1),St=o("div",null,"Price",-1),Pt={__name:"ProductCreate",setup(r){const y=xe(),k=ot(),x=z(()=>k.products),g=Xe(),m=P(""),$=async()=>{k.searchProducts(m.value)},d=z(()=>V.price!==0&&V.beginnings!==0&&V.total_quantity!==0),f=P(!1),_=()=>{f.value=!0},i=()=>{p(),f.value=!1},h=a=>a?a.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",u=a=>{V.product_id=a.id,V.product_name=a.name,V.category=a.category,m.value=""},V=Oe({product_id:"",product_name:"",price:0,beginnings:0,total_quantity:0,branches_id:y.params.branch_id}),p=()=>{V.product_id="",V.product_name="",V.category="",V.price=0,V.beginnings=0,V.total_quantity=0},c=async()=>{try{const{product_name:a,...l}=V;await g.createBranchProducts(l),console.log("data to send",l),p(),f.value=!1}catch(a){console.log(a)}};return(a,l)=>(w(),N(K,null,[e(D,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Product",onClick:_}),e(W,{modelValue:f.value,"onUpdate:modelValue":l[6]||(l[6]=n=>f.value=n),persistent:""},{default:t(()=>[e(O,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(R,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[ht,e(Ne),se(e(D,{icon:"close",flat:"",dense:"",round:""},null,512),[[re]])]),_:1}),e(R,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[o("div",wt,[e(F,{modelValue:m.value,"onUpdate:modelValue":[l[0]||(l[0]=n=>m.value=n),$],debounce:"1000",outlined:"",rounded:"",placeholder:"Search product",dense:""},{append:t(()=>[o("div",null,[e(ie,{name:"search"})])]),default:t(()=>[m.value?(w(),N("div",kt,[e(O,null,{default:t(()=>[e(Ue,{separator:""},{default:t(()=>{var n;return[(n=x.value)!=null&&n.length?(w(!0),N(K,{key:1},be(x.value,s=>(w(),L(he,{onClick:C=>u(s),key:s.id,clickable:""},{default:t(()=>[e(J,null,{default:t(()=>[e(ne,null,{default:t(()=>[S(b(h(s.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(w(),L(he,{key:0},{default:t(()=>[S(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ee("",!0)]),_:1},8,["modelValue"])]),o("div",null,[xt,e(F,{modelValue:V.product_name,"onUpdate:modelValue":l[1]||(l[1]=n=>V.product_name=n),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),o("div",null,[$t,e(F,{modelValue:V.category,"onUpdate:modelValue":l[2]||(l[2]=n=>V.category=n),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),o("div",Vt,[o("div",null,[Ct,e(F,{modelValue:V.beginnings,"onUpdate:modelValue":l[3]||(l[3]=n=>V.beginnings=n),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),o("div",null,[Rt,e(F,{modelValue:V.total_quantity,"onUpdate:modelValue":l[4]||(l[4]=n=>V.total_quantity=n),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])]),o("div",null,[St,e(F,{modelValue:V.price,"onUpdate:modelValue":l[5]||(l[5]=n=>V.price=n),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])]),_:1}),e(Pe,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(D,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:i}),e(D,{class:"glossy",color:"teal",label:"Create",onClick:c,disable:!d.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const lt=r=>(ae("data-v-196482e9"),r=r(),oe(),r),Nt=lt(()=>o("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),Ut=lt(()=>o("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),Dt={__name:"ProductDelete",props:["delete"],setup(r){const y=Xe(),k=r;console.log("delte",k.delete.row.id);const x=async()=>{try{await y.deleteBranchProducts(k.delete.row.id),ke.create({type:"negative",icon:"warning",message:"Branch product successfully deleted",timeout:1e3,position:"top"}),g.value=!1}catch($){console.error($.message)}},g=P(!1),m=()=>{console.log("ID",k.delete.row.id),g.value=!0};return($,d)=>(w(),N(K,null,[e(D,{onClick:m,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"",align:"center"},{default:t(()=>[e(de,{class:"bg-negative",delay:200},{default:t(()=>[S("Delete")]),_:1})]),_:1}),e(W,{modelValue:g.value,"onUpdate:modelValue":d[0]||(d[0]=f=>g.value=f)},{default:t(()=>[e(O,null,{default:t(()=>[e(R,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[Nt,Ut]),_:1}),e(Ye,{class:"q-mb-md"}),e(R,null,{default:t(()=>[e(Pe,{align:"right",class:"q-pt-none"},{default:t(()=>[se(e(D,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[re]]),e(D,{dense:"",label:"Delete",color:"negative",onClick:x,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var qt=X(Dt,[["__scopeId","data-v-196482e9"]]);const Tt=r=>(ae("data-v-c74b6072"),r=r(),oe(),r),At={class:"row justify-between"},Bt={class:"q-my-sm"},It={key:0,class:"spinner-wrapper"},Ft={key:1},Lt={key:0,class:"data-error"},Mt=Tt(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),zt={key:1},Ot={__name:"ProductTable",setup(r){const k=xe().params.branch_id,x=Xe(),g=P(""),m=P(!0),$=P([]),d=P(!1),f=P({rowsPerPage:0}),_=z(()=>x.branchProducts);console.log("branchssdfrer",_.value);const i=z(()=>g.value?_.value.filter(s=>s.name.toLowerCase().includes(g.value.toLowerCase())):_.value),h=s=>s?s.split(" ").map(C=>C.charAt(0).toUpperCase()+C.slice(1).toLowerCase()).join(" "):"";$e(async()=>{k&&await u(k)});const u=async s=>{try{m.value=!0;const C=await x.fetchBranchProducts(s);_.value=C,_.value.length||(d.value=!0),console.log("Branch product",_.value)}catch(C){console.log("Error fetching branch product:",C),d.value=!0}finally{m.value=!1}};Ae(g,async s=>{m.value=!0,await new Promise(C=>setTimeout(C,1e3)),m.value=!1,d.value=i.value.length===0});async function V(s,C){try{const U=await Z.put("/api/update-branch-products/"+s.id,{price:parseInt(C)});if(U.status===200){const T=$.value.findIndex(v=>v.id==s.id);$.value[T]=parseInt(C),ke.create({type:"positive",message:U.data.message,timout:1e3,position:"top"})}}catch(U){console.error("Error updating price:",U)}}async function p(s,C){try{const U=await Z.put("/api/update-branch-products-beginnings/"+s.id,{beginnings:parseInt(C)});if(U.status===200){const T=$.value.findIndex(v=>v.id==s.id);$.value[T]=parseInt(C),ke.create({type:"positive",message:U.data.message,timout:1e3,position:"top"})}}catch(U){console.error("Error updating price:",U)}}async function c(s,C){try{const U=await Z.put("/api/update-branch-products-total-quantity/"+s.id,{total_quantity:parseInt(C)});if(U.status===200){const T=$.value.findIndex(v=>v.id==s.id);$.value[T]=parseInt(C),ke.create({type:"positive",message:U.data.message,timout:1e3,position:"top"})}}catch(U){console.error("Error updating price:",U)}}const a=s=>{switch(s){case"Bread":return"brown";case"Selecta":return"red-6";case"Softdrinks":return"accent";default:return"grey"}},l=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(s),n=[{name:"name",label:"Product Name",align:"center",field:s=>s.product.name,format:s=>`${s}`,sortable:!0},{name:"category",align:"center",label:"Category",field:"category",sortable:!0},{name:"price",align:"center",label:"Price",field:s=>l(s),sortable:!0},{name:"beginnings",align:"center",label:"Beginnings",field:"beginnings",format:s=>`${s} pcs`,sortable:!0},{name:"total_quantity",align:"center",label:"Quantity",field:"total_quantity",format:s=>`${s} pcs`,sortable:!0},{name:"action",align:"center",label:"Action",field:"action",sortable:!0}];return(s,C)=>(w(),N(K,null,[o("div",At,[o("div",null,[e(F,{class:"q-pb-lg q-pl-md",modelValue:g.value,"onUpdate:modelValue":C[0]||(C[0]=U=>g.value=U),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"1500px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(ie,{name:"search"})]),_:1},8,["modelValue"])]),o("div",Bt,[e(Pt)])]),m.value?(w(),N("div",It,[e(Ge,{size:"50px",color:"primary"})])):(w(),N("div",Ft,[i.value.length===0?(w(),N("div",Lt,[e(ie,{name:"warning",color:"warning",size:"4em"}),Mt])):(w(),L(fe,{key:1,class:"table-container sticky-header",filter:g.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:n,rows:i.value,"row-key":"name","virtual-scroll":"",pagination:f.value,"onUpdate:pagination":C[1]||(C[1]=U=>f.value=U),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"}},{"body-cell-name":t(U=>[e(j,{key:"name",props:U},{default:t(()=>{var T;return[S(b((T=U.row.product)!=null&&T.name?h(U.row.product.name):"No data available"),1)]}),_:2},1032,["props"])]),"body-cell-category":t(U=>[e(j,{key:"name",props:U},{default:t(()=>[U.row.category?(w(),L(ue,{key:0,color:a(U.row.category)},{default:t(()=>[S(b(U.row.category),1)]),_:2},1032,["color"])):(w(),N("span",zt,"No data available"))]),_:2},1032,["props"])]),"body-cell-price":t(U=>[e(j,{props:U,class:"cursor-pointer"},{default:t(()=>[o("span",null,[S(b(l(U.row.price))+" ",1),e(de,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[S("Edit Price")]),_:1})]),e(le,{"onUpdate:modelValue":[T=>V(U.row,T),T=>U.row.price=T],modelValue:U.row.price,"auto-save":""},{default:t(T=>[e(F,{modelValue:T.value,"onUpdate:modelValue":v=>T.value=v,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(T.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(U=>[e(j,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[o("span",null,[S(b(U.row.beginnings?U.row.beginnings:"Set Beginnings")+" ",1),e(de,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[S("Edit beginnings")]),_:1})]),e(le,{"onUpdate:modelValue":[T=>p(U.row,T),T=>U.row.beginnings=T],modelValue:U.row.beginnings,"auto-save":""},{default:t(T=>[e(F,{modelValue:T.value,"onUpdate:modelValue":v=>T.value=v,dense:"",autofocus:"",counter:"",mask:"#####",onKeyup:te(T.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-total_quantity":t(U=>[e(j,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[o("span",null,[S(b(U.row.total_quantity?U.row.total_quantity:"Set Quantity")+" ",1),e(de,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[S("Edit quantity")]),_:1})]),e(le,{"onUpdate:modelValue":[T=>c(U.row,T),T=>U.row.total_quantity=T],modelValue:U.row.total_quantity,"auto-save":""},{default:t(T=>[e(F,{modelValue:T.value,"onUpdate:modelValue":v=>T.value=v,dense:"",autofocus:"",counter:"",mask:"#####",onKeyup:te(T.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-action":t(U=>[e(j,{class:"q-gutter-x-md",props:U},{default:t(()=>[e(qt,{delete:U},null,8,["delete"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Ht=X(Ot,[["__scopeId","data-v-c74b6072"]]);const jt={class:"q-gutter-sm"},Kt={__name:"ProductPage",setup(r){return(y,k)=>(w(),N("div",jt,[o("div",null,[e(Ht)])]))}},Qt=o("div",{class:"text-h6"},"Create Branch Raw Materials",-1),Et={class:"q-mb-lg"},Yt={key:0,class:"custom-list z-top"},Gt=o("div",null,"Raw Materials Code",-1),Jt=o("div",null,"Raw Materials Name",-1),Wt=o("div",null,"Category",-1),Xt=o("div",null,"Quantity",-1),Zt={__name:"RawMaterialsCreate",setup(r){const y=xe(),k=vt(),x=z(()=>k.rawMaterials),g=Ze(),m=P(""),$=async()=>{k.searchRawMaterials(m.value)},d=z(()=>u.total_quantity!==""),f=P(!1),_=()=>{f.value=!0},i=()=>{V(),f.value=!1},h=c=>{u.ingredients_id=c.id,u.ingredient_name=c.name,u.ingredient_code=c.code,u.category=c.category,u.unit=c.unit,m.value=""},u=Oe({ingredients_id:"",ingredient_name:"",ingredient_code:"",total_quantity:"",category:"",unit:"",branch_id:y.params.branch_id}),V=()=>{u.ingredients_id="",u.ingredient_name="",u.ingredient_code="",u.total_quantity="",u.ingredients_id="",u.category="",u.unit=""},p=async()=>{try{const{product_name:c,...a}=u;await g.createBranchRawMaterials(a),console.log("data to send",a),V(),f.value=!1}catch(c){console.log(c)}};return(c,a)=>(w(),N(K,null,[e(D,{outline:"",class:"text-dark q-pa-sm",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Raw Material",onClick:_,style:{background:"#f43f5e"}}),e(W,{modelValue:f.value,"onUpdate:modelValue":a[5]||(a[5]=l=>f.value=l),persistent:""},{default:t(()=>[e(O,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(R,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[Qt,e(Ne),se(e(D,{icon:"close",flat:"",dense:"",round:""},null,512),[[re]])]),_:1}),e(R,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[o("div",Et,[e(F,{modelValue:m.value,"onUpdate:modelValue":[a[0]||(a[0]=l=>m.value=l),$],debounce:"1000",outlined:"",rounded:"",placeholder:"Search Raw Materials",dense:""},{append:t(()=>[o("div",null,[e(ie,{name:"search"})])]),default:t(()=>[m.value?(w(),N("div",Yt,[e(O,null,{default:t(()=>[e(Ue,{separator:""},{default:t(()=>{var l;return[(l=x.value)!=null&&l.length?(w(!0),N(K,{key:1},be(x.value,n=>(w(),L(he,{onClick:s=>h(n),key:n.id,clickable:""},{default:t(()=>[e(J,null,{default:t(()=>[e(ne,null,{default:t(()=>[S(b(n.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(w(),L(he,{key:0},{default:t(()=>[S(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ee("",!0)]),_:1},8,["modelValue"])]),o("div",null,[Gt,e(F,{modelValue:u.ingredient_code,"onUpdate:modelValue":a[1]||(a[1]=l=>u.ingredient_code=l),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),o("div",null,[Jt,e(F,{modelValue:u.ingredient_name,"onUpdate:modelValue":a[2]||(a[2]=l=>u.ingredient_name=l),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),o("div",null,[Wt,e(F,{modelValue:u.category,"onUpdate:modelValue":a[3]||(a[3]=l=>u.category=l),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),o("div",null,[Xt,e(F,{modelValue:u.total_quantity,"onUpdate:modelValue":a[4]||(a[4]=l=>u.total_quantity=l),type:"number",outlined:"",suffix:u.unit||"",dense:"",rules:[l=>l&&l.length>0||"Total quantity is required"]},null,8,["modelValue","suffix","rules"])])]),_:1}),e(Pe,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(D,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:i}),e(D,{class:"glossy",color:"teal",label:"Create",onClick:p,disable:!d.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const st=r=>(ae("data-v-17ad5e9f"),r=r(),oe(),r),ea=st(()=>o("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),ta=st(()=>o("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),aa={__name:"RawMaterialsTableDelete",props:["delete"],setup(r){const y=Ze(),k=r,x=async()=>{console.log("clickkkd");try{await y.deleteBranchRawMaterials(k.delete.row.id),ke.create({type:"negative",icon:"warning",message:`Raw Materials ${k.delete.row.name}  successfully deleted`,timeout:1e3,position:"top"}),g.value=!1}catch($){console.error($.message)}},g=P(!1),m=()=>{g.value=!0};return($,d)=>(w(),N(K,null,[e(D,{onClick:m,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"",align:"center"},{default:t(()=>[e(de,{class:"bg-negative",delay:200},{default:t(()=>[S("Delete")]),_:1})]),_:1}),e(W,{modelValue:g.value,"onUpdate:modelValue":d[0]||(d[0]=f=>g.value=f)},{default:t(()=>[e(O,null,{default:t(()=>[e(R,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[ea,ta]),_:1}),e(Ye,{class:"q-mb-md"}),e(R,null,{default:t(()=>[e(Pe,{align:"right",class:"q-pt-none"},{default:t(()=>[se(e(D,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[re]]),e(D,{dense:"",label:"Delete",color:"negative",onClick:x,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var oa=X(aa,[["__scopeId","data-v-17ad5e9f"]]);const rt=r=>(ae("data-v-74a3fea6"),r=r(),oe(),r),na={class:"row justify-between"},la={class:"q-my-sm"},sa={key:0,class:"spinner-wrapper"},ra={key:1},ia={key:0,class:"data-error"},da=rt(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),ca=rt(()=>o("div",{class:"text-white"},"Edit Available Stocks",-1)),ua={class:"row justify-center q-gutter-x-md"},ma={__name:"RawMaterialsTable",setup(r){const k=xe().params.branch_id,x=Ze(),g=P(""),m=P(!0),$=P([]),d=P(!1),f=P({rowsPerPage:0}),_=z(()=>x.branchRawMaterials),i=z(()=>g.value?_.value.filter(a=>a.name.toLowerCase().includes(g.value.toLowerCase())):_.value);$e(async()=>{console.log("props.branchId in onMounted:",k),k&&await h(k)});const h=async a=>{try{m.value=!0;const l=await x.fetchBranchRawMaterials(a);_.value=l,_.value.length||(d.value=!0),console.log("Branch Raw Materials",_.value)}catch(l){console.log("Error fetching branch product:",l),d.value=!0}finally{m.value=!1}};async function u(a,l){try{const n=await Z.put("/api/update-branch-rawMaterials/"+a.id,{total_quantity:parseInt(l)});if(n.status===200){const s=$.value.findIndex(C=>C.id==a.id);$.value[s]=parseInt(l),ke.create({type:"positive",message:n.data.message,timout:1e3,position:"top"})}}catch(n){console.error("Error updating price:",n)}}Ae(g,async a=>{m.value=!0,await new Promise(l=>setTimeout(l,1e3)),m.value=!1,d.value=i.value.length===0});const V=a=>{const l=a.total_quantity;if(a.ingredients.unit==="Grams"&&l<1e3)return"bg-red";let s;return l>=1e3?s=l/1e3:s=l,s<5?s<=2?"bg-red":(s<=3,"bg-warning"):"bg-positive"},p=a=>{const l=a.total_quantity,n=a.ingredients.unit;if(l>1e3){const s=(l/1e3).toFixed(2);return s.endsWith(".00")?`${Math.round(l/1e3)} kilos`:`${s} kilos`}else return l>1?`${l} ${n}`:`${l} ${n}`},c=[{name:"code",label:"Raw Materials Code",align:"center",field:a=>{var l,n;return(n=(l=a==null?void 0:a.ingredients)==null?void 0:l.code)!=null?n:"No Code"},format:a=>`${a}`,sortable:!0},{name:"name",label:"Raw Materials Name",align:"center",field:a=>{var l,n;return(n=(l=a==null?void 0:a.ingredients)==null?void 0:l.name)!=null?n:"No Code"},format:a=>`${a}`,sortable:!0},{name:"total_quantity",label:"Available Stocks",align:"center",field:"total_quantity",sortable:!0},{name:"action",label:"Action",align:"center",sortable:!0}];return(a,l)=>(w(),N(K,null,[o("div",na,[o("div",null,[e(F,{class:"q-pb-lg q-pl-md",modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=n=>g.value=n),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"5000px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(ie,{name:"search"})]),_:1},8,["modelValue"])]),o("div",la,[e(Zt)])]),m.value?(w(),N("div",sa,[e(Ge,{size:"50px",color:"primary"})])):(w(),N("div",ra,[i.value.length===0?(w(),N("div",ia,[e(ie,{name:"warning",color:"warning",size:"4em"}),da])):(w(),L(fe,{key:1,class:"table-container sticky-header",filter:g.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:c,rows:i.value,"row-key":"name","virtual-scroll":"",pagination:f.value,"onUpdate:pagination":l[1]||(l[1]=n=>f.value=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"340px"}},{"body-cell-total_quantity":t(n=>[e(j,{props:n},{default:t(()=>[e(ue,{square:"",class:mt(["text-white cursor-pointer",V(n.row)])},{default:t(()=>[S(b(p(n.row))+" ",1),e(de,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[ca]),_:1}),e(le,{"onUpdate:modelValue":[s=>u(n.row,s),s=>n.row.total_quantity=s],modelValue:n.row.total_quantity,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",suffix:n.row.ingredients.unit,mask:"########",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","suffix","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["class"])]),_:2},1032,["props"])]),"body-cell-action":t(n=>[e(j,{props:n},{default:t(()=>[o("div",ua,[e(oa,{delete:n},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var pa=X(ma,[["__scopeId","data-v-74a3fea6"]]);const _a={class:"q-gutter-sm"},ga={class:"q-gutter-x-sm"},fa={__name:"RawMaterialsPage",setup(r){return(y,k)=>(w(),N("div",_a,[o("div",ga,[e(ue,{label:"Good",class:"text-white",color:"positive"}),e(ue,{label:"Warning",class:"text-white",color:"warning"}),e(ue,{label:"Danger",class:"text-white",color:"red"})]),o("div",null,[e(pa)])]))}};const va=r=>(ae("data-v-2e420de9"),r=r(),oe(),r),ba={class:"text-h6 text-white"},ya=va(()=>o("div",{class:"text-h6",align:"center"},"Bread List",-1)),ha={__name:"BreadView",props:["breadProduction","branchRecipe"],setup(r){const{dialogRef:y,onDialogHide:k,onDialogOK:x,onDialogCancel:g}=Ve();console.log("breadReportsaaasss",r.breadProduction);const $=d=>d?d.split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1).toLowerCase()).join(" "):"";return(d,f)=>(w(),L(W,{ref_key:"dialogRef",ref:y,onHide:Y(k)},{default:t(()=>[e(O,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,{class:"row bg-backgroud text-h6"},{default:t(()=>{var _,i,h,u;return[o("div",ba,b(`${$((i=(_=r.branchRecipe)==null?void 0:_.recipe)==null?void 0:i.name)} - ${(u=(h=r.branchRecipe)==null?void 0:h.recipe)==null?void 0:u.category}`),1),e(Ne),o("div",null,[se((w(),L(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(de,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[re]])])]}),_:1}),e(R,null,{default:t(()=>[ya]),_:1}),e(R,null,{default:t(()=>[e(Ue,{dense:"",separator:"",class:"box"},{default:t(()=>[e(he,null,{default:t(()=>[e(J,null,{default:t(()=>[e(ne,{class:"text-overline"},{default:t(()=>[S("Bread Name")]),_:1})]),_:1}),e(J,{side:""},{default:t(()=>[e(ne,{class:"text-overline text-center"},{default:t(()=>[S("Pieces")]),_:1})]),_:1})]),_:1}),(w(!0),N(K,null,be(r.breadProduction,(_,i)=>(w(),L(he,{key:i},{default:t(()=>[e(J,null,{default:t(()=>[e(ne,{class:"text-caption"},{default:t(()=>{var h;return[S(b($((h=_==null?void 0:_.bread)==null?void 0:h.name)),1)]}),_:2},1024)]),_:2},1024),e(J,{side:""},{default:t(()=>[e(ne,{class:"text-caption text-center"},{default:t(()=>[S(b(`${_==null?void 0:_.bread_production} `),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var wa=X(ha,[["__scopeId","data-v-2e420de9"]]);const ka=r=>(ae("data-v-961b0a22"),r=r(),oe(),r),xa={class:"text-h6 text-white"},$a=ka(()=>o("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Va={__name:"IngredientsView",props:["ingredientProduction","branchRecipe"],setup(r){const{dialogRef:y,onDialogHide:k,onDialogOK:x,onDialogCancel:g}=Ve();console.log("ingredientProduction",r.ingredientProduction);const $=f=>{const _=Number(f.quantity)||0,i=f.unit||"";return _>1e3?`${parseFloat((_/1e3).toFixed(3))} kg`:_>1?`${parseFloat(_.toFixed(3))} ${i}`:`${parseFloat(_.toFixed(3))} ${i}`},d=f=>f?f.split(" ").map(_=>_.charAt(0).toUpperCase()+_.slice(1).toLowerCase()).join(" "):"";return(f,_)=>(w(),L(W,{ref_key:"dialogRef",ref:y,onHide:Y(k)},{default:t(()=>[e(O,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,{class:"row bg-backgroud text-h6"},{default:t(()=>{var i,h,u,V;return[o("div",xa,b(`${d((h=(i=r.branchRecipe)==null?void 0:i.recipe)==null?void 0:h.name)} - ${(V=(u=r.branchRecipe)==null?void 0:u.recipe)==null?void 0:V.category}`),1),e(Ne),o("div",null,[se((w(),L(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(de,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[re]])])]}),_:1}),e(R,null,{default:t(()=>[$a]),_:1}),e(R,null,{default:t(()=>[e(Ue,{dense:"",separator:"",class:"box"},{default:t(()=>[e(he,null,{default:t(()=>[e(J,null,{default:t(()=>[e(ne,{class:"text-overline"},{default:t(()=>[S("Raw Materials Name")]),_:1})]),_:1}),e(J,null,{default:t(()=>[e(ne,{class:"text-overline"},{default:t(()=>[S("Code")]),_:1})]),_:1}),e(J,{side:""},{default:t(()=>[e(ne,{class:"text-overline"},{default:t(()=>[S("Quantity")]),_:1})]),_:1})]),_:1}),(w(!0),N(K,null,be(r.ingredientProduction,(i,h)=>(w(),L(he,{key:h},{default:t(()=>[e(J,null,{default:t(()=>[e(ne,{class:"text-caption"},{default:t(()=>[S(b(i.ingredients.name),1)]),_:2},1024)]),_:2},1024),e(J,null,{default:t(()=>[e(ne,{class:"text-caption"},{default:t(()=>[S(b(i.ingredients.code),1)]),_:2},1024)]),_:2},1024),e(J,{side:""},{default:t(()=>[e(ne,{class:"text-caption"},{default:t(()=>[S(b($(i)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Ca=X(Va,[["__scopeId","data-v-961b0a22"]]);const it=pt("productions",()=>{const r=P([]),y=P([]);return{productions:r,production:y,fetchAllProduction:async()=>{const m=await Z.get("/api/branch-production-report");r.value=m.data.reports},fetchBranchProductions:async m=>{try{const $=await Z.get(`/api/branches/${m}/production-report`);r.value=$.data}catch($){console.log($)}},updateBakerReport:async(m,$)=>{console.log("baker reports data in store",$),console.log("baker reports id data in store",m),je.show();try{const d=await Z.put(`api/update/branch-baker-report/${m}`,$);console.log(d.data)}catch(d){console.error("Error updating baker report:",d)}finally{je.hide()}}}});const dt=r=>(ae("data-v-222cab78"),r=r(),oe(),r),Ra={class:"text-h6 text-dark"},Sa={class:"row q-gutter-sm"},Pa={class:"row q-mt-sm q-gutter-sm"},Na=dt(()=>o("div",{class:"q-mt-sm"},"Kilo",-1)),Ua={class:"q-mt-xl q-gutter-md"},Da={key:0},qa={class:"q-mx-sm"},Ta=dt(()=>o("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Aa={__name:"EditBakersReport",props:["bakerReports","sales_report_id"],setup(r){const y=it(),{dialogRef:k,onDialogHide:x}=Ve(),g=r;console.log("bakers report",g.bakerReports);const m=Oe({target:0,actual_target:0,short:0,over:0,kilo:0}),$=z(()=>g.bakerReports.ingredient_bakers_reports.map(p=>{const c=parseFloat(g.bakerReports.kilo)||1,a=parseFloat(m.kilo)||1,n=p.quantity/c*a;return{...p,quantity:n.toFixed(3)}})),d=p=>p?p.split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1).toLowerCase()).join(" "):"",f=p=>{const c=Number(p.quantity)||0,a=p.unit||"";return c>1e3?`${parseFloat((c/1e3).toFixed(3))} kg`:c>1?`${parseFloat(c.toFixed(3))} ${a}`:`${parseFloat(c.toFixed(3))} ${a}`},_=p=>{const c=Number(p)||0;return parseFloat(c.toFixed(3)).toString()},i=p=>{const c=Number(p)||0;return parseFloat(c.toFixed(3)).toString()},h=z(()=>g.bakerReports.combined_bakers_reports.reduce((p,c)=>p+(parseFloat(c.bread_production)||0),0)),u=()=>{const p=h.value,c=parseFloat(m.actual_target)||0;p>c?(m.over=p-c,m.short=0):(m.short=c-p,m.over=0)};Ae(()=>g.bakerReports,p=>{p&&(m.target=_(p.target)||0,m.actual_target=p.actual_target||0,m.short=p.short||0,m.over=p.over||0,m.kilo=i(p.kilo)||0)},{immediate:!0}),Ae(()=>m.kilo,()=>{const p=parseFloat(m.kilo)||1,a=(parseFloat(m.target)||0)*p;m.actual_target=_(Math.ceil(a)),u()}),Ae(()=>h.value,()=>u());const V=async()=>{var s,C,U;const p=g.bakerReports.id,c=((U=(C=(s=g.bakerReports)==null?void 0:s.branch_recipe)==null?void 0:C.recipe)==null?void 0:U.category)||null,a=g.bakerReports.status,l=(g==null?void 0:g.sales_report_id)||null,n={initial_bakerreports_id:p,sales_report_id:l,category:c,target:m.target,actual_target:m.actual_target,short:m.short,over:m.over,status:a,kilo:m.kilo,combined_bakers_reports:g.bakerReports.combined_bakers_reports.map(T=>({bread_id:T.bread.id,bread_production:T.bread_production})),recalculated_ingredients:$.value.map(T=>({ingredients_id:T.ingredients.id,quantity:T.quantity,unit:T.unit}))};console.log("Edited Bakers Report",n),console.log("Edited Bakers Report",p);try{await y.updateBakerReport(p,n),ke.create({type:"positive",message:"Baker report updated successfully!",position:"top"}),x()}catch(T){console.error("Error updating baker report:",T),ke.create({type:"negative",message:"Failed to update baker report. Please try again.",position:"top"})}};return(p,c)=>(w(),L(W,{ref_key:"dialogRef",ref:k,onHide:Y(x)},{default:t(()=>[e(O,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,{class:"row bg-backgroud text-h6"},{default:t(()=>{var a,l,n,s,C,U;return[o("div",Ra,b(`${d((n=(l=(a=r.bakerReports)==null?void 0:a.branch_recipe)==null?void 0:l.recipe)==null?void 0:n.name)} - ${(U=(C=(s=r.bakerReports)==null?void 0:s.branch_recipe)==null?void 0:C.recipe)==null?void 0:U.category}`),1),e(Ne),o("div",null,[se((w(),L(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(de,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[re]])])]}),_:1}),S(" sales_report_id:"+b(r.sales_report_id)+" ",1),e(R,{class:"row q-gutter-x-xl"},{default:t(()=>[o("div",null,[o("div",Sa,[o("div",null,[S(" Target Pcs "),e(F,{readonly:"",modelValue:m.target,"onUpdate:modelValue":c[0]||(c[0]=a=>m.target=a),outlined:"",type:"number",dense:"",style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])]),o("div",null,[S(" Actual Target "),e(F,{readonly:"",modelValue:m.actual_target,"onUpdate:modelValue":c[1]||(c[1]=a=>m.actual_target=a),outlined:"",dense:"",style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])])]),o("div",Pa,[o("div",null,[S(" Short "),e(F,{readonly:"",modelValue:m.short,"onUpdate:modelValue":c[2]||(c[2]=a=>m.short=a),outlined:"",type:"number",dense:"",style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])]),o("div",null,[S(" Over "),e(F,{readonly:"",modelValue:m.over,"onUpdate:modelValue":c[3]||(c[3]=a=>m.over=a),outlined:"",dense:"",style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])])]),o("div",null,[Na,e(F,{outlined:"",modelValue:m.kilo,"onUpdate:modelValue":c[4]||(c[4]=a=>m.kilo=a),dense:"",type:"number",style:{width:"210px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])]),o("div",Ua,[r.bakerReports.combined_bakers_reports.length?(w(),N("div",Da,[(w(!0),N(K,null,be(r.bakerReports.combined_bakers_reports,(a,l)=>(w(),N("div",{key:l,class:"q-my-md"},[e(Ye,{class:"q-ma-md"}),o("div",qa,b(a.bread.name),1),e(F,{outlined:"",modelValue:a.bread_production,"onUpdate:modelValue":n=>a.bread_production=n,dense:"",type:"numbers",suffix:"pcs",style:{width:"210px","max-width":"300px","min-width":"50px"}},null,8,["modelValue","onUpdate:modelValue"])]))),128))])):Ee("",!0)])]),o("div",null,[Ta,e(Ue,{dense:"",separator:"",class:"box"},{default:t(()=>[e(he,null,{default:t(()=>[e(J,null,{default:t(()=>[e(ne,{class:"text-overline"},{default:t(()=>[S("Raw Materials Name")]),_:1})]),_:1}),e(J,null,{default:t(()=>[e(ne,{class:"text-overline"},{default:t(()=>[S("Code")]),_:1})]),_:1}),e(J,{side:""},{default:t(()=>[e(ne,{class:"text-overline"},{default:t(()=>[S("Quantity")]),_:1})]),_:1})]),_:1}),(w(!0),N(K,null,be($.value,(a,l)=>(w(),L(he,{key:l},{default:t(()=>[e(J,null,{default:t(()=>[e(ne,{class:"text-caption"},{default:t(()=>[S(b(a.ingredients.name),1)]),_:2},1024)]),_:2},1024),e(J,null,{default:t(()=>[e(ne,{class:"text-caption"},{default:t(()=>[S(b(a.ingredients.code),1)]),_:2},1024)]),_:2},1024),e(J,{side:""},{default:t(()=>[e(ne,{class:"text-caption"},{default:t(()=>[S(b(f(a)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(Pe,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:t(()=>[se(e(D,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[re]]),e(D,{class:"glossy",color:"teal",label:"Save",onClick:V})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Ba=X(Aa,[["__scopeId","data-v-222cab78"]]);const Ia=r=>(ae("data-v-f96814be"),r=r(),oe(),r),Fa=Ia(()=>o("div",{class:"row justify-between"},[o("div",{class:"text-h6"},"Baker Report")],-1)),La={class:"text-subtitle1 text-weight-regular"},Ma={class:"q-ma-sm"},za={class:"q-ma-sm",align:"center"},Oa=["src"],Ha={__name:"BakerReportPanel",props:["bakersReport","sales_report_id"],setup(r){Ke.exports.vfs=nt;const y=r,k=y.bakersReport;console.log("Bakers Report",y.bakersReport);const x=P(!0),g=P(!1);P(!1);const m=P({rowsPerPage:0}),$=P(""),d=Se(),f=(v,q)=>{d.dialog({component:wa,componentProps:{breadProduction:v,branchRecipe:q}})},_=(v,q)=>{d.dialog({component:Ca,componentProps:{ingredientProduction:v,branchRecipe:q}})},i=(v,q)=>{d.dialog({component:Ba,componentProps:{bakerReports:v,sales_report_id:q}})},h=v=>ge.formatDate(v,"MMM. DD, YYYY"),u=v=>{const q=Number(v)||0;return parseFloat(q.toFixed(3)).toString()},V=v=>{const q=Number(v)||0;return parseFloat(q.toFixed(3)).toString()},p=v=>v?v.split(" ").map(q=>q.charAt(0).toUpperCase()+q.slice(1).toLowerCase()).join(" "):"",c=v=>{const q=Ce=>Ce?Ce.charAt(0).toUpperCase()+Ce.slice(1).toLowerCase():"",A=v.firstname?q(v.firstname):"No Firstname",Q=v.middlename?q(v.middlename).charAt(0)+".":"",ve=v.lastname?q(v.lastname):"No Lastname";return`${A} ${Q} ${ve}`.trim()},a=v=>{const q=new Date(v),A={hour:"2-digit",minute:"2-digit",hour12:!0};return q.toLocaleTimeString(void 0,A)},l=v=>{switch(v){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},n=v=>v?v.split(" ").map(q=>q.charAt(0).toUpperCase()+q.slice(1).toLowerCase()).join(" "):"",s=v=>v?v.recipe_category==="Filling"?v.filling_bakers_reports||[]:v.recipe_category==="Dough"?v.bread_production_reports||[]:[]:(console.error("No bakerReport provided"),[]),C=[{name:"recipe_name",align:"center",label:"Recipe Name",field:v=>v.branch_recipe&&v.branch_recipe.recipe?{name:v.branch_recipe.recipe.name,category:v.branch_recipe.recipe.category}:{name:"N/A",category:"N/A"},format:v=>`${n(v.name)} (${v.category})`,sortable:!0},{name:"created_at",align:"center",label:"Time",field:"created_at",format:v=>a(v)},{name:"kilo",align:"center",label:"Kilo / s",field:"kilo",format:v=>`${V(v)}`},{name:"actual_target",align:"center",label:"Actual Target",field:v=>v.target*v.kilo,format:v=>`${Math.ceil(v)}`},{name:"over",align:"center",label:"Over",field:"over",format:v=>`${v}`},{name:"short",align:"center",label:"Short",field:"short",format:v=>`${v}`},{name:"status",align:"center",label:"Status",field:"status"},{name:"combined_bakers_reports",align:"center",label:"Breads",field:"combined_bakers_reports"},{name:"ingredients_reports",align:"center",label:"Ingredients",field:"ingredients_reports"},{name:"action",align:"center",label:"Action",field:"action"}],U=v=>{var H,G,me,we,ce,I,M,ee,E,Re,Ie,He,et,tt;console.log("bakerReport",v);const q=`${(me=(G=(H=v==null?void 0:v.branch_recipe)==null?void 0:H.recipe)==null?void 0:G.name)!=null?me:"Unkown Recipe"} (${(we=v==null?void 0:v.recipe_category)!=null?we:"Unkown Category"})`,A=(I=(ce=v==null?void 0:v.branch_recipe)==null?void 0:ce.target)!=null?I:0,Q=(M=v==null?void 0:v.actual_target)!=null?M:0,ve=(ee=v==null?void 0:v.kilo)!=null?ee:0,Ce=(E=v==null?void 0:v.over)!=null?E:0,qe=(Re=v==null?void 0:v.short)!=null?Re:0,B={table:{widths:["50%","50%"],body:[[{text:"Recipe Name",style:"tableHeader",alignment:"left"},{text:q,style:"tableHeader",alignment:"center"}],[{text:"Target per Kilo",style:"tableHeader",alignment:"left"},{text:`${u(A)} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Actual Target",style:"tableHeader",alignment:"left"},{text:`${Q} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Kilo",style:"tableHeader",alignment:"left"},{text:`${V(ve)} kg/s`,style:"tableHeader",alignment:"center"}],[{text:"Over",style:"tableHeader",alignment:"left"},{text:`${Ce} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Short",style:"tableHeader",alignment:"left"},{text:`${qe} pcs`,style:"tableHeader",alignment:"center"}]]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}};return{content:[{text:"Baker Report",style:"header",alignment:"center"},{columns:[{text:`Branch Name: ${v.branch.name||"No name available"}
                Baker: ${c(((Ie=v==null?void 0:v.user)==null?void 0:Ie.employee)||"Unknown Baker Name")}
                Recipe: ${((He=v.recipe)==null?void 0:He.name)||"Unknown Recipe"} (${v.recipe_category||"Unknown Category"})
             `,width:"80%",margin:[0,0,0,10]},{text:`Date: ${h(((et=y.bakersReport[0])==null?void 0:et.created_at)||((tt=y.bakersReport[1])==null?void 0:tt.created_at)||"No name available")}
                Time: ${a(v.created_at)}
                Status: ${p(v.status)}`,margin:[0,0,0,10]}]},{columns:[{width:"50%",stack:[{text:"Bread Production",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*"],body:[[{text:"Bread Name",style:"tableHeader",alignment:"center"},{text:"Production",style:"tableHeader",alignment:"center"}],...s(v).map(ye=>{var ze;return[{text:((ze=ye==null?void 0:ye.bread)==null?void 0:ze.name)||"Unknown Bread",style:"body"},{text:v.recipe_category==="Filling"?`${(ye==null?void 0:ye.filling_production)||"0"} pcs`:`${ye==null?void 0:ye.bread_new_production} pcs`,style:"body",alignment:"center"}]})]}}],columnGap:10},{width:"50%",stack:[{text:"Ingredients",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*"],body:[[{text:"Ingredient Code",style:"tableHeader",alignment:"center"},{text:"Quantity",style:"tableHeader",alignment:"center"}],...(v.ingredient_bakers_reports||[]).map(ye=>{var ze,at;return[{text:((ze=ye==null?void 0:ye.ingredients)==null?void 0:ze.code)||"Unknown Ingredient",style:"body"},{text:`${(ye==null?void 0:ye.quantity)||"Unknown Quantity"} ${((at=ye==null?void 0:ye.ingredients)==null?void 0:at.unit)||""}`,style:"body",alignment:"center"}]})]}}],columnGap:10}],columnGap:20},{canvas:[{type:"line",x1:0,y1:25,x2:555,y2:25,lineWidth:1,dash:{length:5,space:5},lineColor:"#000000",margin:[0,20,0,0]}]},{margin:[0,20,0,0],stack:[{text:"Summary",style:"subheader",alignment:"center"},B]}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableHeader:{bold:!0,fontSize:10,color:"black"},body:{fontSize:8}},pageMargins:[20,20,20,20]}},T=v=>{const q=U(v);Ke.exports.createPdf(q).getDataUrl(A=>{$.value=A,g.value=!0})};return(v,q)=>(w(),N("div",null,[e(O,{class:"my-card q-pa-md"},{default:t(()=>{var A,Q,ve,Ce,qe,B;return[Fa,o("div",La,[o("div",null," Name: "+b(c(((Q=(A=Y(k)[0])==null?void 0:A.user)==null?void 0:Q.employee)||((Ce=(ve=Y(k)[1])==null?void 0:ve.user)==null?void 0:Ce.employee)||"No name available")),1),o("div",null," Date: "+b(`${h(((qe=y.bakersReport[0])==null?void 0:qe.created_at)||((B=y.bakersReport[1])==null?void 0:B.created_at)||"No name available")}`),1)]),e(R,null,{default:t(()=>[e(fe,{class:"table-container sticky-header2",columns:C,rows:Y(k),"row-key":"name","header-class":"custom-header","virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48,pagination:m.value,"rows-per-page-options":[0]},{"body-cell-status":t(H=>[e(j,{props:H},{default:t(()=>[e(ue,{align:"middle",color:l(H.row.status)},{default:t(()=>[S(b(p(H.row.status)),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-combined_bakers_reports":t(H=>[e(j,{props:H},{default:t(()=>[e(D,{class:"gradient-icon",flat:"",rounded:"",onClick:G=>f(H.row.combined_bakers_reports,H.row.branch_recipe)},{default:t(()=>[e(ie,{name:"visibility",class:"gradient-icon"}),e(de,{class:"gradient-tooltip"},{default:t(()=>[S("View Breads")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),"body-cell-ingredients_reports":t(H=>[e(j,{props:H},{default:t(()=>[e(D,{class:"gradient-icon2",flat:"",rounded:"",onClick:G=>_(H.row.ingredient_bakers_reports,H.row.branch_recipe)},{default:t(()=>[e(ie,{name:"visibility",class:"gradient-icon2"}),e(de,{class:"gradient-tooltip"},{default:t(()=>[S("View Ingredients")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),"body-cell-action":t(H=>[e(j,{props:H},{default:t(()=>[e(D,{dense:"",flat:"",round:"",icon:"more_vert","aria-label":"Action Menu",onClick:G=>v.toggleMenu(H.row)},null,8,["onClick"]),e(bt,{modelValue:H.row.menu,"onUpdate:modelValue":G=>H.row.menu=G,anchor:"bottom right",self:"top right","transition-show":"jump-down","transition-hide":"jump-up"},{default:t(()=>[e(Ue,{style:{"min-width":"100px"}},{default:t(()=>[se((w(),L(he,{clickable:"",onClick:G=>T(H.row)},{default:t(()=>[e(J,{avatar:""},{default:t(()=>[e(ie,{name:"print"})]),_:1}),e(J,null,{default:t(()=>[e(ne,null,{default:t(()=>[S("Print")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[re]]),se((w(),L(he,{clickable:"",onClick:G=>i(H.row,r.sales_report_id)},{default:t(()=>[e(J,{avatar:""},{default:t(()=>[e(ie,{name:"edit"})]),_:1}),e(J,null,{default:t(()=>[e(ne,null,{default:t(()=>[S("Edit")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[re]])]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])]),_:1})]}),_:1}),e(W,{modelValue:g.value,"onUpdate:modelValue":q[0]||(q[0]=A=>g.value=A),"backdrop-filter":v.backdropFilter,maximized:x.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[o("div",Ma,[o("div",za,[se((w(),L(D,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},{default:t(()=>[e(de,null,{default:t(()=>[S("Close")]),_:1})]),_:1})),[[re]])]),o("div",null,[o("iframe",{src:$.value,width:"100%",height:"700px"},null,8,Oa)])])]),_:1},8,["modelValue","backdrop-filter","maximized"])]))}};var ja=X(Ha,[["__scopeId","data-v-f96814be"]]);const Ka={class:"row justify-between text-white"},Qa=o("div",{class:"text-h6"},"Bread Report",-1),Ea={class:"row justify-end q-mt-md"},Ya={class:"text-h6"},Ga={__name:"BreadReport",props:["reports"],setup(r){const{dialogRef:y,onDialogHide:k,onDialogOK:x,onDialogCancel:g}=Ve(),m=r,$=P("");console.log("Reports data structure:",m.reports);const d=a=>a?a.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",f=async(a,l)=>{console.log("update data of the price",a),console.log("update val of the price",l);try{const n=await Z.put("/api/update-bread-sales-price-report/"+a.id,{price:parseInt(l)});console.log("reponse",n.data)}catch(n){console.error(n)}},_=async(a,l)=>{console.log("update data of the beginnings",a),console.log("update val of the beginnings",l);try{const n=await Z.put("/api/update-bread-sales-beginnings-report/"+a.id,{beginnings:parseInt(l)});console.log("reponse",n.data)}catch(n){console.error(n)}},i=async(a,l)=>{console.log("update data of the new updatedRemaining",a),console.log("update val of the new updatedRemaining",l);try{const n=await Z.put("/api/update-bread-sales-remaining-report/"+a.id,{remaining:parseInt(l)});console.log("reponse",n.data)}catch(n){console.error(n)}},h=async(a,l)=>{console.log("update data of the new updatedRemaining",a),console.log("update val of the new updatedRemaining",l);try{const n=await Z.put("/api/update-bread-sales-breadOut-report/"+a.id,{bread_out:parseInt(l)});console.log("reponse",n.data)}catch(n){console.error(n)}},u=[{name:"name",label:"Bread Name",field:a=>(console.log("Row data:",a),a.bread.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:a=>`${a}`},{name:"new_production",label:"New Production (PCS)",field:"new_production",format:a=>`${a}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:a=>`${a}`},{name:"bread_out",label:"Bread Out (PCS)",field:"bread_out",format:a=>`${a}`},{name:"total",label:"Bread Total (PCS)",field:a=>(Number(a.beginnings)||0)+(Number(a.new_production)||0)},{name:"breadSold",label:"Bread Sold (PCS)",field:a=>{const l=Number(a.beginnings)||0,n=Number(a.new_production)||0,s=Number(a.remaining)||0,C=Number(a.bread_out)||0,U=l+n,T=s+C;return U-T},format:a=>`${a}`},{name:"sales",label:"Total Sales",field:a=>{const l=Number(a.beginnings)||0,n=Number(a.new_production)||0,s=Number(a.remaining)||0,C=Number(a.bread_out)||0,U=Number(a.price)||0,T=l+n,v=s+C;return(T-v)*U},format:a=>`${V(a)}`}],V=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(a),p=z(()=>{if(!$.value||!$.value.trim())return m.reports||[];const a=$.value.trim().toLowerCase();return(m.reports||[]).filter(l=>l.bread.name.toLowerCase().includes(a)||l.price.toString().includes(a)||l.sales.toString().includes(a))}),c=z(()=>{const a=p.value.reduce((l,n)=>{const s=Number(n.beginnings)||0,C=Number(n.new_production)||0,U=Number(n.remaining)||0,T=Number(n.bread_out)||0,v=Number(n.price)||0,q=s+C,A=U+T,ve=(q-A)*v;return console.log(`Adding salesAmount: ${ve} to total: ${l}`),l+ve},0);return console.log("Overall Total Sales computed as:",a),a});return console.log("Overall Total Sales:",c.value),(a,l)=>(w(),L(W,{ref_key:"dialogRef",ref:y,onHide:Y(k)},{default:t(()=>[e(O,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(R,{style:{"background-color":"#795548"}},{default:t(()=>[o("div",Ka,[Qa,se((w(),L(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(de,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[re]])])]),_:1}),e(R,null,{default:t(()=>[e(F,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:$.value,"onUpdate:modelValue":l[0]||(l[0]=n=>$.value=n),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:""},{append:t(()=>[e(ie,{name:"search"})]),_:1},8,["modelValue"])]),_:1}),e(R,null,{default:t(()=>[e(fe,{filter:$.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:u,rows:p.value,"row-key":"name","virtual-scroll":"",pagination:a.pagination,"onUpdate:pagination":l[1]||(l[1]=n=>a.pagination=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${d(n.row.bread.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${V(n.row.price)}`),1),e(le,{"onUpdate:modelValue":[s=>f(n.row,s),s=>n.row.price=s],modelValue:n.row.price,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${n.row.beginnings}`),1),e(le,{"onUpdate:modelValue":[s=>_(n.row,s),s=>n.row.beginnings=s],modelValue:n.row.beginnings,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-remaining":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${n.row.remaining}`),1),e(le,{"onUpdate:modelValue":[s=>i(n.row,s),s=>n.row.remaining=s],modelValue:n.row.remaining,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-bread_out":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${n.row.bread_out}`),1),e(le,{"onUpdate:modelValue":[s=>h(n.row,s),s=>n.row.bread_out=s],modelValue:n.row.bread_out,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(R,null,{default:t(()=>[o("div",Ea,[o("div",Ya," Overall Total Sales: "+b(V(c.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Ja={class:"row justify-between text-white"},Wa=o("div",{class:"text-h6"},"Selecta Report",-1),Xa={class:"row justify-end q-mt-md"},Za={class:"text-h6"},eo={__name:"SelectaReport",props:["reports"],setup(r){const{dialogRef:y,onDialogHide:k,onDialogOK:x,onDialogCancel:g}=Ve(),m=r;console.log("Reports data structure:",m.reports);const $=a=>a?a.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",d=async(a,l)=>{console.log("update data of the price",a),console.log("update val of the price",l);try{const n=await Z.put("/api/update-selecta-sales-price-report/"+a.id,{price:parseInt(l)})}catch(n){console.error(n)}},f=async(a,l)=>{console.log("update data of the beginnings",a),console.log("update val of the beginnings",l);try{const n=await Z.put("/api/update-selecta-sales-beginnings-report/"+a.id,{beginnings:parseInt(l)});console.log("reponse",n.data)}catch(n){console.error(n)}},_=async(a,l)=>{console.log("update data of the new updatedRemaining",a),console.log("update val of the new updatedRemaining",l);try{const n=await Z.put("/api/update-selecta-sales-remaining-report/"+a.id,{remaining:parseInt(l)});console.log("reponse",n.data)}catch(n){console.error(n)}},i=async(a,l)=>{console.log("update data of the new updatedRemaining",a),console.log("update val of the new updatedRemaining",l);try{const n=await Z.put("/api/update-selecta-sales-selctaOut-report/"+a.id,{out:parseInt(l)});console.log("reponse",n.data)}catch(n){console.error(n)}},h=async(a,l)=>{console.log("update data of the new updatedRemaining",a),console.log("update val of the new updatedRemaining",l);try{const n=await Z.put("/api/update-selecta-sales-addedstocks-report/"+a.id,{added_stocks:parseInt(l)});console.log("reponse",n.data)}catch(n){console.error(n)}},u=[{name:"name",label:"Selecta Name",field:a=>(console.log("Row data:",a),a.selecta.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:a=>`${a}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:a=>`${a}`},{name:"out",label:"Selecta Out (PCS)",field:"out",format:a=>`${a}`},{name:"added_stocks",label:"Added Stocks (PCS)",field:"added_stocks",format:a=>`${a}`},{name:"total_selecta",label:"Total Stocks (PCS)",field:a=>Number(a.beginnings||0)+Number(a.added_stocks||0),format:a=>`${a}`},{name:"sold",label:"Selecta Sold (PCS)",field:a=>{const l=Number(a.beginnings||0),n=Number(a.added_stocks||0),s=Number(a.out||0),C=Number(a.remaining||0),U=l+n,T=C+s;return U-T},format:a=>`${a}`},{name:"sales",label:"Total Sales",field:a=>{const l=Number(a.beginnings||0),n=Number(a.added_stocks||0),s=Number(a.out||0),C=Number(a.remaining||0),U=Number(a.price||0),T=l+n,v=C+s;return(T-v)*U},format:a=>`${V(a)}`}],V=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(a),p=z(()=>(console.log("Filtered rows:",m.reports||[]),m.reports||[])),c=z(()=>{const a=p.value.reduce((l,n)=>{const s=`${n.beginnings}`||0,C=`${n.added_stocks}`||0,U=`${n.out}`||0,T=`${n.remaining}`||0,v=parseInt(s)+parseInt(C),q=parseInt(T)+parseInt(U),Q=(v-q)*(n.price||0);return console.log(`Adding salesAmount: ${Q} to total: ${l}`),l+Q},0);return console.log("Overall Total Sales computed as:",a),a});return console.log("Filtered Rows:",p.value),(a,l)=>(w(),L(W,{ref_key:"dialogRef",ref:y,onHide:Y(k)},{default:t(()=>[e(O,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(R,{style:{"background-color":"#f44336"}},{default:t(()=>[o("div",Ja,[Wa,se((w(),L(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(de,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[re]])])]),_:1}),e(R,null,{default:t(()=>[e(fe,{filter:a.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:u,rows:p.value,"row-key":"name","virtual-scroll":"",pagination:a.pagination,"onUpdate:pagination":l[0]||(l[0]=n=>a.pagination=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${$(n.row.selecta.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${V(n.row.price)}`),1),e(le,{"onUpdate:modelValue":[s=>d(n.row,s),s=>n.row.price=s],modelValue:n.row.price,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${n.row.beginnings}`),1),e(le,{"onUpdate:modelValue":[s=>f(n.row,s),s=>n.row.beginnings=s],modelValue:n.row.beginnings,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-remaining":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${n.row.remaining}`),1),e(le,{"onUpdate:modelValue":[s=>_(n.row,s),s=>n.row.remaining=s],modelValue:n.row.remaining,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-out":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${n.row.out}`),1),e(le,{"onUpdate:modelValue":[s=>i(n.row,s),s=>n.row.out=s],modelValue:n.row.out,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-added_stocks":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${n.row.added_stocks}`),1),e(le,{"onUpdate:modelValue":[s=>h(n.row,s),s=>n.row.added_stocks=s],modelValue:n.row.added_stocks,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(R,null,{default:t(()=>[o("div",Xa,[o("div",Za," Overall Total Sales: "+b(V(c.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},to={class:"row justify-between text-white"},ao=o("div",{class:"text-h6"},"Softdrinks Report",-1),oo={class:"row justify-end q-mt-md"},no={class:"text-h6"},lo={__name:"SoftdrinksReport",props:["reports"],setup(r){const{dialogRef:y,onDialogHide:k,onDialogOK:x,onDialogCancel:g}=Ve(),m=r;console.log("Reports data structure:",m.reports);const $=a=>a?a.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",d=async(a,l)=>{console.log("update data of the price",a),console.log("update val of the price",l);try{const n=await Z.put("/api/update-softdrinks-sales-price-report/"+a.id,{price:parseInt(l)});console.log("Updated price response:",n.data)}catch(n){console.error(n)}},f=async(a,l)=>{console.log("update data of the beginnings",a),console.log("update val of the beginnings",l);try{const n=await Z.put("/api/update-softdrinks-sales-beginnings-report/"+a.id,{beginnings:parseInt(l)});console.log("reponse",n.data)}catch(n){console.error(n)}},_=async(a,l)=>{console.log("update data of the updatedRemaining",a),console.log("update val of the updatedRemaining",l);try{const n=await Z.put("/api/update-softdrinks-sales-remaining-report/"+a.id,{remaining:parseInt(l)});console.log("reponse",n.data)}catch(n){console.error(n)}},i=async(a,l)=>{console.log("update data of the updatedRemaining",a),console.log("update val of the updatedRemaining",l);try{const n=await Z.put("/api/update-softdrinks-sales-out-report/"+a.id,{out:parseInt(l)});console.log("reponse",n.data)}catch(n){console.error(n)}},h=async(a,l)=>{console.log("update data of the addedstocks",a),console.log("update val of the addedstocks",l);try{const n=await Z.put("/api/update-softdrinks-sales-addedstocks-report/"+a.id,{added_stocks:parseInt(l)});console.log("reponse",n.data)}catch(n){console.error(n)}},u=[{name:"name",label:"Softdrinks Name",field:a=>(console.log("Row data:",a),a.softdrinks.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:a=>`${a}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:a=>`${a}`},{name:"out",label:"Softdrinks Out (PCS)",field:"out",format:a=>`${a}`},{name:"added_stocks",label:"Added Stocks (PCS)",field:"added_stocks",format:a=>`${a}`},{name:"total_softdrinks",label:"Total Stocks (PCS)",field:a=>Number(a.beginnings||0)+Number(a.added_stocks||0),format:a=>`${a}`},{name:"sold",label:"Softdrinks Sold (PCS)",field:a=>{const l=Number(a.beginnings||0),n=Number(a.added_stocks||0),s=Number(a.out||0),C=Number(a.remaining||0),U=l+n,T=C+s;return U-T},format:a=>`${a}`},{name:"sales",label:"Total Sales",field:a=>{const l=Number(a.beginnings||0),n=Number(a.added_stocks||0),s=Number(a.out||0),C=Number(a.remaining||0),U=Number(a.price||0),T=l+n,v=C+s;return(T-v)*U},format:a=>`${V(a)}`}],V=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(a),p=z(()=>(console.log("Filtered rows:",m.reports||[]),m.reports||[])),c=z(()=>{const a=p.value.reduce((l,n)=>{const s=Number(n.beginnings||0),C=Number(n.added_stocks||0),U=Number(n.out||0),T=Number(n.remaining||0),v=s+C,q=T+U,Q=(v-q)*(n.price||0);return console.log(`Adding salesAmount: ${Q} to total: ${l}`),l+Q},0);return console.log("Overall Total:",a),a});return console.log("Filtered Rows:",p.value),(a,l)=>(w(),L(W,{ref_key:"dialogRef",ref:y,onHide:Y(k)},{default:t(()=>[e(O,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(R,{style:{"background-color":"#9c27b0"}},{default:t(()=>[o("div",to,[ao,se((w(),L(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(de,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[re]])])]),_:1}),e(R,null,{default:t(()=>[e(fe,{filter:a.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:u,rows:p.value,"row-key":"name","virtual-scroll":"",pagination:a.pagination,"onUpdate:pagination":l[0]||(l[0]=n=>a.pagination=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${$(n.row.softdrinks.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${V(n.row.price)}`),1),e(le,{"onUpdate:modelValue":[s=>d(n.row,s),s=>n.row.price=s],modelValue:n.row.price,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${n.row.beginnings}`),1),e(le,{"onUpdate:modelValue":[s=>f(n.row,s),s=>n.row.beginnings=s],modelValue:n.row.beginnings,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-remaining":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${n.row.remaining}`),1),e(le,{"onUpdate:modelValue":[s=>_(n.row,s),s=>n.row.remaining=s],modelValue:n.row.remaining,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-out":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${n.row.out}`),1),e(le,{"onUpdate:modelValue":[s=>i(n.row,s),s=>n.row.out=s],modelValue:n.row.out,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-added_stocks":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${n.row.added_stocks}`),1),e(le,{"onUpdate:modelValue":[s=>h(n.row,s),s=>n.row.added_stocks=s],modelValue:n.row.added_stocks,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(R,null,{default:t(()=>[o("div",oo,[o("div",no," Overall Total Sales: "+b(V(c.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},so={class:"row justify-between text-white"},ro=o("div",{class:"text-h6"},"Cake Report",-1),io={class:"row justify-end q-mt-md"},co={class:"text-h6"},uo={__name:"CakeReport",props:["reports"],setup(r){const{dialogRef:y,onDialogHide:k,onDialogOK:x,onDialogCancel:g}=Ve(),m=r;console.log("Report cake:",m.reports);const $=z(()=>(console.log("Filtered cake rows:",m.reports||[]),m.reports||[])),d=h=>{const u=a=>a?a.charAt(0).toUpperCase()+a.slice(1).toLowerCase():"",V=h.firstname?u(h.firstname):"No Firstname",p=h.middlename?u(h.middlename).charAt(0)+".":"",c=h.lastname?u(h.lastname):"No Lastname";return`${V} ${p} ${c}`},f=h=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(h).replace("\u20B1","\u20B1 "),_=z(()=>{const h=$.value.reduce((u,V)=>{const p=parseFloat(V.cake_report.price)||0;return console.log(`Adding salesAmount: ${p} to total: ${u}`),u+p},0);return console.log("Overall Total Sales computed as:",h),h}),i=[{name:"name",label:"Cake Name",field:h=>(console.log("Row data:",h),h.cake_report.name||"N/A")},{name:"cake_maker",label:"Cake Maker Name",field:h=>d(h.cake_report.user.employee)},{name:"price",label:"Price",field:h=>f(h.cake_report.price)},{name:"layers",label:"Layers",field:h=>h.cake_report.layers},{name:"sales_status",label:"Sale Status",field:h=>h.cake_report.sales_status}];return(h,u)=>(w(),L(W,{ref_key:"dialogRef",ref:y,onHide:Y(k)},{default:t(()=>[e(O,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(R,{style:{"background-color":"#009688"}},{default:t(()=>[o("div",so,[ro,se((w(),L(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(de,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[re]])])]),_:1}),e(R,null,{default:t(()=>[e(fe,{filter:h.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:i,rows:$.value,"row-key":"name","virtual-scroll":"",pagination:h.pagination,"onUpdate:pagination":u[0]||(u[0]=V=>h.pagination=V),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["filter","rows","pagination"]),o("div",io,[o("div",co," Overall Total Sales: "+b(f(_.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},mo={class:"row justify-between text-white"},po=o("div",{class:"text-h6"},"Other Products Report",-1),_o={class:"row justify-end q-mt-md"},go={class:"text-h6"},fo={__name:"OtherProductsReport",props:["reports"],setup(r){const{dialogRef:y,onDialogHide:k,onDialogOK:x,onDialogCancel:g}=Ve(),m=r,$=z(()=>(console.log("Filtered rows:",m.reports||[]),m.reports||[])),d=a=>a?a.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",f=async(a,l)=>{console.log("update data of the price",a),console.log("update val of the price",l);try{const n=await Z.put("/api/update-otherProducst-sales-price-report/"+a.id,{price:parseInt(l)});console.log("Updated price response:",n.data)}catch(n){console.error(n)}},_=async(a,l)=>{console.log("update data of the beginnings",a),console.log("update val of the beginnings",l);try{const n=await Z.put("/api/update-otherProducst-sales-beginnings-report/"+a.id,{beginnings:parseInt(l)});console.log("reponse",n.data)}catch(n){console.error(n)}},i=async(a,l)=>{console.log("update data of the updatedRemaining",a),console.log("update val of the updatedRemaining",l);try{const n=await Z.put("/api/update-otherProducst-sales-remaining-report/"+a.id,{remaining:parseInt(l)});console.log("reponse",n.data)}catch(n){console.error(n)}},h=async(a,l)=>{console.log("update data of the updatedRemaining",a),console.log("update val of the updatedRemaining",l);try{const n=await Z.put("/api/update-otherProducst-sales-out-report/"+a.id,{out:parseInt(l)});console.log("reponse",n.data)}catch(n){console.error(n)}},u=async(a,l)=>{console.log("update data of the updatedAddedStocks",a),console.log("update val of the updatedAddedStocks",l);try{const n=await Z.put("/api/update-otherProducst-sales-addedstocks-report/"+a.id,{added_stocks:parseInt(l)});console.log("reponse",n.data)}catch(n){console.error(n)}},V=[{name:"name",label:"Product Name",field:a=>(console.log("Row data:",a),a.other_products.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:a=>`${a}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:a=>`${a}`},{name:"out",label:"Product Out (PCS)",field:"out",format:a=>`${a}`},{name:"added_stocks",label:"Added Stocks (PCS)",field:"added_stocks",format:a=>`${a}`},{name:"total_other_products",label:"Total Stocks (PCS)",field:a=>Number(a.beginnings||0)+Number(a.added_stocks||0),format:a=>`${a}`},{name:"sold",label:"Product Sold (PCS)",field:a=>{const l=Number(a.beginnings||0),n=Number(a.added_stocks||0),s=Number(a.out||0),C=Number(a.remaining||0),U=l+n,T=C+s;return U-T},format:a=>`${a}`},{name:"sales",label:"Total Sales",field:a=>{const l=Number(a.beginnings||0),n=Number(a.added_stocks||0),s=Number(a.out||0),C=Number(a.remaining||0),U=Number(a.price||0),T=l+n,v=C+s;return(T-v)*U},format:a=>`${p(a)}`}],p=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(a),c=z(()=>{const a=$.value.reduce((l,n)=>{const s=Number(n.beginnings||0),C=Number(n.added_stocks||0),U=Number(n.out||0),T=Number(n.remaining||0),v=s+C,q=T+U,Q=(v-q)*(n.price||0);return console.log(`Adding salesAmount: ${Q} to total: ${l}`),l+Q},0);return console.log("Overall Total Sales computed as:",a),a});return(a,l)=>(w(),N("div",null,[e(W,{ref_key:"dialogRef",ref:y,onHide:Y(k)},{default:t(()=>[e(O,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(R,{style:{"background-color":"#607d8b"}},{default:t(()=>[o("div",mo,[po,se((w(),L(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(de,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[re]])])]),_:1}),e(R,null,{default:t(()=>[e(fe,{filter:a.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:V,rows:$.value,"row-key":"name","virtual-scroll":"",pagination:a.pagination,"onUpdate:pagination":l[0]||(l[0]=n=>a.pagination=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${d(n.row.other_products.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${p(n.row.price)}`),1),e(le,{"onUpdate:modelValue":[s=>f(n.row,s),s=>n.row.price=s],modelValue:n.row.price,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${n.row.beginnings}`),1),e(le,{"onUpdate:modelValue":[s=>_(n.row,s),s=>n.row.beginnings=s],modelValue:n.row.beginnings,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-remaining":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${n.row.remaining}`),1),e(le,{"onUpdate:modelValue":[s=>i(n.row,s),s=>n.row.remaining=s],modelValue:n.row.remaining,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-out":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${n.row.out}`),1),e(le,{"onUpdate:modelValue":[s=>h(n.row,s),s=>n.row.out=s],modelValue:n.row.out,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-added_stocks":t(n=>[e(j,{props:n},{default:t(()=>[o("span",null,b(`${n.row.added_stocks}`),1),e(le,{"onUpdate:modelValue":[s=>u(n.row,s),s=>n.row.added_stocks=s],modelValue:n.row.added_stocks,"auto-save":""},{default:t(s=>[e(F,{modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:te(s.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(R,null,{default:t(()=>[o("div",_o,[o("div",go," Overall Total Sales: "+b(p(c.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"])]))}};const vo=r=>(ae("data-v-69f74a0d"),r=r(),oe(),r),bo=vo(()=>o("div",{class:"text-h6",align:"center"},"Products Report",-1)),yo={class:"item-start q-gutter-md",align:"center"},ho={__name:"ProductsReport",props:["sales_Reports"],setup(r){const y=r,k=y.sales_Reports;console.log("sales report2",y);const x=Se(),g=_=>{x.dialog({component:Ga,componentProps:{reports:_}})},m=_=>{x.dialog({component:eo,componentProps:{reports:_}})},$=_=>{x.dialog({component:lo,componentProps:{reports:_}})},d=_=>{x.dialog({component:uo,componentProps:{reports:_}})},f=_=>{x.dialog({component:fo,componentProps:{reports:_}})};return(_,i)=>(w(),N("div",null,[e(O,{class:"user-card"},{default:t(()=>[e(R,null,{default:t(()=>[bo]),_:1}),e(R,null,{default:t(()=>[o("div",yo,[e(D,{onClick:i[0]||(i[0]=h=>g(y.sales_Reports[0].bread_reports)),"no-caps":"",label:"Bread Report",rounded:"",color:"brown",style:{width:"130px"},class:"user-button"}),e(D,{onClick:i[1]||(i[1]=h=>m(Y(k)[0].selecta_reports)),"no-caps":"",label:"Selecta Report",rounded:"",color:"red-6",style:{width:"130px"},class:"user-button"}),e(D,{onClick:i[2]||(i[2]=h=>$(Y(k)[0].softdrinks_reports)),"no-caps":"",label:"Softdrinks Report",rounded:"",color:"accent",style:{width:"150px"},class:"user-button"}),e(D,{onClick:i[3]||(i[3]=h=>d(Y(k)[0].cake_sales_reports)),"no-caps":"",label:"Cake Report",rounded:"",color:"teal",style:{width:"130px"},class:"user-button"}),e(D,{onClick:i[4]||(i[4]=h=>f(Y(k)[0].other_products_reports)),"no-caps":"",label:"Other Products Report",rounded:"",color:"blue-grey",style:{width:"180px"},class:"user-button"})])]),_:1})]),_:1})]))}};var wo=X(ho,[["__scopeId","data-v-69f74a0d"]]);const ko={class:"row justify-between text-white"},xo=o("div",{class:"text-h6"},"Denomination Report",-1),$o={class:"row text-weight-regular text-subtitle1"},Vo={class:"col-6"},Co={class:"col-6"},Ro={class:"row justify-end q-mt-md"},So={class:"text-h6"},Po={__name:"DenominationDialogReport",props:{reports:Array,total:Number},setup(r){const{dialogRef:y,onDialogHide:k}=Ve(),g=r.reports[0]||{},m=d=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(d),$=z(()=>{const d={oneThousandBills:1e3,fiveHundredBills:500,twoHundredBills:200,oneHundredBills:100,fiftyBills:50,twentyBills:20,twentyCoins:20,tenCoins:10,fiveCoins:5,oneCoins:1,twentyFiveCents:.25};return Object.keys(d).reduce((f,_)=>f+(g[_]||0)*d[_],0)});return(d,f)=>(w(),L(W,{ref_key:"dialogRef",ref:y,onHide:Y(k)},{default:t(()=>[e(O,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(R,{style:{"background-color":"#03a9f4"}},{default:t(()=>[o("div",ko,[xo,se((w(),L(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(de,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[re]])])]),_:1}),e(R,null,{default:t(()=>[o("div",$o,[o("div",Vo,[o("div",null,"1000 Bills: "+b(Y(g).oneThousandBills),1),o("div",null,"500 Bills: "+b(Y(g).fiveHundredBills),1),o("div",null,"200 Bills: "+b(Y(g).twoHundredBills),1),o("div",null,"100 Bills: "+b(Y(g).oneHundredBills),1),o("div",null,"50 Bills: "+b(Y(g).fiftyBills),1),o("div",null,"20 Bills: "+b(Y(g).twentyBills),1)]),o("div",Co,[o("div",null,"20 coins: "+b(Y(g).twentyCoins),1),o("div",null,"10 coins: "+b(Y(g).tenCoins),1),o("div",null,"5 coins: "+b(Y(g).fiveCoins),1),o("div",null,"1 coins: "+b(Y(g).oneCoins),1),o("div",null,"25 cents: "+b(Y(g).twentyFiveCents),1)])])]),_:1}),e(R,null,{default:t(()=>[o("div",Ro,[o("div",So," Overall Total Denomination: "+b(m($.value)),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const No=r=>(ae("data-v-43ad17ba"),r=r(),oe(),r),Uo=No(()=>o("div",{class:"text-h6",align:"center"},"Denomination Report",-1)),Do={class:"q-gutter-x-md",align:"center"},qo={__name:"DenominationReport",props:["sales_Reports"],setup(r){const y=r;y.sales_Reports,console.log("Denomination report",y);const k=Se(),x=(g,m)=>{k.dialog({component:Po,componentProps:{reports:g,total:m}})};return(g,m)=>(w(),N("div",null,[e(O,{class:"user-card"},{default:t(()=>[e(R,null,{default:t(()=>[Uo]),_:1}),e(R,null,{default:t(()=>[o("div",Do,[e(D,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",onClick:m[0]||(m[0]=$=>x(y.sales_Reports[0].denomination_reports,y.sales_Reports[0].denomination_total)),class:"user-button"})])]),_:1})]),_:1})]))}};var To=X(qo,[["__scopeId","data-v-43ad17ba"]]);const Ao={class:"row justify-between text-white"},Bo=o("div",{class:"text-h6"},"Expenses Report",-1),Io={class:"row justify-end q-mt-md"},Fo={class:"text-h6"},Lo={__name:"ExpensesDialog",props:{reports:Array,total:Number},setup(r){const{dialogRef:y,onDialogHide:k,onDialogOK:x,onDialogCancel:g}=Ve(),m=r;m.reports,console.log("Expenses total",m.total);const $=p=>p?p.split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1).toLowerCase()).join(" "):"",d=async(p,c)=>{console.log("update data of the updateName",p),console.log("update val of the updateName",c);try{const a=await Z.put("/api/update-expenses-sales-name-report/"+p.id,{name:c});console.log("Updated expenses amount response:",a.data)}catch(a){console.error(a)}},f=async(p,c)=>{console.log("update data of the description",p),console.log("update val of the description",c);try{const a=await Z.put("/api/update-expenses-sales-description-report/"+p.id,{description:c});console.log("Updated expenses amount response:",a.data)}catch(a){console.error(a)}},_=async(p,c)=>{console.log("update data of the amount",p),console.log("update val of the amount",c);try{const a=await Z.put("/api/update-expenses-sales-amount-report/"+p.id,{amount:parseFloat(c)});console.log("Updated expenses amount response:",a.data)}catch(a){console.error(a)}},i=[{name:"name",label:"Expenses Name",field:p=>(console.log("Row data:",p),p.name||"N/A"),align:"center"},{name:"description",label:"Description",field:"description",align:"center"},{name:"amount",label:"Amount",field:"amount",align:"center"}];console.log("Reports data structure:",m.reports);const h=p=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(p),u=z(()=>(console.log("Filtered rows:",m.reports||[]),m.reports||[])),V=z(()=>u.value.reduce((c,a)=>{const l=parseFloat(a.amount)||0;return c+l},0));return console.log("Expenses:",u.value),(p,c)=>(w(),L(W,{ref_key:"dialogRef",ref:y,onHide:Y(k),onOk:p.handleButtonClick,onCancel:Y(g)},{default:t(()=>[e(O,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(R,{style:{"background-color":"#03a9f4"}},{default:t(()=>[o("div",Ao,[Bo,se((w(),L(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(de,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[re]])])]),_:1}),e(R,null,{default:t(()=>[e(fe,{filter:p.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:i,rows:u.value,"row-key":"name","virtual-scroll":"",pagination:p.pagination,"onUpdate:pagination":c[0]||(c[0]=a=>p.pagination=a),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(a=>[e(j,{props:a},{default:t(()=>[o("span",null,b(`${$(a.row.name)}`),1),e(le,{"onUpdate:modelValue":[l=>d(a.row,l),l=>a.row.name=l],modelValue:a.row.name,"auto-save":""},{default:t(l=>[e(F,{class:"text-capitalize",modelValue:l.value,"onUpdate:modelValue":n=>l.value=n,dense:"",autofocus:"",counter:"",onKeyup:te(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-description":t(a=>[e(j,{props:a},{default:t(()=>[o("span",null,b(`${$(a.row.description)}`),1),e(le,{"onUpdate:modelValue":[l=>f(a.row,l),l=>a.row.description=l],modelValue:a.row.description,"auto-save":""},{default:t(l=>[e(F,{class:"text-capitalize",modelValue:l.value,"onUpdate:modelValue":n=>l.value=n,dense:"",autofocus:"",counter:"",onKeyup:te(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-amount":t(a=>[e(j,{props:a},{default:t(()=>[o("span",null,b(h(a.row.amount)),1),e(le,{"onUpdate:modelValue":[l=>_(a.row,parseFloat(l)),l=>a.row.amount=l],modelValue:a.row.amount,"auto-save":""},{default:t(l=>[e(F,{modelValue:l.value,"onUpdate:modelValue":n=>l.value=n,modelModifiers:{number:!0},dense:"",type:"number",mask:"##0.00",autofocus:"",counter:"",onKeyup:te(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(R,null,{default:t(()=>[o("div",Io,[o("div",Fo," Overall Total Expenses: "+b(h(V.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","onOk","onCancel"]))}};const Mo=r=>(ae("data-v-4747b3c7"),r=r(),oe(),r),zo=Mo(()=>o("div",{class:"text-h6",align:"center"},"Expenses Report",-1)),Oo={class:"q-gutter-x-md",align:"center"},Ho={__name:"ExpensesReport",props:["sales_Reports"],setup(r){const y=r;console.log("Expenses Data",y.sales_Reports[0].expenses_reports);const k=Se(),x=(g,m)=>{k.dialog({component:Lo,componentProps:{reports:g,total:m}})};return(g,m)=>(w(),N("div",null,[e(O,{class:"user-card"},{default:t(()=>[e(R,null,{default:t(()=>[zo]),_:1}),e(R,null,{default:t(()=>[o("div",Oo,[e(D,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",class:"user-button",onClick:m[0]||(m[0]=$=>x(y.sales_Reports[0].expenses_reports,y.sales_Reports[0].expenses_total))})])]),_:1})]),_:1})]))}};var jo=X(Ho,[["__scopeId","data-v-4747b3c7"]]);const Ko={class:"row justify-between text-white"},Qo=o("div",{class:"text-h6"},"Credits Report",-1),Eo={class:"row justify-end q-mt-md"},Yo={class:"text-h6"},Go={__name:"CreditsReportDialog",props:{reports:Array,total:Number},setup(r){const{dialogRef:y,onDialogHide:k,onDialogOK:x,onDialogCancel:g}=Ve(),m=r,$=m.reports;console.log("creditReports data",$),$.forEach((p,c)=>{console.log(`Report ${c}:`,p),console.log(`Credit Products for Report ${c}:`,p.credit_products.total_amount)});const d=z(()=>$.flatMap(p=>p.credit_products.map(c=>{const a=parseInt(c.pieces,10)||0,l=parseFloat(c.price)||0,n=a*l;return{...c,total_amount:n}})));console.log("All Credit Products:",d.value[0]);const f=p=>p?p.split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1).toLowerCase()).join(" "):"",_=p=>{const c=s=>s?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():"",a=p.firstname?c(p.firstname):"No Firstname",l=p.middlename?c(p.middlename).charAt(0)+".":"",n=p.lastname?c(p.lastname):"No Lastname";return`${a} ${l} ${n}`.trim()},i=[{name:"name",label:"Employee Name",field:p=>_(p.credit_user_id),align:"center"},{name:"productName",label:"Product Name",field:p=>p.product.name||"N/A",align:"center"},{name:"pieces",label:"Pieces",field:"pieces",align:"center"},{name:"price",label:"Price",field:"price",align:"center"},{name:"total_amount",label:"Total Amount",field:"total_amount",align:"center"}];console.log("Reports data structure:",m.reports);const h=p=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(p),u=p=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(p),V=z(()=>d.value.reduce((c,a)=>{const l=parseFloat(a.total_amount)||0;return c+l},0));return(p,c)=>(w(),L(W,{ref_key:"dialogRef",ref:y,onHide:Y(k),onOk:p.handleButtonClick,onCancel:Y(g)},{default:t(()=>[e(O,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(R,{style:{"background-color":"#03a9f4"}},{default:t(()=>[o("div",Ko,[Qo,se((w(),L(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(de,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[re]])])]),_:1}),e(R,null,{default:t(()=>[e(fe,{filter:p.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:i,rows:d.value,"row-key":"name","virtual-scroll":"",pagination:p.pagination,"onUpdate:pagination":c[0]||(c[0]=a=>p.pagination=a),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-productName":t(a=>[e(j,{props:a},{default:t(()=>[o("span",null,b(`${f(a.row.product.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(a=>[e(j,{props:a},{default:t(()=>[o("span",null,b(`${h(a.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-total_amount":t(a=>[e(j,{props:a},{default:t(()=>[o("span",null,b(`${u(a.row.total_amount)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(R,null,{default:t(()=>[o("div",Eo,[o("div",Yo," Overall Total Expenses: "+b(h(V.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","onOk","onCancel"]))}};const Jo=r=>(ae("data-v-037b1d7d"),r=r(),oe(),r),Wo=Jo(()=>o("div",{class:"text-h6",align:"center"},"Credits Report",-1)),Xo={class:"q-gutter-x-md",align:"center"},Zo={__name:"CreditsReport",props:["sales_Reports"],setup(r){const y=r,k=Se(),x=(g,m)=>{k.dialog({component:Go,componentProps:{reports:g,total:m}})};return(g,m)=>(w(),N("div",null,[e(O,{class:"user-card"},{default:t(()=>[e(R,null,{default:t(()=>[Wo]),_:1}),e(R,null,{default:t(()=>[o("div",Xo,[e(D,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",class:"user-button",onClick:m[0]||(m[0]=$=>x(y.sales_Reports[0].credit_reports,y.sales_Reports[0].credit_total))})])]),_:1}),e(R)]),_:1})]))}};var en=X(Zo,[["__scopeId","data-v-037b1d7d"]]);const tn=r=>(ae("data-v-77659dfa"),r=r(),oe(),r),an={class:"q-mt-lg row items-start q-gutter-md justify-center"},on={class:"row justify-between"},nn=tn(()=>o("div",{class:"text-h6"},"Sales Report",-1)),ln={align:"right"},sn={class:"text-subtitle1 text-weight-regular"},rn={class:"row q-gutter-sm q-pa-md"},dn={class:"q-ma-sm"},cn={class:"q-ma-sm",align:"center"},un=["src"],mn={__name:"SalesReportPanel",props:["salesReport"],setup(r){Ke.exports.vfs=nt;const y=r,k=y.salesReport;console.log("reportsData",y.salesReport);const x=P(!0),g=P(!1),m=P(""),$=u=>ge.formatDate(u,"MMMM DD, YYYY"),d=u=>{const V=new Date(u),p={hour:"2-digit",minute:"2-digit",hour12:!0};return V.toLocaleTimeString(void 0,p)},f=u=>{const V=l=>l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"",p=u.firstname?V(u.firstname):"No Firstname",c=u.middlename?V(u.middlename).charAt(0)+".":"",a=u.lastname?V(u.lastname):"No Lastname";return`${p} ${c} ${a}`.trim()},_=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(u).replace("\u20B1","\u20B1	"),i=u=>{const V=z(()=>u.credit_reports.flatMap(B=>B.credit_products));console.log("All Credit Products:",V.value);const p=[{title:"Bread Production",data:(u.bread_reports||[]).map(B=>{const H=Number(B.beginnings)||0,G=Number(B.new_production)||0,me=Number(B.remaining)||0,we=Number(B.bread_out)||0,ce=Number(B.price)||0,I=H+G,M=me+we,ee=I-M,E=ee*ce;return{...B,total:I,bread_sold:ee,sales:E}}),columns:["bread.name","beginnings","price","new_production","bread_out","bread_sold","total","remaining","sales"],totals:["sales"]},{title:"Selecta Production",data:(u.selecta_reports||[]).map(B=>{const H=Number(B.beginnings||0),G=Number(B.added_stocks||0),me=Number(B.out||0),we=Number(B.remaining||0),ce=Number(B.price||0),I=H+G,M=we+me,ee=I-M,E=ee*ce;return{...B,total:I,sold:ee,sales:E}}),columns:["selecta.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Softdrinks Production",data:(u.softdrinks_reports||[]).map(B=>{const H=Number(B.beginnings||0),G=Number(B.added_stocks||0),me=Number(B.out||0),we=Number(B.remaining||0),ce=Number(B.price||0),I=H+G,M=we+me,ee=I-M,E=ee*ce;return{...B,total:I,sold:ee,sales:E}}),columns:["softdrinks.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Other Products Production",data:(u.other_products_reports||[]).map(B=>{const H=Number(B.beginnings||0),G=Number(B.added_stocks||0),me=Number(B.out||0),we=Number(B.remaining||0),ce=Number(B.price||0),I=H+G,M=we+me,ee=I-M,E=ee*ce;return{...B,total:I,sold:ee,sales:E}}),columns:["other_products.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Cake Production",data:u.cake_sales_reports||[],columns:["cake_report.name","cake_report.user.employee","cake_report.layers","cake_report.price","cake_report.sales_status"],totals:["cake_report.price"]}],c=u.expenses_reports||[],a=V.value||[],l=u.denomination_reports[0]||[],n=u.denomination_total;u.charges_amount,u.over_total;const s={bills:[{name:"One Thousand",pcs:l.oneThousandBills||0,value:(l.oneThousandBills||0)*1e3},{name:"Five Hundred",pcs:l.fiveHundredBills||0,value:(l.fiveHundredBills||0)*500},{name:"Two Hundred",pcs:l.twoHundredBills||0,value:(l.twoHundredBills||0)*200},{name:"One Hundred",pcs:l.oneHundredBills||0,value:(l.oneHundredBills||0)*100},{name:"Fifty",pcs:l.fiftyBills||0,value:(l.fiftyBills||0)*50},{name:"Twenty",pcs:l.twentyBills||0,value:(l.twentyBills||0)*20}],coins:[{name:"Twenty",pcs:l.twentyCoins||0,value:(l.twentyCoins||0)*20},{name:"Ten",pcs:l.tenCoins||0,value:(l.tenCoins||0)*10},{name:"Five",pcs:l.fiveCoins||0,value:(l.fiveCoins||0)*5},{name:"One",pcs:l.oneCoins||0,value:(l.oneCoins||0)*1},{name:"Twenty Five Cents",pcs:l.twentyFiveCents||0,value:(l.twentyFiveCents||0)*.25}]},C=(B,H,G)=>{const me=(ce,I)=>I.split(".").reduce((M,ee)=>M?M[ee]:0,ce),we=G.reduce((ce,I)=>(ce[I]=B.reduce((M,ee)=>M+parseFloat(me(ee,I))||0,0),ce),{});return[...B.map(ce=>H.map(I=>{if(I==="cake_report.user.employee"){const M=me(ce,"cake_report.user.employee");return{text:M?f(M):"No Employee",style:"body",alignment:"center"}}return{text:I.includes(".")?me(ce,I)||"-":ce[I]||"-",style:"body",alignment:"center"}})),[{text:"Overall Total",colSpan:H.length-G.length,style:"tableHeader",alignment:"right",color:"#020617"},...Array(H.length-G.length-1).fill({}),...G.map(ce=>({text:`\u20B1 ${we[ce].toFixed(2)}`,style:"tableHeader",alignment:"center",color:"#020617"}))]]};let U=0;const T=a.length>0?a.map(B=>{const H=(B.price||0)*(B.pieces||0);return U+=H,[{text:f(B.credit_user_id),style:"body",alignment:"center"},{text:B.product.name,style:"body",alignment:"center"},{text:B.pieces,style:"body",alignment:"center"},{text:_(B.price),style:"body",alignment:"center"},{text:_(H),style:"body",alignment:"center"}]}):[[{text:"No data available",colSpan:5,alignment:"center"}]];T.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:3},{},{},{text:_(U),style:"bodyBold",alignment:"center",colSpan:2},{}]);let v=0;const q=c.length>0?c.map(B=>{const H=parseFloat(B.amount.replace(/[^0-9.-]+/g,""));return isNaN(H)||(v+=H),[{text:B.name,style:"body",alignment:"center"},{text:B.description,style:"body",alignment:"center"},{text:`${_(H)}`,style:"body",alignment:"center"}]}):[[{text:"No data available",colSpan:3,alignment:"center"}]];q.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:2},{},{text:`${_(v)}`,style:"bodyBold",alignment:"center"}]);const A=s.bills.map((B,H)=>{var G,me;return[{text:B.name,style:"body",alignment:"center"},{text:B.pcs,style:"body",alignment:"center"},{text:((G=s.coins[H])==null?void 0:G.name)||"",style:"body",alignment:"center"},{text:((me=s.coins[H])==null?void 0:me.pcs)||"0",style:"body",alignment:"center"}]});A.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:3,color:"#020617"},{},{},{text:`${_(n)}`,style:"bodyBold",alignment:"right",color:"#020617"}]);const Q=p.map(({title:B,data:H,columns:G,totals:me})=>({stack:[{text:B,style:"subheader",alignment:"center"},{table:{headerRows:1,widths:Array(G.length).fill("*"),body:[G.map(we=>({text:we.split(".").pop().replace(/_/g," ").replace(/\b\w/g,ce=>ce.toUpperCase()),style:"tableHeader",alignment:"center"})),...C(H,G,me)]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]})),ve=p.reduce((B,H)=>{const G=H.data.reduce((me,we)=>me+(we.sales||0),0);return B+G},0),Ce=s.bills.reduce((B,H)=>B+H.value,0)+s.coins.reduce((B,H)=>B+H.value,0),qe={table:{widths:["50%","50%"],body:[[{text:"Total Denomination",style:"tableHeader",alignment:"left"},{text:_(Ce),style:"tableData",alignment:"center"}],[{text:"Total Product Sales Amount",style:"tableHeader",alignment:"left"},{text:_(ve),style:"tableData",alignment:"center"}],[{text:"Total Expenses",style:"tableHeader",alignment:"left"},{text:_(v),style:"tableData",alignment:"center"}],[{text:"Total Credits",style:"tableHeader",alignment:"left"},{text:_(U),style:"tableData",alignment:"center"}],[{text:"Over Cash",style:"tableHeader",alignment:"left"},{text:_(u.over_total),style:"tableData",alignment:"center"}],[{text:"Charges",style:"tableHeader",alignment:"left"},{text:`${_(u.charges_amount)}`,style:"tableData",alignment:"center"}]]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}};return{content:[{text:"Sales Report",style:"header",alignment:"center"},{columns:[{text:`Branch Name: ${u.branch.name}
          Cashier: ${f(u.user.employee)}
          Date: ${$(u.created_at)}
Time: ${d(u.created_at)}
`,margin:[0,0,0,10]},{}]},...Q,{margin:[0,5,0,0],columns:[{width:"50%",stack:[{text:"Expenses Report",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","auto","*"],body:[[{text:"Expenses Name",style:"tableHeader",alignment:"center"},{text:"Description",style:"tableHeader",alignment:"center"},{text:"Amount",style:"tableHeader",alignment:"center"}],...q]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}},{text:"Credit Report",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*","auto","auto","auto"],body:[[{text:"Employee Name",style:"tableHeader",alignment:"center"},{text:"Product Name",style:"tableHeader",alignment:"center"},{text:"Pieces",style:"tableHeader",alignment:"center"},{text:"Price",style:"tableHeader",alignment:"center"},{text:"Amount",style:"tableHeader",alignment:"center"}],...T]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]},{width:"50%",stack:[{text:"Denomination Report",style:"subheader",alignment:"center"},{table:{headerRows:0,widths:["*","auto","*","auto"],body:[[{text:"Bills",style:"tableHeader",alignment:"center"},{text:"Pcs",style:"tableHeader",alignment:"center"},{text:"Coins",style:"tableHeader",alignment:"center"},{text:"Pcs",style:"tableHeader",alignment:"center"}],...A]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]}],columnGap:10},{},{canvas:[{type:"line",x1:0,y1:25,x2:580,y2:25,lineWidth:1,dash:{length:5,space:5},lineColor:"#000000",margin:[0,20,0,0]}]},{margin:[0,20,0,0],stack:[{text:"Summary",style:"subheader",alignment:"center"},qe]}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableHeader:{bold:!0,fontSize:10,color:"black"},body:{fontSize:8}},pageMargins:[10,10,10,10]}},h=u=>{const V=i(u);Ke.exports.createPdf(V).getDataUrl(p=>{m.value=p,g.value=!0})};return(u,V)=>(w(),N(K,null,[e(O,{class:"my-card q-pa-md"},{default:t(()=>[e(R,null,{default:t(()=>[o("div",an,[(w(!0),N(K,null,be(Y(k),(p,c)=>(w(),N("div",{key:c},[e(O,{flat:"",dense:"",bordered:""},{default:t(()=>[e(R,null,{default:t(()=>[o("div",on,[nn,o("div",ln,[e(D,{padding:"xs md",label:"Print",icon:"print",outline:"",class:"user-button",onClick:a=>h(p)},null,8,["onClick"]),o("div",null,[e(de,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S(" Print Report ")]),_:1})])])]),o("div",sn,[o("div",null,"Name: "+b(f(p.user.employee)),1),o("div",null,"Date: "+b($(p.created_at)),1),o("div",null,"Time: "+b(d(p.created_at)),1)])]),_:2},1024),o("div",rn,[e(wo,{sales_Reports:[p]},null,8,["sales_Reports"]),e(To,{sales_Reports:[p]},null,8,["sales_Reports"]),e(jo,{sales_Reports:[p]},null,8,["sales_Reports"]),e(en,{sales_Reports:[p]},null,8,["sales_Reports"])])]),_:2},1024)]))),128))])]),_:1})]),_:1}),e(W,{modelValue:g.value,"onUpdate:modelValue":V[0]||(V[0]=p=>g.value=p),maximized:x.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[o("div",dn,[o("div",cn,[se((w(),L(D,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},{default:t(()=>[e(de,null,{default:t(()=>[S("Close")]),_:1})]),_:1})),[[re]])]),o("div",null,[o("iframe",{src:m.value,width:"100%",height:"700px"},null,8,un)])])]),_:1},8,["modelValue","maximized"])],64))}};var pn=X(mn,[["__scopeId","data-v-77659dfa"]]);const _n={class:"text-h6"},gn={class:"row q-gutter-x-md"},fn={__name:"ProductionReportDialog",props:["reports","reportLabel"],emits:["selectReport","hide","ok","cancel"],setup(r,{emit:y}){const{dialogRef:k,onDialogHide:x,onDialogOK:g,onDialogCancel:m}=Ve(),$=r;console.log("production report",$.reports);const d=$.reports.baker_reports,f=$.reports.sales_reports,_=$.reports.sales_reports_id;console.log("sales_report_id",_);const i=y,h=P("bakerReport"),u=P(!0),V=P(!1),p=a=>a?a.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",c=()=>{i("selectReport",$.reports),V.value=!0};return(a,l)=>(w(),L(W,{ref_key:"dialogRef",ref:k,modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=n=>V.value=n),onHide:Y(x),onOk:c,onCancel:Y(m),maximized:u.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(O,{style:{"background-color":"#f7f8fc"}},{default:t(()=>[e(R,{class:"row items-center text-white",style:{"background-color":"#595a5a"}},{default:t(()=>[o("div",_n,b(`${p(r.reports.branch_name)} ( ${r.reportLabel} Reports)`),1),e(Ne),o("div",gn,[o("div",null,[se((w(),L(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(de,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[re]])])])]),_:1}),e(R,null,{default:t(()=>[o("div",null,[e(Fe,{modelValue:h.value,"onUpdate:modelValue":l[0]||(l[0]=n=>h.value=n),align:"justify","narrow-indicator":"",class:"q-mb-lg"},{default:t(()=>[e(pe,{class:"text-purple",name:"bakerReport",label:"Baker Reports"}),e(pe,{class:"text-orange",name:"salesReport",label:"Sales Report"})]),_:1},8,["modelValue"])]),o("div",null,[e(Le,{modelValue:h.value,"onUpdate:modelValue":l[1]||(l[1]=n=>h.value=n),animated:"","transition-prev":"scale","transition-next":"scale",style:{"background-color":"#f7f8fc"}},{default:t(()=>[e(_e,{name:"bakerReport"},{default:t(()=>[e(ja,{bakersReport:Y(d),sales_report_id:Y(_)},null,8,["bakersReport","sales_report_id"])]),_:1}),e(_e,{name:"salesReport"},{default:t(()=>[e(pn,{salesReport:Y(f)},null,8,["salesReport"])]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide","onCancel","maximized"]))}};var vn=X(fn,[["__scopeId","data-v-0a776a06"]]);const bn=r=>(ae("data-v-12387bc6"),r=r(),oe(),r),yn={key:0,class:"spinner-wrapper"},hn={key:1},wn={key:0,class:"data-error"},kn=bn(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),xn={class:"row justify-center q-gutter-x-md"},$n={__name:"ProductionTable",setup(r){const y=xe();P("bakerReport");const k=y.params.branch_id;P(!1),P(!0),P(""),P("");const x=P({rowsPerPage:0}),g=it(),m=P(""),$=z(()=>g.productions);P(!0);const d=P(!0),f=P(!1),_=z(()=>m.value?$.value.filter(c=>c.name.toLowerCase().includes(m.value.toLowerCase())):$.value);$e(async()=>{k&&await i(k)});const i=async c=>{try{d.value=!0;const a=await g.fetchBranchProductions(c);console.log("Fetched data:",a),console.log("Production rows:",$.value),$.value.length||(f.value=!0)}catch{f.value=!0}finally{d.value=!1}};Ae(m,async c=>{d.value=!0,await new Promise(a=>setTimeout(a,1e3)),d.value=!1,f.value=_.value.length===0});const u=[{name:"reportDate",align:"center",label:"Date",field:"date",format:c=>ge.formatDate(c,"MMMM DD, YYYY")},{name:"reports",align:"center",label:"Reports",field:"reports"}],V=Se(),p=(c,a)=>{V.dialog({component:vn,componentProps:{reports:c,reportLabel:a}})};return(c,a)=>(w(),N(K,null,[o("div",null,[e(F,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=l=>m.value=l),class:"q-pb-lg q-pl-md",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100",style:{width:"500px","max-width":"1500px","min-width":"100px"}},{append:t(()=>[e(ie,{name:"search"})]),_:1},8,["modelValue"])]),d.value?(w(),N("div",yn,[e(Ge,{size:"50px",color:"primary"})])):(w(),N("div",hn,[_.value.length===0?(w(),N("div",wn,[e(ie,{name:"warning",color:"warning",size:"4em"}),kn])):(w(),L(fe,{key:1,class:"table-container sticky-header",filter:m.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"400px"},columns:u,rows:_.value,"row-key":"reportDate","virtual-scroll":"",pagination:x.value,"onUpdate:pagination":a[1]||(a[1]=l=>x.value=l),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-reports":t(l=>[e(j,{props:l},{default:t(()=>[o("div",xn,[e(D,{padding:"xs lg",rounded:"",dense:"",size:"sm",color:"light-blue-5","text-color":"white",onClick:n=>p(l.row.AM,"AM")},{default:t(()=>[S("AM")]),_:2},1032,["onClick"]),e(D,{padding:"xs lg",rounded:"",dense:"",size:"sm",color:"deep-orange","text-color":"white",onClick:n=>p(l.row.PM,"PM")},{default:t(()=>[S("PM")]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Vn=X($n,[["__scopeId","data-v-12387bc6"]]);const Cn={__name:"ProductionPage",setup(r){return(y,k)=>(w(),N("div",null,[e(Vn)]))}},Rn={class:"row justify-between"},Sn=o("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),Pn=o("div",{class:"text-h6"},"Decline Report",-1),Nn={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(r){const y=Te(),k=P(""),x=P(!1),g=P(!1),m=P({rowsPerPage:0}),$=Se(),d=r,f=()=>{g.value=!0},_=()=>{x.value=!0},i=async()=>{if(!k.value){$.notify({type:"negative",message:"Remark is required"});return}try{const c=await y.declineReport(d.report.id,k.value);console.log("Report declined:",c),$.notify({type:"negative",message:"Report declined successfully"}),x.value=!1,g.value=!1,k.value=""}catch(c){console.error("Error declining report:",c),$.notify({type:"negative",message:"Failed to decline report"})}},h=async()=>{try{const c=await y.confirmReport(d.report.id);console.log("Report confirmed:",c),$.notify({type:"positive",message:"Report confirmed successfully"}),g.value=!1}catch(c){console.error(c)}},u=z(()=>d.report.selecta_added_stocks||[]),V=c=>{const a=C=>C?C.charAt(0).toUpperCase()+C.slice(1).toLowerCase():"",l=c.firstname?a(c.firstname):"No Firstname",n=c.middlename?a(c.middlename).charAt(0)+".":"",s=c.lastname?a(c.lastname):"No Lastname";return`${l} ${n} ${s}`},p=[{name:"product_name",label:"Product Name",field:c=>c.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:c=>c.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:c=>c.added_stocks?`${c.added_stocks} pcs`:"N/A"}];return(c,a)=>(w(),N(K,null,[o("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:f})]),e(W,{modelValue:g.value,"onUpdate:modelValue":a[2]||(a[2]=l=>g.value=l)},{default:t(()=>[e(O,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[o("div",Rn,[Sn,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:a[0]||(a[0]=l=>g.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[o("div",null,"Cashier: "+b(V(r.report.employee)),1),o("div",null," Branch: "+b(r.report.branch.name),1),o("div",null,[S(" Status: "),e(ue,{color:"yellow",outlined:""},{default:t(()=>[S(b(r.report.status),1)]),_:1})])]),_:1}),e(R,null,{default:t(()=>[e(fe,{rows:u.value,columns:p,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:m.value,"onUpdate:pagination":a[1]||(a[1]=l=>m.value=l),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e(R,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(D,{color:"negative",label:"Decline",class:"action-btn",onClick:_}),e(D,{color:"positive",label:"Confirm",class:"action-btn",onClick:h})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,{modelValue:x.value,"onUpdate:modelValue":a[4]||(a[4]=l=>x.value=l)},{default:t(()=>[e(O,null,{default:t(()=>[e(R,null,{default:t(()=>[Pn]),_:1}),e(R,null,{default:t(()=>[e(F,{modelValue:k.value,"onUpdate:modelValue":a[3]||(a[3]=l=>k.value=l),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[l=>!!l||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(Pe,{align:"right"},{default:t(()=>[se(e(D,{flat:"",label:"Cancel",color:"primary"},null,512),[[re]]),e(D,{flat:"",label:"Confirm",color:"negative",onClick:i})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Un=r=>(ae("data-v-08e549d4"),r=r(),oe(),r),Dn={class:"q-gutter-md q-ma-md"},qn={class:"row justify-between"},Tn={class:"text-subtitle1"},An={class:"text-subtitle1"},Bn={class:"text-subtitle1"},In={key:1,class:"data-error"},Fn=Un(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ln={__name:"TransactionPendingCard",setup(r){const y=xe(),k=Te(),x=z(()=>k.pendingSelectaReports),g=y.params.branch_id,m=P("pending"),$=async()=>{try{const i=await k.fetchPendingSelectaStocks(g,m.value);console.log(x.value)}catch(i){console.error("Error fetching pending stocks:",i)}};$e(async()=>{g&&await $()});const d=i=>ge.formatDate(i,"MMMM D, YYYY"),f=i=>ge.formatDate(i,"hh:mm A"),_=i=>{const h=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",u=i.firstname?h(i.firstname):"No Firstname",V=i.middlename?h(i.middlename).charAt(0)+".":"",p=i.lastname?h(i.lastname):"No Lastname";return`${u} ${V} ${p}`};return(i,h)=>(w(),N("div",null,[e(De,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[o("div",Dn,[x.value.length?(w(!0),N(K,{key:0},be(x.value,(u,V)=>(w(),L(O,{key:V},{default:t(()=>[e(R,null,{default:t(()=>[o("div",qn,[o("div",Tn,b(d(u.created_at)),1),o("div",An,b(f(u.created_at)),1),o("div",Bn,b(u.branch.name)+" - "+b(_(u.employee)),1),o("div",null,[e(ue,{color:"yellow",outlined:""},{default:t(()=>[S(" Pending ")]),_:1})]),o("div",null,[e(Nn,{report:u},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(w(),N("div",In,[e(ie,{name:"warning",color:"warning",size:"4em"}),Fn]))])]),_:1})]))}};var Mn=X(Ln,[["__scopeId","data-v-08e549d4"]]);const zn={class:"row justify-between"},On=o("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),Hn={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(r){Te(),P(!1);const y=P(!1),k=()=>{y.value=!0};Se();const x=r,g=z(()=>(console.log("Filtered rows:",x.report||[]),x.report.selecta_added_stocks||[])),m=d=>{const f=u=>u?u.charAt(0).toUpperCase()+u.slice(1).toLowerCase():"",_=d.firstname?f(d.firstname):"No Firstname",i=d.middlename?f(d.middlename).charAt(0)+".":"",h=d.lastname?f(d.lastname):"No Lastname";return`${_} ${i} ${h}`},$=[{name:"product_name",label:"Product Name",field:d=>(console.log("Row data:",d),d.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:d=>(console.log("Row data:",d),d.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:d=>d.added_stocks?`${d.added_stocks} pcs`:"N/A"}];return(d,f)=>(w(),N(K,null,[o("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:k})]),e(W,{modelValue:y.value,"onUpdate:modelValue":f[2]||(f[2]=_=>y.value=_)},{default:t(()=>[e(O,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[o("div",zn,[On,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:f[0]||(f[0]=_=>y.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[o("div",null,"Cashier: "+b(m(r.report.employee)),1),o("div",null," Branch: "+b(r.report.branch.name),1),o("div",null,[S(" Status: "),e(ue,{color:"green",outlined:""},{default:t(()=>[S(b(r.report.status),1)]),_:1})])]),_:1}),e(R,null,{default:t(()=>[e(fe,{rows:g.value,columns:$,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:d.pagination,"onUpdate:pagination":f[1]||(f[1]=_=>d.pagination=_),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const jn=r=>(ae("data-v-c1019cbc"),r=r(),oe(),r),Kn={class:"q-gutter-md q-ma-md"},Qn={class:"row justify-between"},En={class:"text-subtitle1"},Yn={class:"text-subtitle1"},Gn={class:"text-subtitle1"},Jn={key:1,class:"data-error"},Wn=jn(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Xn={__name:"TransactionConfirmedCard",setup(r){const y=xe(),k=Te(),x=z(()=>k.confirmedSelectaReports),g=y.params.branch_id,m=P("confirmed"),$=async()=>{try{const i=await k.fetchConfirmedSelectaStocks(g,m.value);console.log(x.value)}catch(i){console.error("Error fetching confirmed stocks:",i)}};$e(async()=>{g&&await $()});const d=i=>ge.formatDate(i,"MMMM D, YYYY"),f=i=>ge.formatDate(i,"hh:mm A"),_=i=>{const h=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",u=i.firstname?h(i.firstname):"No Firstname",V=i.middlename?h(i.middlename).charAt(0)+".":"",p=i.lastname?h(i.lastname):"No Lastname";return`${u} ${V} ${p}`};return(i,h)=>(w(),N("div",null,[e(De,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[o("div",Kn,[x.value.length?(w(!0),N(K,{key:0},be(x.value,(u,V)=>(w(),L(O,{key:V},{default:t(()=>[e(R,null,{default:t(()=>[o("div",Qn,[o("div",En,b(d(u.created_at)),1),o("div",Yn,b(f(u.created_at)),1),o("div",Gn,b(u.branch.name)+" - "+b(_(u.employee)),1),o("div",null,[e(ue,{color:"green",outlined:""},{default:t(()=>[S(b(u.status),1)]),_:2},1024)]),o("div",null,[e(Hn,{report:u},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(w(),N("div",Jn,[e(ie,{name:"warning",color:"warning",size:"4em"}),Wn]))])]),_:1})]))}};var Zn=X(Xn,[["__scopeId","data-v-c1019cbc"]]);const el={class:"row justify-between"},tl=o("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),al={class:"q-mt-md"},ol={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(r){Te(),P(!1);const y=P(!1),k=()=>{y.value=!0},x=r,g=z(()=>(console.log("Filtered rows:",x.report||[]),x.report.selecta_added_stocks||[])),m=d=>{const f=u=>u?u.charAt(0).toUpperCase()+u.slice(1).toLowerCase():"",_=d.firstname?f(d.firstname):"No Firstname",i=d.middlename?f(d.middlename).charAt(0)+".":"",h=d.lastname?f(d.lastname):"No Lastname";return`${_} ${i} ${h}`},$=[{name:"product_name",label:"Product Name",field:d=>(console.log("Row data:",d),d.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:d=>(console.log("Row data:",d),d.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:d=>d.added_stocks?`${d.added_stocks} pcs`:"N/A"}];return(d,f)=>(w(),N(K,null,[o("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:k})]),e(W,{modelValue:y.value,"onUpdate:modelValue":f[2]||(f[2]=_=>y.value=_)},{default:t(()=>[e(O,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[o("div",el,[tl,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:f[0]||(f[0]=_=>y.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[o("div",null,"Cashier: "+b(m(r.report.employee)),1),o("div",null," Branch: "+b(r.report.branch.name),1),o("div",null,[S(" Status: "),e(ue,{color:"red",outlined:""},{default:t(()=>[S(b(r.report.status),1)]),_:1})]),o("div",al,"Remark: "+b(r.report.remark),1)]),_:1}),e(R,null,{default:t(()=>[e(fe,{rows:g.value,columns:$,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:d.pagination,"onUpdate:pagination":f[1]||(f[1]=_=>d.pagination=_),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const nl=r=>(ae("data-v-6b801095"),r=r(),oe(),r),ll={class:"q-gutter-md q-ma-md"},sl={class:"row justify-between"},rl={class:"text-subtitle1"},il={class:"text-subtitle1"},dl={class:"text-subtitle1"},cl={key:1,class:"data-error"},ul=nl(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),ml={__name:"TransactionDeclinedCard",setup(r){const y=xe(),k=Te(),x=z(()=>k.declinedSelectaReports),g=y.params.branch_id,m=P("declined"),$=async()=>{try{const i=await k.fetchDeclinedSelectaStocks(g,m.value);console.log("selectedProductsDeclined",x.value)}catch(i){console.error("Error fetching decline stocks:",i)}};$e(async()=>{g&&await $()});const d=i=>ge.formatDate(i,"MMMM D, YYYY"),f=i=>ge.formatDate(i,"hh:mm A"),_=i=>{const h=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",u=i.firstname?h(i.firstname):"No Firstname",V=i.middlename?h(i.middlename).charAt(0)+".":"",p=i.lastname?h(i.lastname):"No Lastname";return`${u} ${V} ${p}`};return(i,h)=>(w(),N("div",null,[e(De,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[o("div",ll,[x.value.length?(w(!0),N(K,{key:0},be(x.value,(u,V)=>(w(),L(O,{key:V},{default:t(()=>[e(R,null,{default:t(()=>[o("div",sl,[o("div",rl,b(d(u.created_at)),1),o("div",il,b(f(u.created_at)),1),o("div",dl,b(u.branch.name)+" - "+b(_(u.employee)),1),o("div",null,[e(ue,{color:"red",outlined:""},{default:t(()=>[S(b(u.status),1)]),_:2},1024)]),o("div",null,[e(ol,{report:u},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(w(),N("div",cl,[e(ie,{name:"warning",color:"warning",size:"4em"}),ul]))])]),_:1})]))}};var pl=X(ml,[["__scopeId","data-v-6b801095"]]);const _l={class:"q-gutter-y-sm"},gl={__name:"SelectaTransactionPage",setup(r){const y=P("pendingReports"),k=z(()=>{switch(y.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return(x,g)=>(w(),N(K,null,[o("div",_l,[e(Fe,{modelValue:y.value,"onUpdate:modelValue":g[0]||(g[0]=m=>y.value=m),"indicator-color":k.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(pe,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(pe,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(pe,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Le,{modelValue:y.value,"onUpdate:modelValue":g[1]||(g[1]=m=>y.value=m),animated:""},{default:t(()=>[e(_e,{name:"pendingReports"},{default:t(()=>[e(Mn)]),_:1}),e(_e,{name:"confirmReports"},{default:t(()=>[e(Zn)]),_:1}),e(_e,{name:"declineReports"},{default:t(()=>[e(pl)]),_:1})]),_:1},8,["modelValue"])],64))}};var fl=X(gl,[["__scopeId","data-v-6cbd59c6"]]);const vl={class:"row justify-between"},bl=o("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),yl=o("div",{class:"text-h6"},"Decline Report",-1),hl={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(r){const y=Me(),k=P(""),x=P(!1),g=P(!1),m=P({rowPerPage:0}),$=Se(),d=r,f=()=>{g.value=!0},_=()=>{x.value=!0},i=async()=>{if(!k.value){$.notify({type:"negative",message:"Remark is required"});return}try{const c=await y.declineReport(d.report.id,k.value);console.log("Report declined:",c),$.notify({type:"negative",message:"Report declined successfully"}),x.value=!1,g.value=!1,k.value=""}catch(c){console.error("Error declining report:",c),$.notify({type:"negative",message:"Failed to decline report"})}},h=async()=>{try{const c=await y.confirmReport(d.report.id);console.log("Report confirmed:",c),$.notify({type:"positive",message:"Report confirmed successfully"}),g.value=!1}catch(c){console.error(c)}},u=z(()=>d.report.softdrinks_added_stocks||[]),V=c=>{const a=C=>C?C.charAt(0).toUpperCase()+C.slice(1).toLowerCase():"",l=c.firstname?a(c.firstname):"No Firstname",n=c.middlename?a(c.middlename).charAt(0)+".":"",s=c.lastname?a(c.lastname):"No Lastname";return`${l} ${n} ${s}`},p=[{name:"product_name",label:"Product Name",field:c=>c.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:c=>c.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:c=>c.added_stocks?`${c.added_stocks} pcs`:"N/A"}];return(c,a)=>(w(),N("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:f}),e(W,{modelValue:g.value,"onUpdate:modelValue":a[2]||(a[2]=l=>g.value=l)},{default:t(()=>[e(O,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[o("div",vl,[bl,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:a[0]||(a[0]=l=>g.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[o("div",null,"Cashier: "+b(V(r.report.employee)),1),o("div",null," Branch: "+b(r.report.branch.name),1),o("div",null,[S(" Status: "),e(ue,{color:"yellow",outlined:""},{default:t(()=>[S(b(r.report.status),1)]),_:1})])]),_:1}),e(R,null,{default:t(()=>[e(fe,{rows:u.value,columns:p,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:m.value,"onUpdate:pagination":a[1]||(a[1]=l=>m.value=l),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e(R,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(D,{color:"negative",label:"Decline",class:"action-btn",onClick:_}),e(D,{color:"positive",label:"Confirm",class:"action-btn",onClick:h})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,{modelValue:x.value,"onUpdate:modelValue":a[4]||(a[4]=l=>x.value=l)},{default:t(()=>[e(O,null,{default:t(()=>[e(R,null,{default:t(()=>[yl]),_:1}),e(R,null,{default:t(()=>[e(F,{modelValue:k.value,"onUpdate:modelValue":a[3]||(a[3]=l=>k.value=l),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[l=>!!l||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(Pe,{align:"right"},{default:t(()=>[se(e(D,{flat:"",label:"Cancel",color:"primary"},null,512),[[re]]),e(D,{flat:"",label:"Confirm",color:"negative",onClick:i})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};const wl=r=>(ae("data-v-7ba0107e"),r=r(),oe(),r),kl={class:"q-gutter-md q-ma-md"},xl={class:"row justify-between"},$l={class:"text-subtitle1"},Vl={class:"text-subtitle1"},Cl={class:"text-subtitle1"},Rl={key:1,class:"data-error"},Sl=wl(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Pl={__name:"TransactionPendingCard",setup(r){const y=xe(),k=Me(),x=z(()=>k.pendingSoftdrinksReports),g=y.params.branch_id,m=P("pending"),$=async()=>{try{const i=await k.fetchPendingSoftdrinksStocks(g,m.value);console.log(x.value)}catch(i){console.error("Error fetching pending stocks:",i)}};$e(async()=>{g&&await $()});const d=i=>ge.formatDate(i,"MMMM D, YYYY"),f=i=>ge.formatDate(i,"hh:mm A"),_=i=>{const h=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",u=i.firstname?h(i.firstname):"No Firstname",V=i.middlename?h(i.middlename).charAt(0)+".":"",p=i.lastname?h(i.lastname):"No Lastname";return`${u} ${V} ${p}`};return(i,h)=>(w(),N("div",null,[e(De,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[o("div",kl,[x.value.length?(w(!0),N(K,{key:0},be(x.value,(u,V)=>(w(),L(O,{key:V},{default:t(()=>[e(R,null,{default:t(()=>[o("div",xl,[o("div",$l,b(d(u.created_at)),1),o("div",Vl,b(f(u.created_at)),1),o("div",Cl,b(u.branch.name)+" - "+b(_(u.employee)),1),o("div",null,[e(ue,{color:"yellow",outlined:""},{default:t(()=>[S(" Pending ")]),_:1})]),o("div",null,[e(hl,{report:u},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(w(),N("div",Rl,[e(ie,{name:"warning",color:"warning",size:"4em"}),Sl]))])]),_:1})]))}};var Nl=X(Pl,[["__scopeId","data-v-7ba0107e"]]);const Ul={class:"row justify-between"},Dl=o("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),ql={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(r){Me(),P(!1);const y=P(!1),k=()=>{y.value=!0},x=r,g=z(()=>(console.log("Filtered rows:",x.report||[]),x.report.softdrinks_added_stocks||[])),m=d=>{const f=u=>u?u.charAt(0).toUpperCase()+u.slice(1).toLowerCase():"",_=d.firstname?f(d.firstname):"No Firstname",i=d.middlename?f(d.middlename).charAt(0)+".":"",h=d.lastname?f(d.lastname):"No Lastname";return`${_} ${i} ${h}`},$=[{name:"product_name",label:"Product Name",field:d=>(console.log("Row data:",d),d.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:d=>(console.log("Row data:",d),d.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:d=>d.added_stocks?`${d.added_stocks} pcs`:"N/A"}];return(d,f)=>(w(),N(K,null,[o("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:k})]),e(W,{modelValue:y.value,"onUpdate:modelValue":f[2]||(f[2]=_=>y.value=_)},{default:t(()=>[e(O,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[o("div",Ul,[Dl,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:f[0]||(f[0]=_=>y.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[o("div",null,"Cashier: "+b(m(r.report.employee)),1),o("div",null," Branch: "+b(r.report.branch.name),1),o("div",null,[S(" Status: "),e(ue,{color:"green",outlined:""},{default:t(()=>[S(b(r.report.status),1)]),_:1})])]),_:1}),e(R,null,{default:t(()=>[e(fe,{rows:g.value,columns:$,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:d.pagination,"onUpdate:pagination":f[1]||(f[1]=_=>d.pagination=_),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Tl=r=>(ae("data-v-2b1290c8"),r=r(),oe(),r),Al={class:"q-gutter-md q-ma-md"},Bl={class:"row justify-between"},Il={class:"text-subtitle1"},Fl={class:"text-subtitle1"},Ll={class:"text-subtitle1"},Ml={key:1,class:"data-error"},zl=Tl(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ol={__name:"TransactionConfirmedCard",setup(r){const y=xe(),k=Me(),x=z(()=>k.confirmedSoftdrinksReports),g=y.params.branch_id,m=P("confirmed"),$=async()=>{try{const i=await k.fetchConfirmedSoftdrinksStocks(g,m.value);console.log(x.value)}catch(i){console.error("Error fetching confirmed stocks",i)}};$e(async()=>{g&&await $()});const d=i=>ge.formatDate(i,"MMMM D, YYYY"),f=i=>ge.formatDate(i,"hh:mm A"),_=i=>{const h=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",u=i.firstname?h(i.firstname):"No Firstname",V=i.middlename?h(i.middlename).charAt(0)+".":"",p=i.lastname?h(i.lastname):"No Lastname";return`${u} ${V} ${p}`};return(i,h)=>(w(),N("div",null,[e(De,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[o("div",Al,[x.value.length?(w(!0),N(K,{key:0},be(x.value,(u,V)=>(w(),L(O,{key:V},{default:t(()=>[e(R,null,{default:t(()=>[o("div",Bl,[o("div",Il,b(d(u.created_at)),1),o("div",Fl,b(f(u.created_at)),1),o("div",Ll,b(u.branch.name)+" - "+b(_(u.employee)),1),o("div",null,[e(ue,{color:"green",outlined:""},{default:t(()=>[S(b(u.status),1)]),_:2},1024)]),o("div",null,[e(ql,{report:u},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(w(),N("div",Ml,[e(ie,{name:"warning",color:"warning",size:"4em"}),zl]))])]),_:1})]))}};var Hl=X(Ol,[["__scopeId","data-v-2b1290c8"]]);const jl={class:"row justify-between"},Kl=o("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),Ql={class:"q-mt-md"},El={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(r){Me();const y=P(!1),k=()=>{y.value=!0},x=r,g=z(()=>(console.log("Filtered rows:",x.report||[]),x.report.softdrinks_added_stocks)),m=d=>{const f=u=>u?u.charAt(0).toUpperCase()+u.slice(1).toLowerCase():"",_=d.firstname?f(d.firstname):"No Firstname",i=d.middlename?f(d.middlename).charAt(0)+".":"",h=d.lastname?f(d.lastname):"No Lastname";return`${_} ${i} ${h}`},$=[{name:"product_name",label:"Product Name",field:d=>(console.log("Row data:",d),d.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:d=>(console.log("Row data:",d),d.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:d=>d.added_stocks?`${d.added_stocks} pcs`:"N/A"}];return(d,f)=>(w(),N(K,null,[o("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:k})]),e(W,{modelValue:y.value,"onUpdate:modelValue":f[2]||(f[2]=_=>y.value=_)},{default:t(()=>[e(O,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[o("div",jl,[Kl,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:f[0]||(f[0]=_=>y.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[o("div",null,"Cashier: "+b(m(r.report.employee)),1),o("div",null," Branch: "+b(r.report.branch.name),1),o("div",null,[S(" Status: "),e(ue,{color:"red",outlined:""},{default:t(()=>[S(b(r.report.status),1)]),_:1})]),o("div",Ql,"Remark: "+b(r.report.remark),1)]),_:1}),e(R,null,{default:t(()=>[e(fe,{rows:g.value,columns:$,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:d.pagination,"onUpdate:pagination":f[1]||(f[1]=_=>d.pagination=_),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Yl=r=>(ae("data-v-51a1abe5"),r=r(),oe(),r),Gl={class:"q-gutter-md q-ma-md"},Jl={class:"row justify-between"},Wl={class:"text-subtitle1"},Xl={class:"text-subtitle1"},Zl={class:"text-subtitle1"},es={key:1,class:"data-error"},ts=Yl(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),as={__name:"TransactionDeclinedCard",setup(r){const y=xe(),k=Me(),x=z(()=>k.declinedSoftdrinksReports),g=y.params.branch_id,m=P("declined"),$=async()=>{try{const i=await k.fetchDeclinedSoftdrinksStocks(g,m.value);console.log("softdrinksProductsDeclined",x.value)}catch(i){console.error("Error fetching decline stocks:",i)}};$e(async()=>{g&&await $()});const d=i=>ge.formatDate(i,"MMMM D, YYYY"),f=i=>ge.formatDate(i,"hh:mm A"),_=i=>{const h=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",u=i.firstname?h(i.firstname):"No Firstname",V=i.middlename?h(i.middlename).charAt(0)+".":"",p=i.lastname?h(i.lastname):"No Lastname";return`${u} ${V} ${p}`};return(i,h)=>(w(),L(De,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[o("div",Gl,[x.value.length?(w(!0),N(K,{key:0},be(x.value,(u,V)=>(w(),L(O,{key:V},{default:t(()=>[e(R,null,{default:t(()=>[o("div",Jl,[o("div",Wl,b(d(u.created_at)),1),o("div",Xl,b(f(u.created_at)),1),o("div",Zl,b(u.branch.name)+" - "+b(_(u.employee)),1),o("div",null,[e(ue,{color:"red",outlined:""},{default:t(()=>[S(b(u.status),1)]),_:2},1024)]),o("div",null,[e(El,{report:u},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(w(),N("div",es,[e(ie,{name:"warning",color:"warning",size:"4em"}),ts]))])]),_:1}))}};var os=X(as,[["__scopeId","data-v-51a1abe5"]]);const ns={class:"q-gutter-y-sm"},ls={__name:"SoftdrinksTransactionPage",setup(r){const y=P("pendingReports"),k=z(()=>{switch(y.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return(x,g)=>(w(),N(K,null,[o("div",ns,[e(Fe,{modelValue:y.value,"onUpdate:modelValue":g[0]||(g[0]=m=>y.value=m),"indicator-color":k.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(pe,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(pe,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(pe,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Le,{modelValue:y.value,"onUpdate:modelValue":g[1]||(g[1]=m=>y.value=m),animated:""},{default:t(()=>[e(_e,{name:"pendingReports"},{default:t(()=>[e(Nl)]),_:1}),e(_e,{name:"confirmReports"},{default:t(()=>[e(Hl)]),_:1}),e(_e,{name:"declineReports"},{default:t(()=>[e(os)]),_:1})]),_:1},8,["modelValue"])],64))}};var ss=X(ls,[["__scopeId","data-v-368f5ccc"]]);const rs={class:"row justify-between"},is=o("div",{class:"text-h6"},"Other Product Added Stocks Report",-1),ds=o("div",{class:"text-h6"},"Decline Report",-1),cs={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(r){const y=Je(),k=P(""),x=P(!1),g=P(!1),m=P({rowsPerPage:0}),$=()=>{g.value=!0},d=()=>{x.value=!0},f=r,_=async()=>{if(!k.value){ke.create({type:"negative",message:"Remark is required"});return}try{const p=await y.declineReport(f.report.id,k.value);console.log("Report declined:",p),ke.create({type:"negative",message:"Report declined successfully"}),x.value=!1,g.value=!1,k.value=""}catch(p){console.error("Error declining report:",p),ke.create({type:"negative",message:"Failed to decline report"})}},i=async()=>{try{const p=await y.confirmReport(f.report.id);console.log("Report confirmed:",p),ke.create({type:"positive",message:"Report confirmed successfully"}),g.value=!1}catch(p){console.error(p)}},h=z(()=>f.report.other_added_stock||[]),u=[{name:"product_name",label:"Product Name",field:p=>p.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:p=>p.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:p=>p.added_stocks?`${p.added_stocks} pcs`:"N/A"}],V=p=>{const c=s=>s?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():"",a=p.firstname?c(p.firstname):"No Firstname",l=p.middlename?c(p.middlename).charAt(0)+".":"",n=p.lastname?c(p.lastname):"No Lastname";return`${a} ${l} ${n}`};return(p,c)=>(w(),N(K,null,[o("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:$})]),e(W,{modelValue:g.value,"onUpdate:modelValue":c[2]||(c[2]=a=>g.value=a)},{default:t(()=>[e(O,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[o("div",rs,[is,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:c[0]||(c[0]=a=>g.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[o("div",null,"Cashier: "+b(V(r.report.employee)),1),o("div",null," Branch: "+b(r.report.branch.name),1),o("div",null,[S(" Status: "),e(ue,{color:"yellow",outlined:""},{default:t(()=>[S(b(r.report.status),1)]),_:1})])]),_:1}),e(R,null,{default:t(()=>[e(fe,{rows:h.value,columns:u,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:m.value,"onUpdate:pagination":c[1]||(c[1]=a=>m.value=a),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e(R,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(D,{color:"negative",label:"Decline",class:"action-btn",onClick:d}),e(D,{color:"positive",label:"Confirm",class:"action-btn",onClick:i})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,{modelValue:x.value,"onUpdate:modelValue":c[4]||(c[4]=a=>x.value=a)},{default:t(()=>[e(O,null,{default:t(()=>[e(R,null,{default:t(()=>[ds]),_:1}),e(R,null,{default:t(()=>[e(F,{modelValue:k.value,"onUpdate:modelValue":c[3]||(c[3]=a=>k.value=a),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[a=>!!a||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(Pe,{align:"right"},{default:t(()=>[se(e(D,{flat:"",label:"Cancel",color:"primary"},null,512),[[re]]),e(D,{flat:"",label:"Confirm",color:"negative",onClick:_})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const us=r=>(ae("data-v-355e3e60"),r=r(),oe(),r),ms={class:"q-gutter-md q-ma-md"},ps={key:0},_s={class:"row justify-between"},gs={class:"text-subtitle1"},fs={class:"text-subtitle1"},vs={class:"text-subtitle1"},bs={key:1,class:"data-error"},ys=us(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),hs={__name:"TransactionPendingCard",setup(r){const y=xe(),k=Je(),x=z(()=>k.pendingOtherReports),g=y.params.branch_id,m=P("pending"),$=async()=>{try{const i=await k.fetchPendingOtherStocks(g,m.value);console.log(x.value)}catch(i){console.error("Error fetching pending stocks:",i)}};$e(async()=>{g&&await $()});const d=i=>ge.formatDate(i,"MMMM D, YYYY"),f=i=>ge.formatDate(i,"hh:mm A"),_=i=>{const h=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",u=i.firstname?h(i.firstname):"No Firstname",V=i.middlename?h(i.middlename).charAt(0)+".":"",p=i.lastname?h(i.lastname):"No Lastname";return`${u} ${V} ${p}`};return(i,h)=>(w(),N("div",null,[e(De,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[o("div",ms,[x.value.length?(w(),N("div",ps,[(w(!0),N(K,null,be(x.value,(u,V)=>(w(),L(O,{key:V},{default:t(()=>[e(R,null,{default:t(()=>[o("div",_s,[o("div",gs,b(d(u.created_at)),1),o("div",fs,b(f(u.created_at)),1),o("div",vs,b(u.branch.name)+" - "+b(_(u.employee)),1),o("div",null,[e(ue,{color:"yellow",outlined:""},{default:t(()=>[S(" Pending ")]),_:1})]),o("div",null,[e(cs,{report:u},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128))])):(w(),N("div",bs,[e(ie,{name:"warning",color:"warning",size:"4em"}),ys]))])]),_:1})]))}};var ws=X(hs,[["__scopeId","data-v-355e3e60"]]);const ks={class:"row justify-between"},xs=o("div",{class:"text-h6"},"Other Added Stocks Report",-1),$s={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(r){Te(),P(!1);const y=P(!1),k=()=>{y.value=!0};Se();const x=r,g=z(()=>(console.log("Filtered rows:",x.report||[]),x.report.other_added_stock||[])),m=d=>{const f=u=>u?u.charAt(0).toUpperCase()+u.slice(1).toLowerCase():"",_=d.firstname?f(d.firstname):"No Firstname",i=d.middlename?f(d.middlename).charAt(0)+".":"",h=d.lastname?f(d.lastname):"No Lastname";return`${_} ${i} ${h}`},$=[{name:"product_name",label:"Product Name",field:d=>(console.log("Row data:",d),d.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:d=>(console.log("Row data:",d),d.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:d=>d.added_stocks?`${d.added_stocks} pcs`:"N/A"}];return(d,f)=>(w(),N(K,null,[o("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:k})]),e(W,{modelValue:y.value,"onUpdate:modelValue":f[2]||(f[2]=_=>y.value=_)},{default:t(()=>[e(O,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[o("div",ks,[xs,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:f[0]||(f[0]=_=>y.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[o("div",null,"Cashier: "+b(m(r.report.employee)),1),o("div",null," Branch: "+b(r.report.branch.name),1),o("div",null,[S(" Status: "),e(ue,{color:"green",outlined:""},{default:t(()=>[S(b(r.report.status),1)]),_:1})])]),_:1}),e(R,null,{default:t(()=>[e(fe,{rows:g.value,columns:$,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:d.pagination,"onUpdate:pagination":f[1]||(f[1]=_=>d.pagination=_),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Vs=r=>(ae("data-v-5b0a7351"),r=r(),oe(),r),Cs={class:"q-gutter-md q-ma-md"},Rs={class:"row justify-between"},Ss={class:"text-subtitle1"},Ps={class:"text-subtitle1"},Ns={class:"text-subtitle1"},Us={key:1,class:"data-error"},Ds=Vs(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),qs={__name:"TransactionConfirmedCard",setup(r){const y=xe(),k=Je(),x=z(()=>k.confirmedOtherReports),g=y.params.branch_id,m=P("confirmed"),$=async()=>{try{const i=await k.fetchConfirmedOtherStocks(g,m.value);console.log(x.value)}catch(i){console.error("Error fetching confirmed stocks:",i)}};$e(async()=>{g&&await $()});const d=i=>ge.formatDate(i,"MMMM D, YYYY"),f=i=>ge.formatDate(i,"hh:mm A"),_=i=>{const h=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",u=i.firstname?h(i.firstname):"No Firstname",V=i.middlename?h(i.middlename).charAt(0)+".":"",p=i.lastname?h(i.lastname):"No Lastname";return`${u} ${V} ${p}`};return(i,h)=>(w(),N("div",null,[e(De,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[o("div",Cs,[x.value.length?(w(!0),N(K,{key:0},be(x.value,(u,V)=>(w(),L(O,{key:V},{default:t(()=>[e(R,null,{default:t(()=>[o("div",Rs,[o("div",Ss,b(d(u.created_at)),1),o("div",Ps,b(f(u.created_at)),1),o("div",Ns,b(u.branch.name)+" - "+b(_(u.employee)),1),o("div",null,[e(ue,{color:"green",outlined:""},{default:t(()=>[S(b(u.status),1)]),_:2},1024)]),o("div",null,[e($s,{report:u},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(w(),N("div",Us,[e(ie,{name:"warning",color:"warning",size:"4em"}),Ds]))])]),_:1})]))}};var Ts=X(qs,[["__scopeId","data-v-5b0a7351"]]);const As={class:"row justify-between"},Bs=o("div",{class:"text-h6"},"Others Added Stocks Report",-1),Is={class:"q-mt-md"},Fs={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(r){Te(),P(!1);const y=P(!1),k=()=>{y.value=!0},x=r,g=z(()=>(console.log("Filtered rows:",x.report||[]),x.report.other_added_stock||[])),m=d=>{const f=u=>u?u.charAt(0).toUpperCase()+u.slice(1).toLowerCase():"",_=d.firstname?f(d.firstname):"No Firstname",i=d.middlename?f(d.middlename).charAt(0)+".":"",h=d.lastname?f(d.lastname):"No Lastname";return`${_} ${i} ${h}`},$=[{name:"product_name",label:"Product Name",field:d=>(console.log("Row data:",d),d.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:d=>(console.log("Row data:",d),d.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:d=>d.added_stocks?`${d.added_stocks} pcs`:"N/A"}];return(d,f)=>(w(),N(K,null,[o("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:k})]),e(W,{modelValue:y.value,"onUpdate:modelValue":f[2]||(f[2]=_=>y.value=_)},{default:t(()=>[e(O,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[o("div",As,[Bs,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:f[0]||(f[0]=_=>y.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[o("div",null,"Cashier: "+b(m(r.report.employee)),1),o("div",null," Branch: "+b(r.report.branch.name),1),o("div",null,[S(" Status: "),e(ue,{color:"red",outlined:""},{default:t(()=>[S(b(r.report.status),1)]),_:1})]),o("div",Is,"Remark: "+b(r.report.remark),1)]),_:1}),e(R,null,{default:t(()=>[e(fe,{rows:g.value,columns:$,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:d.pagination,"onUpdate:pagination":f[1]||(f[1]=_=>d.pagination=_),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Ls=r=>(ae("data-v-67ff56ab"),r=r(),oe(),r),Ms={class:"q-gutter-md q-ma-md"},zs={class:"row justify-between"},Os={class:"text-subtitle1"},Hs={class:"text-subtitle1"},js={class:"text-subtitle1"},Ks={key:1,class:"data-error"},Qs=Ls(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Es={__name:"TransactionDeclinedCard",setup(r){const y=xe(),k=Je(),x=z(()=>k.declinedOtherReports),g=y.params.branch_id,m=P("declined"),$=async()=>{try{const i=await k.fetchDeclinedOtherStocks(g,m.value);console.log("selectedOtherProductDeclined",x.value)}catch(i){console.error("Error fetching decline stocks:",i)}};$e(async()=>{g&&await $()});const d=i=>ge.formatDate(i,"MMMM D, YYYY"),f=i=>ge.formatDate(i,"hh:mm A"),_=i=>{const h=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",u=i.firstname?h(i.firstname):"No Firstname",V=i.middlename?h(i.middlename).charAt(0)+".":"",p=i.lastname?h(i.lastname):"No Lastname";return`${u} ${V} ${p}`};return(i,h)=>(w(),N("div",null,[e(De,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[o("div",Ms,[x.value.length?(w(!0),N(K,{key:0},be(x.value,(u,V)=>(w(),L(O,{key:V},{default:t(()=>[e(R,null,{default:t(()=>[o("div",zs,[o("div",Os,b(d(u.created_at)),1),o("div",Hs,b(f(u.created_at)),1),o("div",js,b(u.branch.name)+" - "+b(_(u.employee)),1),o("div",null,[e(ue,{color:"red",outlined:""},{default:t(()=>[S(b(u.status),1)]),_:2},1024)]),o("div",null,[e(Fs,{report:u},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(w(),N("div",Ks,[e(ie,{name:"warning",color:"warning",size:"4em"}),Qs]))])]),_:1})]))}};var Ys=X(Es,[["__scopeId","data-v-67ff56ab"]]);const Gs={class:"q-gutter-y-sm"},Js={__name:"OtherTransactionPage",setup(r){const y=P("pendingReports"),k=z(()=>{switch(y.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return(x,g)=>(w(),N(K,null,[o("div",Gs,[e(Fe,{modelValue:y.value,"onUpdate:modelValue":g[0]||(g[0]=m=>y.value=m),"indicator-color":k.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(pe,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(pe,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(pe,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Le,{modelValue:y.value,"onUpdate:modelValue":g[1]||(g[1]=m=>y.value=m),animated:""},{default:t(()=>[e(_e,{name:"pendingReports"},{default:t(()=>[e(ws)]),_:1}),e(_e,{name:"confirmReports"},{default:t(()=>[e(Ts)]),_:1}),e(_e,{name:"declineReports"},{default:t(()=>[e(Ys)]),_:1})]),_:1},8,["modelValue"])],64))}};var Ws=X(Js,[["__scopeId","data-v-b76c19b4"]]);const ct=r=>(ae("data-v-0a732ed6"),r=r(),oe(),r),Xs={class:"q-gutter-y-sm"},Zs=ct(()=>o("h1",null,"Bread",-1)),er=ct(()=>o("h1",null,"Cake",-1)),tr={__name:"TransactionPage",setup(r){const y=P("bread");return(k,x)=>(w(),N(K,null,[o("div",Xs,[e(Fe,{modelValue:y.value,"onUpdate:modelValue":x[0]||(x[0]=g=>y.value=g),"active-color":"light-green-13","indicator-color":"light-green-13","narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:"gradient-btn"},{default:t(()=>[e(pe,{class:"text-white",name:"bread",label:"\u{1F35E}Bread"}),e(pe,{class:"text-white",name:"selecta",label:"\u{1F366}Selecta"}),e(pe,{class:"text-white",name:"softdrinks",label:"\u{1F964}Softdrinks"}),e(pe,{class:"text-white",name:"cake",label:"\u{1F370}Cake"}),e(pe,{class:"text-white",name:"other",label:"\u2B50Others"})]),_:1},8,["modelValue"])]),e(Le,{modelValue:y.value,"onUpdate:modelValue":x[1]||(x[1]=g=>y.value=g),animated:""},{default:t(()=>[e(_e,{name:"bread"},{default:t(()=>[e(O,null,{default:t(()=>[Zs]),_:1})]),_:1}),e(_e,{name:"selecta"},{default:t(()=>[e(fl)]),_:1}),e(_e,{name:"softdrinks"},{default:t(()=>[e(ss)]),_:1}),e(_e,{name:"cake"},{default:t(()=>[e(O,null,{default:t(()=>[er]),_:1})]),_:1}),e(_e,{name:"other"},{default:t(()=>[e(Ws)]),_:1})]),_:1},8,["modelValue"])],64))}};var ar=X(tr,[["__scopeId","data-v-0a732ed6"]]);const Be=r=>(ae("data-v-f0d86c36"),r=r(),oe(),r),or=Be(()=>o("div",{class:"text-h6"},"Create Branch Recipe",-1)),nr={class:"q-mb-lg"},lr={key:0,class:"custom-list z-top"},sr={class:"q-mb-sm"},rr=Be(()=>o("div",null,"Recipe Name",-1)),ir={class:"q-mb-lg"},dr=Be(()=>o("div",null,"Category",-1)),cr=Be(()=>o("div",null,"Breads",-1)),ur={class:"q-mt-md q-gutter-y-sm"},mr=Be(()=>o("div",{class:"text-weight-thin"},"Ingredients List",-1)),pr={class:"q-mt-xl q-gutter-y-sm"},_r={class:"row justify-between"},gr=Be(()=>o("div",{align:"center"},"Ingredients",-1)),fr=Be(()=>o("div",{align:"center"},"Quantity",-1)),vr=["onKeyup"],br={align:"right"},yr={__name:"RecipeCreate",setup(r){const y=xe(),k=y.params.branch_id,x=yt(),g=z(()=>x.recipes),m=Qe(),$=ot(),d=Qe(),f=z(()=>m.branchRecipes),_=P(!1),i=()=>{_.value=!0},h=()=>{clearForm(),_.value=!1},u=I=>I?I.split(" ").map(M=>M.charAt(0).toUpperCase()+M.slice(1).toLowerCase()).join(" "):"",V=P(""),p=async()=>{x.searchRecipe(V.value)},c=z(()=>l.target!==0),a=I=>{l.recipe_id=I.id,l.recipe_name=I.name,l.category=I.category,V.value=""},l=Oe({recipe_id:"",recipe_name:"",category:"",target:"",branches_id:y.params.branch_id}),n=P(!1),s=P(null),C=P([]),U=P(C.value),T=P([]),v=P([]),q=Oe({name:"",quantity:""}),A=P(v.value);(async()=>{await $.fetchProductsByCategory("Bread"),n.value=!1,C.value=$.breads.map(I=>({label:I.name,value:I.id}))})(),(async()=>{const I="Ingredients";await d.fetchBranchRawMaterials(I,k),n.value=!1,v.value=d.ingredients.map(M=>({label:M.raw_material_name,value:M.raw_material_id,unit:M.ingredient_unit}))})();const Ce=()=>{q.name="",q.quantity=""},qe=(I,M)=>{I.length>2&&(C.value.includes(I)||M(I,"add-unique"))},B=(I,M)=>{M(()=>{if(I==="")U.value=C.value;else{const ee=I.toLowerCase();U.value=C.value.filter(E=>E.label.toLowerCase().indexOf(ee)>-1)}})},H=(I,M)=>{M(()=>{if(I==="")A.value=v.value;else{const ee=I.toLowerCase();A.value=v.value.filter(E=>E.label.toLowerCase().indexOf(ee)>-1)}})},G=()=>{const I=T.value;function M(Re,Ie){return Re.find(He=>He.ingredients_id==Ie)}const ee=q.name.value;M(I,ee)?ke.create({type:"negative",icon:"warning",message:"Ingredient already exist",timeout:2e3}):(T.value=[...I,{ingredients_id:q.name.value,label:q.name.label,quantity:q.quantity,unit:q.name.unit}],Ce())},me=I=>{T.value.splice(I,1)};Ae(()=>q.name,I=>{I&&I.unit?q.unit=I.unit:q.unit=""});const we=()=>{l.recipe_id="",l.target="",s.value=null,T.value=[],q.name="",q.quantity=""},ce=async()=>{const I={recipe_id:l.recipe_id,target:l.target,status:"active",branch_id:l.branches_id,breads:s.value.map(M=>({bread_id:M.value})),ingredients:T.value.map(M=>({ingredient_id:M.ingredients_id,quantity:M.quantity}))};console.log("branchRecipe",I),await m.saveBranchRecipe(I),f.value=await m.fetchBranchRecipes(k),we(),_.value=!1};return(I,M)=>(w(),N(K,null,[e(D,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Recipe",onClick:i}),e(W,{modelValue:_.value,"onUpdate:modelValue":M[7]||(M[7]=ee=>_.value=ee)},{default:t(()=>[e(O,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(R,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[or,e(Ne),se(e(D,{icon:"close",flat:"",dense:"",round:""},null,512),[[re]])]),_:1}),e(R,null,{default:t(()=>{var ee;return[o("div",nr,[e(F,{modelValue:V.value,"onUpdate:modelValue":[M[0]||(M[0]=E=>V.value=E),p],debounce:"1000",outlined:"",rounded:"",placeholder:"Search recipe",dense:""},{append:t(()=>[o("div",null,[e(ie,{name:"search"})])]),default:t(()=>[V.value?(w(),N("div",lr,[e(O,null,{default:t(()=>[e(Ue,{separator:""},{default:t(()=>{var E;return[(E=g.value)!=null&&E.length?(w(!0),N(K,{key:1},be(g.value,Re=>(w(),L(he,{onClick:Ie=>a(Re),key:Re.id,clickable:""},{default:t(()=>[e(J,null,{default:t(()=>[e(ne,null,{default:t(()=>[S(b(u(Re.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(w(),L(he,{key:0},{default:t(()=>[S(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ee("",!0)]),_:1},8,["modelValue"])]),o("div",sr,[rr,e(F,{modelValue:l.recipe_name,"onUpdate:modelValue":M[1]||(M[1]=E=>l.recipe_name=E),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),o("div",ir,[dr,e(F,{modelValue:l.category,"onUpdate:modelValue":M[2]||(M[2]=E=>l.category=E),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),o("div",null,[e(F,{modelValue:l.target,"onUpdate:modelValue":M[3]||(M[3]=E=>l.target=E),outlined:"",dense:"",suffix:" / 1kg",type:"number",label:"Target Pcs",mask:"##.##"},null,8,["modelValue"])]),o("div",null,[cr,e(We,{modelValue:s.value,"onUpdate:modelValue":M[4]||(M[4]=E=>s.value=E),"use-input":"","use-chips":"","chips-color":"primary",multiple:"","input-debounce":"0",options:U.value,behavior:"menu","hide-dropdown-icon":"",outlined:"",dense:"",label:"Bread/s",onNewValue:qe,onFilter:B,rules:[E=>E&&E.length>0||"Bread is required"]},{"no-option":t(()=>[e(he,null,{default:t(()=>[e(J,{class:"text-grey"},{default:t(()=>[S(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),o("div",ur,[mr,o("div",null,[e(Ue,{dense:"",separator:"",class:"box"},{default:t(()=>[(w(!0),N(K,null,be(T.value,(E,Re)=>(w(),L(he,{key:Re},{default:t(()=>[e(J,null,{default:t(()=>[e(ne,null,{default:t(()=>[S(b(E.label),1)]),_:2},1024)]),_:2},1024),e(J,null,{default:t(()=>[S(b(E.quantity)+" "+b(E.unit),1)]),_:2},1024),e(J,{side:""},{default:t(()=>[e(D,{onClick:Ie=>me(Re),color:"grey-10",icon:"backspace",dense:"",flat:"",round:""},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),o("div",pr,[o("div",_r,[o("div",null,[gr,e(We,{modelValue:q.name,"onUpdate:modelValue":M[5]||(M[5]=E=>q.name=E),debounce:"3000",outlined:"","chips-color":"primary",options:A.value,dense:"",label:"Ingredients",behavior:"menu","use-input":"","hide-dropdown-icon":"",onFilter:H,style:{width:"215px","max-width":"450px","min-width":"80px"}},{"no-option":t(()=>[e(he,null,{default:t(()=>[e(J,{class:"text-grey"},{default:t(()=>[S(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),o("div",null,[fr,e(F,{modelValue:q.quantity,"onUpdate:modelValue":M[6]||(M[6]=E=>q.quantity=E),modelModifiers:{number:!0},outlined:"",dense:"",type:"number",label:"Quantity",suffix:((ee=q==null?void 0:q.name)==null?void 0:ee.unit)||"",style:{width:"115px"},hint:"Enter the quantity as a decimal",mask:"##.##"},null,8,["modelValue","suffix"])])]),o("form",{onKeyup:te(_t(G,["prevent"]),["enter"])},[o("div",br,[e(D,{padding:"xs md",type:"button",size:"sm",outline:"",dense:"",label:"add",icon:"add",color:"purple",onClick:G})])],40,vr)])]}),_:1}),e(Pe,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(D,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:h}),e(D,{class:"glossy",color:"teal",label:"Create",onClick:ce,disable:!c.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var hr=X(yr,[["__scopeId","data-v-f0d86c36"]]);const ut=r=>(ae("data-v-33664d62"),r=r(),oe(),r),wr=ut(()=>o("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),kr=ut(()=>o("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),xr={__name:"RecipeDelete",props:["delete"],setup(r){const y=Qe(),k=r,x=P(!1),g=()=>{x.value=!0},m=async()=>{await y.deleteRecipe(k.delete.row.id),x.value=!1};return($,d)=>(w(),N(K,null,[e(D,{onClick:g,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"","aria-label":"Delete"},{default:t(()=>[e(de,{class:"bg-negative",delay:200},{default:t(()=>[S("Delete")]),_:1})]),_:1}),e(W,{modelValue:x.value,"onUpdate:modelValue":d[0]||(d[0]=f=>x.value=f),persistent:""},{default:t(()=>[e(O,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(R,{class:"q-pt-none q-pb-sm"},{default:t(()=>[wr,kr]),_:1}),e(Ye,{class:"q-mb-md"}),e(R,null,{default:t(()=>[e(Pe,{align:"right",class:"q-pt-none"},{default:t(()=>[se(e(D,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[re]]),e(D,{dense:"",label:"Delete",color:"negative",onClick:m,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var $r=X(xr,[["__scopeId","data-v-33664d62"]]);const Vr=r=>(ae("data-v-7a561dd0"),r=r(),oe(),r),Cr={class:"text-h6 text-white"},Rr=Vr(()=>o("div",{class:"text-h6",align:"center"},"Bread List",-1)),Sr={class:"row",align:"center"},Pr={__name:"RecipeBreadGroups",props:["breadGroups"],setup(r){const{dialogRef:y,onDialogHide:k,onDialogOK:x,onDialogCancel:g}=Ve();console.log("breadGroups",r.breadGroups);const $=d=>d?d.split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1).toLowerCase()).join(" "):"";return(d,f)=>(w(),L(W,{ref_key:"dialogRef",ref:y,onHide:Y(k),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(O,{style:{width:"500px","max-width":"120vw"}},{default:t(()=>[e(R,{class:"row bg-backgroud text-h6"},{default:t(()=>[o("div",Cr,b($(r.breadGroups.name)),1),e(Ne),o("div",null,[se(e(D,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[re]])])]),_:1}),e(R,null,{default:t(()=>[Rr]),_:1}),e(R,null,{default:t(()=>[(w(!0),N(K,null,be(r.breadGroups.bread_groups,(_,i)=>(w(),N("div",{key:i},[o("div",Sr,b(_),1)]))),128))]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Nr=X(Pr,[["__scopeId","data-v-7a561dd0"]]);const Ur=r=>(ae("data-v-435e3b8f"),r=r(),oe(),r),Dr={class:"text-h6 text-white"},qr=Ur(()=>o("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Tr={__name:"RecipeIngredientGroups",props:["ingredientGroups"],setup(r){const{dialogRef:y,onDialogHide:k,onDialogOK:x,onDialogCancel:g}=Ve();console.log("ingredientGroups",r.ingredientGroups);const $=f=>f?f.split(" ").map(_=>_.charAt(0).toUpperCase()+_.slice(1).toLowerCase()).join(" "):"",d=f=>{const _=Number(f.quantity)||0,i=f.unit||"";return _>1e3?`${parseFloat((_/1e3).toFixed(3))} kg`:_>1?`${parseFloat(_.toFixed(3))} ${i}`:`${parseFloat(_.toFixed(3))} ${i}`};return(f,_)=>(w(),L(W,{ref_key:"dialogRef",ref:y,onHide:Y(k),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(O,{style:{width:"500px","max-width":"120vw"}},{default:t(()=>[e(R,{class:"row bg-backgroud text-h6"},{default:t(()=>[o("div",Dr,b($(r.ingredientGroups.name)),1),e(Ne),o("div",null,[se(e(D,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[re]])])]),_:1}),e(R,null,{default:t(()=>[qr]),_:1}),e(R,null,{default:t(()=>[e(Ue,{dense:"",separator:"",class:"box"},{default:t(()=>[e(he,null,{default:t(()=>[e(J,null,{default:t(()=>[e(ne,{class:"text-overline"},{default:t(()=>[S("Raw Materials Name")]),_:1})]),_:1}),e(J,null,{default:t(()=>[e(ne,{class:"text-overline"},{default:t(()=>[S("Code")]),_:1})]),_:1}),e(J,{side:""},{default:t(()=>[e(ne,{class:"text-overline"},{default:t(()=>[S("Quantity")]),_:1})]),_:1})]),_:1}),(w(!0),N(K,null,be(r.ingredientGroups.ingredient_groups,(i,h)=>(w(),L(he,{key:h},{default:t(()=>[e(J,null,{default:t(()=>[e(ne,{class:"text-caption"},{default:t(()=>[S(b(i.ingredient_name),1)]),_:2},1024)]),_:2},1024),e(J,null,{default:t(()=>[e(ne,{class:"text-caption"},{default:t(()=>[S(b(i.code),1)]),_:2},1024)]),_:2},1024),e(J,{side:""},{default:t(()=>[e(ne,{class:"text-caption"},{default:t(()=>[S(b(d(i)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Ar=X(Tr,[["__scopeId","data-v-435e3b8f"]]);const Br=r=>(ae("data-v-89832402"),r=r(),oe(),r),Ir={class:"row justify-between"},Fr={class:"q-my-sm"},Lr={key:0,class:"spinner-wrapper"},Mr={key:1},zr={key:0,class:"data-error"},Or=Br(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Hr={class:"row justify-center q-gutter-x-md"},jr={__name:"RecipeTable",setup(r){const k=xe().params.branch_id,x=Qe(),g=P(""),m=P(!0),$=P([]),d=P(!1),f=P({rowsPerPage:0}),_=["inactive","active"],i=z(()=>x.branchRecipes);console.log("branch recipe",i.value);const h=z(()=>g.value?i.value.filter(v=>v.name.toLowerCase().includes(g.value.toLowerCase())):i.value);$e(async()=>{k&&await u(k)});const u=async v=>{try{m.value=!0;const q=await x.fetchBranchRecipes(v);i.value=q,console.log("branchRecipeRows",i.value),i.value.length||(d.value=!0),console.log("Branch recipe",i.value)}catch(q){console.log("Error fetching recipe",q)}finally{m.value=!1}},V=v=>{const q=Number(v)||0;return parseFloat(q.toFixed(3)).toString()},p=v=>!v&&v!==0?"Set Target":typeof v=="number"||!isNaN(v)?(v=parseFloat(v),v%1===0?v:parseFloat(v.toFixed(1))):v;async function c(v,q){try{const A=await Z.put("/api/update-target/"+v.id,{target:parseFloat(q)});if(console.log("response",A),A.status==200){const Q=$.value.findIndex(ve=>ve.id==v.id);$.value[Q]=q}ke.create({type:"positive",message:"Recipe target edited successfully"})}catch(A){console.error("Error updating recipe target:",A),ke.create({type:"negative",message:"Failed to edit recipe target"})}}async function a(v,q){try{if((await Z.put("/api/branch-update-status/"+v.id,{status:q})).status==200){const Q=$.value.findIndex(ve=>ve.id==v.id);$.value[Q]=q}ke.create({type:"positive",message:"Recipe status change successfully"})}catch(A){console.error("Error updating recipe status:",A),ke.create({type:"negative",message:"Failed to change recipe status"})}}const l=v=>v?v.split(" ").map(q=>q.charAt(0).toUpperCase()+q.slice(1).toLowerCase()).join(" "):"",n=[{name:"name",label:"Recipe name",align:"center",field:v=>v.name},{name:"category",label:"Category",align:"center",field:v=>v.recipe},{name:"target",label:"Target",align:"center",field:v=>p(v.target)},{name:"status",label:"Status",align:"center",field:"status"},{name:"bread_groups",label:"List of Bread",align:"center",field:"bread_groups"},{name:"ingredient_groups",label:"List of Ingredients",align:"center",field:"ingredient_groups"},{name:"action",label:"Action",align:"center",sortable:!0}],s=Se(),C=v=>{console.log("Bread Groups:",v),s.dialog({component:Nr,componentProps:{breadGroups:v}})},U=v=>{console.log("Ingredients Groups:",v),s.dialog({component:Ar,componentProps:{ingredientGroups:v}})},T=v=>{switch(v){case"inactive":return"grey";case"active":return"green";default:return"grey"}};return(v,q)=>(w(),N(K,null,[o("div",Ir,[o("div",null,[e(F,{class:"q-pb-lg q-pl-md",modelValue:g.value,"onUpdate:modelValue":q[0]||(q[0]=A=>g.value=A),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"1500px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(ie,{name:"search"})]),_:1},8,["modelValue"])]),o("div",Fr,[e(hr)])]),m.value?(w(),N("div",Lr,[e(Ge,{size:"50px",color:"primary"})])):(w(),N("div",Mr,[h.value.length===0?(w(),N("div",zr,[e(ie,{name:"warning",color:"warning",size:"4em"}),Or])):(w(),L(fe,{key:1,class:"table-container sticky-header",filter:g.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:n,rows:h.value,"row-key":"name","virtual-scroll":"",pagination:f.value,"onUpdate:pagination":q[1]||(q[1]=A=>f.value=A),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"}},{"body-cell-name":t(A=>[e(j,{props:A},{default:t(()=>[o("span",null,b(l(A.row.name)),1)]),_:2},1032,["props"])]),"body-cell-category":t(A=>[e(j,{props:A},{default:t(()=>[o("span",null,b(l(A.row.category)),1)]),_:2},1032,["props"])]),"body-cell-target":t(A=>[e(j,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[o("span",null,[S(b(V(A.row.target))+" ",1),e(de,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[S("Edit Target")]),_:1})]),e(le,{"onUpdate:modelValue":[Q=>c(A.row,Q),Q=>A.row.target=Q],modelValue:A.row.target,"auto-save":""},{default:t(Q=>[e(F,{modelValue:Q.value,"onUpdate:modelValue":ve=>Q.value=ve,dense:"",suffix:"pcs",autofocus:"",counter:"",onKeyup:te(Q.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-status":t(A=>[e(j,{props:A},{default:t(()=>[e(ue,{outline:"",color:T(A.row.status)},{default:t(()=>[S(b(l(A.row.status))+" ",1),e(de,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[S("Change Status")]),_:1})]),_:2},1032,["color"]),e(le,{"onUpdate:modelValue":[Q=>a(A.row,Q),Q=>A.row.status=Q],modelValue:A.row.status,"auto-save":""},{default:t(Q=>[o("span",null,b(A.row.name),1),e(We,{modelValue:Q.value,"onUpdate:modelValue":ve=>Q.value=ve,dense:"",label:"status",autofocus:"",options:_,counter:"",mask:"###",onKeyup:te(Q.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-bread_groups":t(A=>[e(j,{props:A},{default:t(()=>[e(D,{"no-caps":"",onClick:Q=>C(A.row),label:`${A.row.bread_groups.length} breads`,rounded:"",color:"brown"},null,8,["onClick","label"])]),_:2},1032,["props"])]),"body-cell-ingredient_groups":t(A=>[e(j,{props:A},{default:t(()=>[e(D,{"no-caps":"",onClick:Q=>U(A.row),label:`${A.row.ingredient_groups.length} ingredients`,rounded:"",color:"purple"},null,8,["onClick","label"])]),_:2},1032,["props"])]),"body-cell-action":t(A=>[e(j,{props:A},{default:t(()=>[o("div",Hr,[e($r,{delete:A},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Kr=X(jr,[["__scopeId","data-v-89832402"]]);const Qr={__name:"RecipePage",setup(r){return(y,k)=>(w(),N("div",null,[e(Kr)]))}};const Er={class:"elegant-container q-gutter-md"},Yr={class:"text-h6 row justify-between"},Gr={class:"q-gutter-sm"},Jr={class:"tab-container"},Wr={__name:"BranchIdPage",setup(r){const y=xe(),k=P(""),x=gt(),g=async _=>(await Z.get(`/api/branches/${_}`)).data,m=async()=>{const _=y.params.branch_id,i=await g(_);i&&i.name?k.value=i.name:console.error("Branch data is missing 'name' property or invalid:",i)};$e(()=>{m()});const $=_=>_?_.split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join(" "):"",d=P("products"),f=()=>{je.show(),x.push("/admin/branches").finally(()=>{je.hide()})};return(_,i)=>(w(),L(ft,{padding:""},{default:t(()=>[o("div",Er,[o("div",Yr,[o("div",null,[e(D,{outline:"",flat:"",icon:"arrow_back",onClick:f}),e(Ne)]),o("div",null,[e(ie,{name:"fa-solid fa-store",color:"red-6"}),S(" "+b($(k.value)),1)])]),o("div",Gr,[o("div",Jr,[e(Fe,{modelValue:d.value,"onUpdate:modelValue":i[0]||(i[0]=h=>d.value=h),dense:"",class:"bg-grey-2 text-grey-7 tabs-as-cards","active-color":"red-6","indicator-color":"transparent",align:"justify"},{default:t(()=>[e(pe,{name:"products",label:"Products"}),e(pe,{name:"rawMaterials",label:"Raw Materials"}),e(pe,{name:"recipe",label:"Recipe"}),e(pe,{name:"production",label:"Production"}),e(pe,{name:"transaction",label:"Transactions"})]),_:1},8,["modelValue"])]),e(O,{class:"q-mt-sm"},{default:t(()=>[e(Le,{modelValue:d.value,"onUpdate:modelValue":i[1]||(i[1]=h=>d.value=h),animated:""},{default:t(()=>[e(_e,{name:"products"},{default:t(()=>[e(Kt)]),_:1}),e(_e,{name:"rawMaterials"},{default:t(()=>[e(fa)]),_:1}),e(_e,{name:"recipe"},{default:t(()=>[e(Qr)]),_:1}),e(_e,{name:"production"},{default:t(()=>[e(Cn)]),_:1}),e(_e,{name:"transaction"},{default:t(()=>[e(ar)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1}))}};var Ti=X(Wr,[["__scopeId","data-v-eb7c826e"]]);export{Ti as default};
