import{o as n,c as q,M as S,n as h,a2 as u,a as o,w as c,Q as F,I as D,J as e,_ as l,$ as k,a0 as j,a3 as R,a4 as Q,bc as x,a1 as A,O as P,R as O,g as M,u as K,z as E,L as z,bb as T,K as J}from"./index.6a2e76bf.js";import{_ as B}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as G}from"./QBadge.12ce11b6.js";import{Q as N,a as H}from"./QTable.769fbca3.js";import{Q as W}from"./QBanner.0df8c697.js";import{u as X}from"./baker-report.baef49e1.js";import{a as Z}from"./QSelect.6c695fe4.js";import{q as V}from"./date.01dda4ca.js";import"./QVirtualScroll.e04732f7.js";import"./QList.ed3bcae4.js";import"./use-virtual-scroll.d9a7d35f.js";import"./rtl.276c3f1b.js";import"./axios.eb07d1a5.js";import"./QItemLabel.fa8563a5.js";import"./QItem.a0938a99.js";import"./QMenu.94dae428.js";import"./selection.6e8843f8.js";const ee={};function te(t,f){return n(),q(S,{class:"q-pa-sm",color:"red-6",dense:"",elevated:"",icon:"add_circle",label:"Create Report",to:"/branch/baker/create_report"})}var ae=B(ee,[["render",te]]);const m=t=>(P("data-v-616fe252"),t=t(),O(),t),se={class:"text-h6 text-weight-regular"},re={class:"row justify-between"},oe={class:"section-content"},ie={class:"row q-gutter-x-sm"},le=m(()=>e("div",{class:"text-subtitle2"},"Date:",-1)),ne={class:"text-body1 text-weight-light"},ce={class:"row q-gutter-x-sm"},de=m(()=>e("div",{class:"text-subtitle2"},"Branch:",-1)),ue={class:"text-body1 text-weight-light"},_e={class:"row q-gutter-x-sm"},me=m(()=>e("div",{class:"text-subtitle2"},"Baker:",-1)),pe={class:"text-body1 text-weight-light"},ve={class:"row q-mt-sm item-start q-gutter-x-xl"},ge={class:"row q-gutter-x-sm text-overline"},he=m(()=>e("div",null,"Kilo:",-1)),fe={class:"row q-gutter-x-sm text-overline"},be=m(()=>e("div",null,"Over:",-1)),we={class:"text-weight-light"},ye={class:"row q-gutter-x-sm text-overline"},xe=m(()=>e("div",null,"Short:",-1)),ke={class:"text-weight-light"},Ce={class:"row q-gutter-x-sm text-overline"},Re=m(()=>e("div",null,"Actual Target:",-1)),qe={class:"text-weight-light"},De={class:"row justify-between"},$e={key:0,class:"report-section"},Qe=m(()=>e("div",{class:"section-title",align:"center"},"Ingredients",-1)),Me={class:"row q-gutter-md"},Se={class:""},Ve={key:1,class:"report-section"},Be=m(()=>e("div",{class:"section-title",align:"center"},"Breads",-1)),Le={class:"row q-gutter-md"},Ie={key:2,class:"report-section"},Ye=m(()=>e("div",{class:"section-title"},"Fillings",-1)),Te={__name:"ReportView",props:{report:{type:Object,required:!0}},setup(t){console.log("bakerView",t.report);const p=h(!1),C=a=>a.charAt(0).toUpperCase()+a.slice(1).toLowerCase(),L=a=>{const d=y=>y?y.charAt(0).toUpperCase()+y.slice(1).toLowerCase():"",s=a.firstname?d(a.firstname):"No Firstname",I=a.middlename?d(a.middlename).charAt(0)+".":"",$=a.lastname?d(a.lastname):"No Lastname";return`${s} ${I} ${$}`.trim()},b=a=>{switch(a){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},v=()=>{p.value=!0},g=a=>V.formatDate(a,"MMMM D, YYYY"),w=a=>{if(a>=1e3){const d=a/1e3;return`${d} ${d===1?"kg":"kgs"}`}return`${a} grams`};return(a,d)=>(n(),u(R,null,[o(S,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:v}),o(A,{modelValue:p.value,"onUpdate:modelValue":d[1]||(d[1]=s=>p.value=s),class:"report-dialog"},{default:c(()=>[o(F,{class:"report-card"},{default:c(()=>[o(D,{class:"report-header"},{default:c(()=>[e("div",se,l(t.report.recipe.name)+" - "+l(t.report.recipe_category),1),o(S,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=s=>p.value=!1)})]),_:1}),o(D,null,{default:c(()=>[e("div",re,[e("div",null,[e("div",oe,[e("div",ie,[le,e("div",ne,l(g(t.report.created_at)),1)]),e("div",ce,[de,e("div",ue,l(t.report.branch.name),1)]),e("div",_e,[me,e("div",pe,l(L(t.report.user.employee)),1)])])]),e("div",null,[o(Z,{square:"",color:b(t.report.status),"text-color":"white"},{default:c(()=>[k(l(C(t.report.status)),1)]),_:1},8,["color"])])]),e("div",ve,[e("div",ge,[he,e("div",null,l(t.report.kilo),1)]),e("div",fe,[be,e("div",we,l(t.report.over),1)]),e("div",ye,[xe,e("div",ke,l(t.report.short),1)]),e("div",Ce,[Re,e("div",qe,l(t.report.actual_target),1)])]),o(j,{class:"q-my-md"}),e("div",De,[t.report.ingredient_bakers_reports&&t.report.ingredient_bakers_reports.length?(n(),u("div",$e,[Qe,e("ul",null,[(n(!0),u(R,null,Q(t.report.ingredient_bakers_reports,s=>(n(),u("div",{key:s.id},[e("div",Me,[e("div",Se,l(s.ingredients.code),1),e("div",null,"- "+l(w(s.quantity)),1)])]))),128))])])):x("",!0),t.report.bread_bakers_reports&&t.report.bread_bakers_reports.length?(n(),u("div",Ve,[Be,e("ul",null,[(n(!0),u(R,null,Q(t.report.bread_bakers_reports,s=>(n(),u("div",{key:s.id},[e("div",Le,[e("div",null,l(s.bread.name),1),e("div",null,"- "+l(s.bread_production)+" pcs",1)])]))),128))])])):x("",!0),t.report.filling_bakers_reports&&t.report.filling_bakers_reports.length?(n(),u("div",Ie,[Ye,e("ul",null,[(n(!0),u(R,null,Q(t.report.filling_bakers_reports,s=>(n(),u("li",{key:s.id},[e("div",null,l(s.bread.name),1),k(" - "+l(s.filling_production)+" pcs ",1)]))),128))])])):x("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ne=B(Te,[["__scopeId","data-v-616fe252"]]);const Fe={class:"q-mt-sm q-gutter-md"},ze={class:"table-container"},Ue={key:0,class:"loading-overlay row justify-center items-center"},je={key:1,class:"q-pa-md q-gutter-md row justify-center"},Ae={__name:"ReportTable",setup(t){var Y;const f=h({rowsPerPage:0}),p=X(),C=M(()=>p.reportToView),b=((Y=M(()=>p.user).value)==null?void 0:Y.data.id)||"",v=h(""),g=h(!0),w=h(!1),a=h(!1);K(v,async r=>{w.value=!0,await new Promise(i=>setTimeout(i,1e3)),w.value=!1,a.value=!g.value&&s.value.length===0,console.log("Filtered Rows:",s.value)}),E(async()=>{console.log("props.branchId in onMounted:",b),b&&await d(b)});const d=async r=>{g.value=!0,await p.fetchBakerReport(r),g.value=!1},s=M(()=>{if(!v.value)return C.value;const r=v.value.toLowerCase();return C.value.filter(i=>i.name&&i.name.toLowerCase().includes(r)||i.created_at&&V.formatDate(i.created_at,"MMMM D, YYYY").toLowerCase().includes(r)||i.recipe&&i.recipe.name&&i.recipe.name.toLowerCase().includes(r)||i.recipe&&i.recipe.category&&i.recipe.category.toLowerCase().includes(r))}),$=[{name:"date",align:"left",label:"Date",field:"created_at",format:r=>V.formatDate(r,"MMMM D, YYYY"),sortable:!0},{name:"name",label:"Reports Name",align:"center",field:r=>({name:r.recipe.name,category:r.recipe.category}),format:r=>`${r.name} (${r.category})`,sortable:!0},{name:"status",align:"center",label:"Status",field:"status"},{name:"view",align:"right",label:"View",field:"view"}],y=r=>{switch(r){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},U=r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase();return(r,i)=>(n(),u("div",Fe,[e("div",null,[o(J,{rounded:"",outlined:"",dense:"",debounce:"300",modelValue:v.value,"onUpdate:modelValue":i[0]||(i[0]=_=>v.value=_),placeholder:"Search",style:{width:"500px","max-width":"1500px","min-width":"100px"}},{append:c(()=>[w.value?(n(),q(T,{key:1})):(n(),q(z,{key:0,name:"search"}))]),_:1},8,["modelValue"])]),e("div",ze,[o(H,{class:"sticky-header",filter:v.value,flat:"",columns:$,rows:s.value,"row-key":"name","virtual-scroll-sticky-size-start":48,"virtual-scroll":"",pagination:f.value,"onUpdate:pagination":i[1]||(i[1]=_=>f.value=_),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"900px","max-height":"1000px","min-height":"none"}},{"body-cell-status":c(_=>[o(N,{key:"name",props:_},{default:c(()=>[o(G,{outlined:"",color:y(_.row.status)},{default:c(()=>[k(l(U(_.row.status)),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-view":c(_=>[o(N,{props:_},{default:c(()=>[e("div",null,[o(Ne,{report:_.row},null,8,["report"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]),g.value?(n(),u("div",Ue,[o(T,{size:"50px"})])):x("",!0),a.value?(n(),u("div",je,[o(W,{class:"bg-grey-1",dense:""},{default:c(()=>[k(" No data available ")]),_:1})])):x("",!0)])]))}};var Pe=B(Ae,[["__scopeId","data-v-1faad11a"]]);const Oe={class:"text-h6 text-white"},Ke={class:"q-gutter-y-lg"},Ee={align:"right"},ut={__name:"ReportPage",setup(t){return(f,p)=>(n(),q(F,{flat:""},{default:c(()=>[o(D,{style:{"background-color":"#ef4444"}},{default:c(()=>[e("div",Oe,[o(z,{name:"fa-solid fa-layer-group"}),k(" Report ")])]),_:1}),o(D,null,{default:c(()=>[e("div",Ke,[e("div",Ee,[o(ae)]),e("div",null,[o(Pe)])])]),_:1})]),_:1}))}};export{ut as default};
