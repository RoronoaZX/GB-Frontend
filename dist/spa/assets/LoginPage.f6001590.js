import{n as o,g as q,H as S,o as Q,c as V,w as l,Q as P,a as s,I as _,J as r,K as f,L as k,M as L,P as h,N as x,O as M,R as B}from"./index.9c9d4c4e.js";import{Q as C}from"./QForm.9fdbaa6a.js";import{_ as N}from"./GB_LOGO.b766a815.js";import{u as A}from"./use-quasar.66fa6bb1.js";import{api as j}from"./axios.fd4410eb.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";const y=i=>(M("data-v-d9188a3e"),i=i(),B(),i),R=y(()=>r("div",{class:"text-h5 text-red-6 q-mb-sm"},[r("img",{src:N,class:"logo"})],-1)),U=y(()=>r("div",{class:"text-caption text-grey-8 q-mb-sm"}," Please log in to continuesss. ",-1)),$={class:"q-gutter-y-sm"},D={class:"q-my-md text-center"},F={__name:"LoginPage",setup(i){const d=o(!0),n=o("johndoe@example.com"),c=o("password"),w=o(!1),b=q(()=>n.value!==""&&c.value!=="");A();const u=S(),v=o(""),I=async()=>{var m,a;h.show();try{const e=await j.post("/api/login",{email:n.value,password:c.value});localStorage.setItem("activeMenuItem","dashboard"),localStorage.setItem("token",e.data.token),localStorage.setItem("role",e.data.role);const t=e.data.role,p=localStorage.getItem("activeMenuItem");if(t==="Admin"||t==="Super Admin"){let g;p?(g=`/admin/${p}`,v.value=p):(g="/admin/dashboard",localStorage.setItem("activeMenuItem","dashboard"),v.value="dashboard"),await u.push(g),x.create({type:"positive",message:e.data.message||"Login successful!",setTimeout:5e3})}else t==="Baker"?await u.push("/branch/baker"):t==="Cashier"&&await u.push("/branch/sales_lady/products")}catch(e){console.error("Error during login:",e);const t=((a=(m=e.response)==null?void 0:m.data)==null?void 0:a.message)||"Login failed. Incorrect email & password.";x.create({type:"negative",message:t})}finally{h.hide()}};return(m,a)=>(Q(),V(P,{class:"my-card q-pa-md q-ma-lg",style:{width:"430px","max-width":"90%",height:"500px","border-radius":"16px","box-shadow":"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex","flex-direction":"column","justify-content":"space-between"}},{default:l(()=>[s(_,{class:"q-pa-sm text-center"},{default:l(()=>[R,U]),_:1}),s(_,{class:"q-mt-sm flex-grow-1"},{default:l(()=>[s(C,{onSubmit:I},{default:l(()=>[r("div",$,[s(f,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),outlined:"",placeholder:"Email",dense:"",autofocus:"",required:"",class:"input-dynamic"},null,8,["modelValue"]),s(f,{modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=e=>c.value=e),outlined:"",placeholder:"Password",type:d.value?"password":"text",dense:"",required:"",class:"input-dynamic"},{append:l(()=>[s(k,{name:d.value?"visibility_off":"visibility",onClick:a[1]||(a[1]=e=>d.value=!d.value),class:"cursor-pointer",style:{color:"#9e9e9e"}},null,8,["name"])]),_:1},8,["modelValue","type"])]),r("div",D,[s(L,{type:"submit",color:"red-6",label:"Login",class:"q-mt-sm",dense:"",loading:w.value,disable:!b.value,style:{width:"100%","max-width":"350px","border-radius":"8px"}},null,8,["loading","disable"])])]),_:1})]),_:1})]),_:1}))}};var G=E(F,[["__scopeId","data-v-d9188a3e"]]);export{G as default};
