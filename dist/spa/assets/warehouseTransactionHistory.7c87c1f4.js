import{c as A,r as R,o as _,a3 as D,f as e,w as t,Q as L,I as V,J as a,$ as o,M as j,a0 as m,be as E,a2 as Z,K as he,aJ as xe,ae as fe,a4 as F,N as ne,O as W,R as J,z as ce,L as ee,e as T,a5 as H,a1 as oe,bc as pe,bJ as Le}from"./index.9dc8cc96.js";import{Q as se}from"./QTab.e53f0b3f.js";import{Q as Pe}from"./QTabs.87c48123.js";import{Q as le}from"./QTabPanel.285f6b04.js";import{Q as Ne}from"./QTabPanels.a182dd16.js";import{Q as de}from"./QSpinnerDots.f4afdeb0.js";import{Q as Y}from"./QBadge.2ebc5504.js";import{Q as me}from"./QScrollArea.69bafce2.js";import{u as G}from"./warehouse.5da6326c.js";import{u as te}from"./premix.c535e72d.js";import{q as re}from"./date.5e952ae4.js";import{u as ue}from"./use-quasar.3ce1137f.js";import{a as g}from"./QSelect.798cc745.js";import{a as z,b as v}from"./QMenu.b43f4494.js";import{Q as O}from"./QList.de0e1a15.js";import{C as ge}from"./ClosePopup.3546b783.js";import{u as ie}from"./use-dialog-plugin-component.786f1c20.js";import{_ as K}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as Se}from"./QPagination.993b1954.js";import{Q as Ie,a as Fe}from"./QTable.3eb90875.js";import{u as ye}from"./stock-delivery.f623ece3.js";import{u as Me}from"./user.40206bdd.js";import"./QResizeObserver.ee246e2a.js";import"./rtl.276c3f1b.js";import"./use-panel.4dd85d67.js";import"./touch.9135741d.js";import"./selection.98a221cb.js";import"./use-render-cache.3aae9b27.js";import"./QScrollObserver.17e4b72c.js";import"./TouchPan.a59ffdd0.js";import"./axios.f4eed099.js";import"./QChip.feab24e3.js";import"./use-virtual-scroll.165d9211.js";import"./position-engine.db16b124.js";import"./QVirtualScroll.1fa8b828.js";const Qe=l=>(W("data-v-a39c1e44"),l=l(),J(),l),Ye={class:"row justify-between"},He={class:"text-h6"},Be=Qe(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),Oe=Qe(()=>a("div",{class:"text-h6"},"Decline Report",-1)),Ke={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){const{dialogRef:C,onDialogHide:I,onDialogOK:$,onDialogCancel:k}=ie(),p=G(),q=A(()=>p.user);console.log("userdata",q.value);const w=q.value.data.employee_id,P=te(),b=l;console.log("report",b.report);const x=R(!1),y=R(""),N=R(!1),S=()=>{N.value=!0},f=i=>{const c=h=>h?h.charAt(0).toUpperCase()+h.slice(1).toLowerCase():"",r=i.firstname?c(i.firstname):"No Firstname",n=i.middlename?c(i.middlename).charAt(0)+".":"",d=i.lastname?c(i.lastname):"No Lastname";return`${r} ${n} ${d}`},s=async()=>{try{const i={id:b.report.id,request_premixes_id:b.report.id,branch_premix_id:b.report.branch_premix_id,employee_id:w,status:b.report.status,quantity:b.report.quantity,warehouse_id:b.report.warehouse_id,notes:"Confirmed Premix"},c=await P.confirmPremix(i);console.log("Report confirmedss:",c),ne.create({type:"positive",message:"Report confirmed successfully"}),x.value=!1}catch(i){console.error(i)}},u=async()=>{const i={id:b.report.id,request_premixes_id:b.report.id,branch_premix_id:b.report.branch_premix_id,employee_id:w,status:"decline",quantity:b.report.quantity,warehouse_id:b.report.warehouse_id,notes:y.value};await P.declinePremix(i),N.value=!1};return(i,c)=>(_(),D(F,null,[e(Z,{ref_key:"dialogRef",ref:C,modelValue:x.value,"onUpdate:modelValue":c[1]||(c[1]=r=>x.value=r),onHide:E(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",Ye,[a("div",He,o(l.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:c[0]||(c[0]=r=>x.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+o(f(l.report.employee)),1),a("div",null," Branch: "+o(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[m(" Status: "),e(Y,{color:"warning",outlined:""},{default:t(()=>[m(o(l.report.status),1)]),_:1})])]),_:1}),e(V,null,{default:t(()=>[Be]),_:1}),e(V,null,{default:t(()=>[e(O,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[m(o(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[m(o(l.report.quantity),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(V,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(j,{color:"negative",label:"Decline",class:"action-btn",onClick:S}),e(j,{color:"positive",label:"Confirm",class:"action-btn",onClick:s})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]),e(Z,{modelValue:N.value,"onUpdate:modelValue":c[3]||(c[3]=r=>N.value=r)},{default:t(()=>[e(L,null,{default:t(()=>[e(V,null,{default:t(()=>[Oe]),_:1}),e(V,null,{default:t(()=>[e(he,{modelValue:y.value,"onUpdate:modelValue":c[2]||(c[2]=r=>y.value=r),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[r=>!!r||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(xe,{align:"right"},{default:t(()=>[fe(e(j,{flat:"",label:"Cancel",color:"primary"},null,512),[[ge]]),e(j,{flat:"",label:"Confirm",color:"negative",onClick:u})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ee=K(Ke,[["__scopeId","data-v-a39c1e44"]]);const Re=l=>(W("data-v-292fa318"),l=l(),J(),l),Ge={key:0,class:"spinner-wrapper"},We={key:1,class:"q-mt-xl"},Je={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},Xe=Re(()=>a("div",{class:"text-h6 text-grey-7 q-mt-sm"},o("No Premixes available."),-1)),Ze=Re(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},o("Check again later."),-1)),et={class:"q-gutter-md q-ma-md"},tt={class:"row items-start justify-between"},at={class:"col-8 column q-gutter-y-xs"},st={class:"text-body1 text-weight-bold text-primary-dark"},lt={class:"text-caption text-grey-6 text-weight-meduim"},ot={class:"col-4 column items-end q-gutter-y-xs"},nt={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},rt={class:"row justify-between items-end"},it={class:"column q-gutter-y-xs"},ct=Re(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),dt={class:"text-body2 text-weight-semibold text-grey-9"},ut={__name:"PendingPage",setup(l){const C=G(),I=A(()=>C.user);console.log("userdata",I.value);const $=te(),k=A(()=>$.pendingPremixData),p=I.value.device.reference_id;console.log("warehouseId",p);const q=R("pending"),w=R(!0),P=R(!1),b=ue();ce(async()=>{p&&await S()});const x=s=>re.formatDate(s,"MMM DD, YYYY || hh:mm A"),y=s=>s?s.toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "):"",N=s=>{const u=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",i=s.firstname?u(s.firstname):"No Firstname",c=s.middlename?u(s.middlename).charAt(0)+".":"",r=s.lastname?u(s.lastname):"No Lastname";return`${i} ${c} ${r}`},S=async()=>{try{w.value=!0,await $.fetchPendingPremix(p,q.value),k.value.length||(P.value=!0)}catch{P.value=!0}finally{w.value=!1}},f=s=>{b.dialog({component:Ee,componentProps:{report:s}})};return(s,u)=>w.value?(_(),D("div",Ge,[e(de,{size:"50px",color:"primary"})])):(_(),D("div",We,[k.value.length===0?(_(),D("div",Je,[e(ee,{name:"search_off",size:"60px",color:"grey-6"}),Xe,Ze])):(_(),T(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",et,[(_(!0),D(F,null,H(k.value,(i,c)=>(_(),T(L,{key:c,onClick:r=>f(i),class:"pending-card elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var r,n;return[a("div",tt,[a("div",at,[a("div",st," Premix: "+o(y(i.name)||"-"),1),a("div",lt,o(x(i.created_at)||"-"),1)]),a("div",ot,[a("div",null,[e(Y,{color:"warning",class:"text-weight-bold q-px-md q-py-sm pending-badge"},{default:t(()=>[m(" PENDING ")]),_:1})]),a("div",nt,o(((n=(r=i.branch_premix)==null?void 0:r.branch_recipe)==null?void 0:n.branch.name)||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",rt,[a("div",it,[ct,a("div",dt,o(N(i.employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var mt=K(ut,[["__scopeId","data-v-292fa318"]]);const _t={class:"row justify-between"},pt={class:"text-h6"},ft=a("div",{class:"text-h6",align:"center"},"Premix",-1),gt=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),vt={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var u,i,c;const{dialogRef:C,onDialogHide:I,onDialogOK:$,onDialogCancel:k}=ie(),p=R(!1),q=G(),w=A(()=>q.user);console.log("userdata",w.value);const P=w.value.data.employee_id,b=te(),x=l,y=r=>{const n=Number(r);return isNaN(n)?"":(n%1===0,n.toString())},N=(r,n)=>{if(n==="Pcs")return`${r} pcs`;if(n==="Grams"){if(r>=1e3){let d=r/1e3;return`${d%1===0?d.toString():d.toString().replace(/^0+/,"")} kgs`}return`${r} g`}return`${r} ${n}`},S=((c=(i=(u=x.report)==null?void 0:u.branch_premix)==null?void 0:i.branch_recipe)==null?void 0:c.ingredient_groups)||"Undefined";console.log("ingrdientsData",S),console.log("report to proceed",x.report);const f=r=>{const n=U=>U?U.charAt(0).toUpperCase()+U.slice(1).toLowerCase():"",d=r.firstname?n(r.firstname):"No Firstname",h=r.middlename?n(r.middlename).charAt(0)+".":"",Q=r.lastname?n(r.lastname):"No Lastname";return`${d} ${h} ${Q}`},s=async()=>{try{const r={id:x.report.id,request_premixes_id:x.report.id,branch_premix_id:x.report.branch_premix_id,employee_id:P,status:"process",quantity:x.report.quantity,warehouse_id:x.report.warehouse_id,notes:"Process Premix"},n=await b.processPremix(r);console.log("Report Process:",n),ne.create({type:"positive",message:"Premix proceed to process successfully"}),p.value=!1}catch(r){console.error(r)}};return(r,n)=>(_(),T(Z,{ref_key:"dialogRef",ref:C,modelValue:p.value,"onUpdate:modelValue":n[1]||(n[1]=d=>p.value=d),onHide:E(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",_t,[a("div",pt,o(l.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:n[0]||(n[0]=d=>p.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+o(f(l.report.employee)),1),a("div",null," Branch: "+o(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[m(" Status: "),e(Y,{color:"green",outlined:""},{default:t(()=>[m(o(l.report.status),1)]),_:1})])]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[ft,e(O,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[m(o(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[m(o(y(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[gt,e(O,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Quantity")]),_:1})]),_:1})]),_:1}),(_(!0),D(F,null,H(E(S),(d,h)=>(_(),T(z,{key:h},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[m(o(d.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[m(o(d.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[m(o(N(d.quantity*l.report.quantity,d.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(V,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[fe(e(j,{flat:"",label:"Cancel",color:"negative"},null,512),[[ge]]),e(j,{color:"primary",label:"Process",class:"action-btn",onClick:s})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const be=l=>(W("data-v-33fd577a"),l=l(),J(),l),ht={key:0,class:"spinner-wrapper"},xt={key:1,class:"q-mt-xl"},yt={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},bt=be(()=>a("div",{class:"text-h6 text-grey-7 q-mt-sm"},o("No Premixes available."),-1)),$t=be(()=>a("div",{class:"text-body1 text-grey-7 q-mt-sm"},o("Check again later."),-1)),wt={class:"q-gutter-md q-ma-md"},kt={class:"row items-start justify-between"},qt={class:"col-8 column q-gutter-y-xs"},Dt={class:"text-body1 text-weight-bold text-primary-dark"},Ct={class:"text-caption text-grey-6 text-weight-medium"},Pt={class:"col-4 column items-end q-gutter-y-xs"},Nt={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},St={class:"row justify-between items-end"},Rt={class:"column q-gutter-y-xs"},Vt=be(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),It={class:"text-body2 text-weight-semibold text-grey-9"},Qt={class:"col-5 column"},Tt=be(()=>a("div",{class:"text-caption text-grey-7"},"Confirmed by:",-1)),At={class:"text-body2 text-weight-semibold text-grey-9"},zt={__name:"ConfirmPage",setup(l){const C=G(),$=A(()=>C.user).value.device.reference_id;console.log("warehouseId",$);const k=te(),p=A(()=>k.confirmPremixData);console.log("confirmedPremixData",p.value);const q=R("confirmed"),w=R(!0),P=R(!1),b=ue();ce(async()=>{$&&await S()});const x=s=>s?s.toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "):"",y=s=>re.formatDate(s,"MMM DD, YYYY || hh:mm A"),N=s=>{const u=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",i=s.firstname?u(s.firstname):"No Firstname",c=s.middlename?u(s.middlename).charAt(0)+".":"",r=s.lastname?u(s.lastname):"No Lastname";return`${i} ${c} ${r}`},S=async()=>{try{w.value=!0,await k.fetchConfirmPremix($,q.value),p.value.length||(P.value=!0)}catch{P.value=!0}finally{w.value=!1}},f=s=>{b.dialog({component:vt,componentProps:{report:s}})};return(s,u)=>w.value?(_(),D("div",ht,[e(de,{size:"50px",color:"primary"})])):(_(),D("div",xt,[p.value.length===0?(_(),D("div",yt,[e(ee,{name:"warning",color:"grey-6",size:"60px"}),bt,$t])):(_(),T(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",wt,[(_(!0),D(F,null,H(p.value,(i,c)=>(_(),T(L,{key:c,onClick:r=>f(i),class:"elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-gutter-sm enhanced-card-section"},{default:t(()=>{var r,n,d;return[a("div",kt,[a("div",qt,[a("div",Dt," Premix: "+o(x(i.name)||"-"),1),a("div",Ct,o(y(i.created_at)||"-"),1)]),a("div",Pt,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm confirmed-badge"},{default:t(()=>[m(" CONFIRMED ")]),_:1})]),a("div",Nt,o(((d=(n=(r=i.branch_premix)==null?void 0:r.branch_recipe)==null?void 0:n.branch)==null?void 0:d.name)||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",St,[a("div",Rt,[Vt,a("div",It,o(N(i.employee)||"-"),1)]),a("div",Qt,[Tt,a("div",At,o(N(i.history[0].employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var jt=K(zt,[["__scopeId","data-v-33fd577a"]]);const Ut={class:"row justify-between"},Lt={class:"text-h6"},Ft=a("div",{class:"text-h6",align:"center"},"Premix",-1),Mt=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),Yt={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var y,N,S;const{dialogRef:C,onDialogHide:I,onDialogOK:$,onDialogCancel:k}=ie(),p=R(!1),q=l,w=f=>{const s=r=>r?r.charAt(0).toUpperCase()+r.slice(1).toLowerCase():"",u=f.firstname?s(f.firstname):"No Firstname",i=f.middlename?s(f.middlename).charAt(0)+".":"",c=f.lastname?s(f.lastname):"No Lastname";return`${u} ${i} ${c}`},P=f=>{const s=Number(f);return isNaN(s)?"":(s%1===0,s.toString())},b=(f,s)=>{if(s==="Pcs")return`${f} pcs`;if(s==="Grams"){if(f>=1e3){let u=f/1e3;return`${u%1===0?u.toString():u.toString().replace(/^0+/,"")} kgs`}return`${f} g`}return`${f} ${s}`},x=((S=(N=(y=q.report)==null?void 0:y.branch_premix)==null?void 0:N.branch_recipe)==null?void 0:S.ingredient_groups)||"Undefined";return console.log("ingrdientsData",x),(f,s)=>(_(),D("div",null,[e(Z,{ref_key:"dialogRef",ref:C,modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=u=>p.value=u),onHide:E(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",Ut,[a("div",Lt,o(l.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:s[0]||(s[0]=u=>p.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+o(w(l.report.employee)),1),a("div",null," Branch: "+o(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[m(" Status: "),e(Y,{color:"red-6",outlined:""},{default:t(()=>[m(o(l.report.status),1)]),_:1})])]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[Ft,e(O,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[m(o(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[m(o(P(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[Mt,e(O,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Quantity")]),_:1})]),_:1})]),_:1}),(_(!0),D(F,null,H(E(x),(u,i)=>(_(),T(z,{key:i},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[m(o(u.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[m(o(u.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[m(o(b(u.quantity*l.report.quantity,u.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])]))}};const $e=l=>(W("data-v-1ea1bdab"),l=l(),J(),l),Ht={key:0,class:"spinner-wrapper"},Bt={key:1},Ot={key:0,class:"column items-center text-center q-pa-lg no-data-message"},Kt=$e(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},o("No Premixes available."),-1)),Et=$e(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},o("Check again later."),-1)),Gt={class:"q-gutter-md q-ma-md"},Wt={class:"row items-start justify-between"},Jt={class:"col-8 column q-gutter-y-xs"},Xt={class:"text-body1 text-weight-bold text-primary-dark"},Zt={class:"text-caption text-grey-6 text-weight-medium"},ea={class:"col-4 column items-end q-gutter-y-xs"},ta={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},aa={class:"row items-end justify-between"},sa={class:"column q-gutter-y-xs"},la=$e(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),oa={class:"text-body2 text-weight-semibold text-grey-9"},na={class:"col-5 column"},ra=$e(()=>a("div",{class:"text-caption text-grey-7"},"Declined By:",-1)),ia={class:"text-body2 text-weight-semibold text-grey-9"},ca={key:2,class:"q-pt-lg flex flex-center"},da={__name:"DeclinePage",setup(l){const C=G(),$=A(()=>C.user).value.device.reference_id;console.log("warehouseId",$);const k=te(),p=A(()=>k.declinePremixData);console.log("declinedPremixData",p.value);const q=R("declined"),w=R(!0),P=R(!1),b=ue(),x=R("");let y=null;const N=A(()=>{var n;return((n=k.declinePremixData)==null?void 0:n.pagination)||{current_page:1,last_page:1,per_page:3}});console.log("pagination",N.value);const S=n=>re.formatDate(n,"MMM DD, YYYY || hh:mm A"),f=n=>n?n.toLowerCase().split(" ").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" "):"",s=n=>{const d=B=>B?B.charAt(0).toUpperCase()+B.slice(1).toLowerCase():"",h=n.firstname?d(n.firstname):"No Firstname",Q=n.middlename?d(n.middlename).charAt(0)+".":"",U=n.lastname?d(n.lastname):"No Lastname";return`${h} ${Q} ${U}`},u=async(n=1)=>{try{w.value=!0,await k.fetchDeclinePremix($,q.value,N.value.current_page,N.value.per_page,x.value),p.value.length||(P.value=!0),console.log("declinedPremixData",p.value)}catch{P.value=!0}finally{w.value=!1}};ce(async()=>{$&&await u($,q.value,N.value.current_page)});const i=async()=>{u($,q.value,N.value.current_page)},c=async()=>{y&&clearTimeout(y),y=setTimeout(()=>{u($,q.value,N.value.current_page)})},r=n=>{b.dialog({component:Yt,componentProps:{report:n}})};return(n,d)=>(_(),D(F,null,[a("div",null,[e(he,{outlined:"",dense:"",placeholder:"Search declined delivery",class:"q-mb-md","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6",modelValue:x.value,"onUpdate:modelValue":[d[0]||(d[0]=h=>x.value=h),c]},{prepend:t(()=>[e(ee,{name:"search",color:"grey-6"})]),_:1},8,["modelValue"])]),w.value?(_(),D("div",Ht,[e(de,{size:"50px",color:"primary"})])):(_(),D("div",Bt,[p.value.length===0?(_(),D("div",Ot,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),Kt,Et])):(_(),T(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Gt,[(_(!0),D(F,null,H(p.value.data,(h,Q)=>(_(),T(L,{key:Q,onClick:U=>r(h),class:"elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",Wt,[a("div",Jt,[a("div",Xt," Premix: "+o(f(h.name)||"-"),1),a("div",Zt,o(S(h.created_at)),1)]),a("div",ea,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm declined-badge text-uppercase"},{default:t(()=>[m(o(h.status),1)]),_:2},1024)]),a("div",ta,o(h.branch_premix.branch_recipe.branch.name||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",aa,[a("div",sa,[la,a("div",oa,o(s(h.employee)||"-"),1)]),a("div",na,[ra,a("div",ia,o(s(h.history[0].employee)||"-"),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))])),N.value.last_page>1?(_(),D("div",ca,[e(Se,{modelValue:N.value.current_page,"onUpdate:modelValue":[d[1]||(d[1]=h=>N.value.current_page=h),i],max:N.value.last_page,"max-pages":3,"boundary-links":"","direction-links":"","icon-first":"first_page","icon-last":"last_page","icon-prev":"chevron_left","icon-next":"chevron_right",color:"primary","active-color":"white","active-text-color":"primary",class:"elegant-pagination"},null,8,["modelValue","max"])])):pe("",!0)],64))}};var ua=K(da,[["__scopeId","data-v-1ea1bdab"]]);const ma={class:"row justify-between"},_a={class:"text-h6"},pa=a("div",{class:"text-h6",align:"center"},"Premix",-1),fa=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),ga={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var i,c,r;const{dialogRef:C,onDialogHide:I,onDialogOK:$,onDialogCancel:k}=ie(),p=G(),q=A(()=>p.user);console.log("userdata",q.value);const w=q.value.data.employee_id,P=te(),b=l;console.log("report",b.report);const x=R(!1),y=((r=(c=(i=b.report)==null?void 0:i.branch_premix)==null?void 0:c.branch_recipe)==null?void 0:r.ingredient_groups)||"Undefined";console.log("ingrdientsData",y);const N=n=>{const d=B=>B?B.charAt(0).toUpperCase()+B.slice(1).toLowerCase():"",h=n.firstname?d(n.firstname):"No Firstname",Q=n.middlename?d(n.middlename).charAt(0)+".":"",U=n.lastname?d(n.lastname):"No Lastname";return`${h} ${Q} ${U}`},S=n=>{const d=Number(n);return isNaN(d)?"":(d%1===0,d.toString())},f=(n,d)=>{if(d==="Pcs")return`${n} pcs`;if(d==="Grams"){if(n>=1e3){let h=n/1e3;return`${h%1===0?h.toString():h.toString().replace(/^0+/,"")} kgs`}return`${n} g`}return`${n} ${d}`},s=A(()=>y.map(n=>{const d=parseFloat(n.quantity)*parseFloat(b.report.quantity);return{...n,totalQuantity:d,formattedQuantity:f(d,n.ingredient.unit)}}));console.log("computedIngredients",s.value);const u=async()=>{try{const n={id:b.report.id,request_premixes_id:b.report.id,branch_premix_id:b.report.branch_premix_id,employee_id:w,status:"completed",quantity:b.report.quantity,warehouse_id:b.report.warehouse_id,notes:"Completed Premix",ingredients:s.value.map(h=>({ingredient_id:h.ingredient.id,quantity:h.totalQuantity,unit:h.ingredient.unit}))},d=await P.completedPremix(n);console.log("Report Process:",d),ne.create({type:"positive",message:"Premix completed to process successfully"}),x.value=!1}catch(n){console.error(n),ne.create({type:"negative",message:"An error occurred while processing the premix."})}};return(n,d)=>(_(),T(Z,{ref_key:"dialogRef",ref:C,modelValue:x.value,"onUpdate:modelValue":d[1]||(d[1]=h=>x.value=h),onHide:E(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",ma,[a("div",_a,o(l.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=h=>x.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+o(N(l.report.employee)),1),a("div",null," Branch: "+o(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[m(" Status: "),e(Y,{color:"primary",outlined:""},{default:t(()=>[m(o(l.report.status),1)]),_:1})])]),_:1}),e(V,null,{default:t(()=>[pa]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[e(O,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[m(o(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[m(o(S(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[a("div",null,[fa,e(O,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Quantity")]),_:1})]),_:1})]),_:1}),(_(!0),D(F,null,H(s.value,(h,Q)=>(_(),T(z,{key:Q},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[m(o(h.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[m(o(h.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[m(o(f(h.quantity*b.report.quantity,h.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1}),e(V,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[fe(e(j,{flat:"",label:"Cancel",color:"primary"},null,512),[[ge]]),e(j,{color:"cyan-7",label:"Completed",class:"action-btn",onClick:u})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const we=l=>(W("data-v-7316aad8"),l=l(),J(),l),va={key:0,class:"spinner-wrapper"},ha={key:1},xa={key:0,class:"column items-center text-center q-pa-lg no-data-message"},ya=we(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},o("No Premixes available."),-1)),ba=we(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},o("Check again later."),-1)),$a={class:"q-gutter-md q-ma-md"},wa={class:"row items-start justify-between"},ka={class:"col-8 column q-gutter-y-xs"},qa={class:"text-body1 text-weight-bold text-primary-dark"},Da={class:"text-caption text-grey-6 text-weight-dark"},Ca={class:"col-4 column items-end q-gutter-y-xs"},Pa={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Na={class:"row items-end justify-between"},Sa={class:"column q-gutter-y-xs"},Ra=we(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),Va={class:"text-body2 text-weight-semibold text-grey-9"},Ia={class:"col-5 column"},Qa=we(()=>a("div",{class:"text-caption text-grey-7"},"Scaler:",-1)),Ta={class:"text-body2 text-weight-semibold text-grey-9"},Aa={__name:"ProcessPage",setup(l){const C=G(),$=A(()=>C.user).value.device.reference_id;console.log("warehouseId",$);const k=te(),p=A(()=>k.processPremixData);console.log("processPremixData",p.value);const q=R("process"),w=R(!0),P=R(!1),b=ue();ce(async()=>{$&&await S()});const x=s=>re.formatDate(s,"MMM DD, YYYY || hh:mm A"),y=s=>s?s.toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "):"",N=s=>{const u=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",i=s.firstname?u(s.firstname):"No Firstname",c=s.middlename?u(s.middlename).charAt(0)+".":"",r=s.lastname?u(s.lastname):"No Lastname";return`${i} ${c} ${r}`},S=async()=>{try{w.value=!0,await k.fetchProcessPremix($,q.value),p.value.length||(P.value=!0)}catch{P.value=!0}finally{w.value=!1}},f=s=>{b.dialog({component:ga,componentProps:{report:s}})};return(s,u)=>w.value?(_(),D("div",va,[e(de,{size:"50px",color:"primary"})])):(_(),D("div",ha,[p.value.length===0?(_(),D("div",xa,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),ya,ba])):(_(),T(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",$a,[(_(!0),D(F,null,H(p.value,(i,c)=>(_(),T(L,{key:c,onClick:r=>f(i),class:"elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var r,n,d;return[a("div",wa,[a("div",ka,[a("div",qa," Premix: "+o(y(i.name)||"-"),1),a("div",Da,o(x(i.created_at)||"-"),1)]),a("div",Ca,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm process-badge text-uppercase"},{default:t(()=>[m(o(i.status),1)]),_:2},1024)]),a("div",Pa,o(((d=(n=(r=i.branch_premix)==null?void 0:r.branch_recipe)==null?void 0:n.branch)==null?void 0:d.name)||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",Na,[a("div",Sa,[Ra,a("div",Va,o(N(i.employee)||"-"),1)]),a("div",Ia,[Qa,a("div",Ta,o(N(i.history[0].employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var za=K(Aa,[["__scopeId","data-v-7316aad8"]]);const ja={class:"row justify-between"},Ua={class:"text-h6"},La=a("div",{class:"text-h6",align:"center"},"Premix",-1),Fa=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),Ma={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var u,i,c;const{dialogRef:C,onDialogHide:I,onDialogOK:$,onDialogCancel:k}=ie(),p=R(!1),q=G(),w=A(()=>q.user);console.log("userdata",w.value);const P=w.value.data.employee_id,b=te(),x=l,y=r=>{const n=Number(r);return isNaN(n)?"":(n%1===0,n.toString())},N=(r,n)=>{if(n==="Pcs")return`${r} pcs`;if(n==="Grams"){if(r>=1e3){let d=r/1e3;return`${d%1===0?d.toString():d.toString().replace(/^0+/,"")} kgs`}return`${r} g`}return`${r} ${n}`},S=((c=(i=(u=x.report)==null?void 0:u.branch_premix)==null?void 0:i.branch_recipe)==null?void 0:c.ingredient_groups)||"Undefined";console.log("ingrdientsData",S),console.log("report to proceed",x.report);const f=r=>{const n=U=>U?U.charAt(0).toUpperCase()+U.slice(1).toLowerCase():"",d=r.firstname?n(r.firstname):"No Firstname",h=r.middlename?n(r.middlename).charAt(0)+".":"",Q=r.lastname?n(r.lastname):"No Lastname";return`${d} ${h} ${Q}`},s=async()=>{try{const r={id:x.report.id,request_premixes_id:x.report.id,branch_premix_id:x.report.branch_premix_id,employee_id:P,status:"to deliver",quantity:x.report.quantity,warehouse_id:x.report.warehouse_id,notes:"To-Deliver Premix"},n=await b.toDeliverPremix(r);console.log("Report To Deliver:",n),ne.create({type:"positive",message:"Premix To Deliver to process successfully"}),p.value=!1}catch(r){console.error(r)}};return(r,n)=>(_(),D("div",null,[e(Z,{ref_key:"dialogRef",ref:C,modelValue:p.value,"onUpdate:modelValue":n[1]||(n[1]=d=>p.value=d),onHide:E(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",ja,[a("div",Ua,o(l.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:n[0]||(n[0]=d=>p.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+o(f(l.report.employee)),1),a("div",null," Branch: "+o(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[m(" Status: "),e(Y,{color:"black",outlined:""},{default:t(()=>[m(o(l.report.status),1)]),_:1})])]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[La,e(O,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[m(o(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[m(o(y(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[Fa,e(O,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Quantity")]),_:1})]),_:1})]),_:1}),(_(!0),D(F,null,H(E(S),(d,h)=>(_(),T(z,{key:h},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[m(o(d.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[m(o(d.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[m(o(N(d.quantity*l.report.quantity,d.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(V,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[fe(e(j,{flat:"",label:"Cancel",color:"negative"},null,512),[[ge]]),e(j,{color:"dark",label:"TO-Deliver",class:"action-btn",onClick:s})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])]))}};const ke=l=>(W("data-v-22a17292"),l=l(),J(),l),Ya={key:0,class:"spinner-wrapper"},Ha={key:1},Ba={key:0,class:"column items-center text-center q-pa-lg no-data-message"},Oa=ke(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},o("No Premixes available."),-1)),Ka=ke(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},o("Check again later."),-1)),Ea={class:"q-gutter-md q-ma-md"},Ga={class:"row items-start justify-between"},Wa={class:"col-8 column q-gutter-y-xs"},Ja={class:"text-body1 text-weight-bold text-primary-dark"},Xa={class:"text-caption text-grey-6 text-weight-dark"},Za={class:"col-4 column items-end q-gutter-y-xs"},es={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},ts={class:"row items-end justify-between"},as={class:"column q-gutter-y-xs"},ss=ke(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),ls={class:"text-body2 text-weight-semibold text-grey-9"},os={class:"col-5 column"},ns=ke(()=>a("div",{class:"text-caption text-grey-7"},"Scaler:",-1)),rs={class:"text-body2 text-weight-semibold text-grey-9"},is={__name:"CompletedPage",setup(l){const C=G(),$=A(()=>C.user).value.device.reference_id;console.log("warehouseId",$);const k=te(),p=A(()=>k.completedPremixData);console.log("completedPremixData",p.value);const q=R("completed"),w=R(!0),P=R(!1),b=ue();ce(async()=>{$&&await S()});const x=s=>re.formatDate(s,"MMM DD, YYYY || hh:mm A"),y=s=>s?s.toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "):"",N=s=>{const u=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",i=s.firstname?u(s.firstname):"No Firstname",c=s.middlename?u(s.middlename).charAt(0)+".":"",r=s.lastname?u(s.lastname):"No Lastname";return`${i} ${c} ${r}`},S=async()=>{try{w.value=!0,await k.fetchCompletedPremix($,q.value),p.value.length||(P.value=!0)}catch{P.value=!0}finally{w.value=!1}},f=s=>{b.dialog({component:Ma,componentProps:{report:s}})};return(s,u)=>w.value?(_(),D("div",Ya,[e(de,{size:"50px",color:"primary"})])):(_(),D("div",Ha,[p.value.length===0?(_(),D("div",Ba,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),Oa,Ka])):(_(),T(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Ea,[(_(!0),D(F,null,H(p.value,(i,c)=>(_(),T(L,{key:c,onClick:r=>f(i),class:"elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",Ga,[a("div",Wa,[a("div",Ja," Premix: "+o(y(i.name)||"-"),1),a("div",Xa,o(x(i.created_at)||"-"),1)]),a("div",Za,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm completed-badge text-uppercase"},{default:t(()=>[m(o(i.status),1)]),_:2},1024)]),a("div",es,o(i.branch_premix.branch_recipe.branch.name||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",ts,[a("div",as,[ss,a("div",ls,o(N(i.employee)),1)]),a("div",os,[ns,a("div",rs,o(N(i.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var cs=K(is,[["__scopeId","data-v-22a17292"]]);const ds={class:"row justify-between"},us={class:"text-h6"},ms=a("div",{class:"text-h6",align:"center"},"Premix",-1),_s=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),ps={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var f,s,u;const{dialogRef:C,onDialogHide:I}=ie(),$=R(!1),k=G(),p=A(()=>k.user);console.log("userdata",p.value);const q=p.value.data.employee_id,w=te(),P=l;console.log("props report",P.report);const b=i=>{const c=Number(i);return isNaN(c)?"":(c%1===0,c.toString())},x=(i,c)=>{if(c==="Pcs")return`${i} pcs`;if(c==="Grams"){if(i>=1e3){let r=i/1e3;return`${r%1===0?r.toString():r.toString().replace(/^0+/,"")} kgs`}return`${i} g`}return`${i} ${c}`},y=((u=(s=(f=P.report)==null?void 0:f.branch_premix)==null?void 0:s.branch_recipe)==null?void 0:u.ingredient_groups)||"Undefined";console.log("ingrdientsData",y),console.log("report to proceed",P.report);const N=i=>{const c=h=>h?h.charAt(0).toUpperCase()+h.slice(1).toLowerCase():"",r=i.firstname?c(i.firstname):"No Firstname",n=i.middlename?c(i.middlename).charAt(0)+".":"",d=i.lastname?c(i.lastname):"No Lastname";return`${r} ${n} ${d}`},S=async()=>{try{const i={id:P.report.id,request_premixes_id:P.report.id,branch_premix_id:P.report.branch_premix_id,employee_id:q,status:"to receive",quantity:P.report.quantity,warehouse_id:P.report.warehouse_id,notes:"To Receive Premix"},c=await w.toReceivePremix(i);console.log("Report Process:",c),ne.create({type:"positive",message:"Premix to receive to process successfully"}),$.value=!1}catch(i){console.error(i)}};return(i,c)=>(_(),T(Z,{ref_key:"dialogRef",ref:C,modelValue:$.value,"onUpdate:modelValue":c[1]||(c[1]=r=>$.value=r),onHide:E(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",ds,[a("div",us,o(l.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:c[0]||(c[0]=r=>$.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+o(N(l.report.employee)),1),a("div",null," Branch: "+o(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[m(" Status: "),e(Y,{color:"brown-9",outlined:""},{default:t(()=>[m(o(l.report.status),1)]),_:1})])]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[ms,e(O,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[m(o(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[m(o(b(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[_s,e(O,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Quantity")]),_:1})]),_:1})]),_:1}),(_(!0),D(F,null,H(E(y),(r,n)=>(_(),T(z,{key:n},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[m(o(r.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[m(o(r.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[m(o(x(r.quantity*l.report.quantity,r.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(V,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[fe(e(j,{flat:"",label:"Cancel",color:"negative"},null,512),[[ge]]),e(j,{color:"brown-9",label:"TO Receive",class:"action-btn",onClick:S})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const qe=l=>(W("data-v-60d056c6"),l=l(),J(),l),fs={key:0,class:"spinner-wrapper"},gs={key:1},vs={key:0,class:"column items-center text-center q-pa-lg no-data-message"},hs=qe(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},o("No Premixes available."),-1)),xs=qe(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},o("Check again later."),-1)),ys={class:"q-gutter-md q-ma-md"},bs={class:"row items-start justify-between"},$s={class:"col-8 column q-gutter-y-xs"},ws={class:"text-body1 text-weight-bold text-primary-dark"},ks={class:"text-caption text-grey-6 text-weight-dark"},qs={class:"col-4 column items-end q-gutter-y-xs"},Ds={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Cs={class:"row items-end justify-between"},Ps={class:"column q-gutter-y-xs"},Ns=qe(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),Ss={class:"text-body2 text-weight-semibold text-grey-9"},Rs={class:"col-5 column"},Vs=qe(()=>a("div",{class:"text-caption text-grey-7"},"Scaler:",-1)),Is={class:"text-body2 text-weight-semibold text-grey-9"},Qs={__name:"ToDeliverPage",setup(l){const C=G(),$=A(()=>C.user).value.device.reference_id;console.log("warehouseIssd",$);const k=te(),p=A(()=>k.toDeliverPremixData);console.log("toDeliverPremixData",p.value);const q=R("to deliver"),w=R(!0),P=R(!1),b=ue();ce(async()=>{$&&await N()});const x=f=>re.formatDate(f,"MMM DD, YYYY || hh:mm A"),y=f=>{const s=r=>r?r.charAt(0).toUpperCase()+r.slice(1).toLowerCase():"",u=f.firstname?s(f.firstname):"No Firstname",i=f.middlename?s(f.middlename).charAt(0)+".":"",c=f.lastname?s(f.lastname):"No Lastname";return`${u} ${i} ${c}`},N=async()=>{try{w.value=!0,await k.fetchToDeliverPremix($,q.value),p.value.length||(P.value=!0)}catch{P.value=!0}finally{w.value=!1}},S=f=>{b.dialog({component:ps,componentProps:{report:f}})};return(f,s)=>w.value?(_(),D("div",fs,[e(de,{size:"50px",color:"primary"})])):(_(),D("div",gs,[p.value.length===0?(_(),D("div",vs,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),hs,xs])):(_(),T(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",ys,[(_(!0),D(F,null,H(p.value,(u,i)=>(_(),T(L,{key:i,onClick:c=>S(u),class:"elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",bs,[a("div",$s,[a("div",ws," Premix: "+o(Le(u.name)||"-"),1),a("div",ks,o(x(u.created_at)||"-"),1)]),a("div",qs,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm to-deliver-badge text-uppercase"},{default:t(()=>[m(o(u.status),1)]),_:2},1024)]),a("div",Ds,o(u.branch_premix.branch_recipe.branch.name||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",Cs,[a("div",Ps,[Ns,a("div",Ss,o(y(u.employee)),1)]),a("div",Rs,[Vs,a("div",Is,o(y(u.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Ts=K(Qs,[["__scopeId","data-v-60d056c6"]]);const As={class:"row justify-between"},zs={class:"text-h6"},js=a("div",{class:"text-h6",align:"center"},"Premix",-1),Us=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),Ls={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var y,N,S;const{dialogRef:C,onDialogHide:I}=ie(),$=R(!1),k=G(),p=A(()=>k.user);console.log("userdata",p.value),p.value.data.employee_id,te();const q=l,w=f=>{const s=Number(f);return isNaN(s)?"":(s%1===0,s.toString())},P=(f,s)=>{if(s==="Pcs")return`${f} pcs`;if(s==="Grams"){if(f>=1e3){let u=f/1e3;return`${u%1===0?u.toString():u.toString().replace(/^0+/,"")} kgs`}return`${f} g`}return`${f} ${s}`},b=((S=(N=(y=q.report)==null?void 0:y.branch_premix)==null?void 0:N.branch_recipe)==null?void 0:S.ingredient_groups)||"Undefined";console.log("ingrdientsData",b),console.log("report to proceed",q.report);const x=f=>{const s=r=>r?r.charAt(0).toUpperCase()+r.slice(1).toLowerCase():"",u=f.firstname?s(f.firstname):"No Firstname",i=f.middlename?s(f.middlename).charAt(0)+".":"",c=f.lastname?s(f.lastname):"No Lastname";return`${u} ${i} ${c}`};return(f,s)=>(_(),T(Z,{ref_key:"dialogRef",ref:C,modelValue:$.value,"onUpdate:modelValue":s[1]||(s[1]=u=>$.value=u),onHide:E(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",As,[a("div",zs,o(l.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:s[0]||(s[0]=u=>$.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+o(x(l.report.employee)),1),a("div",null," Branch: "+o(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[m(" Status: "),e(Y,{color:"amber-10",outlined:""},{default:t(()=>[m(o(l.report.status),1)]),_:1})])]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[js,e(O,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[m(o(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[m(o(w(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[Us,e(O,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Quantity")]),_:1})]),_:1})]),_:1}),(_(!0),D(F,null,H(E(b),(u,i)=>(_(),T(z,{key:i},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[m(o(u.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[m(o(u.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[m(o(P(u.quantity*l.report.quantity,u.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const De=l=>(W("data-v-3af211aa"),l=l(),J(),l),Fs={key:0,class:"spinner-wrapper"},Ms={key:1},Ys={key:0,class:"column items-center text-center q-pa-lg no-data-message"},Hs=De(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},o("No Premixes available."),-1)),Bs=De(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},o("Check again later."),-1)),Os={class:"q-gutter-md q-ma-md"},Ks={class:"row items-start justify-between"},Es={class:"col-8 column q-gutter-y-xs"},Gs={class:"text-body1 text-weight-bold text-primary-dark"},Ws={class:"text-caption text-grey-6 text-weight-medium"},Js={class:"col-4 column items-end q-gutter-y-xs"},Xs={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Zs={class:"row items-end justify-between"},el={class:"column q-gutter-y-xs"},tl=De(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),al={class:"text-body2 text-weight-semibold text-grey-9"},sl={class:"col-5 column"},ll=De(()=>a("div",{class:"text-caption text-grey-7"},"Scaler:",-1)),ol={class:"text-body2 text-weight-semibold text-grey-9"},nl={__name:"ToReceivePage",setup(l){const C=G(),$=A(()=>C.user).value.device.reference_id;console.log("warehouseId",$);const k=te(),p=A(()=>k.toReceivePremixData);console.log("toReceivePremixData",p.value);const q=R("process"),w=R(!0),P=R(!1),b=ue();ce(async()=>{$&&await S()});const x=s=>re.formatDate(s,"MMM DD, YYYY || hh:mm A"),y=s=>s?s.toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "):"",N=s=>{const u=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",i=s.firstname?u(s.firstname):"No Firstname",c=s.middlename?u(s.middlename).charAt(0)+".":"",r=s.lastname?u(s.lastname):"No Lastname";return`${i} ${c} ${r}`},S=async()=>{try{w.value=!0,await k.fetchToReceivePremix($,q.value),p.value.length||(P.value=!0)}catch{P.value=!0}finally{w.value=!1}},f=s=>{b.dialog({component:Ls,componentProps:{report:s}})};return(s,u)=>w.value?(_(),D("div",Fs,[e(de,{size:"50px",color:"primary"})])):(_(),D("div",Ms,[p.value.length===0?(_(),D("div",Ys,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),Hs,Bs])):(_(),T(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Os,[(_(!0),D(F,null,H(p.value,(i,c)=>(_(),T(L,{key:c,onClick:r=>f(i),class:"elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",Ks,[a("div",Es,[a("div",Gs," Premix: "+o(y(i.name)||"-"),1),a("div",Ws,o(x(i.created_at)),1)]),a("div",Js,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm to-receive-badge text-uppercase"},{default:t(()=>[m(o(i.status),1)]),_:2},1024)]),a("div",Xs,o(i.branch_premix.branch_recipe.branch.name||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",Zs,[a("div",el,[tl,a("div",al,o(N(i.employee)||"-"),1)]),a("div",sl,[ll,a("div",ol,o(N(i.history[0].employee)||"-"),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var rl=K(nl,[["__scopeId","data-v-3af211aa"]]);const il={class:"row justify-between"},cl={class:"text-h6"},dl=a("div",{class:"text-h6",align:"center"},"Premix",-1),ul=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),ml={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var y,N,S;const C=l;console.log("report",C.report);const I=R(!1),$=()=>{I.value=!0},k=((S=(N=(y=C.report)==null?void 0:y.branch_premix)==null?void 0:N.branch_recipe)==null?void 0:S.ingredient_groups)||"Undefined";console.log("ingrdientsData",k);const p=f=>f?f.toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "):"",q=f=>{const s=r=>r?r.charAt(0).toUpperCase()+r.slice(1).toLowerCase():"",u=f.firstname?s(f.firstname):"No Firstname",i=f.middlename?s(f.middlename).charAt(0)+".":"",c=f.lastname?s(f.lastname):"No Lastname";return`${u} ${i} ${c}`},w=f=>{const s=Number(f);return isNaN(s)?"":(s%1===0,s.toString())},P=(f,s)=>{if(s==="Pcs")return`${f} pcs`;if(s==="Grams"){if(f>=1e3){let u=f/1e3;return`${u%1===0?u.toString():u.toString().replace(/^0+/,"")} kgs`}return`${f} g`}return`${f} ${s}`},b=f=>re.formatDate(f,"MMM DD, YYYY || hh:mm A"),x=A(()=>k.map(f=>{const s=parseFloat(f.quantity)*parseFloat(C.report.quantity);return{...f,totalQuantity:s,formattedQuantity:P(s,f.ingredient.unit)}}));return(f,s)=>(_(),D(F,null,[a("div",null,[e(j,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:$})]),e(Z,{modelValue:I.value,"onUpdate:modelValue":s[1]||(s[1]=u=>I.value=u)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",il,[a("div",cl,o(p(l.report.name)||"-"),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:s[0]||(s[0]=u=>I.value=!1)})])]),_:1}),e(V,null,{default:t(()=>{var u;return[a("div",null,"Date: "+o(b(l.report.created_at)||"-"),1),a("div",null,"Baker: "+o(q(l.report.employee)||"-"),1),a("div",null," Branch: "+o(l.report.branch_premix.branch_recipe.branch.name||"-"),1),a("div",null,[m(" Status: "),e(Y,{color:"green",outlined:""},{default:t(()=>[m(o(l.report.status||"-"),1)]),_:1})]),a("div",null," Received By: "+o(q((u=l.report.history[0])==null?void 0:u.employee)||"-"),1)]}),_:1}),e(V,null,{default:t(()=>[dl]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[e(O,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[m(o(p(l.report.name)||"-"),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[m(o(w(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[a("div",null,[ul,e(O,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[m("Quantity")]),_:1})]),_:1})]),_:1}),(_(!0),D(F,null,H(x.value,(u,i)=>(_(),T(z,{key:i},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[m(o(u.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[m(o(u.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[m(o(P(u.quantity*C.report.quantity,u.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const _l=l=>(W("data-v-3abe5ed6"),l=l(),J(),l),pl={key:0,class:"spinner-wrapper"},fl={key:1},gl={key:0,class:"data-error"},vl=_l(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),hl={__name:"ReceivedPage",setup(l){const C=G(),$=A(()=>C.user).value.device.reference_id;console.log("warehouseId",$);const k=te(),p=A(()=>k.receivePremixData);console.log("receivePremixData",p.value);const q=R([]),w=R({page:1,rowsPerPage:0,rowsNumber:0}),P=R("process"),b=R(!0),x=R(!1);ce(async()=>{$&&await s($),console.log("receivePremixData",p.value)});const y=c=>re.formatDate(c,"MMM DD, YYYY || hh:mm A"),N=c=>c?c.split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join(" "):"",S=c=>c?c.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "):"",f=c=>{const r=Q=>Q?Q.charAt(0).toUpperCase()+Q.slice(1).toLowerCase():"",n=c.firstname?r(c.firstname):"No Firstname",d=c.middlename?r(c.middlename).charAt(0)+".":"",h=c.lastname?r(c.lastname):"No Lastname";return`${n} ${d} ${h}`},s=async(c,r=0,n=5)=>{try{b.value=!0,await k.fetchReceivePremix(c,P.value,r,n),console.log("receivePremixDatssa",p.value);const{data:d,current_page:h,per_page:Q,total:U}=p.value;q.value=d,console.log("premixData.value",q.value),w.value.page=h,w.value.rowsPerPage=Q,w.value.rowsNumber=U,p.value.length||(x.value=!0)}catch{x.value=!0}finally{b.value=!1}},u=c=>{s($,c.pagination.page,c.pagination.rowsPerPage)},i=[{name:"created_at",label:"Date / Time",align:"left",field:c=>y(c.created_at)||"Not Available",sortable:!0},{name:"employee",label:"Employee",align:"left",field:c=>f(c.employee)||"Not Available",sortable:!0},{name:"branch",label:"Branch Name",align:"left",field:c=>c.branch_premix.branch_recipe.branch.name||"Not Available",sortable:!0},{name:"premix_name",label:"Premix Name",align:"left",field:c=>S(c.name)||"Not Available",sortable:!0},{name:"status",label:"Status",align:"left",field:"status",sortable:!0},{name:"action",label:"Action",align:"left",field:"action",sortable:!0}];return(c,r)=>b.value?(_(),D("div",pl,[e(de,{size:"50px",color:"primary"})])):(_(),D("div",fl,[q.value.length===0?(_(),D("div",gl,[e(ee,{name:"warning",color:"warning",size:"4em"}),vl])):(_(),T(Fe,{key:1,rows:q.value,columns:i,pagination:w.value,"onUpdate:pagination":r[0]||(r[0]=n=>w.value=n),"rows-per-page-options":[3,5,10,0],onRequest:u,flat:"",bordered:""},{"body-cell-status":t(n=>[e(Ie,{props:n},{default:t(()=>[e(Y,{color:"green"},{default:t(()=>[m(o(N(n.row.status)),1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-action":t(n=>[e(Ie,{props:n},{default:t(()=>[e(ml,{report:n.row},null,8,["report"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"]))]))}};var xl=K(hl,[["__scopeId","data-v-3abe5ed6"]]);const yl={class:"q-gutter-y-sm"},bl={__name:"PremixTab",setup(l){const C=R("pendingReports"),I=A(()=>{switch(C.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";case"processReports":return"blue-9";case"completedReports":return"blue-grey-10";case"toDeliverReports":return"brown-6";case"toReceiveReports":return"purple-1";case"receive":return"orange-7";default:return"light-green-13"}});return($,k)=>(_(),T(L,{flat:""},{default:t(()=>[e(oe),a("div",yl,[e(Pe,{modelValue:C.value,"onUpdate:modelValue":k[0]||(k[0]=p=>C.value=p),"indicator-color":I.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(se,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Premix"}),e(se,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Premix"}),e(se,{class:"text-dark",name:"declineReports",label:"\u{1F534}Decline Premix"}),e(se,{class:"text-dark",name:"processReports",label:"\u{1F535}Process Premix"}),e(se,{class:"text-dark",name:"completedReports",label:"\u26ABCompleted Premix"}),e(se,{class:"text-dark",name:"toDeliverReports",label:"\u{1F7E4}To Deliver Premix"}),e(se,{class:"text-dark",name:"toReceiveReports",label:"\u26AATo Receive Premix"}),e(se,{class:"text-dark",name:"receive",label:"\u{1F7E0}Receive Premix"})]),_:1},8,["modelValue","indicator-color"])]),e(Ne,{modelValue:C.value,"onUpdate:modelValue":k[1]||(k[1]=p=>C.value=p),animated:""},{default:t(()=>[e(le,{name:"pendingReports"},{default:t(()=>[e(mt)]),_:1}),e(le,{name:"confirmReports"},{default:t(()=>[e(jt)]),_:1}),e(le,{name:"declineReports"},{default:t(()=>[e(ua)]),_:1}),e(le,{name:"processReports"},{default:t(()=>[e(za)]),_:1}),e(le,{name:"completedReports"},{default:t(()=>[e(cs)]),_:1}),e(le,{name:"toDeliverReports"},{default:t(()=>[e(Ts)]),_:1}),e(le,{name:"toReceiveReports"},{default:t(()=>[e(rl)]),_:1}),e(le,{name:"receive"},{default:t(()=>[e(xl)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var $l=K(bl,[["__scopeId","data-v-07a51121"]]);const Te=l=>(W("data-v-aa3acf16"),l=l(),J(),l),wl=Te(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Report",-1)),kl={key:0},ql=Te(()=>a("div",{class:"text-positive text-subtitle1"}," Please confirm again to finalize this report. ",-1)),Dl={__name:"ConfirmDialog",setup(l){const{dialogRef:C,onDialogHide:I,onDialogOK:$,onDialogCancel:k}=ie(),p=R(!1),q=()=>{p.value?$():p.value=!0};return(w,P)=>(_(),T(Z,{ref_key:"dialogRef",ref:C,onHide:E(I)},{default:t(()=>[e(L,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(V,{class:"q-pt-none q-pb-sm"},{default:t(()=>[wl,p.value?pe("",!0):(_(),D("p",kl,"Are you sure you want to confirm this report?"))]),_:1}),p.value?(_(),T(V,{key:0},{default:t(()=>[ql]),_:1})):pe("",!0),e(oe,{class:"q-mb-md"}),e(V,null,{default:t(()=>[e(xe,{align:"right",class:"q-pt-none"},{default:t(()=>[fe(e(j,{flat:"",dense:"",label:"No",color:"primary",class:"q-mr-sm"},null,512),[[ge]]),e(j,{dense:"",label:p.value?"Confirm":"Yes! Confirm",color:"positive",class:"q-btn-rounded q-px-lg",onClick:q},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Cl=K(Dl,[["__scopeId","data-v-aa3acf16"]]);const Pl=l=>(W("data-v-b44cae3c"),l=l(),J(),l),Nl=Pl(()=>a("div",{class:"text-h5 q-mb-xs"},"Decline Report",-1)),Sl={key:0},Rl={__name:"DeclinedDialog",setup(l){const{dialogRef:C,onDialogHide:I,onDialogOK:$,onDialogCancel:k}=ie(),p=R(!1),q=R(""),w=R(null),P=()=>{p.value?w.value.validate()&&$({remarks:q.value}):p.value=!0};return(b,x)=>(_(),T(Z,{ref_key:"dialogRef",ref:C,onHide:E(I),persistent:""},{default:t(()=>[e(L,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(V,{class:"q-pt-none q-pb-sm"},{default:t(()=>[Nl,p.value?pe("",!0):(_(),D("p",Sl,"Are you sure you want to decline this report?"))]),_:1}),p.value?(_(),T(V,{key:0},{default:t(()=>[e(he,{modelValue:q.value,"onUpdate:modelValue":x[0]||(x[0]=y=>q.value=y),type:"textarea",label:"Reason for declining",filled:"",autogrow:"",dense:"",ref_key:"remarksInput",ref:w,rules:[y=>!!y||"Remarks are required"]},null,8,["modelValue","rules"])]),_:1})):pe("",!0),e(oe,{class:"q-mb-md"}),e(V,null,{default:t(()=>[e(xe,{align:"right",class:"q-pt-none"},{default:t(()=>[fe(e(j,{flat:"",dense:"",label:"No",color:"primary",class:"q-mr-sm"},null,512),[[ge]]),e(j,{dense:"",label:p.value?"Submit Decline":"Yes! Decline",color:"negative",class:"q-btn-rounded q-px-lg",onClick:P},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Vl=K(Rl,[["__scopeId","data-v-b44cae3c"]]);const Il=l=>(W("data-v-2b0fd850"),l=l(),J(),l),Ql={class:"row justify-between"},Tl={class:"text-h6"},Al=Il(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),zl={key:1,class:"text-caption text-grey-6 q-mt-md"},jl={__name:"TransactionView",props:{report:{type:Object,required:!0}},emits:["fetchAgain"],setup(l,{emit:C}){const I=Me(),$=A(()=>I.userData);console.log("userData in TransactionView:",$.value);const k=ye(),{dialogRef:p,onDialogHide:q,onDialogOK:w,onDialogCancel:P}=ie(),b=l;console.log("report",b.report);const x=R(!1),y=ue(),N=c=>c?c.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "):"",S=c=>c==null?"No Quantity":parseFloat(c),f=()=>{y.dialog({component:Cl}).onOk(c=>{console.log("Remarks from child:",c),s(b.report)}).onCancel(()=>{console.log("Cancelled")})},s=async c=>{var r,n,d,h,Q,U,B,ae,ve,_e;try{y.loading.show(),console.log("Confirming report",c);const M=c.items.map(Ce=>{const je=parseFloat(Ce.quantity)||0,Ue=parseFloat(Ce.gram)||0;return{...Ce,total_grams:je*Ue}});console.log("Per Item Totals:",M),console.log("employueee id:",(d=(n=(r=$.value)==null?void 0:r.data)==null?void 0:n.employee)==null?void 0:d.id);const ze={...c,employee_id:((U=(Q=(h=$.value)==null?void 0:h.data)==null?void 0:Q.employee)==null?void 0:U.id)||"0",status:"confirmed",items:M},X=await k.confirmDeliveryStocks(ze);console.log("responsesss",X),(X==null?void 0:X.data)||((B=X==null?void 0:X.data)==null?void 0:B.message)==="Delivery confirmed successfully."?(ne.create({type:"positive",message:X.data.message||"Delivery Confirmed Successfully"}),(X==null?void 0:X.status)===200&&(w({action:"confirmed"}),x.value=!1)):ne.create({type:"negative",message:((ae=X==null?void 0:X.data)==null?void 0:ae.message)||"Failed to Confirm deliveryq"}),console.log("responssssse",X)}catch(M){console.log(M),ne.create({type:"negative",message:((_e=(ve=M==null?void 0:M.response)==null?void 0:ve.data)==null?void 0:_e.message)||"Failed to Confirm delivery"})}finally{y.loading.hide()}},u=()=>{y.dialog({component:Vl}).onOk(c=>{console.log("Remarks from child:",c.remarks),i(b.report.id,c.remarks)}).onCancel(()=>{console.log("Cancelled")})},i=async(c,r)=>{var n,d,h,Q,U,B,ae,ve;try{y.loading.show(),console.log("Declining report",c,"with remarks:",r);const _e={id:c,employee_id:((h=(d=(n=$.value)==null?void 0:n.data)==null?void 0:d.employee)==null?void 0:h.id)||"0",status:"declined",remarks:r},M=await k.declineDeliveryStocks(_e);(M==null?void 0:M.data)||((Q=M==null?void 0:M.data)==null?void 0:Q.message)==="Delivery declined successfully."?(ne.create({type:"positive",message:((U=M==null?void 0:M.data)==null?void 0:U.message)||"Delivery Declined Successfully"}),(M==null?void 0:M.status)===200&&(w({action:"declined"}),x.value=!1)):ne.create({type:"negative",message:((B=M==null?void 0:M.data)==null?void 0:B.message)||"Failed to Decline delivery"}),console.log("responsessssss",M)}catch(_e){console.log(_e),ne.create({type:"negative",message:((ve=(ae=_e==null?void 0:_e.response)==null?void 0:ae.data)==null?void 0:ve.message)||"Failed to decline delivery. Please try again."})}finally{y.loading.hide()}};return(c,r)=>(_(),T(Z,{ref_key:"dialogRef",ref:p,modelValue:x.value,"onUpdate:modelValue":r[1]||(r[1]=n=>x.value=n),onHide:E(q)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,{class:"emphasized-header"},{default:t(()=>[a("div",Ql,[a("div",Tl,"From: "+o(N(l.report.from_name)),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:r[0]||(r[0]=n=>x.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,[Al,l.report.items&&l.report.items.length?(_(),T(O,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(z,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[m(" Raw Materials Code ")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[m("Stocks Category")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,null,{default:t(()=>[m(" Quantity ")]),_:1})]),_:1})]),_:1}),(_(!0),D(F,null,H(l.report.items,(n,d)=>(_(),T(z,{key:d},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>{var h;return[m(o(((h=n.raw_material)==null?void 0:h.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[m(o(n.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,null,{default:t(()=>[m(o(S(n.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(_(),D("div",zl," No items in this delivery "))])]),_:1}),e(xe,{class:"report-actions q-ma-sm q-gutter-sm",align:"right"},{default:t(()=>[e(j,{color:"negative",label:"Decline",class:"action-btn",onClick:u}),e(j,{color:"positive",label:"Confirm",class:"action-btn",onClick:f})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var Ul=K(jl,[["__scopeId","data-v-2b0fd850"]]);const Ll={key:0,class:"spinner-wrapper"},Fl={key:1,class:"q-mt-xl"},Ml={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},Yl={class:"text-h6 text-grey-7 q-mt-sm"},Hl={class:"text-body1 text-grey-6 q-mt-sm"},Bl={class:"q-gutter-md q-ma-md"},Ol={class:"row items-start justify-between"},Kl={class:"col-8 column q-gutter-y-xs"},El={class:"text-body1 text-weight-bold text-primary-dark"},Gl={class:"text-caption text-grey-6 text-weight-meduim"},Wl={class:"col-4 column items-end q-gutter-y-xs"},Jl={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Xl={__name:"PendingPage",setup(l){const C=G(),I=A(()=>C.user);console.log("userdata",I.value);const $=ye(),k=A(()=>$.pendingStocks),p=I.value.device.reference_id;console.log("warehouseId",p);const q=R("pending"),w=R("Warehouse"),P=R(!0),b=R(!1),x=ue(),y=s=>s?s.toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "):"",N=s=>re.formatDate(s,"MMM DD, YYYY || hh:mm A"),S=async()=>{try{P.value=!0,await $.fetchPendingDeliveryReports(p,q.value,w.value),k.value.length||(b.value=!0),console.log("stockDelivery",k.value)}catch(s){console.log(s)}finally{P.value=!1}};ce(async()=>{p&&await S(p,q.value)});const f=(s,u)=>{x.dialog({component:Ul,componentProps:{report:s}}).onOk(i=>{var c;if(console.log("response from child:",i),(i==null?void 0:i.action)==="declined"||(i==null?void 0:i.action)==="confirmed"){const r=(c=$.pendingStocks)==null?void 0:c.data;if(Array.isArray(r)){const n=r.findIndex(d=>d.id===s.id);n!==-1&&r.splice(n,1)}}})};return(s,u)=>P.value?(_(),D("div",Ll,[e(de,{size:"50px",color:"primary"})])):(_(),D("div",Fl,[k.value.data.length===0?(_(),D("div",Ml,[e(ee,{name:"search_off",size:"60px",color:"grey-6"}),a("div",Yl,o(s.searchQuery?"No deliveries found for your search.":"No deliveries available."),1),a("div",Hl,o(s.searchQuery?"Try another search term.":"Check again later."),1)])):(_(),T(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Bl,[(_(!0),D(F,null,H(k.value.data,(i,c)=>(_(),T(L,{key:c,onClick:r=>f(i,c),class:"pending-card elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",Ol,[a("div",Kl,[a("div",El," From: "+o(y(i.from_name)||"-"),1),a("div",Gl,o(N(i.created_at)||"-"),1)]),a("div",Wl,[a("div",null,[e(Y,{color:"warning",class:"text-weight-bold q-px-md q-py-sm pending-badge"},{default:t(()=>[m(" PENDING ")]),_:1})]),a("div",Jl,o(i.items.length||"-")+" items ",1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Zl=K(Xl,[["__scopeId","data-v-4759fa89"]]);const eo=l=>(W("data-v-21b63e34"),l=l(),J(),l),to={class:"row justify-between"},ao={class:"text-h6"},so=eo(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),lo={key:1,class:"text-caption text-grey-6 q-mt-md"},oo={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){const{dialogRef:C,onDialogHide:I,onDialogOK:$,onDialogCancel:k}=ie();console.log("report",l.report);const q=R(!1),w=b=>b?b.toLowerCase().split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" "):"",P=b=>b==null?"No Quantity":parseFloat(b);return(b,x)=>(_(),T(Z,{ref_key:"dialogRef",ref:C,modelValue:q.value,"onUpdate:modelValue":x[1]||(x[1]=y=>q.value=y),onHide:E(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,{class:"emphasized-header"},{default:t(()=>[a("div",to,[a("div",ao,"From: "+o(w(l.report.from_name)),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:x[0]||(x[0]=y=>q.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[m(" Status: "),e(Y,{color:"green"},{default:t(()=>[m(o(w(l.report.status||"No Status")),1)]),_:1})]),_:1}),e(V,null,{default:t(()=>[a("div",null,[so,l.report.items&&l.report.items.length?(_(),T(O,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(z,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[m(" Raw Materials Code ")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[m("Stocks Category")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,null,{default:t(()=>[m(" Quantity ")]),_:1})]),_:1})]),_:1}),(_(!0),D(F,null,H(l.report.items,(y,N)=>(_(),T(z,{key:N},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>{var S;return[m(o(((S=y.raw_material)==null?void 0:S.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[m(o(y.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,null,{default:t(()=>[m(o(P(y.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(_(),D("div",lo," No items in this delivery "))])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var no=K(oo,[["__scopeId","data-v-21b63e34"]]);const ro=l=>(W("data-v-59f83460"),l=l(),J(),l),io={key:0,class:"spinner-wrapper"},co={key:1,class:"q-mt-xl"},uo={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},mo={class:"text-h6 text-grey-7 q-mt-sm"},_o={class:"text-body1 text-grey-6 q-mt-xs"},po={class:"q-gutter-md q-ma-md"},fo={class:"row items-start justify-between"},go={class:"col-8 column q-gutter-y-xs"},vo={class:"text-body1 text-weight-bold text-primary-dark"},ho={class:"text-caption text-grey-6 text-weight-medium"},xo={class:"col-4 column items-end q-gutter-y-xs"},yo={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},bo={class:"row justify-between items-end"},$o={class:"column q-gutter-y-xs"},wo=ro(()=>a("div",{class:"text-caption text-grey-7"},"Confirmed By:",-1)),ko={class:"text-body2 text-weight-semibold text-grey-9"},qo={key:2,class:"q-pt-md flex flex-center"},Do={__name:"ConfirmPage",setup(l){const C=G(),I=A(()=>C.user);console.log("userdata",I.value);const $=ye(),k=A(()=>$.confirmStocks),p=I.value.device.reference_id;console.log("warehouseId",p);const q=R("confirmed"),w=R("Warehouse"),P=R(!0),b=R(!1),x=ue();R(null);const y=R();let N=null;const S=A(()=>{var d;return((d=$.confirmStocks)==null?void 0:d.pagination)||{current_page:1,last_page:1,per_page:3}}),f=d=>d?d.toLowerCase().split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" "):"",s=d=>{const h=ae=>ae?ae.charAt(0).toUpperCase()+ae.slice(1).toLowerCase():"",Q=d.firstname?h(d.firstname):"No Firstname",U=d.middlename?h(d.middlename).charAt(0)+".":"",B=d.lastname?h(d.lastname):"No Lastname";return`${Q} ${U} ${B}`},u=d=>re.formatDate(d,"MMM DD, YYYY || hh:mm A"),i=async()=>{try{P.value=!0,await $.fetchConfirmedDeliveryReports(p,q.value,w.value,S.value.current_page,S.value.per_page,y.value),k.value.length||(b.value=!0),console.log("stockDeliverysss",k.value)}catch(d){console.log(d)}finally{P.value=!1}};ce(async()=>{p&&await i(p,q.value,w.value,S.value.current_page)});const c=async()=>{i(p,q.value,w.value,S.value.current_page)},r=()=>{N&&clearTimeout(N),N=setTimeout(()=>{i()},500)},n=d=>{x.dialog({component:no,componentProps:{report:d}})};return(d,h)=>(_(),D(F,null,[a("div",null,[e(he,{outlined:"",dense:"",placeholder:"Search delivery",class:"q-mb-sm","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6",modelValue:y.value,"onUpdate:modelValue":[h[0]||(h[0]=Q=>y.value=Q),r]},{append:t(()=>[e(ee,{name:"search"})]),_:1},8,["modelValue"])]),P.value?(_(),D("div",io,[e(de,{size:"50px",color:"primary"})])):(_(),D("div",co,[k.value.data.length===0?(_(),D("div",uo,[e(ee,{name:"search_off",size:"60px",color:"grey-6"}),a("div",mo,o(y.value?"No deliveries found for your search.":"No deliveries available."),1),a("div",_o,o(y.value?"Try another search term.":"Check again later."),1)])):(_(),T(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",po,[(_(!0),D(F,null,H(k.value.data,(Q,U)=>(_(),T(L,{key:U,onClick:B=>n(Q),class:"confirmed-card elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-gutter-sm enhanced-card-section"},{default:t(()=>[a("div",fo,[a("div",go,[a("div",vo," From: "+o(f(Q.from_name)||"-"),1),a("div",ho,o(u(Q.created_at)||"-"),1)]),a("div",xo,[a("div",null,[e(Y,{color:"positive",class:"text-weight-bold q-px-md q-py-sm confirmed-badge"},{default:t(()=>[m(" CONFIRMED ")]),_:1})]),a("div",yo,o(Q.items.length||"-")+" items ",1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",bo,[a("div",$o,[wo,a("div",ko,o(s(Q.approved_by)||"-"),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))])),S.value.last_page>1?(_(),D("div",qo,[e(Se,{modelValue:S.value.current_page,"onUpdate:modelValue":h[1]||(h[1]=Q=>S.value.current_page=Q),max:S.value.last_page,"max-pages":3,"boundary-links":"","direction-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward",onClick:c},null,8,["modelValue","max"])])):pe("",!0)],64))}};var Co=K(Do,[["__scopeId","data-v-59f83460"]]);const Ve=l=>(W("data-v-5f67e1eb"),l=l(),J(),l),Po={class:"row justify-between"},No={class:"text-h6"},So=Ve(()=>a("span",{class:"text-bold"},"Status:",-1)),Ro=Ve(()=>a("span",{class:"text-bold"},"Remark:",-1)),Vo=Ve(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),Io={key:1,class:"text-caption text-grey-6 q-mt-md"},Qo={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){const{dialogRef:C,onDialogHide:I,onDialogOK:$,onDialogCancel:k}=ie();console.log("report",l.report);const q=R(!1),w=b=>b?b.toLowerCase().split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" "):"",P=b=>b==null?"No Quantity":parseFloat(b);return(b,x)=>(_(),T(Z,{ref_key:"dialogRef",ref:C,modelValue:q.value,"onUpdate:modelValue":x[1]||(x[1]=y=>q.value=y),onHide:E(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",Po,[a("div",No,"From: "+o(w(l.report.from_name)),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:x[0]||(x[0]=y=>q.value=!1)})])]),_:1}),e(V,{class:"text-caption text-grey-7 q-mt-sm"},{default:t(()=>[So,e(Y,{color:"negative"},{default:t(()=>[m(o(w(l.report.status||"No Status")),1)]),_:1}),a("div",null,[Ro,m(" "+o(w(l.report.remarks||"No Remark")),1)])]),_:1}),e(V,null,{default:t(()=>[a("div",null,[Vo,l.report.items&&l.report.items.length?(_(),T(O,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(z,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[m(" Raw Materials Code ")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[m("Stocks Category")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{side:""},{default:t(()=>[m("Quantity")]),_:1})]),_:1})]),_:1}),(_(!0),D(F,null,H(l.report.items,(y,N)=>(_(),T(z,{key:N},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>{var S;return[m(o(((S=y.raw_material)==null?void 0:S.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[m(o(y.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,null,{default:t(()=>[m(o(P(y.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(_(),D("div",Io," No items in this delivery "))])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var To=K(Qo,[["__scopeId","data-v-5f67e1eb"]]);const Ae=l=>(W("data-v-41b98b80"),l=l(),J(),l),Ao={key:0,class:"spinner-wrapper"},zo={key:1,class:"q-mt-xl"},jo={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},Uo={class:"text-h6 text-grey-7 q-mt-md"},Lo={class:"text-body1 text-grey-6 q-mt-sm"},Fo={class:"q-gutter-md q-pb-md"},Mo={class:"row items-start justify-between"},Yo={class:"col-8 column q-gutter-y-xs"},Ho={class:"text-body1 text-weight-bold text-primary-dark"},Bo={class:"text-caption text-grey-6 text-weight-medium"},Oo={class:"col-4 column items-end q-gutter-y-xs"},Ko={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Eo={class:"row justify-between items-end"},Go={class:"column q-gutter-y-xs"},Wo=Ae(()=>a("div",{class:"text-caption text-grey-7"},"Declined By:",-1)),Jo={class:"text-body2 text-weight-semibold text-grey-9"},Xo={class:"col-5 column"},Zo=Ae(()=>a("div",{class:"text-caption text-grey-7"},"Remark:",-1)),en={class:"text-body2 text-grey-8 remarks-text"},tn={key:2,class:"q-pt-lg flex flex-center"},an={__name:"DeclinePage",setup(l){const C=G(),I=A(()=>C.user);console.log("userdata",I.value);const $=ye(),k=A(()=>$.declinedStocks),p=I.value.device.reference_id;console.log("warehouseId",p);const q=R("declined"),w=R("Warehouse"),P=R(!0),b=R(!1),x=ue(),y=R();let N=null;const S=A(()=>{var d;return((d=$.declinedStocks)==null?void 0:d.pagination)||{current_page:1,last_page:1,per_page:3}}),f=d=>d?d.toLowerCase().split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" "):"",s=d=>{const h=ae=>ae?ae.charAt(0).toUpperCase()+ae.slice(1).toLowerCase():"",Q=d.firstname?h(d.firstname):"No Firstname",U=d.middlename?h(d.middlename).charAt(0)+".":"",B=d.lastname?h(d.lastname):"No Lastname";return`${Q} ${U} ${B}`},u=d=>re.formatDate(d,"MMM DD, YYYY || hh:mm A"),i=async(d=1)=>{try{P.value=!0,await $.fetchDeclinedDeliveryReports(p,q.value,w.value,S.value.current_page,S.value.per_page,y.value),k.value.length||(b.value=!0),console.log("stockDeliveryDeclinedsss",k.value)}catch(h){console.log(h)}finally{P.value=!1}};ce(async()=>{p&&await i(p,q.value,w.value,S.value.current_page)});const c=async()=>{i(p,q.value,w.value,S.value.current_page)},r=async()=>{N&&clearTimeout(N),N=setTimeout(()=>{i(1)},500)},n=d=>{x.dialog({component:To,componentProps:{report:d}})};return(d,h)=>(_(),D(F,null,[a("div",null,[e(he,{outlined:"",dense:"",placeholder:"Search delivery",class:"q-mb-md search-input-elegant","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6",modelValue:y.value,"onUpdate:modelValue":[h[0]||(h[0]=Q=>y.value=Q),r]},{prepend:t(()=>[e(ee,{name:"search",color:"grey-6"})]),_:1},8,["modelValue"])]),P.value?(_(),D("div",Ao,[e(de,{size:"50px",color:"primary"})])):(_(),D("div",zo,[k.value.data.length===0?(_(),D("div",jo,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),a("div",Uo,o(y.value?"No deliveries found for your search.":"No deliveries available."),1),a("div",Lo,o(y.value?"Try another search term.":"Check again later."),1)])):(_(),T(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Fo,[(_(!0),D(F,null,H(k.value.data,(Q,U)=>(_(),T(L,{key:U,onClick:B=>n(Q),class:"declined-card elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",Mo,[a("div",Yo,[a("div",Ho," From: "+o(f(Q.from_name)),1),a("div",Bo,o(u(Q.created_at)),1)]),a("div",Oo,[a("div",null,[e(Y,{color:"negative",class:"text-weight-bold q-px-md q-py-sm declined-badge"},{default:t(()=>[m(" DECLINED ")]),_:1})]),a("div",Ko,o(Q.items.length)+" items ",1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",Eo,[a("div",Go,[Wo,a("div",Jo,o(s(Q.approved_by)),1)]),a("div",Xo,[Zo,a("div",en,o(f(Q.remarks||"\u2014 No remark provided \u2014")),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))])),S.value.last_page>1?(_(),D("div",tn,[e(Se,{modelValue:S.value.current_page,"onUpdate:modelValue":[h[1]||(h[1]=Q=>S.value.current_page=Q),c],max:S.value.last_page,"max-pages":5,"boundary-links":"","direction-links":"","icon-first":"first_page","icon-last":"last_page","icon-prev":"chevron_left","icon-next":"chevron_right",color:"primary","active-color":"white","active-text-color":"primary",class:"elegant-pagination"},null,8,["modelValue","max"])])):pe("",!0)],64))}};var sn=K(an,[["__scopeId","data-v-41b98b80"]]);const ln={class:"q-gutter-y-sm"},on={__name:"StocksDeliveryPage",setup(l){const C=R("pending"),I=A(()=>{switch(C.value){case"pending":return"warning";case"confirmed":return"green-13";case"declined":return"red-6";default:return"light-green-13"}});return($,k)=>(_(),T(L,{flat:""},{default:t(()=>[e(oe),a("div",ln,[e(Pe,{modelValue:C.value,"onUpdate:modelValue":k[0]||(k[0]=p=>C.value=p),"indicator-color":I.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(se,{class:"text-dark",name:"pending",label:"Pending"}),e(se,{class:"text-dark",name:"confirmed",label:"Confirmed"}),e(se,{class:"text-dark",name:"declined",label:"Declined"})]),_:1},8,["modelValue","indicator-color"])]),e(Ne,{modelValue:C.value,"onUpdate:modelValue":k[1]||(k[1]=p=>C.value=p),animated:""},{default:t(()=>[e(le,{name:"pending"},{default:t(()=>[e(Zl)]),_:1}),e(le,{name:"confirmed"},{default:t(()=>[e(Co)]),_:1}),e(le,{name:"declined"},{default:t(()=>[e(sn)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},nn={class:"q-gutter-y-sm"},Yn={__name:"warehouseTransactionHistory",setup(l){const C=R("premix"),I=A(()=>{switch(C.value){case"premix":return"brown";case"stocks_delivery":return"teal-5";default:return"light-green-13"}});return($,k)=>(_(),T(L,{flat:""},{default:t(()=>[e(V,{class:"text-h6"},{default:t(()=>[m(" Transaction History ")]),_:1}),a("div",nn,[e(Pe,{modelValue:C.value,"onUpdate:modelValue":k[0]||(k[0]=p=>C.value=p),"indicator-color":I.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(se,{class:"text-dark",name:"premix",label:"Premix"}),e(se,{class:"text-dark",name:"stocks_delivery",label:"Stocks Delivery"})]),_:1},8,["modelValue","indicator-color"])]),e(Ne,{modelValue:C.value,"onUpdate:modelValue":k[1]||(k[1]=p=>C.value=p),animated:""},{default:t(()=>[e(le,{name:"premix"},{default:t(()=>[e($l)]),_:1}),e(le,{name:"stocks_delivery"},{default:t(()=>[e(on)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Yn as default};
