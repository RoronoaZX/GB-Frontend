import{d as m,r as t,c as W,P as R,N as h}from"./index.f8a46ed1.js";import{api as r}from"./axios.c099a715.js";import{u as b}from"./raw-material.1d79fc4c.js";const C=m("warehouseRawMaterials",()=>{const M=t(null),o=t([]),y=t([]),u=t([]),w=t([]),n=t([]),l=t([]),p=t([]),d=t({}),g=e=>{d.value=e},v=b(),f=W(()=>v.rawMaterials);return{setUser:g,setReport:e=>{console.log("report",e),l.value.push(e),n.value=[]},removeReport:e=>{l.value.splice(e,1)},user:d,branch:u,warehouseId:y,branchRecipe:n,branchRawMaterials:w,warehouseRawMaterial:M,warehouseRawMaterials:o,warehouseRawMaterialsReport:l,historyRawMaterials:p,createWarehouseRawMaterials:async e=>{R.show(),console.log("datassss",e);try{const a=await r.post("/api/warehouse-raw-materials-report",e);if(console.log("responsedfasdfasd",a.data),a.data.message==="Warehouse Raw Materials saved successfully"){const s=f.value.find(i=>i.id===e.raw_material_id),c={...a.data,raw_materials:s||{name:"No Name",code:"Unknown"},total_quantity:e.total_quantity};console.log("newRawMaterials",c),o.value.unshift(c),h.create({type:"positive",message:"Warehouse Raw Materials saved successfully",position:"top"})}else a.data.message==="The RawMaterials already exists in this branch."&&h.create({type:"warning",message:"The Raw Materials already exists in this branch.",position:"top"})}catch(a){console.log(a),h.create({type:"negative",message:"An error occurred while saving the branch product.",position:"top"})}finally{R.hide()}},fetchWarehouseRawMaterials:async e=>{console.log("warehouseId",e);try{const a=await r.get(`/api/warehouse/${e}/rawMaterials`);console.log("responsesss",a.data),o.value=a.data}catch(a){console.log("error",a)}},deleteWarehouseRawMaterials:async e=>{await r.delete(`/api/warehouse-raw-materials-report/${e}`),o.value=o.value.filter(a=>a.id!==e)},searchWarehouseRawMaterials:async(e,a)=>{const s=await r.post("/api/search-warehouse-rawMaterials",{keyword:e,warehouse_id:a});o.value=s.data},warehouseAddSupply:async e=>{console.log("data, ",e);try{const a=await r.post("/api/warehouseRawMaterials-add-supply",e);o.value=a.data,console.log("warehouseRawMaterials save",o)}catch(a){console.error(a)}},fetchBranchUnderWarehouse:async e=>{try{const a=await r.get(`/api/warehouse/${e}/branch`);console.log("responsesss",a.data),u.value=a.data}catch(a){console.log("error",a)}},fetchBranchRawMaterials:async e=>{console.log("branchIdss",e);try{const a=await r.get(`/api/branch/${e}/rawMaterials`);console.log("responsesss",a.data),w.value=a.data}catch(a){console.log("error",a)}},searchBranchRecipe:async(e,a)=>{const s=await r.get("/api/branch-recipe-search",{params:{keyword:e,branch_id:a}});n.value=s.data,console.log("branch recipe",s.data)},saveWarehouseRawMaterialsReport:async()=>{try{console.log("warehouseRawMaterialsReport",l.value);const e=await r.post("/api/warehouse-rawMaterials-report",{reports:l.value});console.log("Report saved successfully:",e.data)}catch(e){e.response&&e.response.data?console.error("Error response:",e.response.data):console.error("Unexpected error:",e)}},createMultipleWarehouseRawMaterials:async e=>{try{const a=await r.post("/api/warehouse/raw-materials/bulk-create",{materials:e});console.log("warehouse raw materials",a.data),a.data.data.forEach(s=>{o.value.find(i=>i.id===s.id)||o.value.unshift(s)})}catch(a){console.log(a)}},fetchWarehouseAddedStocks:async(e,a,s)=>{console.log("warehouse id",e);try{const c=await r.get(`/api/warehouse/${e}/added-stocks-history`,{params:{page:a,per_page:s}});console.log("historyRawMaterials.value",c.data),p.value=c.data}catch(c){console.error(c)}}}});export{C as u};
