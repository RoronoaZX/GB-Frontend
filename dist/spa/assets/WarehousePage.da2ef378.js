import{Q as R}from"./QBadge.21b0c684.js";import{r as b,t as Z,o as v,a2 as x,e,w as a,$ as C,M as y,Q as N,I as $,ad as U,a0 as H,J as o,K as V,aI as J,a1 as G,a3 as L,O as P,R as z,H as le,h as M,z as se,u as ne,L as K,c as W,_ as D,bb as re,a4 as de,bc as ie}from"./index.6d6c5126.js";import{Q as ue}from"./QPage.dcaa442f.js";import{Q as ce}from"./QSpinnerDots.24546e69.js";import{Q as I}from"./QTd.ff4103ba.js";import{Q as me}from"./QTable.1a880a00.js";import{Q as ee}from"./QTooltip.51814056.js";import{Q as ae}from"./QSpace.a9a4f1b3.js";import{Q as te}from"./QSelect.1f0082a7.js";import{C as E}from"./ClosePopup.111d3f28.js";import{u as A}from"./warehouse.e76ecc77.js";import{_ as F}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as Y,a as pe}from"./QItem.3bd9e38f.js";import{Q as _e}from"./QList.3a7cac99.js";import{u as he}from"./employee.d7bd95cb.js";import"./QVirtualScroll.f2b37730.js";import"./use-virtual-scroll.d6ec0b6b.js";import"./rtl.4979ba33.js";import"./QMenu.ee11008d.js";import"./selection.10fc1e0e.js";import"./QChip.73cc47c9.js";import"./axios.40292506.js";const Q=r=>(P("data-v-4654e3ae"),r=r(),z(),r),ve=Q(()=>o("div",{class:"text-h5 q-mr-md"},"\u{1F3ED} Edit Warehouse",-1)),fe={class:"q-mt-lg q-animated q-animate-bounce"},ge=Q(()=>o("div",null,"Name of Warehouse",-1)),be={class:"q-mt-md q-animated q-animate-bounce"},ye=Q(()=>o("div",null,"Location",-1)),we={class:"q-mt-md q-animated q-animate-bounce"},qe=Q(()=>o("div",null,"Person In-charge",-1)),xe={class:"row q-gutter-x-sm q-mt-md"},Ve={class:"col-6 q-animated q-animate-bounce"},Ce=Q(()=>o("div",null,"Phone Number",-1)),$e={class:"col-5 q-animated q-animate-bounce"},We=Q(()=>o("div",null,"Status",-1)),Qe={__name:"WarehouseEditComponent",props:["edit"],setup(r){const w=A(),_=b(!1),p=["Open","Closed"],g=r,u=Z({name:"",location:"",person_incharge:"",phone:"",status:null}),q=()=>{Object.assign(u,g.edit.row),_.value=!0},h=async()=>{try{const f={...g.edit.row,...u};await w.updateWarehouses(g.edit.row.id,f),_.value=!1}catch(f){console.error("Failed to update ingredients:",f)}};return(f,m)=>(v(),x(L,null,[e(y,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:"",onClick:q},{default:a(()=>[e(ee,{class:"bg-positive",delay:200},{default:a(()=>[C("Edit")]),_:1})]),_:1}),e(G,{modelValue:_.value,"onUpdate:modelValue":m[5]||(m[5]=i=>_.value=i),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:a(()=>[e(N,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:a(()=>[e($,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:a(()=>[ve,e(ae),U(e(y,{icon:"close",flat:"",dense:"",round:""},null,512),[[E]])]),_:1}),e(H,{class:"separator-gradient"}),e($,{class:"q-px-xl q-pt-none q-pb-lg"},{default:a(()=>[o("div",fe,[ge,e(V,{modelValue:u.name,"onUpdate:modelValue":m[0]||(m[0]=i=>u.name=i),outlined:"",dense:""},null,8,["modelValue"])]),o("div",be,[ye,e(V,{modelValue:u.location,"onUpdate:modelValue":m[1]||(m[1]=i=>u.location=i),outlined:"",dense:""},null,8,["modelValue"])]),o("div",we,[qe,e(V,{modelValue:u.person_incharge,"onUpdate:modelValue":m[2]||(m[2]=i=>u.person_incharge=i),outlined:"",dense:""},null,8,["modelValue"])]),o("div",xe,[o("div",Ve,[Ce,e(V,{modelValue:u.phone,"onUpdate:modelValue":m[3]||(m[3]=i=>u.phone=i),outlined:"",dense:"",mask:"(+63) ### - ### - ####",placeholder:"(+63)### - ### - ####",rules:[i=>i&&i.length>0]},null,8,["modelValue","rules"])]),o("div",$e,[We,e(te,{modelValue:u.status,"onUpdate:modelValue":m[4]||(m[4]=i=>u.status=i),outlined:"",dense:"",options:p,behavior:"menu"},null,8,["modelValue"])])])]),_:1}),e(J,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:a(()=>[U(e(y,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[E]]),e(y,{class:"glossy",color:"teal",label:"Save",onClick:h})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var ke=F(Qe,[["__scopeId","data-v-4654e3ae"]]);const oe=r=>(P("data-v-0db17e38"),r=r(),z(),r),Se=oe(()=>o("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),Ie=oe(()=>o("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),De={__name:"WarehouseDeleteComponent",props:["delete"],setup(r){const w=A(),_=r,p=b(!1),g=()=>{p.value=!0},u=async()=>{try{await w.deleteWarehouse(_.delete.row.id)}catch(q){console.error("Error deleting item:",q)}p.value=!1};return(q,h)=>(v(),x(L,null,[e(y,{onClick:g,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:""},{default:a(()=>[e(ee,{class:"bg-negative",delay:200},{default:a(()=>[C("Delete")]),_:1})]),_:1}),e(G,{modelValue:p.value,"onUpdate:modelValue":h[0]||(h[0]=f=>p.value=f)},{default:a(()=>[e(N,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:a(()=>[e($,{class:"q-pt-none q-pb-sm"},{default:a(()=>[Se,Ie]),_:1}),e(H,{class:"q-mb-md"}),e(J,{align:"right",class:"q-pt-none"},{default:a(()=>[U(e(y,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[E]]),e(y,{dense:"",label:"Delete",color:"negative",onClick:u,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ne=F(De,[["__scopeId","data-v-0db17e38"]]);const Ue=r=>(P("data-v-13a4510f"),r=r(),z(),r),Ee={key:0,class:"spinner-wrapper"},Fe={key:1},Le={key:0,class:"data-error"},Pe=Ue(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),ze={class:"row justify-center q-gutter-x-md"},Ae={__name:"WarehouseTableComponent",setup(r){le();const w=A(),_=b(""),p=b(!0),g=M(()=>w.warehouses),u=b(!1),q=b({rowPerPage:0}),h=M(()=>_.value?g.value.filter(l=>l.name.toLowerCase().includes(_.value.toLowerCase())):g.value);se(async()=>{const l=await f();console.log("respisne warehouse",l)});const f=async()=>{try{p.value=!0;const l=await w.fetchWarehouses();g.value.length||(u.value=!0),console.log("wawrehouse respo",l)}catch{u.value=!0}finally{p.value=!1}};ne(_,async l=>{p.value=!0,await new Promise(t=>setTimeout(t,1e3)),p.value=!1,u.value=h.value.length===0});const m=l=>{const t=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",n=l.firstname?t(l.firstname):"No Firstname",B=l.middlename?t(l.middlename).charAt(0)+".":"",c=l.lastname?t(l.lastname):"No Lastname";return`${n} ${B} ${c}`},i=l=>l?l.split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):"",T=[{name:"name",label:"Name of Warehouse",align:"left",field:l=>l.name,format:l=>`${l}`,sortable:!0},{name:"location",label:"Location",align:"left",field:"location",sortable:!0},{name:"personIncharge",label:"Person In-charge",align:"left",field:l=>m(l)},{name:"phone",label:"Phone",align:"center",field:"phone"},{name:"status",label:"Status",align:"left",field:"status"},{name:"action",label:"Action",align:"center",field:"action"}],j=l=>l==="Open"?"info":"accent";return(l,t)=>(v(),x(L,null,[o("div",null,[e(V,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=n=>_.value=n),class:"q-pb-lg q-pl-sm dynamic-width",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100"},{append:a(()=>[e(K,{name:"search"})]),_:1},8,["modelValue"])]),p.value?(v(),x("div",Ee,[e(ce,{size:"50px",color:"primary"})])):(v(),x("div",Fe,[h.value.length===0?(v(),x("div",Le,[e(K,{name:"warning",color:"warning",size:"4em"}),Pe])):(v(),W(me,{key:1,class:"table-container elegant-container sticky-header",filter:_.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"400px"},columns:T,rows:h.value,"row-key":"name","virtual-scroll":"",pagination:q.value,"onUpdate:pagination":t[1]||(t[1]=n=>q.value=n),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-name":a(n=>[e(I,{props:n},{default:a(()=>[C(D(i(n.row.name)),1)]),_:2},1032,["props"])]),"body-cell-location":a(n=>[e(I,{props:n},{default:a(()=>[C(D(i(n.row.location)),1)]),_:2},1032,["props"])]),"body-cell-personIncharge":a(n=>[e(I,{props:n},{default:a(()=>[C(D(m(n.row.employees)),1)]),_:2},1032,["props"])]),"body-cell-status":a(n=>[e(I,{key:"name",props:n},{default:a(()=>[e(R,{outline:"",color:j(n.row.status)},{default:a(()=>[C(D(n.row.status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-action":a(n=>[e(I,{props:n},{default:a(()=>[o("div",ze,[e(ke,{edit:n},null,8,["edit"]),e(Ne,{delete:n},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Te=F(Ae,[["__scopeId","data-v-13a4510f"]]);const k=r=>(P("data-v-b8d017b8"),r=r(),z(),r),je=k(()=>o("div",{class:"text-h5 q-mr-md"},"\u{1F3ED} Add New Warehouse",-1)),Be={class:"q-mt-lg q-animated q-animate-bounce"},Oe=k(()=>o("div",null,"Name of Warehouse",-1)),Re={class:"q-mt-md q-animated q-animate-bounce"},Me=k(()=>o("div",null,"Location",-1)),Ke={class:"q-mt-md q-animated q-animate-bounce"},He=k(()=>o("div",null,"Person In-charge",-1)),Je={key:0,class:"custom-list z-top"},Ge={class:"row q-gutter-x-sm q-mt-md"},Xe={class:"col-6 q-animated q-animate-bounce"},Ye=k(()=>o("div",null,"Phone Number",-1)),Ze={class:"col-5 q-animated q-animate-bounce"},ea=k(()=>o("div",null,"Status",-1)),aa={__name:"WarehouseCreateComponent",setup(r){const w=he(),_=A(),p=b(!1),g=M(()=>w.employee),u=["Open","Close"],q=()=>{p.value=!0},h=b(""),f=b(!1),m=b(!1),i=b(!1),T=async()=>{h.value.trim()&&(i.value=!0,await w.searchCertainEmployee(h.value),i.value=!1,f.value=!0)},j=c=>{console.log("Selected Employee:",c),t.employee_id=c.id,t.employee_name=`${c.firstname} ${c.middlename?c.middlename.charAt(0)+".":""} ${c.lastname}`,h.value=`${c.firstname} ${c.middlename?c.middlename.charAt(0)+".":""} ${c.lastname}`,f.value=!1,console.log("Filled addNewBranchForm Data:",t)},l=c=>{const d=O=>O?O.charAt(0).toUpperCase()+O.slice(1).toLowerCase():"",s=c.firstname?d(c.firstname):"No Firstname",S=c.middlename?d(c.middlename).charAt(0)+".":"",X=c.lastname?d(c.lastname):"No Lastname";return`${s} ${S} ${X}`},t=Z({name:"",location:"",employee_id:"",employee_name:"",phone:"",status:null}),n=async()=>{console.log("awarehoouse data send",t),m.value=!0,await _.createWarehouses(t),m.value=!1,B(),p.value=!1},B=()=>{t.name="",t.location="",t.person_incharge="",t.phone="",h.value=null,t.employee="",t.status=[""]};return(c,d)=>(v(),x("div",null,[e(y,{outline:"",icon:"add_circle",label:"Add Warehouse",onClick:q,style:{"background-color":"#ef4444"}}),e(G,{modelValue:p.value,"onUpdate:modelValue":d[6]||(d[6]=s=>p.value=s),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:a(()=>[e(N,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:a(()=>[e($,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:a(()=>[je,e(ae),U(e(y,{icon:"close",flat:"",dense:"",round:""},null,512),[[E]])]),_:1}),e(H,{class:"separator-gradient"}),e($,{class:"q-px-xl q-pt-none q-pb-lg"},{default:a(()=>[o("div",Be,[Oe,e(V,{class:"text-capitalize",modelValue:t.name,"onUpdate:modelValue":d[0]||(d[0]=s=>t.name=s),outlined:"",dense:"",rules:[s=>s&&s.length>0]},null,8,["modelValue","rules"])]),o("div",Re,[Me,e(V,{class:"text-capitalize",modelValue:t.location,"onUpdate:modelValue":d[1]||(d[1]=s=>t.location=s),outlined:"",dense:"",rules:[s=>s&&s.length>0]},null,8,["modelValue","rules"])]),o("div",Ke,[He,e(V,{modelValue:h.value,"onUpdate:modelValue":[d[2]||(d[2]=s=>h.value=s),T],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name or position",onFocus:d[3]||(d[3]=s=>f.value=!0)},{append:a(()=>[i.value?(v(),W(re,{key:1,color:"grey",size:"sm"})):(v(),W(K,{key:0,name:"search"}))]),default:a(()=>[f.value&&h.value?(v(),x("div",Je,[e(N,null,{default:a(()=>[e(_e,{separator:""},{default:a(()=>{var s;return[(s=g.value)!=null&&s.length?(v(!0),x(L,{key:1},de(g.value,S=>(v(),W(Y,{onClick:X=>j(S),key:S.id,clickable:""},{default:a(()=>[e(pe,null,{default:a(()=>[C(D(l(S)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(v(),W(Y,{key:0},{default:a(()=>[C(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):ie("",!0)]),_:1},8,["modelValue"])]),o("div",Ge,[o("div",Xe,[Ye,e(V,{modelValue:t.phone,"onUpdate:modelValue":d[4]||(d[4]=s=>t.phone=s),outlined:"",dense:"",mask:"(+63) ### - ### - ####",placeholder:"(+63)### - ### - ####",rules:[s=>s&&s.length>0]},null,8,["modelValue","rules"])]),o("div",Ze,[ea,e(te,{modelValue:t.status,"onUpdate:modelValue":d[5]||(d[5]=s=>t.status=s),outlined:"",dense:"",options:u,"hide-dropdown-icon":"",behavior:"menu"},null,8,["modelValue"])])])]),_:1}),e(J,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:a(()=>[U(e(y,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[E]]),e(y,{class:"glossy",color:"teal",label:"Create",onClick:n,loading:m.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var ta=F(aa,[["__scopeId","data-v-b8d017b8"]]);const oa={class:"text-h6 text-dark"},la={class:"q-gutter-x-sm"},sa={align:"right"},na={__name:"WarehousePage",setup(r){return(w,_)=>(v(),W(ue,null,{default:a(()=>[e(N,{class:"elegant-container",flat:""},{default:a(()=>[e($,{class:"row justify-between"},{default:a(()=>[o("div",oa,[o("div",la,[e(R,{label:"Open",outline:"",color:"info"}),e(R,{label:"Closed",outline:"",color:"accent"})])]),o("div",sa,[e(ta)])]),_:1}),e($,null,{default:a(()=>[e(Te)]),_:1})]),_:1})]),_:1}))}};var ka=F(na,[["__scopeId","data-v-7966fcdc"]]);export{ka as default};
