import{c as T,r as Q,o as v,a3 as C,f as e,w as t,Q as F,I as k,J as s,$ as i,M as L,a0 as c,bf as H,a2 as G,K as xe,aJ as ye,ae as ie,a4 as U,N as re,O as J,R as W,z as ee,L as te,e as A,a5 as Y,bd as be,a1 as $e}from"./index.3e3525c7.js";import{Q as X}from"./QTab.271bd72b.js";import{Q as we}from"./QTabs.0c085374.js";import{Q as Z}from"./QTabPanel.6e8699ee.js";import{Q as Pe}from"./QTabPanels.6c278606.js";import{Q as ae}from"./QSpinnerDots.23c6d50e.js";import{Q as z}from"./QBadge.448574b7.js";import{Q as le}from"./QScrollArea.0c047c48.js";import{u as j}from"./warehouse.8f9b014b.js";import{u as B}from"./premix.f76613fd.js";import{q as se}from"./date.fb4f8557.js";import{u as oe}from"./use-quasar.0fcaf3a0.js";import{a as _}from"./QItemLabel.72cc67ca.js";import{Q as V,a as f}from"./QItem.5243002e.js";import{Q as M}from"./QList.9ab35285.js";import{C as ce}from"./ClosePopup.f4285c7c.js";import{u as ne}from"./use-dialog-plugin-component.82f46a00.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as ue,a as De}from"./QTable.9e7e0601.js";import"./QResizeObserver.8271a0f5.js";import"./use-virtual-scroll.65859bd0.js";import"./use-panel.64075e7e.js";import"./touch.9135741d.js";import"./selection.8fec0821.js";import"./use-render-cache.3aae9b27.js";import"./QScrollObserver.2afba7b4.js";import"./TouchPan.8dc3a27e.js";import"./axios.d6309847.js";import"./QVirtualScroll.47c86334.js";import"./QSelect.f94a5cc6.js";import"./QChip.e1fd42ad.js";import"./QMenu.397baca8.js";import"./position-engine.291b8a8d.js";const me=o=>(J("data-v-22b982f1"),o=o(),W(),o),ke={class:"row justify-between"},Ce={class:"text-h6"},qe=me(()=>s("div",{class:"text-h6",align:"center"},"Premix",-1)),Ne=me(()=>s("div",{class:"text-h6"},"Decline Report",-1)),Re={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){const{dialogRef:R,onDialogHide:I,onDialogOK:w,onDialogCancel:q}=ne(),p=j(),S=T(()=>p.user);console.log("userdata",S.value);const b=S.value.data.employee_id,P=B(),g=o;console.log("report",g.report);const $=Q(!1),D=Q(""),x=Q(!1),y=()=>{x.value=!0},a=r=>{const u=N=>N?N.charAt(0).toUpperCase()+N.slice(1).toLowerCase():"",l=r.firstname?u(r.firstname):"No Firstname",m=r.middlename?u(r.middlename).charAt(0)+".":"",h=r.lastname?u(r.lastname):"No Lastname";return`${l} ${m} ${h}`},d=async()=>{try{const r={id:g.report.id,request_premixes_id:g.report.id,branch_premix_id:g.report.branch_premix_id,employee_id:b,status:g.report.status,quantity:g.report.quantity,warehouse_id:g.report.warehouse_id,notes:"Confirmed Premix"},u=await P.confirmPremix(r);console.log("Report confirmedss:",u),re.create({type:"positive",message:"Report confirmed successfully"}),$.value=!1}catch(r){console.error(r)}},n=async()=>{const r={id:g.report.id,request_premixes_id:g.report.id,branch_premix_id:g.report.branch_premix_id,employee_id:b,status:"decline",quantity:g.report.quantity,warehouse_id:g.report.warehouse_id,notes:D.value};await P.declinePremix(r),x.value=!1};return(r,u)=>(v(),C(U,null,[e(G,{ref_key:"dialogRef",ref:R,modelValue:$.value,"onUpdate:modelValue":u[1]||(u[1]=l=>$.value=l),onHide:H(I)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(k,null,{default:t(()=>[s("div",ke,[s("div",Ce,i(o.report.name),1),e(L,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:u[0]||(u[0]=l=>$.value=!1)})])]),_:1}),e(k,null,{default:t(()=>[s("div",null,"Baker: "+i(a(o.report.employee)),1),s("div",null," Branch: "+i(o.report.branch_premix.branch_recipe.branch.name),1),s("div",null,[c(" Status: "),e(z,{color:"warning",outlined:""},{default:t(()=>[c(i(o.report.status),1)]),_:1})])]),_:1}),e(k,null,{default:t(()=>[qe]),_:1}),e(k,null,{default:t(()=>[e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Premix Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[c(i(o.report.name),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[c(i(o.report.quantity),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(k,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(L,{color:"negative",label:"Decline",class:"action-btn",onClick:y}),e(L,{color:"positive",label:"Confirm",class:"action-btn",onClick:d})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]),e(G,{modelValue:x.value,"onUpdate:modelValue":u[3]||(u[3]=l=>x.value=l)},{default:t(()=>[e(F,null,{default:t(()=>[e(k,null,{default:t(()=>[Ne]),_:1}),e(k,null,{default:t(()=>[e(xe,{modelValue:D.value,"onUpdate:modelValue":u[2]||(u[2]=l=>D.value=l),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[l=>!!l||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(ye,{align:"right"},{default:t(()=>[ie(e(L,{flat:"",label:"Cancel",color:"primary"},null,512),[[ce]]),e(L,{flat:"",label:"Confirm",color:"negative",onClick:n})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Se=O(Re,[["__scopeId","data-v-22b982f1"]]);const Qe=o=>(J("data-v-51fc51c3"),o=o(),W(),o),Ie={key:0,class:"spinner-wrapper"},Ve={key:1},Ae={key:0,class:"data-error"},Te=Qe(()=>s("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Le={class:"q-gutter-md q-ma-md"},Fe={class:"text-h6"},Ue={class:"row justify-between"},ze={class:"text-subtitle1"},Me={class:"text-subtitle1"},Ye={__name:"PendingPage",setup(o){const R=j(),I=T(()=>R.user);console.log("userdata",I.value);const w=B(),q=T(()=>w.pendingPremixData),p=I.value.device.reference_id;console.log("warehouseId",p);const S=Q("pending"),b=Q(!0),P=Q(!1),g=oe();ee(async()=>{p&&await x()});const $=a=>se.formatDate(a,"MMM DD, YYYY || hh:mm A"),D=a=>{const d=l=>l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"",n=a.firstname?d(a.firstname):"No Firstname",r=a.middlename?d(a.middlename).charAt(0)+".":"",u=a.lastname?d(a.lastname):"No Lastname";return`${n} ${r} ${u}`},x=async()=>{try{b.value=!0,await w.fetchPendingPremix(p,S.value),q.value.length||(P.value=!0)}catch{P.value=!0}finally{b.value=!1}},y=a=>{g.dialog({component:Se,componentProps:{report:a}})};return(a,d)=>b.value?(v(),C("div",Ie,[e(ae,{size:"50px",color:"primary"})])):(v(),C("div",Ve,[q.value.length===0?(v(),C("div",Ae,[e(te,{name:"warning",color:"warning",size:"4em"}),Te])):(v(),A(le,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[s("div",Le,[(v(!0),C(U,null,Y(q.value,(n,r)=>(v(),A(F,{key:r,onClick:u=>y(n)},{default:t(()=>[e(k,{class:"q-gutter-sm"},{default:t(()=>[s("div",Fe,i(n.name),1),s("div",Ue,[s("div",ze,i($(n.created_at)),1),s("div",Me,i(n.branch_premix.branch_recipe.branch.name)+" - "+i(D(n.employee)),1),s("div",null,[e(z,{color:"warning",outlined:""},{default:t(()=>[c(" Pending ")]),_:1})])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var je=O(Ye,[["__scopeId","data-v-51fc51c3"]]);const Be={class:"row justify-between"},He={class:"text-h6"},Ke=s("div",{class:"text-h6",align:"center"},"Premix",-1),Oe=s("div",{class:"text-h6",align:"center"},"Ingredients List",-1),Ee={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){var n,r,u;const{dialogRef:R,onDialogHide:I,onDialogOK:w,onDialogCancel:q}=ne(),p=Q(!1),S=j(),b=T(()=>S.user);console.log("userdata",b.value);const P=b.value.data.employee_id,g=B(),$=o,D=l=>{const m=Number(l);return isNaN(m)?"":(m%1===0,m.toString())},x=(l,m)=>{if(m==="Pcs")return`${l} pcs`;if(m==="Grams"){if(l>=1e3){let h=l/1e3;return`${h%1===0?h.toString():h.toString().replace(/^0+/,"")} kgs`}return`${l} g`}return`${l} ${m}`},y=((u=(r=(n=$.report)==null?void 0:n.branch_premix)==null?void 0:r.branch_recipe)==null?void 0:u.ingredient_groups)||"Undefined";console.log("ingrdientsData",y),console.log("report to proceed",$.report);const a=l=>{const m=E=>E?E.charAt(0).toUpperCase()+E.slice(1).toLowerCase():"",h=l.firstname?m(l.firstname):"No Firstname",N=l.middlename?m(l.middlename).charAt(0)+".":"",K=l.lastname?m(l.lastname):"No Lastname";return`${h} ${N} ${K}`},d=async()=>{try{const l={id:$.report.id,request_premixes_id:$.report.id,branch_premix_id:$.report.branch_premix_id,employee_id:P,status:"process",quantity:$.report.quantity,warehouse_id:$.report.warehouse_id,notes:"Process Premix"},m=await g.processPremix(l);console.log("Report Process:",m),re.create({type:"positive",message:"Premix proceed to process successfully"}),p.value=!1}catch(l){console.error(l)}};return(l,m)=>(v(),A(G,{ref_key:"dialogRef",ref:R,modelValue:p.value,"onUpdate:modelValue":m[1]||(m[1]=h=>p.value=h),onHide:H(I)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(k,null,{default:t(()=>[s("div",Be,[s("div",He,i(o.report.name),1),e(L,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:m[0]||(m[0]=h=>p.value=!1)})])]),_:1}),e(k,null,{default:t(()=>[s("div",null,"Baker: "+i(a(o.report.employee)),1),s("div",null," Branch: "+i(o.report.branch_premix.branch_recipe.branch.name),1),s("div",null,[c(" Status: "),e(z,{color:"green",outlined:""},{default:t(()=>[c(i(o.report.status),1)]),_:1})])]),_:1}),e(k,{class:"q-gutter-y-md"},{default:t(()=>[s("div",null,[Ke,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Premix Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[c(i(o.report.name),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[c(i(D(o.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),s("div",null,[Oe,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c(" Code")]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c(" Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Quantity")]),_:1})]),_:1})]),_:1}),(v(!0),C(U,null,Y(H(y),(h,N)=>(v(),A(V,{key:N},{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[c(i(h.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[c(i(h.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(f,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[c(i(x(h.quantity*o.report.quantity,h.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(k,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ie(e(L,{flat:"",label:"Cancel",color:"negative"},null,512),[[ce]]),e(L,{color:"primary",label:"Process",class:"action-btn",onClick:d})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const _e=o=>(J("data-v-33f33a0e"),o=o(),W(),o),Ge={key:0,class:"spinner-wrapper"},Je={key:1},We={key:0,class:"data-error"},Xe=_e(()=>s("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ze={class:"q-gutter-md q-ma-md"},et={class:"row justify-between"},tt={class:"text-h6"},at={class:"row justify-between"},st={class:"text-subtitle1"},lt={class:"text-subtitle1"},ot={class:"row q-gutter-x-md"},nt=_e(()=>s("div",{class:"text-subtitle1"},"Confirmed By:",-1)),rt={class:"text-overline text-weight-bold"},it={__name:"ConfirmPage",setup(o){const R=j(),w=T(()=>R.user).value.device.reference_id;console.log("warehouseId",w);const q=B(),p=T(()=>q.confirmPremixData);console.log("confirmedPremixData",p.value);const S=Q("confirmed"),b=Q(!0),P=Q(!1),g=oe();ee(async()=>{w&&await x()});const $=a=>se.formatDate(a,"MMM DD, YYYY || hh:mm A"),D=a=>{const d=l=>l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"",n=a.firstname?d(a.firstname):"No Firstname",r=a.middlename?d(a.middlename).charAt(0)+".":"",u=a.lastname?d(a.lastname):"No Lastname";return`${n} ${r} ${u}`},x=async()=>{try{b.value=!0,await q.fetchConfirmPremix(w,S.value),p.value.length||(P.value=!0)}catch{P.value=!0}finally{b.value=!1}},y=a=>{g.dialog({component:Ee,componentProps:{report:a}})};return(a,d)=>b.value?(v(),C("div",Ge,[e(ae,{size:"50px",color:"primary"})])):(v(),C("div",Je,[p.value.length===0?(v(),C("div",We,[e(te,{name:"warning",color:"warning",size:"4em"}),Xe])):(v(),A(le,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[s("div",Ze,[(v(!0),C(U,null,Y(p.value,(n,r)=>(v(),A(F,{key:r,onClick:u=>y(n)},{default:t(()=>[e(k,{class:"q-gutter-sm"},{default:t(()=>[s("div",et,[s("div",tt,i(n.name),1),s("div",null,[e(z,{color:"green",outlined:""},{default:t(()=>[c(i(n.status),1)]),_:2},1024)])]),s("div",at,[s("div",st,i($(n.created_at)),1),s("div",lt,i(n.branch_premix.branch_recipe.branch.name)+" - "+i(D(n.employee)),1),s("div",ot,[nt,s("div",rt,i(D(n.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var ct=O(it,[["__scopeId","data-v-33f33a0e"]]);const dt={class:"row justify-between"},ut={class:"text-h6"},mt=s("div",{class:"text-h6",align:"center"},"Premix",-1),_t=s("div",{class:"text-h6",align:"center"},"Ingredients List",-1),ft={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){var D,x,y;const{dialogRef:R,onDialogHide:I,onDialogOK:w,onDialogCancel:q}=ne(),p=Q(!1),S=o,b=a=>{const d=l=>l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"",n=a.firstname?d(a.firstname):"No Firstname",r=a.middlename?d(a.middlename).charAt(0)+".":"",u=a.lastname?d(a.lastname):"No Lastname";return`${n} ${r} ${u}`},P=a=>{const d=Number(a);return isNaN(d)?"":(d%1===0,d.toString())},g=(a,d)=>{if(d==="Pcs")return`${a} pcs`;if(d==="Grams"){if(a>=1e3){let n=a/1e3;return`${n%1===0?n.toString():n.toString().replace(/^0+/,"")} kgs`}return`${a} g`}return`${a} ${d}`},$=((y=(x=(D=S.report)==null?void 0:D.branch_premix)==null?void 0:x.branch_recipe)==null?void 0:y.ingredient_groups)||"Undefined";return console.log("ingrdientsData",$),(a,d)=>(v(),C("div",null,[e(G,{ref_key:"dialogRef",ref:R,modelValue:p.value,"onUpdate:modelValue":d[1]||(d[1]=n=>p.value=n),onHide:H(I)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(k,null,{default:t(()=>[s("div",dt,[s("div",ut,i(o.report.name),1),e(L,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=n=>p.value=!1)})])]),_:1}),e(k,null,{default:t(()=>[s("div",null,"Baker: "+i(b(o.report.employee)),1),s("div",null," Branch: "+i(o.report.branch_premix.branch_recipe.branch.name),1),s("div",null,[c(" Status: "),e(z,{color:"red-6",outlined:""},{default:t(()=>[c(i(o.report.status),1)]),_:1})])]),_:1}),e(k,{class:"q-gutter-y-md"},{default:t(()=>[s("div",null,[mt,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Premix Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[c(i(o.report.name),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[c(i(P(o.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),s("div",null,[_t,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c(" Code")]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c(" Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Quantity")]),_:1})]),_:1})]),_:1}),(v(!0),C(U,null,Y(H($),(n,r)=>(v(),A(V,{key:r},{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[c(i(n.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[c(i(n.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(f,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[c(i(g(n.quantity*o.report.quantity,n.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])]))}};const fe=o=>(J("data-v-4eb3adc2"),o=o(),W(),o),pt={key:0,class:"spinner-wrapper"},vt={key:1},ht={key:0,class:"data-error"},gt=fe(()=>s("div",{class:"q-ml-sm text-h6"},"No data available",-1)),xt={class:"q-gutter-md q-ma-md"},yt={class:"row justify-between"},bt={class:"text-h6"},$t={class:"row justify-between"},wt={class:"text-subtitle1"},Pt={class:"text-subtitle1"},Dt={class:"row q-gutter-x-md"},kt=fe(()=>s("div",{class:"text-subtitle1"},"Declined By:",-1)),Ct={class:"text-overline text-weight-bold"},qt={__name:"DeclinePage",setup(o){const R=j(),w=T(()=>R.user).value.device.reference_id;console.log("warehouseId",w);const q=B(),p=T(()=>q.declinePremixData);console.log("declinedPremixData",p.value);const S=Q("declined"),b=Q(!0),P=Q(!1),g=oe();ee(async()=>{w&&await x()});const $=a=>se.formatDate(a,"MMM DD, YYYY || hh:mm A"),D=a=>{const d=l=>l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"",n=a.firstname?d(a.firstname):"No Firstname",r=a.middlename?d(a.middlename).charAt(0)+".":"",u=a.lastname?d(a.lastname):"No Lastname";return`${n} ${r} ${u}`},x=async()=>{try{b.value=!0,await q.fetchDeclinePremix(w,S.value),p.value.length||(P.value=!0)}catch{P.value=!0}finally{b.value=!1}},y=a=>{g.dialog({component:ft,componentProps:{report:a}})};return(a,d)=>b.value?(v(),C("div",pt,[e(ae,{size:"50px",color:"primary"})])):(v(),C("div",vt,[p.value.length===0?(v(),C("div",ht,[e(te,{name:"warning",color:"warning",size:"4em"}),gt])):(v(),A(le,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[s("div",xt,[(v(!0),C(U,null,Y(p.value,(n,r)=>(v(),A(F,{key:r,onClick:u=>y(n)},{default:t(()=>[e(k,{class:"q-gutter-sm"},{default:t(()=>[s("div",yt,[s("div",bt,i(n.name),1),s("div",null,[e(z,{color:"red-6",outlined:""},{default:t(()=>[c(i(n.status),1)]),_:2},1024)])]),s("div",$t,[s("div",wt,i($(n.created_at)),1),s("div",Pt,i(n.branch_premix.branch_recipe.branch.name)+" - "+i(D(n.employee)),1),s("div",Dt,[kt,s("div",Ct,i(D(n.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Nt=O(qt,[["__scopeId","data-v-4eb3adc2"]]);const Rt={class:"row justify-between"},St={class:"text-h6"},Qt=s("div",{class:"text-h6",align:"center"},"Premix",-1),It=s("div",{class:"text-h6",align:"center"},"Ingredients List",-1),Vt={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){var r,u,l;const{dialogRef:R,onDialogHide:I,onDialogOK:w,onDialogCancel:q}=ne(),p=j(),S=T(()=>p.user);console.log("userdata",S.value);const b=S.value.data.employee_id,P=B(),g=o;console.log("report",g.report);const $=Q(!1),D=((l=(u=(r=g.report)==null?void 0:r.branch_premix)==null?void 0:u.branch_recipe)==null?void 0:l.ingredient_groups)||"Undefined";console.log("ingrdientsData",D);const x=m=>{const h=de=>de?de.charAt(0).toUpperCase()+de.slice(1).toLowerCase():"",N=m.firstname?h(m.firstname):"No Firstname",K=m.middlename?h(m.middlename).charAt(0)+".":"",E=m.lastname?h(m.lastname):"No Lastname";return`${N} ${K} ${E}`},y=m=>{const h=Number(m);return isNaN(h)?"":(h%1===0,h.toString())},a=(m,h)=>{if(h==="Pcs")return`${m} pcs`;if(h==="Grams"){if(m>=1e3){let N=m/1e3;return`${N%1===0?N.toString():N.toString().replace(/^0+/,"")} kgs`}return`${m} g`}return`${m} ${h}`},d=T(()=>D.map(m=>{const h=parseFloat(m.quantity)*parseFloat(g.report.quantity);return{...m,totalQuantity:h,formattedQuantity:a(h,m.ingredient.unit)}}));console.log("computedIngredients",d.value);const n=async()=>{try{const m={id:g.report.id,request_premixes_id:g.report.id,branch_premix_id:g.report.branch_premix_id,employee_id:b,status:"completed",quantity:g.report.quantity,warehouse_id:g.report.warehouse_id,notes:"Completed Premix",ingredients:d.value.map(N=>({ingredient_id:N.ingredient.id,quantity:N.totalQuantity,unit:N.ingredient.unit}))},h=await P.completedPremix(m);console.log("Report Process:",h),re.create({type:"positive",message:"Premix completed to process successfully"}),$.value=!1}catch(m){console.error(m),re.create({type:"negative",message:"An error occurred while processing the premix."})}};return(m,h)=>(v(),A(G,{ref_key:"dialogRef",ref:R,modelValue:$.value,"onUpdate:modelValue":h[1]||(h[1]=N=>$.value=N),onHide:H(I)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(k,null,{default:t(()=>[s("div",Rt,[s("div",St,i(o.report.name),1),e(L,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:h[0]||(h[0]=N=>$.value=!1)})])]),_:1}),e(k,null,{default:t(()=>[s("div",null,"Baker: "+i(x(o.report.employee)),1),s("div",null," Branch: "+i(o.report.branch_premix.branch_recipe.branch.name),1),s("div",null,[c(" Status: "),e(z,{color:"primary",outlined:""},{default:t(()=>[c(i(o.report.status),1)]),_:1})])]),_:1}),e(k,null,{default:t(()=>[Qt]),_:1}),e(k,{class:"q-gutter-y-md"},{default:t(()=>[s("div",null,[e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Premix Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[c(i(o.report.name),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[c(i(y(o.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),s("div",null,[s("div",null,[It,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c(" Code")]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c(" Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Quantity")]),_:1})]),_:1})]),_:1}),(v(!0),C(U,null,Y(d.value,(N,K)=>(v(),A(V,{key:K},{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[c(i(N.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[c(i(N.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(f,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[c(i(a(N.quantity*g.report.quantity,N.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1}),e(k,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ie(e(L,{flat:"",label:"Cancel",color:"primary"},null,512),[[ce]]),e(L,{color:"cyan-7",label:"Completed",class:"action-btn",onClick:n})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const pe=o=>(J("data-v-85281cb0"),o=o(),W(),o),At={key:0,class:"spinner-wrapper"},Tt={key:1},Lt={key:0,class:"data-error"},Ft=pe(()=>s("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ut={class:"q-gutter-md q-ma-md"},zt={class:"row justify-between"},Mt={class:"text-h6"},Yt={class:"row justify-between"},jt={class:"text-subtitle1"},Bt={class:"text-subtitle1"},Ht={class:"row q-gutter-x-md"},Kt=pe(()=>s("div",{class:"text-subtitle1"},"Process By:",-1)),Ot={class:"text-overline text-weight-bold"},Et={__name:"ProcessPage",setup(o){const R=j(),w=T(()=>R.user).value.device.reference_id;console.log("warehouseId",w);const q=B(),p=T(()=>q.processPremixData);console.log("processPremixData",p.value);const S=Q("process"),b=Q(!0),P=Q(!1),g=oe();ee(async()=>{w&&await x()});const $=a=>se.formatDate(a,"MMM DD, YYYY || hh:mm A"),D=a=>{const d=l=>l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"",n=a.firstname?d(a.firstname):"No Firstname",r=a.middlename?d(a.middlename).charAt(0)+".":"",u=a.lastname?d(a.lastname):"No Lastname";return`${n} ${r} ${u}`},x=async()=>{try{b.value=!0,await q.fetchProcessPremix(w,S.value),p.value.length||(P.value=!0)}catch{P.value=!0}finally{b.value=!1}},y=a=>{g.dialog({component:Vt,componentProps:{report:a}})};return(a,d)=>b.value?(v(),C("div",At,[e(ae,{size:"50px",color:"primary"})])):(v(),C("div",Tt,[p.value.length===0?(v(),C("div",Lt,[e(te,{name:"warning",color:"warning",size:"4em"}),Ft])):(v(),A(le,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[s("div",Ut,[(v(!0),C(U,null,Y(p.value,(n,r)=>(v(),A(F,{key:r,onClick:u=>y(n)},{default:t(()=>[e(k,{class:"q-gutter-sm"},{default:t(()=>[s("div",zt,[s("div",Mt,i(n.name),1),s("div",null,[e(z,{color:"primary",outlined:""},{default:t(()=>[c(i(n.status),1)]),_:2},1024)])]),s("div",Yt,[s("div",jt,i($(n.created_at)),1),s("div",Bt,i(n.branch_premix.branch_recipe.branch.name)+" - "+i(D(n.employee)),1),s("div",Ht,[Kt,s("div",Ot,i(D(n.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Gt=O(Et,[["__scopeId","data-v-85281cb0"]]);const Jt={class:"row justify-between"},Wt={class:"text-h6"},Xt=s("div",{class:"text-h6",align:"center"},"Premix",-1),Zt=s("div",{class:"text-h6",align:"center"},"Ingredients List",-1),ea={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){var n,r,u;const{dialogRef:R,onDialogHide:I,onDialogOK:w,onDialogCancel:q}=ne(),p=Q(!1),S=j(),b=T(()=>S.user);console.log("userdata",b.value);const P=b.value.data.employee_id,g=B(),$=o,D=l=>{const m=Number(l);return isNaN(m)?"":(m%1===0,m.toString())},x=(l,m)=>{if(m==="Pcs")return`${l} pcs`;if(m==="Grams"){if(l>=1e3){let h=l/1e3;return`${h%1===0?h.toString():h.toString().replace(/^0+/,"")} kgs`}return`${l} g`}return`${l} ${m}`},y=((u=(r=(n=$.report)==null?void 0:n.branch_premix)==null?void 0:r.branch_recipe)==null?void 0:u.ingredient_groups)||"Undefined";console.log("ingrdientsData",y),console.log("report to proceed",$.report);const a=l=>{const m=E=>E?E.charAt(0).toUpperCase()+E.slice(1).toLowerCase():"",h=l.firstname?m(l.firstname):"No Firstname",N=l.middlename?m(l.middlename).charAt(0)+".":"",K=l.lastname?m(l.lastname):"No Lastname";return`${h} ${N} ${K}`},d=async()=>{try{const l={id:$.report.id,request_premixes_id:$.report.id,branch_premix_id:$.report.branch_premix_id,employee_id:P,status:"to deliver",quantity:$.report.quantity,warehouse_id:$.report.warehouse_id,notes:"To-Deliver Premix"},m=await g.toDeliverPremix(l);console.log("Report To Deliver:",m),re.create({type:"positive",message:"Premix To Deliver to process successfully"}),p.value=!1}catch(l){console.error(l)}};return(l,m)=>(v(),C("div",null,[e(G,{ref_key:"dialogRef",ref:R,modelValue:p.value,"onUpdate:modelValue":m[1]||(m[1]=h=>p.value=h),onHide:H(I)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(k,null,{default:t(()=>[s("div",Jt,[s("div",Wt,i(o.report.name),1),e(L,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:m[0]||(m[0]=h=>p.value=!1)})])]),_:1}),e(k,null,{default:t(()=>[s("div",null,"Baker: "+i(a(o.report.employee)),1),s("div",null," Branch: "+i(o.report.branch_premix.branch_recipe.branch.name),1),s("div",null,[c(" Status: "),e(z,{color:"black",outlined:""},{default:t(()=>[c(i(o.report.status),1)]),_:1})])]),_:1}),e(k,{class:"q-gutter-y-md"},{default:t(()=>[s("div",null,[Xt,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Premix Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[c(i(o.report.name),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[c(i(D(o.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),s("div",null,[Zt,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c(" Code")]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c(" Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Quantity")]),_:1})]),_:1})]),_:1}),(v(!0),C(U,null,Y(H(y),(h,N)=>(v(),A(V,{key:N},{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[c(i(h.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[c(i(h.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(f,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[c(i(x(h.quantity*o.report.quantity,h.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(k,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ie(e(L,{flat:"",label:"Cancel",color:"negative"},null,512),[[ce]]),e(L,{color:"dark",label:"TO-Deliver",class:"action-btn",onClick:d})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])]))}};const ve=o=>(J("data-v-190aa396"),o=o(),W(),o),ta={key:0,class:"spinner-wrapper"},aa={key:1},sa={key:0,class:"data-error"},la=ve(()=>s("div",{class:"q-ml-sm text-h6"},"No data available",-1)),oa={class:"q-gutter-md q-ma-md"},na={class:"row justify-between"},ra={class:"text-h6"},ia={class:"row justify-between"},ca={class:"text-subtitle1"},da={class:"text-subtitle1"},ua={class:"row q-gutter-x-md"},ma=ve(()=>s("div",{class:"text-subtitle1"},"Completed By:",-1)),_a={class:"text-overline text-weight-bold"},fa={__name:"CompletedPage",setup(o){const R=j(),w=T(()=>R.user).value.device.reference_id;console.log("warehouseId",w);const q=B(),p=T(()=>q.completedPremixData);console.log("completedPremixData",p.value);const S=Q("completed"),b=Q(!0),P=Q(!1),g=oe();ee(async()=>{w&&await x()});const $=a=>se.formatDate(a,"MMM DD, YYYY || hh:mm A"),D=a=>{const d=l=>l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"",n=a.firstname?d(a.firstname):"No Firstname",r=a.middlename?d(a.middlename).charAt(0)+".":"",u=a.lastname?d(a.lastname):"No Lastname";return`${n} ${r} ${u}`},x=async()=>{try{b.value=!0,await q.fetchCompletedPremix(w,S.value),p.value.length||(P.value=!0)}catch{P.value=!0}finally{b.value=!1}},y=a=>{g.dialog({component:ea,componentProps:{report:a}})};return(a,d)=>b.value?(v(),C("div",ta,[e(ae,{size:"50px",color:"primary"})])):(v(),C("div",aa,[p.value.length===0?(v(),C("div",sa,[e(te,{name:"warning",color:"warning",size:"4em"}),la])):(v(),A(le,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[s("div",oa,[(v(!0),C(U,null,Y(p.value,(n,r)=>(v(),A(F,{key:r,onClick:u=>y(n)},{default:t(()=>[e(k,{class:"q-gutter-sm"},{default:t(()=>[s("div",na,[s("div",ra,i(n.name),1),s("div",null,[e(z,{color:"dark",outlined:""},{default:t(()=>[c(i(n.status),1)]),_:2},1024)])]),s("div",ia,[s("div",ca,i($(n.created_at)),1),s("div",da,i(n.branch_premix.branch_recipe.branch.name)+" - "+i(D(n.employee)),1),s("div",ua,[ma,s("div",_a,i(D(n.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var pa=O(fa,[["__scopeId","data-v-190aa396"]]);const va={class:"row justify-between"},ha={class:"text-h6"},ga=s("div",{class:"text-h6",align:"center"},"Premix",-1),xa=s("div",{class:"text-h6",align:"center"},"Ingredients List",-1),ya={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){var a,d,n;const{dialogRef:R,onDialogHide:I}=ne(),w=Q(!1),q=j(),p=T(()=>q.user);console.log("userdata",p.value);const S=p.value.data.employee_id,b=B(),P=o;console.log("props report",P.report);const g=r=>{const u=Number(r);return isNaN(u)?"":(u%1===0,u.toString())},$=(r,u)=>{if(u==="Pcs")return`${r} pcs`;if(u==="Grams"){if(r>=1e3){let l=r/1e3;return`${l%1===0?l.toString():l.toString().replace(/^0+/,"")} kgs`}return`${r} g`}return`${r} ${u}`},D=((n=(d=(a=P.report)==null?void 0:a.branch_premix)==null?void 0:d.branch_recipe)==null?void 0:n.ingredient_groups)||"Undefined";console.log("ingrdientsData",D),console.log("report to proceed",P.report);const x=r=>{const u=N=>N?N.charAt(0).toUpperCase()+N.slice(1).toLowerCase():"",l=r.firstname?u(r.firstname):"No Firstname",m=r.middlename?u(r.middlename).charAt(0)+".":"",h=r.lastname?u(r.lastname):"No Lastname";return`${l} ${m} ${h}`},y=async()=>{try{const r={id:P.report.id,request_premixes_id:P.report.id,branch_premix_id:P.report.branch_premix_id,employee_id:S,status:"to receive",quantity:P.report.quantity,warehouse_id:P.report.warehouse_id,notes:"To Receive Premix"},u=await b.toReceivePremix(r);console.log("Report Process:",u),re.create({type:"positive",message:"Premix to receive to process successfully"}),w.value=!1}catch(r){console.error(r)}};return(r,u)=>(v(),A(G,{ref_key:"dialogRef",ref:R,modelValue:w.value,"onUpdate:modelValue":u[1]||(u[1]=l=>w.value=l),onHide:H(I)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(k,null,{default:t(()=>[s("div",va,[s("div",ha,i(o.report.name),1),e(L,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:u[0]||(u[0]=l=>w.value=!1)})])]),_:1}),e(k,null,{default:t(()=>[s("div",null,"Baker: "+i(x(o.report.employee)),1),s("div",null," Branch: "+i(o.report.branch_premix.branch_recipe.branch.name),1),s("div",null,[c(" Status: "),e(z,{color:"brown-9",outlined:""},{default:t(()=>[c(i(o.report.status),1)]),_:1})])]),_:1}),e(k,{class:"q-gutter-y-md"},{default:t(()=>[s("div",null,[ga,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Premix Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[c(i(o.report.name),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[c(i(g(o.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),s("div",null,[xa,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c(" Code")]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c(" Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Quantity")]),_:1})]),_:1})]),_:1}),(v(!0),C(U,null,Y(H(D),(l,m)=>(v(),A(V,{key:m},{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[c(i(l.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[c(i(l.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(f,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[c(i($(l.quantity*o.report.quantity,l.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(k,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ie(e(L,{flat:"",label:"Cancel",color:"negative"},null,512),[[ce]]),e(L,{color:"brown-9",label:"TO Receive",class:"action-btn",onClick:y})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const he=o=>(J("data-v-7c45e548"),o=o(),W(),o),ba={key:0,class:"spinner-wrapper"},$a={key:1},wa={key:0,class:"data-error"},Pa=he(()=>s("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Da={class:"q-gutter-md q-ma-md"},ka={class:"row justify-between"},Ca={class:"text-h6"},qa={class:"row justify-between"},Na={class:"text-subtitle1"},Ra={class:"text-subtitle1"},Sa={class:"row q-gutter-x-md"},Qa=he(()=>s("div",{class:"text-subtitle1"},"Completed By:",-1)),Ia={class:"text-overline text-weight-bold"},Va={__name:"ToDeliverPage",setup(o){const R=j(),w=T(()=>R.user).value.device.reference_id;console.log("warehouseIssd",w);const q=B(),p=T(()=>q.toDeliverPremixData);console.log("toDeliverPremixData",p.value);const S=Q("to deliver"),b=Q(!0),P=Q(!1),g=oe();ee(async()=>{w&&await x()});const $=a=>se.formatDate(a,"MMM DD, YYYY || hh:mm A"),D=a=>{const d=l=>l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"",n=a.firstname?d(a.firstname):"No Firstname",r=a.middlename?d(a.middlename).charAt(0)+".":"",u=a.lastname?d(a.lastname):"No Lastname";return`${n} ${r} ${u}`},x=async()=>{try{b.value=!0,await q.fetchToDeliverPremix(w,S.value),p.value.length||(P.value=!0)}catch{P.value=!0}finally{b.value=!1}},y=a=>{g.dialog({component:ya,componentProps:{report:a}})};return(a,d)=>b.value?(v(),C("div",ba,[e(ae,{size:"50px",color:"primary"})])):(v(),C("div",$a,[p.value.length===0?(v(),C("div",wa,[e(te,{name:"warning",color:"warning",size:"4em"}),Pa])):(v(),A(le,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[s("div",Da,[(v(!0),C(U,null,Y(p.value,(n,r)=>(v(),A(F,{key:r,onClick:u=>y(n)},{default:t(()=>[e(k,{class:"q-gutter-sm"},{default:t(()=>[s("div",ka,[s("div",Ca,i(n.name),1),s("div",null,[e(z,{color:"brown-9",outlined:""},{default:t(()=>[c(i(n.status),1)]),_:2},1024)])]),s("div",qa,[s("div",Na,i($(n.created_at)),1),s("div",Ra,i(n.branch_premix.branch_recipe.branch.name)+" - "+i(D(n.employee)),1),s("div",Sa,[Qa,s("div",Ia,i(D(n.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Aa=O(Va,[["__scopeId","data-v-7c45e548"]]);const Ta={class:"row justify-between"},La={class:"text-h6"},Fa=s("div",{class:"text-h6",align:"center"},"Premix",-1),Ua=s("div",{class:"text-h6",align:"center"},"Ingredients List",-1),za={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){var D,x,y;const{dialogRef:R,onDialogHide:I}=ne(),w=Q(!1),q=j(),p=T(()=>q.user);console.log("userdata",p.value),p.value.data.employee_id,B();const S=o,b=a=>{const d=Number(a);return isNaN(d)?"":(d%1===0,d.toString())},P=(a,d)=>{if(d==="Pcs")return`${a} pcs`;if(d==="Grams"){if(a>=1e3){let n=a/1e3;return`${n%1===0?n.toString():n.toString().replace(/^0+/,"")} kgs`}return`${a} g`}return`${a} ${d}`},g=((y=(x=(D=S.report)==null?void 0:D.branch_premix)==null?void 0:x.branch_recipe)==null?void 0:y.ingredient_groups)||"Undefined";console.log("ingrdientsData",g),console.log("report to proceed",S.report);const $=a=>{const d=l=>l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"",n=a.firstname?d(a.firstname):"No Firstname",r=a.middlename?d(a.middlename).charAt(0)+".":"",u=a.lastname?d(a.lastname):"No Lastname";return`${n} ${r} ${u}`};return(a,d)=>(v(),A(G,{ref_key:"dialogRef",ref:R,modelValue:w.value,"onUpdate:modelValue":d[1]||(d[1]=n=>w.value=n),onHide:H(I)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(k,null,{default:t(()=>[s("div",Ta,[s("div",La,i(o.report.name),1),e(L,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=n=>w.value=!1)})])]),_:1}),e(k,null,{default:t(()=>[s("div",null,"Baker: "+i($(o.report.employee)),1),s("div",null," Branch: "+i(o.report.branch_premix.branch_recipe.branch.name),1),s("div",null,[c(" Status: "),e(z,{color:"amber-10",outlined:""},{default:t(()=>[c(i(o.report.status),1)]),_:1})])]),_:1}),e(k,{class:"q-gutter-y-md"},{default:t(()=>[s("div",null,[Fa,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Premix Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[c(i(o.report.name),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[c(i(b(o.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),s("div",null,[Ua,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c(" Code")]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c(" Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Quantity")]),_:1})]),_:1})]),_:1}),(v(!0),C(U,null,Y(H(g),(n,r)=>(v(),A(V,{key:r},{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[c(i(n.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[c(i(n.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(f,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[c(i(P(n.quantity*o.report.quantity,n.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const ge=o=>(J("data-v-73bc9a06"),o=o(),W(),o),Ma={key:0,class:"spinner-wrapper"},Ya={key:1},ja={key:0,class:"data-error"},Ba=ge(()=>s("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ha={class:"q-gutter-md q-ma-md"},Ka={class:"row justify-between"},Oa={class:"text-h6"},Ea={class:"row justify-between"},Ga={class:"text-subtitle1"},Ja={class:"text-subtitle1"},Wa={class:"row q-gutter-x-md"},Xa=ge(()=>s("div",{class:"text-subtitle1"},"Deliver By:",-1)),Za={class:"text-overline text-weight-bold"},es={__name:"ToReceivePage",setup(o){const R=j(),w=T(()=>R.user).value.device.reference_id;console.log("warehouseId",w);const q=B(),p=T(()=>q.toReceivePremixData);console.log("toReceivePremixData",p.value);const S=Q("process"),b=Q(!0),P=Q(!1),g=oe();ee(async()=>{w&&await x()});const $=a=>se.formatDate(a,"MMM DD, YYYY || hh:mm A"),D=a=>{const d=l=>l?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():"",n=a.firstname?d(a.firstname):"No Firstname",r=a.middlename?d(a.middlename).charAt(0)+".":"",u=a.lastname?d(a.lastname):"No Lastname";return`${n} ${r} ${u}`},x=async()=>{try{b.value=!0,await q.fetchToReceivePremix(w,S.value),p.value.length||(P.value=!0)}catch{P.value=!0}finally{b.value=!1}},y=a=>{g.dialog({component:za,componentProps:{report:a}})};return(a,d)=>b.value?(v(),C("div",Ma,[e(ae,{size:"50px",color:"primary"})])):(v(),C("div",Ya,[p.value.length===0?(v(),C("div",ja,[e(te,{name:"warning",color:"warning",size:"4em"}),Ba])):(v(),A(le,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[s("div",Ha,[(v(!0),C(U,null,Y(p.value,(n,r)=>(v(),A(F,{key:r,onClick:u=>y(n)},{default:t(()=>[e(k,{class:"q-gutter-sm"},{default:t(()=>[s("div",Ka,[s("div",Oa,i(n.name),1),s("div",null,[e(z,{color:"amber-10",outlined:""},{default:t(()=>[c(i(n.status),1)]),_:2},1024)])]),s("div",Ea,[s("div",Ga,i($(n.created_at)),1),s("div",Ja,i(n.branch_premix.branch_recipe.branch.name)+" - "+i(D(n.employee)),1),s("div",Wa,[Xa,s("div",Za,i(D(n.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var ts=O(es,[["__scopeId","data-v-73bc9a06"]]);const as={class:"row justify-between"},ss={class:"text-h6"},ls=s("div",{class:"text-h6",align:"center"},"Premix",-1),os=s("div",{class:"text-h6",align:"center"},"Ingredients List",-1),ns={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){var g,$,D;const R=o;console.log("report",R.report);const I=Q(!1),w=()=>{I.value=!0},q=((D=($=(g=R.report)==null?void 0:g.branch_premix)==null?void 0:$.branch_recipe)==null?void 0:D.ingredient_groups)||"Undefined";console.log("ingrdientsData",q);const p=x=>{const y=r=>r?r.charAt(0).toUpperCase()+r.slice(1).toLowerCase():"",a=x.firstname?y(x.firstname):"No Firstname",d=x.middlename?y(x.middlename).charAt(0)+".":"",n=x.lastname?y(x.lastname):"No Lastname";return`${a} ${d} ${n}`},S=x=>{const y=Number(x);return isNaN(y)?"":(y%1===0,y.toString())},b=(x,y)=>{if(y==="Pcs")return`${x} pcs`;if(y==="Grams"){if(x>=1e3){let a=x/1e3;return`${a%1===0?a.toString():a.toString().replace(/^0+/,"")} kgs`}return`${x} g`}return`${x} ${y}`},P=T(()=>q.map(x=>{const y=parseFloat(x.quantity)*parseFloat(R.report.quantity);return{...x,totalQuantity:y,formattedQuantity:b(y,x.ingredient.unit)}}));return(x,y)=>(v(),C(U,null,[s("div",null,[e(L,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:w})]),e(G,{modelValue:I.value,"onUpdate:modelValue":y[1]||(y[1]=a=>I.value=a)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(k,null,{default:t(()=>[s("div",as,[s("div",ss,i(o.report.name),1),e(L,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:y[0]||(y[0]=a=>I.value=!1)})])]),_:1}),e(k,null,{default:t(()=>[s("div",null,"Baker: "+i(p(o.report.employee)),1),s("div",null," Branch: "+i(o.report.branch_premix.branch_recipe.branch.name),1),s("div",null,[c(" Status: "),e(z,{color:"green",outlined:""},{default:t(()=>[c(i(o.report.status),1)]),_:1})])]),_:1}),e(k,null,{default:t(()=>[ls]),_:1}),e(k,{class:"q-gutter-y-md"},{default:t(()=>[s("div",null,[e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Premix Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[c(i(o.report.name),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[c(i(S(o.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),s("div",null,[s("div",null,[os,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(V,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c(" Code")]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c(" Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[c("Quantity")]),_:1})]),_:1})]),_:1}),(v(!0),C(U,null,Y(P.value,(a,d)=>(v(),A(V,{key:d},{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[c(i(a.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[c(i(a.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(f,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[c(i(b(a.quantity*R.report.quantity,a.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const rs=o=>(J("data-v-0ad3cd46"),o=o(),W(),o),is={key:0,class:"spinner-wrapper"},cs={key:1},ds={key:0,class:"data-error"},us=rs(()=>s("div",{class:"q-ml-sm text-h6"},"No data available",-1)),ms={__name:"ReceivedPage",setup(o){const R=j(),w=T(()=>R.user).value.device.reference_id;console.log("warehouseId",w);const q=B(),p=T(()=>q.receivePremixData);console.log("receivePremixData",p.value);const S=Q([]),b=Q({page:1,rowsPerPage:0,rowsNumber:0}),P=Q("process"),g=Q(!0),$=Q(!1);ee(async()=>{w&&await a(w),console.log("receivePremixData",p.value)});const D=r=>se.formatDate(r,"MMM DD, YYYY || hh:mm A"),x=r=>r?r.split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1).toLowerCase()).join(" "):"",y=r=>{const u=N=>N?N.charAt(0).toUpperCase()+N.slice(1).toLowerCase():"",l=r.firstname?u(r.firstname):"No Firstname",m=r.middlename?u(r.middlename).charAt(0)+".":"",h=r.lastname?u(r.lastname):"No Lastname";return`${l} ${m} ${h}`},a=async(r,u=0,l=5)=>{try{g.value=!0,await q.fetchReceivePremix(r,P.value,u,l),console.log("receivePremixDatssa",p.value);const{data:m,current_page:h,per_page:N,total:K}=p.value;S.value=m,console.log("premixData.value",S.value),b.value.page=h,b.value.rowsPerPage=N,b.value.rowsNumber=K,p.value.length||($.value=!0)}catch{$.value=!0}finally{g.value=!1}},d=r=>{a(w,r.pagination.page,r.pagination.rowsPerPage)},n=[{name:"created_at",label:"Date / Time",align:"left",field:r=>D(r.created_at)||"Not Available",sortable:!0},{name:"employee",label:"Employee",align:"left",field:r=>y(r.employee)||"Not Available",sortable:!0},{name:"branch",label:"Branch Name",align:"left",field:r=>r.branch_premix.branch_recipe.branch.name||"Not Available",sortable:!0},{name:"premix_name",label:"Premix Name",align:"left",field:r=>r.name||"Not Available",sortable:!0},{name:"status",label:"Status",align:"left",field:"status",sortable:!0},{name:"action",label:"Action",align:"left",field:"action",sortable:!0}];return(r,u)=>g.value?(v(),C("div",is,[e(ae,{size:"50px",color:"primary"})])):(v(),C("div",cs,[S.value.length===0?(v(),C("div",ds,[e(te,{name:"warning",color:"warning",size:"4em"}),us])):be("",!0),e(De,{rows:S.value,columns:n,pagination:b.value,"onUpdate:pagination":u[0]||(u[0]=l=>b.value=l),"rows-per-page-options":[3,5,10,0],onRequest:d,flat:"",bordered:""},{"body-cell-status":t(l=>[e(ue,{props:l},{default:t(()=>[e(z,{color:"green"},{default:t(()=>[c(i(x(l.row.status)),1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-action":t(l=>[e(ue,{props:l},{default:t(()=>[e(ns,{report:l.row},null,8,["report"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])]))}};var _s=O(ms,[["__scopeId","data-v-0ad3cd46"]]);const fs={class:"q-gutter-y-sm"},ps={__name:"warehouseTransactionHistory",setup(o){const R=Q("pendingReports"),I=T(()=>{switch(R.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return(w,q)=>(v(),A(F,{flat:""},{default:t(()=>[e(k,{class:"text-h6"},{default:t(()=>[c(" Transaction History ")]),_:1}),e($e),s("div",fs,[e(we,{modelValue:R.value,"onUpdate:modelValue":q[0]||(q[0]=p=>R.value=p),"indicator-color":I.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(X,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Premix"}),e(X,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Premix"}),e(X,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Premix"}),e(X,{class:"text-dark",name:"processReports",label:"\u{1F535}Process Premix"}),e(X,{class:"text-dark",name:"completedReports",label:"\u26ABCompleted Premix"}),e(X,{class:"text-dark",name:"toDeliverReports",label:"\u{1F7E4}To Deliver Premix"}),e(X,{class:"text-dark",name:"toReceiveReports",label:"\u{1F7E0}To Receive Premix"}),e(X,{class:"text-dark",name:"receive",label:"\u{1F7E2}Receive Premix"})]),_:1},8,["modelValue","indicator-color"])]),e(Pe,{modelValue:R.value,"onUpdate:modelValue":q[1]||(q[1]=p=>R.value=p),animated:""},{default:t(()=>[e(Z,{name:"pendingReports"},{default:t(()=>[e(je)]),_:1}),e(Z,{name:"confirmReports"},{default:t(()=>[e(ct)]),_:1}),e(Z,{name:"declineReports"},{default:t(()=>[e(Nt)]),_:1}),e(Z,{name:"processReports"},{default:t(()=>[e(Gt)]),_:1}),e(Z,{name:"completedReports"},{default:t(()=>[e(pa)]),_:1}),e(Z,{name:"toDeliverReports"},{default:t(()=>[e(Aa)]),_:1}),e(Z,{name:"toReceiveReports"},{default:t(()=>[e(ts)]),_:1}),e(Z,{name:"receive"},{default:t(()=>[e(_s)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var Gs=O(ps,[["__scopeId","data-v-0e0f703f"]]);export{Gs as default};
