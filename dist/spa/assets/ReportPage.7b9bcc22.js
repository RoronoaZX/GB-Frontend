import{o as c,c as D,M as V,n as h,a2 as u,a as s,w as d,Q as z,I as $,J as e,_ as l,$ as k,a0 as j,a3 as q,a4 as M,bc as x,a1 as A,O as P,R as O,g as S,u as K,z as E,L as U,bb as F,K as J}from"./index.c0815fe7.js";import{_ as Y}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as G}from"./QBadge.96207a3e.js";import{Q as N,a as H}from"./QTable.dfe2f370.js";import{Q as W}from"./QBanner.14a82bd3.js";import{u as X}from"./baker-report.bab18c06.js";import{a as Z}from"./QSelect.05275e45.js";import{q as I}from"./date.4dbde211.js";import"./QVirtualScroll.3d0a0f44.js";import"./QList.f58bc619.js";import"./use-virtual-scroll.3725db76.js";import"./rtl.276c3f1b.js";import"./axios.950c72e0.js";import"./QItemLabel.0cd88901.js";import"./QItem.8ed247ee.js";import"./QMenu.e92add0c.js";import"./selection.e5e21d1b.js";const ee={};function te(t,f){return c(),D(V,{class:"q-pa-sm",color:"red-6",dense:"",elevated:"",icon:"add_circle",label:"Create Report",to:"/branch/baker/create_report"})}var ae=Y(ee,[["render",te]]);const p=t=>(P("data-v-9b7d5a72"),t=t(),O(),t),re={class:"text-h6 text-weight-regular"},se={class:"row justify-between"},oe={class:"section-content"},ie={class:"row q-gutter-x-sm"},ne=p(()=>e("div",{class:"text-subtitle2"},"Date:",-1)),le={class:"text-body1 text-weight-light"},ce={class:"row q-gutter-x-sm"},de=p(()=>e("div",{class:"text-subtitle2"},"Branch:",-1)),ue={class:"text-body1 text-weight-light"},_e={class:"row q-gutter-x-sm"},pe=p(()=>e("div",{class:"text-subtitle2"},"Baker:",-1)),me={class:"text-body1 text-weight-light"},ve={class:"row q-mt-sm item-start q-gutter-x-xl"},ge={class:"row q-gutter-x-sm text-overline"},he=p(()=>e("div",null,"Kilo:",-1)),fe={class:"row q-gutter-x-sm text-overline"},be=p(()=>e("div",null,"Over:",-1)),we={class:"text-weight-light"},ye={class:"row q-gutter-x-sm text-overline"},xe=p(()=>e("div",null,"Short:",-1)),ke={class:"text-weight-light"},Ce={class:"row q-gutter-x-sm text-overline"},Re=p(()=>e("div",null,"Actual Target:",-1)),qe={class:"text-weight-light"},De={class:"row justify-between"},$e={key:0,class:"report-section"},Qe=p(()=>e("div",{class:"section-title",align:"center"},"Ingredients",-1)),Be={class:"row q-gutter-md"},Le={class:""},Me={key:1,class:"report-section"},Se=p(()=>e("div",{class:"section-title",align:"center"},"Breads",-1)),Ve={class:"row q-gutter-md"},Ie={key:2,class:"report-section"},Ye=p(()=>e("div",{class:"section-title"},"Fillings",-1)),Te={__name:"ReportView",props:{report:{type:Object,required:!0}},setup(t){console.log("bakerView",t.report);const m=h(!1),C=a=>a.charAt(0).toUpperCase()+a.slice(1).toLowerCase(),Q=a=>a?a.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" "):"",b=a=>{const o=y=>y?y.charAt(0).toUpperCase()+y.slice(1).toLowerCase():"",i=a.firstname?o(a.firstname):"No Firstname",B=a.middlename?o(a.middlename).charAt(0)+".":"",L=a.lastname?o(a.lastname):"No Lastname";return`${i} ${B} ${L}`.trim()},v=a=>{switch(a){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},g=()=>{m.value=!0},w=a=>I.formatDate(a,"MMMM D, YYYY"),R=a=>{if(a>=1e3){const o=a/1e3;return`${o} ${o===1?"kg":"kgs"}`}return`${a} grams`};return(a,o)=>(c(),u(q,null,[s(V,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:g}),s(A,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=i=>m.value=i),class:"report-dialog"},{default:d(()=>[s(z,{class:"report-card"},{default:d(()=>[s($,{class:"report-header"},{default:d(()=>[e("div",re,l(Q(t.report.branch_recipe.recipe.name))+" - "+l(t.report.recipe_category),1),s(V,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:o[0]||(o[0]=i=>m.value=!1)})]),_:1}),s($,null,{default:d(()=>[e("div",se,[e("div",null,[e("div",oe,[e("div",ie,[ne,e("div",le,l(w(t.report.created_at)),1)]),e("div",ce,[de,e("div",ue,l(Q(t.report.branch.name)),1)]),e("div",_e,[pe,e("div",me,l(b(t.report.user.employee)),1)])])]),e("div",null,[s(Z,{square:"",color:v(t.report.status),"text-color":"white"},{default:d(()=>[k(l(C(t.report.status)),1)]),_:1},8,["color"])])]),e("div",ve,[e("div",ge,[he,e("div",null,l(t.report.kilo),1)]),e("div",fe,[be,e("div",we,l(t.report.over),1)]),e("div",ye,[xe,e("div",ke,l(t.report.short),1)]),e("div",Ce,[Re,e("div",qe,l(t.report.actual_target),1)])]),s(j,{class:"q-my-md"}),e("div",De,[t.report.ingredient_bakers_reports&&t.report.ingredient_bakers_reports.length?(c(),u("div",$e,[Qe,e("ul",null,[(c(!0),u(q,null,M(t.report.ingredient_bakers_reports,i=>(c(),u("div",{key:i.id},[e("div",Be,[e("div",Le,l(i.ingredients.code),1),e("div",null,"- "+l(R(i.quantity)),1)])]))),128))])])):x("",!0),t.report.bread_bakers_reports&&t.report.bread_bakers_reports.length?(c(),u("div",Me,[Se,e("ul",null,[(c(!0),u(q,null,M(t.report.bread_bakers_reports,i=>(c(),u("div",{key:i.id},[e("div",Ve,[e("div",null,l(i.bread.name),1),e("div",null,"- "+l(i.bread_production)+" pcs",1)])]))),128))])])):x("",!0),t.report.filling_bakers_reports&&t.report.filling_bakers_reports.length?(c(),u("div",Ie,[Ye,e("ul",null,[(c(!0),u(q,null,M(t.report.filling_bakers_reports,i=>(c(),u("li",{key:i.id},[e("div",null,l(i.bread.name),1),k(" - "+l(i.filling_production)+" pcs ",1)]))),128))])])):x("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Fe=Y(Te,[["__scopeId","data-v-9b7d5a72"]]);const Ne={class:"q-mt-sm q-gutter-md"},ze={class:"table-container"},Ue={key:0,class:"loading-overlay row justify-center items-center"},je={key:1,class:"q-pa-md q-gutter-md row justify-center"},Ae={__name:"ReportTable",setup(t){var T;const f=h({rowsPerPage:0}),m=X(),C=S(()=>m.reportToView),b=((T=S(()=>m.user).value)==null?void 0:T.data.id)||"",v=h(""),g=h(!0),w=h(!1),R=h(!1);K(v,async r=>{w.value=!0,await new Promise(n=>setTimeout(n,1e3)),w.value=!1,R.value=!g.value&&o.value.length===0,console.log("Filtered Rows:",o.value)}),E(async()=>{console.log("props.branchId in onMounted:",b),b&&await a(b)});const a=async r=>{g.value=!0,await m.fetchBakerReport(r),g.value=!1},o=S(()=>{if(!v.value)return C.value;const r=v.value.toLowerCase();return C.value.filter(n=>n.name&&n.name.toLowerCase().includes(r)||n.created_at&&I.formatDate(n.created_at,"MMMM D, YYYY").toLowerCase().includes(r)||n.recipe&&n.recipe.name&&n.recipe.name.toLowerCase().includes(r)||n.recipe&&n.recipe.category&&n.recipe.category.toLowerCase().includes(r))}),B=[{name:"date",align:"left",label:"Date",field:"created_at",format:r=>I.formatDate(r,"MMMM D, YYYY"),sortable:!0},{name:"name",label:"Reports Name",align:"center",field:r=>({name:r.branch_recipe.recipe.name,category:r.branch_recipe.recipe.category}),format:r=>`${r.name} (${r.category})`,sortable:!0},{name:"status",align:"center",label:"Status",field:"status"},{name:"view",align:"right",label:"View",field:"view"}],L=r=>{switch(r){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},y=r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase();return(r,n)=>(c(),u("div",Ne,[e("div",null,[s(J,{rounded:"",outlined:"",dense:"",debounce:"300",modelValue:v.value,"onUpdate:modelValue":n[0]||(n[0]=_=>v.value=_),placeholder:"Search",style:{width:"500px","max-width":"1500px","min-width":"100px"}},{append:d(()=>[w.value?(c(),D(F,{key:1})):(c(),D(U,{key:0,name:"search"}))]),_:1},8,["modelValue"])]),e("div",ze,[s(H,{class:"sticky-header",filter:v.value,flat:"",columns:B,rows:o.value,"row-key":"name","virtual-scroll-sticky-size-start":48,"virtual-scroll":"",pagination:f.value,"onUpdate:pagination":n[1]||(n[1]=_=>f.value=_),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"900px","max-height":"1000px","min-height":"none"}},{"body-cell-status":d(_=>[s(N,{key:"name",props:_},{default:d(()=>[s(G,{outlined:"",color:L(_.row.status)},{default:d(()=>[k(l(y(_.row.status)),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-view":d(_=>[s(N,{props:_},{default:d(()=>[e("div",null,[s(Fe,{report:_.row},null,8,["report"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]),g.value?(c(),u("div",Ue,[s(F,{size:"50px"})])):x("",!0),R.value?(c(),u("div",je,[s(W,{class:"bg-grey-1",dense:""},{default:d(()=>[k(" No data available ")]),_:1})])):x("",!0)])]))}};var Pe=Y(Ae,[["__scopeId","data-v-820d365e"]]);const Oe={class:"text-h6 text-white"},Ke={class:"q-gutter-y-lg"},Ee={align:"right"},ut={__name:"ReportPage",setup(t){return(f,m)=>(c(),D(z,{flat:""},{default:d(()=>[s($,{style:{"background-color":"#ef4444"}},{default:d(()=>[e("div",Oe,[s(U,{name:"fa-solid fa-layer-group"}),k(" Report ")])]),_:1}),s($,null,{default:d(()=>[e("div",Ke,[e("div",Ee,[s(ae)]),e("div",null,[s(Pe)])])]),_:1})]),_:1}))}};export{ut as default};
