import{d as R,r as t,c as f,P as c,N as i}from"./index.f9204663.js";import{api as o}from"./axios.f9d7066b.js";import{u as m}from"./raw-material.86a34ed3.js";const b=R("warehouseRawMaterials",()=>{const w=t(null),s=t([]),u=t([]),l=t({}),h=e=>{l.value=e},p=m(),d=f(()=>p.rawMaterials);return{setUser:h,user:l,warehouseId:u,warehouseRawMaterial:w,warehouseRawMaterials:s,createWarehouseRawMaterials:async e=>{c.show(),console.log("datassss",e);try{const a=await o.post("/api/warehouse-raw-materials-report",e);if(console.log("responsedfasdfasd",a.data),a.data.message==="Warehouse Raw Materials saved successfully"){const r=d.value.find(M=>M.id===e.raw_material_id),n={...a.data,raw_materials:r||{name:"No Name",code:"Unknown"},total_quantity:e.total_quantity};console.log("newRawMaterials",n),s.value.unshift(n),i.create({type:"positive",message:"Warehouse Raw Materials saved successfully",position:"top"})}else a.data.message==="The RawMaterials already exists in this branch."&&i.create({type:"warning",message:"The Raw Materials already exists in this branch.",position:"top"})}catch(a){console.log(a),i.create({type:"negative",message:"An error occurred while saving the branch product.",position:"top"})}finally{c.hide()}},fetchWarehouseRawMaterials:async e=>{console.log("warehouseId",e);try{const a=await o.get(`/api/warehouse/${e}/rawMaterials`);console.log("response",a.data),s.value=a.data}catch(a){console.log("error",a)}},deleteWarehouseRawMaterials:async e=>{await o.delete(`/api/warehouse-raw-materials-report/${e}`),s.value=s.value.filter(a=>a.id!==e)},searchWarehouseRawMaterials:async(e,a)=>{const r=await o.post("/api/search-warehouse-rawMaterials",{keyword:e,warehouse_id:a});s.value=r.data}}});export{b as u};
