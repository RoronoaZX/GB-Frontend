import{Q as R}from"./QBadge.de0b4616.js";import{r as b,t as ee,o as v,a2 as C,f as e,w as t,$,M as w,Q as N,I as k,ad as U,a0 as K,J as o,K as V,aI as J,a1 as G,a3 as L,O as z,R as A,H as le,c as M,z as ne,u as re,L as H,e as W,aH as de,_ as D,P as Y,bb as ie,a4 as ue,bc as ce}from"./index.09bfea76.js";import{Q as me}from"./QPage.cd53c0d2.js";import{Q as pe}from"./QSpinnerDots.d43c6504.js";import{Q as I,a as _e}from"./QTable.7be7d720.js";import{Q as ae}from"./QTooltip.2c21c538.js";import{Q as te}from"./QSpace.bb0e1865.js";import{Q as oe}from"./QSelect.6062085f.js";import{C as E}from"./ClosePopup.73174b17.js";import{u as T}from"./warehouse.0f4239d3.js";import{_ as F}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as he,a as Z,b as ve}from"./QList.d6bd80da.js";import{u as fe}from"./employee.f63cdd55.js";import"./QVirtualScroll.2b659bb1.js";import"./use-virtual-scroll.47ad128e.js";import"./QMenu.5f07b5c9.js";import"./selection.4e7b72c1.js";import"./QChip.b102dc55.js";import"./axios.a112733d.js";const Q=n=>(z("data-v-4654e3ae"),n=n(),A(),n),ge=Q(()=>o("div",{class:"text-h5 q-mr-md"},"\u{1F3ED} Edit Warehouse",-1)),be={class:"q-mt-lg q-animated q-animate-bounce"},we=Q(()=>o("div",null,"Name of Warehouse",-1)),ye={class:"q-mt-md q-animated q-animate-bounce"},qe=Q(()=>o("div",null,"Location",-1)),xe={class:"q-mt-md q-animated q-animate-bounce"},Ce=Q(()=>o("div",null,"Person In-charge",-1)),Ve={class:"row q-gutter-x-sm q-mt-md"},$e={class:"col-6 q-animated q-animate-bounce"},ke=Q(()=>o("div",null,"Phone Number",-1)),We={class:"col-5 q-animated q-animate-bounce"},Qe=Q(()=>o("div",null,"Status",-1)),Se={__name:"WarehouseEditComponent",props:["edit"],setup(n){const q=T(),g=b(!1),c=["Open","Closed"],f=n,u=ee({name:"",location:"",person_incharge:"",phone:"",status:null}),y=()=>{Object.assign(u,f.edit.row),g.value=!0},p=async()=>{try{const _={...f.edit.row,...u};await q.updateWarehouses(f.edit.row.id,_),g.value=!1}catch(_){console.error("Failed to update ingredients:",_)}};return(_,m)=>(v(),C(L,null,[e(w,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:"",onClick:y},{default:t(()=>[e(ae,{class:"bg-positive",delay:200},{default:t(()=>[$("Edit")]),_:1})]),_:1}),e(G,{modelValue:g.value,"onUpdate:modelValue":m[5]||(m[5]=r=>g.value=r),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:t(()=>[e(N,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:t(()=>[e(k,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:t(()=>[ge,e(te),U(e(w,{icon:"close",flat:"",dense:"",round:""},null,512),[[E]])]),_:1}),e(K,{class:"separator-gradient"}),e(k,{class:"q-px-xl q-pt-none q-pb-lg"},{default:t(()=>[o("div",be,[we,e(V,{modelValue:u.name,"onUpdate:modelValue":m[0]||(m[0]=r=>u.name=r),outlined:"",dense:""},null,8,["modelValue"])]),o("div",ye,[qe,e(V,{modelValue:u.location,"onUpdate:modelValue":m[1]||(m[1]=r=>u.location=r),outlined:"",dense:""},null,8,["modelValue"])]),o("div",xe,[Ce,e(V,{modelValue:u.person_incharge,"onUpdate:modelValue":m[2]||(m[2]=r=>u.person_incharge=r),outlined:"",dense:""},null,8,["modelValue"])]),o("div",Ve,[o("div",$e,[ke,e(V,{modelValue:u.phone,"onUpdate:modelValue":m[3]||(m[3]=r=>u.phone=r),outlined:"",dense:"",mask:"(+63) ### - ### - ####",placeholder:"(+63)### - ### - ####",rules:[r=>r&&r.length>0]},null,8,["modelValue","rules"])]),o("div",We,[Qe,e(oe,{modelValue:u.status,"onUpdate:modelValue":m[4]||(m[4]=r=>u.status=r),outlined:"",dense:"",options:c,behavior:"menu"},null,8,["modelValue"])])])]),_:1}),e(J,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:t(()=>[U(e(w,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[E]]),e(w,{class:"glossy",color:"teal",label:"Save",onClick:p})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ie=F(Se,[["__scopeId","data-v-4654e3ae"]]);const se=n=>(z("data-v-0db17e38"),n=n(),A(),n),De=se(()=>o("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),Ne=se(()=>o("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),Ue={__name:"WarehouseDeleteComponent",props:["delete"],setup(n){const q=T(),g=n,c=b(!1),f=()=>{c.value=!0},u=async()=>{try{await q.deleteWarehouse(g.delete.row.id)}catch(y){console.error("Error deleting item:",y)}c.value=!1};return(y,p)=>(v(),C(L,null,[e(w,{onClick:f,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:""},{default:t(()=>[e(ae,{class:"bg-negative",delay:200},{default:t(()=>[$("Delete")]),_:1})]),_:1}),e(G,{modelValue:c.value,"onUpdate:modelValue":p[0]||(p[0]=_=>c.value=_)},{default:t(()=>[e(N,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(k,{class:"q-pt-none q-pb-sm"},{default:t(()=>[De,Ne]),_:1}),e(K,{class:"q-mb-md"}),e(J,{align:"right",class:"q-pt-none"},{default:t(()=>[U(e(w,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[E]]),e(w,{dense:"",label:"Delete",color:"negative",onClick:u,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ee=F(Ue,[["__scopeId","data-v-0db17e38"]]);const Fe=n=>(z("data-v-66ece0dc"),n=n(),A(),n),Pe={key:0,class:"spinner-wrapper"},Le={key:1},ze={key:0,class:"data-error"},Ae=Fe(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Te=["onClick"],je={class:"row justify-center q-gutter-x-md"},Be={__name:"WarehouseTableComponent",setup(n){const q=le(),g=T(),c=b(""),f=b(!0),u=M(()=>g.warehouses),y=b(!1),p=b({rowPerPage:0}),_=M(()=>c.value?u.value.filter(s=>s.name.toLowerCase().includes(c.value.toLowerCase())):u.value);ne(async()=>{const s=await m();console.log("respisne warehouse",s)});const m=async()=>{try{f.value=!0;const s=await g.fetchWarehouses();u.value.length||(y.value=!0),console.log("wawrehouse respo",s)}catch{y.value=!0}finally{f.value=!1}};re(c,async s=>{f.value=!0,await new Promise(h=>setTimeout(h,1e3)),f.value=!1,y.value=_.value.length===0});const r=s=>{const h=x=>x?x.charAt(0).toUpperCase()+x.slice(1).toLowerCase():"",a=s.firstname?h(s.firstname):"No Firstname",i=s.middlename?h(s.middlename).charAt(0)+".":"",l=s.lastname?h(s.lastname):"No Lastname";return`${a} ${i} ${l}`},P=s=>s?s.split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1).toLowerCase()).join(" "):"",j=[{name:"name",label:"Name of Warehouse",align:"left",field:s=>s.name,format:s=>`${s}`,sortable:!0},{name:"location",label:"Location",align:"left",field:"location",sortable:!0},{name:"personIncharge",label:"Person In-charge",align:"left",field:s=>r(s)},{name:"phone",label:"Phone",align:"center",field:"phone"},{name:"status",label:"Status",align:"left",field:"status"},{name:"action",label:"Action",align:"center",field:"action"}],B=s=>s==="Open"?"info":"accent",d=async s=>{console.log("waraehouse",s),Y.show();try{await q.push({name:"WarehouseDetail",params:{warehouse_id:s.id,warehouse_name:s.name||"Unknown Warehouse"}})}finally{Y.hide()}};return(s,h)=>(v(),C(L,null,[o("div",null,[e(V,{modelValue:c.value,"onUpdate:modelValue":h[0]||(h[0]=a=>c.value=a),class:"q-pb-lg q-pl-sm dynamic-width",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100"},{append:t(()=>[e(H,{name:"search"})]),_:1},8,["modelValue"])]),f.value?(v(),C("div",Pe,[e(pe,{size:"50px",color:"primary"})])):(v(),C("div",Le,[_.value.length===0?(v(),C("div",ze,[e(H,{name:"warning",color:"warning",size:"4em"}),Ae])):(v(),W(_e,{key:1,class:"table-container elegant-container sticky-header",filter:c.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"400px"},columns:j,rows:_.value,"row-key":"name","virtual-scroll":"",pagination:p.value,"onUpdate:pagination":h[1]||(h[1]=a=>p.value=a),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-name":t(a=>[e(I,{key:"name",props:a},{default:t(()=>[o("a",{onClick:de(i=>d(a.row),["prevent"]),class:"warehouse-link"},D(P(a.row.name)),9,Te)]),_:2},1032,["props"])]),"body-cell-location":t(a=>[e(I,{props:a},{default:t(()=>[$(D(P(a.row.location)),1)]),_:2},1032,["props"])]),"body-cell-personIncharge":t(a=>[e(I,{props:a},{default:t(()=>[$(D(r(a.row.employees)),1)]),_:2},1032,["props"])]),"body-cell-status":t(a=>[e(I,{key:"name",props:a},{default:t(()=>[e(R,{outline:"",color:B(a.row.status)},{default:t(()=>[$(D(a.row.status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-action":t(a=>[e(I,{props:a},{default:t(()=>[o("div",je,[e(Ie,{edit:a},null,8,["edit"]),e(Ee,{delete:a},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Oe=F(Be,[["__scopeId","data-v-66ece0dc"]]);const S=n=>(z("data-v-b8d017b8"),n=n(),A(),n),Re=S(()=>o("div",{class:"text-h5 q-mr-md"},"\u{1F3ED} Add New Warehouse",-1)),Me={class:"q-mt-lg q-animated q-animate-bounce"},He=S(()=>o("div",null,"Name of Warehouse",-1)),Ke={class:"q-mt-md q-animated q-animate-bounce"},Je=S(()=>o("div",null,"Location",-1)),Ge={class:"q-mt-md q-animated q-animate-bounce"},Xe=S(()=>o("div",null,"Person In-charge",-1)),Ye={key:0,class:"custom-list z-top"},Ze={class:"row q-gutter-x-sm q-mt-md"},ea={class:"col-6 q-animated q-animate-bounce"},aa=S(()=>o("div",null,"Phone Number",-1)),ta={class:"col-5 q-animated q-animate-bounce"},oa=S(()=>o("div",null,"Status",-1)),sa={__name:"WarehouseCreateComponent",setup(n){const q=fe(),g=T(),c=b(!1),f=M(()=>q.employee),u=["Open","Close"],y=()=>{c.value=!0},p=b(""),_=b(!1),m=b(!1),r=b(!1),P=async()=>{p.value.trim()&&(r.value=!0,await q.searchCertainEmployee(p.value),r.value=!1,_.value=!0)},j=a=>{console.log("Selected Employee:",a),d.employee_id=a.id,d.employee_name=`${a.firstname} ${a.middlename?a.middlename.charAt(0)+".":""} ${a.lastname}`,p.value=`${a.firstname} ${a.middlename?a.middlename.charAt(0)+".":""} ${a.lastname}`,_.value=!1,console.log("Filled addNewBranchForm Data:",d)},B=a=>{const i=O=>O?O.charAt(0).toUpperCase()+O.slice(1).toLowerCase():"",l=a.firstname?i(a.firstname):"No Firstname",x=a.middlename?i(a.middlename).charAt(0)+".":"",X=a.lastname?i(a.lastname):"No Lastname";return`${l} ${x} ${X}`},d=ee({name:"",location:"",employee_id:"",employee_name:"",phone:"",status:null}),s=async()=>{console.log("awarehoouse data send",d),m.value=!0,await g.createWarehouses(d),m.value=!1,h(),c.value=!1},h=()=>{d.name="",d.location="",d.person_incharge="",d.phone="",p.value=null,d.employee="",d.status=[""]};return(a,i)=>(v(),C("div",null,[e(w,{outline:"",icon:"add_circle",label:"Add Warehouse",onClick:y,style:{"background-color":"#ef4444"}}),e(G,{modelValue:c.value,"onUpdate:modelValue":i[6]||(i[6]=l=>c.value=l),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:t(()=>[e(N,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:t(()=>[e(k,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:t(()=>[Re,e(te),U(e(w,{icon:"close",flat:"",dense:"",round:""},null,512),[[E]])]),_:1}),e(K,{class:"separator-gradient"}),e(k,{class:"q-px-xl q-pt-none q-pb-lg"},{default:t(()=>[o("div",Me,[He,e(V,{class:"text-capitalize",modelValue:d.name,"onUpdate:modelValue":i[0]||(i[0]=l=>d.name=l),outlined:"",dense:"",rules:[l=>l&&l.length>0]},null,8,["modelValue","rules"])]),o("div",Ke,[Je,e(V,{class:"text-capitalize",modelValue:d.location,"onUpdate:modelValue":i[1]||(i[1]=l=>d.location=l),outlined:"",dense:"",rules:[l=>l&&l.length>0]},null,8,["modelValue","rules"])]),o("div",Ge,[Xe,e(V,{modelValue:p.value,"onUpdate:modelValue":[i[2]||(i[2]=l=>p.value=l),P],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name or position",onFocus:i[3]||(i[3]=l=>_.value=!0)},{append:t(()=>[r.value?(v(),W(ie,{key:1,color:"grey",size:"sm"})):(v(),W(H,{key:0,name:"search"}))]),default:t(()=>[_.value&&p.value?(v(),C("div",Ye,[e(N,null,{default:t(()=>[e(he,{separator:""},{default:t(()=>{var l;return[(l=f.value)!=null&&l.length?(v(!0),C(L,{key:1},ue(f.value,x=>(v(),W(Z,{onClick:X=>j(x),key:x.id,clickable:""},{default:t(()=>[e(ve,null,{default:t(()=>[$(D(B(x)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(v(),W(Z,{key:0},{default:t(()=>[$(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):ce("",!0)]),_:1},8,["modelValue"])]),o("div",Ze,[o("div",ea,[aa,e(V,{modelValue:d.phone,"onUpdate:modelValue":i[4]||(i[4]=l=>d.phone=l),outlined:"",dense:"",mask:"(+63) ### - ### - ####",placeholder:"(+63)### - ### - ####",rules:[l=>l&&l.length>0]},null,8,["modelValue","rules"])]),o("div",ta,[oa,e(oe,{modelValue:d.status,"onUpdate:modelValue":i[5]||(i[5]=l=>d.status=l),outlined:"",dense:"",options:u,"hide-dropdown-icon":"",behavior:"menu"},null,8,["modelValue"])])])]),_:1}),e(J,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:t(()=>[U(e(w,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[E]]),e(w,{class:"glossy",color:"teal",label:"Create",onClick:s,loading:m.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var la=F(sa,[["__scopeId","data-v-b8d017b8"]]);const na={class:"text-h6 text-dark"},ra={class:"q-gutter-x-sm"},da={align:"right"},ia={__name:"WarehousePage",setup(n){return(q,g)=>(v(),W(me,null,{default:t(()=>[e(N,{class:"elegant-container",flat:""},{default:t(()=>[e(k,{class:"row justify-between"},{default:t(()=>[o("div",na,[o("div",ra,[e(R,{label:"Open",outline:"",color:"info"}),e(R,{label:"Closed",outline:"",color:"accent"})])]),o("div",da,[e(la)])]),_:1}),e(k,null,{default:t(()=>[e(Oe)]),_:1})]),_:1})]),_:1}))}};var Qa=F(ia,[["__scopeId","data-v-7966fcdc"]]);export{Qa as default};
