import{d as g,r as n,N as r,P as c}from"./index.99dcf656.js";import{api as a}from"./axios.66ae3d3b.js";const v=g("products",()=>{const p=n(null),s=n([]),d=n([]),i=async e=>{const t=await a.get("/api/search-products",{params:{keyword:e}});s.value=t.data,console.log("searched products",t.data)},u=async()=>{try{const e=await a.get("/api/products");s.value=e.data,console.log("===================================="),console.log("products.value ",s.value),console.log("====================================")}catch{r.create({type:"negative",message:"Failed to fetch product",timeout:1e3})}};return{product:p,products:s,breads:d,searchProducts:i,fetchProducts:u,createProducts:async e=>{var t,l;try{c.show();const o=await a.post("/api/products",e);console.log("data",o.data),u(),r.create({type:"positive",message:"Product created successfully"})}catch(o){console.log("erroe",o),o.response.data.message==="The name has already been taken."?r.create({type:"warning",icon:"warning",message:"The name has already been taken.",setTimeout:5e3}):r.create({type:"negative",icon:"error",message:((l=(t=o.response)==null?void 0:t.data)==null?void 0:l.message)||"The name has already been taken.",setTimeout:5e3})}finally{c.hide()}},updatedProducts:async e=>{console.log("datsssa",e);try{const t=await a.patch("/api/update-products",e);console.log("response",t)}catch(t){console.log("error",t)}},deleteProducts:async e=>{c.show(),await a.delete(`/api/products/${e}`),s.value=s.value.filter(t=>t.id!==e),r.create({type:"negative",icon:"warning",message:"Product successfully deleted",timeout:1e3}),c.hide()},fetchProductsByCategory:async e=>{const t=await a.get("/api/bread-products",e);d.value=t.data}}});export{v as u};
