import{d,r as n,c as M,P as o,N as c}from"./index.fe067f2a.js";import{api as s}from"./axios.1553f882.js";import{u as f}from"./raw-material.987d5082.js";const N=d("branchRawMaterial",()=>{const w=n(null),t=n([]),h=n([]),u=f(),p=M(()=>u.rawMaterials);return{branchId:h,branchRawMaterial:w,branchRawMaterials:t,fetchBranchRawMaterials:async e=>{const a=await s.get(`/api/branch/${e}/rawMaterials`);t.value=a.data},createBranchRawMaterials:async e=>{o.show();try{const a=await s.post("/api/branch-raw-materials",e);if(a.data.message==="Branch Raw Materials saved successfully"){const r=p.value.find(i=>i.id===e.ingredients_id),l={...a.data,ingredients:r||{name:"No Name",code:"Unknown"},total_quantity:e.total_quantity};t.value.unshift(l),c.create({type:"positive",message:"Branch Raw Materials saved successfully",position:"top"})}else a.data.message==="The RawMaterials already exists in this branch."&&c.create({type:"warning",message:"The Raw Materials already exists in this branch.",position:"top"})}catch(a){console.log(a),c.create({type:"negative",message:"An error occurred while saving the branch product.",position:"top"})}finally{o.hide()}},updateBranchRawMaterials:async e=>{await s.put(`/api/update-branch-products/${e}`,{price:newPrice});const a=t.value.findIndex(r=>r.id===e);a!==-1&&(t.value[a].price=newPrice)},deleteBranchRawMaterials:async e=>{await s.delete(`/api/branch-raw-materials/${e}`),t.value=t.value.filter(a=>a.id!==e)},createMultipleBranchRawMaterials:async e=>{try{const a=await s.post("/api/branch/raw-materials/bulk-create",{materials:e});console.log("multipleRawMAterials",a.data),a.data.data.forEach(r=>{t.value.find(i=>i.id===r.id)||t.value.unshift(r)}),console("branchRawMaterials.value",t.value)}catch{}}}});export{N as u};
