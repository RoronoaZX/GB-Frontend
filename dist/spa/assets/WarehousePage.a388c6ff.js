import{Q as G}from"./QBadge.ef775ae2.js";import{c as j,r as f,t as ae,o as m,a3 as w,f as e,w as o,a0 as S,M as q,Q as F,I as Q,ae as A,a1 as X,J as r,K as W,e as C,L as O,bc as oe,a4 as z,a5 as te,$ as N,bd as le,aJ as Y,a2 as Z,O as K,R,H as me,z as pe,u as _e,aI as he,P as ee}from"./index.f5aca2bf.js";import{Q as ve}from"./QPage.3a27ff4e.js";import{Q as fe}from"./QSpinnerDots.92f394d3.js";import{Q as P,a as ge}from"./QTable.5772bfeb.js";import{Q as se}from"./QTooltip.c701fecd.js";import{Q as ne}from"./QSpace.07da039b.js";import{Q as re,a as M,b as de}from"./QList.6cff10f1.js";import{Q as ie}from"./QSelect.80d7903b.js";import{C as T}from"./ClosePopup.2451f4f5.js";import{u as J}from"./warehouse.02543345.js";import{u as ue}from"./employee.9ea02a52.js";import{_ as B}from"./plugin-vue_export-helper.21dcd24c.js";import"./QVirtualScroll.bdd7934e.js";import"./use-virtual-scroll.8d0a2b7e.js";import"./rtl.e56a4e85.js";import"./QMenu.4d91826c.js";import"./selection.9d6bdf1b.js";import"./QChip.67cdcd1d.js";import"./axios.252592aa.js";const I=c=>(K("data-v-39557324"),c=c(),R(),c),ye=I(()=>r("div",{class:"text-h5 q-mr-md"},"\u{1F3ED} Edit Warehouse",-1)),be={class:"q-mt-lg q-animated q-animate-bounce"},we=I(()=>r("div",null,"Name of Warehouse",-1)),qe={class:"q-mt-md q-animated q-animate-bounce"},$e=I(()=>r("div",null,"Location",-1)),Ce={class:"q-mt-md q-animated q-animate-bounce"},xe=I(()=>r("div",null,"Person In-charge",-1)),Ve={key:0,class:"custom-list z-top"},ke={class:"row q-gutter-x-sm q-mt-md"},We={class:"col-6 q-animated q-animate-bounce"},Se=I(()=>r("div",null,"Phone Number",-1)),Qe={class:"col-5 q-animated q-animate-bounce"},De=I(()=>r("div",null,"Status",-1)),Ee={__name:"WarehouseEditComponent",props:["edit"],setup(c){const $=ue(),x=J(),p=j(()=>$.employee),v=f(!1),V=["Open","Closed"],y=c;let s=y.edit.row;const _=f(null),k=f(!1),g=f(!1),D=async()=>{_.value.trim()&&(k.value=!0,await $.searchCertainEmployee(_.value),k.value=!1,g.value=!0)},L=t=>{console.log("Selected Employee:",t),d.employee_id=t.id,d.employee_name=`${t.firstname} ${t.middlename?t.middlename.charAt(0)+".":""} ${t.lastname}`,_.value=`${t.firstname} ${t.middlename?t.middlename.charAt(0)+".":""} ${t.lastname}`,g.value=!1,console.log("Filled editBranchesForm Data:",d)},d=ae({name:"",location:"",person_incharge:"",employee_id:"",employee_name:"",phone:"",status:null}),u=()=>{var t,a;console.log("Edit Row Data:",s),g.value=!1,d.name=s.name,d.location=s.location,d.employee_id=s.employee_id,d.employee_name=s.employees?n(s.employees):"No Person in Charge",_.value=s.employees?n(s.employees):"No Person in Charge",d.warehouse_id=s!=null&&s.warehouse_id?s.warehouse_id:(t=s==null?void 0:s.warehouse)!=null&&t.id?(a=s==null?void 0:s.warehouse)==null?void 0:a.id:"",d.phone=s.phone,d.status=s.status,v.value=!0,console.log("Edit Data:",d)},n=t=>{const a=H=>H?H.charAt(0).toUpperCase()+H.slice(1).toLowerCase():"",i=t.firstname?a(t.firstname):"No Firstname",b=t.middlename?a(t.middlename).charAt(0)+".":"",E=t.lastname?a(t.lastname):"No Lastname";return`${i} ${b} ${E}`},h=()=>{d.name="",d.location="",d.person_incharge="",d.employee_id="",d.employee_name="",d.phone="",d.status=null,_.value=null,g.value=!1},l=async()=>{console.log("editRow.id",s.id),console.log("updatedWarehouse",d);try{await x.updateWarehouses(y.edit.row.id,d),h(),v.value=!1}catch(t){console.error("Failed to update ingredients:",t)}};return(t,a)=>(m(),w(z,null,[e(q,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:"",onClick:u},{default:o(()=>[e(se,{class:"bg-positive",delay:200},{default:o(()=>[S("Edit")]),_:1})]),_:1}),e(Z,{modelValue:v.value,"onUpdate:modelValue":a[6]||(a[6]=i=>v.value=i),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:o(()=>[e(F,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:o(()=>[e(Q,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:o(()=>[ye,e(ne),A(e(q,{icon:"close",flat:"",dense:"",round:""},null,512),[[T]])]),_:1}),e(X,{class:"separator-gradient"}),e(Q,{class:"q-px-xl q-pt-none q-pb-lg"},{default:o(()=>[r("div",be,[we,e(W,{modelValue:d.name,"onUpdate:modelValue":a[0]||(a[0]=i=>d.name=i),outlined:"",dense:""},null,8,["modelValue"])]),r("div",qe,[$e,e(W,{modelValue:d.location,"onUpdate:modelValue":a[1]||(a[1]=i=>d.location=i),outlined:"",dense:""},null,8,["modelValue"])]),r("div",Ce,[xe,r("div",null,[e(W,{modelValue:_.value,"onUpdate:modelValue":[a[2]||(a[2]=i=>_.value=i),D],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name or position",onFocus:a[3]||(a[3]=i=>g.value=!0)},{append:o(()=>[k.value?(m(),C(oe,{key:1,color:"grey",size:"sm"})):(m(),C(O,{key:0,name:"search"}))]),default:o(()=>[g.value&&_.value?(m(),w("div",Ve,[e(F,null,{default:o(()=>[e(re,{separator:""},{default:o(()=>{var i;return[(i=p.value)!=null&&i.length?(m(!0),w(z,{key:1},te(p.value,b=>(m(),C(M,{onClick:E=>L(b),key:b.id,clickable:""},{default:o(()=>[e(de,null,{default:o(()=>[S(N(`${b.firstname} ${b.middlename?b.middlename.charAt(0)+".":""} ${b.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(m(),C(M,{key:0},{default:o(()=>[S(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):le("",!0)]),_:1},8,["modelValue"])])]),r("div",ke,[r("div",We,[Se,e(W,{modelValue:d.phone,"onUpdate:modelValue":a[4]||(a[4]=i=>d.phone=i),outlined:"",dense:"",mask:"(+63) ### - ### - ####",placeholder:"(+63)### - ### - ####",rules:[i=>i&&i.length>0]},null,8,["modelValue","rules"])]),r("div",Qe,[De,e(ie,{modelValue:d.status,"onUpdate:modelValue":a[5]||(a[5]=i=>d.status=i),outlined:"",dense:"",options:V,behavior:"menu"},null,8,["modelValue"])])])]),_:1}),e(Y,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:o(()=>[A(e(q,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[T]]),e(q,{class:"glossy",color:"teal",label:"Save",onClick:l})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ne=B(Ee,[["__scopeId","data-v-39557324"]]);const ce=c=>(K("data-v-0db17e38"),c=c(),R(),c),Fe=ce(()=>r("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),Ie=ce(()=>r("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),Ue={__name:"WarehouseDeleteComponent",props:["delete"],setup(c){const $=J(),x=c,p=f(!1),v=()=>{p.value=!0},V=async()=>{try{await $.deleteWarehouse(x.delete.row.id)}catch(y){console.error("Error deleting item:",y)}p.value=!1};return(y,s)=>(m(),w(z,null,[e(q,{onClick:v,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:""},{default:o(()=>[e(se,{class:"bg-negative",delay:200},{default:o(()=>[S("Delete")]),_:1})]),_:1}),e(Z,{modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=_=>p.value=_)},{default:o(()=>[e(F,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:o(()=>[e(Q,{class:"q-pt-none q-pb-sm"},{default:o(()=>[Fe,Ie]),_:1}),e(X,{class:"q-mb-md"}),e(Y,{align:"right",class:"q-pt-none"},{default:o(()=>[A(e(q,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[T]]),e(q,{dense:"",label:"Delete",color:"negative",onClick:V,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Le=B(Ue,[["__scopeId","data-v-0db17e38"]]);const Pe=c=>(K("data-v-50c866cb"),c=c(),R(),c),Ae={key:0,class:"spinner-wrapper"},ze={key:1},Te={key:0,class:"data-error"},Be=Pe(()=>r("div",{class:"q-ml-sm text-h6"},"No data available",-1)),je=["onClick"],Oe={class:"row justify-center q-gutter-x-md"},Me={__name:"WarehouseTableComponent",setup(c){const $=me(),x=J(),p=f(""),v=f(!0),V=j(()=>x.warehouses),y=f(!1),s=f({rowPerPage:0}),_=j(()=>p.value?V.value.filter(n=>n.name.toLowerCase().includes(p.value.toLowerCase())):V.value);pe(async()=>{const n=await k();console.log("respisne warehouse",n)});const k=async()=>{try{v.value=!0;const n=await x.fetchWarehouses();V.value.length||(y.value=!0),console.log("wawrehouse respo",n)}catch{y.value=!0}finally{v.value=!1}};_e(p,async n=>{v.value=!0,await new Promise(h=>setTimeout(h,1e3)),v.value=!1,y.value=_.value.length===0});const g=n=>{const h=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",l=n.firstname?h(n.firstname):"No Firstname",t=n.middlename?h(n.middlename).charAt(0)+".":"",a=n.lastname?h(n.lastname):"No Lastname";return`${l} ${t} ${a}`},D=n=>n?n.split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1).toLowerCase()).join(" "):"",L=[{name:"name",label:"Name of Warehouse",align:"left",field:n=>n.name,format:n=>`${n}`,sortable:!0},{name:"location",label:"Location",align:"left",field:"location",sortable:!0},{name:"personIncharge",label:"Person In-charge",align:"left",field:n=>g(n)},{name:"phone",label:"Phone",align:"center",field:"phone"},{name:"status",label:"Status",align:"left",field:"status"},{name:"action",label:"Action",align:"center",field:"action"}],d=n=>n==="Open"?"info":"accent",u=async n=>{console.log("waraehouse",n),ee.show();try{await $.push({name:"WarehouseDetail",params:{warehouse_id:n.id,warehouse_name:n.name||"Unknown Warehouse"}})}finally{ee.hide()}};return(n,h)=>(m(),w(z,null,[r("div",null,[e(W,{modelValue:p.value,"onUpdate:modelValue":h[0]||(h[0]=l=>p.value=l),class:"q-pb-lg q-pl-sm dynamic-width",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100"},{append:o(()=>[e(O,{name:"search"})]),_:1},8,["modelValue"])]),v.value?(m(),w("div",Ae,[e(fe,{size:"50px",color:"primary"})])):(m(),w("div",ze,[_.value.length===0?(m(),w("div",Te,[e(O,{name:"warning",color:"warning",size:"4em"}),Be])):(m(),C(ge,{key:1,class:"table-container elegant-container sticky-header",filter:p.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"500px"},columns:L,rows:_.value,"row-key":"name",pagination:s.value,"onUpdate:pagination":h[1]||(h[1]=l=>s.value=l),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-name":o(l=>[e(P,{key:"name",props:l},{default:o(()=>[r("a",{onClick:he(t=>u(l.row),["prevent"]),class:"warehouse-link"},N(D(l.row.name)),9,je)]),_:2},1032,["props"])]),"body-cell-location":o(l=>[e(P,{props:l},{default:o(()=>[S(N(D(l.row.location)),1)]),_:2},1032,["props"])]),"body-cell-personIncharge":o(l=>[e(P,{props:l},{default:o(()=>[S(N(g(l.row.employees)),1)]),_:2},1032,["props"])]),"body-cell-status":o(l=>[e(P,{key:"name",props:l},{default:o(()=>[e(G,{outline:"",color:d(l.row.status)},{default:o(()=>[S(N(l.row.status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-action":o(l=>[e(P,{props:l},{default:o(()=>[r("div",Oe,[e(Ne,{edit:l},null,8,["edit"]),e(Le,{delete:l},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Ke=B(Me,[["__scopeId","data-v-50c866cb"]]);const U=c=>(K("data-v-b8d017b8"),c=c(),R(),c),Re=U(()=>r("div",{class:"text-h5 q-mr-md"},"\u{1F3ED} Add New Warehouse",-1)),Je={class:"q-mt-lg q-animated q-animate-bounce"},He=U(()=>r("div",null,"Name of Warehouse",-1)),Ge={class:"q-mt-md q-animated q-animate-bounce"},Xe=U(()=>r("div",null,"Location",-1)),Ye={class:"q-mt-md q-animated q-animate-bounce"},Ze=U(()=>r("div",null,"Person In-charge",-1)),ea={key:0,class:"custom-list z-top"},aa={class:"row q-gutter-x-sm q-mt-md"},oa={class:"col-6 q-animated q-animate-bounce"},ta=U(()=>r("div",null,"Phone Number",-1)),la={class:"col-5 q-animated q-animate-bounce"},sa=U(()=>r("div",null,"Status",-1)),na={__name:"WarehouseCreateComponent",setup(c){const $=ue(),x=J(),p=f(!1),v=j(()=>$.employee),V=["Open","Close"],y=()=>{p.value=!0},s=f(""),_=f(!1),k=f(!1),g=f(!1),D=async()=>{s.value.trim()&&(g.value=!0,await $.searchCertainEmployee(s.value),g.value=!1,_.value=!0)},L=l=>{console.log("Selected Employee:",l),u.employee_id=l.id,u.employee_name=`${l.firstname} ${l.middlename?l.middlename.charAt(0)+".":""} ${l.lastname}`,s.value=`${l.firstname} ${l.middlename?l.middlename.charAt(0)+".":""} ${l.lastname}`,_.value=!1,console.log("Filled addNewBranchForm Data:",u)},d=l=>{const t=E=>E?E.charAt(0).toUpperCase()+E.slice(1).toLowerCase():"",a=l.firstname?t(l.firstname):"No Firstname",i=l.middlename?t(l.middlename).charAt(0)+".":"",b=l.lastname?t(l.lastname):"No Lastname";return`${a} ${i} ${b}`},u=ae({name:"",location:"",employee_id:"",employee_name:"",phone:"",status:null}),n=async()=>{console.log("awarehoouse data send",u),k.value=!0,await x.createWarehouses(u),k.value=!1,h(),p.value=!1},h=()=>{u.name="",u.location="",u.person_incharge="",u.phone="",s.value=null,u.employee="",u.status=[""]};return(l,t)=>(m(),w("div",null,[e(q,{outline:"",icon:"add_circle",label:"Add Warehouse",onClick:y,style:{"background-color":"#ef4444"}}),e(Z,{modelValue:p.value,"onUpdate:modelValue":t[6]||(t[6]=a=>p.value=a),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:o(()=>[e(F,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:o(()=>[e(Q,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:o(()=>[Re,e(ne),A(e(q,{icon:"close",flat:"",dense:"",round:""},null,512),[[T]])]),_:1}),e(X,{class:"separator-gradient"}),e(Q,{class:"q-px-xl q-pt-none q-pb-lg"},{default:o(()=>[r("div",Je,[He,e(W,{class:"text-capitalize",modelValue:u.name,"onUpdate:modelValue":t[0]||(t[0]=a=>u.name=a),outlined:"",dense:"",rules:[a=>a&&a.length>0]},null,8,["modelValue","rules"])]),r("div",Ge,[Xe,e(W,{class:"text-capitalize",modelValue:u.location,"onUpdate:modelValue":t[1]||(t[1]=a=>u.location=a),outlined:"",dense:"",rules:[a=>a&&a.length>0]},null,8,["modelValue","rules"])]),r("div",Ye,[Ze,e(W,{modelValue:s.value,"onUpdate:modelValue":[t[2]||(t[2]=a=>s.value=a),D],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name or position",onFocus:t[3]||(t[3]=a=>_.value=!0)},{append:o(()=>[g.value?(m(),C(oe,{key:1,color:"grey",size:"sm"})):(m(),C(O,{key:0,name:"search"}))]),default:o(()=>[_.value&&s.value?(m(),w("div",ea,[e(F,null,{default:o(()=>[e(re,{separator:""},{default:o(()=>{var a;return[(a=v.value)!=null&&a.length?(m(!0),w(z,{key:1},te(v.value,i=>(m(),C(M,{onClick:b=>L(i),key:i.id,clickable:""},{default:o(()=>[e(de,null,{default:o(()=>[S(N(d(i)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(m(),C(M,{key:0},{default:o(()=>[S(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):le("",!0)]),_:1},8,["modelValue"])]),r("div",aa,[r("div",oa,[ta,e(W,{modelValue:u.phone,"onUpdate:modelValue":t[4]||(t[4]=a=>u.phone=a),outlined:"",dense:"",mask:"(+63) ### - ### - ####",placeholder:"(+63)### - ### - ####",rules:[a=>a&&a.length>0]},null,8,["modelValue","rules"])]),r("div",la,[sa,e(ie,{modelValue:u.status,"onUpdate:modelValue":t[5]||(t[5]=a=>u.status=a),outlined:"",dense:"",options:V,"hide-dropdown-icon":"",behavior:"menu"},null,8,["modelValue"])])])]),_:1}),e(Y,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:o(()=>[A(e(q,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[T]]),e(q,{class:"glossy",color:"teal",label:"Create",onClick:n,loading:k.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var ra=B(na,[["__scopeId","data-v-b8d017b8"]]);const da={class:"text-h6 text-dark"},ia={class:"q-gutter-x-sm"},ua={align:"right"},ca={__name:"WarehousePage",setup(c){return($,x)=>(m(),C(ve,null,{default:o(()=>[e(F,{class:"elegant-container",flat:""},{default:o(()=>[e(Q,{class:"row justify-between"},{default:o(()=>[r("div",da,[r("div",ia,[e(G,{label:"Open",outline:"",color:"info"}),e(G,{label:"Closed",outline:"",color:"accent"})])]),r("div",ua,[e(ra)])]),_:1}),e(Q,null,{default:o(()=>[e(Ke)]),_:1})]),_:1})]),_:1}))}};var Ea=B(ca,[["__scopeId","data-v-7966fcdc"]]);export{Ea as default};
