import{c as w,r as b,z as x,o as u,e as p,w as o,f as r,a3 as Q,a4 as T,a5 as C,a0 as E,$ as d,J as i,aK as V,K as I,bd as N,M as _,N as g,O as k,R as q,I as B,Q as K}from"./index.2b1de70f.js";import{Q as F}from"./QPage.c4b44fce.js";import{b as L,Q as P,a as U}from"./QTable.66fd7d8b.js";import{Q as $}from"./QTr.9ab9a69d.js";import{Q as z}from"./QPopupEdit.25617187.js";import{Q as A}from"./QSpinnerIos.5d849618.js";import{Q as M}from"./QInnerLoading.abfeecff.js";import{u as j}from"./employment-type.f6637812.js";import{t as D}from"./typography-format.78d1388c.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";import"./QVirtualScroll.b4dc0a33.js";import"./QList.97526116.js";import"./use-virtual-scroll.62921bb6.js";import"./rtl.276c3f1b.js";import"./QSelect.e59e8e7e.js";import"./QChip.5f0d57bb.js";import"./QMenu.f19a9477.js";import"./position-engine.3ef59a57.js";import"./selection.37bcf9b3.js";import"./axios.11c08e85.js";import"./date.751f5b12.js";const O=s=>(k("data-v-e4ef8322"),s=s(),q(),s),R={class:"q-pa-md",style:{"min-width":"300px","max-width":"400px"}},G=O(()=>i("div",{class:"text-h6 text-primary text-center q-mb-sm"}," Edit Salary ",-1)),H={class:"text-subtitle2 q-mb-md"},W={class:"row justify-end q-mt-md"},X={__name:"SalaryTable",setup(s){const{formatPrice:y}=D(),m=j(),f=w(()=>m.employmentType),n=b(!1);x(async()=>{n.value=!0;try{await m.fetchEmploymentType(),console.log("Employment Type List:",f.value)}catch(e){console.log("Error fetching employment types:",e)}finally{n.value=!1}});const h=e=>{if(e==null||e==="")return"";const l=parseFloat(e);return isNaN(l)?"":Number.isInteger(l)?String(parseInt(l)):String(l)},v=async(e,l)=>{console.log("updateSalary",e,l),n.value=!0;try{await m.updateSalary(e,l),g.create({message:"Salary updated successfully",color:"positive",position:"top",timeout:2e3})}catch(t){console.log("Error updating amount:",t),g.create({message:"Failed to update amount",color:"negative",position:"top",timeout:2e3})}finally{n.value=!1}},S=[{name:"category",required:!0,label:"Category",align:"center",field:e=>e.category||"N/A",format:e=>`${e}`},{name:"salary",required:!0,label:"Salary",align:"center",field:e=>e.salary||"N/A",format:e=>`${e}`}];return(e,l)=>(u(),p(U,{rows:f.value||[],columns:S,"row-key":"id",loading:n.value},{header:o(t=>[r($,{props:t,class:"gradient-header text-weight-bold"},{default:o(()=>[(u(!0),Q(T,null,C(t.cols,a=>(u(),p(L,{key:a.name,props:t,class:"text-center text-subtitle2"},{default:o(()=>[E(d(a.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell-salary":o(t=>[r(P,{props:t,class:"cursor-pointer"},{default:o(()=>[i("span",null,d(t.row.salary?V(y)(t.row.salary):" - - "),1),r(z,{modelValue:t.row.salary,"onUpdate:modelValue":[a=>t.row.salary=a,a=>v(t.row,a)]},{default:o(a=>[i("div",R,[G,i("div",H," Category: "+d(t.row.category),1),r(I,{modelValue:a.value,"onUpdate:modelValue":[c=>a.value=c,c=>a.value=c],type:"text",outlined:"",dense:"",autofocus:"",counter:"","model-value":h(a.value),onKeyup:N(a.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","model-value","onKeyup"]),i("div",W,[r(_,{flat:"",label:"Close",color:"primary",onClick:a.cancel},null,8,["onClick"]),r(_,{flat:"",label:"Save",color:"primary",onClick:a.set},null,8,["onClick"])])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),loading:o(()=>[r(M,{showing:""},{default:o(()=>[r(A,{size:"50px",color:"grey-10"})]),_:1})]),_:1},8,["rows","loading"]))}};var Y=J(X,[["__scopeId","data-v-e4ef8322"]]);const we={__name:"SalaryPage",setup(s){return(y,m)=>(u(),p(F,{class:"q-pa-md"},{default:o(()=>[r(K,{flat:""},{default:o(()=>[r(B,null,{default:o(()=>[r(Y)]),_:1})]),_:1})]),_:1}))}};export{we as default};
