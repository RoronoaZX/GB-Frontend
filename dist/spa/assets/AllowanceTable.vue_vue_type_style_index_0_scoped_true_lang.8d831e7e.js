import{d as i,r as c,N as n}from"./index.640cd289.js";import{api as r}from"./axios.1b168828.js";const g=i("employee-allowance",()=>{const p=c(null),l=c({data:[],total:0,per_page:7,current_page:1,last_page:1});return{allowance:p,allowances:l,createEmployeeAllowance:async a=>{var e,t;try{const o=await r.post("/api/employee-allowance",a);return n.create({type:"positive",message:"Allowance successfully created",timeout:1e3}),o.data}catch(o){let s="An error occurred. Please try again.";throw((e=o.response)==null?void 0:e.status)===409?s="Allowance for this employee already exists.":((t=o.response)==null?void 0:t.status)===422&&(s="Invalid data. Please check the inputs."),n.create({type:"negative",message:s,timeout:1e3}),o}},fetchEmployeeAllowance:async(a,e,t)=>{try{const o=await r.get("/api/employee-allowance",{params:{page:a,per_page:e,search:t}});l.value=o.data}catch(o){console.error("Error fetching allowance",o)}},searchAllowance:async a=>{try{console.log("Searching for employee with keyword:",a);const e=await r.post(`/api/search-allowance?keyword=${a}`);console.log("Allowance response:",e),l.value=e.data}catch(e){console.error("Error searching employee:",e)}},updateAmount:async(a,e)=>{console.log("updateAmount store",a,e);try{return await r.put("/api/update-employee-allowance/"+a.id,{amount:e})}catch(t){console.log(t)}}}});export{g as u};
