import{bd as ie,c as B,r as R,t as Fe,o as b,a2 as C,f as e,M as D,w as t,Q as A,I as $,ad as Z,J as a,K as G,L as ne,e as I,$ as S,a3 as L,a4 as re,_ as f,bc as Ee,aI as Ce,a1 as Q,a0 as Ye,N as de,O as W,R as X,z as pe,u as Me,ba as Ve,aJ as st,be as H,d as rt,aH as it,H as dt,P as We}from"./index.782b37a7.js";import{Q as De}from"./QSpace.83f07de6.js";import{Q as Ae,a as te,b as Ue,c as ae}from"./QTabPanels.24a26676.js";import{Q as ct}from"./QPage.52edbe9d.js";import{Q as Ie,a as ge,b as me}from"./QList.b2323d49.js";import{b as we}from"./use-virtual-scroll.c02ee7a9.js";import{C as ee}from"./ClosePopup.02ad7db9.js";import{u as Ke}from"./branch-product.d535e727.js";import{u as Xe}from"./product.ff226b9c.js";import{Q as He}from"./QSpinnerDots.85ad147e.js";import{Q as O}from"./QTd.4cd3be71.js";import{Q as Y}from"./QBadge.a3031ccf.js";import{Q as le}from"./QTooltip.14472590.js";import{Q as Te}from"./QPopupEdit.e6125bcd.js";import{Q as se}from"./QTable.372abecc.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";import{api as ke}from"./axios.a69f9a91.js";import{u as Ge}from"./branch-rawMaterials.95fa11cb.js";import{u as ut}from"./raw-material.a8e3dd70.js";import{u as ve}from"./use-dialog-plugin-component.e10a0570.js";import{q as oe}from"./date.75a92446.js";import{p as Le,v as Ze}from"./vfs_fontes.3eb8cb31.js";import{u as xe}from"./use-quasar.69fba21a.js";import{Q as Re}from"./QScrollArea.3f50c6a3.js";import{u as Se,a as Be,b as je}from"./other-product.69fd3ef4.js";import{Q as Qe}from"./QSelect.dfcf9d2f.js";import{u as mt}from"./recipe.0b35f036.js";import{u as ze}from"./branch-recipe.d0ba8451.js";import"./QResizeObserver.9eeed10b.js";import"./use-panel.e51c356e.js";import"./touch.9135741d.js";import"./selection.c8b99c33.js";import"./QMenu.6a7eea7c.js";import"./QVirtualScroll.44d1d69a.js";import"./QScrollObserver.cf39a4e3.js";import"./TouchPan.73eb8c51.js";import"./QChip.75d9ba19.js";const pt=a("div",{class:"text-h6"},"Create Branch Product",-1),_t={class:"q-mb-lg"},ft={key:0,class:"custom-list z-top"},gt=a("div",null,"Product Name",-1),vt=a("div",null,"Category",-1),ht={class:"row justify-between"},yt=a("div",null,"Beginnings",-1),bt=a("div",null,"Total Quantity",-1),wt=a("div",null,"Price",-1),xt={__name:"ProductCreate",setup(s){const p=ie(),y=Xe(),x=B(()=>y.products),_=Ke(),u=R(""),w=async()=>{y.searchProducts(u.value)},r=B(()=>i.price!==0&&i.beginnings!==0&&i.total_quantity!==0),d=R(!1),g=()=>{d.value=!0},l=()=>{m(),d.value=!1},o=v=>v?v.split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1).toLowerCase()).join(" "):"",n=v=>{i.product_id=v.id,i.product_name=v.name,i.category=v.category,u.value=""},i=Fe({product_id:"",product_name:"",price:0,beginnings:0,total_quantity:0,branches_id:p.params.branch_id}),m=()=>{i.product_id="",i.product_name="",i.category="",i.price=0,i.beginnings=0,i.total_quantity=0},c=async()=>{try{const{product_name:v,...h}=i;await _.createBranchProducts(h),console.log("data to send",h),m(),d.value=!1}catch(v){console.log(v)}};return(v,h)=>(b(),C(L,null,[e(D,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Product",onClick:g}),e(Q,{modelValue:d.value,"onUpdate:modelValue":h[6]||(h[6]=P=>d.value=P),persistent:""},{default:t(()=>[e(A,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e($,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[pt,e(De),Z(e(D,{icon:"close",flat:"",dense:"",round:""},null,512),[[ee]])]),_:1}),e($,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",_t,[e(G,{modelValue:u.value,"onUpdate:modelValue":[h[0]||(h[0]=P=>u.value=P),w],debounce:"1000",outlined:"",rounded:"",placeholder:"Search product",dense:""},{append:t(()=>[a("div",null,[e(ne,{name:"search"})])]),default:t(()=>[u.value?(b(),C("div",ft,[e(A,null,{default:t(()=>[e(Ie,{separator:""},{default:t(()=>{var P;return[(P=x.value)!=null&&P.length?(b(!0),C(L,{key:1},re(x.value,V=>(b(),I(ge,{onClick:U=>n(V),key:V.id,clickable:""},{default:t(()=>[e(me,null,{default:t(()=>[e(we,null,{default:t(()=>[S(f(o(V.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(b(),I(ge,{key:0},{default:t(()=>[S(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ee("",!0)]),_:1},8,["modelValue"])]),a("div",null,[gt,e(G,{modelValue:i.product_name,"onUpdate:modelValue":h[1]||(h[1]=P=>i.product_name=P),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[vt,e(G,{modelValue:i.category,"onUpdate:modelValue":h[2]||(h[2]=P=>i.category=P),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",ht,[a("div",null,[yt,e(G,{modelValue:i.beginnings,"onUpdate:modelValue":h[3]||(h[3]=P=>i.beginnings=P),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[bt,e(G,{modelValue:i.total_quantity,"onUpdate:modelValue":h[4]||(h[4]=P=>i.total_quantity=P),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])]),a("div",null,[wt,e(G,{modelValue:i.price,"onUpdate:modelValue":h[5]||(h[5]=P=>i.price=P),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])]),_:1}),e(Ce,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(D,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:l}),e(D,{class:"glossy",color:"teal",label:"Create",onClick:c,disable:!r.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const et=s=>(W("data-v-196482e9"),s=s(),X(),s),$t=et(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),kt=et(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),Ct={__name:"ProductDelete",props:["delete"],setup(s){const p=Ke(),y=s;console.log("delte",y.delete.row.id);const x=async()=>{try{await p.deleteBranchProducts(y.delete.row.id),de.create({type:"negative",icon:"warning",message:"Branch product successfully deleted",timeout:1e3,position:"top"}),_.value=!1}catch(w){console.error(w.message)}},_=R(!1),u=()=>{console.log("ID",y.delete.row.id),_.value=!0};return(w,r)=>(b(),C(L,null,[e(D,{onClick:u,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"",align:"center"},{default:t(()=>[e(le,{class:"bg-negative",delay:200},{default:t(()=>[S("Delete")]),_:1})]),_:1}),e(Q,{modelValue:_.value,"onUpdate:modelValue":r[0]||(r[0]=d=>_.value=d)},{default:t(()=>[e(A,null,{default:t(()=>[e($,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[$t,kt]),_:1}),e(Ye,{class:"q-mb-md"}),e($,null,{default:t(()=>[e(Ce,{align:"right",class:"q-pt-none"},{default:t(()=>[Z(e(D,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[ee]]),e(D,{dense:"",label:"Delete",color:"negative",onClick:x,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Rt=E(Ct,[["__scopeId","data-v-196482e9"]]);const Pt=s=>(W("data-v-7e992bc7"),s=s(),X(),s),St={class:"row justify-between"},Vt={class:"q-my-sm"},Dt={key:0,class:"spinner-wrapper"},qt={key:1},Nt={key:0,class:"data-error"},Tt=Pt(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),At={key:1},Ut={__name:"ProductTable",setup(s){const y=ie().params.branch_id,x=Ke(),_=R(""),u=R(!0),w=R([]),r=R(!1),d=R({rowsPerPage:0}),g=B(()=>x.branchProducts);console.log("branchssdfrer",g.value);const l=B(()=>_.value?g.value.filter(V=>V.name.toLowerCase().includes(_.value.toLowerCase())):g.value),o=V=>V?V.split(" ").map(U=>U.charAt(0).toUpperCase()+U.slice(1).toLowerCase()).join(" "):"";pe(async()=>{y&&await n(y)});const n=async V=>{try{u.value=!0;const U=await x.fetchBranchProducts(V);g.value=U,g.value.length||(r.value=!0),console.log("Branch product",g.value)}catch(U){console.log("Error fetching branch product:",U),r.value=!0}finally{u.value=!1}};Me(_,async V=>{u.value=!0,await new Promise(U=>setTimeout(U,1e3)),u.value=!1,r.value=l.value.length===0});async function i(V,U){try{const N=await ke.put("/api/update-branch-products/"+V.id,{price:parseInt(U)});if(N.status===200){const k=w.value.findIndex(F=>F.id==V.id);w.value[k]=parseInt(U),de.create({type:"positive",message:N.data.message,timout:1e3,position:"top"})}}catch(N){console.error("Error updating price:",N)}}async function m(V,U){try{const N=await ke.put("/api/update-branch-products-beginnings/"+V.id,{beginnings:parseInt(U)});if(N.status===200){const k=w.value.findIndex(F=>F.id==V.id);w.value[k]=parseInt(U),de.create({type:"positive",message:N.data.message,timout:1e3,position:"top"})}}catch(N){console.error("Error updating price:",N)}}async function c(V,U){try{const N=await ke.put("/api/update-branch-products-total-quantity/"+V.id,{total_quantity:parseInt(U)});if(N.status===200){const k=w.value.findIndex(F=>F.id==V.id);w.value[k]=parseInt(U),de.create({type:"positive",message:N.data.message,timout:1e3,position:"top"})}}catch(N){console.error("Error updating price:",N)}}const v=V=>{switch(V){case"Bread":return"brown";case"Selecta":return"red-6";case"Softdrinks":return"accent";default:return"grey"}},h=V=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(V),P=[{name:"name",label:"Product Name",align:"center",field:V=>V.product.name,format:V=>`${V}`,sortable:!0},{name:"category",align:"center",label:"Category",field:"category",sortable:!0},{name:"price",align:"center",label:"Price",field:V=>h(V),sortable:!0},{name:"beginnings",align:"center",label:"Beginnings",field:"beginnings",format:V=>`${V} pcs`,sortable:!0},{name:"total_quantity",align:"center",label:"Quantity",field:"total_quantity",format:V=>`${V} pcs`,sortable:!0},{name:"action",align:"center",label:"Action",field:"action",sortable:!0}];return(V,U)=>(b(),C(L,null,[a("div",St,[a("div",null,[e(G,{class:"q-pb-lg q-pl-md",modelValue:_.value,"onUpdate:modelValue":U[0]||(U[0]=N=>_.value=N),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"1500px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(ne,{name:"search"})]),_:1},8,["modelValue"])]),a("div",Vt,[e(xt)])]),u.value?(b(),C("div",Dt,[e(He,{size:"50px",color:"primary"})])):(b(),C("div",qt,[l.value.length===0?(b(),C("div",Nt,[e(ne,{name:"warning",color:"warning",size:"4em"}),Tt])):(b(),I(se,{key:1,class:"table-container sticky-header",filter:_.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:P,rows:l.value,"row-key":"name","virtual-scroll":"",pagination:d.value,"onUpdate:pagination":U[1]||(U[1]=N=>d.value=N),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"}},{"body-cell-name":t(N=>[e(O,{key:"name",props:N},{default:t(()=>{var k;return[S(f((k=N.row.product)!=null&&k.name?o(N.row.product.name):"No data available"),1)]}),_:2},1032,["props"])]),"body-cell-category":t(N=>[e(O,{key:"name",props:N},{default:t(()=>[N.row.category?(b(),I(Y,{key:0,color:v(N.row.category)},{default:t(()=>[S(f(N.row.category),1)]),_:2},1032,["color"])):(b(),C("span",At,"No data available"))]),_:2},1032,["props"])]),"body-cell-price":t(N=>[e(O,{props:N,class:"cursor-pointer"},{default:t(()=>[a("span",null,[S(f(h(N.row.price))+" ",1),e(le,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[S("Edit Price")]),_:1})]),e(Te,{"onUpdate:modelValue":[k=>i(N.row,k),k=>N.row.price=k],modelValue:N.row.price,"auto-save":""},{default:t(k=>[e(G,{modelValue:k.value,"onUpdate:modelValue":F=>k.value=F,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:Ve(k.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(N=>[e(O,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[S(f(N.row.beginnings?N.row.beginnings:"Set Beginnings")+" ",1),e(le,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[S("Edit beginnings")]),_:1})]),e(Te,{"onUpdate:modelValue":[k=>m(N.row,k),k=>N.row.beginnings=k],modelValue:N.row.beginnings,"auto-save":""},{default:t(k=>[e(G,{modelValue:k.value,"onUpdate:modelValue":F=>k.value=F,dense:"",autofocus:"",counter:"",mask:"###",onKeyup:Ve(k.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-total_quantity":t(N=>[e(O,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[S(f(N.row.total_quantity?N.row.total_quantity:"Set Quantity")+" ",1),e(le,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[S("Edit quantity")]),_:1})]),e(Te,{"onUpdate:modelValue":[k=>c(N.row,k),k=>N.row.total_quantity=k],modelValue:N.row.total_quantity,"auto-save":""},{default:t(k=>[e(G,{modelValue:k.value,"onUpdate:modelValue":F=>k.value=F,dense:"",autofocus:"",counter:"",mask:"###",onKeyup:Ve(k.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-action":t(N=>[e(O,{class:"q-gutter-x-md",props:N},{default:t(()=>[e(Rt,{delete:N},null,8,["delete"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Bt=E(Ut,[["__scopeId","data-v-7e992bc7"]]);const It={class:"q-gutter-sm"},Ft={__name:"ProductPage",setup(s){return(p,y)=>(b(),C("div",It,[a("div",null,[e(Bt)])]))}},Lt=a("div",{class:"text-h6"},"Create Branch Raw Materials",-1),zt={class:"q-mb-lg"},Mt={key:0,class:"custom-list z-top"},Ht=a("div",null,"Raw Materials Code",-1),jt=a("div",null,"Raw Materials Name",-1),Ot=a("div",null,"Category",-1),Qt=a("div",null,"Quantity",-1),Et={__name:"RawMaterialsCreate",setup(s){const p=ie(),y=ut(),x=B(()=>y.rawMaterials),_=Ge(),u=R(""),w=async()=>{y.searchRawMaterials(u.value)},r=B(()=>n.total_quantity!==""),d=R(!1),g=()=>{d.value=!0},l=()=>{i(),d.value=!1},o=c=>{n.ingredients_id=c.id,n.ingredient_name=c.name,n.ingredient_code=c.code,n.category=c.category,n.unit=c.unit,u.value=""},n=Fe({ingredients_id:"",ingredient_name:"",ingredient_code:"",total_quantity:"",category:"",unit:"",branch_id:p.params.branch_id}),i=()=>{n.ingredients_id="",n.ingredient_name="",n.ingredient_code="",n.total_quantity="",n.ingredients_id="",n.category="",n.unit=""},m=async()=>{try{const{product_name:c,...v}=n;await _.createBranchRawMaterials(v),console.log("data to send",v),i(),d.value=!1}catch(c){console.log(c)}};return(c,v)=>(b(),C(L,null,[e(D,{outline:"",class:"text-dark q-pa-sm",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Raw Material",onClick:g,style:{background:"#f43f5e"}}),e(Q,{modelValue:d.value,"onUpdate:modelValue":v[5]||(v[5]=h=>d.value=h),persistent:""},{default:t(()=>[e(A,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e($,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[Lt,e(De),Z(e(D,{icon:"close",flat:"",dense:"",round:""},null,512),[[ee]])]),_:1}),e($,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",zt,[e(G,{modelValue:u.value,"onUpdate:modelValue":[v[0]||(v[0]=h=>u.value=h),w],debounce:"1000",outlined:"",rounded:"",placeholder:"Search Raw Materials",dense:""},{append:t(()=>[a("div",null,[e(ne,{name:"search"})])]),default:t(()=>[u.value?(b(),C("div",Mt,[e(A,null,{default:t(()=>[e(Ie,{separator:""},{default:t(()=>{var h;return[(h=x.value)!=null&&h.length?(b(!0),C(L,{key:1},re(x.value,P=>(b(),I(ge,{onClick:V=>o(P),key:P.id,clickable:""},{default:t(()=>[e(me,null,{default:t(()=>[e(we,null,{default:t(()=>[S(f(P.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(b(),I(ge,{key:0},{default:t(()=>[S(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ee("",!0)]),_:1},8,["modelValue"])]),a("div",null,[Ht,e(G,{modelValue:n.ingredient_code,"onUpdate:modelValue":v[1]||(v[1]=h=>n.ingredient_code=h),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[jt,e(G,{modelValue:n.ingredient_name,"onUpdate:modelValue":v[2]||(v[2]=h=>n.ingredient_name=h),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[Ot,e(G,{modelValue:n.category,"onUpdate:modelValue":v[3]||(v[3]=h=>n.category=h),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[Qt,e(G,{modelValue:n.total_quantity,"onUpdate:modelValue":v[4]||(v[4]=h=>n.total_quantity=h),type:"number",outlined:"",suffix:n.unit||"",dense:"",rules:[h=>h&&h.length>0||"Total quantity is required"]},null,8,["modelValue","suffix","rules"])])]),_:1}),e(Ce,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(D,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:l}),e(D,{class:"glossy",color:"teal",label:"Create",onClick:m,disable:!r.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const tt=s=>(W("data-v-17ad5e9f"),s=s(),X(),s),Yt=tt(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),Kt=tt(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),Gt={__name:"RawMaterialsTableDelete",props:["delete"],setup(s){const p=Ge(),y=s,x=async()=>{console.log("clickkkd");try{await p.deleteBranchRawMaterials(y.delete.row.id),de.create({type:"negative",icon:"warning",message:`Raw Materials ${y.delete.row.name}  successfully deleted`,timeout:1e3,position:"top"}),_.value=!1}catch(w){console.error(w.message)}},_=R(!1),u=()=>{_.value=!0};return(w,r)=>(b(),C(L,null,[e(D,{onClick:u,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"",align:"center"},{default:t(()=>[e(le,{class:"bg-negative",delay:200},{default:t(()=>[S("Delete")]),_:1})]),_:1}),e(Q,{modelValue:_.value,"onUpdate:modelValue":r[0]||(r[0]=d=>_.value=d)},{default:t(()=>[e(A,null,{default:t(()=>[e($,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[Yt,Kt]),_:1}),e(Ye,{class:"q-mb-md"}),e($,null,{default:t(()=>[e(Ce,{align:"right",class:"q-pt-none"},{default:t(()=>[Z(e(D,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[ee]]),e(D,{dense:"",label:"Delete",color:"negative",onClick:x,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Jt=E(Gt,[["__scopeId","data-v-17ad5e9f"]]);const at=s=>(W("data-v-74a3fea6"),s=s(),X(),s),Wt={class:"row justify-between"},Xt={class:"q-my-sm"},Zt={key:0,class:"spinner-wrapper"},ea={key:1},ta={key:0,class:"data-error"},aa=at(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),la=at(()=>a("div",{class:"text-white"},"Edit Available Stocks",-1)),na={class:"row justify-center q-gutter-x-md"},oa={__name:"RawMaterialsTable",setup(s){const y=ie().params.branch_id,x=Ge(),_=R(""),u=R(!0),w=R([]),r=R(!1),d=R({rowsPerPage:0}),g=B(()=>x.branchRawMaterials),l=B(()=>_.value?g.value.filter(v=>v.name.toLowerCase().includes(_.value.toLowerCase())):g.value);pe(async()=>{console.log("props.branchId in onMounted:",y),y&&await o(y)});const o=async v=>{try{u.value=!0;const h=await x.fetchBranchRawMaterials(v);g.value=h,g.value.length||(r.value=!0),console.log("Branch Raw Materials",g.value)}catch(h){console.log("Error fetching branch product:",h),r.value=!0}finally{u.value=!1}};async function n(v,h){try{const P=await ke.put("/api/update-branch-rawMaterials/"+v.id,{total_quantity:parseInt(h)});if(P.status===200){const V=w.value.findIndex(U=>U.id==v.id);w.value[V]=parseInt(h),de.create({type:"positive",message:P.data.message,timout:1e3,position:"top"})}}catch(P){console.error("Error updating price:",P)}}Me(_,async v=>{u.value=!0,await new Promise(h=>setTimeout(h,1e3)),u.value=!1,r.value=l.value.length===0});const i=v=>{const h=v.total_quantity;if(v.ingredients.unit==="Grams"&&h<1e3)return"bg-red";let V;return h>=1e3?V=h/1e3:V=h,V<5?V<=2?"bg-red":(V<=3,"bg-warning"):"bg-positive"},m=v=>{const h=v.total_quantity,P=v.ingredients.unit;if(h>1e3){const V=(h/1e3).toFixed(2);return V.endsWith(".00")?`${Math.round(h/1e3)} kilos`:`${V} kilos`}else return h>1?`${h} ${P}`:`${h} ${P}`},c=[{name:"code",label:"Raw Materials Code",align:"center",field:v=>{var h,P;return(P=(h=v==null?void 0:v.ingredients)==null?void 0:h.code)!=null?P:"No Code"},format:v=>`${v}`,sortable:!0},{name:"name",label:"Raw Materials Name",align:"center",field:v=>{var h,P;return(P=(h=v==null?void 0:v.ingredients)==null?void 0:h.name)!=null?P:"No Code"},format:v=>`${v}`,sortable:!0},{name:"total_quantity",label:"Available Stocks",align:"center",field:"total_quantity",sortable:!0},{name:"action",label:"Action",align:"center",sortable:!0}];return(v,h)=>(b(),C(L,null,[a("div",Wt,[a("div",null,[e(G,{class:"q-pb-lg q-pl-md",modelValue:_.value,"onUpdate:modelValue":h[0]||(h[0]=P=>_.value=P),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"5000px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(ne,{name:"search"})]),_:1},8,["modelValue"])]),a("div",Xt,[e(Et)])]),u.value?(b(),C("div",Zt,[e(He,{size:"50px",color:"primary"})])):(b(),C("div",ea,[l.value.length===0?(b(),C("div",ta,[e(ne,{name:"warning",color:"warning",size:"4em"}),aa])):(b(),I(se,{key:1,class:"table-container sticky-header",filter:_.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:c,rows:l.value,"row-key":"name","virtual-scroll":"",pagination:d.value,"onUpdate:pagination":h[1]||(h[1]=P=>d.value=P),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"340px"}},{"body-cell-total_quantity":t(P=>[e(O,{props:P},{default:t(()=>[e(Y,{square:"",class:st(["text-white cursor-pointer",i(P.row)])},{default:t(()=>[S(f(m(P.row))+" ",1),e(le,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[la]),_:1}),e(Te,{"onUpdate:modelValue":[V=>n(P.row,V),V=>P.row.total_quantity=V],modelValue:P.row.total_quantity,"auto-save":""},{default:t(V=>[e(G,{modelValue:V.value,"onUpdate:modelValue":U=>V.value=U,dense:"",suffix:P.row.ingredients.unit,mask:"########",autofocus:"",counter:"",onKeyup:Ve(V.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","suffix","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["class"])]),_:2},1032,["props"])]),"body-cell-action":t(P=>[e(O,{props:P},{default:t(()=>[a("div",na,[e(Jt,{delete:P},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var sa=E(oa,[["__scopeId","data-v-74a3fea6"]]);const ra={class:"q-gutter-sm"},ia={class:"q-gutter-x-sm"},da={__name:"RawMaterialsPage",setup(s){return(p,y)=>(b(),C("div",ra,[a("div",ia,[e(Y,{label:"Good",class:"text-white",color:"positive"}),e(Y,{label:"Warning",class:"text-white",color:"warning"}),e(Y,{label:"Danger",class:"text-white",color:"red"})]),a("div",null,[e(sa)])]))}};const Je=s=>(W("data-v-239e42ee"),s=s(),X(),s),ca=Je(()=>a("div",{class:"row justify-between"},[a("div",{class:"text-h6"},"Baker Report")],-1)),ua={class:"text-subtitle1 text-weight-regular"},ma={class:"row q-gutter-md"},pa={class:"text-h6 row justify-between"},_a={class:"row items-start q-gutter-x-md text-overline elegant-text"},fa={class:"row q-gutter-x-sm q-gutter-y-xm"},ga={class:"row q-gutter-x-sm q-gutter-y-xm"},va={class:"row q-gutter-x-sm"},ha={class:"row q-gutter-x-sm"},ya={class:"row"},ba={class:"col-6"},wa=Je(()=>a("div",{class:"text-subtitle1",align:"center"},"Ingredients",-1)),xa={class:"row justify-center q-gutter-x-lg q-pa-lg"},$a={class:"row items-start"},ka={class:"col-6"},Ca=Je(()=>a("div",{class:"text-subtitle1",align:"center"},"Bread",-1)),Ra={class:"row justify-center q-gutter-x-lg q-pa-lg"},Pa={key:0},Sa={key:1},Va={key:2},Da={class:"q-ma-sm"},qa={class:"q-ma-sm",align:"center"},Na=["src"],Ta={__name:"BakerReportPanel",props:["bakersReport"],setup(s){Le.exports.vfs=Ze;const p=s,y=p.bakersReport;console.log("Bakers Report",p.bakersReport);const x=R(!0),_=R(!1),u=R(""),w=m=>oe.formatDate(m,"MMM. DD, YYYY"),r=m=>m?m.split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1).toLowerCase()).join(" "):"",d=m=>{const c=V=>V?V.charAt(0).toUpperCase()+V.slice(1).toLowerCase():"",v=m.firstname?c(m.firstname):"No Firstname",h=m.middlename?c(m.middlename).charAt(0)+".":"",P=m.lastname?c(m.lastname):"No Lastname";return`${v} ${h} ${P}`.trim()},g=m=>{const c=new Date(m),v={hour:"2-digit",minute:"2-digit",hour12:!0};return c.toLocaleTimeString(void 0,v)},l=m=>{switch(m){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},o=m=>m?m.recipe_category==="Filling"?m.filling_bakers_reports||[]:m.recipe_category==="Dough"?m.bread_production_reports||[]:[]:(console.error("No bakerReport provided"),[]),n=m=>{var k,F,q,T;console.log("bakerReport",m);const c=`${m.branch_recipe.recipe.name} (${m.recipe_category})`,v=m.branch_recipe.recipe.target,h=m.actual_target,P=m.kilo,V=m.over,U=m.short,N={table:{widths:["50%","50%"],body:[[{text:"Recipe Name",style:"tableHeader",alignment:"left"},{text:c,style:"tableHeader",alignment:"center"}],[{text:"Target per Kilo",style:"tableHeader",alignment:"left"},{text:`${v} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Actual Target",style:"tableHeader",alignment:"left"},{text:`${h} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Kilo",style:"tableHeader",alignment:"left"},{text:`${P} kg/s`,style:"tableHeader",alignment:"center"}],[{text:"Over",style:"tableHeader",alignment:"left"},{text:`${V} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Short",style:"tableHeader",alignment:"left"},{text:`${U} pcs`,style:"tableHeader",alignment:"center"}]]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}};return{content:[{text:"Baker Report",style:"header",alignment:"center"},{columns:[{text:`Branch Name: ${m.branch.name||"No name available"}
                Baker: ${d(((k=m==null?void 0:m.user)==null?void 0:k.employee)||"Unknown Baker Name")}
                Recipe: ${((F=m.recipe)==null?void 0:F.name)||"Unknown Recipe"} (${m.recipe_category||"Unknown Category"})
             `,width:"80%",margin:[0,0,0,10]},{text:`Date: ${w(((q=p.bakersReport[0])==null?void 0:q.created_at)||((T=p.bakersReport[1])==null?void 0:T.created_at)||"No name available")}
                Time: ${g(m.created_at)}
                Status: ${r(m.status)}`,margin:[0,0,0,10]}]},{columns:[{width:"50%",stack:[{text:"Bread Production",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*"],body:[[{text:"Bread Name",style:"tableHeader",alignment:"center"},{text:"Production",style:"tableHeader",alignment:"center"}],...o(m).map(j=>{var ce;return[{text:((ce=j==null?void 0:j.bread)==null?void 0:ce.name)||"Unknown Bread",style:"body"},{text:m.recipe_category==="Filling"?`${(j==null?void 0:j.filling_production)||"0"} pcs`:`${j==null?void 0:j.bread_new_production} pcs`,style:"body",alignment:"center"}]})]}}],columnGap:10},{width:"50%",stack:[{text:"Ingredients",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*"],body:[[{text:"Ingredient Code",style:"tableHeader",alignment:"center"},{text:"Quantity",style:"tableHeader",alignment:"center"}],...(m.ingredient_bakers_reports||[]).map(j=>{var ce,J;return[{text:((ce=j==null?void 0:j.ingredients)==null?void 0:ce.code)||"Unknown Ingredient",style:"body"},{text:`${(j==null?void 0:j.quantity)||"Unknown Quantity"} ${((J=j==null?void 0:j.ingredients)==null?void 0:J.unit)||""}`,style:"body",alignment:"center"}]})]}}],columnGap:10}],columnGap:20},{canvas:[{type:"line",x1:0,y1:25,x2:555,y2:25,lineWidth:1,dash:{length:5,space:5},lineColor:"#000000",margin:[0,20,0,0]}]},{margin:[0,20,0,0],stack:[{text:"Summary",style:"subheader",alignment:"center"},N]}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableHeader:{bold:!0,fontSize:10,color:"black"},body:{fontSize:8}},pageMargins:[20,20,20,20]}},i=m=>{const c=n(m);Le.exports.createPdf(c).getDataUrl(v=>{u.value=v,_.value=!0})};return(m,c)=>(b(),C("div",null,[e(A,{class:"my-card q-pa-md"},{default:t(()=>{var v,h,P,V,U,N;return[ca,a("div",ua,[a("div",null," Name: "+f(d(((h=(v=H(y)[0])==null?void 0:v.user)==null?void 0:h.employee)||((V=(P=H(y)[1])==null?void 0:P.user)==null?void 0:V.employee)||"No name available")),1),a("div",null," Date: "+f(`${w(((U=p.bakersReport[0])==null?void 0:U.created_at)||((N=p.bakersReport[1])==null?void 0:N.created_at)||"No name available")}`),1)]),e($,null,{default:t(()=>[a("div",ma,[(b(!0),C(L,null,re(H(y),(k,F)=>(b(),C("div",{key:F,class:"row q-gutter-sm"},[e(A,{flat:"",dense:"",bordered:"",class:"q-pa-md q-my-sm user-card",style:{width:"675px","max-width":"1500px"}},{default:t(()=>{var q;return[a("div",pa,[a("div",null,f(`${r((q=k.branch_recipe.recipe)==null?void 0:q.name)||"Unknown Recipe"} (${k.recipe_category||"Unknown Category"})`),1),e(D,{padding:"xs md",label:"Print",icon:"print",outline:"",onClick:T=>i(k),class:"user-button"},null,8,["onClick"])]),a("div",null,"Time: "+f(g(k.created_at)),1),a("div",null,[S(" Status: "),e(Y,{align:"middle",color:l(k.status)},{default:t(()=>[S(f(r(k.status)),1)]),_:2},1032,["color"])]),e($,null,{default:t(()=>[a("div",_a,[a("div",fa,[S(" Actual Target: "),a("div",null,[e(Y,{outline:"",align:"middle",color:"teal"},{default:t(()=>[S(f(`${(k==null?void 0:k.actual_target)||"No target"} pcs`),1)]),_:2},1024)])]),a("div",ga,[S(" Kilo: "),a("div",null,[e(Y,{outline:"",align:"middle",color:"teal"},{default:t(()=>[S(f(`${(k==null?void 0:k.kilo)||"No Kilo"} kgs`),1)]),_:2},1024)])]),a("div",va,[S(" Over: "),a("div",null,[e(Y,{outline:"",align:"middle",color:"teal"},{default:t(()=>[S(f(`${k.over} pcs`),1)]),_:2},1024)])]),a("div",ha,[S(" Short: "),a("div",null,[e(Y,{outline:"",align:"middle",color:"teal"},{default:t(()=>[S(f(`${k.short} pcs`),1)]),_:2},1024)])])])]),_:2},1024),e($,null,{default:t(()=>[a("div",ya,[a("div",ba,[wa,a("div",xa,[a("div",null,[(b(!0),C(L,null,re(k.ingredient_bakers_reports||[],(T,j)=>{var ce,J;return b(),C("div",{key:j,class:"row justify-between q-gutter-y-lg q-gutter-x-xl text-weight-light"},[a("div",null,f(((ce=T==null?void 0:T.ingredients)==null?void 0:ce.name)||"Unknown Ingredient"),1),a("div",$a,f(`${(T==null?void 0:T.quantity)||"Unknown Quantity"} ${((J=T==null?void 0:T.ingredients)==null?void 0:J.unit)||""}`),1)])}),128))])])]),a("div",ka,[Ca,a("div",Ra,[a("div",null,[(b(!0),C(L,null,re(o(k),(T,j)=>{var ce;return b(),C("div",{key:j,class:"row justify-between q-gutter-y-lg q-gutter-x-xl text-weight-light"},[a("div",null,f(((ce=T==null?void 0:T.bread)==null?void 0:ce.name)||"Unknown Bread"),1),a("div",null,[k.recipe_category==="Filling"?(b(),C("div",Pa,f(`${(T==null?void 0:T.filling_production)||"0"} pcs`),1)):k.recipe_category==="Dough"?(b(),C("div",Sa,f(`${T==null?void 0:T.bread_new_production} pcs`),1)):(b(),C("div",Va,f("0 pcs")))])])}),128))])])])])]),_:2},1024)]}),_:2},1024)]))),128))])]),_:1})]}),_:1}),e(Q,{modelValue:_.value,"onUpdate:modelValue":c[0]||(c[0]=v=>_.value=v),"backdrop-filter":m.backdropFilter,maximized:x.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[a("div",Da,[a("div",qa,[Z((b(),I(D,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},{default:t(()=>[e(le,null,{default:t(()=>[S("Close")]),_:1})]),_:1})),[[ee]])]),a("div",null,[a("iframe",{src:u.value,width:"100%",height:"700px"},null,8,Na)])])]),_:1},8,["modelValue","backdrop-filter","maximized"])]))}};var Aa=E(Ta,[["__scopeId","data-v-239e42ee"]]);const Ua={class:"row justify-between text-white"},Ba=a("div",{class:"text-h6"},"Bread Report",-1),Ia={class:"row justify-end q-mt-md"},Fa={class:"text-h6"},La={__name:"BreadReport",props:["reports"],setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=ve(),u=s;console.log("Reports data structure:",u.reports);const w=o=>o?o.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",r=[{name:"name",label:"Bread Name",field:o=>(console.log("Row data:",o),o.bread.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:o=>`${o}`},{name:"newProduction",label:"New Production (PCS)",field:"new_production",format:o=>`${o}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:o=>`${o}`},{name:"breadOut",label:"Bread Out (PCS)",field:"bread_out",format:o=>`${o}`},{name:"breadSold",label:"Bread Sold (PCS)",field:"bread_sold",format:o=>`${o}`},{name:"total",label:"Bread Total (PCS)",field:"total",format:o=>`${o}`},{name:"sales",label:"Total Sales",field:"sales"}],d=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(o),g=B(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),l=B(()=>{const o=g.value.reduce((n,i)=>{const m=parseFloat(i.sales)||0;return console.log(`Adding salesAmount: ${m} to total: ${n}`),n+m},0);return console.log("Overall Total Sales computed as:",o),o});return console.log("Overall Total Sales:",l.value),(o,n)=>(b(),I(Q,{ref_key:"dialogRef",ref:p,onHide:H(y)},{default:t(()=>[e(A,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e($,{style:{"background-color":"#795548"}},{default:t(()=>[a("div",Ua,[Ba,Z((b(),I(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[ee]])])]),_:1}),e($,null,{default:t(()=>[e(se,{filter:o.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:r,rows:g.value,"row-key":"name","virtual-scroll":"",pagination:o.pagination,"onUpdate:pagination":n[0]||(n[0]=i=>o.pagination=i),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,f(`${w(i.row.bread.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,f(`${d(i.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,f(`${d(i.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e($,null,{default:t(()=>[a("div",Ia,[a("div",Fa," Overall Total Sales: "+f(d(l.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},za={class:"row justify-between text-white"},Ma=a("div",{class:"text-h6"},"Selecta Report",-1),Ha={class:"row justify-end q-mt-md"},ja={class:"text-h6"},Oa={__name:"SelectaReport",props:["reports"],setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=ve(),u=s;console.log("Reports data structure:",u.reports);const w=o=>o?o.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",r=[{name:"name",label:"Selecta Name",field:o=>(console.log("Row data:",o),o.selecta.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:o=>`${o}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:o=>`${o}`},{name:"out",label:"Selecta Out (PCS)",field:"out",format:o=>`${o}`},{name:"sold",label:"Selecta Sold (PCS)",field:"sold",format:o=>`${o}`},{name:"sales",label:"Total Sales",field:"sales"}],d=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(o),g=B(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),l=B(()=>{const o=g.value.reduce((n,i)=>{const m=parseFloat(i.sales)||0;return console.log(`Adding salesAmount: ${m} to total: ${n}`),n+m},0);return console.log("Overall Total Sales computed as:",o),o});return console.log("Filtered Rows:",g.value),(o,n)=>(b(),I(Q,{ref_key:"dialogRef",ref:p,onHide:H(y)},{default:t(()=>[e(A,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e($,{style:{"background-color":"#f44336"}},{default:t(()=>[a("div",za,[Ma,Z((b(),I(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[ee]])])]),_:1}),e($,null,{default:t(()=>[e(se,{filter:o.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:r,rows:g.value,"row-key":"name","virtual-scroll":"",pagination:o.pagination,"onUpdate:pagination":n[0]||(n[0]=i=>o.pagination=i),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,f(`${w(i.row.selecta.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,f(`${d(i.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,f(`${d(i.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e($,null,{default:t(()=>[a("div",Ha,[a("div",ja," Overall Total Sales: "+f(d(l.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Qa={class:"row justify-between text-white"},Ea=a("div",{class:"text-h6"},"Softdrinks Report",-1),Ya={class:"row justify-end q-mt-md"},Ka={class:"text-h6"},Ga={__name:"SoftdrinksReport",props:["reports"],setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=ve(),u=s;console.log("Reports data structure:",u.reports);const w=o=>o?o.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",r=[{name:"name",label:"Softdrinks Name",field:o=>(console.log("Row data:",o),o.softdrinks.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:o=>`${o}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:o=>`${o}`},{name:"out",label:"Softdrinks Out (PCS)",field:"out",format:o=>`${o}`},{name:"sold",label:"Softdrinks Sold (PCS)",field:"sold",format:o=>`${o}`},{name:"sales",label:"Total Sales",field:"sales"}],d=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(o),g=B(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),l=B(()=>{const o=g.value.reduce((n,i)=>{const m=parseFloat(i.sales)||0;return console.log(`Adding salesAmount: ${m} to total: ${n}`),n+m},0);return console.log("Overall Total Sales computed as:",o),o});return console.log("Filtered Rows:",g.value),(o,n)=>(b(),I(Q,{ref_key:"dialogRef",ref:p,onHide:H(y)},{default:t(()=>[e(A,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e($,{style:{"background-color":"#9c27b0"}},{default:t(()=>[a("div",Qa,[Ea,Z((b(),I(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[ee]])])]),_:1}),e($,null,{default:t(()=>[e(se,{filter:o.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:r,rows:g.value,"row-key":"name","virtual-scroll":"",pagination:o.pagination,"onUpdate:pagination":n[0]||(n[0]=i=>o.pagination=i),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,f(`${w(i.row.softdrinks.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,f(`${d(i.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,f(`${d(i.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e($,null,{default:t(()=>[a("div",Ya,[a("div",Ka," Overall Total Sales: "+f(d(l.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Ja={class:"row justify-between text-white"},Wa=a("div",{class:"text-h6"},"Cake Report",-1),Xa={class:"row justify-end q-mt-md"},Za={class:"text-h6"},el={__name:"CakeReport",props:["reports"],setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=ve(),u=s;console.log("Report cake:",u.reports);const w=B(()=>(console.log("Filtered cake rows:",u.reports||[]),u.reports||[])),r=o=>{const n=v=>v?v.charAt(0).toUpperCase()+v.slice(1).toLowerCase():"",i=o.firstname?n(o.firstname):"No Firstname",m=o.middlename?n(o.middlename).charAt(0)+".":"",c=o.lastname?n(o.lastname):"No Lastname";return`${i} ${m} ${c}`},d=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(o).replace("\u20B1","\u20B1 "),g=B(()=>{const o=w.value.reduce((n,i)=>{const m=parseFloat(i.cake_report.price)||0;return console.log(`Adding salesAmount: ${m} to total: ${n}`),n+m},0);return console.log("Overall Total Sales computed as:",o),o}),l=[{name:"name",label:"Cake Name",field:o=>(console.log("Row data:",o),o.cake_report.name||"N/A")},{name:"cake_maker",label:"Cake Maker Name",field:o=>r(o.cake_report.user.employee)},{name:"price",label:"Price",field:o=>d(o.cake_report.price)},{name:"layers",label:"Layers",field:o=>o.cake_report.layers},{name:"sales_status",label:"Sale Status",field:o=>o.cake_report.sales_status}];return(o,n)=>(b(),I(Q,{ref_key:"dialogRef",ref:p,onHide:H(y)},{default:t(()=>[e(A,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e($,{style:{"background-color":"#009688"}},{default:t(()=>[a("div",Ja,[Wa,Z((b(),I(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[ee]])])]),_:1}),e($,null,{default:t(()=>[e(se,{filter:o.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:l,rows:w.value,"row-key":"name","virtual-scroll":"",pagination:o.pagination,"onUpdate:pagination":n[0]||(n[0]=i=>o.pagination=i),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["filter","rows","pagination"]),a("div",Xa,[a("div",Za," Overall Total Sales: "+f(d(g.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},tl={class:"row justify-between text-white"},al=a("div",{class:"text-h6"},"Other Products Report",-1),ll={class:"row justify-end q-mt-md"},nl={class:"text-h6"},ol={__name:"OtherProductsReport",props:["reports"],setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=ve(),u=s,w=B(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),r=o=>o?o.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",d=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(o),g=[{name:"name",label:"Product Name",field:o=>(console.log("Row data:",o),o.other_products.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:o=>`${o}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:o=>`${o}`},{name:"out",label:"Product Out (PCS)",field:"out",format:o=>`${o}`},{name:"sold",label:"Product Sold (PCS)",field:"sold",format:o=>`${o}`},{name:"sales",label:"Total Sales",field:"sales"}],l=B(()=>{const o=w.value.reduce((n,i)=>{const m=parseFloat(i.sales)||0;return console.log(`Adding salesAmount: ${m} to total: ${n}`),n+m},0);return console.log("Overall Total Sales computed as:",o),o});return(o,n)=>(b(),C("div",null,[e(Q,{ref_key:"dialogRef",ref:p,onHide:H(y)},{default:t(()=>[e(A,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e($,{style:{"background-color":"#607d8b"}},{default:t(()=>[a("div",tl,[al,Z((b(),I(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[ee]])])]),_:1}),e($,null,{default:t(()=>[e(se,{filter:o.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:g,rows:w.value,"row-key":"name","virtual-scroll":"",pagination:o.pagination,"onUpdate:pagination":n[0]||(n[0]=i=>o.pagination=i),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,f(`${r(i.row.other_products.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,f(`${d(i.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(i=>[e(O,{props:i},{default:t(()=>[a("span",null,f(`${d(i.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e($,null,{default:t(()=>[a("div",ll,[a("div",nl," Overall Total Sales: "+f(d(l.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"])]))}};const sl=s=>(W("data-v-0eb81aec"),s=s(),X(),s),rl=sl(()=>a("div",{class:"text-h6",align:"center"},"Products Report",-1)),il={class:"item-start q-gutter-md",align:"center"},dl={class:"text-weight-regular text-subtitle1"},cl={__name:"ProductsReport",props:["sales_Reports"],setup(s){const p=s,y=p.sales_Reports;console.log("sales report2",p);const x=xe(),_=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l),u=l=>{x.dialog({component:La,componentProps:{reports:l}})},w=l=>{x.dialog({component:Oa,componentProps:{reports:l}})},r=l=>{x.dialog({component:Ga,componentProps:{reports:l}})},d=l=>{x.dialog({component:el,componentProps:{reports:l}})},g=l=>{x.dialog({component:ol,componentProps:{reports:l}})};return(l,o)=>(b(),C("div",null,[e(A,{class:"user-card"},{default:t(()=>[e($,null,{default:t(()=>[rl]),_:1}),e($,null,{default:t(()=>[a("div",il,[e(D,{onClick:o[0]||(o[0]=n=>u(p.sales_Reports[0].bread_reports)),"no-caps":"",label:"Bread Report",rounded:"",color:"brown",style:{width:"130px"},class:"user-button"}),e(D,{onClick:o[1]||(o[1]=n=>w(H(y)[0].selecta_reports)),"no-caps":"",label:"Selecta Report",rounded:"",color:"red-6",style:{width:"130px"},class:"user-button"}),e(D,{onClick:o[2]||(o[2]=n=>r(H(y)[0].softdrinks_reports)),"no-caps":"",label:"Softdrinks Report",rounded:"",color:"accent",style:{width:"150px"},class:"user-button"}),e(D,{onClick:o[3]||(o[3]=n=>d(H(y)[0].cake_sales_reports)),"no-caps":"",label:"Cake Report",rounded:"",color:"teal",style:{width:"130px"},class:"user-button"}),e(D,{onClick:o[4]||(o[4]=n=>g(H(y)[0].other_products_reports)),"no-caps":"",label:"Other Products Report",rounded:"",color:"blue-grey",style:{width:"180px"},class:"user-button"})])]),_:1}),e($,null,{default:t(()=>[a("div",dl," Total sales: "+f(_(H(y)[0].products_total_sales)),1)]),_:1})]),_:1})]))}};var ul=E(cl,[["__scopeId","data-v-0eb81aec"]]);const ml={class:"row justify-between text-white"},pl=a("div",{class:"text-h6"},"Denomination Report",-1),_l={class:"row text-weight-regular text-subtitle1"},fl={class:"col-6"},gl={class:"col-6"},vl={class:"row justify-end q-mt-md"},hl={class:"text-h6"},yl={__name:"DenominationDialogReport",props:{reports:Array,total:Number},setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=ve(),u=s;console.log("Denomination Props",u.reports);const w=u.reports[0];console.log("Reports data structure:",u.reports);const r=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(g),d=B(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[]));return console.log("Filtered Rows:",d.value),(g,l)=>(b(),I(Q,{ref_key:"dialogRef",ref:p,onHide:H(y)},{default:t(()=>[e(A,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e($,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",ml,[pl,Z((b(),I(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[ee]])])]),_:1}),e($,null,{default:t(()=>[a("div",_l,[a("div",fl,[a("div",null,"1000 Bills: "+f(H(w).oneThousandBills),1),a("div",null,"500 Bills: "+f(H(w).fiveHundredBills),1),a("div",null,"200 Bills: "+f(H(w).twoHundredBills),1),a("div",null,"100 Bills: "+f(H(w).oneHundredBills),1),a("div",null,"50 Bills: "+f(H(w).fiftyBills),1),a("div",null,"20 Bills: "+f(H(w).twentyBills),1)]),a("div",gl,[a("div",null,"20 coins: "+f(H(w).twentyCoins),1),a("div",null,"10 coins: "+f(H(w).tenCoins),1),a("div",null,"5 coins: "+f(H(w).fiveCoins),1),a("div",null,"1 coins: "+f(H(w).oneCoins),1),a("div",null,"25 cents: "+f(H(w).twentyFiveCents),1)])])]),_:1}),e($,null,{default:t(()=>[a("div",vl,[a("div",hl," Overall Total Denomination: "+f(r(s.total||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const bl=s=>(W("data-v-0bfb79ef"),s=s(),X(),s),wl=bl(()=>a("div",{class:"text-h6",align:"center"},"Denomination Report",-1)),xl={class:"q-gutter-x-md",align:"center"},$l={class:"text-weight-regular text-subtitle1"},kl={__name:"DenominationReport",props:["sales_Reports"],setup(s){const p=s;p.sales_Reports,console.log("Denomination report",p);const y=xe(),x=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(u),_=(u,w)=>{y.dialog({component:yl,componentProps:{reports:u,total:w}})};return(u,w)=>(b(),C("div",null,[e(A,{class:"user-card"},{default:t(()=>[e($,null,{default:t(()=>[wl]),_:1}),e($,null,{default:t(()=>[a("div",xl,[e(D,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",onClick:w[0]||(w[0]=r=>_(p.sales_Reports[0].denomination_reports,p.sales_Reports[0].denomination_total)),class:"user-button"})])]),_:1}),e($,null,{default:t(()=>[a("div",$l," Total Denomination : "+f(x(p.sales_Reports[0].denomination_total)),1)]),_:1})]),_:1})]))}};var Cl=E(kl,[["__scopeId","data-v-0bfb79ef"]]);const Rl={class:"row justify-between text-white"},Pl=a("div",{class:"text-h6"},"Expenses Report",-1),Sl={class:"row justify-end q-mt-md"},Vl={class:"text-h6"},Dl={__name:"ExpensesDialog",props:{reports:Array,total:Number},setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=ve(),u=s;u.reports,console.log("Expenses total",u.total);const w=l=>l?l.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" "):"",r=[{name:"name",label:"Expenses Name",field:l=>(console.log("Row data:",l),l.name||"N/A"),align:"center"},{name:"description",label:"Description",field:"description",align:"center"},{name:"amount",label:"Amount",field:"amount",align:"center"}];console.log("Reports data structure:",u.reports);const d=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l),g=B(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[]));return console.log("Expenses:",g.value),(l,o)=>(b(),I(Q,{ref_key:"dialogRef",ref:p,onHide:H(y),onOk:l.handleButtonClick,onCancel:H(_)},{default:t(()=>[e(A,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e($,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",Rl,[Pl,Z((b(),I(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[ee]])])]),_:1}),e($,null,{default:t(()=>[e(se,{filter:l.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:r,rows:g.value,"row-key":"name","virtual-scroll":"",pagination:l.pagination,"onUpdate:pagination":o[0]||(o[0]=n=>l.pagination=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(n=>[e(O,{props:n},{default:t(()=>[a("span",null,f(`${w(n.row.name)}`),1)]),_:2},1032,["props"])]),"body-cell-amount":t(n=>[e(O,{props:n},{default:t(()=>[a("span",null,f(`${d(n.row.amount)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e($,null,{default:t(()=>[a("div",Sl,[a("div",Vl," Overall Total Expenses: "+f(d(s.total||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","onOk","onCancel"]))}};const ql=s=>(W("data-v-338c99d0"),s=s(),X(),s),Nl=ql(()=>a("div",{class:"text-h6",align:"center"},"Expenses Report",-1)),Tl={class:"q-gutter-x-md",align:"center"},Al={class:"text-weight-regular text-subtitle1"},Ul={__name:"ExpensesReport",props:["sales_Reports"],setup(s){const p=s;console.log("Expenses Data",p.sales_Reports[0].expenses_reports);const y=xe(),x=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(u),_=(u,w)=>{y.dialog({component:Dl,componentProps:{reports:u,total:w}})};return(u,w)=>(b(),C("div",null,[e(A,{class:"user-card"},{default:t(()=>[e($,null,{default:t(()=>[Nl]),_:1}),e($,null,{default:t(()=>[a("div",Tl,[e(D,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",class:"user-button",onClick:w[0]||(w[0]=r=>_(p.sales_Reports[0].expenses_reports,p.sales_Reports[0].expenses_total))})])]),_:1}),e($,null,{default:t(()=>[a("div",Al," Total Expenses : "+f(x(p.sales_Reports[0].expenses_total)),1)]),_:1})]),_:1})]))}};var Bl=E(Ul,[["__scopeId","data-v-338c99d0"]]);const Il={class:"row justify-between text-white"},Fl=a("div",{class:"text-h6"},"Credits Report",-1),Ll={class:"row justify-end q-mt-md"},zl={class:"text-h6"},Ml={__name:"CreditsReportDialog",props:{reports:Array,total:Number},setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=ve(),u=s,w=u.reports;console.log("creditReports data",w),w.forEach((i,m)=>{console.log(`Report ${m}:`,i),console.log(`Credit Products for Report ${m}:`,i.credit_products.total_amount)});const r=B(()=>w.flatMap(i=>i.credit_products.map(m=>{const c=parseInt(m.pieces,10)||0,v=parseFloat(m.price)||0,h=c*v;return{...m,total_amount:h}})));console.log("All Credit Products:",r.value[0]);const d=i=>i?i.split(" ").map(m=>m.charAt(0).toUpperCase()+m.slice(1).toLowerCase()).join(" "):"",g=i=>{const m=P=>P?P.charAt(0).toUpperCase()+P.slice(1).toLowerCase():"",c=i.firstname?m(i.firstname):"No Firstname",v=i.middlename?m(i.middlename).charAt(0)+".":"",h=i.lastname?m(i.lastname):"No Lastname";return`${c} ${v} ${h}`.trim()},l=[{name:"name",label:"Employee Name",field:i=>g(i.credit_user_id),align:"center"},{name:"productName",label:"Product Name",field:i=>i.product.name||"N/A",align:"center"},{name:"pieces",label:"Pieces",field:"pieces",align:"center"},{name:"price",label:"Price",field:"price",align:"center"},{name:"total_amount",label:"Total Amount",field:"total_amount",align:"center"}];console.log("Reports data structure:",u.reports);const o=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(i),n=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(i);return(i,m)=>(b(),I(Q,{ref_key:"dialogRef",ref:p,onHide:H(y),onOk:i.handleButtonClick,onCancel:H(_)},{default:t(()=>[e(A,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e($,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",Il,[Fl,Z((b(),I(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[ee]])])]),_:1}),e($,null,{default:t(()=>[e(se,{filter:i.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:l,rows:r.value,"row-key":"name","virtual-scroll":"",pagination:i.pagination,"onUpdate:pagination":m[0]||(m[0]=c=>i.pagination=c),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-productName":t(c=>[e(O,{props:c},{default:t(()=>[a("span",null,f(`${d(c.row.product.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(c=>[e(O,{props:c},{default:t(()=>[a("span",null,f(`${o(c.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-total_amount":t(c=>[e(O,{props:c},{default:t(()=>[a("span",null,f(`${n(c.row.total_amount)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e($,null,{default:t(()=>[a("div",Ll,[a("div",zl," Overall Credits Total: "+f(o(s.total||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","onOk","onCancel"]))}};const Hl=s=>(W("data-v-29d6ba68"),s=s(),X(),s),jl=Hl(()=>a("div",{class:"text-h6",align:"center"},"Credits Report",-1)),Ol={class:"q-gutter-x-md",align:"center"},Ql={class:"text-weight-regular text-subtitle1"},El={__name:"CreditsReport",props:["sales_Reports"],setup(s){const p=s,y=xe(),x=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(u),_=(u,w)=>{y.dialog({component:Ml,componentProps:{reports:u,total:w}})};return(u,w)=>(b(),C("div",null,[e(A,{class:"user-card"},{default:t(()=>[e($,null,{default:t(()=>[jl]),_:1}),e($,null,{default:t(()=>[a("div",Ol,[e(D,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",class:"user-button",onClick:w[0]||(w[0]=r=>_(p.sales_Reports[0].credit_reports,p.sales_Reports[0].credit_total))})])]),_:1}),e($,null,{default:t(()=>[a("div",Ql," Total Credits : "+f(x(p.sales_Reports[0].credit_total)),1)]),_:1}),e($)]),_:1})]))}};var Yl=E(El,[["__scopeId","data-v-29d6ba68"]]);const Kl=s=>(W("data-v-5a5f240d"),s=s(),X(),s),Gl={class:"q-mt-lg row items-start q-gutter-md justify-center"},Jl={class:"row justify-between"},Wl=Kl(()=>a("div",{class:"text-h6"},"Sales Report",-1)),Xl={align:"right"},Zl={class:"text-subtitle1 text-weight-regular"},en={class:"row q-gutter-sm q-pa-md"},tn={class:"q-ma-sm"},an={class:"q-ma-sm",align:"center"},ln=["src"],nn={__name:"SalesReportPanel",props:["salesReport"],setup(s){Le.exports.vfs=Ze;const p=s,y=p.salesReport;console.log("reportsData",p.salesReport);const x=R(!0),_=R(!1),u=R(""),w=n=>oe.formatDate(n,"MMMM DD, YYYY"),r=n=>{const i=new Date(n),m={hour:"2-digit",minute:"2-digit",hour12:!0};return i.toLocaleTimeString(void 0,m)},d=n=>{const i=h=>h?h.charAt(0).toUpperCase()+h.slice(1).toLowerCase():"",m=n.firstname?i(n.firstname):"No Firstname",c=n.middlename?i(n.middlename).charAt(0)+".":"",v=n.lastname?i(n.lastname):"No Lastname";return`${m} ${c} ${v}`.trim()},g=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(n).replace("\u20B1","\u20B1	"),l=n=>{const i=B(()=>n.credit_reports.flatMap(J=>J.credit_products));console.log("All Credit Products:",i.value);const m=[{title:"Bread Production",data:n.bread_reports||[],columns:["bread.name","beginnings","price","new_production","bread_out","bread_sold","total","remaining","sales"],totals:["sales"]},{title:"Selecta Production",data:n.selecta_reports||[],columns:["selecta.name","beginnings","price","out","sold","remaining","sales"],totals:["sales"]},{title:"Softdrinks Production",data:n.softdrinks_reports||[],columns:["softdrinks.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Other Products Production",data:n.other_products_reports||[],columns:["other_products.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Cake Production",data:n.cake_sales_reports||[],columns:["cake_report.name","cake_report.user.employee","cake_report.layers","cake_report.price","cake_report.sales_status"],totals:["cake_report.price"]}],c=n.expenses_reports||[],v=i.value||[],h=n.credit_total,P=n.denomination_reports[0]||[],V=n.denomination_total,U=n.expenses_total;n.products_total_sales,n.charges_amount,n.over_total;const N={bills:[{name:"One Thousand",pcs:P.oneThousandBills||0},{name:"Five Hundred",pcs:P.fiveHundredBills||0},{name:"Two Hundred",pcs:P.twoHundredBills||0},{name:"One Hundred",pcs:P.oneHundredBills||0},{name:"Fifty",pcs:P.fiftyBills||0},{name:"Twenty",pcs:P.twentyBills||0}],coins:[{name:"Twenty",pcs:P.twentyCoins||0},{name:"Ten",pcs:P.tenCoins||0},{name:"Five",pcs:P.fiveCoins||0},{name:"One",pcs:P.oneCoins||0},{name:"Twenty Five Cents",pcs:P.twentyFiveCents||0}]},k=(J,he,_e)=>{const ye=(ue,fe)=>fe.split(".").reduce(($e,z)=>$e?$e[z]:0,ue),Ne=_e.reduce((ue,fe)=>(ue[fe]=J.reduce(($e,z)=>$e+parseFloat(ye(z,fe))||0,0),ue),{});return[...J.map(ue=>he.map(fe=>{if(fe==="cake_report.user.employee"){const $e=ye(ue,"cake_report.user.employee");return{text:$e?d($e):"No Employee",style:"body",alignment:"center"}}return{text:fe.includes(".")?ye(ue,fe)||"-":ue[fe]||"-",style:"body",alignment:"center"}})),[{text:"Overall Total",colSpan:he.length-_e.length,style:"tableHeader",alignment:"right",color:"#020617"},...Array(he.length-_e.length-1).fill({}),..._e.map(ue=>({text:`\u20B1 ${Ne[ue].toFixed(2)}`,style:"tableHeader",alignment:"center",color:"#020617"}))]]},F=v.length>0?v.map(J=>[{text:d(J.credit_user_id),style:"body",alignment:"center"},{text:J.product.name,style:"body",alignment:"center"},{text:J.pieces,style:"body",alignment:"center"},{text:J.price,style:"body",alignment:"center"},{text:J.total_amount,style:"body",alignment:"center"}]):[[{text:"No data available",colSpan:5,alignment:"center"}]];F.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:3},{},{},{text:`${g(h)}`,style:"bodyBold",alignment:"center",colSpan:2},{}]);const q=c.length>0?c.map(J=>[{text:J.name,style:"body",alignment:"center"},{text:J.description,style:"body",alignment:"center"},{text:`${g(J.amount)}`,style:"body",alignment:"center"}]):[[{text:"No data available",colSpan:3,alignment:"center"}]];q.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:2},{},{text:`${g(U)}`,style:"bodyBold",alignment:"center"}]);const T=N.bills.map((J,he)=>{var _e,ye;return[{text:J.name,style:"body",alignment:"center"},{text:J.pcs,style:"body",alignment:"center"},{text:((_e=N.coins[he])==null?void 0:_e.name)||"",style:"body",alignment:"center"},{text:((ye=N.coins[he])==null?void 0:ye.pcs)||"0",style:"body",alignment:"center"}]});T.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:3,color:"#020617"},{},{},{text:`${g(V)}`,style:"bodyBold",alignment:"right",color:"#020617"}]);const j=m.map(({title:J,data:he,columns:_e,totals:ye})=>({stack:[{text:J,style:"subheader",alignment:"center"},{table:{headerRows:1,widths:Array(_e.length).fill("*"),body:[_e.map(Ne=>({text:Ne.split(".").pop().replace(/_/g," ").replace(/\b\w/g,ue=>ue.toUpperCase()),style:"tableHeader",alignment:"center"})),...k(he,_e,ye)]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]})),ce={table:{widths:["50%","50%"],body:[[{text:"Total Denomination",style:"tableHeader",alignment:"left"},{text:g(V),style:"tableData",alignment:"center"}],[{text:"Total Product Sales Amount",style:"tableHeader",alignment:"left"},{text:g(n.products_total_sales),style:"tableData",alignment:"center"}],[{text:"Total Expenses",style:"tableHeader",alignment:"left"},{text:g(U),style:"tableData",alignment:"center"}],[{text:"Over Cash",style:"tableHeader",alignment:"left"},{text:g(n.over_total),style:"tableData",alignment:"center"}],[{text:"Charges",style:"tableHeader",alignment:"left"},{text:`${g(n.charges_amount)}`,style:"tableData",alignment:"center"}]]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}};return{content:[{text:"Sales Report",style:"header",alignment:"center"},{columns:[{text:`Branch Name: ${n.branch.name}
          Cashier: ${d(n.user.employee)}
          Date: ${w(n.created_at)}
Time: ${r(n.created_at)}
`,margin:[0,0,0,10]},{}]},...j,{margin:[0,5,0,0],columns:[{width:"50%",stack:[{text:"Expenses Report",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","auto","*"],body:[[{text:"Expenses Name",style:"tableHeader",alignment:"center"},{text:"Description",style:"tableHeader",alignment:"center"},{text:"Amount",style:"tableHeader",alignment:"center"}],...q]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}},{text:"Credit Report",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*","auto","auto","auto"],body:[[{text:"Employee Name",style:"tableHeader",alignment:"center"},{text:"Product Name",style:"tableHeader",alignment:"center"},{text:"Pieces",style:"tableHeader",alignment:"center"},{text:"Price",style:"tableHeader",alignment:"center"},{text:"Amount",style:"tableHeader",alignment:"center"}],...F]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]},{width:"50%",stack:[{text:"Denomination Report",style:"subheader",alignment:"center"},{table:{headerRows:0,widths:["*","auto","*","auto"],body:[[{text:"Bills",style:"tableHeader",alignment:"center"},{text:"Pcs",style:"tableHeader",alignment:"center"},{text:"Coins",style:"tableHeader",alignment:"center"},{text:"Pcs",style:"tableHeader",alignment:"center"}],...T]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]}],columnGap:10},{},{canvas:[{type:"line",x1:0,y1:25,x2:580,y2:25,lineWidth:1,dash:{length:5,space:5},lineColor:"#000000",margin:[0,20,0,0]}]},{margin:[0,20,0,0],stack:[{text:"Summary",style:"subheader",alignment:"center"},ce]}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableHeader:{bold:!0,fontSize:10,color:"black"},body:{fontSize:8}},pageMargins:[10,10,10,10]}},o=n=>{const i=l(n);Le.exports.createPdf(i).getDataUrl(m=>{u.value=m,_.value=!0})};return(n,i)=>(b(),C(L,null,[e(A,{class:"my-card q-pa-md"},{default:t(()=>[e($,null,{default:t(()=>[a("div",Gl,[(b(!0),C(L,null,re(H(y),(m,c)=>(b(),C("div",{key:c},[e(A,{flat:"",dense:"",bordered:""},{default:t(()=>[e($,null,{default:t(()=>[a("div",Jl,[Wl,a("div",Xl,[e(D,{padding:"xs md",label:"Print",icon:"print",outline:"",class:"user-button",onClick:v=>o(m)},null,8,["onClick"]),a("div",null,[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S(" Print Report ")]),_:1})])])]),a("div",Zl,[a("div",null,"Name: "+f(d(m.user.employee)),1),a("div",null,"Date: "+f(w(m.created_at)),1),a("div",null,"Time: "+f(r(m.created_at)),1)])]),_:2},1024),a("div",en,[e(ul,{sales_Reports:[m]},null,8,["sales_Reports"]),e(Cl,{sales_Reports:[m]},null,8,["sales_Reports"]),e(Bl,{sales_Reports:[m]},null,8,["sales_Reports"]),e(Yl,{sales_Reports:[m]},null,8,["sales_Reports"])])]),_:2},1024)]))),128))])]),_:1})]),_:1}),e(Q,{modelValue:_.value,"onUpdate:modelValue":i[0]||(i[0]=m=>_.value=m),maximized:x.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[a("div",tn,[a("div",an,[Z((b(),I(D,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},{default:t(()=>[e(le,null,{default:t(()=>[S("Close")]),_:1})]),_:1})),[[ee]])]),a("div",null,[a("iframe",{src:u.value,width:"100%",height:"700px"},null,8,ln)])])]),_:1},8,["modelValue","maximized"])],64))}};var on=E(nn,[["__scopeId","data-v-5a5f240d"]]);const sn={class:"text-h6"},rn={class:"row q-gutter-x-md"},dn={__name:"ProductionReportDialog",props:["reports","reportLabel"],emits:["selectReport","hide","ok","cancel"],setup(s,{emit:p}){const{dialogRef:y,onDialogHide:x,onDialogOK:_,onDialogCancel:u}=ve(),w=s;console.log("production report",w.reports);const r=w.reports.baker_reports,d=w.reports.sales_reports,g=p,l=R("bakerReport"),o=R(!0),n=R(!1),i=c=>c?c.split(" ").map(v=>v.charAt(0).toUpperCase()+v.slice(1).toLowerCase()).join(" "):"",m=()=>{g("selectReport",w.reports),n.value=!0};return(c,v)=>(b(),I(Q,{ref_key:"dialogRef",ref:y,modelValue:n.value,"onUpdate:modelValue":v[2]||(v[2]=h=>n.value=h),onHide:H(x),onOk:m,onCancel:H(u),maximized:o.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(A,{style:{"background-color":"#f7f8fc"}},{default:t(()=>[e($,{class:"row items-center text-white",style:{"background-color":"#595a5a"}},{default:t(()=>[a("div",sn,f(`${i(s.reports.branch_name)} ( ${s.reportLabel} Reports)`),1),e(De),a("div",rn,[a("div",null,[Z((b(),I(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(le,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[S("Close")]),_:1})]),_:1})),[[ee]])])])]),_:1}),e($,null,{default:t(()=>[a("div",null,[e(Ae,{modelValue:l.value,"onUpdate:modelValue":v[0]||(v[0]=h=>l.value=h),align:"justify","narrow-indicator":"",class:"q-mb-lg"},{default:t(()=>[e(te,{class:"text-purple",name:"bakerReport",label:"Baker Reports"}),e(te,{class:"text-orange",name:"salesReport",label:"Sales Report"})]),_:1},8,["modelValue"])]),a("div",null,[e(Ue,{modelValue:l.value,"onUpdate:modelValue":v[1]||(v[1]=h=>l.value=h),animated:"","transition-prev":"scale","transition-next":"scale",style:{"background-color":"#f7f8fc"}},{default:t(()=>[e(ae,{name:"bakerReport"},{default:t(()=>[e(Aa,{bakersReport:H(r)},null,8,["bakersReport"])]),_:1}),e(ae,{name:"salesReport"},{default:t(()=>[e(on,{salesReport:H(d)},null,8,["salesReport"])]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide","onCancel","maximized"]))}};var cn=E(dn,[["__scopeId","data-v-643ff984"]]);const un=rt("productions",()=>{const s=R([]),p=R([]);return{productions:s,production:p,fetchAllProduction:async()=>{const _=await ke.get("/api/branch-production-report");s.value=_.data.reports},fetchBranchProductions:async _=>{try{const u=await ke.get(`/api/branches/${_}/production-report`);s.value=u.data}catch(u){console.log(u)}}}});const mn=s=>(W("data-v-12387bc6"),s=s(),X(),s),pn={key:0,class:"spinner-wrapper"},_n={key:1},fn={key:0,class:"data-error"},gn=mn(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),vn={class:"row justify-center q-gutter-x-md"},hn={__name:"ProductionTable",setup(s){const p=ie();R("bakerReport");const y=p.params.branch_id;R(!1),R(!0),R(""),R("");const x=R({rowsPerPage:0}),_=un(),u=R(""),w=B(()=>_.productions);R(!0);const r=R(!0),d=R(!1),g=B(()=>u.value?w.value.filter(c=>c.name.toLowerCase().includes(u.value.toLowerCase())):w.value);pe(async()=>{y&&await l(y)});const l=async c=>{try{r.value=!0;const v=await _.fetchBranchProductions(c);console.log("Fetched data:",v),console.log("Production rows:",w.value),w.value.length||(d.value=!0)}catch{d.value=!0}finally{r.value=!1}};Me(u,async c=>{r.value=!0,await new Promise(v=>setTimeout(v,1e3)),r.value=!1,d.value=g.value.length===0});const n=[{name:"reportDate",align:"center",label:"Date",field:"date",format:c=>oe.formatDate(c,"MMMM DD, YYYY")},{name:"reports",align:"center",label:"Reports",field:"reports"}],i=xe(),m=(c,v)=>{i.dialog({component:cn,componentProps:{reports:c,reportLabel:v}})};return(c,v)=>(b(),C(L,null,[a("div",null,[e(G,{modelValue:u.value,"onUpdate:modelValue":v[0]||(v[0]=h=>u.value=h),class:"q-pb-lg q-pl-md",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100",style:{width:"500px","max-width":"1500px","min-width":"100px"}},{append:t(()=>[e(ne,{name:"search"})]),_:1},8,["modelValue"])]),r.value?(b(),C("div",pn,[e(He,{size:"50px",color:"primary"})])):(b(),C("div",_n,[g.value.length===0?(b(),C("div",fn,[e(ne,{name:"warning",color:"warning",size:"4em"}),gn])):(b(),I(se,{key:1,class:"table-container sticky-header",filter:u.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"400px"},columns:n,rows:g.value,"row-key":"reportDate","virtual-scroll":"",pagination:x.value,"onUpdate:pagination":v[1]||(v[1]=h=>x.value=h),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-reports":t(h=>[e(O,{props:h},{default:t(()=>[a("div",vn,[e(D,{padding:"xs lg",rounded:"",dense:"",size:"sm",color:"light-blue-5","text-color":"white",onClick:P=>m(h.row.AM,"AM")},{default:t(()=>[S("AM")]),_:2},1032,["onClick"]),e(D,{padding:"xs lg",rounded:"",dense:"",size:"sm",color:"deep-orange","text-color":"white",onClick:P=>m(h.row.PM,"PM")},{default:t(()=>[S("PM")]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var yn=E(hn,[["__scopeId","data-v-12387bc6"]]);const bn={__name:"ProductionPage",setup(s){return(p,y)=>(b(),C("div",null,[e(yn)]))}},wn={class:"row justify-between"},xn=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),$n=a("div",{class:"text-h6"},"Decline Report",-1),kn={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){const p=Se(),y=R(""),x=R(!1),_=R(!1),u=R({rowsPerPage:0}),w=xe(),r=s,d=()=>{_.value=!0},g=()=>{x.value=!0},l=async()=>{if(!y.value){w.notify({type:"negative",message:"Remark is required"});return}try{const c=await p.declineReport(r.report.id,y.value);console.log("Report declined:",c),w.notify({type:"negative",message:"Report declined successfully"}),x.value=!1,_.value=!1,y.value=""}catch(c){console.error("Error declining report:",c),w.notify({type:"negative",message:"Failed to decline report"})}},o=async()=>{try{const c=await p.confirmReport(r.report.id);console.log("Report confirmed:",c),w.notify({type:"positive",message:"Report confirmed successfully"}),_.value=!1}catch(c){console.error(c)}},n=B(()=>r.report.selecta_added_stocks||[]),i=c=>{const v=U=>U?U.charAt(0).toUpperCase()+U.slice(1).toLowerCase():"",h=c.firstname?v(c.firstname):"No Firstname",P=c.middlename?v(c.middlename).charAt(0)+".":"",V=c.lastname?v(c.lastname):"No Lastname";return`${h} ${P} ${V}`},m=[{name:"product_name",label:"Product Name",field:c=>c.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:c=>c.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:c=>c.added_stocks?`${c.added_stocks} pcs`:"N/A"}];return(c,v)=>(b(),C(L,null,[a("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:d})]),e(Q,{modelValue:_.value,"onUpdate:modelValue":v[2]||(v[2]=h=>_.value=h)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",wn,[xn,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:v[0]||(v[0]=h=>_.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+f(i(s.report.employee)),1),a("div",null," Branch: "+f(s.report.branch.name),1),a("div",null,[S(" Status: "),e(Y,{color:"yellow",outlined:""},{default:t(()=>[S(f(s.report.status),1)]),_:1})])]),_:1}),e($,null,{default:t(()=>[e(se,{rows:n.value,columns:m,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:u.value,"onUpdate:pagination":v[1]||(v[1]=h=>u.value=h),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e($,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(D,{color:"negative",label:"Decline",class:"action-btn",onClick:g}),e(D,{color:"positive",label:"Confirm",class:"action-btn",onClick:o})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Q,{modelValue:x.value,"onUpdate:modelValue":v[4]||(v[4]=h=>x.value=h)},{default:t(()=>[e(A,null,{default:t(()=>[e($,null,{default:t(()=>[$n]),_:1}),e($,null,{default:t(()=>[e(G,{modelValue:y.value,"onUpdate:modelValue":v[3]||(v[3]=h=>y.value=h),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[h=>!!h||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(Ce,{align:"right"},{default:t(()=>[Z(e(D,{flat:"",label:"Cancel",color:"primary"},null,512),[[ee]]),e(D,{flat:"",label:"Confirm",color:"negative",onClick:l})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Cn=s=>(W("data-v-08e549d4"),s=s(),X(),s),Rn={class:"q-gutter-md q-ma-md"},Pn={class:"row justify-between"},Sn={class:"text-subtitle1"},Vn={class:"text-subtitle1"},Dn={class:"text-subtitle1"},qn={key:1,class:"data-error"},Nn=Cn(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Tn={__name:"TransactionPendingCard",setup(s){const p=ie(),y=Se(),x=B(()=>y.pendingSelectaReports),_=p.params.branch_id,u=R("pending"),w=async()=>{try{const l=await y.fetchPendingSelectaStocks(_,u.value);console.log(x.value)}catch(l){console.error("Error fetching pending stocks:",l)}};pe(async()=>{_&&await w()});const r=l=>oe.formatDate(l,"MMMM D, YYYY"),d=l=>oe.formatDate(l,"hh:mm A"),g=l=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",n=l.firstname?o(l.firstname):"No Firstname",i=l.middlename?o(l.middlename).charAt(0)+".":"",m=l.lastname?o(l.lastname):"No Lastname";return`${n} ${i} ${m}`};return(l,o)=>(b(),C("div",null,[e(Re,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Rn,[x.value.length?(b(!0),C(L,{key:0},re(x.value,(n,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",Pn,[a("div",Sn,f(r(n.created_at)),1),a("div",Vn,f(d(n.created_at)),1),a("div",Dn,f(n.branch.name)+" - "+f(g(n.employee)),1),a("div",null,[e(Y,{color:"yellow",outlined:""},{default:t(()=>[S(" Pending ")]),_:1})]),a("div",null,[e(kn,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(b(),C("div",qn,[e(ne,{name:"warning",color:"warning",size:"4em"}),Nn]))])]),_:1})]))}};var An=E(Tn,[["__scopeId","data-v-08e549d4"]]);const Un={class:"row justify-between"},Bn=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),In={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){Se(),R(!1);const p=R(!1),y=()=>{p.value=!0};xe();const x=s,_=B(()=>(console.log("Filtered rows:",x.report||[]),x.report.selecta_added_stocks||[])),u=r=>{const d=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",g=r.firstname?d(r.firstname):"No Firstname",l=r.middlename?d(r.middlename).charAt(0)+".":"",o=r.lastname?d(r.lastname):"No Lastname";return`${g} ${l} ${o}`},w=[{name:"product_name",label:"Product Name",field:r=>(console.log("Row data:",r),r.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:r=>(console.log("Row data:",r),r.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:r=>r.added_stocks?`${r.added_stocks} pcs`:"N/A"}];return(r,d)=>(b(),C(L,null,[a("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:y})]),e(Q,{modelValue:p.value,"onUpdate:modelValue":d[2]||(d[2]=g=>p.value=g)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",Un,[Bn,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=g=>p.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+f(u(s.report.employee)),1),a("div",null," Branch: "+f(s.report.branch.name),1),a("div",null,[S(" Status: "),e(Y,{color:"green",outlined:""},{default:t(()=>[S(f(s.report.status),1)]),_:1})])]),_:1}),e($,null,{default:t(()=>[e(se,{rows:_.value,columns:w,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:r.pagination,"onUpdate:pagination":d[1]||(d[1]=g=>r.pagination=g),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Fn=s=>(W("data-v-c1019cbc"),s=s(),X(),s),Ln={class:"q-gutter-md q-ma-md"},zn={class:"row justify-between"},Mn={class:"text-subtitle1"},Hn={class:"text-subtitle1"},jn={class:"text-subtitle1"},On={key:1,class:"data-error"},Qn=Fn(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),En={__name:"TransactionConfirmedCard",setup(s){const p=ie(),y=Se(),x=B(()=>y.confirmedSelectaReports),_=p.params.branch_id,u=R("confirmed"),w=async()=>{try{const l=await y.fetchConfirmedSelectaStocks(_,u.value);console.log(x.value)}catch(l){console.error("Error fetching confirmed stocks:",l)}};pe(async()=>{_&&await w()});const r=l=>oe.formatDate(l,"MMMM D, YYYY"),d=l=>oe.formatDate(l,"hh:mm A"),g=l=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",n=l.firstname?o(l.firstname):"No Firstname",i=l.middlename?o(l.middlename).charAt(0)+".":"",m=l.lastname?o(l.lastname):"No Lastname";return`${n} ${i} ${m}`};return(l,o)=>(b(),C("div",null,[e(Re,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Ln,[x.value.length?(b(!0),C(L,{key:0},re(x.value,(n,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",zn,[a("div",Mn,f(r(n.created_at)),1),a("div",Hn,f(d(n.created_at)),1),a("div",jn,f(n.branch.name)+" - "+f(g(n.employee)),1),a("div",null,[e(Y,{color:"green",outlined:""},{default:t(()=>[S(f(n.status),1)]),_:2},1024)]),a("div",null,[e(In,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(b(),C("div",On,[e(ne,{name:"warning",color:"warning",size:"4em"}),Qn]))])]),_:1})]))}};var Yn=E(En,[["__scopeId","data-v-c1019cbc"]]);const Kn={class:"row justify-between"},Gn=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),Jn={class:"q-mt-md"},Wn={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){Se(),R(!1);const p=R(!1),y=()=>{p.value=!0},x=s,_=B(()=>(console.log("Filtered rows:",x.report||[]),x.report.selecta_added_stocks||[])),u=r=>{const d=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",g=r.firstname?d(r.firstname):"No Firstname",l=r.middlename?d(r.middlename).charAt(0)+".":"",o=r.lastname?d(r.lastname):"No Lastname";return`${g} ${l} ${o}`},w=[{name:"product_name",label:"Product Name",field:r=>(console.log("Row data:",r),r.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:r=>(console.log("Row data:",r),r.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:r=>r.added_stocks?`${r.added_stocks} pcs`:"N/A"}];return(r,d)=>(b(),C(L,null,[a("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:y})]),e(Q,{modelValue:p.value,"onUpdate:modelValue":d[2]||(d[2]=g=>p.value=g)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",Kn,[Gn,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=g=>p.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+f(u(s.report.employee)),1),a("div",null," Branch: "+f(s.report.branch.name),1),a("div",null,[S(" Status: "),e(Y,{color:"red",outlined:""},{default:t(()=>[S(f(s.report.status),1)]),_:1})]),a("div",Jn,"Remark: "+f(s.report.remark),1)]),_:1}),e($,null,{default:t(()=>[e(se,{rows:_.value,columns:w,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:r.pagination,"onUpdate:pagination":d[1]||(d[1]=g=>r.pagination=g),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Xn=s=>(W("data-v-6b801095"),s=s(),X(),s),Zn={class:"q-gutter-md q-ma-md"},eo={class:"row justify-between"},to={class:"text-subtitle1"},ao={class:"text-subtitle1"},lo={class:"text-subtitle1"},no={key:1,class:"data-error"},oo=Xn(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),so={__name:"TransactionDeclinedCard",setup(s){const p=ie(),y=Se(),x=B(()=>y.declinedSelectaReports),_=p.params.branch_id,u=R("declined"),w=async()=>{try{const l=await y.fetchDeclinedSelectaStocks(_,u.value);console.log("selectedProductsDeclined",x.value)}catch(l){console.error("Error fetching decline stocks:",l)}};pe(async()=>{_&&await w()});const r=l=>oe.formatDate(l,"MMMM D, YYYY"),d=l=>oe.formatDate(l,"hh:mm A"),g=l=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",n=l.firstname?o(l.firstname):"No Firstname",i=l.middlename?o(l.middlename).charAt(0)+".":"",m=l.lastname?o(l.lastname):"No Lastname";return`${n} ${i} ${m}`};return(l,o)=>(b(),C("div",null,[e(Re,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Zn,[x.value.length?(b(!0),C(L,{key:0},re(x.value,(n,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",eo,[a("div",to,f(r(n.created_at)),1),a("div",ao,f(d(n.created_at)),1),a("div",lo,f(n.branch.name)+" - "+f(g(n.employee)),1),a("div",null,[e(Y,{color:"red",outlined:""},{default:t(()=>[S(f(n.status),1)]),_:2},1024)]),a("div",null,[e(Wn,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(b(),C("div",no,[e(ne,{name:"warning",color:"warning",size:"4em"}),oo]))])]),_:1})]))}};var ro=E(so,[["__scopeId","data-v-6b801095"]]);const io={class:"q-gutter-y-sm"},co={__name:"SelectaTransactionPage",setup(s){const p=R("pendingReports"),y=B(()=>{switch(p.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return(x,_)=>(b(),C(L,null,[a("div",io,[e(Ae,{modelValue:p.value,"onUpdate:modelValue":_[0]||(_[0]=u=>p.value=u),"indicator-color":y.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(te,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(te,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(te,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Ue,{modelValue:p.value,"onUpdate:modelValue":_[1]||(_[1]=u=>p.value=u),animated:""},{default:t(()=>[e(ae,{name:"pendingReports"},{default:t(()=>[e(An)]),_:1}),e(ae,{name:"confirmReports"},{default:t(()=>[e(Yn)]),_:1}),e(ae,{name:"declineReports"},{default:t(()=>[e(ro)]),_:1})]),_:1},8,["modelValue"])],64))}};var uo=E(co,[["__scopeId","data-v-6cbd59c6"]]);const mo={class:"row justify-between"},po=a("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),_o=a("div",{class:"text-h6"},"Decline Report",-1),fo={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){const p=Be(),y=R(""),x=R(!1),_=R(!1),u=R({rowPerPage:0}),w=xe(),r=s,d=()=>{_.value=!0},g=()=>{x.value=!0},l=async()=>{if(!y.value){w.notify({type:"negative",message:"Remark is required"});return}try{const c=await p.declineReport(r.report.id,y.value);console.log("Report declined:",c),w.notify({type:"negative",message:"Report declined successfully"}),x.value=!1,_.value=!1,y.value=""}catch(c){console.error("Error declining report:",c),w.notify({type:"negative",message:"Failed to decline report"})}},o=async()=>{try{const c=await p.confirmReport(r.report.id);console.log("Report confirmed:",c),w.notify({type:"positive",message:"Report confirmed successfully"}),_.value=!1}catch(c){console.error(c)}},n=B(()=>r.report.softdrinks_added_stocks||[]),i=c=>{const v=U=>U?U.charAt(0).toUpperCase()+U.slice(1).toLowerCase():"",h=c.firstname?v(c.firstname):"No Firstname",P=c.middlename?v(c.middlename).charAt(0)+".":"",V=c.lastname?v(c.lastname):"No Lastname";return`${h} ${P} ${V}`},m=[{name:"product_name",label:"Product Name",field:c=>c.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:c=>c.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:c=>c.added_stocks?`${c.added_stocks} pcs`:"N/A"}];return(c,v)=>(b(),C("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:d}),e(Q,{modelValue:_.value,"onUpdate:modelValue":v[2]||(v[2]=h=>_.value=h)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",mo,[po,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:v[0]||(v[0]=h=>_.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+f(i(s.report.employee)),1),a("div",null," Branch: "+f(s.report.branch.name),1),a("div",null,[S(" Status: "),e(Y,{color:"yellow",outlined:""},{default:t(()=>[S(f(s.report.status),1)]),_:1})])]),_:1}),e($,null,{default:t(()=>[e(se,{rows:n.value,columns:m,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:u.value,"onUpdate:pagination":v[1]||(v[1]=h=>u.value=h),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e($,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(D,{color:"negative",label:"Decline",class:"action-btn",onClick:g}),e(D,{color:"positive",label:"Confirm",class:"action-btn",onClick:o})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Q,{modelValue:x.value,"onUpdate:modelValue":v[4]||(v[4]=h=>x.value=h)},{default:t(()=>[e(A,null,{default:t(()=>[e($,null,{default:t(()=>[_o]),_:1}),e($,null,{default:t(()=>[e(G,{modelValue:y.value,"onUpdate:modelValue":v[3]||(v[3]=h=>y.value=h),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[h=>!!h||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(Ce,{align:"right"},{default:t(()=>[Z(e(D,{flat:"",label:"Cancel",color:"primary"},null,512),[[ee]]),e(D,{flat:"",label:"Confirm",color:"negative",onClick:l})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};const go=s=>(W("data-v-7ba0107e"),s=s(),X(),s),vo={class:"q-gutter-md q-ma-md"},ho={class:"row justify-between"},yo={class:"text-subtitle1"},bo={class:"text-subtitle1"},wo={class:"text-subtitle1"},xo={key:1,class:"data-error"},$o=go(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),ko={__name:"TransactionPendingCard",setup(s){const p=ie(),y=Be(),x=B(()=>y.pendingSoftdrinksReports),_=p.params.branch_id,u=R("pending"),w=async()=>{try{const l=await y.fetchPendingSoftdrinksStocks(_,u.value);console.log(x.value)}catch(l){console.error("Error fetching pending stocks:",l)}};pe(async()=>{_&&await w()});const r=l=>oe.formatDate(l,"MMMM D, YYYY"),d=l=>oe.formatDate(l,"hh:mm A"),g=l=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",n=l.firstname?o(l.firstname):"No Firstname",i=l.middlename?o(l.middlename).charAt(0)+".":"",m=l.lastname?o(l.lastname):"No Lastname";return`${n} ${i} ${m}`};return(l,o)=>(b(),C("div",null,[e(Re,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",vo,[x.value.length?(b(!0),C(L,{key:0},re(x.value,(n,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",ho,[a("div",yo,f(r(n.created_at)),1),a("div",bo,f(d(n.created_at)),1),a("div",wo,f(n.branch.name)+" - "+f(g(n.employee)),1),a("div",null,[e(Y,{color:"yellow",outlined:""},{default:t(()=>[S(" Pending ")]),_:1})]),a("div",null,[e(fo,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(b(),C("div",xo,[e(ne,{name:"warning",color:"warning",size:"4em"}),$o]))])]),_:1})]))}};var Co=E(ko,[["__scopeId","data-v-7ba0107e"]]);const Ro={class:"row justify-between"},Po=a("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),So={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){Be(),R(!1);const p=R(!1),y=()=>{p.value=!0},x=s,_=B(()=>(console.log("Filtered rows:",x.report||[]),x.report.softdrinks_added_stocks||[])),u=r=>{const d=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",g=r.firstname?d(r.firstname):"No Firstname",l=r.middlename?d(r.middlename).charAt(0)+".":"",o=r.lastname?d(r.lastname):"No Lastname";return`${g} ${l} ${o}`},w=[{name:"product_name",label:"Product Name",field:r=>(console.log("Row data:",r),r.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:r=>(console.log("Row data:",r),r.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:r=>r.added_stocks?`${r.added_stocks} pcs`:"N/A"}];return(r,d)=>(b(),C(L,null,[a("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:y})]),e(Q,{modelValue:p.value,"onUpdate:modelValue":d[2]||(d[2]=g=>p.value=g)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",Ro,[Po,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=g=>p.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+f(u(s.report.employee)),1),a("div",null," Branch: "+f(s.report.branch.name),1),a("div",null,[S(" Status: "),e(Y,{color:"green",outlined:""},{default:t(()=>[S(f(s.report.status),1)]),_:1})])]),_:1}),e($,null,{default:t(()=>[e(se,{rows:_.value,columns:w,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:r.pagination,"onUpdate:pagination":d[1]||(d[1]=g=>r.pagination=g),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Vo=s=>(W("data-v-2b1290c8"),s=s(),X(),s),Do={class:"q-gutter-md q-ma-md"},qo={class:"row justify-between"},No={class:"text-subtitle1"},To={class:"text-subtitle1"},Ao={class:"text-subtitle1"},Uo={key:1,class:"data-error"},Bo=Vo(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Io={__name:"TransactionConfirmedCard",setup(s){const p=ie(),y=Be(),x=B(()=>y.confirmedSoftdrinksReports),_=p.params.branch_id,u=R("confirmed"),w=async()=>{try{const l=await y.fetchConfirmedSoftdrinksStocks(_,u.value);console.log(x.value)}catch(l){console.error("Error fetching confirmed stocks",l)}};pe(async()=>{_&&await w()});const r=l=>oe.formatDate(l,"MMMM D, YYYY"),d=l=>oe.formatDate(l,"hh:mm A"),g=l=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",n=l.firstname?o(l.firstname):"No Firstname",i=l.middlename?o(l.middlename).charAt(0)+".":"",m=l.lastname?o(l.lastname):"No Lastname";return`${n} ${i} ${m}`};return(l,o)=>(b(),C("div",null,[e(Re,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Do,[x.value.length?(b(!0),C(L,{key:0},re(x.value,(n,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",qo,[a("div",No,f(r(n.created_at)),1),a("div",To,f(d(n.created_at)),1),a("div",Ao,f(n.branch.name)+" - "+f(g(n.employee)),1),a("div",null,[e(Y,{color:"green",outlined:""},{default:t(()=>[S(f(n.status),1)]),_:2},1024)]),a("div",null,[e(So,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(b(),C("div",Uo,[e(ne,{name:"warning",color:"warning",size:"4em"}),Bo]))])]),_:1})]))}};var Fo=E(Io,[["__scopeId","data-v-2b1290c8"]]);const Lo={class:"row justify-between"},zo=a("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),Mo={class:"q-mt-md"},Ho={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){Be();const p=R(!1),y=()=>{p.value=!0},x=s,_=B(()=>(console.log("Filtered rows:",x.report||[]),x.report.softdrinks_added_stocks)),u=r=>{const d=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",g=r.firstname?d(r.firstname):"No Firstname",l=r.middlename?d(r.middlename).charAt(0)+".":"",o=r.lastname?d(r.lastname):"No Lastname";return`${g} ${l} ${o}`},w=[{name:"product_name",label:"Product Name",field:r=>(console.log("Row data:",r),r.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:r=>(console.log("Row data:",r),r.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:r=>r.added_stocks?`${r.added_stocks} pcs`:"N/A"}];return(r,d)=>(b(),C(L,null,[a("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:y})]),e(Q,{modelValue:p.value,"onUpdate:modelValue":d[2]||(d[2]=g=>p.value=g)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",Lo,[zo,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=g=>p.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+f(u(s.report.employee)),1),a("div",null," Branch: "+f(s.report.branch.name),1),a("div",null,[S(" Status: "),e(Y,{color:"red",outlined:""},{default:t(()=>[S(f(s.report.status),1)]),_:1})]),a("div",Mo,"Remark: "+f(s.report.remark),1)]),_:1}),e($,null,{default:t(()=>[e(se,{rows:_.value,columns:w,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:r.pagination,"onUpdate:pagination":d[1]||(d[1]=g=>r.pagination=g),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const jo=s=>(W("data-v-51a1abe5"),s=s(),X(),s),Oo={class:"q-gutter-md q-ma-md"},Qo={class:"row justify-between"},Eo={class:"text-subtitle1"},Yo={class:"text-subtitle1"},Ko={class:"text-subtitle1"},Go={key:1,class:"data-error"},Jo=jo(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Wo={__name:"TransactionDeclinedCard",setup(s){const p=ie(),y=Be(),x=B(()=>y.declinedSoftdrinksReports),_=p.params.branch_id,u=R("declined"),w=async()=>{try{const l=await y.fetchDeclinedSoftdrinksStocks(_,u.value);console.log("softdrinksProductsDeclined",x.value)}catch(l){console.error("Error fetching decline stocks:",l)}};pe(async()=>{_&&await w()});const r=l=>oe.formatDate(l,"MMMM D, YYYY"),d=l=>oe.formatDate(l,"hh:mm A"),g=l=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",n=l.firstname?o(l.firstname):"No Firstname",i=l.middlename?o(l.middlename).charAt(0)+".":"",m=l.lastname?o(l.lastname):"No Lastname";return`${n} ${i} ${m}`};return(l,o)=>(b(),I(Re,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Oo,[x.value.length?(b(!0),C(L,{key:0},re(x.value,(n,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",Qo,[a("div",Eo,f(r(n.created_at)),1),a("div",Yo,f(d(n.created_at)),1),a("div",Ko,f(n.branch.name)+" - "+f(g(n.employee)),1),a("div",null,[e(Y,{color:"red",outlined:""},{default:t(()=>[S(f(n.status),1)]),_:2},1024)]),a("div",null,[e(Ho,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(b(),C("div",Go,[e(ne,{name:"warning",color:"warning",size:"4em"}),Jo]))])]),_:1}))}};var Xo=E(Wo,[["__scopeId","data-v-51a1abe5"]]);const Zo={class:"q-gutter-y-sm"},es={__name:"SoftdrinksTransactionPage",setup(s){const p=R("pendingReports"),y=B(()=>{switch(p.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return(x,_)=>(b(),C(L,null,[a("div",Zo,[e(Ae,{modelValue:p.value,"onUpdate:modelValue":_[0]||(_[0]=u=>p.value=u),"indicator-color":y.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(te,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(te,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(te,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Ue,{modelValue:p.value,"onUpdate:modelValue":_[1]||(_[1]=u=>p.value=u),animated:""},{default:t(()=>[e(ae,{name:"pendingReports"},{default:t(()=>[e(Co)]),_:1}),e(ae,{name:"confirmReports"},{default:t(()=>[e(Fo)]),_:1}),e(ae,{name:"declineReports"},{default:t(()=>[e(Xo)]),_:1})]),_:1},8,["modelValue"])],64))}};var ts=E(es,[["__scopeId","data-v-368f5ccc"]]);const as={class:"row justify-between"},ls=a("div",{class:"text-h6"},"Other Product Added Stocks Report",-1),ns=a("div",{class:"text-h6"},"Decline Report",-1),os={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){const p=je(),y=R(""),x=R(!1),_=R(!1),u=R({rowsPerPage:0}),w=()=>{_.value=!0},r=()=>{x.value=!0},d=s,g=async()=>{if(!y.value){de.create({type:"negative",message:"Remark is required"});return}try{const m=await p.declineReport(d.report.id,y.value);console.log("Report declined:",m),de.create({type:"negative",message:"Report declined successfully"}),x.value=!1,_.value=!1,y.value=""}catch(m){console.error("Error declining report:",m),de.create({type:"negative",message:"Failed to decline report"})}},l=async()=>{try{const m=await p.confirmReport(d.report.id);console.log("Report confirmed:",m),de.create({type:"positive",message:"Report confirmed successfully"}),_.value=!1}catch(m){console.error(m)}},o=B(()=>d.report.other_added_stock||[]),n=[{name:"product_name",label:"Product Name",field:m=>m.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:m=>m.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:m=>m.added_stocks?`${m.added_stocks} pcs`:"N/A"}],i=m=>{const c=V=>V?V.charAt(0).toUpperCase()+V.slice(1).toLowerCase():"",v=m.firstname?c(m.firstname):"No Firstname",h=m.middlename?c(m.middlename).charAt(0)+".":"",P=m.lastname?c(m.lastname):"No Lastname";return`${v} ${h} ${P}`};return(m,c)=>(b(),C(L,null,[a("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:w})]),e(Q,{modelValue:_.value,"onUpdate:modelValue":c[2]||(c[2]=v=>_.value=v)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",as,[ls,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:c[0]||(c[0]=v=>_.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+f(i(s.report.employee)),1),a("div",null," Branch: "+f(s.report.branch.name),1),a("div",null,[S(" Status: "),e(Y,{color:"yellow",outlined:""},{default:t(()=>[S(f(s.report.status),1)]),_:1})])]),_:1}),e($,null,{default:t(()=>[e(se,{rows:o.value,columns:n,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:u.value,"onUpdate:pagination":c[1]||(c[1]=v=>u.value=v),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e($,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(D,{color:"negative",label:"Decline",class:"action-btn",onClick:r}),e(D,{color:"positive",label:"Confirm",class:"action-btn",onClick:l})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Q,{modelValue:x.value,"onUpdate:modelValue":c[4]||(c[4]=v=>x.value=v)},{default:t(()=>[e(A,null,{default:t(()=>[e($,null,{default:t(()=>[ns]),_:1}),e($,null,{default:t(()=>[e(G,{modelValue:y.value,"onUpdate:modelValue":c[3]||(c[3]=v=>y.value=v),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[v=>!!v||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(Ce,{align:"right"},{default:t(()=>[Z(e(D,{flat:"",label:"Cancel",color:"primary"},null,512),[[ee]]),e(D,{flat:"",label:"Confirm",color:"negative",onClick:g})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const ss=s=>(W("data-v-355e3e60"),s=s(),X(),s),rs={class:"q-gutter-md q-ma-md"},is={key:0},ds={class:"row justify-between"},cs={class:"text-subtitle1"},us={class:"text-subtitle1"},ms={class:"text-subtitle1"},ps={key:1,class:"data-error"},_s=ss(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),fs={__name:"TransactionPendingCard",setup(s){const p=ie(),y=je(),x=B(()=>y.pendingOtherReports),_=p.params.branch_id,u=R("pending"),w=async()=>{try{const l=await y.fetchPendingOtherStocks(_,u.value);console.log(x.value)}catch(l){console.error("Error fetching pending stocks:",l)}};pe(async()=>{_&&await w()});const r=l=>oe.formatDate(l,"MMMM D, YYYY"),d=l=>oe.formatDate(l,"hh:mm A"),g=l=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",n=l.firstname?o(l.firstname):"No Firstname",i=l.middlename?o(l.middlename).charAt(0)+".":"",m=l.lastname?o(l.lastname):"No Lastname";return`${n} ${i} ${m}`};return(l,o)=>(b(),C("div",null,[e(Re,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",rs,[x.value.length?(b(),C("div",is,[(b(!0),C(L,null,re(x.value,(n,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",ds,[a("div",cs,f(r(n.created_at)),1),a("div",us,f(d(n.created_at)),1),a("div",ms,f(n.branch.name)+" - "+f(g(n.employee)),1),a("div",null,[e(Y,{color:"yellow",outlined:""},{default:t(()=>[S(" Pending ")]),_:1})]),a("div",null,[e(os,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128))])):(b(),C("div",ps,[e(ne,{name:"warning",color:"warning",size:"4em"}),_s]))])]),_:1})]))}};var gs=E(fs,[["__scopeId","data-v-355e3e60"]]);const vs={class:"row justify-between"},hs=a("div",{class:"text-h6"},"Other Added Stocks Report",-1),ys={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){Se(),R(!1);const p=R(!1),y=()=>{p.value=!0};xe();const x=s,_=B(()=>(console.log("Filtered rows:",x.report||[]),x.report.other_added_stock||[])),u=r=>{const d=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",g=r.firstname?d(r.firstname):"No Firstname",l=r.middlename?d(r.middlename).charAt(0)+".":"",o=r.lastname?d(r.lastname):"No Lastname";return`${g} ${l} ${o}`},w=[{name:"product_name",label:"Product Name",field:r=>(console.log("Row data:",r),r.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:r=>(console.log("Row data:",r),r.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:r=>r.added_stocks?`${r.added_stocks} pcs`:"N/A"}];return(r,d)=>(b(),C(L,null,[a("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:y})]),e(Q,{modelValue:p.value,"onUpdate:modelValue":d[2]||(d[2]=g=>p.value=g)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",vs,[hs,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=g=>p.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+f(u(s.report.employee)),1),a("div",null," Branch: "+f(s.report.branch.name),1),a("div",null,[S(" Status: "),e(Y,{color:"green",outlined:""},{default:t(()=>[S(f(s.report.status),1)]),_:1})])]),_:1}),e($,null,{default:t(()=>[e(se,{rows:_.value,columns:w,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:r.pagination,"onUpdate:pagination":d[1]||(d[1]=g=>r.pagination=g),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const bs=s=>(W("data-v-5b0a7351"),s=s(),X(),s),ws={class:"q-gutter-md q-ma-md"},xs={class:"row justify-between"},$s={class:"text-subtitle1"},ks={class:"text-subtitle1"},Cs={class:"text-subtitle1"},Rs={key:1,class:"data-error"},Ps=bs(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ss={__name:"TransactionConfirmedCard",setup(s){const p=ie(),y=je(),x=B(()=>y.confirmedOtherReports),_=p.params.branch_id,u=R("confirmed"),w=async()=>{try{const l=await y.fetchConfirmedOtherStocks(_,u.value);console.log(x.value)}catch(l){console.error("Error fetching confirmed stocks:",l)}};pe(async()=>{_&&await w()});const r=l=>oe.formatDate(l,"MMMM D, YYYY"),d=l=>oe.formatDate(l,"hh:mm A"),g=l=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",n=l.firstname?o(l.firstname):"No Firstname",i=l.middlename?o(l.middlename).charAt(0)+".":"",m=l.lastname?o(l.lastname):"No Lastname";return`${n} ${i} ${m}`};return(l,o)=>(b(),C("div",null,[e(Re,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",ws,[x.value.length?(b(!0),C(L,{key:0},re(x.value,(n,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",xs,[a("div",$s,f(r(n.created_at)),1),a("div",ks,f(d(n.created_at)),1),a("div",Cs,f(n.branch.name)+" - "+f(g(n.employee)),1),a("div",null,[e(Y,{color:"green",outlined:""},{default:t(()=>[S(f(n.status),1)]),_:2},1024)]),a("div",null,[e(ys,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(b(),C("div",Rs,[e(ne,{name:"warning",color:"warning",size:"4em"}),Ps]))])]),_:1})]))}};var Vs=E(Ss,[["__scopeId","data-v-5b0a7351"]]);const Ds={class:"row justify-between"},qs=a("div",{class:"text-h6"},"Others Added Stocks Report",-1),Ns={class:"q-mt-md"},Ts={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){Se(),R(!1);const p=R(!1),y=()=>{p.value=!0},x=s,_=B(()=>(console.log("Filtered rows:",x.report||[]),x.report.other_added_stock||[])),u=r=>{const d=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",g=r.firstname?d(r.firstname):"No Firstname",l=r.middlename?d(r.middlename).charAt(0)+".":"",o=r.lastname?d(r.lastname):"No Lastname";return`${g} ${l} ${o}`},w=[{name:"product_name",label:"Product Name",field:r=>(console.log("Row data:",r),r.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:r=>(console.log("Row data:",r),r.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:r=>r.added_stocks?`${r.added_stocks} pcs`:"N/A"}];return(r,d)=>(b(),C(L,null,[a("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:y})]),e(Q,{modelValue:p.value,"onUpdate:modelValue":d[2]||(d[2]=g=>p.value=g)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e($,null,{default:t(()=>[a("div",Ds,[qs,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=g=>p.value=!1)})])]),_:1}),e($,null,{default:t(()=>[a("div",null,"Cashier: "+f(u(s.report.employee)),1),a("div",null," Branch: "+f(s.report.branch.name),1),a("div",null,[S(" Status: "),e(Y,{color:"red",outlined:""},{default:t(()=>[S(f(s.report.status),1)]),_:1})]),a("div",Ns,"Remark: "+f(s.report.remark),1)]),_:1}),e($,null,{default:t(()=>[e(se,{rows:_.value,columns:w,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:r.pagination,"onUpdate:pagination":d[1]||(d[1]=g=>r.pagination=g),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const As=s=>(W("data-v-67ff56ab"),s=s(),X(),s),Us={class:"q-gutter-md q-ma-md"},Bs={class:"row justify-between"},Is={class:"text-subtitle1"},Fs={class:"text-subtitle1"},Ls={class:"text-subtitle1"},zs={key:1,class:"data-error"},Ms=As(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Hs={__name:"TransactionDeclinedCard",setup(s){const p=ie(),y=je(),x=B(()=>y.declinedOtherReports),_=p.params.branch_id,u=R("declined"),w=async()=>{try{const l=await y.fetchDeclinedOtherStocks(_,u.value);console.log("selectedOtherProductDeclined",x.value)}catch(l){console.error("Error fetching decline stocks:",l)}};pe(async()=>{_&&await w()});const r=l=>oe.formatDate(l,"MMMM D, YYYY"),d=l=>oe.formatDate(l,"hh:mm A"),g=l=>{const o=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",n=l.firstname?o(l.firstname):"No Firstname",i=l.middlename?o(l.middlename).charAt(0)+".":"",m=l.lastname?o(l.lastname):"No Lastname";return`${n} ${i} ${m}`};return(l,o)=>(b(),C("div",null,[e(Re,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Us,[x.value.length?(b(!0),C(L,{key:0},re(x.value,(n,i)=>(b(),I(A,{key:i},{default:t(()=>[e($,null,{default:t(()=>[a("div",Bs,[a("div",Is,f(r(n.created_at)),1),a("div",Fs,f(d(n.created_at)),1),a("div",Ls,f(n.branch.name)+" - "+f(g(n.employee)),1),a("div",null,[e(Y,{color:"red",outlined:""},{default:t(()=>[S(f(n.status),1)]),_:2},1024)]),a("div",null,[e(Ts,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(b(),C("div",zs,[e(ne,{name:"warning",color:"warning",size:"4em"}),Ms]))])]),_:1})]))}};var js=E(Hs,[["__scopeId","data-v-67ff56ab"]]);const Os={class:"q-gutter-y-sm"},Qs={__name:"OtherTransactionPage",setup(s){const p=R("pendingReports"),y=B(()=>{switch(p.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return(x,_)=>(b(),C(L,null,[a("div",Os,[e(Ae,{modelValue:p.value,"onUpdate:modelValue":_[0]||(_[0]=u=>p.value=u),"indicator-color":y.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(te,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(te,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(te,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Ue,{modelValue:p.value,"onUpdate:modelValue":_[1]||(_[1]=u=>p.value=u),animated:""},{default:t(()=>[e(ae,{name:"pendingReports"},{default:t(()=>[e(gs)]),_:1}),e(ae,{name:"confirmReports"},{default:t(()=>[e(Vs)]),_:1}),e(ae,{name:"declineReports"},{default:t(()=>[e(js)]),_:1})]),_:1},8,["modelValue"])],64))}};var Es=E(Qs,[["__scopeId","data-v-b76c19b4"]]);const lt=s=>(W("data-v-0a732ed6"),s=s(),X(),s),Ys={class:"q-gutter-y-sm"},Ks=lt(()=>a("h1",null,"Bread",-1)),Gs=lt(()=>a("h1",null,"Cake",-1)),Js={__name:"TransactionPage",setup(s){const p=R("bread");return(y,x)=>(b(),C(L,null,[a("div",Ys,[e(Ae,{modelValue:p.value,"onUpdate:modelValue":x[0]||(x[0]=_=>p.value=_),"active-color":"light-green-13","indicator-color":"light-green-13","narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:"gradient-btn"},{default:t(()=>[e(te,{class:"text-white",name:"bread",label:"\u{1F35E}Bread"}),e(te,{class:"text-white",name:"selecta",label:"\u{1F366}Selecta"}),e(te,{class:"text-white",name:"softdrinks",label:"\u{1F964}Softdrinks"}),e(te,{class:"text-white",name:"cake",label:"\u{1F370}Cake"}),e(te,{class:"text-white",name:"other",label:"\u2B50Others"})]),_:1},8,["modelValue"])]),e(Ue,{modelValue:p.value,"onUpdate:modelValue":x[1]||(x[1]=_=>p.value=_),animated:""},{default:t(()=>[e(ae,{name:"bread"},{default:t(()=>[e(A,null,{default:t(()=>[Ks]),_:1})]),_:1}),e(ae,{name:"selecta"},{default:t(()=>[e(uo)]),_:1}),e(ae,{name:"softdrinks"},{default:t(()=>[e(ts)]),_:1}),e(ae,{name:"cake"},{default:t(()=>[e(A,null,{default:t(()=>[Gs]),_:1})]),_:1}),e(ae,{name:"other"},{default:t(()=>[e(Es)]),_:1})]),_:1},8,["modelValue"])],64))}};var Ws=E(Js,[["__scopeId","data-v-0a732ed6"]]);const qe=s=>(W("data-v-08dbe5d4"),s=s(),X(),s),Xs=qe(()=>a("div",{class:"text-h6"},"Create Branch Recipe",-1)),Zs={class:"q-mb-lg"},er={key:0,class:"custom-list z-top"},tr={class:"q-mb-sm"},ar=qe(()=>a("div",null,"Recipe Name",-1)),lr={class:"q-mb-lg"},nr=qe(()=>a("div",null,"Category",-1)),or=qe(()=>a("div",null,"Breads",-1)),sr={class:"q-mt-md q-gutter-y-sm"},rr=qe(()=>a("div",{class:"text-weight-thin"},"Ingredients List",-1)),ir={class:"q-mt-xl q-gutter-y-sm"},dr={class:"row justify-between"},cr=qe(()=>a("div",{align:"center"},"Ingredients",-1)),ur=qe(()=>a("div",{align:"center"},"Quantity",-1)),mr=["onKeyup"],pr={align:"right"},_r={__name:"RecipeCreate",setup(s){const p=ie(),y=p.params.branch_id,x=mt(),_=B(()=>x.recipes),u=ze(),w=Xe(),r=ze(),d=B(()=>u.branchRecipes),g=R(!1),l=()=>{g.value=!0},o=()=>{clearForm(),g.value=!1},n=z=>z?z.split(" ").map(M=>M.charAt(0).toUpperCase()+M.slice(1).toLowerCase()).join(" "):"",i=R(""),m=async()=>{x.searchRecipe(i.value)},c=B(()=>h.target!==0),v=z=>{h.recipe_id=z.id,h.recipe_name=z.name,h.category=z.category,i.value=""},h=Fe({recipe_id:"",recipe_name:"",category:"",target:"",branches_id:p.params.branch_id}),P=R(!1),V=R(null),U=R([]),N=R(U.value),k=R([]),F=R([]),q=Fe({name:"",quantity:""}),T=R(F.value);(async()=>{await w.fetchProductsByCategory("Bread"),P.value=!1,U.value=w.breads.map(z=>({label:z.name,value:z.id}))})(),(async()=>{const z="Ingredients";await r.fetchBranchRawMaterials(z,y),P.value=!1,F.value=r.ingredients.map(M=>({label:M.raw_material_name,value:M.raw_material_id,unit:M.ingredient_unit}))})();const J=()=>{q.name="",q.quantity=""},he=(z,M)=>{z.length>2&&(U.value.includes(z)||M(z,"add-unique"))},_e=(z,M)=>{M(()=>{if(z==="")N.value=U.value;else{const be=z.toLowerCase();N.value=U.value.filter(K=>K.label.toLowerCase().indexOf(be)>-1)}})},ye=(z,M)=>{M(()=>{if(z==="")T.value=F.value;else{const be=z.toLowerCase();T.value=F.value.filter(K=>K.label.toLowerCase().indexOf(be)>-1)}})},Ne=()=>{const z=k.value;function M(Pe,Oe){return Pe.find(ot=>ot.ingredients_id==Oe)}const be=q.name.value;M(z,be)?de.create({type:"negative",icon:"warning",message:"Ingredient already exist",timeout:2e3}):(k.value=[...z,{ingredients_id:q.name.value,label:q.name.label,quantity:q.quantity,unit:q.name.unit}],J())},ue=z=>{k.value.splice(z,1)};Me(()=>q.name,z=>{z&&z.unit?q.unit=z.unit:q.unit=""});const fe=()=>{h.recipe_id="",h.target="",V.value=null,k.value=[],q.name="",q.quantity=""},$e=async()=>{const z={recipe_id:h.recipe_id,target:h.target,status:"active",branch_id:h.branches_id,breads:V.value.map(M=>({bread_id:M.value})),ingredients:k.value.map(M=>({ingredient_id:M.ingredients_id,quantity:M.quantity}))};console.log("branchRecipe",z),await u.saveBranchRecipe(z),d.value=await u.fetchBranchRecipes(y),fe(),g.value=!1};return(z,M)=>(b(),C(L,null,[e(D,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Recipe",onClick:l}),e(Q,{modelValue:g.value,"onUpdate:modelValue":M[7]||(M[7]=be=>g.value=be)},{default:t(()=>[e(A,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e($,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[Xs,e(De),Z(e(D,{icon:"close",flat:"",dense:"",round:""},null,512),[[ee]])]),_:1}),e($,null,{default:t(()=>{var be;return[a("div",Zs,[e(G,{modelValue:i.value,"onUpdate:modelValue":[M[0]||(M[0]=K=>i.value=K),m],debounce:"1000",outlined:"",rounded:"",placeholder:"Search recipe",dense:""},{append:t(()=>[a("div",null,[e(ne,{name:"search"})])]),default:t(()=>[i.value?(b(),C("div",er,[e(A,null,{default:t(()=>[e(Ie,{separator:""},{default:t(()=>{var K;return[(K=_.value)!=null&&K.length?(b(!0),C(L,{key:1},re(_.value,Pe=>(b(),I(ge,{onClick:Oe=>v(Pe),key:Pe.id,clickable:""},{default:t(()=>[e(me,null,{default:t(()=>[e(we,null,{default:t(()=>[S(f(n(Pe.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(b(),I(ge,{key:0},{default:t(()=>[S(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ee("",!0)]),_:1},8,["modelValue"])]),a("div",tr,[ar,e(G,{modelValue:h.recipe_name,"onUpdate:modelValue":M[1]||(M[1]=K=>h.recipe_name=K),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",lr,[nr,e(G,{modelValue:h.category,"onUpdate:modelValue":M[2]||(M[2]=K=>h.category=K),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[e(G,{modelValue:h.target,"onUpdate:modelValue":M[3]||(M[3]=K=>h.target=K),outlined:"",dense:"",suffix:" / 1kg",type:"number",label:"Target Pcs"},null,8,["modelValue"])]),a("div",null,[or,e(Qe,{modelValue:V.value,"onUpdate:modelValue":M[4]||(M[4]=K=>V.value=K),"use-input":"","use-chips":"","chips-color":"primary",multiple:"","input-debounce":"0",options:N.value,behavior:"menu","hide-dropdown-icon":"",outlined:"",dense:"",label:"Bread/s",onNewValue:he,onFilter:_e,rules:[K=>K&&K.length>0||"Bread is required"]},{"no-option":t(()=>[e(ge,null,{default:t(()=>[e(me,{class:"text-grey"},{default:t(()=>[S(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),a("div",sr,[rr,a("div",null,[e(Ie,{dense:"",separator:"",class:"box"},{default:t(()=>[(b(!0),C(L,null,re(k.value,(K,Pe)=>(b(),I(ge,{key:Pe},{default:t(()=>[e(me,null,{default:t(()=>[e(we,null,{default:t(()=>[S(f(K.label),1)]),_:2},1024)]),_:2},1024),e(me,null,{default:t(()=>[S(f(K.quantity)+" "+f(K.unit),1)]),_:2},1024),e(me,{side:""},{default:t(()=>[e(D,{onClick:Oe=>ue(Pe),color:"grey-10",icon:"backspace",dense:"",flat:"",round:""},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),a("div",ir,[a("div",dr,[a("div",null,[cr,e(Qe,{modelValue:q.name,"onUpdate:modelValue":M[5]||(M[5]=K=>q.name=K),debounce:"3000",outlined:"","chips-color":"primary",options:T.value,dense:"",label:"Ingredients",behavior:"menu","use-input":"","hide-dropdown-icon":"",onFilter:ye,style:{width:"215px","max-width":"450px","min-width":"80px"}},{"no-option":t(()=>[e(ge,null,{default:t(()=>[e(me,{class:"text-grey"},{default:t(()=>[S(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),a("div",null,[ur,e(G,{modelValue:q.quantity,"onUpdate:modelValue":M[6]||(M[6]=K=>q.quantity=K),modelModifiers:{number:!0},outlined:"",dense:"",type:"number",label:"Quantity",suffix:((be=q==null?void 0:q.name)==null?void 0:be.unit)||"",style:{width:"115px"},hint:"Enter the quantity as a decimal",mask:"##.##"},null,8,["modelValue","suffix"])])]),a("form",{onKeyup:Ve(it(Ne,["prevent"]),["enter"])},[a("div",pr,[e(D,{padding:"xs md",type:"button",size:"sm",outline:"",dense:"",label:"add",icon:"add",color:"purple",onClick:Ne})])],40,mr)])]}),_:1}),e(Ce,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(D,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:o}),e(D,{class:"glossy",color:"teal",label:"Create",onClick:$e,disable:!c.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var fr=E(_r,[["__scopeId","data-v-08dbe5d4"]]);const nt=s=>(W("data-v-33664d62"),s=s(),X(),s),gr=nt(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),vr=nt(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),hr={__name:"RecipeDelete",props:["delete"],setup(s){const p=ze(),y=s,x=R(!1),_=()=>{x.value=!0},u=async()=>{await p.deleteRecipe(y.delete.row.id),x.value=!1};return(w,r)=>(b(),C(L,null,[e(D,{onClick:_,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"","aria-label":"Delete"},{default:t(()=>[e(le,{class:"bg-negative",delay:200},{default:t(()=>[S("Delete")]),_:1})]),_:1}),e(Q,{modelValue:x.value,"onUpdate:modelValue":r[0]||(r[0]=d=>x.value=d),persistent:""},{default:t(()=>[e(A,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e($,{class:"q-pt-none q-pb-sm"},{default:t(()=>[gr,vr]),_:1}),e(Ye,{class:"q-mb-md"}),e($,null,{default:t(()=>[e(Ce,{align:"right",class:"q-pt-none"},{default:t(()=>[Z(e(D,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[ee]]),e(D,{dense:"",label:"Delete",color:"negative",onClick:u,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var yr=E(hr,[["__scopeId","data-v-33664d62"]]);const br=s=>(W("data-v-7a561dd0"),s=s(),X(),s),wr={class:"text-h6 text-white"},xr=br(()=>a("div",{class:"text-h6",align:"center"},"Bread List",-1)),$r={class:"row",align:"center"},kr={__name:"RecipeBreadGroups",props:["breadGroups"],setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=ve();console.log("breadGroups",s.breadGroups);const w=r=>r?r.split(" ").map(d=>d.charAt(0).toUpperCase()+d.slice(1).toLowerCase()).join(" "):"";return(r,d)=>(b(),I(Q,{ref_key:"dialogRef",ref:p,onHide:H(y),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(A,{style:{width:"500px","max-width":"120vw"}},{default:t(()=>[e($,{class:"row bg-backgroud text-h6"},{default:t(()=>[a("div",wr,f(w(s.breadGroups.name)),1),e(De),a("div",null,[Z(e(D,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[ee]])])]),_:1}),e($,null,{default:t(()=>[xr]),_:1}),e($,null,{default:t(()=>[(b(!0),C(L,null,re(s.breadGroups.bread_groups,(g,l)=>(b(),C("div",{key:l},[a("div",$r,f(g),1)]))),128))]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Cr=E(kr,[["__scopeId","data-v-7a561dd0"]]);const Rr=s=>(W("data-v-17f74def"),s=s(),X(),s),Pr={class:"text-h6 text-white"},Sr=Rr(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Vr={__name:"RecipeIngredientGroups",props:["ingredientGroups"],setup(s){const{dialogRef:p,onDialogHide:y,onDialogOK:x,onDialogCancel:_}=ve();console.log("ingredientGroups",s.ingredientGroups);const w=d=>d?d.split(" ").map(g=>g.charAt(0).toUpperCase()+g.slice(1).toLowerCase()).join(" "):"",r=d=>{const g=Number(d.quantity)||0,l=d.unit||"";return g>1e3?`${parseFloat((g/1e3).toFixed(3))} kg`:g>1?`${parseFloat(g.toFixed(3))} ${l}`:`${parseFloat(g.toFixed(3))} ${l}`};return(d,g)=>(b(),I(Q,{ref_key:"dialogRef",ref:p,onHide:H(y),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(A,{style:{width:"500px","max-width":"120vw"}},{default:t(()=>[e($,{class:"row bg-backgroud text-h6"},{default:t(()=>[a("div",Pr,f(w(s.ingredientGroups.name)),1),e(De),a("div",null,[Z(e(D,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[ee]])])]),_:1}),e($,null,{default:t(()=>[Sr]),_:1}),e($,null,{default:t(()=>[e(Ie,{dense:"",separator:"",class:"box"},{default:t(()=>[e(ge,null,{default:t(()=>[e(me,null,{default:t(()=>[e(we,{class:"text-overline"},{default:t(()=>[S("Raw Materials Name")]),_:1})]),_:1}),e(me,null,{default:t(()=>[e(we,{class:"text-overline"},{default:t(()=>[S("Code")]),_:1})]),_:1}),e(me,{side:""},{default:t(()=>[e(we,{class:"text-overline"},{default:t(()=>[S("Quantity")]),_:1})]),_:1})]),_:1}),(b(!0),C(L,null,re(s.ingredientGroups.ingredient_groups,(l,o)=>(b(),I(ge,{key:o},{default:t(()=>[e(me,null,{default:t(()=>[e(we,{class:"text-caption"},{default:t(()=>[S(f(l.ingredient_name),1)]),_:2},1024)]),_:2},1024),e(me,null,{default:t(()=>[e(we,{class:"text-caption"},{default:t(()=>[S(f(l.code),1)]),_:2},1024)]),_:2},1024),e(me,{side:""},{default:t(()=>[e(we,{class:"text-caption"},{default:t(()=>[S(f(r(l)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Dr=E(Vr,[["__scopeId","data-v-17f74def"]]);const qr=s=>(W("data-v-1fcb507c"),s=s(),X(),s),Nr={class:"row justify-between"},Tr={class:"q-my-sm"},Ar={key:0,class:"spinner-wrapper"},Ur={key:1},Br={key:0,class:"data-error"},Ir=qr(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Fr={class:"row justify-center q-gutter-x-md"},Lr={__name:"RecipeTable",setup(s){const y=ie().params.branch_id,x=ze(),_=R(""),u=R(!0),w=R([]),r=R(!1),d=R({rowsPerPage:0}),g=["inactive","active"],l=B(()=>x.branchRecipes);console.log("branch recipe",l.value);const o=B(()=>_.value?l.value.filter(k=>k.name.toLowerCase().includes(_.value.toLowerCase())):l.value);pe(async()=>{y&&await n(y)});const n=async k=>{try{u.value=!0;const F=await x.fetchBranchRecipes(k);l.value=F,console.log("branchRecipeRows",l.value),l.value.length||(r.value=!0),console.log("Branch recipe",l.value)}catch(F){console.log("Error fetching recipe",F)}finally{u.value=!1}},i=k=>!k&&k!==0?"Set Target":typeof k=="number"||!isNaN(k)?(k=parseFloat(k),k%1===0?k:parseFloat(k.toFixed(1))):k;async function m(k,F){try{const q=await ke.put("/api/update-target/"+k.id,{target:parseFloat(F)});if(console.log("response",q),q.status==200){const T=w.value.findIndex(j=>j.id==k.id);w.value[T]=F}de.create({type:"positive",message:"Recipe target edited successfully"})}catch(q){console.error("Error updating recipe target:",q),de.create({type:"negative",message:"Failed to edit recipe target"})}}async function c(k,F){try{if((await ke.put("/api/branch-update-status/"+k.id,{status:F})).status==200){const T=w.value.findIndex(j=>j.id==k.id);w.value[T]=F}de.create({type:"positive",message:"Recipe status change successfully"})}catch(q){console.error("Error updating recipe status:",q),de.create({type:"negative",message:"Failed to change recipe status"})}}const v=k=>k?k.split(" ").map(F=>F.charAt(0).toUpperCase()+F.slice(1).toLowerCase()).join(" "):"",h=[{name:"name",label:"Recipe name",align:"center",field:k=>k.name},{name:"category",label:"Category",align:"center",field:k=>k.recipe},{name:"target",label:"Target",align:"center",field:k=>i(k.target)},{name:"status",label:"Status",align:"center",field:"status"},{name:"bread_groups",label:"List of Bread",align:"center",field:"bread_groups"},{name:"ingredient_groups",label:"List of Ingredients",align:"center",field:"ingredient_groups"},{name:"action",label:"Action",align:"center",sortable:!0}],P=xe(),V=k=>{console.log("Bread Groups:",k),P.dialog({component:Cr,componentProps:{breadGroups:k}})},U=k=>{console.log("Ingredients Groups:",k),P.dialog({component:Dr,componentProps:{ingredientGroups:k}})},N=k=>{switch(k){case"inactive":return"grey";case"active":return"green";default:return"grey"}};return(k,F)=>(b(),C(L,null,[a("div",Nr,[a("div",null,[e(G,{class:"q-pb-lg q-pl-md",modelValue:_.value,"onUpdate:modelValue":F[0]||(F[0]=q=>_.value=q),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"1500px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(ne,{name:"search"})]),_:1},8,["modelValue"])]),a("div",Tr,[e(fr)])]),u.value?(b(),C("div",Ar,[e(He,{size:"50px",color:"primary"})])):(b(),C("div",Ur,[o.value.length===0?(b(),C("div",Br,[e(ne,{name:"warning",color:"warning",size:"4em"}),Ir])):(b(),I(se,{key:1,class:"table-container sticky-header",filter:_.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:h,rows:o.value,"row-key":"name","virtual-scroll":"",pagination:d.value,"onUpdate:pagination":F[1]||(F[1]=q=>d.value=q),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"}},{"body-cell-name":t(q=>[e(O,{props:q},{default:t(()=>[a("span",null,f(v(q.row.name)),1)]),_:2},1032,["props"])]),"body-cell-category":t(q=>[e(O,{props:q},{default:t(()=>[a("span",null,f(v(q.row.category)),1)]),_:2},1032,["props"])]),"body-cell-target":t(q=>[e(O,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[S(f(i(q.row.target))+" ",1),e(le,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[S("Edit Target")]),_:1})]),e(Te,{"onUpdate:modelValue":[T=>m(q.row,T),T=>q.row.target=T],modelValue:q.row.target,"auto-save":""},{default:t(T=>[e(G,{modelValue:T.value,"onUpdate:modelValue":j=>T.value=j,dense:"",suffix:"pcs",autofocus:"",counter:"",onKeyup:Ve(T.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-status":t(q=>[e(O,{props:q},{default:t(()=>[e(Y,{outline:"",color:N(q.row.status)},{default:t(()=>[S(f(v(q.row.status))+" ",1),e(le,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[S("Change Status")]),_:1})]),_:2},1032,["color"]),e(Te,{"onUpdate:modelValue":[T=>c(q.row,T),T=>q.row.status=T],modelValue:q.row.status,"auto-save":""},{default:t(T=>[a("span",null,f(q.row.name),1),e(Qe,{modelValue:T.value,"onUpdate:modelValue":j=>T.value=j,dense:"",label:"status",autofocus:"",options:g,counter:"",mask:"###",onKeyup:Ve(T.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-bread_groups":t(q=>[e(O,{props:q},{default:t(()=>[e(D,{"no-caps":"",onClick:T=>V(q.row),label:`${q.row.bread_groups.length} breads`,rounded:"",color:"brown"},null,8,["onClick","label"])]),_:2},1032,["props"])]),"body-cell-ingredient_groups":t(q=>[e(O,{props:q},{default:t(()=>[e(D,{"no-caps":"",onClick:T=>U(q.row),label:`${q.row.ingredient_groups.length} ingredients`,rounded:"",color:"purple"},null,8,["onClick","label"])]),_:2},1032,["props"])]),"body-cell-action":t(q=>[e(O,{props:q},{default:t(()=>[a("div",Fr,[e(yr,{delete:q},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var zr=E(Lr,[["__scopeId","data-v-1fcb507c"]]);const Mr={__name:"RecipePage",setup(s){return(p,y)=>(b(),C("div",null,[e(zr)]))}};const Hr={class:"elegant-container q-gutter-md"},jr={class:"text-h6 row justify-between"},Or={class:"q-gutter-sm"},Qr={class:"tab-container"},Er={__name:"BranchIdPage",setup(s){const p=ie(),y=R(""),x=dt(),_=async g=>(await ke.get(`/api/branches/${g}`)).data,u=async()=>{const g=p.params.branch_id,l=await _(g);l&&l.name?y.value=l.name:console.error("Branch data is missing 'name' property or invalid:",l)};pe(()=>{u()});const w=g=>g?g.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",r=R("products"),d=()=>{We.show(),x.push("/admin/branches").finally(()=>{We.hide()})};return(g,l)=>(b(),I(ct,{padding:""},{default:t(()=>[a("div",Hr,[a("div",jr,[a("div",null,[e(D,{outline:"",flat:"",icon:"arrow_back",onClick:d}),e(De)]),a("div",null,[e(ne,{name:"fa-solid fa-store",color:"red-6"}),S(" "+f(w(y.value)),1)])]),a("div",Or,[a("div",Qr,[e(Ae,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=o=>r.value=o),dense:"",class:"bg-grey-2 text-grey-7 tabs-as-cards","active-color":"red-6","indicator-color":"transparent",align:"justify"},{default:t(()=>[e(te,{name:"products",label:"Products"}),e(te,{name:"rawMaterials",label:"Raw Materials"}),e(te,{name:"recipe",label:"Recipe"}),e(te,{name:"production",label:"Production"}),e(te,{name:"transaction",label:"Transactions"})]),_:1},8,["modelValue"])]),e(A,{class:"q-mt-sm"},{default:t(()=>[e(Ue,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=o=>r.value=o),animated:""},{default:t(()=>[e(ae,{name:"products"},{default:t(()=>[e(Ft)]),_:1}),e(ae,{name:"rawMaterials"},{default:t(()=>[e(da)]),_:1}),e(ae,{name:"recipe"},{default:t(()=>[e(Mr)]),_:1}),e(ae,{name:"production"},{default:t(()=>[e(bn)]),_:1}),e(ae,{name:"transaction"},{default:t(()=>[e(Ws)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1}))}};var Di=E(Er,[["__scopeId","data-v-eb7c826e"]]);export{Di as default};
