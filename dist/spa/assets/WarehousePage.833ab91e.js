import{Q as G}from"./QBadge.2dc625c4.js";import{c as B,r as p,t as ae,o as u,a3 as b,f as a,w as t,a0 as W,M as q,Q as I,I as Q,ae as U,a1 as X,J as s,K as k,e as C,L as j,bo as oe,a4 as z,a5 as te,$ as D,be as le,aJ as Y,a2 as Z,O as K,R as M,H as pe,z as _e,u as he,aI as ve,aK as T,P as ee}from"./index.ca72f247.js";import{Q as fe}from"./QPage.c5c8524f.js";import{Q as ge}from"./QSpinnerDots.f3b67178.js";import{Q as P,a as ye}from"./QTable.6ef48ae6.js";import{Q as se}from"./QTooltip.3e12865c.js";import{Q as ne}from"./QSpace.888473d1.js";import{a as O,b as re}from"./QMenu.a8d5f7aa.js";import{Q as de}from"./QList.7330d34c.js";import{Q as ie}from"./QSelect.a1c4ed00.js";import{C as L}from"./ClosePopup.77864f63.js";import{u as J}from"./warehouse.89a20565.js";import{u as ue}from"./employee.0c9aaa4c.js";import{t as ce}from"./typography-format.6bffeec7.js";import{_ as A}from"./plugin-vue_export-helper.21dcd24c.js";import{b as we}from"./badge-color.f568cd69.js";import"./QVirtualScroll.eb023b79.js";import"./use-virtual-scroll.645c1690.js";import"./rtl.276c3f1b.js";import"./position-engine.a63ef796.js";import"./selection.66bddd9a.js";import"./QChip.ead5e565.js";import"./axios.0019c736.js";import"./date.7612c2b8.js";const E=d=>(K("data-v-3884d854"),d=d(),M(),d),be=E(()=>s("div",{class:"text-h5 q-mr-md"},"\u{1F3ED} Edit Warehouse",-1)),qe={class:"q-mt-lg q-animated q-animate-bounce"},$e=E(()=>s("div",null,"Name of Warehouse",-1)),xe={class:"q-mt-md q-animated q-animate-bounce"},Ce=E(()=>s("div",null,"Location",-1)),Ve={class:"q-mt-md q-animated q-animate-bounce"},ke=E(()=>s("div",null,"Person In-charge",-1)),We={key:0,class:"custom-list z-top"},Se={class:"row q-gutter-x-sm q-mt-md"},Qe={class:"col-6 q-animated q-animate-bounce"},De=E(()=>s("div",null,"Phone Number",-1)),Ie={class:"col-5 q-animated q-animate-bounce"},Ee=E(()=>s("div",null,"Status",-1)),Fe={__name:"WarehouseEditComponent",props:["edit"],setup(d){const{formatFullname:g}=ce(),$=ue(),_=J(),V=B(()=>$.employee),y=p(!1),h=["Open","Closed"],c=d,m=p(null),w=p(!1),v=p(!1),S=async()=>{m.value.trim()&&(w.value=!0,await $.searchPersonInCharge(m.value),w.value=!1,v.value=!0)},N=e=>{console.log("Selected Employee:",e),n.employee_id=e.id,n.employee_name=`${e.firstname} ${e.middlename?e.middlename.charAt(0)+".":""} ${e.lastname}`,m.value=`${e.firstname} ${e.middlename?e.middlename.charAt(0)+".":""} ${e.lastname}`,v.value=!1,console.log("Filled editBranchesForm Data:",n)},n=ae({name:"",location:"",person_incharge:"",employee_id:"",employee_name:"",phone:"",status:null}),r=()=>{var l,o;const e=c.edit.row;console.log("Edit Row Data:",e),v.value=!1,n.name=e.name,n.location=e.location,n.employee_id=e.employee_id,n.employee_name=e.employees?g(e.employees):"No Person in Charge",m.value=e.employees?g(e.employees):"No Person in Charge",n.warehouse_id=e!=null&&e.warehouse_id?e.warehouse_id:(l=e==null?void 0:e.warehouse)!=null&&l.id?(o=e==null?void 0:e.warehouse)==null?void 0:o.id:"",n.phone=e.phone,n.status=e.status,y.value=!0,console.log("Edit Data:",n)},i=()=>{n.name="",n.location="",n.person_incharge="",n.employee_id="",n.employee_name="",n.phone="",n.status=null,m.value=null,v.value=!1},x=async()=>{console.log("updatedWarehouse",n);try{await _.updateWarehouses(c.edit.row.id,n),i(),y.value=!1}catch(e){console.error("Failed to update ingredients:",e)}};return(e,l)=>(u(),b(z,null,[a(q,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:"",onClick:r},{default:t(()=>[a(se,{class:"bg-positive",delay:200},{default:t(()=>[W("Edit")]),_:1})]),_:1}),a(Z,{modelValue:y.value,"onUpdate:modelValue":l[6]||(l[6]=o=>y.value=o),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:t(()=>[a(I,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:t(()=>[a(Q,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:t(()=>[be,a(ne),U(a(q,{icon:"close",flat:"",dense:"",round:""},null,512),[[L]])]),_:1}),a(X,{class:"separator-gradient"}),a(Q,{class:"q-px-xl q-pt-none q-pb-lg"},{default:t(()=>[s("div",qe,[$e,a(k,{modelValue:n.name,"onUpdate:modelValue":l[0]||(l[0]=o=>n.name=o),outlined:"",dense:""},null,8,["modelValue"])]),s("div",xe,[Ce,a(k,{modelValue:n.location,"onUpdate:modelValue":l[1]||(l[1]=o=>n.location=o),outlined:"",dense:""},null,8,["modelValue"])]),s("div",Ve,[ke,s("div",null,[a(k,{modelValue:m.value,"onUpdate:modelValue":[l[2]||(l[2]=o=>m.value=o),S],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name or position",onFocus:l[3]||(l[3]=o=>v.value=!0)},{append:t(()=>[w.value?(u(),C(oe,{key:1,color:"grey",size:"sm"})):(u(),C(j,{key:0,name:"search"}))]),default:t(()=>[v.value&&m.value?(u(),b("div",We,[a(I,null,{default:t(()=>[a(de,{separator:""},{default:t(()=>{var o;return[(o=V.value)!=null&&o.length?(u(!0),b(z,{key:1},te(V.value,f=>(u(),C(O,{onClick:R=>N(f),key:f.id,clickable:""},{default:t(()=>[a(re,null,{default:t(()=>[W(D(`${f.firstname} ${f.middlename?f.middlename.charAt(0)+".":""} ${f.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(u(),C(O,{key:0},{default:t(()=>[W(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):le("",!0)]),_:1},8,["modelValue"])])]),s("div",Se,[s("div",Qe,[De,a(k,{modelValue:n.phone,"onUpdate:modelValue":l[4]||(l[4]=o=>n.phone=o),outlined:"",dense:"",mask:"(+63) ### - ### - ####",placeholder:"(+63)### - ### - ####",rules:[o=>o&&o.length>0]},null,8,["modelValue","rules"])]),s("div",Ie,[Ee,a(ie,{modelValue:n.status,"onUpdate:modelValue":l[5]||(l[5]=o=>n.status=o),outlined:"",dense:"",options:h,behavior:"menu"},null,8,["modelValue"])])])]),_:1}),a(Y,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:t(()=>[U(a(q,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[L]]),a(q,{class:"glossy",color:"teal",label:"Save",onClick:x})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ne=A(Fe,[["__scopeId","data-v-3884d854"]]);const me=d=>(K("data-v-194221d8"),d=d(),M(),d),Pe=me(()=>s("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),Ue=me(()=>s("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),ze={__name:"WarehouseDeleteComponent",props:["delete"],setup(d){const g=J(),$=d,_=p(!1),V=()=>{_.value=!0},y=async()=>{try{await g.deleteWarehouse($.delete.row.id)}catch(h){console.error("Error deleting item:",h)}_.value=!1};return(h,c)=>(u(),b(z,null,[a(q,{onClick:V,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:""},{default:t(()=>[a(se,{class:"bg-negative",delay:200},{default:t(()=>[W("Delete")]),_:1})]),_:1}),a(Z,{modelValue:_.value,"onUpdate:modelValue":c[0]||(c[0]=m=>_.value=m)},{default:t(()=>[a(I,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[a(Q,{class:"q-pt-none q-pb-sm"},{default:t(()=>[Pe,Ue]),_:1}),a(X,{class:"q-mb-md"}),a(Y,{align:"right",class:"q-pt-none"},{default:t(()=>[U(a(q,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[L]]),a(q,{dense:"",label:"Delete",color:"negative",onClick:y,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Le=A(ze,[["__scopeId","data-v-194221d8"]]);const Ae=d=>(K("data-v-2ba52940"),d=d(),M(),d),Te={key:0,class:"spinner-wrapper"},Be={key:1},je={key:0,class:"data-error"},Oe=Ae(()=>s("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ke=["onClick"],Me={class:"row justify-center q-gutter-x-md"},Je={__name:"WarehouseTableComponent",setup(d){const{capitalizeFirstLetter:g,formatFullname:$}=ce(),{getWarehouseStatusBadgeColor:_}=we(),V=pe(),y=J(),h=p(""),c=p(!0),m=B(()=>y.warehouses),w=p(!1),v=p({rowPerPage:0}),S=B(()=>h.value?m.value.filter(i=>i.name.toLowerCase().includes(h.value.toLowerCase())):m.value);_e(async()=>{const i=await N();console.log("respisne warehouse",i)});const N=async()=>{try{c.value=!0;const i=await y.fetchWarehouses();m.value.length||(w.value=!0),console.log("wawrehouse respo",i)}catch{w.value=!0}finally{c.value=!1}};he(h,async i=>{c.value=!0,await new Promise(x=>setTimeout(x,1e3)),c.value=!1,w.value=S.value.length===0});const n=[{name:"name",label:"Name of Warehouse",align:"left",field:i=>i.name,format:i=>`${i}`,sortable:!0},{name:"location",label:"Location",align:"left",field:"location",sortable:!0},{name:"personIncharge",label:"Person In-charge",align:"left",field:i=>$(i)},{name:"phone",label:"Phone",align:"center",field:"phone"},{name:"status",label:"Status",align:"left",field:"status"},{name:"action",label:"Action",align:"center",field:"action"}],r=async i=>{console.log("waraehouse",i),ee.show();try{await V.push({name:"WarehouseDetail",params:{warehouse_id:i.id,warehouse_name:i.name||"Unknown Warehouse"}})}finally{ee.hide()}};return(i,x)=>(u(),b(z,null,[s("div",null,[a(k,{modelValue:h.value,"onUpdate:modelValue":x[0]||(x[0]=e=>h.value=e),class:"q-pb-lg q-pl-sm dynamic-width",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100"},{append:t(()=>[a(j,{name:"search"})]),_:1},8,["modelValue"])]),c.value?(u(),b("div",Te,[a(ge,{size:"50px",color:"primary"})])):(u(),b("div",Be,[S.value.length===0?(u(),b("div",je,[a(j,{name:"warning",color:"warning",size:"4em"}),Oe])):(u(),C(ye,{key:1,class:"table-container elegant-container sticky-header",filter:h.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"500px"},columns:n,rows:S.value,"row-key":"name",pagination:v.value,"onUpdate:pagination":x[1]||(x[1]=e=>v.value=e),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-name":t(e=>[a(P,{key:"name",props:e},{default:t(()=>[s("a",{onClick:ve(l=>r(e.row),["prevent"]),class:"warehouse-link"},D(T(g)(e.row.name)),9,Ke)]),_:2},1032,["props"])]),"body-cell-location":t(e=>[a(P,{props:e},{default:t(()=>[W(D(T(g)(e.row.location)),1)]),_:2},1032,["props"])]),"body-cell-personIncharge":t(e=>[a(P,{props:e},{default:t(()=>[W(D(T($)(e.row.employees)),1)]),_:2},1032,["props"])]),"body-cell-status":t(e=>[a(P,{key:"name",props:e},{default:t(()=>[a(G,{outline:"",color:T(_)(e.row.status)},{default:t(()=>[W(D(e.row.status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-action":t(e=>[a(P,{props:e},{default:t(()=>[s("div",Me,[a(Ne,{edit:e},null,8,["edit"]),a(Le,{delete:e},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Re=A(Je,[["__scopeId","data-v-2ba52940"]]);const F=d=>(K("data-v-074f87da"),d=d(),M(),d),He=F(()=>s("div",{class:"text-h5 q-mr-md"},"\u{1F3ED} Add New Warehouse",-1)),Ge={class:"q-mt-lg q-animated q-animate-bounce"},Xe=F(()=>s("div",null,"Name of Warehouse",-1)),Ye={class:"q-mt-md q-animated q-animate-bounce"},Ze=F(()=>s("div",null,"Location",-1)),ea={class:"q-mt-md q-animated q-animate-bounce"},aa=F(()=>s("div",null,"Person In-charge",-1)),oa={key:0,class:"custom-list z-top"},ta={class:"row q-gutter-x-sm q-mt-md"},la={class:"col-6 q-animated q-animate-bounce"},sa=F(()=>s("div",null,"Phone Number",-1)),na={class:"col-5 q-animated q-animate-bounce"},ra=F(()=>s("div",null,"Status",-1)),da={__name:"WarehouseCreateComponent",setup(d){const g=ue(),$=J(),_=p(!1),V=B(()=>g.employee),y=["Open","Close"],h=()=>{_.value=!0},c=p(""),m=p(!1),w=p(!1),v=p(!1),S=async()=>{c.value.trim()&&(v.value=!0,await g.searchPersonInCharge(c.value),v.value=!1,m.value=!0)},N=e=>{console.log("Selected Employee:",e),r.employee_id=e.id,r.employee_name=`${e.firstname} ${e.middlename?e.middlename.charAt(0)+".":""} ${e.lastname}`,c.value=`${e.firstname} ${e.middlename?e.middlename.charAt(0)+".":""} ${e.lastname}`,m.value=!1,console.log("Filled addNewBranchForm Data:",r)},n=e=>{const l=H=>H?H.charAt(0).toUpperCase()+H.slice(1).toLowerCase():"",o=e.firstname?l(e.firstname):"No Firstname",f=e.middlename?l(e.middlename).charAt(0)+".":"",R=e.lastname?l(e.lastname):"No Lastname";return`${o} ${f} ${R}`},r=ae({name:"",location:"",employee_id:"",employee_name:"",phone:"",status:null}),i=async()=>{console.log("awarehoouse data send",r),w.value=!0,await $.createWarehouses(r),w.value=!1,x(),_.value=!1},x=()=>{r.name="",r.location="",r.person_incharge="",r.phone="",c.value=null,r.employee="",r.status=[""]};return(e,l)=>(u(),b("div",null,[a(q,{outline:"",icon:"add_circle",label:"Add Warehouse",onClick:h,style:{"background-color":"#ef4444"}}),a(Z,{modelValue:_.value,"onUpdate:modelValue":l[6]||(l[6]=o=>_.value=o),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:t(()=>[a(I,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:t(()=>[a(Q,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:t(()=>[He,a(ne),U(a(q,{icon:"close",flat:"",dense:"",round:""},null,512),[[L]])]),_:1}),a(X,{class:"separator-gradient"}),a(Q,{class:"q-px-xl q-pt-none q-pb-lg"},{default:t(()=>[s("div",Ge,[Xe,a(k,{class:"text-capitalize",modelValue:r.name,"onUpdate:modelValue":l[0]||(l[0]=o=>r.name=o),outlined:"",dense:"",rules:[o=>o&&o.length>0]},null,8,["modelValue","rules"])]),s("div",Ye,[Ze,a(k,{class:"text-capitalize",modelValue:r.location,"onUpdate:modelValue":l[1]||(l[1]=o=>r.location=o),outlined:"",dense:"",rules:[o=>o&&o.length>0]},null,8,["modelValue","rules"])]),s("div",ea,[aa,a(k,{modelValue:c.value,"onUpdate:modelValue":[l[2]||(l[2]=o=>c.value=o),S],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name or position",onFocus:l[3]||(l[3]=o=>m.value=!0)},{append:t(()=>[v.value?(u(),C(oe,{key:1,color:"grey",size:"sm"})):(u(),C(j,{key:0,name:"search"}))]),default:t(()=>[m.value&&c.value?(u(),b("div",oa,[a(I,null,{default:t(()=>[a(de,{separator:""},{default:t(()=>{var o;return[(o=V.value)!=null&&o.length?(u(!0),b(z,{key:1},te(V.value,f=>(u(),C(O,{onClick:R=>N(f),key:f.id,clickable:""},{default:t(()=>[a(re,null,{default:t(()=>[W(D(n(f)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(u(),C(O,{key:0},{default:t(()=>[W(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):le("",!0)]),_:1},8,["modelValue"])]),s("div",ta,[s("div",la,[sa,a(k,{modelValue:r.phone,"onUpdate:modelValue":l[4]||(l[4]=o=>r.phone=o),outlined:"",dense:"",mask:"(+63) ### - ### - ####",placeholder:"(+63)### - ### - ####",rules:[o=>o&&o.length>0]},null,8,["modelValue","rules"])]),s("div",na,[ra,a(ie,{modelValue:r.status,"onUpdate:modelValue":l[5]||(l[5]=o=>r.status=o),outlined:"",dense:"",options:y,"hide-dropdown-icon":"",behavior:"menu"},null,8,["modelValue"])])])]),_:1}),a(Y,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:t(()=>[U(a(q,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[L]]),a(q,{class:"glossy",color:"teal",label:"Create",onClick:i,loading:w.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var ia=A(da,[["__scopeId","data-v-074f87da"]]);const ua={class:"text-h6 text-dark"},ca={class:"q-gutter-x-sm"},ma={align:"right"},pa={__name:"WarehousePage",setup(d){return(g,$)=>(u(),C(fe,null,{default:t(()=>[a(I,{class:"elegant-container",flat:""},{default:t(()=>[a(Q,{class:"row justify-between"},{default:t(()=>[s("div",ua,[s("div",ca,[a(G,{label:"Open",outline:"",color:"info"}),a(G,{label:"Closed",outline:"",color:"accent"})])]),s("div",ma,[a(ia)])]),_:1}),a(Q,null,{default:t(()=>[a(Re)]),_:1})]),_:1})]),_:1}))}};var za=A(pa,[["__scopeId","data-v-4ac421da"]]);export{za as default};
