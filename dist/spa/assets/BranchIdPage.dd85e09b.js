import{bd as Ve,c as z,r as P,t as Te,o as k,a2 as A,f as e,M as I,w as t,Q as H,I as N,ad as re,J as a,K as D,L as ae,e as F,$ as q,a3 as E,a4 as fe,_ as x,bc as Ie,aI as Me,a1 as X,a0 as tt,N as ue,O as le,R as ne,z as Ne,u as he,ba as pe,aJ as kt,be as te,d as st,P as Ae,bb as lt,aH as xt,H as $t}from"./index.61fb1097.js";import{Q as Ue}from"./QSpace.687a047c.js";import{Q as Ke,a as ke,b as Ye,c as xe}from"./QTabPanels.82647bca.js";import{Q as Vt}from"./QPage.58ea0cd0.js";import{Q as Pe,a as se,b as Y}from"./QList.db5f06b9.js";import{b as W,Q as ct}from"./use-virtual-scroll.6c931384.js";import{C as de}from"./ClosePopup.244f97da.js";import{u as Qe}from"./branch-product.7e81af8f.js";import{u as Ge}from"./product.bf880d54.js";import{Q as at}from"./QSpinnerDots.563c367b.js";import{Q as G,a as Ce}from"./QTable.7887b0cb.js";import{Q as ye}from"./QBadge.7234abb7.js";import{Q as ve}from"./QTooltip.e231afd2.js";import{Q as ge}from"./QPopupEdit.d9b4e0fd.js";import{_ as Z}from"./plugin-vue_export-helper.21dcd24c.js";import{api as ee}from"./axios.b262cadd.js";import{u as rt}from"./branch-rawMaterials.d411d4d0.js";import{u as Ct}from"./raw-material.1ae2fa0e.js";import{u as qe}from"./use-dialog-plugin-component.9a058f06.js";import{Q as Rt}from"./QMenu.4cadd984.js";import{q as $e}from"./date.5e863a80.js";import{u as Be}from"./use-quasar.7fa0fd87.js";import{p as Ze,v as mt}from"./vfs_fontes.3eb8cb31.js";import{u as pt}from"./sales-report.74049511.js";import{u as _t}from"./user.aef129f3.js";import{u as St}from"./employee.267e93b7.js";import{Q as He}from"./QScrollArea.1fec1257.js";import{u as je,a as We,b as ot}from"./other-product.ad89da44.js";import{Q as nt}from"./QSelect.e7cd9a4b.js";import{u as Pt}from"./recipe.7dd60df2.js";import{u as et}from"./branch-recipe.d3a9d5a9.js";import"./QResizeObserver.0d9884ac.js";import"./use-panel.e29acf4a.js";import"./touch.9135741d.js";import"./selection.dbd4cb30.js";import"./QVirtualScroll.53a752bf.js";import"./QScrollObserver.16c306d0.js";import"./TouchPan.db929f62.js";import"./QChip.f55d689e.js";const Ut=a("div",{class:"text-h6"},"Create Branch Product",-1),Nt={class:"q-mb-lg"},qt={key:0,class:"custom-list z-top"},Dt=a("div",null,"Product Name",-1),At=a("div",null,"Category",-1),It={class:"row justify-between"},Tt=a("div",null,"Beginnings",-1),Bt=a("div",null,"Total Quantity",-1),Ft=a("div",null,"Price",-1),zt={__name:"ProductCreate",setup(d){const v=Ve(),C=Ge(),R=z(()=>C.products),f=Qe(),b=P(""),U=async()=>{C.searchProducts(b.value)},i=z(()=>S.price!==0&&S.beginnings!==0&&S.total_quantity!==0),_=P(!1),p=()=>{_.value=!0},r=()=>{V(),_.value=!1},h=w=>w?w.split(" ").map(g=>g.charAt(0).toUpperCase()+g.slice(1).toLowerCase()).join(" "):"",m=w=>{S.product_id=w.id,S.product_name=w.name,S.category=w.category,b.value=""},S=Te({product_id:"",product_name:"",price:0,beginnings:0,total_quantity:0,branches_id:v.params.branch_id}),V=()=>{S.product_id="",S.product_name="",S.category="",S.price=0,S.beginnings=0,S.total_quantity=0},y=async()=>{try{const{product_name:w,...g}=S;await f.createBranchProducts(g),console.log("data to send",g),V(),_.value=!1}catch(w){console.log(w)}};return(w,g)=>(k(),A(E,null,[e(I,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Product",onClick:p}),e(X,{modelValue:_.value,"onUpdate:modelValue":g[6]||(g[6]=u=>_.value=u),persistent:""},{default:t(()=>[e(H,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(N,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[Ut,e(Ue),re(e(I,{icon:"close",flat:"",dense:"",round:""},null,512),[[de]])]),_:1}),e(N,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",Nt,[e(D,{modelValue:b.value,"onUpdate:modelValue":[g[0]||(g[0]=u=>b.value=u),U],debounce:"1000",outlined:"",rounded:"",placeholder:"Search product",dense:""},{append:t(()=>[a("div",null,[e(ae,{name:"search"})])]),default:t(()=>[b.value?(k(),A("div",qt,[e(H,null,{default:t(()=>[e(Pe,{separator:""},{default:t(()=>{var u;return[(u=R.value)!=null&&u.length?(k(!0),A(E,{key:1},fe(R.value,c=>(k(),F(se,{onClick:s=>m(c),key:c.id,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q(x(h(c.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(k(),F(se,{key:0},{default:t(()=>[q(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ie("",!0)]),_:1},8,["modelValue"])]),a("div",null,[Dt,e(D,{modelValue:S.product_name,"onUpdate:modelValue":g[1]||(g[1]=u=>S.product_name=u),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[At,e(D,{modelValue:S.category,"onUpdate:modelValue":g[2]||(g[2]=u=>S.category=u),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",It,[a("div",null,[Tt,e(D,{modelValue:S.beginnings,"onUpdate:modelValue":g[3]||(g[3]=u=>S.beginnings=u),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Bt,e(D,{modelValue:S.total_quantity,"onUpdate:modelValue":g[4]||(g[4]=u=>S.total_quantity=u),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])]),a("div",null,[Ft,e(D,{modelValue:S.price,"onUpdate:modelValue":g[5]||(g[5]=u=>S.price=u),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])]),_:1}),e(Me,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(I,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:r}),e(I,{class:"glossy",color:"teal",label:"Create",onClick:y,disable:!i.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const gt=d=>(le("data-v-196482e9"),d=d(),ne(),d),Lt=gt(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),Ot=gt(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),Mt={__name:"ProductDelete",props:["delete"],setup(d){const v=Qe(),C=d;console.log("delte",C.delete.row.id);const R=async()=>{try{await v.deleteBranchProducts(C.delete.row.id),ue.create({type:"negative",icon:"warning",message:"Branch product successfully deleted",timeout:1e3,position:"top"}),f.value=!1}catch(U){console.error(U.message)}},f=P(!1),b=()=>{console.log("ID",C.delete.row.id),f.value=!0};return(U,i)=>(k(),A(E,null,[e(I,{onClick:b,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"",align:"center"},{default:t(()=>[e(ve,{class:"bg-negative",delay:200},{default:t(()=>[q("Delete")]),_:1})]),_:1}),e(X,{modelValue:f.value,"onUpdate:modelValue":i[0]||(i[0]=_=>f.value=_)},{default:t(()=>[e(H,null,{default:t(()=>[e(N,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[Lt,Ot]),_:1}),e(tt,{class:"q-mb-md"}),e(N,null,{default:t(()=>[e(Me,{align:"right",class:"q-pt-none"},{default:t(()=>[re(e(I,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[de]]),e(I,{dense:"",label:"Delete",color:"negative",onClick:R,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ht=Z(Mt,[["__scopeId","data-v-196482e9"]]);const jt=d=>(le("data-v-c74b6072"),d=d(),ne(),d),Qt={class:"row justify-between"},Et={class:"q-my-sm"},Kt={key:0,class:"spinner-wrapper"},Yt={key:1},Gt={key:0,class:"data-error"},Wt=jt(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Jt={key:1},Xt={__name:"ProductTable",setup(d){const C=Ve().params.branch_id,R=Qe(),f=P(""),b=P(!0),U=P([]),i=P(!1),_=P({rowsPerPage:0}),p=z(()=>R.branchProducts);console.log("branchssdfrer",p.value);const r=z(()=>f.value?p.value.filter(c=>c.name.toLowerCase().includes(f.value.toLowerCase())):p.value),h=c=>c?c.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" "):"";Ne(async()=>{C&&await m(C)});const m=async c=>{try{b.value=!0;const s=await R.fetchBranchProducts(c);p.value=s,p.value.length||(i.value=!0),console.log("Branch product",p.value)}catch(s){console.log("Error fetching branch product:",s),i.value=!0}finally{b.value=!1}};he(f,async c=>{b.value=!0,await new Promise(s=>setTimeout(s,1e3)),b.value=!1,i.value=r.value.length===0});async function S(c,s){try{const n=await ee.put("/api/update-branch-products/"+c.id,{price:parseInt(s)});if(n.status===200){const l=U.value.findIndex(o=>o.id==c.id);U.value[l]=parseInt(s),ue.create({type:"positive",message:n.data.message,timout:1e3,position:"top"})}}catch(n){console.error("Error updating price:",n)}}async function V(c,s){try{const n=await ee.put("/api/update-branch-products-beginnings/"+c.id,{beginnings:parseInt(s)});if(n.status===200){const l=U.value.findIndex(o=>o.id==c.id);U.value[l]=parseInt(s),ue.create({type:"positive",message:n.data.message,timout:1e3,position:"top"})}}catch(n){console.error("Error updating price:",n)}}async function y(c,s){try{const n=await ee.put("/api/update-branch-products-total-quantity/"+c.id,{total_quantity:parseInt(s)});if(n.status===200){const l=U.value.findIndex(o=>o.id==c.id);U.value[l]=parseInt(s),ue.create({type:"positive",message:n.data.message,timout:1e3,position:"top"})}}catch(n){console.error("Error updating price:",n)}}const w=c=>{switch(c){case"Bread":return"brown";case"Selecta":return"red-6";case"Softdrinks":return"accent";default:return"grey"}},g=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(c),u=[{name:"name",label:"Product Name",align:"center",field:c=>c.product.name,format:c=>`${c}`,sortable:!0},{name:"category",align:"center",label:"Category",field:"category",sortable:!0},{name:"price",align:"center",label:"Price",field:c=>g(c),sortable:!0},{name:"beginnings",align:"center",label:"Beginnings",field:"beginnings",format:c=>`${c} pcs`,sortable:!0},{name:"total_quantity",align:"center",label:"Quantity",field:"total_quantity",format:c=>`${c} pcs`,sortable:!0},{name:"action",align:"center",label:"Action",field:"action",sortable:!0}];return(c,s)=>(k(),A(E,null,[a("div",Qt,[a("div",null,[e(D,{class:"q-pb-lg q-pl-md",modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=n=>f.value=n),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"1500px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(ae,{name:"search"})]),_:1},8,["modelValue"])]),a("div",Et,[e(zt)])]),b.value?(k(),A("div",Kt,[e(at,{size:"50px",color:"primary"})])):(k(),A("div",Yt,[r.value.length===0?(k(),A("div",Gt,[e(ae,{name:"warning",color:"warning",size:"4em"}),Wt])):(k(),F(Ce,{key:1,class:"table-container sticky-header",filter:f.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:u,rows:r.value,"row-key":"name","virtual-scroll":"",pagination:_.value,"onUpdate:pagination":s[1]||(s[1]=n=>_.value=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"}},{"body-cell-name":t(n=>[e(G,{key:"name",props:n},{default:t(()=>{var l;return[q(x((l=n.row.product)!=null&&l.name?h(n.row.product.name):"No data available"),1)]}),_:2},1032,["props"])]),"body-cell-category":t(n=>[e(G,{key:"name",props:n},{default:t(()=>[n.row.category?(k(),F(ye,{key:0,color:w(n.row.category)},{default:t(()=>[q(x(n.row.category),1)]),_:2},1032,["color"])):(k(),A("span",Jt,"No data available"))]),_:2},1032,["props"])]),"body-cell-price":t(n=>[e(G,{props:n,class:"cursor-pointer"},{default:t(()=>[a("span",null,[q(x(g(n.row.price))+" ",1),e(ve,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[q("Edit Price")]),_:1})]),e(ge,{"onUpdate:modelValue":[l=>S(n.row,l),l=>n.row.price=l],modelValue:n.row.price,"auto-save":""},{default:t(l=>[e(D,{modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(n=>[e(G,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[q(x(n.row.beginnings?n.row.beginnings:"Set Beginnings")+" ",1),e(ve,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[q("Edit beginnings")]),_:1})]),e(ge,{"onUpdate:modelValue":[l=>V(n.row,l),l=>n.row.beginnings=l],modelValue:n.row.beginnings,"auto-save":""},{default:t(l=>[e(D,{modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,dense:"",autofocus:"",counter:"",mask:"#####",onKeyup:pe(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-total_quantity":t(n=>[e(G,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[q(x(n.row.total_quantity?n.row.total_quantity:"Set Quantity")+" ",1),e(ve,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[q("Edit quantity")]),_:1})]),e(ge,{"onUpdate:modelValue":[l=>y(n.row,l),l=>n.row.total_quantity=l],modelValue:n.row.total_quantity,"auto-save":""},{default:t(l=>[e(D,{modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,dense:"",autofocus:"",counter:"",mask:"#####",onKeyup:pe(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-action":t(n=>[e(G,{class:"q-gutter-x-md",props:n},{default:t(()=>[e(Ht,{delete:n},null,8,["delete"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Zt=Z(Xt,[["__scopeId","data-v-c74b6072"]]);const ea={class:"q-gutter-sm"},ta={__name:"ProductPage",setup(d){return(v,C)=>(k(),A("div",ea,[a("div",null,[e(Zt)])]))}},aa=a("div",{class:"text-h6"},"Create Branch Raw Materials",-1),oa={class:"q-mb-lg"},la={key:0,class:"custom-list z-top"},na=a("div",null,"Raw Materials Code",-1),sa=a("div",null,"Raw Materials Name",-1),ra=a("div",null,"Category",-1),da=a("div",null,"Quantity",-1),ia={__name:"RawMaterialsCreate",setup(d){const v=Ve(),C=Ct(),R=z(()=>C.rawMaterials),f=rt(),b=P(""),U=async()=>{C.searchRawMaterials(b.value)},i=z(()=>m.total_quantity!==""),_=P(!1),p=()=>{_.value=!0},r=()=>{S(),_.value=!1},h=y=>{m.ingredients_id=y.id,m.ingredient_name=y.name,m.ingredient_code=y.code,m.category=y.category,m.unit=y.unit,b.value=""},m=Te({ingredients_id:"",ingredient_name:"",ingredient_code:"",total_quantity:"",category:"",unit:"",branch_id:v.params.branch_id}),S=()=>{m.ingredients_id="",m.ingredient_name="",m.ingredient_code="",m.total_quantity="",m.ingredients_id="",m.category="",m.unit=""},V=async()=>{try{const{product_name:y,...w}=m;await f.createBranchRawMaterials(w),console.log("data to send",w),S(),_.value=!1}catch(y){console.log(y)}};return(y,w)=>(k(),A(E,null,[e(I,{outline:"",class:"text-dark q-pa-sm",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Raw Material",onClick:p,style:{background:"#f43f5e"}}),e(X,{modelValue:_.value,"onUpdate:modelValue":w[5]||(w[5]=g=>_.value=g),persistent:""},{default:t(()=>[e(H,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(N,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[aa,e(Ue),re(e(I,{icon:"close",flat:"",dense:"",round:""},null,512),[[de]])]),_:1}),e(N,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",oa,[e(D,{modelValue:b.value,"onUpdate:modelValue":[w[0]||(w[0]=g=>b.value=g),U],debounce:"1000",outlined:"",rounded:"",placeholder:"Search Raw Materials",dense:""},{append:t(()=>[a("div",null,[e(ae,{name:"search"})])]),default:t(()=>[b.value?(k(),A("div",la,[e(H,null,{default:t(()=>[e(Pe,{separator:""},{default:t(()=>{var g;return[(g=R.value)!=null&&g.length?(k(!0),A(E,{key:1},fe(R.value,u=>(k(),F(se,{onClick:c=>h(u),key:u.id,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q(x(u.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(k(),F(se,{key:0},{default:t(()=>[q(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ie("",!0)]),_:1},8,["modelValue"])]),a("div",null,[na,e(D,{modelValue:m.ingredient_code,"onUpdate:modelValue":w[1]||(w[1]=g=>m.ingredient_code=g),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[sa,e(D,{modelValue:m.ingredient_name,"onUpdate:modelValue":w[2]||(w[2]=g=>m.ingredient_name=g),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[ra,e(D,{modelValue:m.category,"onUpdate:modelValue":w[3]||(w[3]=g=>m.category=g),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[da,e(D,{modelValue:m.total_quantity,"onUpdate:modelValue":w[4]||(w[4]=g=>m.total_quantity=g),type:"number",outlined:"",suffix:m.unit||"",dense:"",rules:[g=>g&&g.length>0||"Total quantity is required"]},null,8,["modelValue","suffix","rules"])])]),_:1}),e(Me,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(I,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:r}),e(I,{class:"glossy",color:"teal",label:"Create",onClick:V,disable:!i.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const ft=d=>(le("data-v-17ad5e9f"),d=d(),ne(),d),ua=ft(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),ca=ft(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),ma={__name:"RawMaterialsTableDelete",props:["delete"],setup(d){const v=rt(),C=d,R=async()=>{console.log("clickkkd");try{await v.deleteBranchRawMaterials(C.delete.row.id),ue.create({type:"negative",icon:"warning",message:`Raw Materials ${C.delete.row.name}  successfully deleted`,timeout:1e3,position:"top"}),f.value=!1}catch(U){console.error(U.message)}},f=P(!1),b=()=>{f.value=!0};return(U,i)=>(k(),A(E,null,[e(I,{onClick:b,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"",align:"center"},{default:t(()=>[e(ve,{class:"bg-negative",delay:200},{default:t(()=>[q("Delete")]),_:1})]),_:1}),e(X,{modelValue:f.value,"onUpdate:modelValue":i[0]||(i[0]=_=>f.value=_)},{default:t(()=>[e(H,null,{default:t(()=>[e(N,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[ua,ca]),_:1}),e(tt,{class:"q-mb-md"}),e(N,null,{default:t(()=>[e(Me,{align:"right",class:"q-pt-none"},{default:t(()=>[re(e(I,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[de]]),e(I,{dense:"",label:"Delete",color:"negative",onClick:R,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var pa=Z(ma,[["__scopeId","data-v-17ad5e9f"]]);const vt=d=>(le("data-v-74a3fea6"),d=d(),ne(),d),_a={class:"row justify-between"},ga={class:"q-my-sm"},fa={key:0,class:"spinner-wrapper"},va={key:1},ya={key:0,class:"data-error"},ha=vt(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),ba=vt(()=>a("div",{class:"text-white"},"Edit Available Stocks",-1)),wa={class:"row justify-center q-gutter-x-md"},ka={__name:"RawMaterialsTable",setup(d){const C=Ve().params.branch_id,R=rt(),f=P(""),b=P(!0),U=P([]),i=P(!1),_=P({rowsPerPage:0}),p=z(()=>R.branchRawMaterials),r=z(()=>f.value?p.value.filter(w=>w.name.toLowerCase().includes(f.value.toLowerCase())):p.value);Ne(async()=>{console.log("props.branchId in onMounted:",C),C&&await h(C)});const h=async w=>{try{b.value=!0;const g=await R.fetchBranchRawMaterials(w);p.value=g,p.value.length||(i.value=!0),console.log("Branch Raw Materials",p.value)}catch(g){console.log("Error fetching branch product:",g),i.value=!0}finally{b.value=!1}};async function m(w,g){try{const u=await ee.put("/api/update-branch-rawMaterials/"+w.id,{total_quantity:parseInt(g)});if(u.status===200){const c=U.value.findIndex(s=>s.id==w.id);U.value[c]=parseInt(g),ue.create({type:"positive",message:u.data.message,timout:1e3,position:"top"})}}catch(u){console.error("Error updating price:",u)}}he(f,async w=>{b.value=!0,await new Promise(g=>setTimeout(g,1e3)),b.value=!1,i.value=r.value.length===0});const S=w=>{const g=w.total_quantity;if(w.ingredients.unit==="Grams"&&g<1e3)return"bg-red";let c;return g>=1e3?c=g/1e3:c=g,c<5?c<=2?"bg-red":(c<=3,"bg-warning"):"bg-positive"},V=w=>{const g=w.total_quantity,u=w.ingredients.unit;if(g>1e3){const c=(g/1e3).toFixed(2);return c.endsWith(".00")?`${Math.round(g/1e3)} kilos`:`${c} kilos`}else return g>1?`${g} ${u}`:`${g} ${u}`},y=[{name:"code",label:"Raw Materials Code",align:"center",field:w=>{var g,u;return(u=(g=w==null?void 0:w.ingredients)==null?void 0:g.code)!=null?u:"No Code"},format:w=>`${w}`,sortable:!0},{name:"name",label:"Raw Materials Name",align:"center",field:w=>{var g,u;return(u=(g=w==null?void 0:w.ingredients)==null?void 0:g.name)!=null?u:"No Code"},format:w=>`${w}`,sortable:!0},{name:"total_quantity",label:"Available Stocks",align:"center",field:"total_quantity",sortable:!0},{name:"action",label:"Action",align:"center",sortable:!0}];return(w,g)=>(k(),A(E,null,[a("div",_a,[a("div",null,[e(D,{class:"q-pb-lg q-pl-md",modelValue:f.value,"onUpdate:modelValue":g[0]||(g[0]=u=>f.value=u),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"5000px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(ae,{name:"search"})]),_:1},8,["modelValue"])]),a("div",ga,[e(ia)])]),b.value?(k(),A("div",fa,[e(at,{size:"50px",color:"primary"})])):(k(),A("div",va,[r.value.length===0?(k(),A("div",ya,[e(ae,{name:"warning",color:"warning",size:"4em"}),ha])):(k(),F(Ce,{key:1,class:"table-container sticky-header",filter:f.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:y,rows:r.value,"row-key":"name","virtual-scroll":"",pagination:_.value,"onUpdate:pagination":g[1]||(g[1]=u=>_.value=u),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"340px"}},{"body-cell-total_quantity":t(u=>[e(G,{props:u},{default:t(()=>[e(ye,{square:"",class:kt(["text-white cursor-pointer",S(u.row)])},{default:t(()=>[q(x(V(u.row))+" ",1),e(ve,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[ba]),_:1}),e(ge,{"onUpdate:modelValue":[c=>m(u.row,c),c=>u.row.total_quantity=c],modelValue:u.row.total_quantity,"auto-save":""},{default:t(c=>[e(D,{modelValue:c.value,"onUpdate:modelValue":s=>c.value=s,dense:"",suffix:u.row.ingredients.unit,mask:"########",autofocus:"",counter:"",onKeyup:pe(c.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","suffix","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["class"])]),_:2},1032,["props"])]),"body-cell-action":t(u=>[e(G,{props:u},{default:t(()=>[a("div",wa,[e(pa,{delete:u},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var xa=Z(ka,[["__scopeId","data-v-74a3fea6"]]);const $a={class:"q-gutter-sm"},Va={class:"q-gutter-x-sm"},Ca={__name:"RawMaterialsPage",setup(d){return(v,C)=>(k(),A("div",$a,[a("div",Va,[e(ye,{label:"Good",class:"text-white",color:"positive"}),e(ye,{label:"Warning",class:"text-white",color:"warning"}),e(ye,{label:"Danger",class:"text-white",color:"red"})]),a("div",null,[e(xa)])]))}};const Ra=d=>(le("data-v-2e420de9"),d=d(),ne(),d),Sa={class:"text-h6 text-white"},Pa=Ra(()=>a("div",{class:"text-h6",align:"center"},"Bread List",-1)),Ua={__name:"BreadView",props:["breadProduction","branchRecipe"],setup(d){const{dialogRef:v,onDialogHide:C,onDialogOK:R,onDialogCancel:f}=qe();console.log("breadReportsaaasss",d.breadProduction);const U=i=>i?i.split(" ").map(_=>_.charAt(0).toUpperCase()+_.slice(1).toLowerCase()).join(" "):"";return(i,_)=>(k(),F(X,{ref_key:"dialogRef",ref:v,onHide:te(C)},{default:t(()=>[e(H,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,{class:"row bg-backgroud text-h6"},{default:t(()=>{var p,r,h,m;return[a("div",Sa,x(`${U((r=(p=d.branchRecipe)==null?void 0:p.recipe)==null?void 0:r.name)} - ${(m=(h=d.branchRecipe)==null?void 0:h.recipe)==null?void 0:m.category}`),1),e(Ue),a("div",null,[re((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(ve,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[de]])])]}),_:1}),e(N,null,{default:t(()=>[Pa]),_:1}),e(N,null,{default:t(()=>[e(Pe,{dense:"",separator:"",class:"box"},{default:t(()=>[e(se,null,{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Bread Name")]),_:1})]),_:1}),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-overline text-center"},{default:t(()=>[q("Pieces")]),_:1})]),_:1})]),_:1}),(k(!0),A(E,null,fe(d.breadProduction,(p,r)=>(k(),F(se,{key:r},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>{var h;return[q(x(U((h=p==null?void 0:p.bread)==null?void 0:h.name)),1)]}),_:2},1024)]),_:2},1024),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-caption text-center"},{default:t(()=>[q(x(`${p==null?void 0:p.bread_production} `),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Na=Z(Ua,[["__scopeId","data-v-2e420de9"]]);const qa=d=>(le("data-v-961b0a22"),d=d(),ne(),d),Da={class:"text-h6 text-white"},Aa=qa(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Ia={__name:"IngredientsView",props:["ingredientProduction","branchRecipe"],setup(d){const{dialogRef:v,onDialogHide:C,onDialogOK:R,onDialogCancel:f}=qe();console.log("ingredientProduction",d.ingredientProduction);const U=_=>{const p=Number(_.quantity)||0,r=_.unit||"";return p>1e3?`${parseFloat((p/1e3).toFixed(3))} kg`:p>1?`${parseFloat(p.toFixed(3))} ${r}`:`${parseFloat(p.toFixed(3))} ${r}`},i=_=>_?_.split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1).toLowerCase()).join(" "):"";return(_,p)=>(k(),F(X,{ref_key:"dialogRef",ref:v,onHide:te(C)},{default:t(()=>[e(H,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,{class:"row bg-backgroud text-h6"},{default:t(()=>{var r,h,m,S;return[a("div",Da,x(`${i((h=(r=d.branchRecipe)==null?void 0:r.recipe)==null?void 0:h.name)} - ${(S=(m=d.branchRecipe)==null?void 0:m.recipe)==null?void 0:S.category}`),1),e(Ue),a("div",null,[re((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(ve,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[de]])])]}),_:1}),e(N,null,{default:t(()=>[Aa]),_:1}),e(N,null,{default:t(()=>[e(Pe,{dense:"",separator:"",class:"box"},{default:t(()=>[e(se,null,{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Raw Materials Name")]),_:1})]),_:1}),e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Code")]),_:1})]),_:1}),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Quantity")]),_:1})]),_:1})]),_:1}),(k(!0),A(E,null,fe(d.ingredientProduction,(r,h)=>(k(),F(se,{key:h},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q(x(r.ingredients.name),1)]),_:2},1024)]),_:2},1024),e(Y,null,{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q(x(r.ingredients.code),1)]),_:2},1024)]),_:2},1024),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q(x(U(r)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Ta=Z(Ia,[["__scopeId","data-v-961b0a22"]]);const Je=st("productions",()=>{const d=P([]),v=P([]);return{productions:d,production:v,fetchAllProduction:async()=>{const p=await ee.get("/api/branch-production-report");d.value=p.data.reports},fetchBranchProductions:async p=>{try{const r=await ee.get(`/api/branches/${p}/production-report`);d.value=r.data}catch(r){console.log(r)}},updateBakerReport:async(p,r)=>{console.log("baker reports data in store",r),console.log("baker reports id data in store",p),Ae.show();try{const h=await ee.put(`api/update/branch-baker-report/${p}`,r);console.log(h.data)}catch(h){console.error("Error updating baker report:",h)}finally{Ae.hide()}},addBreadProduction:async p=>{console.log("Bread Production Data:",p),Ae.show();try{const r=await ee.post("/api/branch-add-bread-production-report",p);console.log(r.data),ue.create({message:"Bread Production Report Added Successfully",color:"positive"})}catch(r){console.log(r),ue.create({message:"Error adding Bread Production Report",color:"negative"})}finally{Ae.hide()}},addSelectaProduction:async p=>{console.log("Selecta Production Data:",p),Ae.show();try{const r=await ee.post("/api/branch-add-selecta-production-report",p);console.log(r.data),ue.create({message:"Bread Production Report Added Successfully",color:"positive"})}catch(r){console.log(r),ue.create({message:"Error adding Bread Production Report",color:"negative"})}finally{Ae.hide()}},addSoftdrinksProduction:async p=>{console.log("Softdrinks Production Data:",p),Ae.show();try{const r=await ee.post("/api/branch-add-softdrinks-production-report",p);console.log(r.data),ue.create({message:"Softdrinks Production Report Added Successfully",color:"positive"})}catch(r){console.log(r),ue.create({message:"Error adding Bread Production Report",color:"negative"})}finally{Ae.hide()}},addOtherProductProduction:async p=>{console.log("Softdrinks Production Data:",p),Ae.show();try{const r=await ee.post("/api/branch-add-other-production-report",p);console.log(r.data),ue.create({message:"Softdrinks Production Report Added Successfully",color:"positive"})}catch(r){console.log(r),ue.create({message:"Error adding Bread Production Report",color:"negative"})}finally{Ae.hide()}}}});const yt=d=>(le("data-v-6681c582"),d=d(),ne(),d),Ba={class:"text-h6 text-dark"},Fa={class:"row q-gutter-sm"},za={class:"row q-mt-sm q-gutter-sm"},La=yt(()=>a("div",{class:"q-mt-sm"},"Kilo",-1)),Oa={class:"q-mt-xl q-gutter-md"},Ma={key:0},Ha={class:"q-mx-sm"},ja=yt(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Qa={__name:"EditBakersReport",props:["bakerReports","sales_report_id"],setup(d){const v=Je(),{dialogRef:C,onDialogHide:R}=qe(),f=d;console.log("bakers report",f.bakerReports);const b=Te({target:0,actual_target:0,short:0,over:0,kilo:0}),U=z(()=>f.bakerReports.ingredient_bakers_reports.map(V=>{const y=parseFloat(f.bakerReports.kilo)||1,w=parseFloat(b.kilo)||1,u=V.quantity/y*w;return{...V,quantity:u.toFixed(3)}})),i=V=>V?V.split(" ").map(y=>y.charAt(0).toUpperCase()+y.slice(1).toLowerCase()).join(" "):"",_=V=>{const y=Number(V.quantity)||0,w=V.unit||"";return y>1e3?`${parseFloat((y/1e3).toFixed(3))} kg`:y>1?`${parseFloat(y.toFixed(3))} ${w}`:`${parseFloat(y.toFixed(3))} ${w}`},p=V=>{const y=Number(V)||0;return parseFloat(y.toFixed(3)).toString()},r=V=>{const y=Number(V)||0;return parseFloat(y.toFixed(3)).toString()},h=z(()=>f.bakerReports.combined_bakers_reports.reduce((V,y)=>V+(parseFloat(y.bread_production)||0),0)),m=()=>{const V=h.value,y=parseFloat(b.actual_target)||0;V>y?(b.over=V-y,b.short=0):(b.short=y-V,b.over=0)};he(()=>f.bakerReports,V=>{V&&(b.target=p(V.target)||0,b.actual_target=V.actual_target||0,b.short=V.short||0,b.over=V.over||0,b.kilo=r(V.kilo)||0)},{immediate:!0}),he(()=>b.kilo,()=>{const V=parseFloat(b.kilo)||1,w=(parseFloat(b.target)||0)*V;b.actual_target=p(Math.ceil(w)),m()}),he(()=>h.value,()=>m());const S=async()=>{var c,s,n;const V=f.bakerReports.id,y=((n=(s=(c=f.bakerReports)==null?void 0:c.branch_recipe)==null?void 0:s.recipe)==null?void 0:n.category)||null,w=f.bakerReports.status,g=(f==null?void 0:f.sales_report_id)||null,u={initial_bakerreports_id:V,sales_report_id:g,category:y,target:b.target,actual_target:b.actual_target,short:b.short,over:b.over,status:w,kilo:b.kilo,combined_bakers_reports:f.bakerReports.combined_bakers_reports.map(l=>({bread_id:l.bread.id,bread_production:l.bread_production})),recalculated_ingredients:U.value.map(l=>({ingredients_id:l.ingredients.id,quantity:l.quantity,unit:l.unit}))};console.log("Edited Bakers Report",u),console.log("Edited Bakers Report",V);try{await v.updateBakerReport(V,u),ue.create({type:"positive",message:"Baker report updated successfully!",position:"top"}),R()}catch(l){console.error("Error updating baker report:",l),ue.create({type:"negative",message:"Failed to update baker report. Please try again.",position:"top"})}};return(V,y)=>(k(),F(X,{ref_key:"dialogRef",ref:C,onHide:te(R)},{default:t(()=>[e(H,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,{class:"row bg-backgroud text-h6"},{default:t(()=>{var w,g,u,c,s,n;return[a("div",Ba,x(`${i((u=(g=(w=d.bakerReports)==null?void 0:w.branch_recipe)==null?void 0:g.recipe)==null?void 0:u.name)} - ${(n=(s=(c=d.bakerReports)==null?void 0:c.branch_recipe)==null?void 0:s.recipe)==null?void 0:n.category}`),1),e(Ue),a("div",null,[re((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(ve,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[de]])])]}),_:1}),e(N,{class:"row q-gutter-x-xl"},{default:t(()=>[a("div",null,[a("div",Fa,[a("div",null,[q(" Target Pcs "),e(D,{readonly:"",modelValue:b.target,"onUpdate:modelValue":y[0]||(y[0]=w=>b.target=w),outlined:"",type:"number",dense:"",style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])]),a("div",null,[q(" Actual Target "),e(D,{readonly:"",modelValue:b.actual_target,"onUpdate:modelValue":y[1]||(y[1]=w=>b.actual_target=w),outlined:"",dense:"",style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])])]),a("div",za,[a("div",null,[q(" Short "),e(D,{readonly:"",modelValue:b.short,"onUpdate:modelValue":y[2]||(y[2]=w=>b.short=w),outlined:"",type:"number",dense:"",style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])]),a("div",null,[q(" Over "),e(D,{readonly:"",modelValue:b.over,"onUpdate:modelValue":y[3]||(y[3]=w=>b.over=w),outlined:"",dense:"",style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])])]),a("div",null,[La,e(D,{outlined:"",modelValue:b.kilo,"onUpdate:modelValue":y[4]||(y[4]=w=>b.kilo=w),dense:"",type:"number",style:{width:"210px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])]),a("div",Oa,[d.bakerReports.combined_bakers_reports.length?(k(),A("div",Ma,[(k(!0),A(E,null,fe(d.bakerReports.combined_bakers_reports,(w,g)=>(k(),A("div",{key:g,class:"q-my-md"},[e(tt,{class:"q-ma-md"}),a("div",Ha,x(w.bread.name),1),e(D,{outlined:"",modelValue:w.bread_production,"onUpdate:modelValue":u=>w.bread_production=u,dense:"",type:"numbers",suffix:"pcs",style:{width:"210px","max-width":"300px","min-width":"50px"}},null,8,["modelValue","onUpdate:modelValue"])]))),128))])):Ie("",!0)])]),a("div",null,[ja,e(Pe,{dense:"",separator:"",class:"box"},{default:t(()=>[e(se,null,{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Raw Materials Name")]),_:1})]),_:1}),e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Code")]),_:1})]),_:1}),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Quantity")]),_:1})]),_:1})]),_:1}),(k(!0),A(E,null,fe(U.value,(w,g)=>(k(),F(se,{key:g},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q(x(w.ingredients.name),1)]),_:2},1024)]),_:2},1024),e(Y,null,{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q(x(w.ingredients.code),1)]),_:2},1024)]),_:2},1024),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q(x(_(w)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(Me,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:t(()=>[re(e(I,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[de]]),e(I,{class:"glossy",color:"teal",label:"Save",onClick:S})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Ea=Z(Qa,[["__scopeId","data-v-6681c582"]]);const Ka=d=>(le("data-v-f96814be"),d=d(),ne(),d),Ya=Ka(()=>a("div",{class:"row justify-between"},[a("div",{class:"text-h6"},"Baker Report")],-1)),Ga={class:"text-subtitle1 text-weight-regular"},Wa={class:"q-ma-sm"},Ja={class:"q-ma-sm",align:"center"},Xa=["src"],Za={__name:"BakerReportPanel",props:["bakersReport","sales_report_id"],setup(d){Ze.exports.vfs=mt;const v=d,C=v.bakersReport;console.log("Bakers Report",v.bakersReport);const R=P(!0),f=P(!1);P(!1);const b=P({rowsPerPage:0}),U=P(""),i=Be(),_=(o,$)=>{i.dialog({component:Na,componentProps:{breadProduction:o,branchRecipe:$}})},p=(o,$)=>{i.dialog({component:Ta,componentProps:{ingredientProduction:o,branchRecipe:$}})},r=(o,$)=>{i.dialog({component:Ea,componentProps:{bakerReports:o,sales_report_id:$}})},h=o=>$e.formatDate(o,"MMM. DD, YYYY"),m=o=>{const $=Number(o)||0;return parseFloat($.toFixed(3)).toString()},S=o=>{const $=Number(o)||0;return parseFloat($.toFixed(3)).toString()},V=o=>o?o.split(" ").map($=>$.charAt(0).toUpperCase()+$.slice(1).toLowerCase()).join(" "):"",y=o=>{const $=ce=>ce?ce.charAt(0).toUpperCase()+ce.slice(1).toLowerCase():"",T=o.firstname?$(o.firstname):"No Firstname",O=o.middlename?$(o.middlename).charAt(0)+".":"",J=o.lastname?$(o.lastname):"No Lastname";return`${T} ${O} ${J}`.trim()},w=o=>{const $=new Date(o),T={hour:"2-digit",minute:"2-digit",hour12:!0};return $.toLocaleTimeString(void 0,T)},g=o=>{switch(o){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},u=o=>o?o.split(" ").map($=>$.charAt(0).toUpperCase()+$.slice(1).toLowerCase()).join(" "):"",c=o=>o?o.recipe_category==="Filling"?o.filling_bakers_reports||[]:o.recipe_category==="Dough"?o.bread_production_reports||[]:[]:(console.error("No bakerReport provided"),[]),s=[{name:"recipe_name",align:"center",label:"Recipe Name",field:o=>o.branch_recipe&&o.branch_recipe.recipe?{name:o.branch_recipe.recipe.name,category:o.branch_recipe.recipe.category}:{name:"N/A",category:"N/A"},format:o=>`${u(o.name)} (${o.category})`,sortable:!0},{name:"created_at",align:"center",label:"Time",field:"created_at",format:o=>w(o)},{name:"kilo",align:"center",label:"Kilo / s",field:"kilo",format:o=>`${S(o)}`},{name:"actual_target",align:"center",label:"Actual Target",field:o=>o.target*o.kilo,format:o=>`${Math.ceil(o)}`},{name:"over",align:"center",label:"Over",field:"over",format:o=>`${o}`},{name:"short",align:"center",label:"Short",field:"short",format:o=>`${o}`},{name:"status",align:"center",label:"Status",field:"status"},{name:"combined_bakers_reports",align:"center",label:"Breads",field:"combined_bakers_reports"},{name:"ingredients_reports",align:"center",label:"Ingredients",field:"ingredients_reports"},{name:"action",align:"center",label:"Action",field:"action"}],n=o=>{var ie,we,j,oe,_e,Q,K,L,B,M,me,De,dt,it;console.log("bakerReport",o);const $=`${(j=(we=(ie=o==null?void 0:o.branch_recipe)==null?void 0:ie.recipe)==null?void 0:we.name)!=null?j:"Unkown Recipe"} (${(oe=o==null?void 0:o.recipe_category)!=null?oe:"Unkown Category"})`,T=(Q=(_e=o==null?void 0:o.branch_recipe)==null?void 0:_e.target)!=null?Q:0,O=(K=o==null?void 0:o.actual_target)!=null?K:0,J=(L=o==null?void 0:o.kilo)!=null?L:0,ce=(B=o==null?void 0:o.over)!=null?B:0,Se=(M=o==null?void 0:o.short)!=null?M:0,be={table:{widths:["50%","50%"],body:[[{text:"Recipe Name",style:"tableHeader",alignment:"left"},{text:$,style:"tableHeader",alignment:"center"}],[{text:"Target per Kilo",style:"tableHeader",alignment:"left"},{text:`${m(T)} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Actual Target",style:"tableHeader",alignment:"left"},{text:`${O} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Kilo",style:"tableHeader",alignment:"left"},{text:`${S(J)} kg/s`,style:"tableHeader",alignment:"center"}],[{text:"Over",style:"tableHeader",alignment:"left"},{text:`${ce} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Short",style:"tableHeader",alignment:"left"},{text:`${Se} pcs`,style:"tableHeader",alignment:"center"}]]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}};return{content:[{text:"Baker Report",style:"header",alignment:"center"},{columns:[{text:`Branch Name: ${o.branch.name||"No name available"}
                Baker: ${y(((me=o==null?void 0:o.user)==null?void 0:me.employee)||"Unknown Baker Name")}
                Recipe: ${((De=o.recipe)==null?void 0:De.name)||"Unknown Recipe"} (${o.recipe_category||"Unknown Category"})
             `,width:"80%",margin:[0,0,0,10]},{text:`Date: ${h(((dt=v.bakersReport[0])==null?void 0:dt.created_at)||((it=v.bakersReport[1])==null?void 0:it.created_at)||"No name available")}
                Time: ${w(o.created_at)}
                Status: ${V(o.status)}`,margin:[0,0,0,10]}]},{columns:[{width:"50%",stack:[{text:"Bread Production",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*"],body:[[{text:"Bread Name",style:"tableHeader",alignment:"center"},{text:"Production",style:"tableHeader",alignment:"center"}],...c(o).map(Re=>{var Xe;return[{text:((Xe=Re==null?void 0:Re.bread)==null?void 0:Xe.name)||"Unknown Bread",style:"body"},{text:o.recipe_category==="Filling"?`${(Re==null?void 0:Re.filling_production)||"0"} pcs`:`${Re==null?void 0:Re.bread_new_production} pcs`,style:"body",alignment:"center"}]})]}}],columnGap:10},{width:"50%",stack:[{text:"Ingredients",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*"],body:[[{text:"Ingredient Code",style:"tableHeader",alignment:"center"},{text:"Quantity",style:"tableHeader",alignment:"center"}],...(o.ingredient_bakers_reports||[]).map(Re=>{var Xe,ut;return[{text:((Xe=Re==null?void 0:Re.ingredients)==null?void 0:Xe.code)||"Unknown Ingredient",style:"body"},{text:`${(Re==null?void 0:Re.quantity)||"Unknown Quantity"} ${((ut=Re==null?void 0:Re.ingredients)==null?void 0:ut.unit)||""}`,style:"body",alignment:"center"}]})]}}],columnGap:10}],columnGap:20},{canvas:[{type:"line",x1:0,y1:25,x2:555,y2:25,lineWidth:1,dash:{length:5,space:5},lineColor:"#000000",margin:[0,20,0,0]}]},{margin:[0,20,0,0],stack:[{text:"Summary",style:"subheader",alignment:"center"},be]}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableHeader:{bold:!0,fontSize:10,color:"black"},body:{fontSize:8}},pageMargins:[20,20,20,20]}},l=o=>{const $=n(o);Ze.exports.createPdf($).getDataUrl(T=>{U.value=T,f.value=!0})};return(o,$)=>(k(),A("div",null,[e(H,{class:"my-card q-pa-md"},{default:t(()=>{var T,O,J,ce,Se,be;return[Ya,a("div",Ga,[a("div",null," Name: "+x(y(((O=(T=te(C)[0])==null?void 0:T.user)==null?void 0:O.employee)||((ce=(J=te(C)[1])==null?void 0:J.user)==null?void 0:ce.employee)||"No name available")),1),a("div",null," Date: "+x(`${h(((Se=v.bakersReport[0])==null?void 0:Se.created_at)||((be=v.bakersReport[1])==null?void 0:be.created_at)||"No name available")}`),1)]),e(N,null,{default:t(()=>[e(Ce,{class:"table-container sticky-header2",columns:s,rows:te(C),"row-key":"name","header-class":"custom-header","virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48,pagination:b.value,"rows-per-page-options":[0]},{"body-cell-status":t(ie=>[e(G,{props:ie},{default:t(()=>[e(ye,{align:"middle",color:g(ie.row.status)},{default:t(()=>[q(x(V(ie.row.status)),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-combined_bakers_reports":t(ie=>[e(G,{props:ie},{default:t(()=>[e(I,{class:"gradient-icon",flat:"",rounded:"",onClick:we=>_(ie.row.combined_bakers_reports,ie.row.branch_recipe)},{default:t(()=>[e(ae,{name:"visibility",class:"gradient-icon"}),e(ve,{class:"gradient-tooltip"},{default:t(()=>[q("View Breads")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),"body-cell-ingredients_reports":t(ie=>[e(G,{props:ie},{default:t(()=>[e(I,{class:"gradient-icon2",flat:"",rounded:"",onClick:we=>p(ie.row.ingredient_bakers_reports,ie.row.branch_recipe)},{default:t(()=>[e(ae,{name:"visibility",class:"gradient-icon2"}),e(ve,{class:"gradient-tooltip"},{default:t(()=>[q("View Ingredients")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),"body-cell-action":t(ie=>[e(G,{props:ie},{default:t(()=>[e(I,{dense:"",flat:"",round:"",icon:"more_vert","aria-label":"Action Menu",onClick:we=>o.toggleMenu(ie.row)},null,8,["onClick"]),e(Rt,{modelValue:ie.row.menu,"onUpdate:modelValue":we=>ie.row.menu=we,anchor:"bottom right",self:"top right","transition-show":"jump-down","transition-hide":"jump-up"},{default:t(()=>[e(Pe,{style:{"min-width":"100px"}},{default:t(()=>[re((k(),F(se,{clickable:"",onClick:we=>l(ie.row)},{default:t(()=>[e(Y,{avatar:""},{default:t(()=>[e(ae,{name:"print"})]),_:1}),e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q("Print")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[de]]),re((k(),F(se,{clickable:"",onClick:we=>r(ie.row,d.sales_report_id)},{default:t(()=>[e(Y,{avatar:""},{default:t(()=>[e(ae,{name:"edit"})]),_:1}),e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q("Edit")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[de]])]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])]),_:1})]}),_:1}),e(X,{modelValue:f.value,"onUpdate:modelValue":$[0]||($[0]=T=>f.value=T),"backdrop-filter":o.backdropFilter,maximized:R.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[a("div",Wa,[a("div",Ja,[re((k(),F(I,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},{default:t(()=>[e(ve,null,{default:t(()=>[q("Close")]),_:1})]),_:1})),[[de]])]),a("div",null,[a("iframe",{src:U.value,width:"100%",height:"700px"},null,8,Xa)])])]),_:1},8,["modelValue","backdrop-filter","maximized"])]))}};var eo=Z(Za,[["__scopeId","data-v-f96814be"]]);const Fe=d=>(le("data-v-103c9df4"),d=d(),ne(),d),to=Fe(()=>a("div",{class:"text-h6 text-white"},"Bread",-1)),ao={class:"text-subtitle1 text-weight-medium"},oo={class:"q-mb-lg"},lo={key:0,class:"custom-list z-top"},no=Fe(()=>a("div",null,"Product Name",-1)),so={class:"row justify-between q-mt-md q-gutter-md"},ro=Fe(()=>a("div",null,"Category",-1)),io=Fe(()=>a("div",null,"Price",-1)),uo={class:"row justify-between q-mt-md q-gutter-md"},co=Fe(()=>a("div",null,"Beginnings",-1)),mo=Fe(()=>a("div",null,"New Production",-1)),po=Fe(()=>a("div",null,"Remaining",-1)),_o=Fe(()=>a("div",null,"Bread Out",-1)),go=Fe(()=>a("div",null,"Total Quantity",-1)),fo=Fe(()=>a("div",null,"Bread Sold",-1)),vo=Fe(()=>a("div",null,"Sales",-1)),yo={align:"right"},ho={__name:"AddingBreadReport",props:["sales_Reports","sales_report_id","user"],setup(d){const v=d;console.log("props.sales_Reports",v.sales_Reports),console.log("props.user",v.user);const C=v.sales_report_id,R=Ve(),f=Je(),b=Ge();z(()=>b.products);const U=Qe(),i=z(()=>U.branchProducts);console.log("branchProduct",i);const _=R.params.branch_id,p=v.user.id,r=P(""),h=P("");z(()=>r.value&&employees.value.length>0);const m=P("Bread"),S=async()=>{console.log("branch_id.value:",_),console.log("searchQuery.value:",h.value),console.log("category.value:",m.value),(h.value||m.value)&&await U.searchBranchProducts({query:h.value,branches_id:_,category:m.value})},V=P(!1),y=()=>{V.value=!0},w=l=>{const o=J=>J?J.charAt(0).toUpperCase()+J.slice(1).toLowerCase():"",$=l.firstname?o(l.firstname):"No Firstname",T=l.middlename?o(l.middlename).charAt(0)+".":"",O=l.lastname?o(l.lastname):"No Lastname";return`${$} ${T} ${O}`.trim()},g=l=>l?l.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" "):"",u=l=>{console.log("data",l),c.product_id=l.product.id,c.product_name=l.product.name,c.category=l.category,c.price=l.price,h.value=""},c=Te({sales_report_id:C,branch_id:_,user_id:p,name:"",product_id:"",product_name:"",price:0,beginnings:0,remaining:0,new_production:0,bread_out:0,bread_sold:0,total:0,sales:0,branches_id:R.params.branch_id}),s=z(()=>{const l=parseInt(c.bread_sold||0)*parseFloat(c.price||0);return new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(l)});he(()=>[c.new_production,c.beginnings],([l,o])=>{c.total=parseInt(l||0)+parseInt(o||0)}),he(()=>[c.total,c.remaining,c.bread_out],([l,o,$])=>{c.bread_sold=parseInt(l||0)-(parseInt(o||0)+parseInt($||0))}),he(()=>[c.bread_sold,c.price],([l,o])=>{c.sales=parseInt(l||0)*parseFloat(o||0)});const n=async()=>{try{if(!c.product_name||!c.price||!c.product_id||!c.branch_id||!c.sales_report_id){$q.notify({type:"negative",message:"Product name, price, product ID, branch ID, and sales report ID are required."});return}const l={user_id:c.user_id,branch_id:c.branch_id,sales_report_id:c.sales_report_id,product_id:c.product_id,product_name:c.product_name,price:c.price,beginnings:c.beginnings,remaining:c.remaining,new_production:c.new_production,bread_out:c.bread_out,bread_sold:c.bread_sold,total:c.total,sales:c.sales};console.log("payload",l),await f.addBreadProduction(l)}catch{}};return(l,o)=>(k(),A(E,null,[a("div",null,[e(I,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Add Bread",onClick:y})]),e(X,{modelValue:V.value,"onUpdate:modelValue":o[11]||(o[11]=$=>V.value=$),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(H,{style:{width:"600px","max-width":"80vw"}},{default:t(()=>[e(N,{class:"row items-center bg-backgroud"},{default:t(()=>[to,e(Ue),re(e(I,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[de]])]),_:1}),e(N,null,{default:t(()=>[a("div",ao," Cashier: "+x(w(d.user.employee)),1)]),_:1}),e(N,{class:"q-gutter-y-sm"},{default:t(()=>[a("div",oo,[e(D,{modelValue:h.value,"onUpdate:modelValue":[o[0]||(o[0]=$=>h.value=$),S],debounce:"1000",outlined:"",flat:"",placeholder:"Search product",dense:""},{append:t(()=>[a("div",null,[e(ae,{name:"search"})])]),default:t(()=>[h.value?(k(),A("div",lo,[e(H,null,{default:t(()=>[e(Pe,{separator:""},{default:t(()=>{var $;return[($=i.value)!=null&&$.length?(k(!0),A(E,{key:1},fe(i.value,T=>(k(),F(se,{onClick:O=>u(T),key:T.id,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q(x(g(T.product.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(k(),F(se,{key:0},{default:t(()=>[q(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ie("",!0)]),_:1},8,["modelValue"])]),a("div",null,[no,e(D,{modelValue:c.product_name,"onUpdate:modelValue":o[1]||(o[1]=$=>c.product_name=$),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",so,[a("div",null,[ro,e(D,{modelValue:c.category,"onUpdate:modelValue":o[2]||(o[2]=$=>c.category=$),readonly:"",dense:"",outlined:"",style:{width:"250px"}},null,8,["modelValue"])]),a("div",null,[io,e(D,{modelValue:c.price,"onUpdate:modelValue":o[3]||(o[3]=$=>c.price=$),readonly:"",dense:"",outlined:"",style:{width:"250px"}},null,8,["modelValue"])])]),a("div",uo,[a("div",null,[co,e(D,{modelValue:c.beginnings,"onUpdate:modelValue":o[4]||(o[4]=$=>c.beginnings=$),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[mo,e(D,{modelValue:c.new_production,"onUpdate:modelValue":o[5]||(o[5]=$=>c.new_production=$),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[po,e(D,{modelValue:c.remaining,"onUpdate:modelValue":o[6]||(o[6]=$=>c.remaining=$),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[_o,e(D,{modelValue:c.bread_out,"onUpdate:modelValue":o[7]||(o[7]=$=>c.bread_out=$),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[go,e(D,{modelValue:c.total,"onUpdate:modelValue":o[8]||(o[8]=$=>c.total=$),mask:"#####",outlined:"",readonly:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[fo,e(D,{modelValue:c.bread_sold,"onUpdate:modelValue":o[9]||(o[9]=$=>c.bread_sold=$),mask:"#####",readonly:"",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[vo,e(D,{modelValue:s.value,"onUpdate:modelValue":o[10]||(o[10]=$=>s.value=$),outlined:"",readonly:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])])]),_:1}),e(N,null,{default:t(()=>[a("div",yo,[e(I,{color:"red-6",label:"Submit",class:"q-pa-sm",size:"md",onClick:n})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var bo=Z(ho,[["__scopeId","data-v-103c9df4"]]);const wo={class:"row justify-between text-white"},ko=a("div",{class:"text-h6"},"Bread Report",-1),xo={class:"row justify-end q-mt-md"},$o={class:"text-h6"},Vo={__name:"BreadReport",props:["reports","sales_report_id","user"],setup(d){const{dialogRef:v,onDialogHide:C,onDialogOK:R,onDialogCancel:f}=qe(),b=P(!1),U=P(!0),i=d,_=P(""),p=P({rowsPerPage:0});console.log("Reports data structure:",i.reports),console.log("Reports data sales_report_id:",i.sales_report_id);const r=c=>c?c.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" "):"",h=async(c,s)=>{console.log("update data of the price",c),console.log("update val of the price",s);try{const n=await ee.put("/api/update-bread-sales-price-report/"+c.id,{price:parseInt(s)});console.log("reponse",n.data)}catch(n){console.error(n)}},m=async(c,s)=>{console.log("update data of the beginnings",c),console.log("update val of the beginnings",s);try{const n=await ee.put("/api/update-bread-sales-beginnings-report/"+c.id,{beginnings:parseInt(s)});console.log("reponse",n.data)}catch(n){console.error(n)}},S=async(c,s)=>{console.log("update data of the new updatedRemaining",c),console.log("update val of the new updatedRemaining",s);try{const n=await ee.put("/api/update-bread-sales-remaining-report/"+c.id,{remaining:parseInt(s)});console.log("reponse",n.data)}catch(n){console.error(n)}},V=async(c,s)=>{console.log("update data of the new updatedRemaining",c),console.log("update val of the new updatedRemaining",s);try{const n=await ee.put("/api/update-bread-sales-breadOut-report/"+c.id,{bread_out:parseInt(s)});console.log("reponse",n.data)}catch(n){console.error(n)}},y=[{name:"name",label:"Bread Name",field:c=>(console.log("Row data:",c),c.bread.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:c=>`${c}`},{name:"new_production",label:"New Production (PCS)",field:"new_production",format:c=>`${c}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:c=>`${c}`},{name:"bread_out",label:"Bread Out (PCS)",field:"bread_out",format:c=>`${c}`},{name:"total",label:"Bread Total (PCS)",field:c=>(Number(c.beginnings)||0)+(Number(c.new_production)||0)},{name:"breadSold",label:"Bread Sold (PCS)",field:c=>{const s=Number(c.beginnings)||0,n=Number(c.new_production)||0,l=Number(c.remaining)||0,o=Number(c.bread_out)||0,$=s+n,T=l+o;return $-T},format:c=>`${c}`},{name:"sales",label:"Total Sales",field:c=>{const s=Number(c.beginnings)||0,n=Number(c.new_production)||0,l=Number(c.remaining)||0,o=Number(c.bread_out)||0,$=Number(c.price)||0,T=s+n,O=l+o;return(T-O)*$},format:c=>`${w(c)}`}],w=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(c),g=z(()=>{if(!_.value||!_.value.trim())return i.reports||[];const c=_.value.trim().toLowerCase();return(i.reports||[]).filter(s=>s.bread.name.toLowerCase().includes(c)||s.price.toString().includes(c)||s.sales.toString().includes(c))}),u=z(()=>{const c=g.value.reduce((s,n)=>{const l=Number(n.beginnings)||0,o=Number(n.new_production)||0,$=Number(n.remaining)||0,T=Number(n.bread_out)||0,O=Number(n.price)||0,J=l+o,ce=$+T,be=(J-ce)*O;return console.log(`Adding salesAmount: ${be} to total: ${s}`),s+be},0);return console.log("Overall Total Sales computed as:",c),c});return console.log("Overall Total Sales:",u.value),(c,s)=>(k(),F(X,{ref_key:"dialogRef",ref:v,onHide:te(C),modelValue:b.value,"onUpdate:modelValue":s[2]||(s[2]=n=>b.value=n),maximized:U.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,{style:{"background-color":"#795548"}},{default:t(()=>[a("div",wo,[ko,re((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(ve,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[de]])])]),_:1}),e(N,{class:"row justify-between"},{default:t(()=>[a("div",null,[e(D,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=n=>_.value=n),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:"",style:{width:"500px"}},{append:t(()=>[e(ae,{name:"search"})]),_:1},8,["modelValue"])]),a("div",null,[e(bo,{sales_Reports:i.reports,sales_report_id:d.sales_report_id,user:i.user},null,8,["sales_Reports","sales_report_id","user"])])]),_:1}),e(N,null,{default:t(()=>[e(Ce,{filter:_.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:y,rows:g.value,"row-key":"name","virtual-scroll":"",pagination:p.value,"onUpdate:pagination":s[1]||(s[1]=n=>p.value=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"500px"},class:"table-container sticky-header"},{"body-cell-name":t(n=>[e(G,{props:n},{default:t(()=>[a("span",null,x(`${r(n.row.bread.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(n=>[e(G,{props:n},{default:t(()=>[a("span",null,x(`${w(n.row.price)}`),1),e(ge,{"onUpdate:modelValue":[l=>h(n.row,l),l=>n.row.price=l],modelValue:n.row.price,"auto-save":""},{default:t(l=>[e(D,{modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(n=>[e(G,{props:n},{default:t(()=>[a("span",null,x(`${n.row.beginnings}`),1),e(ge,{"onUpdate:modelValue":[l=>m(n.row,l),l=>n.row.beginnings=l],modelValue:n.row.beginnings,"auto-save":""},{default:t(l=>[e(D,{modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-remaining":t(n=>[e(G,{props:n},{default:t(()=>[a("span",null,x(`${n.row.remaining}`),1),e(ge,{"onUpdate:modelValue":[l=>S(n.row,l),l=>n.row.remaining=l],modelValue:n.row.remaining,"auto-save":""},{default:t(l=>[e(D,{modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-bread_out":t(n=>[e(G,{props:n},{default:t(()=>[a("span",null,x(`${n.row.bread_out}`),1),e(ge,{"onUpdate:modelValue":[l=>V(n.row,l),l=>n.row.bread_out=l],modelValue:n.row.bread_out,"auto-save":""},{default:t(l=>[e(D,{modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(N,null,{default:t(()=>[a("div",xo,[a("div",$o," Overall Total Sales: "+x(w(u.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","modelValue","maximized"]))}};const ze=d=>(le("data-v-68ee2954"),d=d(),ne(),d),Co=ze(()=>a("div",{class:"text-h6 text-white"},"Add Selecta",-1)),Ro={class:"text-subtitle1 text-weight-medium"},So={class:"q-mb-lg"},Po={key:0,class:"custom-list z-top"},Uo=ze(()=>a("div",null,"Product Name",-1)),No=ze(()=>a("div",null,"Category",-1)),qo=ze(()=>a("div",null,"Price",-1)),Do={class:"row justify-between q-mt-md q-gutter-md"},Ao=ze(()=>a("div",null,"Beginnings",-1)),Io=ze(()=>a("div",null,"Added Stocks",-1)),To=ze(()=>a("div",null,"Remaining",-1)),Bo=ze(()=>a("div",null,"Selecta Out",-1)),Fo=ze(()=>a("div",null,"Total Quantity",-1)),zo=ze(()=>a("div",null,"Selecta Sold",-1)),Lo=ze(()=>a("div",null,"Sales",-1)),Oo={align:"right"},Mo={__name:"AddingSelectaReport",props:["sales_Reports","sales_report_id","user"],setup(d){const v=d;console.log("props.sales_Reports",v.sales_Reports),console.log("props.user",v.user);const C=v.sales_report_id,R=Ve(),f=Je(),b=Ge();z(()=>b.products);const U=Qe(),i=z(()=>U.branchProducts);console.log("branchProduct",i);const _=R.params.branch_id,p=v.user.id,r=P(""),h=P("Selecta"),m=async()=>{console.log("branch_id.value:",_),console.log("searchQuery.value:",r.value),console.log("category.value:",h.value),(r.value||h.value)&&await U.searchBranchProducts({query:r.value,branches_id:_,category:h.value})},S=P(!1),V=()=>{S.value=!0},y=n=>{const l=O=>O?O.charAt(0).toUpperCase()+O.slice(1).toLowerCase():"",o=n.firstname?l(n.firstname):"No Firstname",$=n.middlename?l(n.middlename).charAt(0)+".":"",T=n.lastname?l(n.lastname):"No Lastname";return`${o} ${$} ${T}`.trim()},w=n=>n?n.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",g=n=>{console.log("data",n),u.product_id=n.product.id,u.product_name=n.product.name,u.category=n.category,u.price=n.price,r.value=""},u=Te({sales_report_id:C,branch_id:_,user_id:p,name:"",product_id:"",product_name:"",price:0,beginnings:0,remaining:0,added_stocks:0,out:0,sold:0,total:0,sales:0,branches_id:R.params.branch_id}),c=z(()=>{const n=parseInt(u.sold||0)*parseFloat(u.price||0);return new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(n)});he(()=>[u.added_stocks,u.beginnings],([n,l])=>{u.total=parseInt(n||0)+parseInt(l||0)}),he(()=>[u.total,u.remaining,u.out],([n,l,o])=>{u.sold=parseInt(n||0)-(parseInt(l||0)+parseInt(o||0))}),he(()=>[u.sold,u.price],([n,l])=>{u.sales=parseInt(n||0)*parseFloat(l||0)});const s=async()=>{try{if(!u.product_name||!u.price||!u.product_id||!u.branch_id||!u.sales_report_id){$q.notify({type:"negative",message:"Product name, price, product ID, branch ID, and sales report ID are required."});return}const n={user_id:u.user_id,branch_id:u.branch_id,sales_report_id:u.sales_report_id,product_id:u.product_id,product_name:u.product_name,price:u.price,beginnings:u.beginnings,remaining:u.remaining,added_stocks:u.added_stocks,out:u.out,sold:u.sold,total:u.total,sales:u.sales};console.log("payload",n),await f.addSelectaProduction(n)}catch{}};return(n,l)=>(k(),A(E,null,[a("div",null,[e(I,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Add Selecta",onClick:V})]),e(X,{modelValue:S.value,"onUpdate:modelValue":l[11]||(l[11]=o=>S.value=o),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(H,{style:{width:"600px","max-width":"80vw"}},{default:t(()=>[q(x(d.user.name)+" ",1),e(N,{class:"row items-center bg-backgroud q-px-md q-py-sm"},{default:t(()=>[Co,e(Ue),re(e(I,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[de]])]),_:1}),e(N,null,{default:t(()=>[a("div",Ro," Cashier: "+x(y(d.user.employee)),1)]),_:1}),e(N,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",So,[e(D,{modelValue:r.value,"onUpdate:modelValue":[l[0]||(l[0]=o=>r.value=o),m],debounce:"1000",outlined:"",flat:"",placeholder:"Search product",dense:""},{append:t(()=>[a("div",null,[e(ae,{name:"search"})])]),default:t(()=>[r.value?(k(),A("div",Po,[e(H,null,{default:t(()=>[e(Pe,{separator:""},{default:t(()=>{var o;return[(o=i.value)!=null&&o.length?(k(!0),A(E,{key:1},fe(i.value,$=>(k(),F(se,{onClick:T=>g($),key:$.id,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q(x(w($.product.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(k(),F(se,{key:0},{default:t(()=>[q(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ie("",!0)]),_:1},8,["modelValue"])]),a("div",null,[Uo,e(D,{modelValue:u.product_name,"onUpdate:modelValue":l[1]||(l[1]=o=>u.product_name=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[No,e(D,{modelValue:u.category,"onUpdate:modelValue":l[2]||(l[2]=o=>u.category=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[qo,e(D,{modelValue:u.price,"onUpdate:modelValue":l[3]||(l[3]=o=>u.price=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",Do,[a("div",null,[Ao,e(D,{modelValue:u.beginnings,"onUpdate:modelValue":l[4]||(l[4]=o=>u.beginnings=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Io,e(D,{modelValue:u.added_stocks,"onUpdate:modelValue":l[5]||(l[5]=o=>u.added_stocks=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[To,e(D,{modelValue:u.remaining,"onUpdate:modelValue":l[6]||(l[6]=o=>u.remaining=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Bo,e(D,{modelValue:u.out,"onUpdate:modelValue":l[7]||(l[7]=o=>u.out=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Fo,e(D,{modelValue:u.total,"onUpdate:modelValue":l[8]||(l[8]=o=>u.total=o),mask:"#####",outlined:"",readonly:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[zo,e(D,{modelValue:u.sold,"onUpdate:modelValue":l[9]||(l[9]=o=>u.sold=o),mask:"#####",readonly:"",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Lo,e(D,{modelValue:c.value,"onUpdate:modelValue":l[10]||(l[10]=o=>c.value=o),outlined:"",readonly:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])])]),_:1}),e(N,null,{default:t(()=>[a("div",Oo,[e(I,{color:"red-6",label:"Submit",class:"q-pa-sm",size:"md",onClick:s})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ho=Z(Mo,[["__scopeId","data-v-68ee2954"]]);const jo={class:"row justify-between text-white"},Qo=a("div",{class:"text-h6"},"Selecta Report",-1),Eo={class:"row justify-end q-mt-md"},Ko={class:"text-h6"},Yo={__name:"SelectaReport",props:["reports","sales_report_id","user"],setup(d){const{dialogRef:v,onDialogHide:C,onDialogOK:R,onDialogCancel:f}=qe(),b=P(!1),U=P(!0),i=d,_=P(""),p=P({rowsPerPage:0});console.log("Reports data structure:",i.reports);const r=s=>s?s.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",h=async(s,n)=>{console.log("update data of the price",s),console.log("update val of the price",n);try{const l=await ee.put("/api/update-selecta-sales-price-report/"+s.id,{price:parseInt(n)})}catch(l){console.error(l)}},m=async(s,n)=>{console.log("update data of the beginnings",s),console.log("update val of the beginnings",n);try{const l=await ee.put("/api/update-selecta-sales-beginnings-report/"+s.id,{beginnings:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},S=async(s,n)=>{console.log("update data of the new updatedRemaining",s),console.log("update val of the new updatedRemaining",n);try{const l=await ee.put("/api/update-selecta-sales-remaining-report/"+s.id,{remaining:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},V=async(s,n)=>{console.log("update data of the new updatedRemaining",s),console.log("update val of the new updatedRemaining",n);try{const l=await ee.put("/api/update-selecta-sales-selctaOut-report/"+s.id,{out:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},y=async(s,n)=>{console.log("update data of the new updatedRemaining",s),console.log("update val of the new updatedRemaining",n);try{const l=await ee.put("/api/update-selecta-sales-addedstocks-report/"+s.id,{added_stocks:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},w=[{name:"name",label:"Selecta Name",field:s=>(console.log("Row data:",s),s.selecta.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:s=>`${s}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:s=>`${s}`},{name:"out",label:"Selecta Out (PCS)",field:"out",format:s=>`${s}`},{name:"added_stocks",label:"Added Stocks (PCS)",field:"added_stocks",format:s=>`${s}`},{name:"total_selecta",label:"Total Stocks (PCS)",field:s=>Number(s.beginnings||0)+Number(s.added_stocks||0),format:s=>`${s}`},{name:"sold",label:"Selecta Sold (PCS)",field:s=>{const n=Number(s.beginnings||0),l=Number(s.added_stocks||0),o=Number(s.out||0),$=Number(s.remaining||0),T=n+l,O=$+o;return T-O},format:s=>`${s}`},{name:"sales",label:"Total Sales",field:s=>{const n=Number(s.beginnings||0),l=Number(s.added_stocks||0),o=Number(s.out||0),$=Number(s.remaining||0),T=Number(s.price||0),O=n+l,J=$+o;return(O-J)*T},format:s=>`${g(s)}`}],g=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(s),u=z(()=>(console.log("Filtered rows:",i.reports||[]),i.reports||[])),c=z(()=>{const s=u.value.reduce((n,l)=>{const o=`${l.beginnings}`||0,$=`${l.added_stocks}`||0,T=`${l.out}`||0,O=`${l.remaining}`||0,J=parseInt(o)+parseInt($),ce=parseInt(O)+parseInt(T),be=(J-ce)*(l.price||0);return console.log(`Adding salesAmount: ${be} to total: ${n}`),n+be},0);return console.log("Overall Total Sales computed as:",s),s});return console.log("Filtered Rows:",u.value),(s,n)=>(k(),F(X,{ref_key:"dialogRef",ref:v,onHide:te(C),modelValue:b.value,"onUpdate:modelValue":n[2]||(n[2]=l=>b.value=l),maximized:U.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,{style:{"background-color":"#f44336"}},{default:t(()=>[a("div",jo,[Qo,re((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(ve,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[de]])])]),_:1}),e(N,{class:"row justify-between"},{default:t(()=>[a("div",null,[e(D,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:_.value,"onUpdate:modelValue":n[0]||(n[0]=l=>_.value=l),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:"",style:{width:"500px"}},{append:t(()=>[e(ae,{name:"search"})]),_:1},8,["modelValue"])]),a("div",null,[e(Ho,{sales_Reports:i.reports,sales_report_id:d.sales_report_id,user:i.user},null,8,["sales_Reports","sales_report_id","user"])])]),_:1}),e(N,null,{default:t(()=>[e(Ce,{filter:_.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:w,rows:u.value,"row-key":"name","virtual-scroll":"",pagination:p.value,"onUpdate:pagination":n[1]||(n[1]=l=>p.value=l),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"500px"},class:"table-container sticky-header"},{"body-cell-name":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${r(l.row.selecta.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${g(l.row.price)}`),1),e(ge,{"onUpdate:modelValue":[o=>h(l.row,o),o=>l.row.price=o],modelValue:l.row.price,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":$=>o.value=$,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${l.row.beginnings}`),1),e(ge,{"onUpdate:modelValue":[o=>m(l.row,o),o=>l.row.beginnings=o],modelValue:l.row.beginnings,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":$=>o.value=$,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-remaining":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${l.row.remaining}`),1),e(ge,{"onUpdate:modelValue":[o=>S(l.row,o),o=>l.row.remaining=o],modelValue:l.row.remaining,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":$=>o.value=$,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-out":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${l.row.out}`),1),e(ge,{"onUpdate:modelValue":[o=>V(l.row,o),o=>l.row.out=o],modelValue:l.row.out,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":$=>o.value=$,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-added_stocks":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${l.row.added_stocks}`),1),e(ge,{"onUpdate:modelValue":[o=>y(l.row,o),o=>l.row.added_stocks=o],modelValue:l.row.added_stocks,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":$=>o.value=$,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(N,null,{default:t(()=>[a("div",Eo,[a("div",Ko," Overall Total Sales: "+x(g(c.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","modelValue","maximized"]))}};const Le=d=>(le("data-v-94be31e2"),d=d(),ne(),d),Go=Le(()=>a("div",{class:"text-h6 text-white"},"Add Softdrinks",-1)),Wo={class:"text-subtitle1 text-weight-medium"},Jo={class:"q-mb-lg"},Xo={key:0,class:"custom-list z-top"},Zo=Le(()=>a("div",null,"Product Name",-1)),el=Le(()=>a("div",null,"Category",-1)),tl=Le(()=>a("div",null,"Price",-1)),al={class:"row justify-between q-mt-md q-gutter-md"},ol=Le(()=>a("div",null,"Beginnings",-1)),ll=Le(()=>a("div",null,"Added Stocks",-1)),nl=Le(()=>a("div",null,"Remaining",-1)),sl=Le(()=>a("div",null,"Softdrinks Out",-1)),rl=Le(()=>a("div",null,"Total Quantity",-1)),dl=Le(()=>a("div",null,"Softdrinks Sold",-1)),il=Le(()=>a("div",null,"Sales",-1)),ul={align:"right"},cl={__name:"AddingSoftdrinksReport",props:["sales_Reports","sales_report_id","user"],setup(d){const v=d;console.log("props.sales_Reports",v.sales_Reports),console.log("props.user",v.user);const C=v.sales_report_id,R=Ve(),f=Je(),b=Ge();z(()=>b.products);const U=Qe(),i=z(()=>U.branchProducts);console.log("branchProduct",i);const _=R.params.branch_id,p=v.user.id,r=P(""),h=P("Softdrinks"),m=async()=>{console.log("branch_id.value:",_),console.log("searchQuery.value:",r.value),console.log("category.value:",h.value),(r.value||h.value)&&await U.searchBranchProducts({query:r.value,branches_id:_,category:h.value})},S=P(!1),V=()=>{S.value=!0},y=n=>{const l=O=>O?O.charAt(0).toUpperCase()+O.slice(1).toLowerCase():"",o=n.firstname?l(n.firstname):"No Firstname",$=n.middlename?l(n.middlename).charAt(0)+".":"",T=n.lastname?l(n.lastname):"No Lastname";return`${o} ${$} ${T}`.trim()},w=n=>n?n.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",g=n=>{console.log("data",n),u.product_id=n.product.id,u.product_name=n.product.name,u.category=n.category,u.price=n.price,r.value=""},u=Te({sales_report_id:C,branch_id:_,user_id:p,name:"",product_id:"",product_name:"",price:0,beginnings:0,remaining:0,added_stocks:0,out:0,sold:0,total:0,sales:0,branches_id:R.params.branch_id}),c=z(()=>{const n=parseInt(u.sold||0)*parseFloat(u.price||0);return new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(n)});he(()=>[u.added_stocks,u.beginnings],([n,l])=>{u.total=parseInt(n||0)+parseInt(l||0)}),he(()=>[u.total,u.remaining,u.out],([n,l,o])=>{u.sold=parseInt(n||0)-(parseInt(l||0)+parseInt(o||0))}),he(()=>[u.sold,u.price],([n,l])=>{u.sales=parseInt(n||0)*parseFloat(l||0)});const s=async()=>{try{if(!u.product_name||!u.price||!u.product_id||!u.branch_id||!u.sales_report_id){$q.notify({type:"negative",message:"Product name, price, product ID, branch ID, and sales report ID are required."});return}const n={user_id:u.user_id,branch_id:u.branch_id,sales_report_id:u.sales_report_id,product_id:u.product_id,product_name:u.product_name,price:u.price,beginnings:u.beginnings,remaining:u.remaining,added_stocks:u.added_stocks,out:u.out,sold:u.sold,total:u.total,sales:u.sales};console.log("payload",n),await f.addSoftdrinksProduction(n)}catch{}};return(n,l)=>(k(),A(E,null,[a("div",null,[e(I,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Add Softdrinks",onClick:V})]),e(X,{modelValue:S.value,"onUpdate:modelValue":l[11]||(l[11]=o=>S.value=o),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(H,{style:{width:"600px","max-width":"80vw"}},{default:t(()=>[q(x(d.user.name)+" ",1),e(N,{class:"row items-center bg-backgroud q-px-md q-py-sm"},{default:t(()=>[Go,e(Ue),re(e(I,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[de]])]),_:1}),e(N,null,{default:t(()=>[a("div",Wo," Cashier: "+x(y(d.user.employee)),1)]),_:1}),e(N,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",Jo,[e(D,{modelValue:r.value,"onUpdate:modelValue":[l[0]||(l[0]=o=>r.value=o),m],debounce:"1000",outlined:"",flat:"",placeholder:"Search product",dense:""},{append:t(()=>[a("div",null,[e(ae,{name:"search"})])]),default:t(()=>[r.value?(k(),A("div",Xo,[e(H,null,{default:t(()=>[e(Pe,{separator:""},{default:t(()=>{var o;return[(o=i.value)!=null&&o.length?(k(!0),A(E,{key:1},fe(i.value,$=>(k(),F(se,{onClick:T=>g($),key:$.id,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q(x(w($.product.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(k(),F(se,{key:0},{default:t(()=>[q(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ie("",!0)]),_:1},8,["modelValue"])]),a("div",null,[Zo,e(D,{modelValue:u.product_name,"onUpdate:modelValue":l[1]||(l[1]=o=>u.product_name=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[el,e(D,{modelValue:u.category,"onUpdate:modelValue":l[2]||(l[2]=o=>u.category=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[tl,e(D,{modelValue:u.price,"onUpdate:modelValue":l[3]||(l[3]=o=>u.price=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",al,[a("div",null,[ol,e(D,{modelValue:u.beginnings,"onUpdate:modelValue":l[4]||(l[4]=o=>u.beginnings=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[ll,e(D,{modelValue:u.added_stocks,"onUpdate:modelValue":l[5]||(l[5]=o=>u.added_stocks=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[nl,e(D,{modelValue:u.remaining,"onUpdate:modelValue":l[6]||(l[6]=o=>u.remaining=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[sl,e(D,{modelValue:u.out,"onUpdate:modelValue":l[7]||(l[7]=o=>u.out=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[rl,e(D,{modelValue:u.total,"onUpdate:modelValue":l[8]||(l[8]=o=>u.total=o),mask:"#####",outlined:"",readonly:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[dl,e(D,{modelValue:u.sold,"onUpdate:modelValue":l[9]||(l[9]=o=>u.sold=o),mask:"#####",readonly:"",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[il,e(D,{modelValue:c.value,"onUpdate:modelValue":l[10]||(l[10]=o=>c.value=o),outlined:"",readonly:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])])]),_:1}),e(N,null,{default:t(()=>[a("div",ul,[e(I,{color:"red-6",label:"Submit",class:"q-pa-sm",size:"md",onClick:s})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var ml=Z(cl,[["__scopeId","data-v-94be31e2"]]);const pl={class:"row justify-between text-white"},_l=a("div",{class:"text-h6"},"Softdrinks Report",-1),gl={class:"row justify-end q-mt-md"},fl={class:"text-h6"},vl={__name:"SoftdrinksReport",props:["reports","sales_report_id","user"],setup(d){const{dialogRef:v,onDialogHide:C,onDialogOK:R,onDialogCancel:f}=qe(),b=P(!1),U=P(!0),i=d,_=P(""),p=P({rowsPerPage:0});console.log("Reports data structure:",i.reports);const r=s=>s?s.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",h=async(s,n)=>{console.log("update data of the price",s),console.log("update val of the price",n);try{const l=await ee.put("/api/update-softdrinks-sales-price-report/"+s.id,{price:parseInt(n)});console.log("Updated price response:",l.data)}catch(l){console.error(l)}},m=async(s,n)=>{console.log("update data of the beginnings",s),console.log("update val of the beginnings",n);try{const l=await ee.put("/api/update-softdrinks-sales-beginnings-report/"+s.id,{beginnings:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},S=async(s,n)=>{console.log("update data of the updatedRemaining",s),console.log("update val of the updatedRemaining",n);try{const l=await ee.put("/api/update-softdrinks-sales-remaining-report/"+s.id,{remaining:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},V=async(s,n)=>{console.log("update data of the updatedRemaining",s),console.log("update val of the updatedRemaining",n);try{const l=await ee.put("/api/update-softdrinks-sales-out-report/"+s.id,{out:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},y=async(s,n)=>{console.log("update data of the addedstocks",s),console.log("update val of the addedstocks",n);try{const l=await ee.put("/api/update-softdrinks-sales-addedstocks-report/"+s.id,{added_stocks:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},w=[{name:"name",label:"Softdrinks Name",field:s=>(console.log("Row data:",s),s.softdrinks.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:s=>`${s}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:s=>`${s}`},{name:"out",label:"Softdrinks Out (PCS)",field:"out",format:s=>`${s}`},{name:"added_stocks",label:"Added Stocks (PCS)",field:"added_stocks",format:s=>`${s}`},{name:"total_softdrinks",label:"Total Stocks (PCS)",field:s=>Number(s.beginnings||0)+Number(s.added_stocks||0),format:s=>`${s}`},{name:"sold",label:"Softdrinks Sold (PCS)",field:s=>{const n=Number(s.beginnings||0),l=Number(s.added_stocks||0),o=Number(s.out||0),$=Number(s.remaining||0),T=n+l,O=$+o;return T-O},format:s=>`${s}`},{name:"sales",label:"Total Sales",field:s=>{const n=Number(s.beginnings||0),l=Number(s.added_stocks||0),o=Number(s.out||0),$=Number(s.remaining||0),T=Number(s.price||0),O=n+l,J=$+o;return(O-J)*T},format:s=>`${g(s)}`}],g=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(s),u=z(()=>(console.log("Filtered rows:",i.reports||[]),i.reports||[])),c=z(()=>{const s=u.value.reduce((n,l)=>{const o=Number(l.beginnings||0),$=Number(l.added_stocks||0),T=Number(l.out||0),O=Number(l.remaining||0),J=o+$,ce=O+T,be=(J-ce)*(l.price||0);return console.log(`Adding salesAmount: ${be} to total: ${n}`),n+be},0);return console.log("Overall Total:",s),s});return console.log("Filtered Rows:",u.value),(s,n)=>(k(),F(X,{ref_key:"dialogRef",ref:v,onHide:te(C),modelValue:b.value,"onUpdate:modelValue":n[2]||(n[2]=l=>b.value=l),maximized:U.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,{style:{"background-color":"#9c27b0"}},{default:t(()=>[a("div",pl,[_l,re((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(ve,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[de]])])]),_:1}),e(N,{class:"row justify-between"},{default:t(()=>[a("div",null,[e(D,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:_.value,"onUpdate:modelValue":n[0]||(n[0]=l=>_.value=l),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:"",style:{width:"500px"}},{append:t(()=>[e(ae,{name:"search"})]),_:1},8,["modelValue"])]),a("div",null,[e(ml,{sales_Reports:i.reports,sales_report_id:d.sales_report_id,user:i.user},null,8,["sales_Reports","sales_report_id","user"])])]),_:1}),e(N,null,{default:t(()=>[e(Ce,{filter:_.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:w,rows:u.value,"row-key":"name","virtual-scroll":"",pagination:p.value,"onUpdate:pagination":n[1]||(n[1]=l=>p.value=l),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"500px"},class:"table-container sticky-header"},{"body-cell-name":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${r(l.row.softdrinks.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${g(l.row.price)}`),1),e(ge,{"onUpdate:modelValue":[o=>h(l.row,o),o=>l.row.price=o],modelValue:l.row.price,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":$=>o.value=$,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${l.row.beginnings}`),1),e(ge,{"onUpdate:modelValue":[o=>m(l.row,o),o=>l.row.beginnings=o],modelValue:l.row.beginnings,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":$=>o.value=$,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-remaining":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${l.row.remaining}`),1),e(ge,{"onUpdate:modelValue":[o=>S(l.row,o),o=>l.row.remaining=o],modelValue:l.row.remaining,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":$=>o.value=$,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-out":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${l.row.out}`),1),e(ge,{"onUpdate:modelValue":[o=>V(l.row,o),o=>l.row.out=o],modelValue:l.row.out,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":$=>o.value=$,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-added_stocks":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${l.row.added_stocks}`),1),e(ge,{"onUpdate:modelValue":[o=>y(l.row,o),o=>l.row.added_stocks=o],modelValue:l.row.added_stocks,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":$=>o.value=$,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(N,null,{default:t(()=>[a("div",gl,[a("div",fl," Overall Total Sales: "+x(g(c.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","modelValue","maximized"]))}},yl={class:"row justify-between text-white"},hl=a("div",{class:"text-h6"},"Cake Report",-1),bl={class:"row justify-end q-mt-md"},wl={class:"text-h6"},kl={__name:"CakeReport",props:["reports"],setup(d){const{dialogRef:v,onDialogHide:C,onDialogOK:R,onDialogCancel:f}=qe(),b=d;console.log("Report cake:",b.reports);const U=z(()=>(console.log("Filtered cake rows:",b.reports||[]),b.reports||[])),i=h=>{const m=w=>w?w.charAt(0).toUpperCase()+w.slice(1).toLowerCase():"",S=h.firstname?m(h.firstname):"No Firstname",V=h.middlename?m(h.middlename).charAt(0)+".":"",y=h.lastname?m(h.lastname):"No Lastname";return`${S} ${V} ${y}`},_=h=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(h).replace("\u20B1","\u20B1 "),p=z(()=>{const h=U.value.reduce((m,S)=>{const V=parseFloat(S.cake_report.price)||0;return console.log(`Adding salesAmount: ${V} to total: ${m}`),m+V},0);return console.log("Overall Total Sales computed as:",h),h}),r=[{name:"name",label:"Cake Name",field:h=>(console.log("Row data:",h),h.cake_report.name||"N/A")},{name:"cake_maker",label:"Cake Maker Name",field:h=>i(h.cake_report.user.employee)},{name:"price",label:"Price",field:h=>_(h.cake_report.price)},{name:"layers",label:"Layers",field:h=>h.cake_report.layers},{name:"sales_status",label:"Sale Status",field:h=>h.cake_report.sales_status}];return(h,m)=>(k(),F(X,{ref_key:"dialogRef",ref:v,onHide:te(C)},{default:t(()=>[e(H,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(N,{style:{"background-color":"#009688"}},{default:t(()=>[a("div",yl,[hl,re((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(ve,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[de]])])]),_:1}),e(N,null,{default:t(()=>[e(Ce,{filter:h.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:r,rows:U.value,"row-key":"name","virtual-scroll":"",pagination:h.pagination,"onUpdate:pagination":m[0]||(m[0]=S=>h.pagination=S),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["filter","rows","pagination"]),a("div",bl,[a("div",wl," Overall Total Sales: "+x(_(p.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const Oe=d=>(le("data-v-fc9f2a70"),d=d(),ne(),d),xl=Oe(()=>a("div",{class:"text-h6 text-white"},"Add Other Products",-1)),$l={class:"text-subtitle1 text-weight-medium"},Vl={class:"q-mb-lg"},Cl={key:0,class:"custom-list z-top"},Rl=Oe(()=>a("div",null,"Product Name",-1)),Sl=Oe(()=>a("div",null,"Category",-1)),Pl=Oe(()=>a("div",null,"Price",-1)),Ul={class:"row justify-between q-mt-md q-gutter-md"},Nl=Oe(()=>a("div",null,"Beginnings",-1)),ql=Oe(()=>a("div",null,"Added Stocks",-1)),Dl=Oe(()=>a("div",null,"Remaining",-1)),Al=Oe(()=>a("div",null,"Out",-1)),Il=Oe(()=>a("div",null,"Total Quantity",-1)),Tl=Oe(()=>a("div",null,"Sold",-1)),Bl=Oe(()=>a("div",null,"Sales",-1)),Fl={align:"right"},zl={__name:"AddingOtherReport",props:["sales_Reports","sales_report_id","user"],setup(d){const v=d;console.log("props.sales_Reports",v.sales_Reports),console.log("props.user",v.user);const C=v.sales_report_id,R=Ve(),f=Je(),b=Ge();z(()=>b.products);const U=Qe(),i=z(()=>U.branchProducts);console.log("branchProduct",i);const _=R.params.branch_id,p=v.user.id,r=P(""),h=P("Others"),m=async()=>{console.log("branch_id.value:",_),console.log("searchQuery.value:",r.value),console.log("category.value:",h.value),(r.value||h.value)&&await U.searchBranchProducts({query:r.value,branches_id:_,category:h.value})},S=P(!1),V=()=>{S.value=!0},y=n=>{const l=O=>O?O.charAt(0).toUpperCase()+O.slice(1).toLowerCase():"",o=n.firstname?l(n.firstname):"No Firstname",$=n.middlename?l(n.middlename).charAt(0)+".":"",T=n.lastname?l(n.lastname):"No Lastname";return`${o} ${$} ${T}`.trim()},w=n=>n?n.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",g=n=>{console.log("data",n),u.product_id=n.product.id,u.product_name=n.product.name,u.category=n.category,u.price=n.price,r.value=""},u=Te({sales_report_id:C,branch_id:_,user_id:p,name:"",product_id:"",product_name:"",price:0,beginnings:0,remaining:0,added_stocks:0,out:0,sold:0,total:0,sales:0,branches_id:R.params.branch_id}),c=z(()=>{const n=parseInt(u.sold||0)*parseFloat(u.price||0);return new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(n)});he(()=>[u.added_stocks,u.beginnings],([n,l])=>{u.total=parseInt(n||0)+parseInt(l||0)}),he(()=>[u.total,u.remaining,u.out],([n,l,o])=>{u.sold=parseInt(n||0)-(parseInt(l||0)+parseInt(o||0))}),he(()=>[u.sold,u.price],([n,l])=>{u.sales=parseInt(n||0)*parseFloat(l||0)});const s=async()=>{try{if(!u.product_name||!u.price||!u.product_id||!u.branch_id||!u.sales_report_id){$q.notify({type:"negative",message:"Product name, price, product ID, branch ID, and sales report ID are required."});return}const n={user_id:u.user_id,branch_id:u.branch_id,sales_report_id:u.sales_report_id,product_id:u.product_id,product_name:u.product_name,price:u.price,beginnings:u.beginnings,remaining:u.remaining,added_stocks:u.added_stocks,out:u.out,sold:u.sold,total:u.total,sales:u.sales};console.log("payload",n),await f.addOtherProductProduction(n)}catch{}};return(n,l)=>(k(),A(E,null,[a("div",null,[e(I,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Add Selecta",onClick:V})]),e(X,{modelValue:S.value,"onUpdate:modelValue":l[11]||(l[11]=o=>S.value=o),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(H,{style:{width:"600px","max-width":"80vw"}},{default:t(()=>[q(x(d.user.name)+" ",1),e(N,{class:"row items-center bg-backgroud q-px-md q-py-sm"},{default:t(()=>[xl,e(Ue),re(e(I,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[de]])]),_:1}),e(N,null,{default:t(()=>[a("div",$l," Cashier: "+x(y(d.user.employee)),1)]),_:1}),e(N,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",Vl,[e(D,{modelValue:r.value,"onUpdate:modelValue":[l[0]||(l[0]=o=>r.value=o),m],debounce:"1000",outlined:"",flat:"",placeholder:"Search product",dense:""},{append:t(()=>[a("div",null,[e(ae,{name:"search"})])]),default:t(()=>[r.value?(k(),A("div",Cl,[e(H,null,{default:t(()=>[e(Pe,{separator:""},{default:t(()=>{var o;return[(o=i.value)!=null&&o.length?(k(!0),A(E,{key:1},fe(i.value,$=>(k(),F(se,{onClick:T=>g($),key:$.id,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q(x(w($.product.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(k(),F(se,{key:0},{default:t(()=>[q(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ie("",!0)]),_:1},8,["modelValue"])]),a("div",null,[Rl,e(D,{modelValue:u.product_name,"onUpdate:modelValue":l[1]||(l[1]=o=>u.product_name=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[Sl,e(D,{modelValue:u.category,"onUpdate:modelValue":l[2]||(l[2]=o=>u.category=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[Pl,e(D,{modelValue:u.price,"onUpdate:modelValue":l[3]||(l[3]=o=>u.price=o),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",Ul,[a("div",null,[Nl,e(D,{modelValue:u.beginnings,"onUpdate:modelValue":l[4]||(l[4]=o=>u.beginnings=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[ql,e(D,{modelValue:u.added_stocks,"onUpdate:modelValue":l[5]||(l[5]=o=>u.added_stocks=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Dl,e(D,{modelValue:u.remaining,"onUpdate:modelValue":l[6]||(l[6]=o=>u.remaining=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Al,e(D,{modelValue:u.out,"onUpdate:modelValue":l[7]||(l[7]=o=>u.out=o),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Il,e(D,{modelValue:u.total,"onUpdate:modelValue":l[8]||(l[8]=o=>u.total=o),mask:"#####",outlined:"",readonly:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Tl,e(D,{modelValue:u.sold,"onUpdate:modelValue":l[9]||(l[9]=o=>u.sold=o),mask:"#####",readonly:"",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Bl,e(D,{modelValue:c.value,"onUpdate:modelValue":l[10]||(l[10]=o=>c.value=o),outlined:"",readonly:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])])]),_:1}),e(N,null,{default:t(()=>[a("div",Fl,[e(I,{color:"red-6",label:"Submit",class:"q-pa-sm",size:"md",onClick:s})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ll=Z(zl,[["__scopeId","data-v-fc9f2a70"]]);const Ol={class:"row justify-between text-white"},Ml=a("div",{class:"text-h6"},"Other Products Report",-1),Hl={class:"row justify-end q-mt-md"},jl={class:"text-h6"},Ql={__name:"OtherProductsReport",props:["reports","sales_report_id","user"],setup(d){const{dialogRef:v,onDialogHide:C,onDialogOK:R,onDialogCancel:f}=qe(),b=P(!1),U=P(!0),i=d,_=P(""),p=P({rowsPerPage:0}),r=z(()=>(console.log("Filtered rows:",i.reports||[]),i.reports||[])),h=s=>s?s.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",m=async(s,n)=>{console.log("update data of the price",s),console.log("update val of the price",n);try{const l=await ee.put("/api/update-otherProducst-sales-price-report/"+s.id,{price:parseInt(n)});console.log("Updated price response:",l.data)}catch(l){console.error(l)}},S=async(s,n)=>{console.log("update data of the beginnings",s),console.log("update val of the beginnings",n);try{const l=await ee.put("/api/update-otherProducst-sales-beginnings-report/"+s.id,{beginnings:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},V=async(s,n)=>{console.log("update data of the updatedRemaining",s),console.log("update val of the updatedRemaining",n);try{const l=await ee.put("/api/update-otherProducst-sales-remaining-report/"+s.id,{remaining:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},y=async(s,n)=>{console.log("update data of the updatedRemaining",s),console.log("update val of the updatedRemaining",n);try{const l=await ee.put("/api/update-otherProducst-sales-out-report/"+s.id,{out:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},w=async(s,n)=>{console.log("update data of the updatedAddedStocks",s),console.log("update val of the updatedAddedStocks",n);try{const l=await ee.put("/api/update-otherProducst-sales-addedstocks-report/"+s.id,{added_stocks:parseInt(n)});console.log("reponse",l.data)}catch(l){console.error(l)}},g=[{name:"name",label:"Product Name",field:s=>(console.log("Row data:",s),s.other_products.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:s=>`${s}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:s=>`${s}`},{name:"out",label:"Product Out (PCS)",field:"out",format:s=>`${s}`},{name:"added_stocks",label:"Added Stocks (PCS)",field:"added_stocks",format:s=>`${s}`},{name:"total_other_products",label:"Total Stocks (PCS)",field:s=>Number(s.beginnings||0)+Number(s.added_stocks||0),format:s=>`${s}`},{name:"sold",label:"Product Sold (PCS)",field:s=>{const n=Number(s.beginnings||0),l=Number(s.added_stocks||0),o=Number(s.out||0),$=Number(s.remaining||0),T=n+l,O=$+o;return T-O},format:s=>`${s}`},{name:"sales",label:"Total Sales",field:s=>{const n=Number(s.beginnings||0),l=Number(s.added_stocks||0),o=Number(s.out||0),$=Number(s.remaining||0),T=Number(s.price||0),O=n+l,J=$+o;return(O-J)*T},format:s=>`${u(s)}`}],u=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(s),c=z(()=>{const s=r.value.reduce((n,l)=>{const o=Number(l.beginnings||0),$=Number(l.added_stocks||0),T=Number(l.out||0),O=Number(l.remaining||0),J=o+$,ce=O+T,be=(J-ce)*(l.price||0);return console.log(`Adding salesAmount: ${be} to total: ${n}`),n+be},0);return console.log("Overall Total Sales computed as:",s),s});return(s,n)=>(k(),A("div",null,[e(X,{ref_key:"dialogRef",ref:v,onHide:te(C),modelValue:b.value,"onUpdate:modelValue":n[2]||(n[2]=l=>b.value=l),maximized:U.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,{style:{"background-color":"#607d8b"}},{default:t(()=>[a("div",Ol,[Ml,re((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(ve,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[de]])])]),_:1}),e(N,{class:"row justify-between"},{default:t(()=>[a("div",null,[e(D,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:_.value,"onUpdate:modelValue":n[0]||(n[0]=l=>_.value=l),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:"",style:{width:"500px"}},{append:t(()=>[e(ae,{name:"search"})]),_:1},8,["modelValue"])]),a("div",null,[e(Ll,{sales_Reports:i.reports,sales_report_id:d.sales_report_id,user:i.user},null,8,["sales_Reports","sales_report_id","user"])])]),_:1}),e(N,null,{default:t(()=>[e(Ce,{filter:_.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:g,rows:r.value,"row-key":"name","virtual-scroll":"",pagination:p.value,"onUpdate:pagination":n[1]||(n[1]=l=>p.value=l),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"500px"},class:"table-container sticky-header"},{"body-cell-name":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${h(l.row.other_products.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${u(l.row.price)}`),1),e(ge,{"onUpdate:modelValue":[o=>m(l.row,o),o=>l.row.price=o],modelValue:l.row.price,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":$=>o.value=$,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${l.row.beginnings}`),1),e(ge,{"onUpdate:modelValue":[o=>S(l.row,o),o=>l.row.beginnings=o],modelValue:l.row.beginnings,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":$=>o.value=$,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-remaining":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${l.row.remaining}`),1),e(ge,{"onUpdate:modelValue":[o=>V(l.row,o),o=>l.row.remaining=o],modelValue:l.row.remaining,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":$=>o.value=$,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-out":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${l.row.out}`),1),e(ge,{"onUpdate:modelValue":[o=>y(l.row,o),o=>l.row.out=o],modelValue:l.row.out,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":$=>o.value=$,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-added_stocks":t(l=>[e(G,{props:l},{default:t(()=>[a("span",null,x(`${l.row.added_stocks}`),1),e(ge,{"onUpdate:modelValue":[o=>w(l.row,o),o=>l.row.added_stocks=o],modelValue:l.row.added_stocks,"auto-save":""},{default:t(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":$=>o.value=$,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:pe(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(N,null,{default:t(()=>[a("div",Hl,[a("div",jl," Overall Total Sales: "+x(u(c.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","modelValue","maximized"])]))}};const El=d=>(le("data-v-59913400"),d=d(),ne(),d),Kl=El(()=>a("div",{class:"text-h6",align:"center"},"Products Report",-1)),Yl={class:"item-start q-gutter-md",align:"center"},Gl={__name:"ProductsReport",props:["sales_Reports"],setup(d){const v=d,C=v.sales_Reports;console.log("sales report2sss",C);const R=Be(),f=(p,r,h)=>{R.dialog({component:Vo,componentProps:{reports:p,sales_report_id:r,user:h}})},b=(p,r,h)=>{R.dialog({component:Yo,componentProps:{reports:p,sales_report_id:r,user:h}})},U=(p,r,h)=>{R.dialog({component:vl,componentProps:{reports:p,sales_report_id:r,user:h}})},i=(p,r,h)=>{R.dialog({component:kl,componentProps:{reports:p,sales_report_id:r,user:h}})},_=(p,r,h)=>{R.dialog({component:Ql,componentProps:{reports:p,sales_report_id:r,user:h}})};return(p,r)=>(k(),A("div",null,[e(H,{class:"user-card"},{default:t(()=>[e(N,null,{default:t(()=>[Kl]),_:1}),e(N,null,{default:t(()=>[a("div",Yl,[e(I,{onClick:r[0]||(r[0]=h=>f(v.sales_Reports[0].bread_reports,v.sales_Reports[0].id,v.sales_Reports[0].user)),"no-caps":"",label:"Bread Report",rounded:"",color:"brown",style:{width:"130px"},class:"user-button"}),e(I,{onClick:r[1]||(r[1]=h=>b(v.sales_Reports[0].selecta_reports,v.sales_Reports[0].id,v.sales_Reports[0].user)),"no-caps":"",label:"Selecta Report",rounded:"",color:"red-6",style:{width:"130px"},class:"user-button"}),e(I,{onClick:r[2]||(r[2]=h=>U(v.sales_Reports[0].softdrinks_reports,v.sales_Reports[0].id,v.sales_Reports[0].user)),"no-caps":"",label:"Softdrinks Report",rounded:"",color:"accent",style:{width:"150px"},class:"user-button"}),e(I,{onClick:r[3]||(r[3]=h=>i(v.sales_Reports[0].cake_sales_reports,v.sales_Reports[0].id,v.sales_Reports[0].user)),"no-caps":"",label:"Cake Report",rounded:"",color:"teal",style:{width:"130px"},class:"user-button"}),e(I,{onClick:r[4]||(r[4]=h=>_(v.sales_Reports[0].other_products_reports,v.sales_Reports[0].id,v.sales_Reports[0].user)),"no-caps":"",label:"Other Products Report",rounded:"",color:"blue-grey",style:{width:"180px"},class:"user-button"})])]),_:1})]),_:1})]))}};var Wl=Z(Gl,[["__scopeId","data-v-59913400"]]);const Jl={class:"row justify-between text-white"},Xl=a("div",{class:"text-h6"},"Denomination Report",-1),Zl={class:"row text-weight-regular text-subtitle1"},en={class:"col-6"},tn={class:"col-6"},an={class:"row justify-end q-mt-md"},on={class:"text-h6"},ln={__name:"DenominationDialogReport",props:{reports:Array,total:Number},setup(d){const{dialogRef:v,onDialogHide:C}=qe(),f=d.reports[0]||{},b=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(i),U=z(()=>{const i={oneThousandBills:1e3,fiveHundredBills:500,twoHundredBills:200,oneHundredBills:100,fiftyBills:50,twentyBills:20,twentyCoins:20,tenCoins:10,fiveCoins:5,oneCoins:1,twentyFiveCents:.25};return Object.keys(i).reduce((_,p)=>_+(f[p]||0)*i[p],0)});return(i,_)=>(k(),F(X,{ref_key:"dialogRef",ref:v,onHide:te(C)},{default:t(()=>[e(H,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(N,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",Jl,[Xl,re((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(ve,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[de]])])]),_:1}),e(N,null,{default:t(()=>[a("div",Zl,[a("div",en,[a("div",null,"1000 Bills: "+x(te(f).oneThousandBills),1),a("div",null,"500 Bills: "+x(te(f).fiveHundredBills),1),a("div",null,"200 Bills: "+x(te(f).twoHundredBills),1),a("div",null,"100 Bills: "+x(te(f).oneHundredBills),1),a("div",null,"50 Bills: "+x(te(f).fiftyBills),1),a("div",null,"20 Bills: "+x(te(f).twentyBills),1)]),a("div",tn,[a("div",null,"20 coins: "+x(te(f).twentyCoins),1),a("div",null,"10 coins: "+x(te(f).tenCoins),1),a("div",null,"5 coins: "+x(te(f).fiveCoins),1),a("div",null,"1 coins: "+x(te(f).oneCoins),1),a("div",null,"25 cents: "+x(te(f).twentyFiveCents),1)])])]),_:1}),e(N,null,{default:t(()=>[a("div",an,[a("div",on," Overall Total Denomination: "+x(b(U.value)),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const nn=d=>(le("data-v-43ad17ba"),d=d(),ne(),d),sn=nn(()=>a("div",{class:"text-h6",align:"center"},"Denomination Report",-1)),rn={class:"q-gutter-x-md",align:"center"},dn={__name:"DenominationReport",props:["sales_Reports"],setup(d){const v=d;v.sales_Reports,console.log("Denomination report",v);const C=Be(),R=(f,b)=>{C.dialog({component:ln,componentProps:{reports:f,total:b}})};return(f,b)=>(k(),A("div",null,[e(H,{class:"user-card"},{default:t(()=>[e(N,null,{default:t(()=>[sn]),_:1}),e(N,null,{default:t(()=>[a("div",rn,[e(I,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",onClick:b[0]||(b[0]=U=>R(v.sales_Reports[0].denomination_reports,v.sales_Reports[0].denomination_total)),class:"user-button"})])]),_:1})]),_:1})]))}};var un=Z(dn,[["__scopeId","data-v-43ad17ba"]]);const cn=st("expenses",()=>{const d=P([]),v=P(null);return{expenses:d,expense:v,addingExpense:async R=>{try{const f=await ee.post("/api/employee-adding-expense",R);console.log(f.data),ue.create({type:"positive",message:"Employee expenses successfully created",setTimeout:1e3})}catch(f){console.log(f),ue.create({type:"negative",message:"Error creating employee expenses",setTimeout:1e3})}}}});const mn=d=>(le("data-v-c489c504"),d=d(),ne(),d),pn={class:"row justify-between"},_n=mn(()=>a("div",{class:"text-h6"},"Expenses",-1)),gn={class:"q-gutter-y-md"},fn={class:"row q-gutter-x-md"},vn={align:"right"},yn={class:"",align:"right"},hn={__name:"AddingExpenses",props:["reports","user","sales_report_id","user_id"],setup(d){const v=cn(),C=d;console.log("Expenses Data",C.reports),console.log("Expenses User",C.user),console.log("Expenses Sales Report ID",C.sales_report_id);const R=C.sales_report_id,f=C.reports[0].branch_id,b=C.user_id;console.log("user_id",b),console.log("branch_id",f);const U=_t(),i=z(()=>U.users),p=pt().user;console.log("userdatasss",p);const r=P(!1),h=P([]),m=()=>{h.value.push({user_expense_id:V.user_expense_id,name:V.name,amount:V.amount,description:V.description}),console.log("expensesList",h.value),S()},S=()=>{V.user_expense_id="",V.name="",V.amount="",V.description=""};z(()=>searchQuery.value&&i.value.length>0);const V=Te({user_expense_id:"",name:"",amount:0,description:""}),y=c=>{h.value.splice(c,1)},w=()=>{r.value=!0},g=()=>{V.expense_user_id="",V.name="",V.amount="",V.description=""},u=async()=>{const c={sales_report_id:R,branch_id:f,user_id:b,expenses:h.value.map(s=>({name:s.name,amount:s.amount,description:s.description}))};console.log("expenseReport",c),await v.addingExpense(c),ue.create({type:"positive",message:"Expenses Submitted",timeout:1e3}),g()};return(c,s)=>(k(),A(E,null,[a("div",null,[e(I,{class:"bg-gradient text-white",outlined:"",label:"Expenses Report",onClick:w})]),e(X,{modelValue:r.value,"onUpdate:modelValue":s[3]||(s[3]=n=>r.value=n),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(H,{style:{width:"450px"}},{default:t(()=>[e(N,{class:"bg-gradient text-white"},{default:t(()=>[a("div",pn,[_n,a("div",null,[re(e(I,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[de]])])])]),_:1}),e(N,null,{default:t(()=>[a("div",gn,[a("div",fn,[a("div",null,[e(D,{modelValue:V.name,"onUpdate:modelValue":s[0]||(s[0]=n=>V.name=n),outlined:"",dense:"",style:{width:"300px"},placeholder:"Name"},null,8,["modelValue"])]),a("div",null,[e(D,{modelValue:V.amount,"onUpdate:modelValue":s[1]||(s[1]=n=>V.amount=n),"reverse-fill-mask":"",outlined:"",type:"number",dense:"",style:{width:"100px"},label:"Amount"},null,8,["modelValue"])])]),a("div",null,[e(D,{modelValue:V.description,"onUpdate:modelValue":s[2]||(s[2]=n=>V.description=n),placeholder:"Description",outlined:"",autogrow:"",style:{width:"415px"}},null,8,["modelValue"])]),a("div",vn,[e(I,{padding:"sm md",size:"xm",icon:"add",dense:"",outline:"",onClick:m})]),a("div",null,[e(Pe,{dense:"",separator:"",class:"box"},{default:t(()=>[e(se,null,{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Name")]),_:1})]),_:1}),e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Description")]),_:1})]),_:1}),e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Amount")]),_:1})]),_:1}),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-overline"})]),_:1})]),_:1}),a("div",null,[(k(!0),A(E,null,fe(h.value,(n,l)=>(k(),F(se,{key:l,class:"q-gutter-xs"},{default:t(()=>[e(Y,{class:"q-ma-sm text-subtitle2"},{default:t(()=>[e(W,{caption:""},{default:t(()=>[q(x(n.name),1)]),_:2},1024)]),_:2},1024),e(Y,{class:"q-ma-sm q-gutter-sm"},{default:t(()=>[e(W,{caption:""},{default:t(()=>[q(x(n.description),1)]),_:2},1024)]),_:2},1024),e(Y,{class:"q-ma-sm q-gutter-sm"},{default:t(()=>[e(W,{caption:""},{default:t(()=>[q(x(n.amount),1)]),_:2},1024)]),_:2},1024),e(Y,{side:""},{default:t(()=>[e(I,{onClick:o=>y(l),color:"negative",icon:"clear",dense:"",flat:"",round:"",class:"text-red"},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))])]),_:1})]),a("div",yn,[e(I,{color:"red-6",label:"Submit",class:"q-pa-sm",size:"md",onClick:u})])])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var bn=Z(hn,[["__scopeId","data-v-c489c504"]]);const wn={class:"row justify-between text-white"},kn=a("div",{class:"text-h6"},"Expenses Report",-1),xn={class:"row justify-end q-mt-md"},$n={class:"text-h6"},Vn={__name:"ExpensesDialog",props:{reports:Array,user:Object,sales_report_id:Number,user_id:Number},setup(d){const{dialogRef:v,onDialogHide:C,onDialogOK:R,onDialogCancel:f}=qe(),b=P(!1),U=P(!0),i=P(""),_=P({rowsPerPage:0}),p=d,r=p.reports;console.log("Expenses total",p.total);const h=c=>c?c.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" "):"",m=async(c,s)=>{console.log("update data of the updateName",c),console.log("update val of the updateName",s);try{const n=await ee.put("/api/update-expenses-sales-name-report/"+c.id,{name:s});console.log("Updated expenses amount response:",n.data)}catch(n){console.error(n)}},S=async(c,s)=>{console.log("update data of the description",c),console.log("update val of the description",s);try{const n=await ee.put("/api/update-expenses-sales-description-report/"+c.id,{description:s});console.log("Updated expenses amount response:",n.data)}catch(n){console.error(n)}},V=async(c,s)=>{console.log("update data of the amount",c),console.log("update val of the amount",s);try{const n=await ee.put("/api/update-expenses-sales-amount-report/"+c.id,{amount:parseFloat(s)});console.log("Updated expenses amount response:",n.data)}catch(n){console.error(n)}},y=[{name:"name",label:"Expenses Name",field:c=>(console.log("Row data:",c),c.name||"N/A"),align:"center"},{name:"description",label:"Description",field:"description",align:"center"},{name:"amount",label:"Amount",field:"amount",align:"center"}];console.log("Reports data structure:",p.reports);const w=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(c),g=z(()=>(console.log("Filtered rows:",p.reports||[]),p.reports||[])),u=z(()=>g.value.reduce((s,n)=>{const l=parseFloat(n.amount)||0;return s+l},0));return console.log("Expenses:",g.value),(c,s)=>(k(),F(X,{ref_key:"dialogRef",ref:v,onHide:te(C),onOk:c.handleButtonClick,onCancel:te(f),modelValue:b.value,"onUpdate:modelValue":s[2]||(s[2]=n=>b.value=n),maximized:U.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",wn,[kn,re((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(ve,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[de]])])]),_:1}),e(N,{class:"row justify-between"},{default:t(()=>[a("div",null,[e(D,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=n=>i.value=n),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:"",style:{width:"500px"}},{append:t(()=>[e(ae,{name:"search"})]),_:1},8,["modelValue"])]),a("div",null,[e(bn,{reports:te(r),user:p.user,sales_report_id:p.sales_report_id,user_id:p.user_id},null,8,["reports","user","sales_report_id","user_id"])])]),_:1}),e(N,null,{default:t(()=>[e(Ce,{filter:i.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:y,rows:g.value,"row-key":"name","virtual-scroll":"",pagination:_.value,"onUpdate:pagination":s[1]||(s[1]=n=>_.value=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(n=>[e(G,{props:n},{default:t(()=>[a("span",null,x(`${h(n.row.name)}`),1),e(ge,{"onUpdate:modelValue":[l=>m(n.row,l),l=>n.row.name=l],modelValue:n.row.name,"auto-save":""},{default:t(l=>[e(D,{class:"text-capitalize",modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,dense:"",autofocus:"",counter:"",onKeyup:pe(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-description":t(n=>[e(G,{props:n},{default:t(()=>[a("span",null,x(`${h(n.row.description)}`),1),e(ge,{"onUpdate:modelValue":[l=>S(n.row,l),l=>n.row.description=l],modelValue:n.row.description,"auto-save":""},{default:t(l=>[e(D,{class:"text-capitalize",modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,dense:"",autofocus:"",counter:"",onKeyup:pe(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-amount":t(n=>[e(G,{props:n},{default:t(()=>[a("span",null,x(w(n.row.amount)),1),e(ge,{"onUpdate:modelValue":[l=>V(n.row,parseFloat(l)),l=>n.row.amount=l],modelValue:n.row.amount,"auto-save":""},{default:t(l=>[e(D,{modelValue:l.value,"onUpdate:modelValue":o=>l.value=o,modelModifiers:{number:!0},dense:"",type:"number",mask:"##0.00",autofocus:"",counter:"",onKeyup:pe(l.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(N,null,{default:t(()=>[a("div",xn,[a("div",$n," Overall Total Expenses: "+x(w(u.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","onOk","onCancel","modelValue","maximized"]))}};const Cn=d=>(le("data-v-601d27dc"),d=d(),ne(),d),Rn=Cn(()=>a("div",{class:"text-h6",align:"center"},"Expenses Report",-1)),Sn={class:"q-gutter-x-md",align:"center"},Pn={__name:"ExpensesReport",props:["sales_Reports"],setup(d){const v=d;console.log("Expenses Datassssss",v.sales_Reports);const C=Be(),R=(f,b,U,i)=>{C.dialog({component:Vn,componentProps:{reports:f,user:b,sales_report_id:U,user_id:i}})};return(f,b)=>(k(),A("div",null,[e(H,{class:"user-card"},{default:t(()=>[e(N,null,{default:t(()=>[Rn]),_:1}),e(N,null,{default:t(()=>[a("div",Sn,[e(I,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",class:"user-button",onClick:b[0]||(b[0]=U=>R(v.sales_Reports[0].expenses_reports,v.sales_Reports[0].user.employee,v.sales_Reports[0].id,v.sales_Reports[0].user_id))})])]),_:1})]),_:1})]))}};var Un=Z(Pn,[["__scopeId","data-v-601d27dc"]]);const Nn=st("employee-credits",()=>{const d=P([]),v=P(null);return{credits:d,credit:v,addingCredits:async R=>{try{const f=await ee.post("/api/employee-adding-credits",R);console.log(f.data),ue.create({type:"positive",message:"Employee credits successfully created",setTimeout:1e3})}catch(f){console.log(f),ue.create({type:"negative",message:"Error creating employee credits",setTimeout:1e3})}}}});const ht=d=>(le("data-v-128fb2e3"),d=d(),ne(),d),qn=ht(()=>a("div",{class:"text-h6 text-white"},"Credits",-1)),Dn={class:"q-gutter-y-md"},An={key:0,class:"custom-list z-top"},In={class:"row q-gutter-sm"},Tn={key:0,class:"custom-list z-top"},Bn={align:"right"},Fn={class:"row justify-between"},zn=ht(()=>a("div",null,"Credits Total",-1)),Ln={class:"q-mt-lg"},On={__name:"AddingCredit",props:["reports","user"],setup(d){var K;const C=d.reports[0].id,R=_t();z(()=>R.users);const f=Nn(),b=St(),U=z(()=>b.employees),i=pt(),_=z(()=>i.products);console.log("products search",_.value);const p=i.user;console.log("userdata",p);const r=((K=p==null?void 0:p.device)==null?void 0:K.branch_id)||"",h=P(!1),m=P(""),S=P(""),V=P(!1),y=P(!1);let w=!1,g=!1;const u=P(!1),c=P(!1),s=P(!1),n=async()=>{m.value&&(c.value=!0,console.log("searchQuery.value",m.value),await b.searchEmployee(m.value),c.value=!1,V.value=!0)},l=()=>{h.value=!0},o=Te({credit_user_id:"",name:"",product_id:"",productName:"",price:0,pieces:"",creditTotal:0}),$=()=>{m.value="",S.value="",o.credit_user_id="",o.name="",o.product_id="",o.productName="",o.price="",o.pieces="",o.creditTotal="",we.value=[]},T=()=>{S.value="",o.product_id="",o.productName="",o.price="",o.pieces=""},O=z(()=>m.value&&U.value.length>0),J=L=>{console.log("credit",L),m.value=`${L.firstname} ${L.middlename?L.middlename.charAt(0)+".":""} ${L.lastname}`,o.credit_user_id=L.id,o.name=`${L.firstname} ${L.middlename?L.middlename.charAt(0)+".":""} ${L.lastname}`,w=!0,V.value=!1},ce=async()=>{if(S.value){s.value=!0;const L=await i.searchBranchProducts(S.value,r);console.log("response",L),s.value=!1,y.value=!0}},Se=z(()=>S.value&&_.value.length>0);console.log("Product search datasss:",_.value);const be=L=>{S.value=L.name,o.productName=L.name,o.product_id=L.id,o.price=L.price,g=!0,y.value=!1},ie=P(""),we=P([]),j=()=>{const L=parseFloat(o.price),B=parseInt(o.pieces);if(!isNaN(L)&&!isNaN(B)){const M=L*B;ie.value=M.toFixed(2)}else ie.value="";console.log("productCreditTotalAmount",ie.value)},oe=()=>{const L=ie.value;we.value.push({credit_user_id:o.credit_user_id,product_id:o.product_id,name:o.name,productName:o.productName,price:o.price,pieces:o.pieces,totalAmount:L}),console.log("creditList",we.value),T()},_e=L=>{we.value.splice(L,1)};he(m,L=>{L.length>2&&!w?n():V.value=!1,w=!1}),he(S,L=>{L.length>2&&!g?ce():y.value=!1,g=!1}),he(we,L=>{const B=L.reduce((M,me)=>M+parseFloat(me.totalAmount),0);o.creditTotal=B.toFixed(2)},{deep:!0}),he([()=>o.price,()=>o.pieces],j),he(ie,L=>{console.log("productCreditTotalAmoun",L)});const Q=async()=>{const L={employee_credits_id:C,credits:we.value.map(B=>{var M;return{credit_user_id:B.credit_user_id,branch_id:((M=p==null?void 0:p.employee)==null?void 0:M.branch_id)||"",productName:B.productName,product_id:B.product_id,price:B.price,pieces:B.pieces,totalAmount:B.totalAmount}})};await f.addingCredits(L),console.log("employeeCreditReport:",L),h.value=!1,$()};return(L,B)=>(k(),A(E,null,[a("div",null,[e(I,{class:"bg-gradient text-white",outlined:"",label:"Add Credits",onClick:l})]),e(X,{modelValue:h.value,"onUpdate:modelValue":B[4]||(B[4]=M=>h.value=M),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(H,{style:{width:"450px"}},{default:t(()=>[e(N,{class:"row bg-gradient text-white"},{default:t(()=>[qn,e(Ue),re(e(I,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[de]])]),_:1}),e(N,null,{default:t(()=>[a("div",Dn,[a("div",null,[a("div",null,[e(D,{modelValue:m.value,"onUpdate:modelValue":B[0]||(B[0]=M=>m.value=M),outlined:"",dense:"",rounded:"",debounce:"1000",style:{width:"415px"},placeholder:"Search Name"},{append:t(()=>[c.value?(k(),F(lt,{key:1,color:"grey",size:"sm"})):(k(),F(ae,{key:0,name:"search"}))]),default:t(()=>[O.value&&V.value?(k(),A("div",An,[e(H,null,{default:t(()=>[e(Pe,{separator:""},{default:t(()=>[u.value?(k(),F(se,{key:0},{default:t(()=>[e(Y,null,{default:t(()=>[e(lt,{color:"primary"})]),_:1})]),_:1})):Ie("",!0),!u.value&&!U.value.length?(k(),F(se,{key:1},{default:t(()=>[e(Y,null,{default:t(()=>[q(" No data available in this branch. ")]),_:1})]),_:1})):(k(!0),A(E,{key:2},fe(U.value,M=>(k(),F(se,{onClick:me=>J(M),key:M.id,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q(x(`
                                  ${M==null?void 0:M.firstname} ${M!=null&&M.middlename?(M==null?void 0:M.middlename.charAt(0).toUpperCase())+".":""} ${M==null?void 0:M.lastname}`),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})])):Ie("",!0)]),_:1},8,["modelValue"])])]),a("div",In,[a("div",null,[e(D,{modelValue:S.value,"onUpdate:modelValue":B[1]||(B[1]=M=>S.value=M),placeholder:"Search Product",outlined:"",flat:"",debounce:"500",dense:"",style:{width:"240px"}},{append:t(()=>[s.value?(k(),F(lt,{key:1,color:"grey",size:"sm"})):(k(),F(ae,{key:0,name:"search"}))]),default:t(()=>[Se.value&&y.value?(k(),A("div",Tn,[e(H,null,{default:t(()=>[e(Pe,{separator:""},{default:t(()=>[(k(!0),A(E,null,fe(_.value,M=>(k(),F(se,{onClick:me=>be(M),key:M.name,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q(x(M.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})])):Ie("",!0)]),_:1},8,["modelValue"])]),a("div",null,[e(D,{modelValue:o.price,"onUpdate:modelValue":B[2]||(B[2]=M=>o.price=M),"reverse-fill-mask":"",outlined:"",readonly:"",flat:"",dense:"",style:{width:"80px"},label:"Price"},null,8,["modelValue"])]),a("div",null,[e(D,{modelValue:o.pieces,"onUpdate:modelValue":B[3]||(B[3]=M=>o.pieces=M),"reverse-fill-mask":"",outlined:"",type:"number",flat:"",dense:"",style:{width:"80px"},label:"Pcs"},null,8,["modelValue"])])]),a("div",Bn,[e(I,{padding:"sm md",size:"xm",icon:"add",dense:"",outline:"",onClick:oe})]),a("div",null,[e(ct,{outlined:"",dense:"",readonly:""},{control:t(()=>[a("div",null,[(k(!0),A(E,null,fe(we.value,(M,me)=>(k(),F(se,{key:me,class:"q-gutter-xs"},{default:t(()=>[e(Y,{class:"q-ma-sm text-subtitle2",side:""},{default:t(()=>[q(x(M.productName),1)]),_:2},1024),e(Y,{class:"q-ma-sm q-gutter-sm",side:""},{default:t(()=>[e(W,null,{default:t(()=>[q("Pcs")]),_:1}),e(W,{caption:""},{default:t(()=>[q(x(M.pieces),1)]),_:2},1024)]),_:2},1024),e(Y,{class:"q-ma-sm q-gutter-sm",side:""},{default:t(()=>[e(W,null,{default:t(()=>[q("Price")]),_:1}),e(W,{caption:""},{default:t(()=>[q(x(M.price),1)]),_:2},1024)]),_:2},1024),e(Y,{class:"q-ma-sm q-gutter-sm",side:""},{default:t(()=>[e(W,null,{default:t(()=>[q("Total")]),_:1}),e(W,{caption:""},{default:t(()=>[q(x(M.totalAmount),1)]),_:2},1024)]),_:2},1024),e(Y,{side:""},{default:t(()=>[e(I,{onClick:De=>_e(me),color:"negative",icon:"clear",dense:"",flat:"",round:"",class:"text-red"},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))])]),_:1})]),a("div",Fn,[a("div",null,[zn,e(ct,{outlined:"",dense:"",readonly:"",style:{width:"120px"}},{control:t(()=>[q(x(o.creditTotal),1)]),_:1})]),a("div",Ln,[e(I,{color:"red-6",label:"Submit",class:"q-pa-sm",size:"md",onClick:Q})])])])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Mn=Z(On,[["__scopeId","data-v-128fb2e3"]]);const Hn={class:"row justify-between text-white"},jn=a("div",{class:"text-h6"},"Credits Report",-1),Qn={class:"row justify-end q-mt-md"},En={class:"text-h6"},Kn={__name:"CreditsReportDialog",props:{reports:Array,user:Object},setup(d){const{dialogRef:v,onDialogHide:C,onDialogOK:R,onDialogCancel:f}=qe(),b=P(!1),U=P(!0),i=d,_=P(""),p=P({rowsPerPage:0}),r=i.reports;console.log("creditReports data testing",r);const h=r[0].id;console.log("employee_credits_id",h),i.user,console.log("user data testing",i.user),r.forEach((c,s)=>{console.log(`Report ${s}:`,c),console.log(`Credit Products for Report ${s}:`,c.credit_products.total_amount)});const m=z(()=>r.flatMap(c=>c.credit_products.map(s=>{const n=parseInt(s.pieces,10)||0,l=parseFloat(s.price)||0,o=n*l;return{...s,total_amount:o}})));console.log("All Credit Products:",m.value[0]);const S=c=>c?c.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" "):"",V=c=>{const s=$=>$?$.charAt(0).toUpperCase()+$.slice(1).toLowerCase():"",n=c.firstname?s(c.firstname):"No Firstname",l=c.middlename?s(c.middlename).charAt(0)+".":"",o=c.lastname?s(c.lastname):"No Lastname";return`${n} ${l} ${o}`.trim()},y=[{name:"name",label:"Employee Name",field:c=>V(c.credit_user_id),align:"center"},{name:"productName",label:"Product Name",field:c=>c.product.name||"N/A",align:"center"},{name:"pieces",label:"Pieces",field:"pieces",align:"center"},{name:"price",label:"Price",field:"price",align:"center"},{name:"total_amount",label:"Total Amount",field:"total_amount",align:"center"}];console.log("Reports data structure:",i.reports);const w=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(c),g=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(c),u=z(()=>m.value.reduce((s,n)=>{const l=parseFloat(n.total_amount)||0;return s+l},0));return(c,s)=>(k(),F(X,{ref_key:"dialogRef",ref:v,onHide:te(C),onOk:c.handleButtonClick,onCancel:te(f),modelValue:b.value,"onUpdate:modelValue":s[2]||(s[2]=n=>b.value=n),maximized:U.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",Hn,[jn,re((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(ve,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[de]])])]),_:1}),e(N,{class:"row justify-between"},{default:t(()=>[a("div",null,[e(D,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:_.value,"onUpdate:modelValue":s[0]||(s[0]=n=>_.value=n),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:"",style:{width:"500px"}},{append:t(()=>[e(ae,{name:"search"})]),_:1},8,["modelValue"])]),a("div",null,[e(Mn,{reports:te(r),user:i.user},null,8,["reports","user"])])]),_:1}),e(N,null,{default:t(()=>[e(Ce,{filter:_.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:y,rows:m.value,"row-key":"name","virtual-scroll":"",pagination:p.value,"onUpdate:pagination":s[1]||(s[1]=n=>p.value=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-productName":t(n=>[e(G,{props:n},{default:t(()=>[a("span",null,x(`${S(n.row.product.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(n=>[e(G,{props:n},{default:t(()=>[a("span",null,x(`${w(n.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-total_amount":t(n=>[e(G,{props:n},{default:t(()=>[a("span",null,x(`${g(n.row.total_amount)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(N,null,{default:t(()=>[a("div",Qn,[a("div",En," Overall Total Expenses: "+x(w(u.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","onOk","onCancel","modelValue","maximized"]))}};const Yn=d=>(le("data-v-0016d32e"),d=d(),ne(),d),Gn=Yn(()=>a("div",{class:"text-h6",align:"center"},"Credits Report",-1)),Wn={class:"q-gutter-x-md",align:"center"},Jn={__name:"CreditsReport",props:["sales_Reports"],setup(d){const v=d;console.log("sales_Reports to send in credits",v.sales_Reports);const C=Be(),R=(f,b)=>{C.dialog({component:Kn,componentProps:{reports:f,user:b}})};return(f,b)=>(k(),A("div",null,[e(H,{class:"user-card"},{default:t(()=>[e(N,null,{default:t(()=>[Gn]),_:1}),e(N,null,{default:t(()=>[a("div",Wn,[e(I,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",class:"user-button",onClick:b[0]||(b[0]=U=>R(v.sales_Reports[0].credit_reports,v.sales_Reports[0].user.employee))})])]),_:1}),e(N)]),_:1})]))}};var Xn=Z(Jn,[["__scopeId","data-v-0016d32e"]]);const Zn=d=>(le("data-v-dd80b502"),d=d(),ne(),d),es={class:"q-mt-lg row items-start q-gutter-md justify-center"},ts={class:"row justify-between"},as=Zn(()=>a("div",{class:"text-h6"},"Sales Report",-1)),os={align:"right"},ls={class:"text-subtitle1 text-weight-regular"},ns={class:"row q-gutter-sm q-pa-md"},ss={class:"q-ma-sm"},rs={class:"q-ma-sm",align:"center"},ds=["src"],is={__name:"SalesReportPanel",props:["salesReport"],setup(d){Ze.exports.vfs=mt;const v=d,C=v.salesReport;console.log("reportsData",v.salesReport);const R=P(!0),f=P(!1),b=P(""),U=m=>$e.formatDate(m,"MMMM DD, YYYY"),i=m=>{const S=new Date(m),V={hour:"2-digit",minute:"2-digit",hour12:!0};return S.toLocaleTimeString(void 0,V)},_=m=>{const S=g=>g?g.charAt(0).toUpperCase()+g.slice(1).toLowerCase():"",V=m.firstname?S(m.firstname):"No Firstname",y=m.middlename?S(m.middlename).charAt(0)+".":"",w=m.lastname?S(m.lastname):"No Lastname";return`${V} ${y} ${w}`.trim()},p=m=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(m).replace("\u20B1","\u20B1	"),r=m=>{const S=z(()=>m.credit_reports.flatMap(j=>j.credit_products));console.log("All Credit Products:",S.value);const V=[{title:"Bread Production",data:(m.bread_reports||[]).map(j=>{const oe=Number(j.beginnings)||0,_e=Number(j.new_production)||0,Q=Number(j.remaining)||0,K=Number(j.bread_out)||0,L=Number(j.price)||0,B=oe+_e,M=Q+K,me=B-M,De=me*L;return{...j,total:B,bread_sold:me,sales:De}}),columns:["bread.name","beginnings","price","new_production","bread_out","bread_sold","total","remaining","sales"],totals:["sales"]},{title:"Selecta Production",data:(m.selecta_reports||[]).map(j=>{const oe=Number(j.beginnings||0),_e=Number(j.added_stocks||0),Q=Number(j.out||0),K=Number(j.remaining||0),L=Number(j.price||0),B=oe+_e,M=K+Q,me=B-M,De=me*L;return{...j,total:B,sold:me,sales:De}}),columns:["selecta.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Softdrinks Production",data:(m.softdrinks_reports||[]).map(j=>{const oe=Number(j.beginnings||0),_e=Number(j.added_stocks||0),Q=Number(j.out||0),K=Number(j.remaining||0),L=Number(j.price||0),B=oe+_e,M=K+Q,me=B-M,De=me*L;return{...j,total:B,sold:me,sales:De}}),columns:["softdrinks.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Other Products Production",data:(m.other_products_reports||[]).map(j=>{const oe=Number(j.beginnings||0),_e=Number(j.added_stocks||0),Q=Number(j.out||0),K=Number(j.remaining||0),L=Number(j.price||0),B=oe+_e,M=K+Q,me=B-M,De=me*L;return{...j,total:B,sold:me,sales:De}}),columns:["other_products.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Cake Production",data:m.cake_sales_reports||[],columns:["cake_report.name","cake_report.user.employee","cake_report.layers","cake_report.price","cake_report.sales_status"],totals:["cake_report.price"]}],y=m.expenses_reports||[],w=S.value||[],g=m.denomination_reports[0]||[],u=m.denomination_total;m.over_total;const c={bills:[{name:"One Thousand",pcs:g.oneThousandBills||0,value:(g.oneThousandBills||0)*1e3},{name:"Five Hundred",pcs:g.fiveHundredBills||0,value:(g.fiveHundredBills||0)*500},{name:"Two Hundred",pcs:g.twoHundredBills||0,value:(g.twoHundredBills||0)*200},{name:"One Hundred",pcs:g.oneHundredBills||0,value:(g.oneHundredBills||0)*100},{name:"Fifty",pcs:g.fiftyBills||0,value:(g.fiftyBills||0)*50},{name:"Twenty",pcs:g.twentyBills||0,value:(g.twentyBills||0)*20}],coins:[{name:"Twenty",pcs:g.twentyCoins||0,value:(g.twentyCoins||0)*20},{name:"Ten",pcs:g.tenCoins||0,value:(g.tenCoins||0)*10},{name:"Five",pcs:g.fiveCoins||0,value:(g.fiveCoins||0)*5},{name:"One",pcs:g.oneCoins||0,value:(g.oneCoins||0)*1},{name:"Twenty Five Cents",pcs:g.twentyFiveCents||0,value:(g.twentyFiveCents||0)*.25}]},s=(j,oe,_e)=>{const Q=(L,B)=>B.split(".").reduce((M,me)=>M?M[me]:0,L),K=_e.reduce((L,B)=>(L[B]=j.reduce((M,me)=>M+parseFloat(Q(me,B))||0,0),L),{});return[...j.map(L=>oe.map(B=>{if(B==="cake_report.user.employee"){const M=Q(L,"cake_report.user.employee");return{text:M?_(M):"No Employee",style:"body",alignment:"center"}}return{text:B.includes(".")?Q(L,B)||"-":L[B]||"-",style:"body",alignment:"center"}})),[{text:"Overall Total",colSpan:oe.length-_e.length,style:"tableHeader",alignment:"right",color:"#020617"},...Array(oe.length-_e.length-1).fill({}),..._e.map(L=>({text:`\u20B1 ${K[L].toFixed(2)}`,style:"tableHeader",alignment:"center",color:"#020617"}))]]};let n=0;const l=w.length>0?w.map(j=>{const oe=(j.price||0)*(j.pieces||0);return n+=oe,[{text:_(j.credit_user_id),style:"body",alignment:"center"},{text:j.product.name,style:"body",alignment:"center"},{text:j.pieces,style:"body",alignment:"center"},{text:p(j.price),style:"body",alignment:"center"},{text:p(oe),style:"body",alignment:"center"}]}):[[{text:"No data available",colSpan:5,alignment:"center"}]];l.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:3},{},{},{text:p(n),style:"bodyBold",alignment:"center",colSpan:2},{}]);let o=0;const $=y.length>0?y.map(j=>{const oe=parseFloat(j.amount.replace(/[^0-9.-]+/g,""));return isNaN(oe)||(o+=oe),[{text:j.name,style:"body",alignment:"center"},{text:j.description,style:"body",alignment:"center"},{text:`${p(oe)}`,style:"body",alignment:"center"}]}):[[{text:"No data available",colSpan:3,alignment:"center"}]];$.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:2},{},{text:`${p(o)}`,style:"bodyBold",alignment:"center"}]);const T=c.bills.map((j,oe)=>{var _e,Q;return[{text:j.name,style:"body",alignment:"center"},{text:j.pcs,style:"body",alignment:"center"},{text:((_e=c.coins[oe])==null?void 0:_e.name)||"",style:"body",alignment:"center"},{text:((Q=c.coins[oe])==null?void 0:Q.pcs)||"0",style:"body",alignment:"center"}]});T.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:3,color:"#020617"},{},{},{text:`${p(u)}`,style:"bodyBold",alignment:"right",color:"#020617"}]);const O=V.map(({title:j,data:oe,columns:_e,totals:Q})=>({stack:[{text:j,style:"subheader",alignment:"center"},{table:{headerRows:1,widths:Array(_e.length).fill("*"),body:[_e.map(K=>({text:K.split(".").pop().replace(/_/g," ").replace(/\b\w/g,L=>L.toUpperCase()),style:"tableHeader",alignment:"center"})),...s(oe,_e,Q)]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]})),J=V.reduce((j,oe)=>{const _e=oe.data.reduce((Q,K)=>Q+(K.sales||0),0);return j+_e},0),ce=c.bills.reduce((j,oe)=>j+oe.value,0)+c.coins.reduce((j,oe)=>j+oe.value,0),Se=J-(o+n);let be=0,ie=0;ce>Se?be=ce-Se:ce<Se&&(ie=Se-ce);const we={table:{widths:["50%","50%"],body:[[{text:"Total Denomination",style:"tableHeader",alignment:"left"},{text:p(ce),style:"tableData",alignment:"center"}],[{text:"Total Product Sales Amount",style:"tableHeader",alignment:"left"},{text:p(J),style:"tableData",alignment:"center"}],[{text:"Total Expenses",style:"tableHeader",alignment:"left"},{text:p(o),style:"tableData",alignment:"center"}],[{text:"Total Credits",style:"tableHeader",alignment:"left"},{text:p(n),style:"tableData",alignment:"center"}],[{text:"Over Cash",style:"tableHeader",alignment:"left"},{text:p(be),style:"tableData",alignment:"center"}],[{text:"Charges",style:"tableHeader",alignment:"left"},{text:`${p(ie)}`,style:"tableData",alignment:"center"}]]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}};return{content:[{text:"Sales Report",style:"header",alignment:"center"},{columns:[{text:`Branch Name: ${m.branch.name}
          Cashier: ${_(m.user.employee)}
          Date: ${U(m.created_at)}
Time: ${i(m.created_at)}
`,margin:[0,0,0,10]},{}]},...O,{margin:[0,5,0,0],columns:[{width:"50%",stack:[{text:"Expenses Report",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","auto","*"],body:[[{text:"Expenses Name",style:"tableHeader",alignment:"center"},{text:"Description",style:"tableHeader",alignment:"center"},{text:"Amount",style:"tableHeader",alignment:"center"}],...$]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}},{text:"Credit Report",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*","auto","auto","auto"],body:[[{text:"Employee Name",style:"tableHeader",alignment:"center"},{text:"Product Name",style:"tableHeader",alignment:"center"},{text:"Pieces",style:"tableHeader",alignment:"center"},{text:"Price",style:"tableHeader",alignment:"center"},{text:"Amount",style:"tableHeader",alignment:"center"}],...l]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]},{width:"50%",stack:[{text:"Denomination Report",style:"subheader",alignment:"center"},{table:{headerRows:0,widths:["*","auto","*","auto"],body:[[{text:"Bills",style:"tableHeader",alignment:"center"},{text:"Pcs",style:"tableHeader",alignment:"center"},{text:"Coins",style:"tableHeader",alignment:"center"},{text:"Pcs",style:"tableHeader",alignment:"center"}],...T]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]}],columnGap:10},{},{canvas:[{type:"line",x1:0,y1:25,x2:580,y2:25,lineWidth:1,dash:{length:5,space:5},lineColor:"#000000",margin:[0,20,0,0]}]},{margin:[0,20,0,0],stack:[{text:"Summary",style:"subheader",alignment:"center"},we]}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableHeader:{bold:!0,fontSize:10,color:"black"},body:{fontSize:8}},pageMargins:[10,10,10,10]}},h=m=>{const S=r(m);Ze.exports.createPdf(S).getDataUrl(V=>{b.value=V,f.value=!0})};return(m,S)=>(k(),A(E,null,[e(H,{class:"my-card q-pa-md"},{default:t(()=>[e(N,null,{default:t(()=>[a("div",es,[(k(!0),A(E,null,fe(te(C),(V,y)=>(k(),A("div",{key:y},[e(H,{flat:"",dense:"",bordered:""},{default:t(()=>[e(N,null,{default:t(()=>[a("div",ts,[as,a("div",os,[e(I,{padding:"xs md",label:"Print",icon:"print",outline:"",class:"user-button",onClick:w=>h(V)},null,8,["onClick"]),a("div",null,[e(ve,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q(" Print Report ")]),_:1})])])]),a("div",ls,[a("div",null,"Name: "+x(_(V.user.employee)),1),a("div",null,"Date: "+x(U(V.created_at)),1),a("div",null,"Time: "+x(i(V.created_at)),1)])]),_:2},1024),a("div",ns,[e(Wl,{sales_Reports:[V]},null,8,["sales_Reports"]),e(un,{sales_Reports:[V]},null,8,["sales_Reports"]),e(Un,{sales_Reports:[V]},null,8,["sales_Reports"]),e(Xn,{sales_Reports:[V]},null,8,["sales_Reports"])])]),_:2},1024)]))),128))])]),_:1})]),_:1}),e(X,{modelValue:f.value,"onUpdate:modelValue":S[0]||(S[0]=V=>f.value=V),maximized:R.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[a("div",ss,[a("div",rs,[re((k(),F(I,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},{default:t(()=>[e(ve,null,{default:t(()=>[q("Close")]),_:1})]),_:1})),[[de]])]),a("div",null,[a("iframe",{src:b.value,width:"100%",height:"700px"},null,8,ds)])])]),_:1},8,["modelValue","maximized"])],64))}};var us=Z(is,[["__scopeId","data-v-dd80b502"]]);const cs={class:"text-h6"},ms={class:"row q-gutter-x-md"},ps={__name:"ProductionReportDialog",props:["reports","reportLabel"],emits:["selectReport","hide","ok","cancel"],setup(d,{emit:v}){const{dialogRef:C,onDialogHide:R,onDialogOK:f,onDialogCancel:b}=qe(),U=d;console.log("production report",U.reports);const i=U.reports.baker_reports,_=U.reports.sales_reports,p=U.reports.sales_reports_id;console.log("sales_report_id",p);const r=v,h=P("bakerReport"),m=P(!0),S=P(!1),V=w=>w?w.split(" ").map(g=>g.charAt(0).toUpperCase()+g.slice(1).toLowerCase()).join(" "):"",y=()=>{r("selectReport",U.reports),S.value=!0};return(w,g)=>(k(),F(X,{ref_key:"dialogRef",ref:C,modelValue:S.value,"onUpdate:modelValue":g[2]||(g[2]=u=>S.value=u),onHide:te(R),onOk:y,onCancel:te(b),maximized:m.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(H,{style:{"background-color":"#f7f8fc"}},{default:t(()=>[e(N,{class:"row items-center text-white",style:{"background-color":"#595a5a"}},{default:t(()=>[a("div",cs,x(`${V(d.reports.branch_name)} ( ${d.reportLabel} Reports)`),1),e(Ue),a("div",ms,[a("div",null,[re((k(),F(I,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(ve,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[q("Close")]),_:1})]),_:1})),[[de]])])])]),_:1}),e(N,null,{default:t(()=>[a("div",null,[e(Ke,{modelValue:h.value,"onUpdate:modelValue":g[0]||(g[0]=u=>h.value=u),align:"justify","narrow-indicator":"",class:"q-mb-lg"},{default:t(()=>[e(ke,{class:"text-purple",name:"bakerReport",label:"Baker Reports"}),e(ke,{class:"text-orange",name:"salesReport",label:"Sales Report"})]),_:1},8,["modelValue"])]),a("div",null,[e(Ye,{modelValue:h.value,"onUpdate:modelValue":g[1]||(g[1]=u=>h.value=u),animated:"","transition-prev":"scale","transition-next":"scale",style:{"background-color":"#f7f8fc"}},{default:t(()=>[e(xe,{name:"bakerReport"},{default:t(()=>[e(eo,{bakersReport:te(i),sales_report_id:te(p)},null,8,["bakersReport","sales_report_id"])]),_:1}),e(xe,{name:"salesReport"},{default:t(()=>[e(us,{salesReport:te(_)},null,8,["salesReport"])]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide","onCancel","maximized"]))}};var _s=Z(ps,[["__scopeId","data-v-0a776a06"]]);const gs=d=>(le("data-v-12387bc6"),d=d(),ne(),d),fs={key:0,class:"spinner-wrapper"},vs={key:1},ys={key:0,class:"data-error"},hs=gs(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),bs={class:"row justify-center q-gutter-x-md"},ws={__name:"ProductionTable",setup(d){const v=Ve();P("bakerReport");const C=v.params.branch_id;P(!1),P(!0),P(""),P("");const R=P({rowsPerPage:0}),f=Je(),b=P(""),U=z(()=>f.productions);P(!0);const i=P(!0),_=P(!1),p=z(()=>b.value?U.value.filter(y=>y.name.toLowerCase().includes(b.value.toLowerCase())):U.value);Ne(async()=>{C&&await r(C)});const r=async y=>{try{i.value=!0;const w=await f.fetchBranchProductions(y);console.log("Fetched data:",w),console.log("Production rows:",U.value),U.value.length||(_.value=!0)}catch{_.value=!0}finally{i.value=!1}};he(b,async y=>{i.value=!0,await new Promise(w=>setTimeout(w,1e3)),i.value=!1,_.value=p.value.length===0});const m=[{name:"reportDate",align:"center",label:"Date",field:"date",format:y=>$e.formatDate(y,"MMMM DD, YYYY")},{name:"reports",align:"center",label:"Reports",field:"reports"}],S=Be(),V=(y,w)=>{S.dialog({component:_s,componentProps:{reports:y,reportLabel:w}})};return(y,w)=>(k(),A(E,null,[a("div",null,[e(D,{modelValue:b.value,"onUpdate:modelValue":w[0]||(w[0]=g=>b.value=g),class:"q-pb-lg q-pl-md",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100",style:{width:"500px","max-width":"1500px","min-width":"100px"}},{append:t(()=>[e(ae,{name:"search"})]),_:1},8,["modelValue"])]),i.value?(k(),A("div",fs,[e(at,{size:"50px",color:"primary"})])):(k(),A("div",vs,[p.value.length===0?(k(),A("div",ys,[e(ae,{name:"warning",color:"warning",size:"4em"}),hs])):(k(),F(Ce,{key:1,class:"table-container sticky-header",filter:b.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"400px"},columns:m,rows:p.value,"row-key":"reportDate","virtual-scroll":"",pagination:R.value,"onUpdate:pagination":w[1]||(w[1]=g=>R.value=g),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-reports":t(g=>[e(G,{props:g},{default:t(()=>[a("div",bs,[e(I,{padding:"xs lg",rounded:"",dense:"",size:"sm",color:"light-blue-5","text-color":"white",onClick:u=>V(g.row.AM,"AM")},{default:t(()=>[q("AM")]),_:2},1032,["onClick"]),e(I,{padding:"xs lg",rounded:"",dense:"",size:"sm",color:"deep-orange","text-color":"white",onClick:u=>V(g.row.PM,"PM")},{default:t(()=>[q("PM")]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var ks=Z(ws,[["__scopeId","data-v-12387bc6"]]);const xs={__name:"ProductionPage",setup(d){return(v,C)=>(k(),A("div",null,[e(ks)]))}},$s={class:"row justify-between"},Vs=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),Cs=a("div",{class:"text-h6"},"Decline Report",-1),Rs={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){const v=je(),C=P(""),R=P(!1),f=P(!1),b=P({rowsPerPage:0}),U=Be(),i=d,_=()=>{f.value=!0},p=()=>{R.value=!0},r=async()=>{if(!C.value){U.notify({type:"negative",message:"Remark is required"});return}try{const y=await v.declineReport(i.report.id,C.value);console.log("Report declined:",y),U.notify({type:"negative",message:"Report declined successfully"}),R.value=!1,f.value=!1,C.value=""}catch(y){console.error("Error declining report:",y),U.notify({type:"negative",message:"Failed to decline report"})}},h=async()=>{try{const y=await v.confirmReport(i.report.id);console.log("Report confirmed:",y),U.notify({type:"positive",message:"Report confirmed successfully"}),f.value=!1}catch(y){console.error(y)}},m=z(()=>i.report.selecta_added_stocks||[]),S=y=>{const w=s=>s?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():"",g=y.firstname?w(y.firstname):"No Firstname",u=y.middlename?w(y.middlename).charAt(0)+".":"",c=y.lastname?w(y.lastname):"No Lastname";return`${g} ${u} ${c}`},V=[{name:"product_name",label:"Product Name",field:y=>y.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:y=>y.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:y=>y.added_stocks?`${y.added_stocks} pcs`:"N/A"}];return(y,w)=>(k(),A(E,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:_})]),e(X,{modelValue:f.value,"onUpdate:modelValue":w[2]||(w[2]=g=>f.value=g)},{default:t(()=>[e(H,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",$s,[Vs,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:w[0]||(w[0]=g=>f.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+x(S(d.report.employee)),1),a("div",null," Branch: "+x(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ye,{color:"yellow",outlined:""},{default:t(()=>[q(x(d.report.status),1)]),_:1})])]),_:1}),e(N,null,{default:t(()=>[e(Ce,{rows:m.value,columns:V,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:b.value,"onUpdate:pagination":w[1]||(w[1]=g=>b.value=g),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e(N,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(I,{color:"negative",label:"Decline",class:"action-btn",onClick:p}),e(I,{color:"positive",label:"Confirm",class:"action-btn",onClick:h})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(X,{modelValue:R.value,"onUpdate:modelValue":w[4]||(w[4]=g=>R.value=g)},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[Cs]),_:1}),e(N,null,{default:t(()=>[e(D,{modelValue:C.value,"onUpdate:modelValue":w[3]||(w[3]=g=>C.value=g),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[g=>!!g||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(Me,{align:"right"},{default:t(()=>[re(e(I,{flat:"",label:"Cancel",color:"primary"},null,512),[[de]]),e(I,{flat:"",label:"Confirm",color:"negative",onClick:r})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Ss=d=>(le("data-v-08e549d4"),d=d(),ne(),d),Ps={class:"q-gutter-md q-ma-md"},Us={class:"row justify-between"},Ns={class:"text-subtitle1"},qs={class:"text-subtitle1"},Ds={class:"text-subtitle1"},As={key:1,class:"data-error"},Is=Ss(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ts={__name:"TransactionPendingCard",setup(d){const v=Ve(),C=je(),R=z(()=>C.pendingSelectaReports),f=v.params.branch_id,b=P("pending"),U=async()=>{try{const r=await C.fetchPendingSelectaStocks(f,b.value);console.log(R.value)}catch(r){console.error("Error fetching pending stocks:",r)}};Ne(async()=>{f&&await U()});const i=r=>$e.formatDate(r,"MMMM D, YYYY"),_=r=>$e.formatDate(r,"hh:mm A"),p=r=>{const h=y=>y?y.charAt(0).toUpperCase()+y.slice(1).toLowerCase():"",m=r.firstname?h(r.firstname):"No Firstname",S=r.middlename?h(r.middlename).charAt(0)+".":"",V=r.lastname?h(r.lastname):"No Lastname";return`${m} ${S} ${V}`};return(r,h)=>(k(),A("div",null,[e(He,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Ps,[R.value.length?(k(!0),A(E,{key:0},fe(R.value,(m,S)=>(k(),F(H,{key:S},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Us,[a("div",Ns,x(i(m.created_at)),1),a("div",qs,x(_(m.created_at)),1),a("div",Ds,x(m.branch.name)+" - "+x(p(m.employee)),1),a("div",null,[e(ye,{color:"yellow",outlined:""},{default:t(()=>[q(" Pending ")]),_:1})]),a("div",null,[e(Rs,{report:m},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(k(),A("div",As,[e(ae,{name:"warning",color:"warning",size:"4em"}),Is]))])]),_:1})]))}};var Bs=Z(Ts,[["__scopeId","data-v-08e549d4"]]);const Fs={class:"row justify-between"},zs=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),Ls={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){je(),P(!1);const v=P(!1),C=()=>{v.value=!0};Be();const R=d,f=z(()=>(console.log("Filtered rows:",R.report||[]),R.report.selecta_added_stocks||[])),b=i=>{const _=m=>m?m.charAt(0).toUpperCase()+m.slice(1).toLowerCase():"",p=i.firstname?_(i.firstname):"No Firstname",r=i.middlename?_(i.middlename).charAt(0)+".":"",h=i.lastname?_(i.lastname):"No Lastname";return`${p} ${r} ${h}`},U=[{name:"product_name",label:"Product Name",field:i=>(console.log("Row data:",i),i.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:i=>(console.log("Row data:",i),i.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:i=>i.added_stocks?`${i.added_stocks} pcs`:"N/A"}];return(i,_)=>(k(),A(E,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:C})]),e(X,{modelValue:v.value,"onUpdate:modelValue":_[2]||(_[2]=p=>v.value=p)},{default:t(()=>[e(H,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Fs,[zs,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=p=>v.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+x(b(d.report.employee)),1),a("div",null," Branch: "+x(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ye,{color:"green",outlined:""},{default:t(()=>[q(x(d.report.status),1)]),_:1})])]),_:1}),e(N,null,{default:t(()=>[e(Ce,{rows:f.value,columns:U,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:i.pagination,"onUpdate:pagination":_[1]||(_[1]=p=>i.pagination=p),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Os=d=>(le("data-v-c1019cbc"),d=d(),ne(),d),Ms={class:"q-gutter-md q-ma-md"},Hs={class:"row justify-between"},js={class:"text-subtitle1"},Qs={class:"text-subtitle1"},Es={class:"text-subtitle1"},Ks={key:1,class:"data-error"},Ys=Os(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Gs={__name:"TransactionConfirmedCard",setup(d){const v=Ve(),C=je(),R=z(()=>C.confirmedSelectaReports),f=v.params.branch_id,b=P("confirmed"),U=async()=>{try{const r=await C.fetchConfirmedSelectaStocks(f,b.value);console.log(R.value)}catch(r){console.error("Error fetching confirmed stocks:",r)}};Ne(async()=>{f&&await U()});const i=r=>$e.formatDate(r,"MMMM D, YYYY"),_=r=>$e.formatDate(r,"hh:mm A"),p=r=>{const h=y=>y?y.charAt(0).toUpperCase()+y.slice(1).toLowerCase():"",m=r.firstname?h(r.firstname):"No Firstname",S=r.middlename?h(r.middlename).charAt(0)+".":"",V=r.lastname?h(r.lastname):"No Lastname";return`${m} ${S} ${V}`};return(r,h)=>(k(),A("div",null,[e(He,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Ms,[R.value.length?(k(!0),A(E,{key:0},fe(R.value,(m,S)=>(k(),F(H,{key:S},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Hs,[a("div",js,x(i(m.created_at)),1),a("div",Qs,x(_(m.created_at)),1),a("div",Es,x(m.branch.name)+" - "+x(p(m.employee)),1),a("div",null,[e(ye,{color:"green",outlined:""},{default:t(()=>[q(x(m.status),1)]),_:2},1024)]),a("div",null,[e(Ls,{report:m},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(k(),A("div",Ks,[e(ae,{name:"warning",color:"warning",size:"4em"}),Ys]))])]),_:1})]))}};var Ws=Z(Gs,[["__scopeId","data-v-c1019cbc"]]);const Js={class:"row justify-between"},Xs=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),Zs={class:"q-mt-md"},er={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){je(),P(!1);const v=P(!1),C=()=>{v.value=!0},R=d,f=z(()=>(console.log("Filtered rows:",R.report||[]),R.report.selecta_added_stocks||[])),b=i=>{const _=m=>m?m.charAt(0).toUpperCase()+m.slice(1).toLowerCase():"",p=i.firstname?_(i.firstname):"No Firstname",r=i.middlename?_(i.middlename).charAt(0)+".":"",h=i.lastname?_(i.lastname):"No Lastname";return`${p} ${r} ${h}`},U=[{name:"product_name",label:"Product Name",field:i=>(console.log("Row data:",i),i.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:i=>(console.log("Row data:",i),i.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:i=>i.added_stocks?`${i.added_stocks} pcs`:"N/A"}];return(i,_)=>(k(),A(E,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:C})]),e(X,{modelValue:v.value,"onUpdate:modelValue":_[2]||(_[2]=p=>v.value=p)},{default:t(()=>[e(H,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Js,[Xs,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=p=>v.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+x(b(d.report.employee)),1),a("div",null," Branch: "+x(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ye,{color:"red",outlined:""},{default:t(()=>[q(x(d.report.status),1)]),_:1})]),a("div",Zs,"Remark: "+x(d.report.remark),1)]),_:1}),e(N,null,{default:t(()=>[e(Ce,{rows:f.value,columns:U,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:i.pagination,"onUpdate:pagination":_[1]||(_[1]=p=>i.pagination=p),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const tr=d=>(le("data-v-6b801095"),d=d(),ne(),d),ar={class:"q-gutter-md q-ma-md"},or={class:"row justify-between"},lr={class:"text-subtitle1"},nr={class:"text-subtitle1"},sr={class:"text-subtitle1"},rr={key:1,class:"data-error"},dr=tr(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),ir={__name:"TransactionDeclinedCard",setup(d){const v=Ve(),C=je(),R=z(()=>C.declinedSelectaReports),f=v.params.branch_id,b=P("declined"),U=async()=>{try{const r=await C.fetchDeclinedSelectaStocks(f,b.value);console.log("selectedProductsDeclined",R.value)}catch(r){console.error("Error fetching decline stocks:",r)}};Ne(async()=>{f&&await U()});const i=r=>$e.formatDate(r,"MMMM D, YYYY"),_=r=>$e.formatDate(r,"hh:mm A"),p=r=>{const h=y=>y?y.charAt(0).toUpperCase()+y.slice(1).toLowerCase():"",m=r.firstname?h(r.firstname):"No Firstname",S=r.middlename?h(r.middlename).charAt(0)+".":"",V=r.lastname?h(r.lastname):"No Lastname";return`${m} ${S} ${V}`};return(r,h)=>(k(),A("div",null,[e(He,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",ar,[R.value.length?(k(!0),A(E,{key:0},fe(R.value,(m,S)=>(k(),F(H,{key:S},{default:t(()=>[e(N,null,{default:t(()=>[a("div",or,[a("div",lr,x(i(m.created_at)),1),a("div",nr,x(_(m.created_at)),1),a("div",sr,x(m.branch.name)+" - "+x(p(m.employee)),1),a("div",null,[e(ye,{color:"red",outlined:""},{default:t(()=>[q(x(m.status),1)]),_:2},1024)]),a("div",null,[e(er,{report:m},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(k(),A("div",rr,[e(ae,{name:"warning",color:"warning",size:"4em"}),dr]))])]),_:1})]))}};var ur=Z(ir,[["__scopeId","data-v-6b801095"]]);const cr={class:"q-gutter-y-sm"},mr={__name:"SelectaTransactionPage",setup(d){const v=P("pendingReports"),C=z(()=>{switch(v.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return(R,f)=>(k(),A(E,null,[a("div",cr,[e(Ke,{modelValue:v.value,"onUpdate:modelValue":f[0]||(f[0]=b=>v.value=b),"indicator-color":C.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(ke,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(ke,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(ke,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Ye,{modelValue:v.value,"onUpdate:modelValue":f[1]||(f[1]=b=>v.value=b),animated:""},{default:t(()=>[e(xe,{name:"pendingReports"},{default:t(()=>[e(Bs)]),_:1}),e(xe,{name:"confirmReports"},{default:t(()=>[e(Ws)]),_:1}),e(xe,{name:"declineReports"},{default:t(()=>[e(ur)]),_:1})]),_:1},8,["modelValue"])],64))}};var pr=Z(mr,[["__scopeId","data-v-6cbd59c6"]]);const _r={class:"row justify-between"},gr=a("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),fr=a("div",{class:"text-h6"},"Decline Report",-1),vr={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){const v=We(),C=P(""),R=P(!1),f=P(!1),b=P({rowPerPage:0}),U=Be(),i=d,_=()=>{f.value=!0},p=()=>{R.value=!0},r=async()=>{if(!C.value){U.notify({type:"negative",message:"Remark is required"});return}try{const y=await v.declineReport(i.report.id,C.value);console.log("Report declined:",y),U.notify({type:"negative",message:"Report declined successfully"}),R.value=!1,f.value=!1,C.value=""}catch(y){console.error("Error declining report:",y),U.notify({type:"negative",message:"Failed to decline report"})}},h=async()=>{try{const y=await v.confirmReport(i.report.id);console.log("Report confirmed:",y),U.notify({type:"positive",message:"Report confirmed successfully"}),f.value=!1}catch(y){console.error(y)}},m=z(()=>i.report.softdrinks_added_stocks||[]),S=y=>{const w=s=>s?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():"",g=y.firstname?w(y.firstname):"No Firstname",u=y.middlename?w(y.middlename).charAt(0)+".":"",c=y.lastname?w(y.lastname):"No Lastname";return`${g} ${u} ${c}`},V=[{name:"product_name",label:"Product Name",field:y=>y.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:y=>y.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:y=>y.added_stocks?`${y.added_stocks} pcs`:"N/A"}];return(y,w)=>(k(),A("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:_}),e(X,{modelValue:f.value,"onUpdate:modelValue":w[2]||(w[2]=g=>f.value=g)},{default:t(()=>[e(H,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",_r,[gr,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:w[0]||(w[0]=g=>f.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+x(S(d.report.employee)),1),a("div",null," Branch: "+x(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ye,{color:"yellow",outlined:""},{default:t(()=>[q(x(d.report.status),1)]),_:1})])]),_:1}),e(N,null,{default:t(()=>[e(Ce,{rows:m.value,columns:V,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:b.value,"onUpdate:pagination":w[1]||(w[1]=g=>b.value=g),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e(N,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(I,{color:"negative",label:"Decline",class:"action-btn",onClick:p}),e(I,{color:"positive",label:"Confirm",class:"action-btn",onClick:h})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(X,{modelValue:R.value,"onUpdate:modelValue":w[4]||(w[4]=g=>R.value=g)},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[fr]),_:1}),e(N,null,{default:t(()=>[e(D,{modelValue:C.value,"onUpdate:modelValue":w[3]||(w[3]=g=>C.value=g),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[g=>!!g||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(Me,{align:"right"},{default:t(()=>[re(e(I,{flat:"",label:"Cancel",color:"primary"},null,512),[[de]]),e(I,{flat:"",label:"Confirm",color:"negative",onClick:r})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};const yr=d=>(le("data-v-7ba0107e"),d=d(),ne(),d),hr={class:"q-gutter-md q-ma-md"},br={class:"row justify-between"},wr={class:"text-subtitle1"},kr={class:"text-subtitle1"},xr={class:"text-subtitle1"},$r={key:1,class:"data-error"},Vr=yr(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Cr={__name:"TransactionPendingCard",setup(d){const v=Ve(),C=We(),R=z(()=>C.pendingSoftdrinksReports),f=v.params.branch_id,b=P("pending"),U=async()=>{try{const r=await C.fetchPendingSoftdrinksStocks(f,b.value);console.log(R.value)}catch(r){console.error("Error fetching pending stocks:",r)}};Ne(async()=>{f&&await U()});const i=r=>$e.formatDate(r,"MMMM D, YYYY"),_=r=>$e.formatDate(r,"hh:mm A"),p=r=>{const h=y=>y?y.charAt(0).toUpperCase()+y.slice(1).toLowerCase():"",m=r.firstname?h(r.firstname):"No Firstname",S=r.middlename?h(r.middlename).charAt(0)+".":"",V=r.lastname?h(r.lastname):"No Lastname";return`${m} ${S} ${V}`};return(r,h)=>(k(),A("div",null,[e(He,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",hr,[R.value.length?(k(!0),A(E,{key:0},fe(R.value,(m,S)=>(k(),F(H,{key:S},{default:t(()=>[e(N,null,{default:t(()=>[a("div",br,[a("div",wr,x(i(m.created_at)),1),a("div",kr,x(_(m.created_at)),1),a("div",xr,x(m.branch.name)+" - "+x(p(m.employee)),1),a("div",null,[e(ye,{color:"yellow",outlined:""},{default:t(()=>[q(" Pending ")]),_:1})]),a("div",null,[e(vr,{report:m},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(k(),A("div",$r,[e(ae,{name:"warning",color:"warning",size:"4em"}),Vr]))])]),_:1})]))}};var Rr=Z(Cr,[["__scopeId","data-v-7ba0107e"]]);const Sr={class:"row justify-between"},Pr=a("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),Ur={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){We(),P(!1);const v=P(!1),C=()=>{v.value=!0},R=d,f=z(()=>(console.log("Filtered rows:",R.report||[]),R.report.softdrinks_added_stocks||[])),b=i=>{const _=m=>m?m.charAt(0).toUpperCase()+m.slice(1).toLowerCase():"",p=i.firstname?_(i.firstname):"No Firstname",r=i.middlename?_(i.middlename).charAt(0)+".":"",h=i.lastname?_(i.lastname):"No Lastname";return`${p} ${r} ${h}`},U=[{name:"product_name",label:"Product Name",field:i=>(console.log("Row data:",i),i.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:i=>(console.log("Row data:",i),i.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:i=>i.added_stocks?`${i.added_stocks} pcs`:"N/A"}];return(i,_)=>(k(),A(E,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:C})]),e(X,{modelValue:v.value,"onUpdate:modelValue":_[2]||(_[2]=p=>v.value=p)},{default:t(()=>[e(H,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Sr,[Pr,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=p=>v.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+x(b(d.report.employee)),1),a("div",null," Branch: "+x(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ye,{color:"green",outlined:""},{default:t(()=>[q(x(d.report.status),1)]),_:1})])]),_:1}),e(N,null,{default:t(()=>[e(Ce,{rows:f.value,columns:U,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:i.pagination,"onUpdate:pagination":_[1]||(_[1]=p=>i.pagination=p),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Nr=d=>(le("data-v-2b1290c8"),d=d(),ne(),d),qr={class:"q-gutter-md q-ma-md"},Dr={class:"row justify-between"},Ar={class:"text-subtitle1"},Ir={class:"text-subtitle1"},Tr={class:"text-subtitle1"},Br={key:1,class:"data-error"},Fr=Nr(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),zr={__name:"TransactionConfirmedCard",setup(d){const v=Ve(),C=We(),R=z(()=>C.confirmedSoftdrinksReports),f=v.params.branch_id,b=P("confirmed"),U=async()=>{try{const r=await C.fetchConfirmedSoftdrinksStocks(f,b.value);console.log(R.value)}catch(r){console.error("Error fetching confirmed stocks",r)}};Ne(async()=>{f&&await U()});const i=r=>$e.formatDate(r,"MMMM D, YYYY"),_=r=>$e.formatDate(r,"hh:mm A"),p=r=>{const h=y=>y?y.charAt(0).toUpperCase()+y.slice(1).toLowerCase():"",m=r.firstname?h(r.firstname):"No Firstname",S=r.middlename?h(r.middlename).charAt(0)+".":"",V=r.lastname?h(r.lastname):"No Lastname";return`${m} ${S} ${V}`};return(r,h)=>(k(),A("div",null,[e(He,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",qr,[R.value.length?(k(!0),A(E,{key:0},fe(R.value,(m,S)=>(k(),F(H,{key:S},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Dr,[a("div",Ar,x(i(m.created_at)),1),a("div",Ir,x(_(m.created_at)),1),a("div",Tr,x(m.branch.name)+" - "+x(p(m.employee)),1),a("div",null,[e(ye,{color:"green",outlined:""},{default:t(()=>[q(x(m.status),1)]),_:2},1024)]),a("div",null,[e(Ur,{report:m},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(k(),A("div",Br,[e(ae,{name:"warning",color:"warning",size:"4em"}),Fr]))])]),_:1})]))}};var Lr=Z(zr,[["__scopeId","data-v-2b1290c8"]]);const Or={class:"row justify-between"},Mr=a("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),Hr={class:"q-mt-md"},jr={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){We();const v=P(!1),C=()=>{v.value=!0},R=d,f=z(()=>(console.log("Filtered rows:",R.report||[]),R.report.softdrinks_added_stocks)),b=i=>{const _=m=>m?m.charAt(0).toUpperCase()+m.slice(1).toLowerCase():"",p=i.firstname?_(i.firstname):"No Firstname",r=i.middlename?_(i.middlename).charAt(0)+".":"",h=i.lastname?_(i.lastname):"No Lastname";return`${p} ${r} ${h}`},U=[{name:"product_name",label:"Product Name",field:i=>(console.log("Row data:",i),i.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:i=>(console.log("Row data:",i),i.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:i=>i.added_stocks?`${i.added_stocks} pcs`:"N/A"}];return(i,_)=>(k(),A(E,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:C})]),e(X,{modelValue:v.value,"onUpdate:modelValue":_[2]||(_[2]=p=>v.value=p)},{default:t(()=>[e(H,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Or,[Mr,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=p=>v.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+x(b(d.report.employee)),1),a("div",null," Branch: "+x(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ye,{color:"red",outlined:""},{default:t(()=>[q(x(d.report.status),1)]),_:1})]),a("div",Hr,"Remark: "+x(d.report.remark),1)]),_:1}),e(N,null,{default:t(()=>[e(Ce,{rows:f.value,columns:U,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:i.pagination,"onUpdate:pagination":_[1]||(_[1]=p=>i.pagination=p),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Qr=d=>(le("data-v-51a1abe5"),d=d(),ne(),d),Er={class:"q-gutter-md q-ma-md"},Kr={class:"row justify-between"},Yr={class:"text-subtitle1"},Gr={class:"text-subtitle1"},Wr={class:"text-subtitle1"},Jr={key:1,class:"data-error"},Xr=Qr(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Zr={__name:"TransactionDeclinedCard",setup(d){const v=Ve(),C=We(),R=z(()=>C.declinedSoftdrinksReports),f=v.params.branch_id,b=P("declined"),U=async()=>{try{const r=await C.fetchDeclinedSoftdrinksStocks(f,b.value);console.log("softdrinksProductsDeclined",R.value)}catch(r){console.error("Error fetching decline stocks:",r)}};Ne(async()=>{f&&await U()});const i=r=>$e.formatDate(r,"MMMM D, YYYY"),_=r=>$e.formatDate(r,"hh:mm A"),p=r=>{const h=y=>y?y.charAt(0).toUpperCase()+y.slice(1).toLowerCase():"",m=r.firstname?h(r.firstname):"No Firstname",S=r.middlename?h(r.middlename).charAt(0)+".":"",V=r.lastname?h(r.lastname):"No Lastname";return`${m} ${S} ${V}`};return(r,h)=>(k(),F(He,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Er,[R.value.length?(k(!0),A(E,{key:0},fe(R.value,(m,S)=>(k(),F(H,{key:S},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Kr,[a("div",Yr,x(i(m.created_at)),1),a("div",Gr,x(_(m.created_at)),1),a("div",Wr,x(m.branch.name)+" - "+x(p(m.employee)),1),a("div",null,[e(ye,{color:"red",outlined:""},{default:t(()=>[q(x(m.status),1)]),_:2},1024)]),a("div",null,[e(jr,{report:m},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(k(),A("div",Jr,[e(ae,{name:"warning",color:"warning",size:"4em"}),Xr]))])]),_:1}))}};var ed=Z(Zr,[["__scopeId","data-v-51a1abe5"]]);const td={class:"q-gutter-y-sm"},ad={__name:"SoftdrinksTransactionPage",setup(d){const v=P("pendingReports"),C=z(()=>{switch(v.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return(R,f)=>(k(),A(E,null,[a("div",td,[e(Ke,{modelValue:v.value,"onUpdate:modelValue":f[0]||(f[0]=b=>v.value=b),"indicator-color":C.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(ke,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(ke,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(ke,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Ye,{modelValue:v.value,"onUpdate:modelValue":f[1]||(f[1]=b=>v.value=b),animated:""},{default:t(()=>[e(xe,{name:"pendingReports"},{default:t(()=>[e(Rr)]),_:1}),e(xe,{name:"confirmReports"},{default:t(()=>[e(Lr)]),_:1}),e(xe,{name:"declineReports"},{default:t(()=>[e(ed)]),_:1})]),_:1},8,["modelValue"])],64))}};var od=Z(ad,[["__scopeId","data-v-368f5ccc"]]);const ld={class:"row justify-between"},nd=a("div",{class:"text-h6"},"Other Product Added Stocks Report",-1),sd=a("div",{class:"text-h6"},"Decline Report",-1),rd={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){const v=ot(),C=P(""),R=P(!1),f=P(!1),b=P({rowsPerPage:0}),U=()=>{f.value=!0},i=()=>{R.value=!0},_=d,p=async()=>{if(!C.value){ue.create({type:"negative",message:"Remark is required"});return}try{const V=await v.declineReport(_.report.id,C.value);console.log("Report declined:",V),ue.create({type:"negative",message:"Report declined successfully"}),R.value=!1,f.value=!1,C.value=""}catch(V){console.error("Error declining report:",V),ue.create({type:"negative",message:"Failed to decline report"})}},r=async()=>{try{const V=await v.confirmReport(_.report.id);console.log("Report confirmed:",V),ue.create({type:"positive",message:"Report confirmed successfully"}),f.value=!1}catch(V){console.error(V)}},h=z(()=>_.report.other_added_stock||[]),m=[{name:"product_name",label:"Product Name",field:V=>V.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:V=>V.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:V=>V.added_stocks?`${V.added_stocks} pcs`:"N/A"}],S=V=>{const y=c=>c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():"",w=V.firstname?y(V.firstname):"No Firstname",g=V.middlename?y(V.middlename).charAt(0)+".":"",u=V.lastname?y(V.lastname):"No Lastname";return`${w} ${g} ${u}`};return(V,y)=>(k(),A(E,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:U})]),e(X,{modelValue:f.value,"onUpdate:modelValue":y[2]||(y[2]=w=>f.value=w)},{default:t(()=>[e(H,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",ld,[nd,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:y[0]||(y[0]=w=>f.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+x(S(d.report.employee)),1),a("div",null," Branch: "+x(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ye,{color:"yellow",outlined:""},{default:t(()=>[q(x(d.report.status),1)]),_:1})])]),_:1}),e(N,null,{default:t(()=>[e(Ce,{rows:h.value,columns:m,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:b.value,"onUpdate:pagination":y[1]||(y[1]=w=>b.value=w),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e(N,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(I,{color:"negative",label:"Decline",class:"action-btn",onClick:i}),e(I,{color:"positive",label:"Confirm",class:"action-btn",onClick:r})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(X,{modelValue:R.value,"onUpdate:modelValue":y[4]||(y[4]=w=>R.value=w)},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[sd]),_:1}),e(N,null,{default:t(()=>[e(D,{modelValue:C.value,"onUpdate:modelValue":y[3]||(y[3]=w=>C.value=w),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[w=>!!w||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(Me,{align:"right"},{default:t(()=>[re(e(I,{flat:"",label:"Cancel",color:"primary"},null,512),[[de]]),e(I,{flat:"",label:"Confirm",color:"negative",onClick:p})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const dd=d=>(le("data-v-355e3e60"),d=d(),ne(),d),id={class:"q-gutter-md q-ma-md"},ud={key:0},cd={class:"row justify-between"},md={class:"text-subtitle1"},pd={class:"text-subtitle1"},_d={class:"text-subtitle1"},gd={key:1,class:"data-error"},fd=dd(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),vd={__name:"TransactionPendingCard",setup(d){const v=Ve(),C=ot(),R=z(()=>C.pendingOtherReports),f=v.params.branch_id,b=P("pending"),U=async()=>{try{const r=await C.fetchPendingOtherStocks(f,b.value);console.log(R.value)}catch(r){console.error("Error fetching pending stocks:",r)}};Ne(async()=>{f&&await U()});const i=r=>$e.formatDate(r,"MMMM D, YYYY"),_=r=>$e.formatDate(r,"hh:mm A"),p=r=>{const h=y=>y?y.charAt(0).toUpperCase()+y.slice(1).toLowerCase():"",m=r.firstname?h(r.firstname):"No Firstname",S=r.middlename?h(r.middlename).charAt(0)+".":"",V=r.lastname?h(r.lastname):"No Lastname";return`${m} ${S} ${V}`};return(r,h)=>(k(),A("div",null,[e(He,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",id,[R.value.length?(k(),A("div",ud,[(k(!0),A(E,null,fe(R.value,(m,S)=>(k(),F(H,{key:S},{default:t(()=>[e(N,null,{default:t(()=>[a("div",cd,[a("div",md,x(i(m.created_at)),1),a("div",pd,x(_(m.created_at)),1),a("div",_d,x(m.branch.name)+" - "+x(p(m.employee)),1),a("div",null,[e(ye,{color:"yellow",outlined:""},{default:t(()=>[q(" Pending ")]),_:1})]),a("div",null,[e(rd,{report:m},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128))])):(k(),A("div",gd,[e(ae,{name:"warning",color:"warning",size:"4em"}),fd]))])]),_:1})]))}};var yd=Z(vd,[["__scopeId","data-v-355e3e60"]]);const hd={class:"row justify-between"},bd=a("div",{class:"text-h6"},"Other Added Stocks Report",-1),wd={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){je(),P(!1);const v=P(!1),C=()=>{v.value=!0};Be();const R=d,f=z(()=>(console.log("Filtered rows:",R.report||[]),R.report.other_added_stock||[])),b=i=>{const _=m=>m?m.charAt(0).toUpperCase()+m.slice(1).toLowerCase():"",p=i.firstname?_(i.firstname):"No Firstname",r=i.middlename?_(i.middlename).charAt(0)+".":"",h=i.lastname?_(i.lastname):"No Lastname";return`${p} ${r} ${h}`},U=[{name:"product_name",label:"Product Name",field:i=>(console.log("Row data:",i),i.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:i=>(console.log("Row data:",i),i.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:i=>i.added_stocks?`${i.added_stocks} pcs`:"N/A"}];return(i,_)=>(k(),A(E,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:C})]),e(X,{modelValue:v.value,"onUpdate:modelValue":_[2]||(_[2]=p=>v.value=p)},{default:t(()=>[e(H,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",hd,[bd,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=p=>v.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+x(b(d.report.employee)),1),a("div",null," Branch: "+x(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ye,{color:"green",outlined:""},{default:t(()=>[q(x(d.report.status),1)]),_:1})])]),_:1}),e(N,null,{default:t(()=>[e(Ce,{rows:f.value,columns:U,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:i.pagination,"onUpdate:pagination":_[1]||(_[1]=p=>i.pagination=p),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const kd=d=>(le("data-v-5b0a7351"),d=d(),ne(),d),xd={class:"q-gutter-md q-ma-md"},$d={class:"row justify-between"},Vd={class:"text-subtitle1"},Cd={class:"text-subtitle1"},Rd={class:"text-subtitle1"},Sd={key:1,class:"data-error"},Pd=kd(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ud={__name:"TransactionConfirmedCard",setup(d){const v=Ve(),C=ot(),R=z(()=>C.confirmedOtherReports),f=v.params.branch_id,b=P("confirmed"),U=async()=>{try{const r=await C.fetchConfirmedOtherStocks(f,b.value);console.log(R.value)}catch(r){console.error("Error fetching confirmed stocks:",r)}};Ne(async()=>{f&&await U()});const i=r=>$e.formatDate(r,"MMMM D, YYYY"),_=r=>$e.formatDate(r,"hh:mm A"),p=r=>{const h=y=>y?y.charAt(0).toUpperCase()+y.slice(1).toLowerCase():"",m=r.firstname?h(r.firstname):"No Firstname",S=r.middlename?h(r.middlename).charAt(0)+".":"",V=r.lastname?h(r.lastname):"No Lastname";return`${m} ${S} ${V}`};return(r,h)=>(k(),A("div",null,[e(He,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",xd,[R.value.length?(k(!0),A(E,{key:0},fe(R.value,(m,S)=>(k(),F(H,{key:S},{default:t(()=>[e(N,null,{default:t(()=>[a("div",$d,[a("div",Vd,x(i(m.created_at)),1),a("div",Cd,x(_(m.created_at)),1),a("div",Rd,x(m.branch.name)+" - "+x(p(m.employee)),1),a("div",null,[e(ye,{color:"green",outlined:""},{default:t(()=>[q(x(m.status),1)]),_:2},1024)]),a("div",null,[e(wd,{report:m},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(k(),A("div",Sd,[e(ae,{name:"warning",color:"warning",size:"4em"}),Pd]))])]),_:1})]))}};var Nd=Z(Ud,[["__scopeId","data-v-5b0a7351"]]);const qd={class:"row justify-between"},Dd=a("div",{class:"text-h6"},"Others Added Stocks Report",-1),Ad={class:"q-mt-md"},Id={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(d){je(),P(!1);const v=P(!1),C=()=>{v.value=!0},R=d,f=z(()=>(console.log("Filtered rows:",R.report||[]),R.report.other_added_stock||[])),b=i=>{const _=m=>m?m.charAt(0).toUpperCase()+m.slice(1).toLowerCase():"",p=i.firstname?_(i.firstname):"No Firstname",r=i.middlename?_(i.middlename).charAt(0)+".":"",h=i.lastname?_(i.lastname):"No Lastname";return`${p} ${r} ${h}`},U=[{name:"product_name",label:"Product Name",field:i=>(console.log("Row data:",i),i.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:i=>(console.log("Row data:",i),i.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:i=>i.added_stocks?`${i.added_stocks} pcs`:"N/A"}];return(i,_)=>(k(),A(E,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:C})]),e(X,{modelValue:v.value,"onUpdate:modelValue":_[2]||(_[2]=p=>v.value=p)},{default:t(()=>[e(H,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(N,null,{default:t(()=>[a("div",qd,[Dd,e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=p=>v.value=!1)})])]),_:1}),e(N,null,{default:t(()=>[a("div",null,"Cashier: "+x(b(d.report.employee)),1),a("div",null," Branch: "+x(d.report.branch.name),1),a("div",null,[q(" Status: "),e(ye,{color:"red",outlined:""},{default:t(()=>[q(x(d.report.status),1)]),_:1})]),a("div",Ad,"Remark: "+x(d.report.remark),1)]),_:1}),e(N,null,{default:t(()=>[e(Ce,{rows:f.value,columns:U,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:i.pagination,"onUpdate:pagination":_[1]||(_[1]=p=>i.pagination=p),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Td=d=>(le("data-v-67ff56ab"),d=d(),ne(),d),Bd={class:"q-gutter-md q-ma-md"},Fd={class:"row justify-between"},zd={class:"text-subtitle1"},Ld={class:"text-subtitle1"},Od={class:"text-subtitle1"},Md={key:1,class:"data-error"},Hd=Td(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),jd={__name:"TransactionDeclinedCard",setup(d){const v=Ve(),C=ot(),R=z(()=>C.declinedOtherReports),f=v.params.branch_id,b=P("declined"),U=async()=>{try{const r=await C.fetchDeclinedOtherStocks(f,b.value);console.log("selectedOtherProductDeclined",R.value)}catch(r){console.error("Error fetching decline stocks:",r)}};Ne(async()=>{f&&await U()});const i=r=>$e.formatDate(r,"MMMM D, YYYY"),_=r=>$e.formatDate(r,"hh:mm A"),p=r=>{const h=y=>y?y.charAt(0).toUpperCase()+y.slice(1).toLowerCase():"",m=r.firstname?h(r.firstname):"No Firstname",S=r.middlename?h(r.middlename).charAt(0)+".":"",V=r.lastname?h(r.lastname):"No Lastname";return`${m} ${S} ${V}`};return(r,h)=>(k(),A("div",null,[e(He,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Bd,[R.value.length?(k(!0),A(E,{key:0},fe(R.value,(m,S)=>(k(),F(H,{key:S},{default:t(()=>[e(N,null,{default:t(()=>[a("div",Fd,[a("div",zd,x(i(m.created_at)),1),a("div",Ld,x(_(m.created_at)),1),a("div",Od,x(m.branch.name)+" - "+x(p(m.employee)),1),a("div",null,[e(ye,{color:"red",outlined:""},{default:t(()=>[q(x(m.status),1)]),_:2},1024)]),a("div",null,[e(Id,{report:m},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(k(),A("div",Md,[e(ae,{name:"warning",color:"warning",size:"4em"}),Hd]))])]),_:1})]))}};var Qd=Z(jd,[["__scopeId","data-v-67ff56ab"]]);const Ed={class:"q-gutter-y-sm"},Kd={__name:"OtherTransactionPage",setup(d){const v=P("pendingReports"),C=z(()=>{switch(v.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return(R,f)=>(k(),A(E,null,[a("div",Ed,[e(Ke,{modelValue:v.value,"onUpdate:modelValue":f[0]||(f[0]=b=>v.value=b),"indicator-color":C.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(ke,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(ke,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(ke,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Ye,{modelValue:v.value,"onUpdate:modelValue":f[1]||(f[1]=b=>v.value=b),animated:""},{default:t(()=>[e(xe,{name:"pendingReports"},{default:t(()=>[e(yd)]),_:1}),e(xe,{name:"confirmReports"},{default:t(()=>[e(Nd)]),_:1}),e(xe,{name:"declineReports"},{default:t(()=>[e(Qd)]),_:1})]),_:1},8,["modelValue"])],64))}};var Yd=Z(Kd,[["__scopeId","data-v-b76c19b4"]]);const bt=d=>(le("data-v-0a732ed6"),d=d(),ne(),d),Gd={class:"q-gutter-y-sm"},Wd=bt(()=>a("h1",null,"Bread",-1)),Jd=bt(()=>a("h1",null,"Cake",-1)),Xd={__name:"TransactionPage",setup(d){const v=P("bread");return(C,R)=>(k(),A(E,null,[a("div",Gd,[e(Ke,{modelValue:v.value,"onUpdate:modelValue":R[0]||(R[0]=f=>v.value=f),"active-color":"light-green-13","indicator-color":"light-green-13","narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:"gradient-btn"},{default:t(()=>[e(ke,{class:"text-white",name:"bread",label:"\u{1F35E}Bread"}),e(ke,{class:"text-white",name:"selecta",label:"\u{1F366}Selecta"}),e(ke,{class:"text-white",name:"softdrinks",label:"\u{1F964}Softdrinks"}),e(ke,{class:"text-white",name:"cake",label:"\u{1F370}Cake"}),e(ke,{class:"text-white",name:"other",label:"\u2B50Others"})]),_:1},8,["modelValue"])]),e(Ye,{modelValue:v.value,"onUpdate:modelValue":R[1]||(R[1]=f=>v.value=f),animated:""},{default:t(()=>[e(xe,{name:"bread"},{default:t(()=>[e(H,null,{default:t(()=>[Wd]),_:1})]),_:1}),e(xe,{name:"selecta"},{default:t(()=>[e(pr)]),_:1}),e(xe,{name:"softdrinks"},{default:t(()=>[e(od)]),_:1}),e(xe,{name:"cake"},{default:t(()=>[e(H,null,{default:t(()=>[Jd]),_:1})]),_:1}),e(xe,{name:"other"},{default:t(()=>[e(Yd)]),_:1})]),_:1},8,["modelValue"])],64))}};var Zd=Z(Xd,[["__scopeId","data-v-0a732ed6"]]);const Ee=d=>(le("data-v-f0d86c36"),d=d(),ne(),d),ei=Ee(()=>a("div",{class:"text-h6"},"Create Branch Recipe",-1)),ti={class:"q-mb-lg"},ai={key:0,class:"custom-list z-top"},oi={class:"q-mb-sm"},li=Ee(()=>a("div",null,"Recipe Name",-1)),ni={class:"q-mb-lg"},si=Ee(()=>a("div",null,"Category",-1)),ri=Ee(()=>a("div",null,"Breads",-1)),di={class:"q-mt-md q-gutter-y-sm"},ii=Ee(()=>a("div",{class:"text-weight-thin"},"Ingredients List",-1)),ui={class:"q-mt-xl q-gutter-y-sm"},ci={class:"row justify-between"},mi=Ee(()=>a("div",{align:"center"},"Ingredients",-1)),pi=Ee(()=>a("div",{align:"center"},"Quantity",-1)),_i=["onKeyup"],gi={align:"right"},fi={__name:"RecipeCreate",setup(d){const v=Ve(),C=v.params.branch_id,R=Pt(),f=z(()=>R.recipes),b=et(),U=Ge(),i=et(),_=z(()=>b.branchRecipes),p=P(!1),r=()=>{p.value=!0},h=()=>{clearForm(),p.value=!1},m=Q=>Q?Q.split(" ").map(K=>K.charAt(0).toUpperCase()+K.slice(1).toLowerCase()).join(" "):"",S=P(""),V=async()=>{R.searchRecipe(S.value)},y=z(()=>g.target!==0),w=Q=>{g.recipe_id=Q.id,g.recipe_name=Q.name,g.category=Q.category,S.value=""},g=Te({recipe_id:"",recipe_name:"",category:"",target:"",branches_id:v.params.branch_id}),u=P(!1),c=P(null),s=P([]),n=P(s.value),l=P([]),o=P([]),$=Te({name:"",quantity:""}),T=P(o.value);(async()=>{await U.fetchProductsByCategory("Bread"),u.value=!1,s.value=U.breads.map(Q=>({label:Q.name,value:Q.id}))})(),(async()=>{const Q="Ingredients";await i.fetchBranchRawMaterials(Q,C),u.value=!1,o.value=i.ingredients.map(K=>({label:K.raw_material_name,value:K.raw_material_id,unit:K.ingredient_unit}))})();const ce=()=>{$.name="",$.quantity=""},Se=(Q,K)=>{Q.length>2&&(s.value.includes(Q)||K(Q,"add-unique"))},be=(Q,K)=>{K(()=>{if(Q==="")n.value=s.value;else{const L=Q.toLowerCase();n.value=s.value.filter(B=>B.label.toLowerCase().indexOf(L)>-1)}})},ie=(Q,K)=>{K(()=>{if(Q==="")T.value=o.value;else{const L=Q.toLowerCase();T.value=o.value.filter(B=>B.label.toLowerCase().indexOf(L)>-1)}})},we=()=>{const Q=l.value;function K(M,me){return M.find(De=>De.ingredients_id==me)}const L=$.name.value;K(Q,L)?ue.create({type:"negative",icon:"warning",message:"Ingredient already exist",timeout:2e3}):(l.value=[...Q,{ingredients_id:$.name.value,label:$.name.label,quantity:$.quantity,unit:$.name.unit}],ce())},j=Q=>{l.value.splice(Q,1)};he(()=>$.name,Q=>{Q&&Q.unit?$.unit=Q.unit:$.unit=""});const oe=()=>{g.recipe_id="",g.target="",c.value=null,l.value=[],$.name="",$.quantity=""},_e=async()=>{const Q={recipe_id:g.recipe_id,target:g.target,status:"active",branch_id:g.branches_id,breads:c.value.map(K=>({bread_id:K.value})),ingredients:l.value.map(K=>({ingredient_id:K.ingredients_id,quantity:K.quantity}))};console.log("branchRecipe",Q),await b.saveBranchRecipe(Q),_.value=await b.fetchBranchRecipes(C),oe(),p.value=!1};return(Q,K)=>(k(),A(E,null,[e(I,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Recipe",onClick:r}),e(X,{modelValue:p.value,"onUpdate:modelValue":K[7]||(K[7]=L=>p.value=L)},{default:t(()=>[e(H,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(N,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[ei,e(Ue),re(e(I,{icon:"close",flat:"",dense:"",round:""},null,512),[[de]])]),_:1}),e(N,null,{default:t(()=>{var L;return[a("div",ti,[e(D,{modelValue:S.value,"onUpdate:modelValue":[K[0]||(K[0]=B=>S.value=B),V],debounce:"1000",outlined:"",rounded:"",placeholder:"Search recipe",dense:""},{append:t(()=>[a("div",null,[e(ae,{name:"search"})])]),default:t(()=>[S.value?(k(),A("div",ai,[e(H,null,{default:t(()=>[e(Pe,{separator:""},{default:t(()=>{var B;return[(B=f.value)!=null&&B.length?(k(!0),A(E,{key:1},fe(f.value,M=>(k(),F(se,{onClick:me=>w(M),key:M.id,clickable:""},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q(x(m(M.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(k(),F(se,{key:0},{default:t(()=>[q(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ie("",!0)]),_:1},8,["modelValue"])]),a("div",oi,[li,e(D,{modelValue:g.recipe_name,"onUpdate:modelValue":K[1]||(K[1]=B=>g.recipe_name=B),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",ni,[si,e(D,{modelValue:g.category,"onUpdate:modelValue":K[2]||(K[2]=B=>g.category=B),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[e(D,{modelValue:g.target,"onUpdate:modelValue":K[3]||(K[3]=B=>g.target=B),outlined:"",dense:"",suffix:" / 1kg",type:"number",label:"Target Pcs",mask:"##.##"},null,8,["modelValue"])]),a("div",null,[ri,e(nt,{modelValue:c.value,"onUpdate:modelValue":K[4]||(K[4]=B=>c.value=B),"use-input":"","use-chips":"","chips-color":"primary",multiple:"","input-debounce":"0",options:n.value,behavior:"menu","hide-dropdown-icon":"",outlined:"",dense:"",label:"Bread/s",onNewValue:Se,onFilter:be,rules:[B=>B&&B.length>0||"Bread is required"]},{"no-option":t(()=>[e(se,null,{default:t(()=>[e(Y,{class:"text-grey"},{default:t(()=>[q(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),a("div",di,[ii,a("div",null,[e(Pe,{dense:"",separator:"",class:"box"},{default:t(()=>[(k(!0),A(E,null,fe(l.value,(B,M)=>(k(),F(se,{key:M},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,null,{default:t(()=>[q(x(B.label),1)]),_:2},1024)]),_:2},1024),e(Y,null,{default:t(()=>[q(x(B.quantity)+" "+x(B.unit),1)]),_:2},1024),e(Y,{side:""},{default:t(()=>[e(I,{onClick:me=>j(M),color:"grey-10",icon:"backspace",dense:"",flat:"",round:""},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),a("div",ui,[a("div",ci,[a("div",null,[mi,e(nt,{modelValue:$.name,"onUpdate:modelValue":K[5]||(K[5]=B=>$.name=B),debounce:"3000",outlined:"","chips-color":"primary",options:T.value,dense:"",label:"Ingredients",behavior:"menu","use-input":"","hide-dropdown-icon":"",onFilter:ie,style:{width:"215px","max-width":"450px","min-width":"80px"}},{"no-option":t(()=>[e(se,null,{default:t(()=>[e(Y,{class:"text-grey"},{default:t(()=>[q(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),a("div",null,[pi,e(D,{modelValue:$.quantity,"onUpdate:modelValue":K[6]||(K[6]=B=>$.quantity=B),modelModifiers:{number:!0},outlined:"",dense:"",type:"number",label:"Quantity",suffix:((L=$==null?void 0:$.name)==null?void 0:L.unit)||"",style:{width:"115px"},hint:"Enter the quantity as a decimal",mask:"##.##"},null,8,["modelValue","suffix"])])]),a("form",{onKeyup:pe(xt(we,["prevent"]),["enter"])},[a("div",gi,[e(I,{padding:"xs md",type:"button",size:"sm",outline:"",dense:"",label:"add",icon:"add",color:"purple",onClick:we})])],40,_i)])]}),_:1}),e(Me,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(I,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:h}),e(I,{class:"glossy",color:"teal",label:"Create",onClick:_e,disable:!y.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var vi=Z(fi,[["__scopeId","data-v-f0d86c36"]]);const wt=d=>(le("data-v-33664d62"),d=d(),ne(),d),yi=wt(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),hi=wt(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),bi={__name:"RecipeDelete",props:["delete"],setup(d){const v=et(),C=d,R=P(!1),f=()=>{R.value=!0},b=async()=>{await v.deleteRecipe(C.delete.row.id),R.value=!1};return(U,i)=>(k(),A(E,null,[e(I,{onClick:f,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"","aria-label":"Delete"},{default:t(()=>[e(ve,{class:"bg-negative",delay:200},{default:t(()=>[q("Delete")]),_:1})]),_:1}),e(X,{modelValue:R.value,"onUpdate:modelValue":i[0]||(i[0]=_=>R.value=_),persistent:""},{default:t(()=>[e(H,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(N,{class:"q-pt-none q-pb-sm"},{default:t(()=>[yi,hi]),_:1}),e(tt,{class:"q-mb-md"}),e(N,null,{default:t(()=>[e(Me,{align:"right",class:"q-pt-none"},{default:t(()=>[re(e(I,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[de]]),e(I,{dense:"",label:"Delete",color:"negative",onClick:b,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var wi=Z(bi,[["__scopeId","data-v-33664d62"]]);const ki=d=>(le("data-v-7a561dd0"),d=d(),ne(),d),xi={class:"text-h6 text-white"},$i=ki(()=>a("div",{class:"text-h6",align:"center"},"Bread List",-1)),Vi={class:"row",align:"center"},Ci={__name:"RecipeBreadGroups",props:["breadGroups"],setup(d){const{dialogRef:v,onDialogHide:C,onDialogOK:R,onDialogCancel:f}=qe();console.log("breadGroups",d.breadGroups);const U=i=>i?i.split(" ").map(_=>_.charAt(0).toUpperCase()+_.slice(1).toLowerCase()).join(" "):"";return(i,_)=>(k(),F(X,{ref_key:"dialogRef",ref:v,onHide:te(C),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(H,{style:{width:"500px","max-width":"120vw"}},{default:t(()=>[e(N,{class:"row bg-backgroud text-h6"},{default:t(()=>[a("div",xi,x(U(d.breadGroups.name)),1),e(Ue),a("div",null,[re(e(I,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[de]])])]),_:1}),e(N,null,{default:t(()=>[$i]),_:1}),e(N,null,{default:t(()=>[(k(!0),A(E,null,fe(d.breadGroups.bread_groups,(p,r)=>(k(),A("div",{key:r},[a("div",Vi,x(p),1)]))),128))]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Ri=Z(Ci,[["__scopeId","data-v-7a561dd0"]]);const Si=d=>(le("data-v-435e3b8f"),d=d(),ne(),d),Pi={class:"text-h6 text-white"},Ui=Si(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Ni={__name:"RecipeIngredientGroups",props:["ingredientGroups"],setup(d){const{dialogRef:v,onDialogHide:C,onDialogOK:R,onDialogCancel:f}=qe();console.log("ingredientGroups",d.ingredientGroups);const U=_=>_?_.split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1).toLowerCase()).join(" "):"",i=_=>{const p=Number(_.quantity)||0,r=_.unit||"";return p>1e3?`${parseFloat((p/1e3).toFixed(3))} kg`:p>1?`${parseFloat(p.toFixed(3))} ${r}`:`${parseFloat(p.toFixed(3))} ${r}`};return(_,p)=>(k(),F(X,{ref_key:"dialogRef",ref:v,onHide:te(C),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(H,{style:{width:"500px","max-width":"120vw"}},{default:t(()=>[e(N,{class:"row bg-backgroud text-h6"},{default:t(()=>[a("div",Pi,x(U(d.ingredientGroups.name)),1),e(Ue),a("div",null,[re(e(I,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[de]])])]),_:1}),e(N,null,{default:t(()=>[Ui]),_:1}),e(N,null,{default:t(()=>[e(Pe,{dense:"",separator:"",class:"box"},{default:t(()=>[e(se,null,{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Raw Materials Name")]),_:1})]),_:1}),e(Y,null,{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Code")]),_:1})]),_:1}),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-overline"},{default:t(()=>[q("Quantity")]),_:1})]),_:1})]),_:1}),(k(!0),A(E,null,fe(d.ingredientGroups.ingredient_groups,(r,h)=>(k(),F(se,{key:h},{default:t(()=>[e(Y,null,{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q(x(r.ingredient_name),1)]),_:2},1024)]),_:2},1024),e(Y,null,{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q(x(r.code),1)]),_:2},1024)]),_:2},1024),e(Y,{side:""},{default:t(()=>[e(W,{class:"text-caption"},{default:t(()=>[q(x(i(r)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var qi=Z(Ni,[["__scopeId","data-v-435e3b8f"]]);const Di=d=>(le("data-v-89832402"),d=d(),ne(),d),Ai={class:"row justify-between"},Ii={class:"q-my-sm"},Ti={key:0,class:"spinner-wrapper"},Bi={key:1},Fi={key:0,class:"data-error"},zi=Di(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Li={class:"row justify-center q-gutter-x-md"},Oi={__name:"RecipeTable",setup(d){const C=Ve().params.branch_id,R=et(),f=P(""),b=P(!0),U=P([]),i=P(!1),_=P({rowsPerPage:0}),p=["inactive","active"],r=z(()=>R.branchRecipes);console.log("branch recipe",r.value);const h=z(()=>f.value?r.value.filter(o=>o.name.toLowerCase().includes(f.value.toLowerCase())):r.value);Ne(async()=>{C&&await m(C)});const m=async o=>{try{b.value=!0;const $=await R.fetchBranchRecipes(o);r.value=$,console.log("branchRecipeRows",r.value),r.value.length||(i.value=!0),console.log("Branch recipe",r.value)}catch($){console.log("Error fetching recipe",$)}finally{b.value=!1}},S=o=>{const $=Number(o)||0;return parseFloat($.toFixed(3)).toString()},V=o=>!o&&o!==0?"Set Target":typeof o=="number"||!isNaN(o)?(o=parseFloat(o),o%1===0?o:parseFloat(o.toFixed(1))):o;async function y(o,$){try{const T=await ee.put("/api/update-target/"+o.id,{target:parseFloat($)});if(console.log("response",T),T.status==200){const O=U.value.findIndex(J=>J.id==o.id);U.value[O]=$}ue.create({type:"positive",message:"Recipe target edited successfully"})}catch(T){console.error("Error updating recipe target:",T),ue.create({type:"negative",message:"Failed to edit recipe target"})}}async function w(o,$){try{if((await ee.put("/api/branch-update-status/"+o.id,{status:$})).status==200){const O=U.value.findIndex(J=>J.id==o.id);U.value[O]=$}ue.create({type:"positive",message:"Recipe status change successfully"})}catch(T){console.error("Error updating recipe status:",T),ue.create({type:"negative",message:"Failed to change recipe status"})}}const g=o=>o?o.split(" ").map($=>$.charAt(0).toUpperCase()+$.slice(1).toLowerCase()).join(" "):"",u=[{name:"name",label:"Recipe name",align:"center",field:o=>o.name},{name:"category",label:"Category",align:"center",field:o=>o.recipe},{name:"target",label:"Target",align:"center",field:o=>V(o.target)},{name:"status",label:"Status",align:"center",field:"status"},{name:"bread_groups",label:"List of Bread",align:"center",field:"bread_groups"},{name:"ingredient_groups",label:"List of Ingredients",align:"center",field:"ingredient_groups"},{name:"action",label:"Action",align:"center",sortable:!0}],c=Be(),s=o=>{console.log("Bread Groups:",o),c.dialog({component:Ri,componentProps:{breadGroups:o}})},n=o=>{console.log("Ingredients Groups:",o),c.dialog({component:qi,componentProps:{ingredientGroups:o}})},l=o=>{switch(o){case"inactive":return"grey";case"active":return"green";default:return"grey"}};return(o,$)=>(k(),A(E,null,[a("div",Ai,[a("div",null,[e(D,{class:"q-pb-lg q-pl-md",modelValue:f.value,"onUpdate:modelValue":$[0]||($[0]=T=>f.value=T),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"1500px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(ae,{name:"search"})]),_:1},8,["modelValue"])]),a("div",Ii,[e(vi)])]),b.value?(k(),A("div",Ti,[e(at,{size:"50px",color:"primary"})])):(k(),A("div",Bi,[h.value.length===0?(k(),A("div",Fi,[e(ae,{name:"warning",color:"warning",size:"4em"}),zi])):(k(),F(Ce,{key:1,class:"table-container sticky-header",filter:f.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:u,rows:h.value,"row-key":"name","virtual-scroll":"",pagination:_.value,"onUpdate:pagination":$[1]||($[1]=T=>_.value=T),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"}},{"body-cell-name":t(T=>[e(G,{props:T},{default:t(()=>[a("span",null,x(g(T.row.name)),1)]),_:2},1032,["props"])]),"body-cell-category":t(T=>[e(G,{props:T},{default:t(()=>[a("span",null,x(g(T.row.category)),1)]),_:2},1032,["props"])]),"body-cell-target":t(T=>[e(G,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[q(x(S(T.row.target))+" ",1),e(ve,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[q("Edit Target")]),_:1})]),e(ge,{"onUpdate:modelValue":[O=>y(T.row,O),O=>T.row.target=O],modelValue:T.row.target,"auto-save":""},{default:t(O=>[e(D,{modelValue:O.value,"onUpdate:modelValue":J=>O.value=J,dense:"",suffix:"pcs",autofocus:"",counter:"",onKeyup:pe(O.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-status":t(T=>[e(G,{props:T},{default:t(()=>[e(ye,{outline:"",color:l(T.row.status)},{default:t(()=>[q(x(g(T.row.status))+" ",1),e(ve,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[q("Change Status")]),_:1})]),_:2},1032,["color"]),e(ge,{"onUpdate:modelValue":[O=>w(T.row,O),O=>T.row.status=O],modelValue:T.row.status,"auto-save":""},{default:t(O=>[a("span",null,x(T.row.name),1),e(nt,{modelValue:O.value,"onUpdate:modelValue":J=>O.value=J,dense:"",label:"status",autofocus:"",options:p,counter:"",mask:"###",onKeyup:pe(O.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-bread_groups":t(T=>[e(G,{props:T},{default:t(()=>[e(I,{"no-caps":"",onClick:O=>s(T.row),label:`${T.row.bread_groups.length} breads`,rounded:"",color:"brown"},null,8,["onClick","label"])]),_:2},1032,["props"])]),"body-cell-ingredient_groups":t(T=>[e(G,{props:T},{default:t(()=>[e(I,{"no-caps":"",onClick:O=>n(T.row),label:`${T.row.ingredient_groups.length} ingredients`,rounded:"",color:"purple"},null,8,["onClick","label"])]),_:2},1032,["props"])]),"body-cell-action":t(T=>[e(G,{props:T},{default:t(()=>[a("div",Li,[e(wi,{delete:T},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Mi=Z(Oi,[["__scopeId","data-v-89832402"]]);const Hi={__name:"RecipePage",setup(d){return(v,C)=>(k(),A("div",null,[e(Mi)]))}};const ji={class:"elegant-container q-gutter-md"},Qi={class:"text-h6 row justify-between"},Ei={class:"q-gutter-sm"},Ki={class:"tab-container"},Yi={__name:"BranchIdPage",setup(d){const v=Ve(),C=P(""),R=$t(),f=async p=>(await ee.get(`/api/branches/${p}`)).data,b=async()=>{const p=v.params.branch_id,r=await f(p);r&&r.name?C.value=r.name:console.error("Branch data is missing 'name' property or invalid:",r)};Ne(()=>{b()});const U=p=>p?p.split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join(" "):"",i=P("products"),_=()=>{Ae.show(),R.push("/admin/branches").finally(()=>{Ae.hide()})};return(p,r)=>(k(),F(Vt,{padding:""},{default:t(()=>[a("div",ji,[a("div",Qi,[a("div",null,[e(I,{outline:"",flat:"",icon:"arrow_back",onClick:_}),e(Ue)]),a("div",null,[e(ae,{name:"fa-solid fa-store",color:"red-6"}),q(" "+x(U(C.value)),1)])]),a("div",Ei,[a("div",Ki,[e(Ke,{modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=h=>i.value=h),dense:"",class:"bg-grey-2 text-grey-7 tabs-as-cards","active-color":"red-6","indicator-color":"transparent",align:"justify"},{default:t(()=>[e(ke,{name:"products",label:"Products"}),e(ke,{name:"rawMaterials",label:"Raw Materials"}),e(ke,{name:"recipe",label:"Recipe"}),e(ke,{name:"production",label:"Production"}),e(ke,{name:"transaction",label:"Transactions"})]),_:1},8,["modelValue"])]),e(H,{class:"q-mt-sm"},{default:t(()=>[e(Ye,{modelValue:i.value,"onUpdate:modelValue":r[1]||(r[1]=h=>i.value=h),animated:""},{default:t(()=>[e(xe,{name:"products"},{default:t(()=>[e(ta)]),_:1}),e(xe,{name:"rawMaterials"},{default:t(()=>[e(Ca)]),_:1}),e(xe,{name:"recipe"},{default:t(()=>[e(Hi)]),_:1}),e(xe,{name:"production"},{default:t(()=>[e(xs)]),_:1}),e(xe,{name:"transaction"},{default:t(()=>[e(Zd)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1}))}};var Au=Z(Yi,[["__scopeId","data-v-eb7c826e"]]);export{Au as default};
