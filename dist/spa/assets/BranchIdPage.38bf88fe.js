import{bd as ce,c as T,r as S,t as Ue,o as h,a2 as q,f as e,M as B,w as t,Q as F,I as P,ad as W,J as a,K,L as re,e as N,$ as D,a3 as O,a4 as se,_ as f,bc as Le,aI as Ce,a1 as G,a0 as De,N as de,O as ae,R as le,z as $e,u as Fe,ba as ke,aJ as st,be as A,d as rt,aH as it,H as dt,P as We}from"./index.6b70b11d.js";import{Q as Be}from"./QSpace.67d7235c.js";import{Q as ze,a as _e,b as je,c as ge}from"./QTabPanels.9364bd4c.js";import{Q as ct}from"./QPage.445fd672.js";import{Q as Te,a as ye,b as xe}from"./QList.d8d247f0.js";import{b as Ne}from"./use-virtual-scroll.53f4957b.js";import{C as J}from"./ClosePopup.26b0a7ef.js";import{u as Oe}from"./branch-product.58289784.js";import{u as Xe}from"./product.460a81d9.js";import{Q as Ie}from"./QSpinnerDots.c9cd9e55.js";import{Q as I}from"./QTd.d22d8dc9.js";import{Q as X}from"./QBadge.3d25f94b.js";import{Q as Y}from"./QTooltip.2cf2e411.js";import{Q as qe}from"./QPopupEdit.34fa2e10.js";import{Q as oe}from"./QTable.8e03fd04.js";import{_ as Z}from"./plugin-vue_export-helper.21dcd24c.js";import{api as ve}from"./axios.933a2768.js";import{u as Qe}from"./branch-rawMaterials.fb7dc318.js";import{u as Ze}from"./raw-material.8f3d00a5.js";import{u as be}from"./use-dialog-plugin-component.5a87e72c.js";import{q as he}from"./date.5709dbe3.js";import{p as Ae,v as et}from"./vfs_fontes.3eb8cb31.js";import{u as Re}from"./use-quasar.7d5bb824.js";import{Q as Ee}from"./QScrollArea.b7883deb.js";import{u as Ve}from"./selecta-product.c063d73a.js";import{Q as Me}from"./QSelect.4fecc4d6.js";import{Q as Je}from"./QChip.e74c597d.js";import{u as ut}from"./recipe.aaac06a8.js";import{u as Ke}from"./branch-recipe.33599de6.js";import"./QResizeObserver.d7f3525f.js";import"./use-panel.8a566c08.js";import"./touch.9135741d.js";import"./selection.2b805690.js";import"./QMenu.f7602b2f.js";import"./QVirtualScroll.c7441323.js";import"./QScrollObserver.f5dc9f58.js";import"./TouchPan.18097ad9.js";const mt=a("div",{class:"text-h6"},"Create Branch Product",-1),pt={class:"q-mb-lg"},_t={key:0,class:"custom-list z-top"},gt=a("div",null,"Product Name",-1),ft=a("div",null,"Category",-1),yt={class:"row justify-between"},vt=a("div",null,"Beginnings",-1),ht=a("div",null,"Total Quantity",-1),bt=a("div",null,"Price",-1),wt={__name:"ProductCreate",setup(i){const x=ce(),$=Xe(),R=T(()=>$.products),b=Oe(),u=S(""),p=async()=>{$.searchProducts(u.value)},m=T(()=>n.price!==0&&n.beginnings!==0&&n.total_quantity!==0),v=S(!1),w=()=>{v.value=!0},s=()=>{c(),v.value=!1},l=d=>d?d.split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join(" "):"",o=d=>{n.product_id=d.id,n.product_name=d.name,n.category=d.category,u.value=""},n=Ue({product_id:"",product_name:"",price:0,beginnings:0,total_quantity:0,branches_id:x.params.branch_id}),c=()=>{n.product_id="",n.product_name="",n.category="",n.price=0,n.beginnings=0,n.total_quantity=0},_=async()=>{try{const{product_name:d,...r}=n;await b.createBranchProducts(r),console.log("data to send",r),c(),v.value=!1}catch(d){console.log(d)}};return(d,r)=>(h(),q(O,null,[e(B,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Product",onClick:w}),e(G,{modelValue:v.value,"onUpdate:modelValue":r[6]||(r[6]=C=>v.value=C),persistent:""},{default:t(()=>[e(F,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(P,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[mt,e(Be),W(e(B,{icon:"close",flat:"",dense:"",round:""},null,512),[[J]])]),_:1}),e(P,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",pt,[e(K,{modelValue:u.value,"onUpdate:modelValue":[r[0]||(r[0]=C=>u.value=C),p],debounce:"1000",outlined:"",rounded:"",placeholder:"Search product",dense:""},{append:t(()=>[a("div",null,[e(re,{name:"search"})])]),default:t(()=>[u.value?(h(),q("div",_t,[e(F,null,{default:t(()=>[e(Te,{separator:""},{default:t(()=>{var C;return[(C=R.value)!=null&&C.length?(h(!0),q(O,{key:1},se(R.value,g=>(h(),N(ye,{onClick:V=>o(g),key:g.id,clickable:""},{default:t(()=>[e(xe,null,{default:t(()=>[e(Ne,null,{default:t(()=>[D(f(l(g.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(h(),N(ye,{key:0},{default:t(()=>[D(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Le("",!0)]),_:1},8,["modelValue"])]),a("div",null,[gt,e(K,{modelValue:n.product_name,"onUpdate:modelValue":r[1]||(r[1]=C=>n.product_name=C),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[ft,e(K,{modelValue:n.category,"onUpdate:modelValue":r[2]||(r[2]=C=>n.category=C),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",yt,[a("div",null,[vt,e(K,{modelValue:n.beginnings,"onUpdate:modelValue":r[3]||(r[3]=C=>n.beginnings=C),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[ht,e(K,{modelValue:n.total_quantity,"onUpdate:modelValue":r[4]||(r[4]=C=>n.total_quantity=C),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])]),a("div",null,[bt,e(K,{modelValue:n.price,"onUpdate:modelValue":r[5]||(r[5]=C=>n.price=C),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])]),_:1}),e(Ce,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(B,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:s}),e(B,{class:"glossy",color:"teal",label:"Create",onClick:_,disable:!m.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const tt=i=>(ae("data-v-196482e9"),i=i(),le(),i),xt=tt(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),$t=tt(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),kt={__name:"ProductDelete",props:["delete"],setup(i){const x=Oe(),$=i;console.log("delte",$.delete.row.id);const R=async()=>{try{await x.deleteBranchProducts($.delete.row.id),de.create({type:"negative",icon:"warning",message:"Branch product successfully deleted",timeout:1e3,position:"top"}),b.value=!1}catch(p){console.error(p.message)}},b=S(!1),u=()=>{console.log("ID",$.delete.row.id),b.value=!0};return(p,m)=>(h(),q(O,null,[e(B,{onClick:u,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"",align:"center"},{default:t(()=>[e(Y,{class:"bg-negative",delay:200},{default:t(()=>[D("Delete")]),_:1})]),_:1}),e(G,{modelValue:b.value,"onUpdate:modelValue":m[0]||(m[0]=v=>b.value=v)},{default:t(()=>[e(F,null,{default:t(()=>[e(P,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[xt,$t]),_:1}),e(De,{class:"q-mb-md"}),e(P,null,{default:t(()=>[e(Ce,{align:"right",class:"q-pt-none"},{default:t(()=>[W(e(B,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[J]]),e(B,{dense:"",label:"Delete",color:"negative",onClick:R,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ct=Z(kt,[["__scopeId","data-v-196482e9"]]);const Rt=i=>(ae("data-v-7e992bc7"),i=i(),le(),i),Pt={class:"row justify-between"},St={class:"q-my-sm"},qt={key:0,class:"spinner-wrapper"},Vt={key:1},Dt={key:0,class:"data-error"},Bt=Rt(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ut={key:1},Tt={__name:"ProductTable",setup(i){const $=ce().params.branch_id,R=Oe(),b=S(""),u=S(!0),p=S([]),m=S(!1),v=S({rowsPerPage:0}),w=T(()=>R.branchProducts);console.log("branchssdfrer",w.value);const s=T(()=>b.value?w.value.filter(g=>g.name.toLowerCase().includes(b.value.toLowerCase())):w.value),l=g=>g?g.split(" ").map(V=>V.charAt(0).toUpperCase()+V.slice(1).toLowerCase()).join(" "):"";$e(async()=>{$&&await o($)});const o=async g=>{try{u.value=!0;const V=await R.fetchBranchProducts(g);w.value=V,w.value.length||(m.value=!0),console.log("Branch product",w.value)}catch(V){console.log("Error fetching branch product:",V),m.value=!0}finally{u.value=!1}};Fe(b,async g=>{u.value=!0,await new Promise(V=>setTimeout(V,1e3)),u.value=!1,m.value=s.value.length===0});async function n(g,V){try{const y=await ve.put("/api/update-branch-products/"+g.id,{price:parseInt(V)});if(y.status===200){const k=p.value.findIndex(H=>H.id==g.id);p.value[k]=parseInt(V),de.create({type:"positive",message:y.data.message,timout:1e3,position:"top"})}}catch(y){console.error("Error updating price:",y)}}async function c(g,V){try{const y=await ve.put("/api/update-branch-products-beginnings/"+g.id,{beginnings:parseInt(V)});if(y.status===200){const k=p.value.findIndex(H=>H.id==g.id);p.value[k]=parseInt(V),de.create({type:"positive",message:y.data.message,timout:1e3,position:"top"})}}catch(y){console.error("Error updating price:",y)}}async function _(g,V){try{const y=await ve.put("/api/update-branch-products-total-quantity/"+g.id,{total_quantity:parseInt(V)});if(y.status===200){const k=p.value.findIndex(H=>H.id==g.id);p.value[k]=parseInt(V),de.create({type:"positive",message:y.data.message,timout:1e3,position:"top"})}}catch(y){console.error("Error updating price:",y)}}const d=g=>{switch(g){case"Bread":return"brown";case"Selecta":return"red-6";case"Softdrinks":return"accent";default:return"grey"}},r=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(g),C=[{name:"name",label:"Product Name",align:"center",field:g=>g.product.name,format:g=>`${g}`,sortable:!0},{name:"category",align:"center",label:"Category",field:"category",sortable:!0},{name:"price",align:"center",label:"Price",field:g=>r(g),sortable:!0},{name:"beginnings",align:"center",label:"Beginnings",field:"beginnings",format:g=>`${g} pcs`,sortable:!0},{name:"total_quantity",align:"center",label:"Quantity",field:"total_quantity",format:g=>`${g} pcs`,sortable:!0},{name:"action",align:"center",label:"Action",field:"action",sortable:!0}];return(g,V)=>(h(),q(O,null,[a("div",Pt,[a("div",null,[e(K,{class:"q-pb-lg q-pl-md",modelValue:b.value,"onUpdate:modelValue":V[0]||(V[0]=y=>b.value=y),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"1500px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(re,{name:"search"})]),_:1},8,["modelValue"])]),a("div",St,[e(wt)])]),u.value?(h(),q("div",qt,[e(Ie,{size:"50px",color:"primary"})])):(h(),q("div",Vt,[s.value.length===0?(h(),q("div",Dt,[e(re,{name:"warning",color:"warning",size:"4em"}),Bt])):(h(),N(oe,{key:1,class:"table-container sticky-header",filter:b.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:C,rows:s.value,"row-key":"name","virtual-scroll":"",pagination:v.value,"onUpdate:pagination":V[1]||(V[1]=y=>v.value=y),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"}},{"body-cell-name":t(y=>[e(I,{key:"name",props:y},{default:t(()=>{var k;return[D(f((k=y.row.product)!=null&&k.name?l(y.row.product.name):"No data available"),1)]}),_:2},1032,["props"])]),"body-cell-category":t(y=>[e(I,{key:"name",props:y},{default:t(()=>[y.row.category?(h(),N(X,{key:0,color:d(y.row.category)},{default:t(()=>[D(f(y.row.category),1)]),_:2},1032,["color"])):(h(),q("span",Ut,"No data available"))]),_:2},1032,["props"])]),"body-cell-price":t(y=>[e(I,{props:y,class:"cursor-pointer"},{default:t(()=>[a("span",null,[D(f(r(y.row.price))+" ",1),e(Y,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[D("Edit Price")]),_:1})]),e(qe,{"onUpdate:modelValue":[k=>n(y.row,k),k=>y.row.price=k],modelValue:y.row.price,"auto-save":""},{default:t(k=>[e(K,{modelValue:k.value,"onUpdate:modelValue":H=>k.value=H,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:ke(k.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(y=>[e(I,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[D(f(y.row.beginnings?y.row.beginnings:"Set Beginnings")+" ",1),e(Y,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[D("Edit beginnings")]),_:1})]),e(qe,{"onUpdate:modelValue":[k=>c(y.row,k),k=>y.row.beginnings=k],modelValue:y.row.beginnings,"auto-save":""},{default:t(k=>[e(K,{modelValue:k.value,"onUpdate:modelValue":H=>k.value=H,dense:"",autofocus:"",counter:"",mask:"###",onKeyup:ke(k.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-total_quantity":t(y=>[e(I,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[D(f(y.row.total_quantity?y.row.total_quantity:"Set Quantity")+" ",1),e(Y,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[D("Edit quantity")]),_:1})]),e(qe,{"onUpdate:modelValue":[k=>_(y.row,k),k=>y.row.total_quantity=k],modelValue:y.row.total_quantity,"auto-save":""},{default:t(k=>[e(K,{modelValue:k.value,"onUpdate:modelValue":H=>k.value=H,dense:"",autofocus:"",counter:"",mask:"###",onKeyup:ke(k.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-action":t(y=>[e(I,{class:"q-gutter-x-md",props:y},{default:t(()=>[e(Ct,{delete:y},null,8,["delete"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Nt=Z(Tt,[["__scopeId","data-v-7e992bc7"]]);const At={class:"q-gutter-sm"},Ft={__name:"ProductPage",setup(i){return(x,$)=>(h(),q("div",At,[a("div",null,[e(Nt)])]))}},It=a("div",{class:"text-h6"},"Create Branch Raw Materials",-1),Ht={class:"q-mb-lg"},Mt={key:0,class:"custom-list z-top"},Lt=a("div",null,"Raw Materials Code",-1),zt=a("div",null,"Raw Materials Name",-1),jt=a("div",null,"Category",-1),Ot=a("div",null,"Quantity",-1),Qt={__name:"RawMaterialsCreate",setup(i){const x=ce(),$=Ze(),R=T(()=>$.rawMaterials),b=Qe(),u=S(""),p=async()=>{$.searchRawMaterials(u.value)},m=T(()=>o.total_quantity!==""),v=S(!1),w=()=>{v.value=!0},s=()=>{n(),v.value=!1},l=_=>{o.ingredients_id=_.id,o.ingredient_name=_.name,o.ingredient_code=_.code,o.category=_.category,o.unit=_.unit,u.value=""},o=Ue({ingredients_id:"",ingredient_name:"",ingredient_code:"",total_quantity:"",category:"",unit:"",branch_id:x.params.branch_id}),n=()=>{o.ingredients_id="",o.ingredient_name="",o.ingredient_code="",o.total_quantity="",o.ingredients_id="",o.category="",o.unit=""},c=async()=>{try{const{product_name:_,...d}=o;await b.createBranchRawMaterials(d),console.log("data to send",d),n(),v.value=!1}catch(_){console.log(_)}};return(_,d)=>(h(),q(O,null,[e(B,{outline:"",class:"text-dark q-pa-sm",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Raw Material",onClick:w,style:{background:"#f43f5e"}}),e(G,{modelValue:v.value,"onUpdate:modelValue":d[5]||(d[5]=r=>v.value=r),persistent:""},{default:t(()=>[e(F,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(P,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[It,e(Be),W(e(B,{icon:"close",flat:"",dense:"",round:""},null,512),[[J]])]),_:1}),e(P,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",Ht,[e(K,{modelValue:u.value,"onUpdate:modelValue":[d[0]||(d[0]=r=>u.value=r),p],debounce:"1000",outlined:"",rounded:"",placeholder:"Search Raw Materials",dense:""},{append:t(()=>[a("div",null,[e(re,{name:"search"})])]),default:t(()=>[u.value?(h(),q("div",Mt,[e(F,null,{default:t(()=>[e(Te,{separator:""},{default:t(()=>{var r;return[(r=R.value)!=null&&r.length?(h(!0),q(O,{key:1},se(R.value,C=>(h(),N(ye,{onClick:g=>l(C),key:C.id,clickable:""},{default:t(()=>[e(xe,null,{default:t(()=>[e(Ne,null,{default:t(()=>[D(f(C.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(h(),N(ye,{key:0},{default:t(()=>[D(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Le("",!0)]),_:1},8,["modelValue"])]),a("div",null,[Lt,e(K,{modelValue:o.ingredient_code,"onUpdate:modelValue":d[1]||(d[1]=r=>o.ingredient_code=r),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[zt,e(K,{modelValue:o.ingredient_name,"onUpdate:modelValue":d[2]||(d[2]=r=>o.ingredient_name=r),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[jt,e(K,{modelValue:o.category,"onUpdate:modelValue":d[3]||(d[3]=r=>o.category=r),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[Ot,e(K,{modelValue:o.total_quantity,"onUpdate:modelValue":d[4]||(d[4]=r=>o.total_quantity=r),type:"number",outlined:"",suffix:o.unit||"",dense:"",rules:[r=>r&&r.length>0||"Total quantity is required"]},null,8,["modelValue","suffix","rules"])])]),_:1}),e(Ce,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(B,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:s}),e(B,{class:"glossy",color:"teal",label:"Create",onClick:c,disable:!m.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const at=i=>(ae("data-v-17ad5e9f"),i=i(),le(),i),Et=at(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),Kt=at(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),Yt={__name:"RawMaterialsTableDelete",props:["delete"],setup(i){const x=Qe(),$=i,R=async()=>{console.log("clickkkd");try{await x.deleteBranchRawMaterials($.delete.row.id),de.create({type:"negative",icon:"warning",message:`Raw Materials ${$.delete.row.name}  successfully deleted`,timeout:1e3,position:"top"}),b.value=!1}catch(p){console.error(p.message)}},b=S(!1),u=()=>{b.value=!0};return(p,m)=>(h(),q(O,null,[e(B,{onClick:u,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"",align:"center"},{default:t(()=>[e(Y,{class:"bg-negative",delay:200},{default:t(()=>[D("Delete")]),_:1})]),_:1}),e(G,{modelValue:b.value,"onUpdate:modelValue":m[0]||(m[0]=v=>b.value=v)},{default:t(()=>[e(F,null,{default:t(()=>[e(P,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[Et,Kt]),_:1}),e(De,{class:"q-mb-md"}),e(P,null,{default:t(()=>[e(Ce,{align:"right",class:"q-pt-none"},{default:t(()=>[W(e(B,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[J]]),e(B,{dense:"",label:"Delete",color:"negative",onClick:R,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Gt=Z(Yt,[["__scopeId","data-v-17ad5e9f"]]);const lt=i=>(ae("data-v-74a3fea6"),i=i(),le(),i),Wt={class:"row justify-between"},Jt={class:"q-my-sm"},Xt={key:0,class:"spinner-wrapper"},Zt={key:1},ea={key:0,class:"data-error"},ta=lt(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),aa=lt(()=>a("div",{class:"text-white"},"Edit Available Stocks",-1)),la={class:"row justify-center q-gutter-x-md"},oa={__name:"RawMaterialsTable",setup(i){const $=ce().params.branch_id,R=Qe(),b=S(""),u=S(!0),p=S([]),m=S(!1),v=S({rowsPerPage:0}),w=T(()=>R.branchRawMaterials),s=T(()=>b.value?w.value.filter(d=>d.name.toLowerCase().includes(b.value.toLowerCase())):w.value);$e(async()=>{console.log("props.branchId in onMounted:",$),$&&await l($)});const l=async d=>{try{u.value=!0;const r=await R.fetchBranchRawMaterials(d);w.value=r,w.value.length||(m.value=!0),console.log("Branch Raw Materials",w.value)}catch(r){console.log("Error fetching branch product:",r),m.value=!0}finally{u.value=!1}};async function o(d,r){try{const C=await ve.put("/api/update-branch-rawMaterials/"+d.id,{total_quantity:parseInt(r)});if(C.status===200){const g=p.value.findIndex(V=>V.id==d.id);p.value[g]=parseInt(r),de.create({type:"positive",message:C.data.message,timout:1e3,position:"top"})}}catch(C){console.error("Error updating price:",C)}}Fe(b,async d=>{u.value=!0,await new Promise(r=>setTimeout(r,1e3)),u.value=!1,m.value=s.value.length===0});const n=d=>{const r=d.total_quantity;if(d.ingredients.unit==="Grams"&&r<1e3)return"bg-red";let g;return r>=1e3?g=r/1e3:g=r,g<5?g<=2?"bg-red":(g<=3,"bg-warning"):"bg-positive"},c=d=>{const r=d.total_quantity,C=d.ingredients.unit;if(r>1e3){const g=(r/1e3).toFixed(2);return g.endsWith(".00")?`${Math.round(r/1e3)} kilos`:`${g} kilos`}else return r>1?`${r} ${C}`:`${r} ${C}`},_=[{name:"code",label:"Raw Materials Code",align:"center",field:d=>{var r,C;return(C=(r=d==null?void 0:d.ingredients)==null?void 0:r.code)!=null?C:"No Code"},format:d=>`${d}`,sortable:!0},{name:"name",label:"Raw Materials Name",align:"center",field:d=>{var r,C;return(C=(r=d==null?void 0:d.ingredients)==null?void 0:r.name)!=null?C:"No Code"},format:d=>`${d}`,sortable:!0},{name:"total_quantity",label:"Available Stocks",align:"center",field:"total_quantity",sortable:!0},{name:"action",label:"Action",align:"center",sortable:!0}];return(d,r)=>(h(),q(O,null,[a("div",Wt,[a("div",null,[e(K,{class:"q-pb-lg q-pl-md",modelValue:b.value,"onUpdate:modelValue":r[0]||(r[0]=C=>b.value=C),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"5000px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(re,{name:"search"})]),_:1},8,["modelValue"])]),a("div",Jt,[e(Qt)])]),u.value?(h(),q("div",Xt,[e(Ie,{size:"50px",color:"primary"})])):(h(),q("div",Zt,[s.value.length===0?(h(),q("div",ea,[e(re,{name:"warning",color:"warning",size:"4em"}),ta])):(h(),N(oe,{key:1,class:"table-container sticky-header",filter:b.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:_,rows:s.value,"row-key":"name","virtual-scroll":"",pagination:v.value,"onUpdate:pagination":r[1]||(r[1]=C=>v.value=C),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"340px"}},{"body-cell-total_quantity":t(C=>[e(I,{props:C},{default:t(()=>[e(X,{square:"",class:st(["text-white cursor-pointer",n(C.row)])},{default:t(()=>[D(f(c(C.row))+" ",1),e(Y,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[aa]),_:1}),e(qe,{"onUpdate:modelValue":[g=>o(C.row,g),g=>C.row.total_quantity=g],modelValue:C.row.total_quantity,"auto-save":""},{default:t(g=>[e(K,{modelValue:g.value,"onUpdate:modelValue":V=>g.value=V,dense:"",suffix:C.row.ingredients.unit,mask:"########",autofocus:"",counter:"",onKeyup:ke(g.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","suffix","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["class"])]),_:2},1032,["props"])]),"body-cell-action":t(C=>[e(I,{props:C},{default:t(()=>[a("div",la,[e(Gt,{delete:C},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var na=Z(oa,[["__scopeId","data-v-74a3fea6"]]);const sa={class:"q-gutter-sm"},ra={class:"q-gutter-x-sm"},ia={__name:"RawMaterialsPage",setup(i){return(x,$)=>(h(),q("div",sa,[a("div",ra,[e(X,{label:"Good",class:"text-white",color:"positive"}),e(X,{label:"Warning",class:"text-white",color:"warning"}),e(X,{label:"Danger",class:"text-white",color:"red"})]),a("div",null,[e(na)])]))}};const Ye=i=>(ae("data-v-239e42ee"),i=i(),le(),i),da=Ye(()=>a("div",{class:"row justify-between"},[a("div",{class:"text-h6"},"Baker Report")],-1)),ca={class:"text-subtitle1 text-weight-regular"},ua={class:"row q-gutter-md"},ma={class:"text-h6 row justify-between"},pa={class:"row items-start q-gutter-x-md text-overline elegant-text"},_a={class:"row q-gutter-x-sm q-gutter-y-xm"},ga={class:"row q-gutter-x-sm q-gutter-y-xm"},fa={class:"row q-gutter-x-sm"},ya={class:"row q-gutter-x-sm"},va={class:"row"},ha={class:"col-6"},ba=Ye(()=>a("div",{class:"text-subtitle1",align:"center"},"Ingredients",-1)),wa={class:"row justify-center q-gutter-x-lg q-pa-lg"},xa={class:"row items-start"},$a={class:"col-6"},ka=Ye(()=>a("div",{class:"text-subtitle1",align:"center"},"Bread",-1)),Ca={class:"row justify-center q-gutter-x-lg q-pa-lg"},Ra={key:0},Pa={key:1},Sa={key:2},qa={class:"q-ma-sm"},Va={class:"q-ma-sm",align:"center"},Da=["src"],Ba={__name:"BakerReportPanel",props:["bakersReport"],setup(i){Ae.exports.vfs=et;const x=i,$=x.bakersReport;console.log("Bakers Report",x.bakersReport);const R=S(!0),b=S(!1),u=S(""),p=c=>he.formatDate(c,"MMM. DD, YYYY"),m=c=>c?c.split(" ").map(_=>_.charAt(0).toUpperCase()+_.slice(1).toLowerCase()).join(" "):"",v=c=>{const _=g=>g?g.charAt(0).toUpperCase()+g.slice(1).toLowerCase():"",d=c.firstname?_(c.firstname):"No Firstname",r=c.middlename?_(c.middlename).charAt(0)+".":"",C=c.lastname?_(c.lastname):"No Lastname";return`${d} ${r} ${C}`.trim()},w=c=>{const _=new Date(c),d={hour:"2-digit",minute:"2-digit",hour12:!0};return _.toLocaleTimeString(void 0,d)},s=c=>{switch(c){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},l=c=>c?c.recipe_category==="Filling"?c.filling_bakers_reports||[]:c.recipe_category==="Dough"?c.bread_production_reports||[]:[]:(console.error("No bakerReport provided"),[]),o=c=>{var k,H,z,L;console.log("bakerReport",c);const _=`${c.branch_recipe.recipe.name} (${c.recipe_category})`,d=c.branch_recipe.recipe.target,r=c.actual_target,C=c.kilo,g=c.over,V=c.short,y={table:{widths:["50%","50%"],body:[[{text:"Recipe Name",style:"tableHeader",alignment:"left"},{text:_,style:"tableHeader",alignment:"center"}],[{text:"Target per Kilo",style:"tableHeader",alignment:"left"},{text:`${d} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Actual Target",style:"tableHeader",alignment:"left"},{text:`${r} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Kilo",style:"tableHeader",alignment:"left"},{text:`${C} kg/s`,style:"tableHeader",alignment:"center"}],[{text:"Over",style:"tableHeader",alignment:"left"},{text:`${g} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Short",style:"tableHeader",alignment:"left"},{text:`${V} pcs`,style:"tableHeader",alignment:"center"}]]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}};return{content:[{text:"Baker Report",style:"header",alignment:"center"},{columns:[{text:`Branch Name: ${c.branch.name||"No name available"}
                Baker: ${v(((k=c==null?void 0:c.user)==null?void 0:k.employee)||"Unknown Baker Name")}
                Recipe: ${((H=c.recipe)==null?void 0:H.name)||"Unknown Recipe"} (${c.recipe_category||"Unknown Category"})
             `,width:"80%",margin:[0,0,0,10]},{text:`Date: ${p(((z=x.bakersReport[0])==null?void 0:z.created_at)||((L=x.bakersReport[1])==null?void 0:L.created_at)||"No name available")}
                Time: ${w(c.created_at)}
                Status: ${m(c.status)}`,margin:[0,0,0,10]}]},{columns:[{width:"50%",stack:[{text:"Bread Production",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*"],body:[[{text:"Bread Name",style:"tableHeader",alignment:"center"},{text:"Production",style:"tableHeader",alignment:"center"}],...l(c).map(E=>{var ee;return[{text:((ee=E==null?void 0:E.bread)==null?void 0:ee.name)||"Unknown Bread",style:"body"},{text:c.recipe_category==="Filling"?`${(E==null?void 0:E.filling_production)||"0"} pcs`:`${E==null?void 0:E.bread_new_production} pcs`,style:"body",alignment:"center"}]})]}}],columnGap:10},{width:"50%",stack:[{text:"Ingredients",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*"],body:[[{text:"Ingredient Code",style:"tableHeader",alignment:"center"},{text:"Quantity",style:"tableHeader",alignment:"center"}],...(c.ingredient_bakers_reports||[]).map(E=>{var ee,Q;return[{text:((ee=E==null?void 0:E.ingredients)==null?void 0:ee.code)||"Unknown Ingredient",style:"body"},{text:`${(E==null?void 0:E.quantity)||"Unknown Quantity"} ${((Q=E==null?void 0:E.ingredients)==null?void 0:Q.unit)||""}`,style:"body",alignment:"center"}]})]}}],columnGap:10}],columnGap:20},{canvas:[{type:"line",x1:0,y1:25,x2:555,y2:25,lineWidth:1,dash:{length:5,space:5},lineColor:"#000000",margin:[0,20,0,0]}]},{margin:[0,20,0,0],stack:[{text:"Summary",style:"subheader",alignment:"center"},y]}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableHeader:{bold:!0,fontSize:10,color:"black"},body:{fontSize:8}},pageMargins:[20,20,20,20]}},n=c=>{const _=o(c);Ae.exports.createPdf(_).getDataUrl(d=>{u.value=d,b.value=!0})};return(c,_)=>(h(),q("div",null,[e(F,{class:"my-card q-pa-md"},{default:t(()=>{var d,r,C,g,V,y;return[da,a("div",ca,[a("div",null," Name: "+f(v(((r=(d=A($)[0])==null?void 0:d.user)==null?void 0:r.employee)||((g=(C=A($)[1])==null?void 0:C.user)==null?void 0:g.employee)||"No name available")),1),a("div",null," Date: "+f(`${p(((V=x.bakersReport[0])==null?void 0:V.created_at)||((y=x.bakersReport[1])==null?void 0:y.created_at)||"No name available")}`),1)]),e(P,null,{default:t(()=>[a("div",ua,[(h(!0),q(O,null,se(A($),(k,H)=>(h(),q("div",{key:H,class:"row q-gutter-sm"},[e(F,{flat:"",dense:"",bordered:"",class:"q-pa-md q-my-sm user-card",style:{width:"675px","max-width":"1500px"}},{default:t(()=>{var z;return[a("div",ma,[a("div",null,f(`${m((z=k.branch_recipe.recipe)==null?void 0:z.name)||"Unknown Recipe"} (${k.recipe_category||"Unknown Category"})`),1),e(B,{padding:"xs md",label:"Print",icon:"print",outline:"",onClick:L=>n(k),class:"user-button"},null,8,["onClick"])]),a("div",null,"Time: "+f(w(k.created_at)),1),a("div",null,[D(" Status: "),e(X,{align:"middle",color:s(k.status)},{default:t(()=>[D(f(m(k.status)),1)]),_:2},1032,["color"])]),e(P,null,{default:t(()=>[a("div",pa,[a("div",_a,[D(" Actual Target: "),a("div",null,[e(X,{outline:"",align:"middle",color:"teal"},{default:t(()=>[D(f(`${(k==null?void 0:k.actual_target)||"No target"} pcs`),1)]),_:2},1024)])]),a("div",ga,[D(" Kilo: "),a("div",null,[e(X,{outline:"",align:"middle",color:"teal"},{default:t(()=>[D(f(`${(k==null?void 0:k.kilo)||"No Kilo"} kgs`),1)]),_:2},1024)])]),a("div",fa,[D(" Over: "),a("div",null,[e(X,{outline:"",align:"middle",color:"teal"},{default:t(()=>[D(f(`${k.over} pcs`),1)]),_:2},1024)])]),a("div",ya,[D(" Short: "),a("div",null,[e(X,{outline:"",align:"middle",color:"teal"},{default:t(()=>[D(f(`${k.short} pcs`),1)]),_:2},1024)])])])]),_:2},1024),e(P,null,{default:t(()=>[a("div",va,[a("div",ha,[ba,a("div",wa,[a("div",null,[(h(!0),q(O,null,se(k.ingredient_bakers_reports||[],(L,E)=>{var ee,Q;return h(),q("div",{key:E,class:"row justify-between q-gutter-y-lg q-gutter-x-xl text-weight-light"},[a("div",null,f(((ee=L==null?void 0:L.ingredients)==null?void 0:ee.name)||"Unknown Ingredient"),1),a("div",xa,f(`${(L==null?void 0:L.quantity)||"Unknown Quantity"} ${((Q=L==null?void 0:L.ingredients)==null?void 0:Q.unit)||""}`),1)])}),128))])])]),a("div",$a,[ka,a("div",Ca,[a("div",null,[(h(!0),q(O,null,se(l(k),(L,E)=>{var ee;return h(),q("div",{key:E,class:"row justify-between q-gutter-y-lg q-gutter-x-xl text-weight-light"},[a("div",null,f(((ee=L==null?void 0:L.bread)==null?void 0:ee.name)||"Unknown Bread"),1),a("div",null,[k.recipe_category==="Filling"?(h(),q("div",Ra,f(`${(L==null?void 0:L.filling_production)||"0"} pcs`),1)):k.recipe_category==="Dough"?(h(),q("div",Pa,f(`${L==null?void 0:L.bread_new_production} pcs`),1)):(h(),q("div",Sa,f("0 pcs")))])])}),128))])])])])]),_:2},1024)]}),_:2},1024)]))),128))])]),_:1})]}),_:1}),e(G,{modelValue:b.value,"onUpdate:modelValue":_[0]||(_[0]=d=>b.value=d),"backdrop-filter":c.backdropFilter,maximized:R.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[a("div",qa,[a("div",Va,[W((h(),N(B,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},{default:t(()=>[e(Y,null,{default:t(()=>[D("Close")]),_:1})]),_:1})),[[J]])]),a("div",null,[a("iframe",{src:u.value,width:"100%",height:"700px"},null,8,Da)])])]),_:1},8,["modelValue","backdrop-filter","maximized"])]))}};var Ua=Z(Ba,[["__scopeId","data-v-239e42ee"]]);const Ta={class:"row justify-between text-white"},Na=a("div",{class:"text-h6"},"Bread Report",-1),Aa={class:"row justify-end q-mt-md"},Fa={class:"text-h6"},Ia={__name:"BreadReport",props:["reports"],setup(i){const{dialogRef:x,onDialogHide:$,onDialogOK:R,onDialogCancel:b}=be(),u=i;console.log("Reports data structure:",u.reports);const p=l=>l?l.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" "):"",m=[{name:"name",label:"Bread Name",field:l=>(console.log("Row data:",l),l.bread.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:l=>`${l}`},{name:"newProduction",label:"New Production (PCS)",field:"new_production",format:l=>`${l}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:l=>`${l}`},{name:"breadOut",label:"Bread Out (PCS)",field:"bread_out",format:l=>`${l}`},{name:"breadSold",label:"Bread Sold (PCS)",field:"bread_sold",format:l=>`${l}`},{name:"total",label:"Bread Total (PCS)",field:"total",format:l=>`${l}`},{name:"sales",label:"Total Sales",field:"sales"}],v=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l),w=T(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),s=T(()=>{const l=w.value.reduce((o,n)=>{const c=parseFloat(n.sales)||0;return console.log(`Adding salesAmount: ${c} to total: ${o}`),o+c},0);return console.log("Overall Total Sales computed as:",l),l});return console.log("Overall Total Sales:",s.value),(l,o)=>(h(),N(G,{ref_key:"dialogRef",ref:x,onHide:A($)},{default:t(()=>[e(F,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(P,{style:{"background-color":"#795548"}},{default:t(()=>[a("div",Ta,[Na,W((h(),N(B,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(Y,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[J]])])]),_:1}),e(P,null,{default:t(()=>[e(oe,{filter:l.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:m,rows:w.value,"row-key":"name","virtual-scroll":"",pagination:l.pagination,"onUpdate:pagination":o[0]||(o[0]=n=>l.pagination=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(n=>[e(I,{props:n},{default:t(()=>[a("span",null,f(`${p(n.row.bread.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(n=>[e(I,{props:n},{default:t(()=>[a("span",null,f(`${v(n.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(n=>[e(I,{props:n},{default:t(()=>[a("span",null,f(`${v(n.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(P,null,{default:t(()=>[a("div",Aa,[a("div",Fa," Overall Total Sales: "+f(v(s.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Ha={class:"row justify-between text-white"},Ma=a("div",{class:"text-h6"},"Selecta Report",-1),La={class:"row justify-end q-mt-md"},za={class:"text-h6"},ja={__name:"SelectaReport",props:["reports"],setup(i){const{dialogRef:x,onDialogHide:$,onDialogOK:R,onDialogCancel:b}=be(),u=i;console.log("Reports data structure:",u.reports);const p=l=>l?l.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" "):"",m=[{name:"name",label:"Selecta Name",field:l=>(console.log("Row data:",l),l.selecta.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:l=>`${l}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:l=>`${l}`},{name:"out",label:"Selecta Out (PCS)",field:"out",format:l=>`${l}`},{name:"sold",label:"Selecta Sold (PCS)",field:"sold",format:l=>`${l}`},{name:"sales",label:"Total Sales",field:"sales"}],v=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l),w=T(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),s=T(()=>{const l=w.value.reduce((o,n)=>{const c=parseFloat(n.sales)||0;return console.log(`Adding salesAmount: ${c} to total: ${o}`),o+c},0);return console.log("Overall Total Sales computed as:",l),l});return console.log("Filtered Rows:",w.value),(l,o)=>(h(),N(G,{ref_key:"dialogRef",ref:x,onHide:A($)},{default:t(()=>[e(F,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(P,{style:{"background-color":"#f44336"}},{default:t(()=>[a("div",Ha,[Ma,W((h(),N(B,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(Y,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[J]])])]),_:1}),e(P,null,{default:t(()=>[e(oe,{filter:l.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:m,rows:w.value,"row-key":"name","virtual-scroll":"",pagination:l.pagination,"onUpdate:pagination":o[0]||(o[0]=n=>l.pagination=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(n=>[e(I,{props:n},{default:t(()=>[a("span",null,f(`${p(n.row.selecta.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(n=>[e(I,{props:n},{default:t(()=>[a("span",null,f(`${v(n.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(n=>[e(I,{props:n},{default:t(()=>[a("span",null,f(`${v(n.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(P,null,{default:t(()=>[a("div",La,[a("div",za," Overall Total Sales: "+f(v(s.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Oa={class:"row justify-between text-white"},Qa=a("div",{class:"text-h6"},"Softdrinks Report",-1),Ea={class:"row justify-end q-mt-md"},Ka={class:"text-h6"},Ya={__name:"SoftdrinksReport",props:["reports"],setup(i){const{dialogRef:x,onDialogHide:$,onDialogOK:R,onDialogCancel:b}=be(),u=i;console.log("Reports data structure:",u.reports);const p=l=>l?l.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" "):"",m=[{name:"name",label:"Softdrinks Name",field:l=>(console.log("Row data:",l),l.softdrinks.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:l=>`${l}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:l=>`${l}`},{name:"out",label:"Softdrinks Out (PCS)",field:"out",format:l=>`${l}`},{name:"sold",label:"Softdrinks Sold (PCS)",field:"sold",format:l=>`${l}`},{name:"sales",label:"Total Sales",field:"sales"}],v=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l),w=T(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),s=T(()=>{const l=w.value.reduce((o,n)=>{const c=parseFloat(n.sales)||0;return console.log(`Adding salesAmount: ${c} to total: ${o}`),o+c},0);return console.log("Overall Total Sales computed as:",l),l});return console.log("Filtered Rows:",w.value),(l,o)=>(h(),N(G,{ref_key:"dialogRef",ref:x,onHide:A($)},{default:t(()=>[e(F,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(P,{style:{"background-color":"#9c27b0"}},{default:t(()=>[a("div",Oa,[Qa,W((h(),N(B,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(Y,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[J]])])]),_:1}),e(P,null,{default:t(()=>[e(oe,{filter:l.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:m,rows:w.value,"row-key":"name","virtual-scroll":"",pagination:l.pagination,"onUpdate:pagination":o[0]||(o[0]=n=>l.pagination=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(n=>[e(I,{props:n},{default:t(()=>[a("span",null,f(`${p(n.row.softdrinks.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(n=>[e(I,{props:n},{default:t(()=>[a("span",null,f(`${v(n.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(n=>[e(I,{props:n},{default:t(()=>[a("span",null,f(`${v(n.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(P,null,{default:t(()=>[a("div",Ea,[a("div",Ka," Overall Total Sales: "+f(v(s.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Ga={class:"row justify-between text-white"},Wa=a("div",{class:"text-h6"},"Cake Report",-1),Ja={class:"row justify-end q-mt-md"},Xa={class:"text-h6"},Za={__name:"CakeReport",props:["reports"],setup(i){const{dialogRef:x,onDialogHide:$,onDialogOK:R,onDialogCancel:b}=be(),u=i;console.log("Report cake:",u.reports);const p=T(()=>(console.log("Filtered cake rows:",u.reports||[]),u.reports||[])),m=l=>{const o=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",n=l.firstname?o(l.firstname):"No Firstname",c=l.middlename?o(l.middlename).charAt(0)+".":"",_=l.lastname?o(l.lastname):"No Lastname";return`${n} ${c} ${_}`},v=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l).replace("\u20B1","\u20B1 "),w=T(()=>{const l=p.value.reduce((o,n)=>{const c=parseFloat(n.cake_report.price)||0;return console.log(`Adding salesAmount: ${c} to total: ${o}`),o+c},0);return console.log("Overall Total Sales computed as:",l),l}),s=[{name:"name",label:"Cake Name",field:l=>(console.log("Row data:",l),l.cake_report.name||"N/A")},{name:"cake_maker",label:"Cake Maker Name",field:l=>m(l.cake_report.user.employee)},{name:"price",label:"Price",field:l=>v(l.cake_report.price)},{name:"layers",label:"Layers",field:l=>l.cake_report.layers},{name:"sales_status",label:"Sale Status",field:l=>l.cake_report.sales_status}];return(l,o)=>(h(),N(G,{ref_key:"dialogRef",ref:x,onHide:A($)},{default:t(()=>[e(F,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(P,{style:{"background-color":"#009688"}},{default:t(()=>[a("div",Ga,[Wa,W((h(),N(B,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(Y,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[J]])])]),_:1}),e(P,null,{default:t(()=>[e(oe,{filter:l.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:s,rows:p.value,"row-key":"name","virtual-scroll":"",pagination:l.pagination,"onUpdate:pagination":o[0]||(o[0]=n=>l.pagination=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["filter","rows","pagination"]),a("div",Ja,[a("div",Xa," Overall Total Sales: "+f(v(w.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},el={class:"row justify-between text-white"},tl=a("div",{class:"text-h6"},"Other Products Report",-1),al={class:"row justify-end q-mt-md"},ll={class:"text-h6"},ol={__name:"OtherProductsReport",props:["reports"],setup(i){const{dialogRef:x,onDialogHide:$,onDialogOK:R,onDialogCancel:b}=be(),u=i,p=T(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),m=l=>l?l.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" "):"",v=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l),w=[{name:"name",label:"Product Name",field:l=>(console.log("Row data:",l),l.other_products.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:l=>`${l}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:l=>`${l}`},{name:"out",label:"Product Out (PCS)",field:"out",format:l=>`${l}`},{name:"sold",label:"Product Sold (PCS)",field:"sold",format:l=>`${l}`},{name:"sales",label:"Total Sales",field:"sales"}],s=T(()=>{const l=p.value.reduce((o,n)=>{const c=parseFloat(n.sales)||0;return console.log(`Adding salesAmount: ${c} to total: ${o}`),o+c},0);return console.log("Overall Total Sales computed as:",l),l});return(l,o)=>(h(),q("div",null,[e(G,{ref_key:"dialogRef",ref:x,onHide:A($)},{default:t(()=>[e(F,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(P,{style:{"background-color":"#607d8b"}},{default:t(()=>[a("div",el,[tl,W((h(),N(B,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(Y,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[J]])])]),_:1}),e(P,null,{default:t(()=>[e(oe,{filter:l.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:w,rows:p.value,"row-key":"name","virtual-scroll":"",pagination:l.pagination,"onUpdate:pagination":o[0]||(o[0]=n=>l.pagination=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(n=>[e(I,{props:n},{default:t(()=>[a("span",null,f(`${m(n.row.other_products.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(n=>[e(I,{props:n},{default:t(()=>[a("span",null,f(`${v(n.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(n=>[e(I,{props:n},{default:t(()=>[a("span",null,f(`${v(n.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(P,null,{default:t(()=>[a("div",al,[a("div",ll," Overall Total Sales: "+f(v(s.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"])]))}};const nl=i=>(ae("data-v-0eb81aec"),i=i(),le(),i),sl=nl(()=>a("div",{class:"text-h6",align:"center"},"Products Report",-1)),rl={class:"item-start q-gutter-md",align:"center"},il={class:"text-weight-regular text-subtitle1"},dl={__name:"ProductsReport",props:["sales_Reports"],setup(i){const x=i,$=x.sales_Reports;console.log("sales report2",x);const R=Re(),b=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(s),u=s=>{R.dialog({component:Ia,componentProps:{reports:s}})},p=s=>{R.dialog({component:ja,componentProps:{reports:s}})},m=s=>{R.dialog({component:Ya,componentProps:{reports:s}})},v=s=>{R.dialog({component:Za,componentProps:{reports:s}})},w=s=>{R.dialog({component:ol,componentProps:{reports:s}})};return(s,l)=>(h(),q("div",null,[e(F,{class:"user-card"},{default:t(()=>[e(P,null,{default:t(()=>[sl]),_:1}),e(P,null,{default:t(()=>[a("div",rl,[e(B,{onClick:l[0]||(l[0]=o=>u(x.sales_Reports[0].bread_reports)),"no-caps":"",label:"Bread Report",rounded:"",color:"brown",style:{width:"130px"},class:"user-button"}),e(B,{onClick:l[1]||(l[1]=o=>p(A($)[0].selecta_reports)),"no-caps":"",label:"Selecta Report",rounded:"",color:"red-6",style:{width:"130px"},class:"user-button"}),e(B,{onClick:l[2]||(l[2]=o=>m(A($)[0].softdrinks_reports)),"no-caps":"",label:"Softdrinks Report",rounded:"",color:"accent",style:{width:"150px"},class:"user-button"}),e(B,{onClick:l[3]||(l[3]=o=>v(A($)[0].cake_sales_reports)),"no-caps":"",label:"Cake Report",rounded:"",color:"teal",style:{width:"130px"},class:"user-button"}),e(B,{onClick:l[4]||(l[4]=o=>w(A($)[0].other_products_reports)),"no-caps":"",label:"Other Products Report",rounded:"",color:"blue-grey",style:{width:"180px"},class:"user-button"})])]),_:1}),e(P,null,{default:t(()=>[a("div",il," Total sales: "+f(b(A($)[0].products_total_sales)),1)]),_:1})]),_:1})]))}};var cl=Z(dl,[["__scopeId","data-v-0eb81aec"]]);const ul={class:"row justify-between text-white"},ml=a("div",{class:"text-h6"},"Denomination Report",-1),pl={class:"row text-weight-regular text-subtitle1"},_l={class:"col-6"},gl={class:"col-6"},fl={class:"row justify-end q-mt-md"},yl={class:"text-h6"},vl={__name:"DenominationDialogReport",props:{reports:Array,total:Number},setup(i){const{dialogRef:x,onDialogHide:$,onDialogOK:R,onDialogCancel:b}=be(),u=i;console.log("Denomination Props",u.reports);const p=u.reports[0];console.log("Reports data structure:",u.reports);const m=w=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(w),v=T(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[]));return console.log("Filtered Rows:",v.value),(w,s)=>(h(),N(G,{ref_key:"dialogRef",ref:x,onHide:A($)},{default:t(()=>[e(F,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(P,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",ul,[ml,W((h(),N(B,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(Y,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[J]])])]),_:1}),e(P,null,{default:t(()=>[a("div",pl,[a("div",_l,[a("div",null,"1000 Bills: "+f(A(p).oneThousandBills),1),a("div",null,"500 Bills: "+f(A(p).fiveHundredBills),1),a("div",null,"200 Bills: "+f(A(p).twoHundredBills),1),a("div",null,"100 Bills: "+f(A(p).oneHundredBills),1),a("div",null,"50 Bills: "+f(A(p).fiftyBills),1),a("div",null,"20 Bills: "+f(A(p).twentyBills),1)]),a("div",gl,[a("div",null,"20 coins: "+f(A(p).twentyCoins),1),a("div",null,"10 coins: "+f(A(p).tenCoins),1),a("div",null,"5 coins: "+f(A(p).fiveCoins),1),a("div",null,"1 coins: "+f(A(p).oneCoins),1),a("div",null,"25 cents: "+f(A(p).twentyFiveCents),1)])])]),_:1}),e(P,null,{default:t(()=>[a("div",fl,[a("div",yl," Overall Total Denomination: "+f(m(i.total||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const hl=i=>(ae("data-v-0bfb79ef"),i=i(),le(),i),bl=hl(()=>a("div",{class:"text-h6",align:"center"},"Denomination Report",-1)),wl={class:"q-gutter-x-md",align:"center"},xl={class:"text-weight-regular text-subtitle1"},$l={__name:"DenominationReport",props:["sales_Reports"],setup(i){const x=i;x.sales_Reports,console.log("Denomination report",x);const $=Re(),R=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(u),b=(u,p)=>{$.dialog({component:vl,componentProps:{reports:u,total:p}})};return(u,p)=>(h(),q("div",null,[e(F,{class:"user-card"},{default:t(()=>[e(P,null,{default:t(()=>[bl]),_:1}),e(P,null,{default:t(()=>[a("div",wl,[e(B,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",onClick:p[0]||(p[0]=m=>b(x.sales_Reports[0].denomination_reports,x.sales_Reports[0].denomination_total)),class:"user-button"})])]),_:1}),e(P,null,{default:t(()=>[a("div",xl," Total Denomination : "+f(R(x.sales_Reports[0].denomination_total)),1)]),_:1})]),_:1})]))}};var kl=Z($l,[["__scopeId","data-v-0bfb79ef"]]);const Cl={class:"row justify-between text-white"},Rl=a("div",{class:"text-h6"},"Expenses Report",-1),Pl={class:"row justify-end q-mt-md"},Sl={class:"text-h6"},ql={__name:"ExpensesDialog",props:{reports:Array,total:Number},setup(i){const{dialogRef:x,onDialogHide:$,onDialogOK:R,onDialogCancel:b}=be(),u=i;u.reports,console.log("Expenses total",u.total);const p=s=>s?s.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",m=[{name:"name",label:"Expenses Name",field:s=>(console.log("Row data:",s),s.name||"N/A"),align:"center"},{name:"description",label:"Description",field:"description",align:"center"},{name:"amount",label:"Amount",field:"amount",align:"center"}];console.log("Reports data structure:",u.reports);const v=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(s),w=T(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[]));return console.log("Expenses:",w.value),(s,l)=>(h(),N(G,{ref_key:"dialogRef",ref:x,onHide:A($),onOk:s.handleButtonClick,onCancel:A(b)},{default:t(()=>[e(F,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(P,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",Cl,[Rl,W((h(),N(B,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(Y,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[J]])])]),_:1}),e(P,null,{default:t(()=>[e(oe,{filter:s.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:m,rows:w.value,"row-key":"name","virtual-scroll":"",pagination:s.pagination,"onUpdate:pagination":l[0]||(l[0]=o=>s.pagination=o),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(o=>[e(I,{props:o},{default:t(()=>[a("span",null,f(`${p(o.row.name)}`),1)]),_:2},1032,["props"])]),"body-cell-amount":t(o=>[e(I,{props:o},{default:t(()=>[a("span",null,f(`${v(o.row.amount)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(P,null,{default:t(()=>[a("div",Pl,[a("div",Sl," Overall Total Expenses: "+f(v(i.total||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","onOk","onCancel"]))}};const Vl=i=>(ae("data-v-338c99d0"),i=i(),le(),i),Dl=Vl(()=>a("div",{class:"text-h6",align:"center"},"Expenses Report",-1)),Bl={class:"q-gutter-x-md",align:"center"},Ul={class:"text-weight-regular text-subtitle1"},Tl={__name:"ExpensesReport",props:["sales_Reports"],setup(i){const x=i;console.log("Expenses Data",x.sales_Reports[0].expenses_reports);const $=Re(),R=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(u),b=(u,p)=>{$.dialog({component:ql,componentProps:{reports:u,total:p}})};return(u,p)=>(h(),q("div",null,[e(F,{class:"user-card"},{default:t(()=>[e(P,null,{default:t(()=>[Dl]),_:1}),e(P,null,{default:t(()=>[a("div",Bl,[e(B,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",class:"user-button",onClick:p[0]||(p[0]=m=>b(x.sales_Reports[0].expenses_reports,x.sales_Reports[0].expenses_total))})])]),_:1}),e(P,null,{default:t(()=>[a("div",Ul," Total Expenses : "+f(R(x.sales_Reports[0].expenses_total)),1)]),_:1})]),_:1})]))}};var Nl=Z(Tl,[["__scopeId","data-v-338c99d0"]]);const Al={class:"row justify-between text-white"},Fl=a("div",{class:"text-h6"},"Credits Report",-1),Il={class:"row justify-end q-mt-md"},Hl={class:"text-h6"},Ml={__name:"CreditsReportDialog",props:{reports:Array,total:Number},setup(i){const{dialogRef:x,onDialogHide:$,onDialogOK:R,onDialogCancel:b}=be(),u=i,p=u.reports;console.log("creditReports data",p),p.forEach((n,c)=>{console.log(`Report ${c}:`,n),console.log(`Credit Products for Report ${c}:`,n.credit_products.total_amount)});const m=T(()=>p.flatMap(n=>n.credit_products.map(c=>{const _=parseInt(c.pieces,10)||0,d=parseFloat(c.price)||0,r=_*d;return{...c,total_amount:r}})));console.log("All Credit Products:",m.value[0]);const v=n=>n?n.split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1).toLowerCase()).join(" "):"",w=n=>{const c=C=>C?C.charAt(0).toUpperCase()+C.slice(1).toLowerCase():"",_=n.firstname?c(n.firstname):"No Firstname",d=n.middlename?c(n.middlename).charAt(0)+".":"",r=n.lastname?c(n.lastname):"No Lastname";return`${_} ${d} ${r}`.trim()},s=[{name:"name",label:"Employee Name",field:n=>w(n.credit_user_id),align:"center"},{name:"productName",label:"Product Name",field:n=>n.product.name||"N/A",align:"center"},{name:"pieces",label:"Pieces",field:"pieces",align:"center"},{name:"price",label:"Price",field:"price",align:"center"},{name:"total_amount",label:"Total Amount",field:"total_amount",align:"center"}];console.log("Reports data structure:",u.reports);const l=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(n),o=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(n);return(n,c)=>(h(),N(G,{ref_key:"dialogRef",ref:x,onHide:A($),onOk:n.handleButtonClick,onCancel:A(b)},{default:t(()=>[e(F,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(P,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",Al,[Fl,W((h(),N(B,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(Y,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[J]])])]),_:1}),e(P,null,{default:t(()=>[e(oe,{filter:n.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:s,rows:m.value,"row-key":"name","virtual-scroll":"",pagination:n.pagination,"onUpdate:pagination":c[0]||(c[0]=_=>n.pagination=_),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-productName":t(_=>[e(I,{props:_},{default:t(()=>[a("span",null,f(`${v(_.row.product.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(_=>[e(I,{props:_},{default:t(()=>[a("span",null,f(`${l(_.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-total_amount":t(_=>[e(I,{props:_},{default:t(()=>[a("span",null,f(`${o(_.row.total_amount)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(P,null,{default:t(()=>[a("div",Il,[a("div",Hl," Overall Credits Total: "+f(l(i.total||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","onOk","onCancel"]))}};const Ll=i=>(ae("data-v-29d6ba68"),i=i(),le(),i),zl=Ll(()=>a("div",{class:"text-h6",align:"center"},"Credits Report",-1)),jl={class:"q-gutter-x-md",align:"center"},Ol={class:"text-weight-regular text-subtitle1"},Ql={__name:"CreditsReport",props:["sales_Reports"],setup(i){const x=i,$=Re(),R=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(u),b=(u,p)=>{$.dialog({component:Ml,componentProps:{reports:u,total:p}})};return(u,p)=>(h(),q("div",null,[e(F,{class:"user-card"},{default:t(()=>[e(P,null,{default:t(()=>[zl]),_:1}),e(P,null,{default:t(()=>[a("div",jl,[e(B,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",class:"user-button",onClick:p[0]||(p[0]=m=>b(x.sales_Reports[0].credit_reports,x.sales_Reports[0].credit_total))})])]),_:1}),e(P,null,{default:t(()=>[a("div",Ol," Total Credits : "+f(R(x.sales_Reports[0].credit_total)),1)]),_:1}),e(P)]),_:1})]))}};var El=Z(Ql,[["__scopeId","data-v-29d6ba68"]]);const Kl=i=>(ae("data-v-5d46a8e5"),i=i(),le(),i),Yl={class:"q-mt-lg row items-start q-gutter-md justify-center"},Gl={class:"row justify-between"},Wl=Kl(()=>a("div",{class:"text-h6"},"Sales Report",-1)),Jl={align:"right"},Xl={class:"text-subtitle1 text-weight-regular"},Zl={class:"row q-gutter-sm q-pa-md"},eo={class:"q-ma-sm"},to={class:"q-ma-sm",align:"center"},ao=["src"],lo={__name:"SalesReportPanel",props:["salesReport"],setup(i){Ae.exports.vfs=et;const x=i,$=x.salesReport;console.log("reportsData",x.salesReport);const R=S(!0),b=S(!1),u=S(""),p=o=>he.formatDate(o,"MMMM DD, YYYY"),m=o=>{const n=new Date(o),c={hour:"2-digit",minute:"2-digit",hour12:!0};return n.toLocaleTimeString(void 0,c)},v=o=>{const n=r=>r?r.charAt(0).toUpperCase()+r.slice(1).toLowerCase():"",c=o.firstname?n(o.firstname):"No Firstname",_=o.middlename?n(o.middlename).charAt(0)+".":"",d=o.lastname?n(o.lastname):"No Lastname";return`${c} ${_} ${d}`.trim()},w=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(o).replace("\u20B1","\u20B1	"),s=o=>{const n=T(()=>o.credit_reports.flatMap(Q=>Q.credit_products));console.log("All Credit Products:",n.value);const c=[{title:"Bread Production",data:o.bread_reports||[],columns:["bread.name","beginnings","price","new_production","bread_out","bread_sold","total","remaining","sales"],totals:["sales"]},{title:"Selecta Production",data:o.selecta_reports||[],columns:["selecta.name","beginnings","price","out","sold","remaining","sales"],totals:["sales"]},{title:"Softdrinks Production",data:o.softdrinks_reports||[],columns:["softdrinks.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Other Products Production",data:o.other_products_reports||[],columns:["other_products.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Cake Production",data:o.cake_sales_reports||[],columns:["cake_report.name","cake_report.user.employee","cake_report.layers","cake_report.price","cake_report.sales_status"],totals:["cake_report.price"]}],_=o.expenses_reports||[],d=n.value||[],r=o.credit_total,C=o.denomination_reports[0]||[],g=o.denomination_total,V=o.expenses_total;o.products_total_sales,o.charges_amount,o.over_total;const y={bills:[{name:"One Thousand",pcs:C.oneThousandBills||0},{name:"Five Hundred",pcs:C.fiveHundredBills||0},{name:"Two Hundred",pcs:C.twoHundredBills||0},{name:"One Hundred",pcs:C.oneHundredBills||0},{name:"Fifty",pcs:C.fiftyBills||0},{name:"Twenty",pcs:C.twentyBills||0}],coins:[{name:"Twenty",pcs:C.twentyCoins||0},{name:"Ten",pcs:C.tenCoins||0},{name:"Five",pcs:C.fiveCoins||0},{name:"One",pcs:C.oneCoins||0},{name:"Twenty Five Cents",pcs:C.twentyFiveCents||0}]},k=(Q,ue,ne)=>{const me=(te,ie)=>ie.split(".").reduce((fe,U)=>fe?fe[U]:0,te),Se=ne.reduce((te,ie)=>(te[ie]=Q.reduce((fe,U)=>fe+parseFloat(me(U,ie))||0,0),te),{});return[...Q.map(te=>ue.map(ie=>{if(ie==="cake_report.user.employee"){const fe=me(te,"cake_report.user.employee");return{text:fe?v(fe):"No Employee",style:"body",alignment:"center"}}return{text:ie.includes(".")?me(te,ie)||"-":te[ie]||"-",style:"body",alignment:"center"}})),[{text:"Overall Total",colSpan:ue.length-ne.length,style:"tableHeader",alignment:"right",color:"#020617"},...Array(ue.length-ne.length-1).fill({}),...ne.map(te=>({text:`\u20B1 ${Se[te].toFixed(2)}`,style:"tableHeader",alignment:"center",color:"#020617"}))]]},H=d.length>0?d.map(Q=>[{text:v(Q.credit_user_id),style:"body",alignment:"center"},{text:Q.product.name,style:"body",alignment:"center"},{text:Q.pieces,style:"body",alignment:"center"},{text:Q.price,style:"body",alignment:"center"},{text:Q.total_amount,style:"body",alignment:"center"}]):[[{text:"No data available",colSpan:5,alignment:"center"}]];H.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:3},{},{},{text:`${w(r)}`,style:"bodyBold",alignment:"center",colSpan:2},{}]);const z=_.length>0?_.map(Q=>[{text:Q.name,style:"body",alignment:"center"},{text:Q.description,style:"body",alignment:"center"},{text:`${w(Q.amount)}`,style:"body",alignment:"center"}]):[[{text:"No data available",colSpan:3,alignment:"center"}]];z.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:2},{},{text:`${w(V)}`,style:"bodyBold",alignment:"center"}]);const L=y.bills.map((Q,ue)=>{var ne,me;return[{text:Q.name,style:"body",alignment:"center"},{text:Q.pcs,style:"body",alignment:"center"},{text:((ne=y.coins[ue])==null?void 0:ne.name)||"",style:"body",alignment:"center"},{text:((me=y.coins[ue])==null?void 0:me.pcs)||"0",style:"body",alignment:"center"}]});L.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:3,color:"#020617"},{},{},{text:`${w(g)}`,style:"bodyBold",alignment:"right",color:"#020617"}]);const E=c.map(({title:Q,data:ue,columns:ne,totals:me})=>({stack:[{text:Q,style:"subheader",alignment:"center"},{table:{headerRows:1,widths:Array(ne.length).fill("*"),body:[ne.map(Se=>({text:Se.split(".").pop().replace(/_/g," ").replace(/\b\w/g,te=>te.toUpperCase()),style:"tableHeader",alignment:"center"})),...k(ue,ne,me)]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]})),ee={table:{widths:["50%","50%"],body:[[{text:"Total Denomination",style:"tableHeader",alignment:"left"},{text:w(g),style:"tableData",alignment:"center"}],[{text:"Total Product Sales Amount",style:"tableHeader",alignment:"left"},{text:w(o.products_total_sales),style:"tableData",alignment:"center"}],[{text:"Total Expenses",style:"tableHeader",alignment:"left"},{text:w(V),style:"tableData",alignment:"center"}],[{text:"Over Cash",style:"tableHeader",alignment:"left"},{text:w(o.over_total),style:"tableData",alignment:"center"}],[{text:"Charges",style:"tableHeader",alignment:"left"},{text:`${w(o.charges_amount)}`,style:"tableData",alignment:"center"}]]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}};return{content:[{text:"Sales Report",style:"header",alignment:"center"},{columns:[{text:`Branch Name: ${o.branch.name}
          Cashier: ${v(o.user.employee)}
          Date: ${p(o.created_at)}
Time: ${m(o.created_at)}
`,margin:[0,0,0,10]},{}]},...E,{margin:[0,5,0,0],columns:[{width:"50%",stack:[{text:"Expenses Report",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","auto","*"],body:[[{text:"Expenses Name",style:"tableHeader",alignment:"center"},{text:"Description",style:"tableHeader",alignment:"center"},{text:"Amount",style:"tableHeader",alignment:"center"}],...z]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}},{text:"Credit Report",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*","auto","auto","auto"],body:[[{text:"Employee Name",style:"tableHeader",alignment:"center"},{text:"Product Name",style:"tableHeader",alignment:"center"},{text:"Pieces",style:"tableHeader",alignment:"center"},{text:"Price",style:"tableHeader",alignment:"center"},{text:"Amount",style:"tableHeader",alignment:"center"}],...H]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]},{width:"50%",stack:[{text:"Denomination Report",style:"subheader",alignment:"center"},{table:{headerRows:0,widths:["*","auto","*","auto"],body:[[{text:"Bills",style:"tableHeader",alignment:"center"},{text:"Pcs",style:"tableHeader",alignment:"center"},{text:"Coins",style:"tableHeader",alignment:"center"},{text:"Pcs",style:"tableHeader",alignment:"center"}],...L]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]}],columnGap:10},{},{canvas:[{type:"line",x1:0,y1:25,x2:580,y2:25,lineWidth:1,dash:{length:5,space:5},lineColor:"#000000",margin:[0,20,0,0]}]},{margin:[0,20,0,0],stack:[{text:"Summary",style:"subheader",alignment:"center"},ee]}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableHeader:{bold:!0,fontSize:10,color:"black"},body:{fontSize:8}},pageMargins:[10,10,10,10]}},l=o=>{const n=s(o);Ae.exports.createPdf(n).getDataUrl(c=>{u.value=c,b.value=!0})};return(o,n)=>(h(),q(O,null,[e(F,{class:"my-card q-pa-md"},{default:t(()=>[e(P,null,{default:t(()=>[a("div",Yl,[(h(!0),q(O,null,se(A($),(c,_)=>(h(),q("div",{key:_},[e(F,{flat:"",dense:"",bordered:""},{default:t(()=>[e(P,null,{default:t(()=>[a("div",Gl,[Wl,a("div",Jl,[e(B,{padding:"xs md",label:"Print",icon:"print",outline:"",class:"user-button",onClick:d=>l(c)},null,8,["onClick"]),a("div",null,[e(Y,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D(" Print Report ")]),_:1})])])]),a("div",Xl,[a("div",null,"Name: "+f(v(c.user.employee)),1),a("div",null,"Date: "+f(p(c.created_at)),1),a("div",null,"Time: "+f(m(c.created_at)),1)])]),_:2},1024),a("div",Zl,[e(cl,{sales_Reports:[c]},null,8,["sales_Reports"]),e(kl,{sales_Reports:[c]},null,8,["sales_Reports"]),e(Nl,{sales_Reports:[c]},null,8,["sales_Reports"]),e(El,{sales_Reports:[c]},null,8,["sales_Reports"])])]),_:2},1024)]))),128))])]),_:1})]),_:1}),e(G,{modelValue:b.value,"onUpdate:modelValue":n[0]||(n[0]=c=>b.value=c),maximized:R.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[a("div",eo,[a("div",to,[W((h(),N(B,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},{default:t(()=>[e(Y,null,{default:t(()=>[D("Close")]),_:1})]),_:1})),[[J]])]),a("div",null,[a("iframe",{src:u.value,width:"100%",height:"700px"},null,8,ao)])])]),_:1},8,["modelValue","maximized"])],64))}};var oo=Z(lo,[["__scopeId","data-v-5d46a8e5"]]);const no={class:"text-h6"},so={class:"row q-gutter-x-md"},ro={__name:"ProductionReportDialog",props:["reports","reportLabel"],emits:["selectReport","hide","ok","cancel"],setup(i,{emit:x}){const{dialogRef:$,onDialogHide:R,onDialogOK:b,onDialogCancel:u}=be(),p=i;console.log("production report",p.reports);const m=p.reports.baker_reports,v=p.reports.sales_reports,w=x,s=S("bakerReport"),l=S(!0),o=S(!1),n=_=>_?_.split(" ").map(d=>d.charAt(0).toUpperCase()+d.slice(1).toLowerCase()).join(" "):"",c=()=>{w("selectReport",p.reports),o.value=!0};return(_,d)=>(h(),N(G,{ref_key:"dialogRef",ref:$,modelValue:o.value,"onUpdate:modelValue":d[2]||(d[2]=r=>o.value=r),onHide:A(R),onOk:c,onCancel:A(u),maximized:l.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(F,{style:{"background-color":"#f7f8fc"}},{default:t(()=>[e(P,{class:"row items-center text-white",style:{"background-color":"#595a5a"}},{default:t(()=>[a("div",no,f(`${n(i.reports.branch_name)} ( ${i.reportLabel} Reports)`),1),e(Be),a("div",so,[a("div",null,[W((h(),N(B,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(Y,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[D("Close")]),_:1})]),_:1})),[[J]])])])]),_:1}),e(P,null,{default:t(()=>[a("div",null,[e(ze,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=r=>s.value=r),align:"justify","narrow-indicator":"",class:"q-mb-lg"},{default:t(()=>[e(_e,{class:"text-purple",name:"bakerReport",label:"Baker Reports"}),e(_e,{class:"text-orange",name:"salesReport",label:"Sales Report"})]),_:1},8,["modelValue"])]),a("div",null,[e(je,{modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=r=>s.value=r),animated:"","transition-prev":"scale","transition-next":"scale",style:{"background-color":"#f7f8fc"}},{default:t(()=>[e(ge,{name:"bakerReport"},{default:t(()=>[e(Ua,{bakersReport:A(m)},null,8,["bakersReport"])]),_:1}),e(ge,{name:"salesReport"},{default:t(()=>[e(oo,{salesReport:A(v)},null,8,["salesReport"])]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide","onCancel","maximized"]))}};var io=Z(ro,[["__scopeId","data-v-643ff984"]]);const co=rt("productions",()=>{const i=S([]),x=S([]);return{productions:i,production:x,fetchAllProduction:async()=>{const b=await ve.get("/api/branch-production-report");i.value=b.data.reports},fetchBranchProductions:async b=>{try{const u=await ve.get(`/api/branches/${b}/production-report`);i.value=u.data}catch(u){console.log(u)}}}});const uo=i=>(ae("data-v-12387bc6"),i=i(),le(),i),mo={key:0,class:"spinner-wrapper"},po={key:1},_o={key:0,class:"data-error"},go=uo(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),fo={class:"row justify-center q-gutter-x-md"},yo={__name:"ProductionTable",setup(i){const x=ce();S("bakerReport");const $=x.params.branch_id;S(!1),S(!0),S(""),S("");const R=S({rowsPerPage:0}),b=co(),u=S(""),p=T(()=>b.productions);S(!0);const m=S(!0),v=S(!1),w=T(()=>u.value?p.value.filter(_=>_.name.toLowerCase().includes(u.value.toLowerCase())):p.value);$e(async()=>{$&&await s($)});const s=async _=>{try{m.value=!0;const d=await b.fetchBranchProductions(_);console.log("Fetched data:",d),console.log("Production rows:",p.value),p.value.length||(v.value=!0)}catch{v.value=!0}finally{m.value=!1}};Fe(u,async _=>{m.value=!0,await new Promise(d=>setTimeout(d,1e3)),m.value=!1,v.value=w.value.length===0});const o=[{name:"reportDate",align:"center",label:"Date",field:"date",format:_=>he.formatDate(_,"MMMM DD, YYYY")},{name:"reports",align:"center",label:"Reports",field:"reports"}],n=Re(),c=(_,d)=>{n.dialog({component:io,componentProps:{reports:_,reportLabel:d}})};return(_,d)=>(h(),q(O,null,[a("div",null,[e(K,{modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=r=>u.value=r),class:"q-pb-lg q-pl-md",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100",style:{width:"500px","max-width":"1500px","min-width":"100px"}},{append:t(()=>[e(re,{name:"search"})]),_:1},8,["modelValue"])]),m.value?(h(),q("div",mo,[e(Ie,{size:"50px",color:"primary"})])):(h(),q("div",po,[w.value.length===0?(h(),q("div",_o,[e(re,{name:"warning",color:"warning",size:"4em"}),go])):(h(),N(oe,{key:1,class:"table-container sticky-header",filter:u.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"400px"},columns:o,rows:w.value,"row-key":"reportDate","virtual-scroll":"",pagination:R.value,"onUpdate:pagination":d[1]||(d[1]=r=>R.value=r),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-reports":t(r=>[e(I,{props:r},{default:t(()=>[a("div",fo,[e(B,{padding:"xs lg",rounded:"",dense:"",size:"sm",color:"light-blue-5","text-color":"white",onClick:C=>c(r.row.AM,"AM")},{default:t(()=>[D("AM")]),_:2},1032,["onClick"]),e(B,{padding:"xs lg",rounded:"",dense:"",size:"sm",color:"deep-orange","text-color":"white",onClick:C=>c(r.row.PM,"PM")},{default:t(()=>[D("PM")]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var vo=Z(yo,[["__scopeId","data-v-12387bc6"]]);const ho={__name:"ProductionPage",setup(i){return(x,$)=>(h(),q("div",null,[e(vo)]))}},bo={class:"row justify-between"},wo=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),xo=a("div",{class:"text-h6"},"Decline Report",-1),$o={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(i){const x=Ve(),$=S(""),R=S(!1),b=S(!1),u=S({rowsPerPage:0}),p=Re(),m=i,v=()=>{b.value=!0},w=()=>{R.value=!0},s=async()=>{if(!$.value){p.notify({type:"negative",message:"Remark is required"});return}try{const _=await x.declineReport(m.report.id,$.value);console.log("Report declined:",_),p.notify({type:"negative",message:"Report declined successfully"}),R.value=!1,b.value=!1,$.value=""}catch(_){console.error("Error declining report:",_),p.notify({type:"negative",message:"Failed to decline report"})}},l=async()=>{try{const _=await x.confirmReport(m.report.id);console.log("Report confirmed:",_),p.notify({type:"positive",message:"Report confirmed successfully"}),b.value=!1}catch(_){console.error(_)}},o=T(()=>m.report.selecta_added_stocks||[]),n=_=>{const d=V=>V?V.charAt(0).toUpperCase()+V.slice(1).toLowerCase():"",r=_.firstname?d(_.firstname):"No Firstname",C=_.middlename?d(_.middlename).charAt(0)+".":"",g=_.lastname?d(_.lastname):"No Lastname";return`${r} ${C} ${g}`},c=[{name:"product_name",label:"Product Name",field:_=>_.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:_=>_.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:_=>_.added_stocks?`${_.added_stocks} pcs`:"N/A"}];return(_,d)=>(h(),q(O,null,[a("div",null,[e(B,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:v})]),e(G,{modelValue:b.value,"onUpdate:modelValue":d[2]||(d[2]=r=>b.value=r)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(P,null,{default:t(()=>[a("div",bo,[wo,e(B,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=r=>b.value=!1)})])]),_:1}),e(P,null,{default:t(()=>[a("div",null,"Cashier: "+f(n(i.report.employee)),1),a("div",null," Branch: "+f(i.report.branch.name),1),a("div",null,[D(" Status: "),e(X,{color:"yellow",outlined:""},{default:t(()=>[D(f(i.report.status),1)]),_:1})])]),_:1}),e(P,null,{default:t(()=>[e(oe,{rows:o.value,columns:c,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:u.value,"onUpdate:pagination":d[1]||(d[1]=r=>u.value=r),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e(P,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(B,{color:"negative",label:"Decline",class:"action-btn",onClick:w}),e(B,{color:"positive",label:"Confirm",class:"action-btn",onClick:l})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(G,{modelValue:R.value,"onUpdate:modelValue":d[4]||(d[4]=r=>R.value=r)},{default:t(()=>[e(F,null,{default:t(()=>[e(P,null,{default:t(()=>[xo]),_:1}),e(P,null,{default:t(()=>[e(K,{modelValue:$.value,"onUpdate:modelValue":d[3]||(d[3]=r=>$.value=r),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[r=>!!r||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(Ce,{align:"right"},{default:t(()=>[W(e(B,{flat:"",label:"Cancel",color:"primary"},null,512),[[J]]),e(B,{flat:"",label:"Confirm",color:"negative",onClick:s})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},ko={class:"q-gutter-md q-ma-md"},Co={class:"row justify-between"},Ro={class:"text-subtitle1"},Po={class:"text-subtitle1"},So={class:"text-subtitle1"},qo={__name:"TransactionPendingCard",setup(i){const x=ce(),$=Ve(),R=T(()=>$.pendingSelectaReports),b=x.params.branch_id,u=S("pending"),p=async()=>{try{const s=await $.fetchPendingSelectaStocks(b,u.value);console.log(R.value)}catch(s){console.error("Error fetching pending stocks:",s)}};$e(async()=>{b&&await p()});const m=s=>he.formatDate(s,"MMMM D, YYYY"),v=s=>he.formatDate(s,"hh:mm A"),w=s=>{const l=_=>_?_.charAt(0).toUpperCase()+_.slice(1).toLowerCase():"",o=s.firstname?l(s.firstname):"No Firstname",n=s.middlename?l(s.middlename).charAt(0)+".":"",c=s.lastname?l(s.lastname):"No Lastname";return`${o} ${n} ${c}`};return(s,l)=>(h(),q("div",null,[e(Ee,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",ko,[(h(!0),q(O,null,se(R.value,(o,n)=>(h(),N(F,{key:n},{default:t(()=>[e(P,null,{default:t(()=>[a("div",Co,[a("div",Ro,f(m(o.created_at)),1),a("div",Po,f(v(o.created_at)),1),a("div",So,f(o.branch.name)+" - "+f(w(o.employee)),1),a("div",null,[e(X,{color:"yellow",outlined:""},{default:t(()=>[D(" Pending ")]),_:1})]),a("div",null,[e($o,{report:o},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128))])]),_:1})]))}},Vo={class:"row justify-between"},Do=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),Bo={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(i){Ve(),S(!1);const x=S(!1),$=()=>{x.value=!0};Re();const R=i,b=T(()=>(console.log("Filtered rows:",R.report||[]),R.report.selecta_added_stocks||[])),u=m=>{const v=o=>o?o.charAt(0).toUpperCase()+o.slice(1).toLowerCase():"",w=m.firstname?v(m.firstname):"No Firstname",s=m.middlename?v(m.middlename).charAt(0)+".":"",l=m.lastname?v(m.lastname):"No Lastname";return`${w} ${s} ${l}`},p=[{name:"product_name",label:"Product Name",field:m=>(console.log("Row data:",m),m.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:m=>(console.log("Row data:",m),m.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:m=>m.added_stocks?`${m.added_stocks} pcs`:"N/A"}];return(m,v)=>(h(),q(O,null,[a("div",null,[e(B,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:$})]),e(G,{modelValue:x.value,"onUpdate:modelValue":v[2]||(v[2]=w=>x.value=w)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(P,null,{default:t(()=>[a("div",Vo,[Do,e(B,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:v[0]||(v[0]=w=>x.value=!1)})])]),_:1}),e(P,null,{default:t(()=>[a("div",null,"Cashier: "+f(u(i.report.employee)),1),a("div",null," Branch: "+f(i.report.branch.name),1),a("div",null,[D(" Status: "),e(X,{color:"green",outlined:""},{default:t(()=>[D(f(i.report.status),1)]),_:1})])]),_:1}),e(P,null,{default:t(()=>[e(oe,{rows:b.value,columns:p,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:m.pagination,"onUpdate:pagination":v[1]||(v[1]=w=>m.pagination=w),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},Uo={class:"q-gutter-md q-ma-md"},To={class:"row justify-between"},No={class:"text-subtitle1"},Ao={class:"text-subtitle1"},Fo={class:"text-subtitle1"},Io={__name:"TransactionConfirmedCard",setup(i){const x=ce(),$=Ve(),R=T(()=>$.confirmedSelectaReports),b=x.params.branch_id,u=S("confirmed"),p=async()=>{try{const s=await $.fetchConfirmedSelectaStocks(b,u.value);console.log(R.value)}catch(s){console.error("Error fetching confirmed stocks:",s)}};$e(async()=>{b&&await p()});const m=s=>he.formatDate(s,"MMMM D, YYYY"),v=s=>he.formatDate(s,"hh:mm A"),w=s=>{const l=_=>_?_.charAt(0).toUpperCase()+_.slice(1).toLowerCase():"",o=s.firstname?l(s.firstname):"No Firstname",n=s.middlename?l(s.middlename).charAt(0)+".":"",c=s.lastname?l(s.lastname):"No Lastname";return`${o} ${n} ${c}`};return(s,l)=>(h(),q("div",null,[e(Ee,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Uo,[(h(!0),q(O,null,se(R.value,(o,n)=>(h(),N(F,{key:n},{default:t(()=>[e(P,null,{default:t(()=>[a("div",To,[a("div",No,f(m(o.created_at)),1),a("div",Ao,f(v(o.created_at)),1),a("div",Fo,f(o.branch.name)+" - "+f(w(o.employee)),1),a("div",null,[e(X,{color:"green",outlined:""},{default:t(()=>[D(f(o.status),1)]),_:2},1024)]),a("div",null,[e(Bo,{report:o},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128))])]),_:1})]))}},Ho={class:"row justify-between"},Mo=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),Lo={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(i){Ve(),S(!1);const x=S(!1),$=()=>{x.value=!0},R=i,b=T(()=>(console.log("Filtered rows:",R.report||[]),R.report.selecta_added_stocks||[])),u=m=>{const v=o=>o?o.charAt(0).toUpperCase()+o.slice(1).toLowerCase():"",w=m.firstname?v(m.firstname):"No Firstname",s=m.middlename?v(m.middlename).charAt(0)+".":"",l=m.lastname?v(m.lastname):"No Lastname";return`${w} ${s} ${l}`},p=[{name:"product_name",label:"Product Name",field:m=>(console.log("Row data:",m),m.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:m=>(console.log("Row data:",m),m.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:m=>m.added_stocks?`${m.added_stocks} pcs`:"N/A"}];return(m,v)=>(h(),q(O,null,[a("div",null,[e(B,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:$})]),e(G,{modelValue:x.value,"onUpdate:modelValue":v[2]||(v[2]=w=>x.value=w)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(P,null,{default:t(()=>[a("div",Ho,[Mo,e(B,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:v[0]||(v[0]=w=>x.value=!1)})])]),_:1}),e(P,null,{default:t(()=>[a("div",null,"Cashier: "+f(u(i.report.employee)),1),a("div",null," Branch: "+f(i.report.branch.name),1),a("div",null,[D(" Status: "),e(X,{color:"red",outlined:""},{default:t(()=>[D(f(i.report.status),1)]),_:1})])]),_:1}),e(P,null,{default:t(()=>[e(oe,{rows:b.value,columns:p,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:m.pagination,"onUpdate:pagination":v[1]||(v[1]=w=>m.pagination=w),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},zo={class:"q-gutter-md q-ma-md"},jo={class:"row justify-between"},Oo={class:"text-subtitle1"},Qo={class:"text-subtitle1"},Eo={class:"text-subtitle1"},Ko={__name:"TransactionDeclinedCard",setup(i){const x=ce(),$=Ve(),R=T(()=>$.declinedSelectaReports),b=x.params.branch_id,u=S("declined"),p=async()=>{try{const s=await $.fetchDeclinedSelectaStocks(b,u.value);console.log("selectedProductsDeclined",R.value)}catch(s){console.error("Error fetching decline stocks:",s)}};$e(async()=>{b&&await p()});const m=s=>he.formatDate(s,"MMMM D, YYYY"),v=s=>he.formatDate(s,"hh:mm A"),w=s=>{const l=_=>_?_.charAt(0).toUpperCase()+_.slice(1).toLowerCase():"",o=s.firstname?l(s.firstname):"No Firstname",n=s.middlename?l(s.middlename).charAt(0)+".":"",c=s.lastname?l(s.lastname):"No Lastname";return`${o} ${n} ${c}`};return(s,l)=>(h(),q("div",null,[e(Ee,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",zo,[(h(!0),q(O,null,se(R.value,(o,n)=>(h(),N(F,{key:n},{default:t(()=>[e(P,null,{default:t(()=>[a("div",jo,[a("div",Oo,f(m(o.created_at)),1),a("div",Qo,f(v(o.created_at)),1),a("div",Eo,f(o.branch.name)+" - "+f(w(o.employee)),1),a("div",null,[e(X,{color:"red",outlined:""},{default:t(()=>[D(f(o.status),1)]),_:2},1024)]),a("div",null,[e(Lo,{report:o},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128))])]),_:1})]))}};const Yo={class:"q-gutter-y-sm"},Go={__name:"TransactionPage",setup(i){const x=S("pendingReports");return($,R)=>(h(),q(O,null,[a("div",Yo,[e(ze,{modelValue:x.value,"onUpdate:modelValue":R[0]||(R[0]=b=>x.value=b),"active-color":"light-green-13","indicator-color":"light-green-13","narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:"gradient-btn"},{default:t(()=>[e(_e,{class:"text-white",name:"pendingReports",icon:"event_available",label:"Pending Reports"}),e(_e,{class:"text-white",name:"confirmReports",icon:"calendar_month",label:"Confirm Reports"}),e(_e,{class:"text-white",name:"declineReports",icon:"calendar_month",label:"Decline Reports"})]),_:1},8,["modelValue"])]),e(je,{modelValue:x.value,"onUpdate:modelValue":R[1]||(R[1]=b=>x.value=b),animated:""},{default:t(()=>[e(ge,{name:"pendingReports"},{default:t(()=>[e(qo)]),_:1}),e(ge,{name:"confirmReports"},{default:t(()=>[e(Io)]),_:1}),e(ge,{name:"declineReports"},{default:t(()=>[e(Ko)]),_:1})]),_:1},8,["modelValue"])],64))}};var Wo=Z(Go,[["__scopeId","data-v-63e6b257"]]);const Pe=i=>(ae("data-v-2adb6214"),i=i(),le(),i),Jo=Pe(()=>a("div",{class:"text-h6"},"Create Branch Recipe",-1)),Xo={class:"q-mb-lg"},Zo={key:0,class:"custom-list z-top"},en={class:"q-mb-sm"},tn=Pe(()=>a("div",null,"Recipe Name",-1)),an={class:"q-mb-lg"},ln=Pe(()=>a("div",null,"Category",-1)),on=Pe(()=>a("div",null,"Breads",-1)),nn={class:"q-mt-md q-gutter-y-sm"},sn=Pe(()=>a("div",{class:"text-weight-thin"},"Ingredients List",-1)),rn={class:"q-mt-xl q-gutter-y-sm"},dn={class:"row justify-between"},cn=Pe(()=>a("div",{align:"center"},"Ingredients",-1)),un=Pe(()=>a("div",{align:"center"},"Quantity",-1)),mn=["onKeyup"],pn={align:"right"},_n={__name:"RecipeCreate",setup(i){const x=ce(),$=x.params.branch_id,R=ut(),b=T(()=>R.recipes),u=Ke(),p=Xe(),m=Ze(),v=T(()=>u.branchRecipes),w=S(!1),s=()=>{w.value=!0},l=()=>{clearForm(),w.value=!1},o=U=>U?U.split(" ").map(M=>M.charAt(0).toUpperCase()+M.slice(1).toLowerCase()).join(" "):"",n=S(""),c=async()=>{R.searchRecipe(n.value)},_=T(()=>r.target!==0),d=U=>{r.recipe_id=U.id,r.recipe_name=U.name,r.category=U.category,n.value=""},r=Ue({recipe_id:"",recipe_name:"",category:"",target:"",branches_id:x.params.branch_id}),C=S(!1),g=S(null),V=S([]),y=S(V.value),k=S([]),H=S([]),z=Ue({name:"",quantity:""}),L=S(H.value);(async()=>{await p.fetchProductsByCategory("Bread"),C.value=!1,V.value=p.breads.map(U=>({label:U.name,value:U.id}))})(),(async()=>{await m.fetchIngredients("Ingredients"),C.value=!1,H.value=m.ingredients.map(U=>({label:U.name,value:U.id,unit:U.unit}))})();const Q=()=>{z.name="",z.quantity=""},ue=(U,M)=>{U.length>2&&(V.value.includes(U)||M(U,"add-unique"))},ne=(U,M)=>{M(()=>{if(U==="")y.value=V.value;else{const pe=U.toLowerCase();y.value=V.value.filter(j=>j.label.toLowerCase().indexOf(pe)>-1)}})},me=(U,M)=>{M(()=>{if(U==="")L.value=H.value;else{const pe=U.toLowerCase();L.value=H.value.filter(j=>j.label.toLowerCase().indexOf(pe)>-1)}})},Se=()=>{const U=k.value;function M(we,He){return we.find(nt=>nt.ingredients_id==He)}const pe=z.name.value;M(U,pe)?de.create({type:"negative",icon:"warning",message:"Ingredient already exist",timeout:2e3}):(k.value=[...U,{ingredients_id:z.name.value,label:z.name.label,quantity:z.quantity,unit:z.name.unit}],Q())},te=U=>{k.value.splice(U,1)};Fe(()=>z.name,U=>{U&&U.unit?z.unit=U.unit:z.unit=""});const ie=()=>{r.recipe_id="",r.target="",g.value=null,k.value=[],z.name="",z.quantity=""},fe=async()=>{const U={recipe_id:r.recipe_id,target:r.target,status:"active",branch_id:r.branches_id,breads:g.value.map(M=>({bread_id:M.value})),ingredients:k.value.map(M=>({ingredient_id:M.ingredients_id,quantity:M.quantity}))};console.log("branchRecipe",U),await u.saveBranchRecipe(U),v.value=await u.fetchBranchRecipes($),ie(),w.value=!1};return(U,M)=>(h(),q(O,null,[e(B,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Recipe",onClick:s}),e(G,{modelValue:w.value,"onUpdate:modelValue":M[7]||(M[7]=pe=>w.value=pe)},{default:t(()=>[e(F,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(P,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[Jo,e(Be),W(e(B,{icon:"close",flat:"",dense:"",round:""},null,512),[[J]])]),_:1}),e(P,null,{default:t(()=>{var pe;return[a("div",Xo,[e(K,{modelValue:n.value,"onUpdate:modelValue":[M[0]||(M[0]=j=>n.value=j),c],debounce:"1000",outlined:"",rounded:"",placeholder:"Search recipe",dense:""},{append:t(()=>[a("div",null,[e(re,{name:"search"})])]),default:t(()=>[n.value?(h(),q("div",Zo,[e(F,null,{default:t(()=>[e(Te,{separator:""},{default:t(()=>{var j;return[(j=b.value)!=null&&j.length?(h(!0),q(O,{key:1},se(b.value,we=>(h(),N(ye,{onClick:He=>d(we),key:we.id,clickable:""},{default:t(()=>[e(xe,null,{default:t(()=>[e(Ne,null,{default:t(()=>[D(f(o(we.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(h(),N(ye,{key:0},{default:t(()=>[D(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Le("",!0)]),_:1},8,["modelValue"])]),a("div",en,[tn,e(K,{modelValue:r.recipe_name,"onUpdate:modelValue":M[1]||(M[1]=j=>r.recipe_name=j),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",an,[ln,e(K,{modelValue:r.category,"onUpdate:modelValue":M[2]||(M[2]=j=>r.category=j),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[e(K,{modelValue:r.target,"onUpdate:modelValue":M[3]||(M[3]=j=>r.target=j),outlined:"",dense:"",suffix:" / 1kg",type:"number",label:"Target Pcs"},null,8,["modelValue"])]),a("div",null,[on,e(Me,{modelValue:g.value,"onUpdate:modelValue":M[4]||(M[4]=j=>g.value=j),"use-input":"","use-chips":"","chips-color":"primary",multiple:"","input-debounce":"0",options:y.value,behavior:"menu","hide-dropdown-icon":"",outlined:"",dense:"",label:"Bread/s",onNewValue:ue,onFilter:ne,rules:[j=>j&&j.length>0||"Bread is required"]},{"no-option":t(()=>[e(ye,null,{default:t(()=>[e(xe,{class:"text-grey"},{default:t(()=>[D(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),a("div",nn,[sn,a("div",null,[e(Te,{dense:"",separator:"",class:"box"},{default:t(()=>[(h(!0),q(O,null,se(k.value,(j,we)=>(h(),N(ye,{key:we},{default:t(()=>[e(xe,null,{default:t(()=>[e(Ne,null,{default:t(()=>[D(f(j.label),1)]),_:2},1024)]),_:2},1024),e(xe,null,{default:t(()=>[D(f(j.quantity)+" "+f(j.unit),1)]),_:2},1024),e(xe,{side:""},{default:t(()=>[e(B,{onClick:He=>te(we),color:"grey-10",icon:"backspace",dense:"",flat:"",round:""},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),a("div",rn,[a("div",dn,[a("div",null,[cn,e(Me,{modelValue:z.name,"onUpdate:modelValue":M[5]||(M[5]=j=>z.name=j),debounce:"3000",outlined:"","chips-color":"primary",options:L.value,dense:"",label:"Ingredients",behavior:"menu","use-input":"","hide-dropdown-icon":"",onFilter:me,style:{width:"215px","max-width":"450px","min-width":"80px"}},{"no-option":t(()=>[e(ye,null,{default:t(()=>[e(xe,{class:"text-grey"},{default:t(()=>[D(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),a("div",null,[un,e(K,{modelValue:z.quantity,"onUpdate:modelValue":M[6]||(M[6]=j=>z.quantity=j),modelModifiers:{number:!0},outlined:"",dense:"",type:"number",label:"Quantity",suffix:((pe=z==null?void 0:z.name)==null?void 0:pe.unit)||"",style:{width:"115px"},hint:"Enter the quantity as a decimal",mask:"##.##"},null,8,["modelValue","suffix"])])]),a("form",{onKeyup:ke(it(Se,["prevent"]),["enter"])},[a("div",pn,[e(B,{padding:"xs md",type:"button",size:"sm",outline:"",dense:"",label:"add",icon:"add",color:"purple",onClick:Se})])],40,mn)])]}),_:1}),e(Ce,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(B,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:l}),e(B,{class:"glossy",color:"teal",label:"Create",onClick:fe,disable:!_.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var gn=Z(_n,[["__scopeId","data-v-2adb6214"]]);const ot=i=>(ae("data-v-33664d62"),i=i(),le(),i),fn=ot(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),yn=ot(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),vn={__name:"RecipeDelete",props:["delete"],setup(i){const x=Ke(),$=i,R=S(!1),b=()=>{R.value=!0},u=async()=>{await x.deleteRecipe($.delete.row.id),R.value=!1};return(p,m)=>(h(),q(O,null,[e(B,{onClick:b,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"","aria-label":"Delete"},{default:t(()=>[e(Y,{class:"bg-negative",delay:200},{default:t(()=>[D("Delete")]),_:1})]),_:1}),e(G,{modelValue:R.value,"onUpdate:modelValue":m[0]||(m[0]=v=>R.value=v),persistent:""},{default:t(()=>[e(F,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(P,{class:"q-pt-none q-pb-sm"},{default:t(()=>[fn,yn]),_:1}),e(De,{class:"q-mb-md"}),e(P,null,{default:t(()=>[e(Ce,{align:"right",class:"q-pt-none"},{default:t(()=>[W(e(B,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[J]]),e(B,{dense:"",label:"Delete",color:"negative",onClick:u,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var hn=Z(vn,[["__scopeId","data-v-33664d62"]]);const Ge=i=>(ae("data-v-44694ce1"),i=i(),le(),i),bn={class:"row justify-between"},wn={class:"q-my-sm"},xn={key:0,class:"spinner-wrapper"},$n={key:1},kn={key:0,class:"data-error"},Cn=Ge(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Rn=Ge(()=>a("div",{class:"q-pb-sm text-center text-h6 text-weight-bold text-subtitle2"}," Breads List ",-1)),Pn=Ge(()=>a("div",{class:"q-pb-sm text-center text-h6 text-weight-bold text-subtitle2"}," Ingredients List ",-1)),Sn={class:"row justify-center q-gutter-x-md"},qn={__name:"RecipeTable",setup(i){const $=ce().params.branch_id,R=Ke(),b=S(""),u=S(!0),p=S([]),m=S(!1),v=S({rowsPerPage:0}),w=["inactive","active"],s=T(()=>R.branchRecipes);console.log("branch recipe",s.value);const l=T(()=>b.value?s.value.filter(g=>g.name.toLowerCase().includes(b.value.toLowerCase())):s.value);$e(async()=>{$&&await o($)});const o=async g=>{try{u.value=!0;const V=await R.fetchBranchRecipes(g);s.value=V,console.log("branchRecipeRows",s.value),s.value.length||(m.value=!0),console.log("Branch recipe",s.value)}catch(V){console.log("Error fetching recipe",V)}finally{u.value=!1}},n=g=>!g&&g!==0?"Set Target":typeof g=="number"||!isNaN(g)?(g=parseFloat(g),g%1===0?g:parseFloat(g.toFixed(1))):g;async function c(g,V){try{const y=await ve.put("/api/update-target/"+g.id,{target:parseFloat(V)});if(console.log("response",y),y.status==200){const k=p.value.findIndex(H=>H.id==g.id);p.value[k]=V}de.create({type:"positive",message:"Recipe target edited successfully"})}catch(y){console.error("Error updating recipe target:",y),de.create({type:"negative",message:"Failed to edit recipe target"})}}async function _(g,V){try{if((await ve.put("/api/branch-update-status/"+g.id,{status:V})).status==200){const k=p.value.findIndex(H=>H.id==g.id);p.value[k]=V}de.create({type:"positive",message:"Recipe status change successfully"})}catch(y){console.error("Error updating recipe status:",y),de.create({type:"negative",message:"Failed to change recipe status"})}}const d=g=>g?g.split(" ").map(V=>V.charAt(0).toUpperCase()+V.slice(1).toLowerCase()).join(" "):"",r=[{name:"name",label:"Recipe name",align:"center",field:g=>g.name},{name:"category",label:"Category",align:"center",field:g=>g.recipe},{name:"target",label:"Target",align:"center",field:g=>n(g.target)},{name:"status",label:"Status",align:"center",field:"status"},{name:"bread_groups",label:"List of Bread",align:"center",field:"bread_groups"},{name:"ingredient_groups",label:"List of Ingredients",align:"center",field:"ingredient_groups"},{name:"action",label:"Action",align:"center",sortable:!0}],C=g=>{switch(g){case"inactive":return"grey";case"active":return"green";default:return"grey"}};return(g,V)=>(h(),q(O,null,[a("div",bn,[a("div",null,[e(K,{class:"q-pb-lg q-pl-md",modelValue:b.value,"onUpdate:modelValue":V[0]||(V[0]=y=>b.value=y),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"1500px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(re,{name:"search"})]),_:1},8,["modelValue"])]),a("div",wn,[e(gn)])]),u.value?(h(),q("div",xn,[e(Ie,{size:"50px",color:"primary"})])):(h(),q("div",$n,[l.value.length===0?(h(),q("div",kn,[e(re,{name:"warning",color:"warning",size:"4em"}),Cn])):(h(),N(oe,{key:1,class:"table-container sticky-header",filter:b.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:r,rows:l.value,"row-key":"name","virtual-scroll":"",pagination:v.value,"onUpdate:pagination":V[1]||(V[1]=y=>v.value=y),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"}},{"body-cell-name":t(y=>[e(I,{props:y},{default:t(()=>[a("span",null,f(d(y.row.name)),1)]),_:2},1032,["props"])]),"body-cell-category":t(y=>[e(I,{props:y},{default:t(()=>[a("span",null,f(d(y.row.category)),1)]),_:2},1032,["props"])]),"body-cell-target":t(y=>[e(I,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[D(f(n(y.row.target))+" ",1),e(Y,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[D("Edit Target")]),_:1})]),e(qe,{"onUpdate:modelValue":[k=>c(y.row,k),k=>y.row.target=k],modelValue:y.row.target,"auto-save":""},{default:t(k=>[e(K,{modelValue:k.value,"onUpdate:modelValue":H=>k.value=H,dense:"",suffix:"pcs",autofocus:"",counter:"",onKeyup:ke(k.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-status":t(y=>[e(I,{props:y},{default:t(()=>[e(X,{outline:"",color:C(y.row.status)},{default:t(()=>[D(f(d(y.row.status))+" ",1),e(Y,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[D("Change Status")]),_:1})]),_:2},1032,["color"]),e(qe,{"onUpdate:modelValue":[k=>_(y.row,k),k=>y.row.status=k],modelValue:y.row.status,"auto-save":""},{default:t(k=>[a("span",null,f(y.row.name),1),e(Me,{modelValue:k.value,"onUpdate:modelValue":H=>k.value=H,dense:"",label:"status",autofocus:"",options:w,counter:"",mask:"###",onKeyup:ke(k.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-bread_groups":t(y=>[e(I,{props:y},{default:t(()=>[e(Y,{offset:[0,10],delay:600,class:"bg-info text-dark text-subtitle1"},{default:t(()=>[Rn,e(De,{class:"q-mb-md",color:"yellow"}),(h(!0),q(O,null,se(y.row.bread_groups,k=>(h(),q("div",{key:k},f(k),1))),128))]),_:2},1024),e(Je,{square:"",outline:"",color:"red-6",class:"text-white"},{default:t(()=>[D(f(y.row.bread_groups.length)+" breads ",1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-ingredient_groups":t(y=>[e(I,{props:y},{default:t(()=>[e(Y,{delay:600,class:"bg-info text-dark text-subtitle1",style:{width:"300px"}},{default:t(()=>[Pn,e(De,{class:"q-mb-md",color:"yellow"}),(h(!0),q(O,null,se(y.row.ingredient_groups,k=>(h(),q("div",{class:"row justify-between",key:k.ingredient_name},[a("div",null,f(k.ingredient_name),1),a("div",null,f(k.quantity)+" "+f(k.unit),1)]))),128))]),_:2},1024),e(Je,{square:"",outline:"",color:"purple-6",class:"text-white"},{default:t(()=>[D(f(y.row.ingredient_groups.length)+" ingredients ",1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-action":t(y=>[e(I,{props:y},{default:t(()=>[a("div",Sn,[e(hn,{delete:y},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Vn=Z(qn,[["__scopeId","data-v-44694ce1"]]);const Dn={__name:"RecipePage",setup(i){return(x,$)=>(h(),q("div",null,[e(Vn)]))}};const Bn={class:"elegant-container q-gutter-md"},Un={class:"text-h6 row justify-between"},Tn={class:"q-gutter-sm"},Nn={class:"tab-container"},An={__name:"BranchIdPage",setup(i){const x=ce(),$=S(""),R=dt(),b=async w=>(await ve.get(`/api/branches/${w}`)).data,u=async()=>{const w=x.params.branch_id,s=await b(w);s&&s.name?$.value=s.name:console.error("Branch data is missing 'name' property or invalid:",s)};$e(()=>{u()});const p=w=>w?w.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" "):"",m=S("products"),v=()=>{We.show(),R.push("/admin/branches").finally(()=>{We.hide()})};return(w,s)=>(h(),N(ct,{padding:""},{default:t(()=>[a("div",Bn,[a("div",Un,[a("div",null,[e(B,{outline:"",flat:"",icon:"arrow_back",onClick:v}),e(Be)]),a("div",null,[e(re,{name:"fa-solid fa-store",color:"red-6"}),D(" "+f(p($.value)),1)])]),a("div",Tn,[a("div",Nn,[e(ze,{modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=l=>m.value=l),dense:"",class:"bg-grey-2 text-grey-7 tabs-as-cards","active-color":"red-6","indicator-color":"transparent",align:"justify"},{default:t(()=>[e(_e,{name:"products",label:"Products"}),e(_e,{name:"rawMaterials",label:"Raw Materials"}),e(_e,{name:"recipe",label:"Recipe"}),e(_e,{name:"production",label:"Production"}),e(_e,{name:"transaction",label:"Transactions"})]),_:1},8,["modelValue"])]),e(F,{class:"q-mt-sm"},{default:t(()=>[e(je,{modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=l=>m.value=l),animated:""},{default:t(()=>[e(ge,{name:"products"},{default:t(()=>[e(Ft)]),_:1}),e(ge,{name:"rawMaterials"},{default:t(()=>[e(ia)]),_:1}),e(ge,{name:"recipe"},{default:t(()=>[e(Dn)]),_:1}),e(ge,{name:"production"},{default:t(()=>[e(ho)]),_:1}),e(ge,{name:"transaction"},{default:t(()=>[e(Wo)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1}))}};var bs=Z(An,[["__scopeId","data-v-eb7c826e"]]);export{bs as default};
