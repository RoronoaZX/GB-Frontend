import{c as V,r as _,t as M,o as f,a3 as h,f as e,M as v,w as a,Q as A,I as w,ae as D,J as d,K as k,aJ as B,a2 as F,a4 as $,a0 as q,a1 as J,O as N,R as I,z as O,u as G,L as P,e as j,$ as z,bb as H,N as W}from"./index.b39596b9.js";import{Q as X}from"./QPage.53632818.js";import{Q as Y}from"./QSpace.9ac2135a.js";import{Q as Z}from"./QSelect.85b5ca2b.js";import{C as S}from"./ClosePopup.5eef47a5.js";import{u as U}from"./recipe.1c36dd9b.js";import{Q as ee}from"./QSpinnerDots.d7a4d0b3.js";import{Q as L}from"./QTooltip.b8a12064.js";import{Q as ae}from"./QPopupEdit.d8d4206c.js";import{Q as C,a as te}from"./QTable.729f39d9.js";import{Q as le}from"./QBadge.c996156a.js";import"./QMenu.e2333d24.js";import{_ as T}from"./plugin-vue_export-helper.21dcd24c.js";import"./axios.0bf0fc4c.js";import"./QChip.9a85866b.js";import"./use-virtual-scroll.bc228582.js";import"./rtl.276c3f1b.js";import"./selection.4513372c.js";import"./position-engine.e8d3d59d.js";import"./QVirtualScroll.ed0286c4.js";import"./QList.d462a758.js";const oe=d("div",{class:"text-h5 q-mr-md"},"\u{1F4DC} Add Recipe",-1),se={class:"q-mt-md q-animated q-animate-bounce"},re={class:"q-mt-md q-animated q-animate-bounce"},ne={__name:"RecipeCreate",setup(l){const p=V(()=>n.recipes),n=U(),o=_(!1),g=()=>{o.value=!0},y=["Dough","Filling"],u=_(!1),r=M({name:"",category:""}),b=async()=>{console.log("Recipe",r);try{u.value=!0,await n.createRecipe(r),u.value=!1,o.value=!1,R(),p.value=await n.fetchRecipes()}catch{u.value=!1}},R=()=>{r.name="",r.category="",o.value=!1};return(Q,m)=>(f(),h($,null,[e(v,{class:"text-dark q-pa-sm",outline:"",dense:"",elevated:"",icon:"add_circle",label:"Add Recipe",onClick:g,style:{"background-color":"#ef4444"}}),e(F,{modelValue:o.value,"onUpdate:modelValue":m[2]||(m[2]=i=>o.value=i),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:a(()=>[e(A,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:a(()=>[e(w,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:a(()=>[oe,e(Y),D(e(v,{icon:"close",flat:"",dense:"",round:""},null,512),[[S]])]),_:1}),e(w,{class:"q-mx-md"},{default:a(()=>[d("div",se,[e(k,{class:"text-capitalize",modelValue:r.name,"onUpdate:modelValue":m[0]||(m[0]=i=>r.name=i),outlined:"",dense:"",label:"Recipe Name",rules:[i=>i&&i.length>0||"Recipe name is required"]},null,8,["modelValue","rules"])]),d("div",re,[e(Z,{modelValue:r.category,"onUpdate:modelValue":m[1]||(m[1]=i=>r.category=i),options:y,"hide-dropdown-icon":"",outlined:"",dense:"",behavior:"menu",label:"Category",rules:[i=>i&&i.length>0||"Category is required"]},null,8,["modelValue","rules"])]),e(B,{class:"row q-mt-md q-px-lg q-py-sm q-pt-none",align:"right"},{default:a(()=>[D(e(v,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[S]]),e(v,{class:"glossy",color:"teal",label:"Create",onClick:b})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const E=l=>(N("data-v-4f1d2e6e"),l=l(),I(),l),ie=E(()=>d("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),ce=E(()=>d("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),de={__name:"RecipeDelete",props:["delete"],setup(l){const p=U(),n=l,o=_(!1),g=()=>{o.value=!0},y=async()=>{await p.deleteRecipe(n.delete.row.id),o.value=!1};return(u,r)=>(f(),h($,null,[e(v,{onClick:g,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"","aria-label":"Delete"},{default:a(()=>[e(L,{class:"bg-negative",delay:200},{default:a(()=>[q("Delete")]),_:1})]),_:1}),e(F,{modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=b=>o.value=b),persistent:""},{default:a(()=>[e(A,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:a(()=>[e(w,{class:"q-pt-none q-pb-sm"},{default:a(()=>[ie,ce]),_:1}),e(J,{class:"q-mb-md"}),e(w,null,{default:a(()=>[e(B,{align:"right",class:"q-pt-none"},{default:a(()=>[D(e(v,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[S]]),e(v,{dense:"",label:"Delete",color:"negative",onClick:y,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var ue=T(de,[["__scopeId","data-v-4f1d2e6e"]]);const pe=l=>(N("data-v-aff73656"),l=l(),I(),l),me={align:"left"},_e={key:0,class:"spinner-wrapper"},fe={key:1},ge={key:0,class:"data-error"},ve=pe(()=>d("div",{class:"q-ml-sm text-h6"},"No data available",-1)),ye={class:"row justify-center q-gutter-x-md"},he={__name:"RecipeTable",setup(l){const p=U(),n=_(""),o=_(!0);_([]);const g=_(!1),y=_({rowsPerPage:0}),u=V(()=>p.recipes),r=V(()=>n.value?u.value.filter(s=>s.name.toLowerCase().includes(n.value.toLowerCase())):u.value),b=s=>s?s.split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1).toLowerCase()).join(" "):"";async function R(s,c){try{await p.updateRecipeName(s,c)}catch(t){console.error("Error updating recipe name:",t),W.create({type:"negative",message:"Failed to edit recipe name"})}}O(async()=>{await Q()});const Q=async()=>{try{o.value=!0,u.value=await p.fetchRecipes(),u.value.length||(g.value=!0),console.log("Recipe",u.value)}catch(s){console.log("error fetching recipe: ",s),g.value=!0}finally{o.value=!1}};G(n,async s=>{o.value=!0,await new Promise(c=>setTimeout(c,1e3)),o.value=!1,g.value=r.value.length===0});const m=[{name:"name",label:"Recipe Name",align:"left",field:s=>s.name,format:s=>`${s}`,sortable:!0},{name:"category",align:"left",label:"Category",field:"category",sortable:!0},{name:"action",label:"Action",align:"center",sortable:!0}],i=s=>{switch(s){case"Filling":return"teal";case"Dough":return"brown-6";default:return"grey"}};return(s,c)=>(f(),h($,null,[d("div",me,[e(k,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:n.value,"onUpdate:modelValue":c[0]||(c[0]=t=>n.value=t),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:""},{append:a(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])]),o.value?(f(),h("div",_e,[e(ee,{size:"50px",color:"primary"})])):(f(),h("div",fe,[r.value.length===0?(f(),h("div",ge,[e(P,{name:"warning",color:"warning",size:"4em"}),ve])):(f(),j(te,{key:1,class:"table-container elegant-container sticky-header",filter:n.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:m,rows:r.value,"row-key":"name",pagination:y.value,"onUpdate:pagination":c[1]||(c[1]=t=>y.value=t),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"500px"}},{"body-cell-name":a(t=>[e(C,{props:t,class:"cursor-pointer"},{default:a(()=>[d("span",null,[q(z(b(t.row.name))+" ",1),e(L,{class:"bg-blue-grey-8",offset:[10,10]},{default:a(()=>[q("Edit Recipe Name")]),_:1})]),e(ae,{"model-value":t.row.name,"onUpdate:modelValue":x=>R(t.row,x),"auto-save":""},{default:a(x=>[e(k,{class:"text-capitalize",modelValue:x.value,"onUpdate:modelValue":K=>x.value=K,dense:"",autofocus:"",counter:"",onKeyup:H(x.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["model-value","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-category":a(t=>[e(C,{key:"name",props:t},{default:a(()=>[e(le,{color:i(t.row.category)},{default:a(()=>[q(z(t.row.category),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-action":a(t=>[e(C,{props:t},{default:a(()=>[d("div",ye,[e(ue,{delete:t},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var we=T(he,[["__scopeId","data-v-aff73656"]]);const be=l=>(N("data-v-0877dff5"),l=l(),I(),l),xe=be(()=>d("div",{class:"text-h6"},null,-1)),qe={align:"right"},Re={__name:"RecipePage",setup(l){return(p,n)=>(f(),j(X,{class:"elegant-container",flat:""},{default:a(()=>[e(w,{class:"row justify-between"},{default:a(()=>[xe,d("div",qe,[e(ne)])]),_:1}),e(w,null,{default:a(()=>[e(we)]),_:1})]),_:1}))}};var Je=T(Re,[["__scopeId","data-v-0877dff5"]]);export{Je as default};
