import{d as q,r as n,P as s,N as w}from"./index.10b2bb61.js";import{api as c}from"./axios.c7f8c55c.js";const M=q("premix",()=>{const D=n(null),m=n([]),l=n([]),g=n([]),f=n({data:[],pagination:{total:0,per_page:3,current_page:1,last_page:1,from:0,to:0}}),x=n([]),h=n([]),p=n([]),v=n([]),P=n([]),u=n([]),d=n({data:[],pagination:{total:0,per_page:5,current_page:1,last_page:1,from:0,to:0}}),R=async(o,e,a,t)=>{try{const r=await c.get(`/api/get-request-branch-premix/${o}`,{params:{page:e,per_page:a,search:t}});u.value=r.data}catch(r){console.error(r)}},_=async o=>{console.log("warehouseId",o)},y=async(o,e,a=1,t=5,r="")=>{try{const i=await c.get(`/api/get-request-branch-employee-premix/${o}/${e}`,{params:{page:a,per_page:t,search:r}});d.value.data=i.data,console.log("branchEmployeePremix",d.value.data),d.value.pagination=i.data.pagination,console.log("branchEmployeePremix.pagination",d.value.pagination)}catch(i){console.error(i)}};return{premix:D,premixes:m,pendingPremixData:l,confirmPremixData:g,declinePremixData:f,processPremixData:x,completedPremixData:h,toDeliverPremixData:p,toReceivePremixData:v,receivePremixData:P,branchPremix:u,branchEmployeePremix:d,savePremix:async o=>{console.log("data from store",o),console.log("data from store branch id",o.branch_id),s.show();try{const e=await c.post("/api/branch-premix",o);m.value=e.data}catch(e){console.error(e)}finally{s.hide()}},fetchBranchPremix:async o=>{try{const e=await c.get(`/api/get-branch-premix/${o}`);m.value=e.data}catch(e){console.error(e)}},searchPremix:async(o,e)=>{console.log("searchQuery",o),console.log("branchId",e);const a=await c.get("/api/search-premix",{params:{keyword:o,branch_id:e}});console.log("premix search",a.data),m.value=a.data},fetchPendingPremix:async(o,e)=>{console.log("warehouseId",o),console.log("category",e);try{const a=await c.get(`/api/pending-premix/${o}`,{params:{status:e}});console.log("pending",a.data),l.value=a.data}catch(a){console.error("error",a)}},confirmPremix:async o=>{console.log("confirmdata",o),s.show();try{const e=await c.post("/api/confirm-premix",o);if(console.log("confirm",e.data),e.status===200){const a=o.id,t=l.value.findIndex(r=>r.id===a);t!==-1&&l.value.splice(t,1)}return e.data}catch(e){console.log(e)}finally{s.hide()}},fetchConfirmPremix:async o=>{console.log("warehouseId",o);try{const e=await c.get(`/api/get-confirm-premix/${o}`);console.log("confirmed.data",e.data),g.value=e.data}catch(e){console.error(e)}},declinePremix:async o=>{console.log("declineData",o);try{const e=await c.post("/api/decline-premix",o);if(e.status===200){const a=o.id,t=l.value.findIndex(r=>r.id===a);t!==-1&&l.value.splice(t,1)}console.log("decline Reports",e.data),f.value=e.data}catch(e){console.log("error",e)}},fetchDeclinePremix:async(o,e,a=3,t=1,r="")=>{console.log("fetchDeclinePremix warehouseId",o),console.log("status",e),console.log("page",a),console.log("per_page",t),console.log("search",r);try{const i=await c.get(`/api/get-decline-premix/${o}`,{params:{status:e,page:a,per_page:t,search:r}});console.log("decline.data",i.data),f.value=i.data}catch(i){console.log(i)}},processPremix:async o=>{console.log("process data",o),s.show();try{const e=await c.post("/api/process-premix",o);if(console.log("process.data.premix_history.status",e.status),e.status===200){const a=o.id,t=g.value.findIndex(r=>r.id===a);console.log("index",t),t!==-1&&g.value.splice(t,1)}return console.log("process",e.data),e.data}catch(e){console.log(e)}finally{s.hide()}},fetchProcessPremix:async o=>{console.log("warehouseId",o);try{const e=await c.get(`/api/get-process-premix/${o}`);console.log("process.data",e.data),x.value=e.data}catch(e){console.log(e)}},completedPremix:async o=>{console.log("data completed premix",o),s.show();try{const e=await c.post("/api/completed-premix",o);if(e.status===200){const a=o.id,t=x.value.findIndex(r=>r.id===a);console.log("index",t),t!==-1&&x.value.splice(t,1)}return console.log("completed",e.data),e.data}catch(e){console.log(e)}finally{s.hide()}},fetchCompletedPremix:async o=>{console.log("warehouseId",o);const e=await c.get(`/api/get-completed-premix/${o}`);console.log("process.data",e.data),h.value=e.data},toDeliverPremix:async o=>{console.log("data completed premix",o),s.show();try{const e=await c.post("/api/to-deliver-premix",o);if(e.status===200){const a=o.id,t=h.value.findIndex(r=>r.id===a);t!==-1&&h.value.splice(t,1)}console.log("toDeliver",e.data),p.value=e.data}catch(e){console.log(e)}finally{s.hide()}},fetchToDeliverPremix:async o=>{console.log("warehouseId",o);const e=await c.get(`/api/get-to-deliver-premix/${o}`);console.log("TO Deliver data",e.data),p.value=e.data},toReceivePremix:async o=>{console.log("data receive premix",o),s.show();try{const e=await c.post("/api/to-receive-premix",o);if(e.status===200){const a=o.id,t=p.value.findIndex(r=>r.id===a);t!==-1&&p.value.splice(t,1)}console.log("toReceive",e.data),v.value=e.data}catch(e){console.log(e)}finally{s.hide()}},fetchToReceivePremix:async o=>{console.log("warehouseId",o);const e=await c.get(`/api/get-to-receive-premix/${o}`);console.log("TO receive data",e.data),v.value=e.data},fetchRequestBranchPremix:R,receivePremix:async o=>{console.log("data to be received",o),s.show();try{const e=await c.post("/api/receive-premix",o);if(console.log("response to recieve",e.data),e.message==="Branch raw materials updated successfully"){const a=e.data.receivePremixes.request_premixes_id,t=e.data.receivePremixes.status,r=u.value.findIndex(i=>i.id===a);r!==-1&&u.value[r].status}}catch(e){console.log(e)}finally{s.hide()}},fetchReceivePremix:async(o,e,a,t)=>{try{const r=await c.get(`/api/get-receive-premix/${o}`,{params:{status:e,page:a,per_page:t}});P.value=r.data}catch(r){console.log(r)}},saveRequestPremix:async(o,e,a)=>{console.log("data request oremix",o),console.log("data request branchId",e),console.log("data request employeeId",a);const t=10,r=10;s.show();try{const i=await c.post("/api/request-premix",{requests:o});console.log("response",i.data),y(e,a,t,r),w.create({type:"positive",message:"Request Premix successfully"})}catch(i){console.error(i),w.create({type:"negative",message:"Request Premix Error"})}finally{s.hide()}},fetchRequestBranchEmployeePremix:y,fetchWarehousePremix:_}});export{M as u};
