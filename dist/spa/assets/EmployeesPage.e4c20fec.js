import{r as c,c as G,z as Y,u as qe,o as b,a3 as B,J as s,f as e,w as o,K as f,a0 as w,$ as C,aK as g,bd as F,bg as de,e as $,be as L,M as N,Q as K,ae as O,bs as Se,a2 as le,a4 as J,t as pe,L as X,I as z,aJ as ce,O as ye,R as ge,d as ve,N as te,bo as he,a5 as we}from"./index.4a10f117.js";import{Q as I}from"./QTooltip.f70a348e.js";import{Q as R}from"./QPopupEdit.15893e6d.js";import{Q,a as Te}from"./QTable.8a07f6ad.js";import{Q as $e}from"./QChip.5b971b8d.js";import{Q as W}from"./QSelect.d252dfdd.js";import{Q as Ae}from"./QBadge.0cb24b08.js";import{Q as Pe}from"./QSpinnerIos.4650bd6d.js";import{Q as Ce}from"./QInnerLoading.5269870e.js";import{C as j}from"./ClosePopup.832b36be.js";import{f as me,t as ue,u as Ne,c as ee,a as Me,g as Fe,b as Ie,e as re,d as Qe,h as ze,i as Re,j as Be,k as Ke,v as fe,l as Le,m as We,n as Oe,o as je}from"./useEmployeeFunctions.77bef061.js";import{b as He}from"./badge-color.f568cd69.js";import{u as ae}from"./employee.e813025a.js";import{u as be}from"./employment-type.67e3dacb.js";import{_ as Ge}from"./GB_LOGO.b766a815.js";import{p as Ve,v as Je}from"./vfs_fontes.6ee410e6.js";import{_ as Z}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as _e}from"./QSpace.973ed747.js";import{u as xe}from"./branch.1b709870.js";import{a as oe,b as Ee}from"./QMenu.43727b13.js";import{Q as Ue}from"./QList.15fb72bd.js";import{api as ke}from"./axios.cc6187d8.js";import{u as Ye}from"./warehouse.51124f15.js";import"./position-engine.97898d67.js";import"./selection.1443d2ea.js";import"./QVirtualScroll.dacbb396.js";import"./use-virtual-scroll.ff0910db.js";import"./rtl.276c3f1b.js";import"./date.e36b1397.js";var Xe="/assets/IDLogo.76e564fd.png";Ve.exports.vfs=Je;function Ze(V,v){const T=c(!1),D=c(""),h=_=>{x(V,q=>{x(v,U=>{const S=E(_,q,U);Ve.exports.createPdf(S).getDataUrl(u=>{D.value=u,T.value=!0})})})},x=(_,q)=>{const U=new FileReader,S=new XMLHttpRequest;S.open("GET",_,!0),S.responseType="blob",S.onload=function(){S.status===200?(U.readAsDataURL(S.response),U.onloadend=function(){q(U.result)}):console.error("Failed to load image.")},S.send()},E=(_,q,U)=>({pageSize:{width:323,height:204},pageMargins:[0,0,0,0],background:[{image:U,width:140,opacity:.1,absolutePosition:{x:70,y:15}}],content:[{canvas:[{type:"rect",x:0,y:0,w:260,h:150,lineWidth:1,lineColor:"black",dash:{length:4}}],absolutePosition:{x:0,y:0}},{alignment:"justify",columns:[{image:q,width:100,height:153,alignment:"left",margin:[-8,-4,0,0]},{stack:[{text:"GB Bakeshop",style:"header",color:"red",margin:[0,0,50,0]},{text:`Name  : ${me(_)}`,style:"name"},{text:`Position : ${_.position}`,style:"position"},{text:`Phone  : ${_.phone}`,style:"info"},{qr:`${_.id} - ${me(_)} - ${_.position}`,fit:87,foreground:"red",background:"yellow",margin:[30,7,0,0]}]}]}],styles:{header:{fontSize:15,bold:!0,alignment:"center"},name:{fontSize:8,bold:!0,margin:[5,1,0,0]},position:{fontSize:8,margin:[5,2,0,0]},info:{fontSize:7,margin:[5,2,0,0]},address:{fontSize:7,margin:[0,5,0,0]}}});return{dialog:T,pdfUrl:D,handlePrintID:h}}const et={style:{width:"100%"}},tt={class:"text-subtitle2"},ot={class:"row q-gutter-md"},lt={class:"row justify-center q-gutter-x-md"},at={class:"text-white q-ma-sm",align:"right"},nt=["src"],st={__name:"TableSection",setup(V){const{dialog:v,pdfUrl:T,handlePrintID:D}=Ze(Xe,Ge),{getUserBadgePositionColor:h}=He(),x=be(),E=ae(),_=G(()=>E.employees),q=c([]),U=["Super Admin","Admin","Supervisor","Scaler","Lamesador","Hornero","Baker","Cake Maker","Cashier","Sales Clerk","Utility","Not Yet Assigned"],S=k=>{var t;return console.log("designation_type:",(t=k.designation)==null?void 0:t.designation_type),je(k)},u=c({page:1,rowsPerPage:0,rowsNumber:0}),A=c("");c(!1),console.log("employees fetch madepaker",_.value),Y(async()=>{await y()}),Y(async()=>{await x.fetchEmploymentType(),re.value=x.employmentType.map(k=>({label:k.category,value:k.id})),console.log("Employment Type Options:",re.value)});const P=c(null);console.log("===================================="),console.log("employmentTypeIdsss",P.value),console.log("====================================");const y=async(k=0,m=5,t="")=>{try{ue.value=!0,_.value=await E.fetchEmployeeWithEmploymentType(k,m,t),console.log("fetchEmployeeWithEmploymentType",_.value);const{data:n,current_page:a,per_page:l,total:d}=_.value;q.value=n,console.log("employeesRowsData.value",q.value),u.value.page=a,console.log("pagination.value.page",u.value.page),u.value.rowsPerPage=l,console.log("pagination.value.rowsPerPage",u.value.rowsPerPage),u.value.rowsNumber=d,console.log("pagination.value.rowsNumber",u.value.rowsNumber)}catch(n){console.log("employee madepaker",n)}finally{ue.value=!1}},i=k=>{console.log("porps",k),y(k.pagination.page,k.pagination.rowsPerPage,k.filter)};return qe(A,async k=>{await y(u.value.page,u.value.rowsPerPage,k)}),(k,m)=>(b(),B(J,null,[s("div",et,[e(Te,{class:"user-card",title:"Employees",rows:q.value,columns:g(Oe),"row-key":"fullname",pagination:u.value,"onUpdate:pagination":m[1]||(m[1]=t=>u.value=t),"rows-per-page-options":[5,7,10,0],loading:g(ue),filter:A.value,onRequest:i},{"top-right":o(()=>[e(f,{modelValue:A.value,"onUpdate:modelValue":m[0]||(m[0]=t=>A.value=t),outlined:"",dense:"",flat:"",label:"Search",debounce:"300",style:{width:"300px"}},null,8,["modelValue"])]),"body-cell-fullname":o(t=>[e(Q,{key:"fullname",props:t},{default:o(()=>[s("div",tt,[w(C(g(me)(t.row))+" ",1),e(I,{class:"bg-blue-grey-8",offset:[10,10]},{default:o(()=>[w(" Edit Employee Name ")]),_:1})]),e(R,{modelValue:t.row,"onUpdate:modelValue":[n=>t.row=n,n=>g(Ne)(t.row,n)],buttons:"",title:"Edit Employee Full Name"},{default:o(({value:n,set:a})=>[s("div",ot,[e(f,{class:"text-capitalize",modelValue:n.firstname,"onUpdate:modelValue":l=>n.firstname=l,label:"First Name",outlined:"",flat:"",color:"positive",dense:"",autofucos:"",onKeyup:F(l=>a(n),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),e(f,{class:"text-capitalize",modelValue:n.middlename,"onUpdate:modelValue":l=>n.middlename=l,label:"Middle Name",outlined:"",flat:"",color:"positive",dense:"",autofucos:"",onKeyup:F(l=>a(n),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),e(f,{class:"text-capitalize",modelValue:n.lastname,"onUpdate:modelValue":l=>n.lastname=l,label:"Last Name",outlined:"",flat:"",color:"positive",dense:"",autofucos:"",onKeyup:F(l=>a(n),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-position":o(t=>[e(Q,{props:t,style:{"text-align":"justify"}},{default:o(()=>[s("div",null,[e($e,{outline:"",square:"","text-color":g(h)(t.row.position),color:g(h)(t.row.position),class:"q-ma-xs",size:"sm"},{default:o(()=>{var n;return[w(C(g(ee)(((n=t.row)==null?void 0:n.position)||"N/A"))+" ",1),e(I,{class:"bg-blue-grey-8",offset:[10,10]},{default:o(()=>[w(" Edit Position ")]),_:1})]}),_:2},1032,["text-color","color"])]),e(R,{"onUpdate:modelValue":[n=>g(Me)(t.row,n),n=>t.row.position=n],modelValue:t.row.position,buttons:"",title:"Edit Position"},{default:o(n=>[e(W,{class:"text-capitalize",modelValue:n.value,"onUpdate:modelValue":a=>n.value=a,options:U,outlined:"",dense:"",autofocus:"",counter:"",onKeyup:F(n.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-employmentType":o(t=>[e(Q,{props:t},{default:o(()=>{var n;return[e(Ae,{color:g(Fe)((n=t.row.employment_type)==null?void 0:n.category)},{default:o(()=>{var a;return[w(C(((a=t.row.employment_type)==null?void 0:a.category)||"N/A")+" ",1),e(I,{class:"bg-blue-grey-8",offset:[10,10]},{default:o(()=>[w(" Edit Employment Type ")]),_:1})]}),_:2},1032,["color"]),e(R,{modelValue:t.row.employment_type.id,"onUpdate:modelValue":a=>t.row.employment_type.id=a,buttons:"",title:"Edit Employment Type",onSave:a=>g(Ie)(t.row,a,y)},{default:o(a=>[e(W,{modelValue:a.value,"onUpdate:modelValue":l=>a.value=l,options:g(re),autofocus:"","option-label":"label","option-value":"value","emit-value":"","map-options":"",dense:"",outlined:"",behavior:"menu",onKey:l=>a.set(a.value)},null,8,["modelValue","onUpdate:modelValue","options","onKey"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]}),_:2},1032,["props"])]),"body-cell-address":o(t=>[e(Q,{props:t,style:{"text-align":"justify"}},{default:o(()=>[s("div",null,[w(C(g(ee)(t.row.address))+" ",1),e(I,{class:"bg-blue-grey-8",offset:[10,10]},{default:o(()=>[w(" Edit Address ")]),_:1})]),e(R,{"onUpdate:modelValue":[n=>g(Qe)(t.row,n),n=>t.row.address=n],modelValue:t.row.address,buttons:"",title:"Edit Address"},{default:o(n=>[e(f,{class:"text-capitalize",modelValue:n.value,"onUpdate:modelValue":a=>n.value=a,dense:"",autofocus:"",counter:"",onKeyup:F(n.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-phone":o(t=>[e(Q,{props:t},{default:o(()=>[s("div",null,[w(C(g(ee)(t.row.phone))+" ",1),e(I,{class:"bg-blue-grey-8",offset:[10,10]},{default:o(()=>[w(" Edit Phone ")]),_:1})]),e(R,{"onUpdate:modelValue":[n=>g(ze)(t.row,n),n=>t.row.phone=n],modelValue:t.row.phone,buttons:"",title:"Edit Phone"},{default:o(n=>[e(f,{modelValue:n.value,"onUpdate:modelValue":a=>n.value=a,dense:"",autofocus:"",mask:"+(63) ### - ### - ####",counter:"",onKeyup:F(n.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-birthdate":o(t=>[e(Q,{props:t},{default:o(()=>[s("div",null,[w(C(g(Re)(t.row.birthdate))+" ",1),e(I,{class:"bg-blue-grey-8",offset:[10,10]},{default:o(()=>[w(" Edit Birthdate ")]),_:1})]),e(R,{"onUpdate:modelValue":[n=>g(Be)(t.row,n),n=>t.row.birthdate=n],modelValue:t.row.birthdate,buttons:"",title:"Edit Birthdate"},{default:o(n=>[e(f,{modelValue:n.value,"onUpdate:modelValue":a=>n.value=a,dense:"",autofocus:"",type:"date",hint:"mm/dd/yyyy",onKeyup:F(n.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-designation":o(t=>[e(Q,{props:t},{default:o(()=>{var n,a;return[s("div",{class:de({"editable-cell":t.row.designation})},[w(C(g(ee)((n=t.row.designation)==null?void 0:n.name)||"N/A")+" ",1),(a=t.row.designation)!=null&&a.name?(b(),$(I,{key:0,class:"bg-blue-grey-8",offset:[10,10]},{default:o(()=>[w(" Edit Designation ")]),_:1})):L("",!0)],2),t.row.designation?(b(),$(R,{key:0,modelValue:t.row.designation.id,"onUpdate:modelValue":l=>t.row.designation.id=l,buttons:"",title:"Edit Employee designation",onSave:l=>g(Ke)(t.row.designation,l,y)},{default:o(l=>[e(W,{modelValue:l.value,"onUpdate:modelValue":d=>l.value=d,options:S(t.row),"option-value":"id","option-label":"name","emit-value":"","map-options":"",dense:"",outlined:"",onKeyup:F(d=>l.set(l.value),["enter"])},null,8,["modelValue","onUpdate:modelValue","options","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])):L("",!0)]}),_:2},1032,["props"])]),"body-cell-time_in":o(t=>[e(Q,{props:t},{default:o(()=>{var n;return[s("div",{class:de({"editable-cell":t.row.designation})},[w(C(((n=t.row.designation)==null?void 0:n.time_in)||"N/A")+" ",1),t.row.designation?(b(),$(I,{key:0,class:"bg-blue-grey-8",offset:[10,10]},{default:o(()=>[w(" Edit Time In ")]),_:1})):L("",!0)],2),t.row.designation?(b(),$(R,{key:0,"onUpdate:modelValue":[a=>g(Le)(t.row.designation,a),a=>t.row.designation.time_in=a],modelValue:t.row.designation.time_in,buttons:"",title:"Edit Employee Time In"},{default:o(a=>[e(f,{modelValue:a.value,"onUpdate:modelValue":[l=>a.value=l,l=>a.value=l],"model-value":a.value,dense:"",autofocus:"",mask:"##:## AA",rules:[g(fe)],hint:"Format: 01:00 AM/PM",onKeyup:F(a.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","model-value","rules","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])):L("",!0)]}),_:2},1032,["props"])]),"body-cell-time_out":o(t=>[e(Q,{props:t},{default:o(()=>{var n;return[s("div",{class:de({"editable-cell":t.row.designation})},[w(C(((n=t.row.designation)==null?void 0:n.time_out)||"N/A")+" ",1),t.row.designation?(b(),$(I,{key:0,class:"bg-blue-grey-8",offset:[10,10]},{default:o(()=>[w(" Edit Time Out ")]),_:1})):L("",!0)],2),t.row.designation?(b(),$(R,{key:0,"onUpdate:modelValue":[a=>g(We)(t.row.designation,a),a=>t.row.designation.time_out=a],modelValue:t.row.designation.time_out,buttons:"",title:"Edit Employee Time Out"},{default:o(a=>[e(f,{modelValue:a.value,"onUpdate:modelValue":[l=>a.value=l,l=>a.value=l],"model-value":a.value,dense:"",autofocus:"",mask:"##:## AA",rules:[g(fe)],hint:"Format: 01:00 AM/PM",onKeyup:F(a.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","model-value","rules","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])):L("",!0)]}),_:2},1032,["props"])]),"body-cell-actions":o(t=>[e(Q,{props:t},{default:o(()=>[s("div",lt,[e(N,{round:"",dense:"",size:"md",color:"black",icon:"print",flat:"",onClick:n=>g(D)(t.row)},{default:o(()=>[e(I,{class:"bg-black",delay:200},{default:o(()=>[w(" Print ")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),loading:o(()=>[e(Ce,{showing:""},{default:o(()=>[e(Pe,{size:"50px",color:"grey-10"})]),_:1})]),_:1},8,["rows","columns","pagination","loading","filter"])]),e(le,{modelValue:g(v),"onUpdate:modelValue":m[2]||(m[2]=t=>Se(v)?v.value=t:null),persistent:""},{default:o(()=>[e(K,{class:"bg-gradient",style:{width:"700px","max-width":"80vw"}},{default:o(()=>[s("div",at,[O(e(N,{icon:"close",flat:"",dense:"",round:""},null,512),[[j]])]),s("div",null,[s("iframe",{src:g(T),width:"100%",height:"700px"},null,8,nt)])]),_:1})]),_:1},8,["modelValue"])],64))}};var it=Z(st,[["__scopeId","data-v-34748a5a"]]);const De=V=>(ye("data-v-8756ce02"),V=V(),ge(),V),dt={class:"q-mb-md text-center"},ut=De(()=>s("div",{class:"text-center"},[s("div",{class:"text-h6"},"Add Employee")],-1)),rt=De(()=>s("div",{class:"text-h5 q-mr-md"},"\u{1F468}\u200D\u{1F4BC}\u{1F469}\u200D\u{1F4BC} Add New Employee",-1)),mt={class:"q-gutter-y-sm"},pt={class:"q-gutter-y-sm q-mx-auto"},ct={class:"row q-gutter-x-sm item-start"},yt={class:"row q-gutter-x-sm"},gt={__name:"RegisterEmployee",setup(V){const v=ae(),T=c(!1),D=c(!1),h=()=>{T.value=!0};xe();const x=be(),E=["Super Admin","Admin","Supervisor","Scaler","Lamesador","Hornero","Baker","Cake Maker","Cashier","Sales Clerk","Utility","Not Yet Assigned"],_=["Male","Female"],q=c([]),U=c([]);c([]),c(q.value),Y(async()=>{await x.fetchEmploymentType(),U.value=x.employmentType.map(P=>({label:P.category,value:P.id}))});const u=pe({firstname:"",middlename:"",lastname:"",address:"",birthdate:"",sex:"",phone:"",position:"",employment_type:""}),A=async()=>{D.value=!0;const P={...u,employment_type_id:u.employment_type.value,status:"Active"};console.log("employee",P),await v.createEmployee(P),D.value=!1,r(),T.value=!1},r=()=>{u.firstname="",u.middlename="",u.lastname="",u.address="",u.birthdate="",u.sex="",u.phone="",u.position="",u.employment_type=""};return(P,y)=>(b(),B(J,null,[e(K,{class:"q-pa-md user-card",onClick:h},{default:o(()=>[s("div",dt,[e(X,{name:"person_add",size:"70px",color:"yellow-7"})]),ut]),_:1}),e(le,{modelValue:T.value,"onUpdate:modelValue":y[9]||(y[9]=i=>T.value=i),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:o(()=>[e(K,{style:{width:"500px","max-width":"120vw"}},{default:o(()=>[e(z,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:o(()=>[rt,e(_e),O(e(N,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[j]])]),_:1}),e(z,null,{default:o(()=>[s("div",mt,[s("div",pt,[e(f,{class:"text-capitalize",modelValue:u.firstname,"onUpdate:modelValue":y[0]||(y[0]=i=>u.firstname=i),outlined:"",dense:"",label:"First Name",rules:[i=>i&&i.length>0||"Required"]},null,8,["modelValue","rules"]),e(f,{class:"text-capitalize",modelValue:u.middlename,"onUpdate:modelValue":y[1]||(y[1]=i=>u.middlename=i),outlined:"",dense:"",label:"Middle Name",rules:[i=>i&&i.length>0||"Required"]},null,8,["modelValue","rules"]),e(f,{class:"text-capitalize",modelValue:u.lastname,"onUpdate:modelValue":y[2]||(y[2]=i=>u.lastname=i),outlined:"",dense:"",label:"Last Name",rules:[i=>i&&i.length>0||"Required"]},null,8,["modelValue","rules"]),e(f,{class:"text-capitalize",modelValue:u.address,"onUpdate:modelValue":y[3]||(y[3]=i=>u.address=i),outlined:"",dense:"",label:"Address",rules:[i=>i&&i.length>0||"Required"]},null,8,["modelValue","rules"])]),s("div",ct,[s("div",null,[e(f,{modelValue:u.birthdate,"onUpdate:modelValue":y[4]||(y[4]=i=>u.birthdate=i),outlined:"",dense:"",label:"Birthdate",type:"date",style:{width:"230px"},rules:[i=>i&&i.length>0||"Required"]},null,8,["modelValue","rules"])]),s("div",null,[e(f,{modelValue:u.phone,"onUpdate:modelValue":y[5]||(y[5]=i=>u.phone=i),outlined:"",dense:"",label:"Phone Number",mask:"+(63) ### - ### - ####",placeholder:"(+63) ### - ### - ####",rules:[i=>i&&i.length>0||"Required"],style:{width:"230px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","rules"])])]),s("div",yt,[s("div",null,[e(W,{modelValue:u.sex,"onUpdate:modelValue":y[6]||(y[6]=i=>u.sex=i),dense:"",outlined:"",label:"Sex",options:_,rules:[i=>i&&i.length>0||"Required"],style:{width:"120px"},behavior:"menu","hide-dropdown-icon":""},null,8,["modelValue","rules"])]),s("div",null,[e(W,{modelValue:u.position,"onUpdate:modelValue":y[7]||(y[7]=i=>u.position=i),outlined:"",dense:"","hide-dropdown-icon":"",label:"Position",options:E,rules:[i=>i&&i.length>0||"Required"],behavior:"menu",style:{width:"175px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","rules"])]),s("div",null,[e(W,{modelValue:u.employment_type,"onUpdate:modelValue":y[8]||(y[8]=i=>u.employment_type=i),outlined:"",dense:"","hide-dropdown-icon":"",label:"Employment Type",options:U.value,behavior:"menu",style:{width:"155px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","options"])])])])]),_:1}),e(ce,{class:"row q-px-lg q-py-sm q-pt-none",align:"left"},{default:o(()=>[O(e(N,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[j]]),e(N,{class:"glossy",color:"teal",label:"Add",icon:"add",onClick:A,loading:D.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var _t=Z(gt,[["__scopeId","data-v-8756ce02"]]);const ft=ve("designations",()=>{const V=c(null),v=c([]);return{designation:V,designations:v,createDesignation:async D=>{try{const h=await ke.post("/api/branchEmployee",D);h&&h.data?(v.value.unshift(h.data),te.create({type:"positive",message:"Employee created successfully",setTimeout:1e3,position:"top"})):console.error("Unexpected API Response:",h)}catch(h){console.error("Error creating employee:",h),te.create({type:"negative",message:"Failed to create employeesss",setTimeout:1e3})}}}});const ne=V=>(ye("data-v-1c9fdef4"),V=V(),ge(),V),vt={class:"q-mb-md text-center"},ht=ne(()=>s("div",{class:"text-center"},[s("div",{class:"text-subtitle1 text-weight-medium"},"Branch Designations")],-1)),wt=ne(()=>s("div",{class:"text-h5 q-mr-md"},"\u{1F468}\u200D\u{1F4BC}\u{1F469}\u200D\u{1F4BC} Branch Designation",-1)),bt={key:0,class:"custom-list z-top"},Vt={class:"row justify-between q-gutter-md"},xt={class:"row q-gutter-x-md"},Et=ne(()=>s("div",{class:"q-my-md"},"Designation",-1)),Ut=ne(()=>s("div",{class:"q-my-md"},"Time Schedule",-1)),kt={class:"row justify-between q-gutter-x-md"},Dt={__name:"BranchDesignationEmployee",setup(V){G(()=>{const l=window.innerWidth;return l>1200?"500px":l>768?"80vw":"95vw"});const v=c(!1),T=ft(),D=ae(),h=xe(),x=c([]);c([]);const E=c(""),_=c(x.value),q=c(!1),U=c(!1),S=G(()=>D.employee),u=async()=>{E.value.trim()&&(U.value=!0,await D.searchCertainEmployee(E.value),U.value=!1)},A=G(()=>{const l=/^(0[1-9]|1[0-2]):([0-5][0-9]) (AM|PM)$/;return!r.employee_id||!r.employee_name||!r.position||!r.branch_name||!r.time_in||!r.time_out||!l.test(r.time_in)||!l.test(r.time_out)}),r=pe({employee_id:"",employee_name:"",position:"",branch_name:"",time_in:"",time_out:""});Y(async()=>{await h.fetchBranches(),x.value=h.branches.map(l=>({label:l.name,value:l.id})),_.value=x.value});const y=(l,d)=>{d(()=>{const p=l.toLowerCase();_.value=l===""?x.value:x.value.filter(M=>M.label.toLowerCase().includes(p))})},i=l=>{console.log("Selected Employee:",l),r.employee_id=l.id,r.employee_name=k(l),r.position=l.position,E.value="",console.log("Filled Designation Data:",r)},k=l=>{const d=ie=>ie?ie.charAt(0).toUpperCase()+ie.slice(1).toLowerCase():"",p=l.firstname?d(l.firstname):"No Firstname",M=l.middlename?d(l.middlename).charAt(0)+".":"",H=l.lastname?d(l.lastname):"No Lastname";return`${p} ${M} ${H}`},m=()=>{v.value=!0},t=()=>{r.employee_id="",r.employee_name="",r.position="",r.branch_name="",r.time_in="",r.time_out=""},n=l=>/^(0[1-9]|1[0-2]):([0-5][0-9]) (AM|PM)$/.test(l)||"Time format must be HH:MM AM/PM (e.g., 01:00 AM)",a=async()=>{q.value=!0;const l={...r,branch_id:r.branch_name.value};await T.createDesignation(l),console.log("Designation Data to Save:",l),q.value=!1,v.value=!1,t()};return(l,d)=>(b(),B(J,null,[e(K,{class:"q-pa-md user-card",onClick:m,align:"center"},{default:o(()=>[s("div",vt,[e(X,{name:"add_business",size:"20px",color:"red-7"})]),ht]),_:1}),e(le,{modelValue:v.value,"onUpdate:modelValue":d[6]||(d[6]=p=>v.value=p),"backdrop-filter":"blur(4px) saturate(150%)",position:"right"},{default:o(()=>[e(K,{style:{width:"550px","max-width":"100vw"}},{default:o(()=>[e(z,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:o(()=>[wt,e(_e),O(e(N,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[j]])]),_:1}),e(z,null,{default:o(()=>[s("div",null,[e(f,{modelValue:E.value,"onUpdate:modelValue":[d[0]||(d[0]=p=>E.value=p),u],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name or position"},{append:o(()=>[U.value?(b(),$(he,{key:1,color:"grey",size:"sm"})):(b(),$(X,{key:0,name:"search"}))]),default:o(()=>[E.value?(b(),B("div",bt,[e(K,null,{default:o(()=>[e(Ue,{separator:""},{default:o(()=>{var p;return[(p=S.value)!=null&&p.length?(b(!0),B(J,{key:1},we(S.value,M=>(b(),$(oe,{onClick:H=>i(M),key:M.id,clickable:""},{default:o(()=>[e(Ee,null,{default:o(()=>[w(C(k(M)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(b(),$(oe,{key:0},{default:o(()=>[w(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):L("",!0)]),_:1},8,["modelValue"])])]),_:1}),e(z,null,{default:o(()=>[s("div",Vt,[e(f,{outlined:"",readonly:"",dense:"",label:"Full Name",modelValue:r.employee_name,"onUpdate:modelValue":d[1]||(d[1]=p=>r.employee_name=p),style:{width:"350px"},rules:[p=>!!p||"Employee name is required"]},null,8,["modelValue","rules"]),e(f,{outlined:"",readonly:"",dense:"",label:"Position",modelValue:r.position,"onUpdate:modelValue":d[2]||(d[2]=p=>r.position=p),style:{width:"150px"},rules:[p=>!!p||"Position is required"]},null,8,["modelValue","rules"])])]),_:1}),e(z,null,{default:o(()=>[s("div",xt,[s("div",null,[Et,e(W,{modelValue:r.branch_name,"onUpdate:modelValue":d[3]||(d[3]=p=>r.branch_name=p),outlined:"",flat:"",dense:"","use-input":"",clearable:"","input-debounce":"0",options:_.value,label:"Branch",onFilter:y,"hide-dropdown-icon":"",behavior:"menu",style:{width:"200px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","options"])]),s("div",null,[Ut,s("div",kt,[e(f,{modelValue:r.time_in,"onUpdate:modelValue":d[4]||(d[4]=p=>r.time_in=p),outlined:"",flat:"",dense:"",mask:"##:## AA",label:"Time IN",rules:[n],hint:"Format: 08:00 AM/PM",style:{width:"140px","max-width":"500px","min-width":"100px"},"hide-dropdown-icon":""},null,8,["modelValue","rules"]),e(f,{modelValue:r.time_out,"onUpdate:modelValue":d[5]||(d[5]=p=>r.time_out=p),outlined:"",flat:"",dense:"",mask:"##:## AA",label:"Time OUT",rules:[n],hint:"Format: 01:00 AM/PM",style:{width:"140px","max-width":"500px","min-width":"100px"},"hide-dropdown-icon":""},null,8,["modelValue","rules"])])])])]),_:1}),e(ce,{class:"row q-px-lg q-py-sm q-pt-none",align:"left"},{default:o(()=>[O(e(N,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[j]]),e(N,{class:"glossy",color:"teal",label:"Add",onClick:a,loading:q.value,disable:A.value},null,8,["loading","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var qt=Z(Dt,[["__scopeId","data-v-1c9fdef4"]]);const St=ve("warehouseEmployee",()=>{const V=c(null),v=c([]);return{warehouseEmployee:V,warehouseEmployees:v,createWarehouseEmployee:async D=>{console.log("Creating employee with data:",D);try{const h=await ke.post("/api/warehouse-employee",D);v.value=h.data,te.create({type:"positive",message:"Employee created successfully",setTimeout:1e3,position:"top"}),console.log("Response:",h.data)}catch(h){console.error("Error creating employee:",h),te.create({type:"negative",message:"Failed to create employeesss",setTimeout:1e3})}}}});const se=V=>(ye("data-v-7d7dae92"),V=V(),ge(),V),Tt={class:"q-mb-md text-center"},$t=se(()=>s("div",{class:"text-center"},[s("div",{class:"text-subtitle1 text-weight-medium"}," Warehouse Designations ")],-1)),At=se(()=>s("div",{class:"text-h5 q-mr-md"},"\u{1F468}\u200D\u{1F4BC}\u{1F469}\u200D\u{1F4BC} Warehouse Designation",-1)),Pt={key:0,class:"custom-list z-top"},Ct={class:"row justify-between q-gutter-md"},Nt={class:"row q-gutter-x-md"},Mt=se(()=>s("div",{class:"q-my-md"},"Designation",-1)),Ft=se(()=>s("div",{class:"q-my-md"},"Time Schedule",-1)),It={class:"row justify-between q-gutter-x-md"},Qt={__name:"WarehouseDesignationEmployee",setup(V){G(()=>{const a=window.innerWidth;return a>1200?"500px":a>768?"80vw":"95vw"});const v=c(!1),T=St(),D=ae(),h=Ye(),x=c([]);c([]);const E=c(""),_=c(x.value),q=c(!1),U=c(!1),S=G(()=>D.employee),u=async()=>{E.value.trim()&&(U.value=!0,await D.searchCertainEmployee(E.value),U.value=!1)},A=a=>/^(0[1-9]|1[0-2]):[0-5][0-9] (AM|PM)$/i.test(a)||"Time format must be HH:MM AM/PM (e.g., 01:00 AM)";Y(async()=>{await h.fetchWarehouses(),x.value=h.warehouses.map(a=>({label:a.name,value:a.id})),_.value=x.value});const P=(a,l)=>{l(()=>{const d=a.toLowerCase();_.value=a===""?x.value:x.value.filter(p=>p.label.toLowerCase().includes(d))})},y=a=>{console.log("Selected Employee:",a),m.employee_id=a.id,m.employee_name=i(a),m.position=a.position,E.value="",console.log("Filled Designation Data:",m)},i=a=>{const l=H=>H?H.charAt(0).toUpperCase()+H.slice(1).toLowerCase():"",d=a.firstname?l(a.firstname):"No Firstname",p=a.middlename?l(a.middlename).charAt(0)+".":"",M=a.lastname?l(a.lastname):"No Lastname";return`${d} ${p} ${M}`},k=()=>{v.value=!0},m=pe({employee_id:"",employee_name:"",position:"",warehouse_name:"",time_in:"",time_out:""}),t=()=>{m.employee_id="",m.employee_name="",m.position="",m.warehouse_name="",m.time_in="",m.time_out=""},n=async()=>{q.value=!0;const a={...m,warehouse_id:m.warehouse_name.value};await T.createWarehouseEmployee(a),console.log("Designation Data to Save:",a),q.value=!1,t(),v.value=!1};return(a,l)=>(b(),B(J,null,[e(K,{class:"q-pa-md user-card",onClick:k,align:"center"},{default:o(()=>[s("div",Tt,[e(X,{name:"factory",size:"20px",color:`blue-grey-6
`})]),$t]),_:1}),e(le,{modelValue:v.value,"onUpdate:modelValue":l[6]||(l[6]=d=>v.value=d),"backdrop-filter":"blur(4px) saturate(150%)",position:"right"},{default:o(()=>[e(K,{style:{width:"550px","max-width":"100vw"}},{default:o(()=>[e(z,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:o(()=>[At,e(_e),O(e(N,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[j]])]),_:1}),e(z,null,{default:o(()=>[s("div",null,[e(f,{modelValue:E.value,"onUpdate:modelValue":[l[0]||(l[0]=d=>E.value=d),u],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name or position"},{append:o(()=>[U.value?(b(),$(he,{key:1,color:"grey",size:"sm"})):(b(),$(X,{key:0,name:"search"}))]),default:o(()=>[E.value?(b(),B("div",Pt,[e(K,null,{default:o(()=>[e(Ue,{separator:""},{default:o(()=>{var d;return[(d=S.value)!=null&&d.length?(b(!0),B(J,{key:1},we(S.value,p=>(b(),$(oe,{onClick:M=>y(p),key:p.id,clickable:""},{default:o(()=>[e(Ee,null,{default:o(()=>[w(C(i(p)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(b(),$(oe,{key:0},{default:o(()=>[w(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):L("",!0)]),_:1},8,["modelValue"])])]),_:1}),e(z,null,{default:o(()=>[s("div",Ct,[e(f,{outlined:"",readonly:"",dense:"",label:"Full Name",modelValue:m.employee_name,"onUpdate:modelValue":l[1]||(l[1]=d=>m.employee_name=d),style:{width:"350px"}},null,8,["modelValue"]),e(f,{outlined:"",readonly:"",dense:"",label:"Position",modelValue:m.position,"onUpdate:modelValue":l[2]||(l[2]=d=>m.position=d),style:{width:"150px"}},null,8,["modelValue"])])]),_:1}),e(z,null,{default:o(()=>[s("div",Nt,[s("div",null,[Mt,e(W,{modelValue:m.warehouse_name,"onUpdate:modelValue":l[3]||(l[3]=d=>m.warehouse_name=d),outlined:"",flat:"",dense:"","use-input":"",clearable:"","input-debounce":"0",options:_.value,label:"Warehouse",onFilter:P,"hide-dropdown-icon":"",behavior:"menu",style:{width:"200px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","options"])]),s("div",null,[Ft,s("div",It,[e(f,{modelValue:m.time_in,"onUpdate:modelValue":l[4]||(l[4]=d=>m.time_in=d),outlined:"",flat:"",dense:"",mask:"##:## AA",label:"Time IN",rules:[A],hint:"Format: 08:00 AM/PM",style:{width:"140px","max-width":"500px","min-width":"100px"},"hide-dropdown-icon":""},null,8,["modelValue","rules"]),e(f,{modelValue:m.time_out,"onUpdate:modelValue":l[5]||(l[5]=d=>m.time_out=d),outlined:"",flat:"",dense:"",mask:"##:## AA",label:"Time OUT",rules:[A],hint:"Format: 01:00 AM/PM",style:{width:"140px","max-width":"500px","min-width":"100px"},"hide-dropdown-icon":""},null,8,["modelValue","rules"])])])])]),_:1}),e(ce,{class:"row q-px-lg q-py-sm q-pt-none",align:"left"},{default:o(()=>[O(e(N,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[j]]),e(N,{class:"glossy",color:"teal",label:"Add",onClick:n,loading:q.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var zt=Z(Qt,[["__scopeId","data-v-7d7dae92"]]);const Rt={class:"row justify-between"},Bt={class:"col-12 col-md-9 col-lg-9 q-pa-sm"},Kt={class:"col-12 col-md-3 col-lg-3 q-gutter-y-md q-pa-sm card-side"},Lt={class:"row2"},Wt={__name:"EmployeesPage",setup(V){return(v,T)=>(b(),B("div",Rt,[s("div",Bt,[e(it)]),s("div",Kt,[e(_t),s("div",Lt,[e(qt),e(zt)])])]))}};var Vo=Z(Wt,[["__scopeId","data-v-71812045"]]);export{Vo as default};
