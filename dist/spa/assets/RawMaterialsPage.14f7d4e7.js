import{Q as V}from"./QBadge.1cbfe3d6.js";import{r as h,t as L,o as b,a2 as M,f as e,M as v,w as a,Q as N,I as q,ad as C,a0 as z,aH as W,J as l,K as R,aI as E,a1 as B,a3 as U,O as D,R as P,$ as A,N as X,c as F,z as Y,u as Z,L as j,e as O,_ as S,aJ as ee}from"./index.90e14ade.js";import{Q as ae}from"./QPage.b58e5763.js";import{Q as G}from"./QSpace.df1b0d53.js";import{Q as I}from"./QSelect.1159fbbe.js";import{Q as te}from"./QForm.a121cd3e.js";import{C as k}from"./ClosePopup.a7ee5f13.js";import{u as T}from"./raw-material.c35d1473.js";import{_ as Q}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as le}from"./QSpinnerDots.5ad650c9.js";import{Q as x,a as se}from"./QTable.73a7d3d9.js";import{Q as J}from"./QTooltip.ee5c219f.js";import"./use-virtual-scroll.15feeafd.js";import"./rtl.afc00592.js";import"./QChip.0c55697e.js";import"./QList.f5d06b33.js";import"./QMenu.c7ee5ea4.js";import"./selection.197c480b.js";import"./axios.5df481c6.js";import"./QVirtualScroll.fa89f4f2.js";const oe=o=>(D("data-v-58d067fd"),o=o(),P(),o),ne=oe(()=>l("div",{class:"text-h5 q-mr-md"},"\u{1F6E0}\uFE0F Add Raw Materials",-1)),re={class:"q-mt-lg q-animated q-animate-bounce"},ie={class:"q-mt-md q-animated q-animate-bounce"},de={class:"q-mt-md q-animated q-animate-bounce"},ce={class:"q-mt-md q-animated q-animate-bounce"},ue={__name:"RawMaterialsCreate",setup(o){const f=T(),i=h(!1),g=["Ingredients","Packaging Materials"],w=["Grams","Pcs"],m=h(!1),d=()=>{i.value=!0},n=L({name:"",code:"",category:null,unit:null}),y=async()=>{m.value=!0;try{const c=await f.createRawMaterials(n);console.log(c),i.value=!1,p()}catch(c){console.error(c),m.value=!1,i.value=!0}finally{m.value=!1}},p=()=>{n.name="",n.code="",n.category=null,n.unit=null};return(c,t)=>(b(),M(U,null,[e(v,{class:"q-pa-sm btn-add",outline:"",dense:"",elevated:"",icon:"add_circle",label:"Add Raw Materials",onClick:d,size:"md",color:"dark"}),e(B,{modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=s=>i.value=s),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:a(()=>[e(N,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:a(()=>[e(q,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:a(()=>[ne,e(G),C(e(v,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},null,512),[[k]])]),_:1}),e(z,{class:"separator-gradient"}),e(q,{class:"q-px-xl q-pt-none q-pb-lg"},{default:a(()=>[e(te,{onSubmit:W(y,["prevent"])},{default:a(()=>[l("div",re,[e(R,{class:"text-capitalize",modelValue:n.name,"onUpdate:modelValue":t[0]||(t[0]=s=>n.name=s),outlined:"",dense:"",label:"Raw Materials Name",rules:[s=>s&&s.length>0||"Name is required"]},null,8,["modelValue","rules"])]),l("div",ie,[e(R,{modelValue:n.code,"onUpdate:modelValue":t[1]||(t[1]=s=>n.code=s),outlined:"",dense:"",label:"Raw Materials Code",mask:"##-AAAAAAAAAAAAAAAAAAAAA",placeholder:"00-SAMPLE",rules:[s=>s&&s.length>0||"Code is required"]},null,8,["modelValue","rules"])]),l("div",de,[e(I,{modelValue:n.category,"onUpdate:modelValue":t[2]||(t[2]=s=>n.category=s),options:g,label:"Category","hide-dropdown-icon":"",outlined:"",dense:"",behavior:"menu",rules:[s=>s&&s.length>0||"Category is required"]},null,8,["modelValue","rules"])]),l("div",ce,[e(I,{modelValue:n.unit,"onUpdate:modelValue":t[3]||(t[3]=s=>n.unit=s),options:w,label:"Unit","hide-dropdown-icon":"",outlined:"",dense:"",behavior:"menu",rules:[s=>s&&s.length>0||"Unit is required"]},null,8,["modelValue","rules"])]),e(E,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:a(()=>[C(e(v,{class:"btn-cancel glossy",color:"negative",label:"Cancel"},null,512),[[k]]),e(v,{type:"submit",class:"btn-create glossy",color:"positive",label:"Create",loading:m.value},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var me=Q(ue,[["__scopeId","data-v-58d067fd"]]);const $=o=>(D("data-v-ec579294"),o=o(),P(),o),pe=$(()=>l("div",{class:"text-h5 q-mr-md"},"\u{1F6E0}\uFE0F Edit Raw Materials",-1)),_e={class:"q-animated q-animate-bounce"},ge=$(()=>l("div",{class:"q-my-sm"},"Raw Materials Name",-1)),we={class:"q-animated q-animate-bounce"},ve=$(()=>l("div",{class:"q-my-sm"},"Raw Materials Code",-1)),fe={class:"q-animated q-animate-bounce"},be=$(()=>l("div",{class:"q-my-sm"},"Category",-1)),ye={class:"q-mt-md"},he={class:"q-animated q-animate-bounce"},qe=$(()=>l("div",{class:"q-my-sm"},"Unit",-1)),Me={class:"q-mt-md"},Ae={__name:"RawMaterialsTableEdit",props:["edit"],setup(o){const f=T(),i=h(!1),g=["Ingredients","Packaging Materials"],w=["Grams","Pcs"],m=o,d=L({name:"",code:"",category:null,unit:null}),n=()=>{const p=Object.assign(d,m.edit.row);i.value=!0,console.log("editRawMaterials",p)},y=async()=>{try{const p={...m.edit.row,...d};await f.updateRawMaterials(m.edit.row.id,p),i.value=!1}catch(p){console.error("Failed to update ingredient:",p)}};return(p,c)=>(b(),M(U,null,[e(v,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:"",onClick:n},{default:a(()=>[e(J,{class:"bg-positive",delay:200},{default:a(()=>[A("Edit")]),_:1})]),_:1}),e(B,{modelValue:i.value,"onUpdate:modelValue":c[4]||(c[4]=t=>i.value=t),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:a(()=>[e(N,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:a(()=>[e(q,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:a(()=>[pe,e(G),C(e(v,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},null,512),[[k]])]),_:1}),e(z),e(q,{class:"q-my-md q-mx-md q-gutter-y-md"},{default:a(()=>[l("div",_e,[ge,e(R,{modelValue:d.name,"onUpdate:modelValue":c[0]||(c[0]=t=>d.name=t),outlined:"",dense:""},null,8,["modelValue"])]),l("div",we,[ve,e(R,{modelValue:d.code,"onUpdate:modelValue":c[1]||(c[1]=t=>d.code=t),outlined:"",dense:"",rules:[t=>t&&t.length>0],mask:"##-AAAAAAAAAAAAAAAAAAAAA",placeholder:"00-SAMPLE"},null,8,["modelValue","rules"])]),l("div",fe,[be,l("div",ye,[e(I,{modelValue:d.category,"onUpdate:modelValue":c[2]||(c[2]=t=>d.category=t),options:g,"hide-dropdown-icon":"",outlined:"",dense:"",behavior:"menu",rules:[t=>t&&t.length>0]},null,8,["modelValue","rules"])])]),l("div",he,[qe,l("div",Me,[e(I,{modelValue:d.unit,"onUpdate:modelValue":c[3]||(c[3]=t=>d.unit=t),options:w,"hide-dropdown-icon":"",outlined:"",dense:"",behavior:"menu"},null,8,["modelValue"])])])]),_:1}),e(E,{class:"row q-ma-md",align:"right"},{default:a(()=>[C(e(v,{class:"btn-cancel glossy",color:"negative",label:"Cancel"},null,512),[[k]]),e(v,{class:"btn-create glossy",color:"positive",label:"Save",loading:p.loading,onClick:y},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var xe=Q(Ae,[["__scopeId","data-v-ec579294"]]);const H=o=>(D("data-v-674db72c"),o=o(),P(),o),Ve=H(()=>l("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),Ce=H(()=>l("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),Re={__name:"RawMaterialsTableDelete",props:["delete"],setup(o){const f=T(),i=h(!1),g=()=>{i.value=!0},m=o.delete.row,d=async()=>{try{await f.deleteRawMaterials(m.id)}catch(n){X.create({message:`Failed to delete item: ${n.message}`,type:"negative"})}i.value=!1};return(n,y)=>(b(),M(U,null,[e(v,{onClick:g,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"","aria-label":"Delete"},{default:a(()=>[e(J,{class:"bg-negative",delay:200},{default:a(()=>[A("Delete")]),_:1})]),_:1}),e(B,{modelValue:i.value,"onUpdate:modelValue":y[0]||(y[0]=p=>i.value=p),persistent:""},{default:a(()=>[e(N,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:a(()=>[e(q,{class:"q-pt-none q-pb-sm"},{default:a(()=>[Ve,Ce]),_:1}),e(z,{class:"q-mb-md"}),e(E,{align:"right",class:"q-pt-none"},{default:a(()=>[C(e(v,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[k]]),e(v,{dense:"",label:"Delete",color:"negative",onClick:d,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var ke=Q(Re,[["__scopeId","data-v-674db72c"]]);const Qe=o=>(D("data-v-65a60ada"),o=o(),P(),o),$e={align:"left"},Se={key:0,class:"spinner-wrapper"},Ie={key:1},Ue={key:0,class:"data-error"},De=Qe(()=>l("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Pe={class:"row justify-center q-gutter-x-md"},Te={__name:"RawMaterialsTable",setup(o){const f=T(),i=F(()=>f.rawMaterials),g=h(!0),w=h(""),m=h(!1),d=h({rowsPerPage:0}),n=F(()=>w.value?i.value.filter(u=>u.name.toLowerCase().includes(w.value.toLowerCase())):i.value);Y(async()=>{await p()});const y=u=>u?u.split(" ").map(_=>_.charAt(0).toUpperCase()+_.slice(1).toLowerCase()).join(" "):"",p=async()=>{try{g.value=!0,await f.fetchRawMaterials(),i.value.length||(m.value=!0)}catch{m.value=!0}finally{g.value=!1}};Z(w,async u=>{g.value=!0,await new Promise(_=>setTimeout(_,1e3)),g.value=!1,m.value=n.value.length===0});const c=[{name:"name",label:"Raw Materials Name",align:"left",field:u=>u.name,format:u=>`${u}`,sortable:!0},{name:"code",label:"Code",align:"left",field:"code",sortable:!0},{name:"category",label:"Category",align:"left",field:"category"},{name:"unit",label:"Unit",align:"left",field:"unit"},{name:"action",label:"Action",align:"center"}],t=u=>{switch(u){case"Ingredients":return"teal";case"Packaging Materials":return"brown-6";default:return"grey"}},s=u=>{switch(u){case"Grams":return"info";case"Pcs":return"accent";default:return"grey"}},K=u=>{const _=parseInt(u);return _<=20?"bg-red":_<=50?"bg-warning":"bg-primary"};return(u,_)=>(b(),M(U,null,[l("div",$e,[e(R,{modelValue:w.value,"onUpdate:modelValue":_[0]||(_[0]=r=>w.value=r),class:"q-pb-lg q-pl-sm dynamic-width",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100"},{append:a(()=>[e(j,{name:"search"})]),_:1},8,["modelValue"])]),g.value?(b(),M("div",Se,[e(le,{size:"50px",color:"primary"})])):(b(),M("div",Ie,[n.value.length===0?(b(),M("div",Ue,[e(j,{name:"warning",color:"warning",size:"4em"}),De])):(b(),O(se,{key:1,class:"table-container elegant-container sticky-header",filter:w.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"400px"},columns:c,rows:n.value,"row-key":"name","virtual-scroll":"",pagination:d.value,"onUpdate:pagination":_[1]||(_[1]=r=>d.value=r),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-name":a(r=>[e(x,{key:"name",props:r},{default:a(()=>[A(S(y(r.row.name)),1)]),_:2},1032,["props"])]),"body-cell-category":a(r=>[e(x,{key:"name",props:r},{default:a(()=>[e(V,{color:t(r.row.category)},{default:a(()=>[A(S(r.row.category),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-unit":a(r=>[e(x,{key:"name",props:r},{default:a(()=>[e(V,{color:s(r.row.unit)},{default:a(()=>[A(S(r.row.unit),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-availableStocks":a(r=>[e(x,{props:r},{default:a(()=>[e(V,{square:"",class:ee(["text-white",K(r.row.availableStocks)])},{default:a(()=>[A(S(r.row.availableStocks),1)]),_:2},1032,["class"])]),_:2},1032,["props"])]),"body-cell-action":a(r=>[e(x,{props:r},{default:a(()=>[l("div",Pe,[e(xe,{edit:r},null,8,["edit"]),e(ke,{delete:r},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Ne=Q(Te,[["__scopeId","data-v-65a60ada"]]);const ze={class:"text-h6"},Ee={class:"q-gutter-x-sm"},Be={align:"right"},Fe={__name:"RawMaterialsPage",setup(o){return(f,i)=>(b(),O(ae,{class:"elegant-container",flat:""},{default:a(()=>[e(q,{class:"row justify-between"},{default:a(()=>[l("div",ze,[l("div",Ee,[e(V,{label:"Ingredients",color:"teal"}),e(V,{label:"Packaging Materials",color:"brown-6"})])]),l("div",Be,[e(me)])]),_:1}),e(q,null,{default:a(()=>[e(Ne)]),_:1}),e(q)]),_:1}))}};var da=Q(Fe,[["__scopeId","data-v-2596b4ff"]]);export{da as default};
