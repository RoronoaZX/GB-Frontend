import{d as u,r as i,c as M,P as c,N as n}from"./index.90e14ade.js";import{api as s}from"./axios.5df481c6.js";import{u as f}from"./raw-material.c35d1473.js";const x=u("branchRawMaterial",()=>{const o=i(null),t=i([]),l=i([]),w=f(),h=M(()=>w.rawMaterials);return{branchId:l,branchRawMaterial:o,branchRawMaterials:t,fetchBranchRawMaterials:async e=>{const a=await s.get(`/api/branch/${e}/rawMaterials`);t.value=a.data},createBranchRawMaterials:async e=>{c.show();try{const a=await s.post("/api/branch-raw-materials",e);if(a.data.message==="Branch Raw Materials saved successfully"){const r=h.value.find(d=>d.id===e.ingredients_id),p={...a.data,ingredients:r||{name:"No Name",code:"Unknown"},total_quantity:e.total_quantity};t.value.unshift(p),n.create({type:"positive",message:"Branch Raw Materials saved successfully",position:"top"})}else a.data.message==="The RawMaterials already exists in this branch."&&n.create({type:"warning",message:"The Raw Materials already exists in this branch.",position:"top"})}catch(a){console.log(a),n.create({type:"negative",message:"An error occurred while saving the branch product.",position:"top"})}finally{c.hide()}},updateBranchRawMaterials:async e=>{await s.put(`/api/update-branch-products/${e}`,{price:newPrice});const a=t.value.findIndex(r=>r.id===e);a!==-1&&(t.value[a].price=newPrice)},deleteBranchRawMaterials:async e=>{await s.delete(`/api/branch-raw-materials/${e}`),t.value=t.value.filter(a=>a.id!==e)}}});export{x as u};
