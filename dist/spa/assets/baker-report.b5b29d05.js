import{d as n,P as a,N as i}from"./index.90e14ade.js";import{api as o}from"./axios.5df481c6.js";const h=n("bakerReportsStore",{state:()=>({recipes:{},reportToView:[],reports:[],rawmaterials:[],user:{}}),actions:{setRecipe(r){this.recipes=r},setReport(r){this.reports.push(r)},removeReport(r){this.reports.splice(r,1)},setUser(r){this.user=r},clearData(){this.recipes={},this.reports=[]},async fetchBranchRawMaterials(r){const e=await o.get(`/api/branch/${r}/rawMaterials`);this.rawmaterials=e.data},async fetchBakerReport(r,e,t){try{return(await o.get(`/api/branch/${r}/bakerReport`,{params:{page:e,per_page:t}})).data}catch(s){console.error("Error fetching baker reports:",s)}},async fetchAllReports(){const r=await o.get("/api/initial-baker-report");this.reportToView=r.data},async fetchDoughReports(r){const e=await o.get(`/api/branch/${r}/bakerDoughReport`);console.log("===================================="),console.log("response",e.data),console.log("===================================="),this.reports=e.data},async createReports(){try{console.log("data to send:",this.reports),a.show();const r=await o.post("api/initial-baker-report",{reports:this.reports});i.create({type:"positive",message:"Report successfully send",timeout:1e3}),console.log("Reports to be saved:",this.reports),this.reports=[]}catch(r){console.error("Error saving report:",r),i.create({type:"negative",message:"Error sending report",timeout:1e3})}finally{a.hide()}},async confirmReport(r){try{const e=await o.post(`/api/confirm-initial-baker-report/${r}`);if(console.log("Confirming report with ID:",r),e.status===200){const t=this.reports.findIndex(s=>s.id===r);t!==-1&&this.reports.splice(t,1)}return e.data}catch(e){throw console.error("Error confirming report:",e),e}},async declineReport(r,e){try{const t=await o.post(`/api/decline-initial-baker-report/${r}`,{remark:e});if(t.status===200){const s=this.reports.findIndex(p=>p.id===r);s!==-1&&this.reports.splice(s,1)}return t.data}catch(t){console.error("Error declining report:",t)}}}});export{h as u};
