import{Q as q}from"./QBadge.05246f03.js";import{r as g,t as X,o as f,a3 as h,J as r,f as e,M as y,w as a,Q as j,I as P,ae as S,a1 as L,K as D,aJ as M,a2 as O,a4 as $,O as N,R as I,a0 as x,c as B,z as Y,u as Z,L as z,e as R,$ as E,aK as F,bd as K}from"./index.86a43405.js";import{Q as ee}from"./QPage.c874f623.js";import{Q as ae}from"./QSpace.cd240ec7.js";import{Q as J}from"./QSelect.6de61dad.js";import{C as k}from"./ClosePopup.6203081d.js";import{u as T}from"./product.29d5acc6.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as te}from"./QSpinnerDots.a4faca62.js";import{Q as U}from"./QTooltip.02a14c68.js";import{Q as A}from"./QPopupEdit.a2029278.js";import{Q,a as oe}from"./QTable.89cbba78.js";import{t as le}from"./typography-format.e68cd0ab.js";import{b as se}from"./badge-color.bc6eb592.js";import"./QChip.5c43d91b.js";import"./QMenu.4901747e.js";import"./position-engine.ac7c93b3.js";import"./selection.540ccd7c.js";import"./use-virtual-scroll.b2495fbf.js";import"./rtl.276c3f1b.js";import"./axios.c0d0638f.js";import"./QVirtualScroll.783fd635.js";import"./QList.5f3a79ea.js";import"./date.e900abcb.js";const re=s=>(N("data-v-3c0bffd3"),s=s(),I(),s),ne=re(()=>r("div",{class:"text-h5 q-mr-md"},"\u{1F956} Add Product",-1)),de={class:"q-mt-lg q-animated q-animate-bounce"},ce={class:"q-mt-md q-animated q-animate-bounce"},ue={__name:"ProductCreate",setup(s){const b=T(),m=["Bread","Selecta","Nestle","Softdrinks","Others"],p=g(!1),w=()=>{p.value=!0},l=X({name:"",category:null}),v=async()=>{try{await b.createProducts({...l}),p.value=!1,console.log("Products Data",l),u()}catch(_){console.log("Error saving product:",_)}},u=()=>{l.name="",l.category=""};return(_,d)=>(f(),h($,null,[r("div",null,[e(y,{class:"q-pa-sm btn-add",outline:"",dense:"",elevated:"",icon:"add_circle",label:"Add Product",onClick:w,style:{"background-color":"#ef4444"},size:"md",color:"dark"})]),r("div",null,[e(O,{modelValue:p.value,"onUpdate:modelValue":d[2]||(d[2]=n=>p.value=n),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:a(()=>[e(j,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:a(()=>[e(P,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:a(()=>[ne,e(ae),S(e(y,{icon:"close",flat:"",dense:"",round:""},null,512),[[k]])]),_:1}),e(L,{class:"separator-gradient"}),e(P,{class:"q-px-xl q-pt-none q-pb-lg"},{default:a(()=>[r("div",de,[e(D,{class:"text-capitalize",modelValue:l.name,"onUpdate:modelValue":d[0]||(d[0]=n=>l.name=n),outlined:"",dense:"",label:"Product Name",rules:[n=>n&&n.length>0||"Product name is reuired"]},null,8,["modelValue","rules"])]),r("div",ce,[e(J,{modelValue:l.category,"onUpdate:modelValue":d[1]||(d[1]=n=>l.category=n),"input-debounce":"0",options:m,"stack-label":"",outlined:"",dense:"",label:"Category",rules:[n=>n&&n.length>0||"Category is required"],"hide-dropdown-icon":"",behavior:"menu"},null,8,["modelValue","rules"])])]),_:1}),e(M,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:a(()=>[S(e(y,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[k]]),e(y,{class:"glossy",color:"teal",label:"Create",onClick:v})]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var ie=V(ue,[["__scopeId","data-v-3c0bffd3"]]);const G=s=>(N("data-v-0cb6ace8"),s=s(),I(),s),me=G(()=>r("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),pe=G(()=>r("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),_e={__name:"ProductDelete",props:["delete"],setup(s){const b=T(),m=g(!1),p=()=>{m.value=!0},l=s.delete.row,v=async()=>{try{await b.deleteProducts(l.id)}catch(u){console.error(u.message)}m.value=!1};return(u,_)=>(f(),h($,null,[e(y,{onClick:p,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:""},{default:a(()=>[e(U,{class:"bg-negative",delay:200},{default:a(()=>[x("Delete")]),_:1})]),_:1}),e(O,{modelValue:m.value,"onUpdate:modelValue":_[0]||(_[0]=d=>m.value=d)},{default:a(()=>[e(j,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:a(()=>[e(P,{class:"q-pt-none q-pb-sm"},{default:a(()=>[me,pe]),_:1}),e(L,{class:"q-mb-md"}),e(M,{align:"right",class:"q-pt-none"},{default:a(()=>[S(e(y,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[k]]),e(y,{dense:"",label:"Delete",color:"negative",onClick:v,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var ge=V(_e,[["__scopeId","data-v-0cb6ace8"]]);const fe=s=>(N("data-v-9048f748"),s=s(),I(),s),ve={key:0,class:"spinner-wrapper"},ye={key:1},be={key:0,class:"data-error"},we=fe(()=>r("div",{class:"q-ml-sm text-h6"},"No data available",-1)),he={class:"row justify-center q-gutter-x-md"},xe={__name:"ProductTable",setup(s){const{capitalizeFirstLetter:b}=le(),{getProductBadgeCategoryColor:m}=se(),p=g({rowsPerPage:0}),w=T(),l=g(""),v=B(()=>w.products);g(!0);const u=g(!0),_=g(!1),d=B(()=>l.value?v.value.filter(c=>c.name.toLowerCase().includes(l.value.toLowerCase())):v.value);Y(async()=>{await H()});const n=async(c,i,t)=>{console.log("Updating table data...",c),console.log("Updating table val...",i),console.log("Updating table type...",t);try{const o={id:c.id,field:t,value:i};console.log("Updated Data:",o),c[t]=i,await w.updatedProducts(o)}catch(o){console.log("Failed to update table data:",o)}},H=async()=>{try{u.value=!0,await w.fetchProducts(),v.value.length||(_.value=!0)}catch{_.value=!0}finally{u.value=!1}};Z(l,async c=>{u.value=!0,await new Promise(i=>setTimeout(i,1e3)),u.value=!1,_.value=d.value.length===0});const W=[{name:"name",label:"Product Name",align:"left",field:c=>c.name,format:c=>`${c}`},{name:"category",align:"left",label:"Category",field:"category"},{name:"action",align:"center",label:"Action",field:"action"}];return(c,i)=>(f(),h($,null,[r("div",null,[e(D,{modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=t=>l.value=t),class:"q-pb-lg q-pl-sm dynamic-width",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100"},{append:a(()=>[e(z,{name:"search"})]),_:1},8,["modelValue"])]),u.value?(f(),h("div",ve,[e(te,{size:"50px",color:"primary"})])):(f(),h("div",ye,[d.value.length===0?(f(),h("div",be,[e(z,{name:"warning",color:"warning",size:"4em"}),we])):(f(),R(oe,{key:1,class:"table-container elegant-container sticky-header",filter:l.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"500px"},columns:W,rows:d.value,"row-key":"name",pagination:p.value,"onUpdate:pagination":i[1]||(i[1]=t=>p.value=t),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-name":a(t=>[e(Q,{props:t,class:"cursor-pointer"},{default:a(()=>[r("span",null,[x(E(F(b)(t.row.name)||"No data available")+" ",1),e(U,{class:"bg-blue-grey-8",offset:[10,10]},{default:a(()=>[x(" Edit Name ")]),_:1})]),e(A,{"onUpdate:modelValue":[o=>n(t.row,o,"name"),o=>t.row.name=o],modelValue:t.row.name,"auto-save":"",buttons:"","label-set":"Save","label-cancel":"Close",title:"Edit Name"},{default:a(o=>[e(D,{modelValue:o.value,"onUpdate:modelValue":C=>o.value=C,dense:"",autofocus:"",counter:"",onKeyup:K(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-category":a(t=>[e(Q,{key:"name",props:t,class:"cursor-pointer"},{default:a(()=>[r("span",null,[e(q,{color:F(m)(t.row.category)},{default:a(()=>[x(E(t.row.category),1)]),_:2},1032,["color"]),e(U,{class:"bg-blue-grey-8",offset:[10,10]},{default:a(()=>[x(" Edit Name ")]),_:1})]),e(A,{"onUpdate:modelValue":[o=>n(t.row,o,"category"),o=>t.row.category=o],modelValue:t.row.category,"auto-save":"",buttons:"","label-set":"Save","label-cancel":"Close",title:"Edit Position"},{default:a(o=>[e(J,{class:"text-capitalize",modelValue:o.value,"onUpdate:modelValue":C=>o.value=C,options:["Bread","Selecta","Softdrinks","Others"],outlined:"",dense:"",autofucus:"",counter:"",behavior:"menu",onKeyup:K(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-action":a(t=>[e(Q,{props:t},{default:a(()=>[r("div",he,[e(ge,{delete:t},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Pe=V(xe,[["__scopeId","data-v-9048f748"]]);const qe={class:"text-h6"},Ve={class:"q-gutter-x-sm"},Ce={__name:"ProductsPage",setup(s){return g("bread"),(b,m)=>(f(),R(ee,{class:"elegant-container",flat:""},{default:a(()=>[e(P,{class:"row justify-between"},{default:a(()=>[r("div",qe,[r("div",Ve,[e(q,{label:"Bread",class:"text-white",color:"brown-13"}),e(q,{label:"Selecta",class:"text-white",color:"red-6"}),e(q,{label:"Sofdrinks",class:"text-white",color:"accent"})])]),r("div",null,[e(ie)])]),_:1}),e(P,null,{default:a(()=>[r("div",null,[e(Pe)])]),_:1})]),_:1}))}};var Xe=V(Ce,[["__scopeId","data-v-1510f4f2"]]);export{Xe as default};
