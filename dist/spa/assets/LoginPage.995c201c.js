import{_ as ie,r as S,c as le,H as ce,o as de,e as ue,w as A,Q as fe,f as C,I as Q,J as j,K,L as me,M as ge,P as G,N as z,O as pe,R as he}from"./index.0b21b79d.js";import{Q as ve}from"./QForm.7cba3dc4.js";import{_ as be}from"./GB_LOGO.b766a815.js";import{u as we}from"./use-quasar.d4edddec.js";import{api as ye}from"./axios.6077a844.js";import{_ as Pe}from"./plugin-vue_export-helper.21dcd24c.js";/*! Capacitor: https://capacitorjs.com/ - MIT License */const _e=r=>{const e=new Map;e.set("web",{name:"web"});const t=r.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},o=(s,i)=>{t.platforms.set(s,i)},n=s=>{t.platforms.has(s)&&(t.currentPlatform=t.platforms.get(s))};return t.addPlatform=o,t.setPlatform=n,t},Le=r=>r.CapacitorPlatforms=_e(r),Y=Le(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});Y.addPlatform;Y.setPlatform;var $;(function(r){r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE"})($||($={}));class V extends Error{constructor(e,t,o){super(e),this.message=e,this.code=t,this.data=o}}const Ce=r=>{var e,t;return r!=null&&r.androidBridge?"android":!((t=(e=r==null?void 0:r.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},xe=r=>{var e,t,o,n,s;const i=r.CapacitorCustomPlatform||null,a=r.Capacitor||{},f=a.Plugins=a.Plugins||{},l=r.CapacitorPlatforms,y=()=>i!==null?i.name:Ce(r),m=((e=l==null?void 0:l.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||y,c=()=>m()!=="web",x=((t=l==null?void 0:l.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||c,T=d=>{const u=R.get(d);return!!(u!=null&&u.platforms.has(m())||k(d))},b=((o=l==null?void 0:l.currentPlatform)===null||o===void 0?void 0:o.isPluginAvailable)||T,O=d=>{var u;return(u=a.PluginHeaders)===null||u===void 0?void 0:u.find(E=>E.name===d)},k=((n=l==null?void 0:l.currentPlatform)===null||n===void 0?void 0:n.getPluginHeader)||O,ee=d=>r.console.error(d),te=(d,u,E)=>Promise.reject(`${E} does not have an implementation of "${u}".`),R=new Map,re=(d,u={})=>{const E=R.get(d);if(E)return console.warn(`Capacitor plugin "${d}" already registered. Cannot register plugins twice.`),E.proxy;const L=m(),I=k(d);let w;const ae=async()=>(!w&&L in u?w=typeof u[L]=="function"?w=await u[L]():w=u[L]:i!==null&&!w&&"web"in u&&(w=typeof u.web=="function"?w=await u.web():w=u.web),w),oe=(g,p)=>{var v,P;if(I){const _=I==null?void 0:I.methods.find(h=>p===h.name);if(_)return _.rtype==="promise"?h=>a.nativePromise(d,p.toString(),h):(h,U)=>a.nativeCallback(d,p.toString(),h,U);if(g)return(v=g[p])===null||v===void 0?void 0:v.bind(g)}else{if(g)return(P=g[p])===null||P===void 0?void 0:P.bind(g);throw new V(`"${d}" plugin is not implemented on ${L}`,$.Unimplemented)}},H=g=>{let p;const v=(...P)=>{const _=ae().then(h=>{const U=oe(h,g);if(U){const q=U(...P);return p=q==null?void 0:q.remove,q}else throw new V(`"${d}.${g}()" is not implemented on ${L}`,$.Unimplemented)});return g==="addListener"&&(_.remove=async()=>p()),_};return v.toString=()=>`${g.toString()}() { [capacitor code] }`,Object.defineProperty(v,"name",{value:g,writable:!1,configurable:!1}),v},B=H("addListener"),F=H("removeListener"),ne=(g,p)=>{const v=B({eventName:g},p),P=async()=>{const h=await v;F({eventName:g,callbackId:h},p)},_=new Promise(h=>v.then(()=>h({remove:P})));return _.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},_},D=new Proxy({},{get(g,p){switch(p){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return I?ne:B;case"removeListener":return F;default:return H(p)}}});return f[d]=D,R.set(d,{name:d,proxy:D,platforms:new Set([...Object.keys(u),...I?[L]:[]])}),D},se=((s=l==null?void 0:l.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||re;return a.convertFileSrc||(a.convertFileSrc=d=>d),a.getPlatform=m,a.handleError=ee,a.isNativePlatform=x,a.isPluginAvailable=b,a.pluginMethodNoop=te,a.registerPlugin=se,a.Exception=V,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},ke=r=>r.Capacitor=xe(r),M=ke(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{}),W=M.registerPlugin;M.Plugins;class Z{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){let o=!1;this.listeners[e]||(this.listeners[e]=[],o=!0),this.listeners[e].push(t);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),o&&this.sendRetainedArgumentsForEvent(e);const i=async()=>this.removeListener(e,t);return Promise.resolve({remove:i})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,o){const n=this.listeners[e];if(!n){if(o){let s=this.retainedEventArguments[e];s||(s=[]),s.push(t),this.retainedEventArguments[e]=s}return}n.forEach(s=>s(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:o=>{this.notifyListeners(t,o)}}}unimplemented(e="not implemented"){return new M.Exception(e,$.Unimplemented)}unavailable(e="not available"){return new M.Exception(e,$.Unavailable)}async removeListener(e,t){const o=this.listeners[e];if(!o)return;const n=o.indexOf(t);this.listeners[e].splice(n,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){!e||(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];!t||(delete this.retainedEventArguments[e],t.forEach(o=>{this.notifyListeners(e,o)}))}}const J=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),X=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Ee extends Z{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(o=>{if(o.length<=0)return;let[n,s]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=X(n).trim(),s=X(s).trim(),t[n]=s}),t}async setCookie(e){try{const t=J(e.key),o=J(e.value),n=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),i=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${o||""}${n}; path=${s}; ${i};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}W("CapacitorCookies",{web:()=>new Ee});const Ie=async r=>new Promise((e,t)=>{const o=new FileReader;o.onload=()=>{const n=o.result;e(n.indexOf(",")>=0?n.split(",")[1]:n)},o.onerror=n=>t(n),o.readAsDataURL(r)}),Se=(r={})=>{const e=Object.keys(r);return Object.keys(r).map(n=>n.toLocaleLowerCase()).reduce((n,s,i)=>(n[s]=r[e[i]],n),{})},$e=(r,e=!0)=>r?Object.entries(r).reduce((o,n)=>{const[s,i]=n;let a,f;return Array.isArray(i)?(f="",i.forEach(l=>{a=e?encodeURIComponent(l):l,f+=`${s}=${a}&`}),f.slice(0,-1)):(a=e?encodeURIComponent(i):i,f=`${s}=${a}`),`${o}&${f}`},"").substr(1):null,Oe=(r,e={})=>{const t=Object.assign({method:r.method||"GET",headers:r.headers},e),n=Se(r.headers)["content-type"]||"";if(typeof r.data=="string")t.body=r.data;else if(n.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[i,a]of Object.entries(r.data||{}))s.set(i,a);t.body=s.toString()}else if(n.includes("multipart/form-data")||r.data instanceof FormData){const s=new FormData;if(r.data instanceof FormData)r.data.forEach((a,f)=>{s.append(f,a)});else for(const a of Object.keys(r.data))s.append(a,r.data[a]);t.body=s;const i=new Headers(t.headers);i.delete("content-type"),t.headers=i}else(n.includes("application/json")||typeof r.data=="object")&&(t.body=JSON.stringify(r.data));return t};class Ae extends Z{async request(e){const t=Oe(e,e.webFetchExtra),o=$e(e.params,e.shouldEncodeUrlParams),n=o?`${e.url}?${o}`:e.url,s=await fetch(n,t),i=s.headers.get("content-type")||"";let{responseType:a="text"}=s.ok?e:{};i.includes("application/json")&&(a="json");let f,l;switch(a){case"arraybuffer":case"blob":l=await s.blob(),f=await Ie(l);break;case"json":f=await s.json();break;case"document":case"text":default:f=await s.text()}const y={};return s.headers.forEach((m,c)=>{y[c]=m}),{data:f,headers:y,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}W("CapacitorHttp",{web:()=>new Ae});W("Device",{web:()=>ie(()=>import("./web.6d2359bd.js"),["assets/web.6d2359bd.js","assets/index.0b21b79d.js","assets/index.141a42db.css","assets/QForm.7cba3dc4.js","assets/GB_LOGO.b766a815.js","assets/use-quasar.d4edddec.js","assets/axios.6077a844.js","assets/plugin-vue_export-helper.21dcd24c.js"]).then(r=>new r.DeviceWeb)});const N=r=>(pe("data-v-17bee905"),r=r(),he(),r),je=N(()=>j("div",{class:"text-h5 text-red-6 q-mb-sm"},[j("img",{src:be,class:"logo"})],-1)),Ue=N(()=>j("div",{class:"text-caption text-grey-8 q-mb-sm"}," Please log in to continue. ",-1)),qe={class:"q-gutter-y-sm"},Me={class:"q-my-md text-center"},Te={__name:"LoginPage",setup(r){const e=S("91c61eefafeaedb3e9cf16507aa391148fab7d8a42c155e4c51d0a1bedb9d12c"),t=S(!0),o=S(""),n=S(""),s=S(!1),i=le(()=>o.value!==""&&n.value!=="");we();const a=ce(),f=S(""),l=async()=>{var y,m;G.show();try{const c=await ye.post("/api/login",{uuid:e.value,email:o.value,password:n.value});console.log("user123:",c.data),localStorage.setItem("activeMenuItem","dashboard"),localStorage.setItem("token",c.data.token),localStorage.setItem("role",c.data.role),localStorage.setItem("uuid",c.data.device.uuid),localStorage.setItem("reference_id",c.data.device.reference_id);const x=c.data.device,T=x.designation==="branch"?"branch_id":"warehouse_id";localStorage.setItem(T,x.reference_id);const b=c.data.role,O=localStorage.getItem("activeMenuItem");if(b==="Admin"||b==="Super Admin"){let k;O?(k=`/admin/${O}`,f.value=O):(k="/admin/dashboard",localStorage.setItem("activeMenuItem","dashboard"),f.value="dashboard"),await a.push(k),z.create({type:"positive",message:c.data.message||"Login successful!",setTimeout:5e3})}else b==="Baker"?await a.push("/branch/baker"):b==="Cake Maker"?await a.push("/branch/cake_maker/raw_materials"):b==="Cashier"||b==="Sales Clerk"?await a.push("/branch/sales_lady/products"):b==="Scaler"&&await a.push("/warehouse")}catch(c){console.error("Error during login:",c);const x=((m=(y=c.response)==null?void 0:y.data)==null?void 0:m.message)||"Login failed. Incorrect email & password.";z.create({type:"negative",message:x})}finally{G.hide()}};return(y,m)=>(de(),ue(fe,{class:"my-card q-pa-md q-ma-lg",style:{width:"430px","max-width":"90%",height:"500px","border-radius":"16px","box-shadow":"0 4px 12px rgba(0, 0, 0, 0.1)",display:"flex","flex-direction":"column","justify-content":"space-between"}},{default:A(()=>[C(Q,{class:"q-pa-sm text-center"},{default:A(()=>[je,Ue]),_:1}),C(Q,{class:"q-mt-sm flex-grow-1"},{default:A(()=>[C(ve,{onSubmit:l},{default:A(()=>[j("div",qe,[C(K,{modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=c=>o.value=c),outlined:"",placeholder:"Email",dense:"",autofocus:"",required:"",class:"input-dynamic"},null,8,["modelValue"]),C(K,{modelValue:n.value,"onUpdate:modelValue":m[2]||(m[2]=c=>n.value=c),outlined:"",placeholder:"Password",type:t.value?"password":"text",dense:"",required:"",class:"input-dynamic"},{append:A(()=>[C(me,{name:t.value?"visibility_off":"visibility",onClick:m[1]||(m[1]=c=>t.value=!t.value),class:"cursor-pointer",style:{color:"#9e9e9e"}},null,8,["name"])]),_:1},8,["modelValue","type"])]),j("div",Me,[C(ge,{type:"submit",color:"red-6",label:"Login",class:"q-mt-sm",dense:"",loading:s.value,disable:!i.value,style:{width:"100%","max-width":"350px","border-radius":"8px"}},null,8,["loading","disable"])])]),_:1})]),_:1})]),_:1}))}};var Re=Pe(Te,[["__scopeId","data-v-17bee905"]]),Qe=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"}));export{Qe as L,Z as W};
