import{g as W,z as se,o as m,c as T,w as a,a as e,I as B,J as t,_ as C,a0 as ve,Q as L,O as oe,R as ne,a2 as P,a3 as K,n as y,L as Q,bb as ce,K as A,d as Ve,$ as R,ba as Ee,M as O,ad as ae,a1 as ye,t as we,aI as xe,P as lt,N as ie,a4 as fe,bc as re,be as ot,Z as st,u as Be,b7 as nt,bn as be,aJ as Ue}from"./index.9c9d4c4e.js";import{a as de,Q as je,c as ue,b as Qe}from"./QTabPanels.7674ac77.js";import{Q as ft}from"./QPage.4805e931.js";import{u as me}from"./employee.a7a45c94.js";import{_ as Y}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as it}from"./QVirtualScroll.8b16815e.js";import{u as He}from"./branch.be5b2d55.js";import{u as yt}from"./warehouse.d66be320.js";import{Q as _e}from"./QTooltip.d589079b.js";import{Q as Te}from"./QPopupEdit.564506e9.js";import{Q as X,a as ke}from"./QTable.679dace5.js";import{Q as pe}from"./QBadge.95890374.js";import{Q as ze,a as Me}from"./QSelect.5f429e83.js";import{C as le}from"./ClosePopup.e8ca0b3e.js";import{q as Ce}from"./date.4640083c.js";import{u as ht}from"./use-quasar.66fa6bb1.js";import{api as G}from"./axios.fd4410eb.js";import{_ as gt}from"./GB_LOGO.b766a815.js";import{Q as $e}from"./QSpace.11673f40.js";import{p as Fe}from"./vfs_fonts.02fb2d2e.js";import{Q as te,a as Se}from"./QItem.25f2db32.js";import{Q as De}from"./QList.2add8ee9.js";import{Q as bt}from"./QIntersection.850ca4f7.js";import"./QResizeObserver.d1181516.js";import"./rtl.276c3f1b.js";import"./use-panel.12530556.js";import"./touch.9135741d.js";import"./selection.18f52089.js";import"./use-virtual-scroll.823d2c0d.js";import"./QMenu.d0f52efd.js";import"./QItemLabel.fcc7aeb9.js";const Ie=f=>(oe("data-v-187f8741"),f=f(),ne(),f),wt={class:"col q-pa-md"},xt=Ie(()=>t("div",{class:"text-h6"},"Total Employee",-1)),$t=Ie(()=>t("div",{class:"text-caption text-grey-6"},"Total Number Of Employees",-1)),Vt={class:"text-h3 text-primary q-my-sm"},kt=Ie(()=>t("div",{class:"text-caption text-grey-7"},"Employees",-1)),St=Ie(()=>t("div",{class:"col q-pa-md"},[t("div",{class:"text-h6"},"Salary Per Month"),t("div",{class:"text-caption text-grey-6"}," Current Total Salary Per Month "),t("div",{class:"text-h3 text-positive q-my-sm"},"\u20B1 52,962"),t("div",{class:"text-caption text-grey-7"},"PHP")],-1)),Dt=Ie(()=>t("div",{class:"col q-pa-md"},[t("div",{class:"text-h6"},"Benefits Fund"),t("div",{class:"text-caption text-grey-6"},"For all Employees Per Month"),t("div",{class:"text-h3 text-warning q-my-sm"},"\u20B1 200,123"),t("div",{class:"text-caption text-grey-7"},"PHP")],-1)),At={__name:"TotalEmployeeSalaryBenefits",setup(f){const u=me(),_=W(()=>u.employees);se(async()=>{await c()});const c=async()=>{try{_.value=await u.fetchAllEmployee()}catch(g){console.log("error fetching employee: ",g)}};return(g,s)=>(m(),T(L,{class:"q-pa-md q-mb-md q-mt-sm text-center user-card"},{default:a(()=>[e(B,{horizontal:""},{default:a(()=>[t("div",wt,[xt,$t,t("div",Vt,C(_.value.length),1),kt]),e(ve,{vertical:""}),St,e(ve,{vertical:""}),Dt]),_:1})]),_:1}))}};var qt=Y(At,[["__scopeId","data-v-187f8741"]]);const Et=f=>(oe("data-v-109cadaa"),f=f(),ne(),f),Pt={class:"row justify-between"},Ut=Et(()=>t("div",{class:"text-h6"},"Branch Employee",-1)),Tt={class:"text-caption text-grey-6"},Ct={class:"text-subtitle2"},zt={class:"text-h6 text-grey-6"},It={__name:"BranchEmployeeCard",setup(f){const u=He(),_=W(()=>u.branches);console.log("branchWithEmploye",_.value),se(async()=>{await c()});const c=async()=>{try{_.value=await u.fetchBranchWithEmployee(),console.log("branches",_.value)}catch(g){console.log("error fetching branch: ",g)}};return(g,s)=>(m(),T(L,{class:"user-card",style:{height:"300px"}},{default:a(()=>[e(B,null,{default:a(()=>[t("div",Pt,[t("div",null,[Ut,t("div",Tt," Total Number of Branch : "+C(_.value.length),1)])])]),_:1}),e(B,null,{default:a(()=>[e(it,{items:_.value,"scroll-target":"body","virtual-scroll-horizontal":"",class:"my-virtual-scroll",align:"center"},{default:a(({item:n,index:d})=>[(m(),T(L,{flat:"",bordered:"",dense:"",key:d,class:"my-card"},{default:a(()=>[e(B,{class:"bg-grey-2"},{default:a(()=>[t("div",Ct,C(n.name),1)]),_:2},1024),e(ve),e(B,null,{default:a(()=>{var p;return[t("div",zt,C((p=n==null?void 0:n.branch_employee)==null?void 0:p.length),1)]}),_:2},1024)]),_:2},1024))]),_:1},8,["items"])]),_:1})]),_:1}))}};var Nt=Y(It,[["__scopeId","data-v-109cadaa"]]);const Rt=f=>(oe("data-v-207a294b"),f=f(),ne(),f),Bt={class:"row justify-between"},Mt=Rt(()=>t("div",{class:"text-h6"},"Warehouse Employee",-1)),Ft={class:"text-caption text-grey-6"},Ot={class:"text-subtitle2"},Lt={class:"text-h6 text-grey-6"},jt={__name:"WarehouseEmployeCard",setup(f){const u=yt(),_=W(()=>u.warehouses);se(async()=>{await c()});const c=async()=>{try{_.value=await u.fetchWarehouseWithEmployee(),console.log("warehouses",_.value)}catch(g){console.log("error fetching recipe: ",g)}};return(g,s)=>(m(),T(L,{class:"user-card",style:{height:"300px"}},{default:a(()=>[e(B,null,{default:a(()=>[t("div",Bt,[t("div",null,[Mt,t("div",Ft," Total Number of Warehouse : "+C(_.value.length),1)])])]),_:1}),e(B,null,{default:a(()=>[e(it,{items:_.value,"scroll-target":"body","virtual-scroll-horizontal":"",class:"my-virtual-scroll"},{default:a(({item:n,index:d})=>[(m(),T(L,{flat:"",bordered:"",dense:"",key:d,class:"my-card",style:{display:"inline-block",width:"auto"},align:"center"},{default:a(()=>[e(B,{class:"bg-grey-2"},{default:a(()=>[t("div",Ot,C(n.name),1)]),_:2},1024),e(ve),e(B,null,{default:a(()=>{var p;return[t("div",Lt,C((p=n==null?void 0:n.warehouse_employee)==null?void 0:p.length),1)]}),_:2},1024)]),_:2},1024))]),_:1},8,["items"])]),_:1})]),_:1}))}};var Qt=Y(jt,[["__scopeId","data-v-207a294b"]]);const Ht={class:"row justify-between"},Kt={class:"col-6 q-pr-sm"},Wt={class:"col-6 q-pl-sm"},Yt={__name:"DashboardPage",setup(f){return(u,_)=>(m(),P(K,null,[e(qt),t("div",Ht,[t("div",Kt,[e(Nt)]),t("div",Wt,[e(Qt)])])],64))}},Xt={__name:"SearchEmployee",setup(f){const u=me(),_=y(""),c=y(!1),g=async()=>{c.value=!0,await u.searchEmployee(_.value),c.value=!1};return(s,n)=>(m(),P("div",null,[e(A,{modelValue:_.value,"onUpdate:modelValue":[n[0]||(n[0]=d=>_.value=d),g],outlined:"",dense:"",flat:"",label:"Search",debounce:"1000",style:{width:"300px"}},{append:a(()=>[t("div",null,[c.value?(m(),T(ce,{key:1,color:"grey",size:"sm"})):(m(),T(Q,{key:0,name:"search"}))])]),_:1},8,["modelValue"])]))}},rt=Ve("employmentType",()=>{const f=y(null);return{employmentType:f,fetchEmploymentType:async()=>{const _=await G.get("/api/employment-types");f.value=_.data,console.log("Employementresponse",_.data)}}});var Jt="/assets/IDLogo.76e564fd.png";const Gt={class:"text-subtitle2"},Zt={class:"row q-gutter-md"},ea={class:"row justify-center q-gutter-x-md"},ta={class:"text-white q-ma-sm",align:"right"},aa=["src"],la={__name:"TableSection",setup(f){Fe.exports.vfs=void 0;const u=rt(),_=y([]),c=me(),g=W(()=>c.employees),s=y({rowsPerPage:0});console.log("employees fetch madepaker",g.value),se(async()=>{await r()}),se(async()=>{await u.fetchEmploymentType(),_.value=u.employmentType.map(S=>({label:S.category,value:S.id})),console.log("Employment Type Options:",_.value)});const d=y(null),p=S=>{var N;d.value=((N=S.employment_type)==null?void 0:N.id)||null,console.log("Initial employmentTypeId:",d.value)};console.log("===================================="),console.log("employmentTypeIdsss",d.value),console.log("====================================");const r=async()=>{try{g.value=await c.fetchEmployeeWithEmploymentType(),console.log("fetchEmployeeWithEmploymentType",g.value)}catch(S){console.log("employee madepaker",S)}},b=S=>Ce.formatDate(S,"MMMM DD, YYYY"),x=S=>{const N=Z=>Z?Z.charAt(0).toUpperCase()+Z.slice(1).toLowerCase():"",q=S.firstname?N(S.firstname):"No Firstname",U=S.middlename?N(S.middlename).charAt(0)+".":"",j=S.lastname?N(S.lastname):"No Lastname";return`${q} ${U} ${j}`},v=S=>S?S.split(" ").map(N=>N.charAt(0).toUpperCase()+N.slice(1).toLowerCase()).join(" "):"",k=async(S,N)=>{console.log("data",S),console.log("val",N);const q={id:S.id,firstname:N.firstname||S.firstname,middlename:N.middlename||S.middlename,lastname:N.lastname||S.lastname};await c.updateEmployeeFullname(q)},V=async(S,N)=>{console.log("updateEmploymentType triggered"),console.log("row",S),console.log("New employment type ID:",N);const q={id:S.id,employment_type_id:N.value};await c.updateEmployeeEmploymentType(q)},h=async(S,N)=>{console.log("data",S),console.log("val",N);const q={id:S.id,address:N};await c.updateEmployeeAddress(q)},l=async(S,N)=>{console.log("data",S),console.log("val",N);const q={id:S.id,phone:N};await c.updateEmployeePhone(q)},o=async(S,N)=>{console.log("data",S),console.log("val",N);const q={id:S.id,birthdate:N};await c.updateEmployeebirthdate(q)},w=[{name:"fullname",required:!0,label:"Full Name",align:"center",field:S=>x(S),format:S=>`${S}`,sortable:!0},{name:"employmentType",label:"Employment Type",align:"center",field:S=>S.employment_type?S.employment_type.category:"N/A",format:S=>`${S}`},{name:"address",required:!0,label:"Address",align:"center",field:"address",sortable:!0},{name:"phone",required:!0,label:"Phone",align:"center",field:"phone",format:S=>`${S}`,sortable:!0},{name:"birthdate",required:!0,label:"Birthdate",align:"center",field:"birthdate",format:S=>b(S),sortable:!0},{name:"actions",align:"center",label:"Action",field:"actions"}];ht();const i=y(!1),z=y(""),I=S=>{$(Jt,N=>{$(gt,q=>{const U=D(S,N,q);Fe.exports.createPdf(U).getDataUrl(j=>{z.value=j,i.value=!0})})})},$=(S,N)=>{const q=new FileReader,U=new XMLHttpRequest;U.open("GET",S,!0),U.responseType="blob",U.onload=function(){U.status===200?(q.readAsDataURL(U.response),q.onloadend=function(){N(q.result)}):console.error("Failed to load image.")},U.send()},D=(S,N,q)=>({pageSize:{width:323,height:204},pageMargins:[0,0,0,0],background:[{image:q,width:140,opacity:.1,absolutePosition:{x:70,y:15}}],content:[{canvas:[{type:"rect",x:0,y:0,w:260,h:150,lineWidth:1,lineColor:"black",dash:{length:4}}],absolutePosition:{x:0,y:0}},{alignment:"justify",columns:[{image:N,width:100,height:153,alignment:"left",margin:[-8,-4,0,0]},{stack:[{text:"GB Bakeshop",style:"header",color:"red",margin:[0,0,50,0]},{text:`Name  : ${x(S)}`,style:"name"},{text:`Position : ${S.position}`,style:"position"},{text:`Phone  : ${S.phone}`,style:"info"},{qr:`${S.id.toString()} - ${x(S)} - ${S.position}`,fit:87,foreground:"red",background:"yellow",margin:[30,7,0,0]}]}]}],styles:{header:{fontSize:15,bold:!0,alignment:"center"},name:{fontSize:8,bold:!0,margin:[5,1,0,0]},position:{fontSize:8,margin:[5,2,0,0]},info:{fontSize:7,margin:[5,2,0,0]},address:{fontSize:7,margin:[0,5,0,0]}}}),J=S=>{switch(S){case"Regular":return"blue-8";case"Trainee":return"orange-5";case"Part-time":return"teal-5";default:return"grey"}};return(S,N)=>(m(),P(K,null,[t("div",null,[e(ke,{title:"Employees",rows:g.value,columns:w,"row-key":"fullname","hide-bottom":"",pagination:s.value,"onUpdate:pagination":N[1]||(N[1]=q=>s.value=q),style:{width:"1000px",height:"460px"},class:"custom-table"},{"top-right":a(()=>[e(Xt)]),"body-cell-fullname":a(q=>[e(X,{key:"fullname",props:q},{default:a(()=>[t("div",Gt,[R(C(x(q.row))+" ",1),e(_e,{class:"bg-blue-grey-8",offset:[10,10]},{default:a(()=>[R(" Edit Employee Name ")]),_:1})]),e(Te,{modelValue:q.row,"onUpdate:modelValue":[U=>q.row=U,U=>k(q.row,U)],buttons:"",title:"Edit Employee Full Name"},{default:a(({value:U,set:j})=>[t("div",Zt,[e(A,{class:"text-capitalize",modelValue:U.firstname,"onUpdate:modelValue":Z=>U.firstname=Z,label:"First Name",outlined:"",flat:"",color:"positive",dense:"",autofucos:"",onKeyup:Ee(Z=>j(U),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),e(A,{class:"text-capitalize",modelValue:U.middlename,"onUpdate:modelValue":Z=>U.middlename=Z,label:"Middle Name",outlined:"",flat:"",color:"positive",dense:"",autofucos:"",onKeyup:Ee(Z=>j(U),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"]),e(A,{class:"text-capitalize",modelValue:U.lastname,"onUpdate:modelValue":Z=>U.lastname=Z,label:"Last Name",outlined:"",flat:"",color:"positive",dense:"",autofucos:"",onKeyup:Ee(Z=>j(U),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-employmentType":a(q=>[e(X,{props:q},{default:a(()=>{var U;return[e(pe,{color:J((U=q.row.employment_type)==null?void 0:U.category)},{default:a(()=>{var j;return[R(C(((j=q.row.employment_type)==null?void 0:j.category)||"N/A")+" ",1),e(_e,{class:"bg-blue-grey-8",offset:[10,10]},{default:a(()=>[R(" Edit Employment Type ")]),_:1})]}),_:2},1032,["color"]),e(Te,{modelValue:d.value,"onUpdate:modelValue":N[0]||(N[0]=j=>d.value=j),onBeforeShow:()=>p(q.row),onSave:j=>V(q.row,j),buttons:"",title:"Edit Employment Type"},{default:a(j=>[e(ze,{modelValue:j.value,"onUpdate:modelValue":[Z=>j.value=Z,d.value],dense:"",autofocus:"",options:_.value,"option-label":"label","option-value":"value",behavior:"menu"},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1032,["modelValue","onBeforeShow","onSave"])]}),_:2},1032,["props"])]),"body-cell-address":a(q=>[e(X,{props:q},{default:a(()=>[t("div",null,[R(C(v(q.row.address))+" ",1),e(_e,{class:"bg-blue-grey-8",offset:[10,10]},{default:a(()=>[R(" Edit Address ")]),_:1})]),e(Te,{"onUpdate:modelValue":[U=>h(q.row,U),U=>q.row.address=U],modelValue:q.row.address,buttons:"",title:"Edit Address"},{default:a(U=>[e(A,{class:"text-capitalize",modelValue:U.value,"onUpdate:modelValue":j=>U.value=j,dense:"",autofocus:"",counter:"",onKeyup:Ee(U.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-phone":a(q=>[e(X,{props:q},{default:a(()=>[t("div",null,[R(C(v(q.row.phone))+" ",1),e(_e,{class:"bg-blue-grey-8",offset:[10,10]},{default:a(()=>[R(" Edit Phone ")]),_:1})]),e(Te,{"onUpdate:modelValue":[U=>l(q.row,U),U=>q.row.phone=U],modelValue:q.row.phone,buttons:"",title:"Edit Phone"},{default:a(U=>[e(A,{modelValue:U.value,"onUpdate:modelValue":j=>U.value=j,dense:"",autofocus:"",mask:"+(63) ### - ### - ####",counter:"",onKeyup:Ee(U.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-birthdate":a(q=>[e(X,{props:q},{default:a(()=>[t("div",null,[R(C(b(q.row.birthdate))+" ",1),e(_e,{class:"bg-blue-grey-8",offset:[10,10]},{default:a(()=>[R(" Edit Birthdate ")]),_:1})]),e(Te,{"onUpdate:modelValue":[U=>o(q.row,U),U=>q.row.birthdate=U],modelValue:q.row.birthdate,buttons:"",title:"Edit Birthdate"},{default:a(U=>[e(A,{modelValue:U.value,"onUpdate:modelValue":j=>U.value=j,dense:"",autofocus:"",type:"date",hint:"mm/dd/yyyy",onKeyup:Ee(U.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-actions":a(q=>[e(X,{props:q},{default:a(()=>[t("div",ea,[e(O,{round:"",dense:"",size:"md",color:"black",icon:"print",flat:"",onClick:U=>I(q.row)},{default:a(()=>[e(_e,{class:"bg-black",delay:200},{default:a(()=>[R(" Print ")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])]),e(ye,{modelValue:i.value,"onUpdate:modelValue":N[2]||(N[2]=q=>i.value=q),persistent:""},{default:a(()=>[e(L,{class:"bg-gradient",style:{width:"700px","max-width":"80vw"}},{default:a(()=>[t("div",ta,[ae(e(O,{icon:"close",flat:"",dense:"",round:""},null,512),[[le]])]),t("div",null,[t("iframe",{src:z.value,width:"100%",height:"700px"},null,8,aa)])]),_:1})]),_:1},8,["modelValue"])],64))}};var oa=Y(la,[["__scopeId","data-v-c90f01c0"]]);const dt=f=>(oe("data-v-0ad7a853"),f=f(),ne(),f),na={class:"q-mb-md text-center"},sa=dt(()=>t("div",{class:"text-center"},[t("div",{class:"text-h6"},"Add Employee")],-1)),ia=dt(()=>t("div",{class:"text-h5 q-mr-md"},"\u{1F468}\u200D\u{1F4BC}\u{1F469}\u200D\u{1F4BC} Add New Employee",-1)),ra={class:"q-gutter-y-sm"},da={class:"q-gutter-y-sm q-mx-auto"},ua={class:"row q-gutter-x-sm item-start"},ca={class:"row q-gutter-x-sm"},ma={__name:"RegisterEmployee",setup(f){const u=me(),_=y(!1),c=y(!1),g=()=>{_.value=!0};He();const s=rt(),n=["Super Admin","Admin","Supervisor","Scaler","Lamesador","Hornero","Baker","Cashier","Sales Clerk","Utility","Not Yet Assigned"],d=["Male","Female"],p=y([]),r=y([]);y([]),y(p.value),se(async()=>{await s.fetchEmploymentType(),r.value=s.employmentType.map(V=>({label:V.category,value:V.id}))});const x=we({firstname:"",middlename:"",lastname:"",address:"",birthdate:"",sex:"",phone:"",position:"",employment_type:""}),v=async()=>{c.value=!0;const V={...x,employment_type_id:x.employment_type.value};console.log("employee",V),await u.createEmployee(V),c.value=!1,k(),_.value=!1},k=()=>{x.firstname="",x.middlename="",x.lastname="",x.address="",x.birthdate="",x.sex="",x.phone="",x.position="",x.employment_type=""};return(V,h)=>(m(),P(K,null,[e(L,{class:"q-pa-md user-card",onClick:g},{default:a(()=>[t("div",na,[e(Q,{name:"person_add",size:"70px",color:"yellow-7"})]),sa]),_:1}),e(ye,{modelValue:_.value,"onUpdate:modelValue":h[9]||(h[9]=l=>_.value=l),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:a(()=>[e(L,{style:{width:"500px","max-width":"100vw"}},{default:a(()=>[e(B,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:a(()=>[ia,e($e),ae(e(O,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(B,null,{default:a(()=>[t("div",ra,[t("div",da,[e(A,{class:"text-capitalize",modelValue:x.firstname,"onUpdate:modelValue":h[0]||(h[0]=l=>x.firstname=l),outlined:"",dense:"",label:"First Name",rules:[l=>l&&l.length>0||"Required"]},null,8,["modelValue","rules"]),e(A,{class:"text-capitalize",modelValue:x.middlename,"onUpdate:modelValue":h[1]||(h[1]=l=>x.middlename=l),outlined:"",dense:"",label:"Middle Name",rules:[l=>l&&l.length>0||"Required"]},null,8,["modelValue","rules"]),e(A,{class:"text-capitalize",modelValue:x.lastname,"onUpdate:modelValue":h[2]||(h[2]=l=>x.lastname=l),outlined:"",dense:"",label:"Last Name",rules:[l=>l&&l.length>0||"Required"]},null,8,["modelValue","rules"]),e(A,{class:"text-capitalize",modelValue:x.address,"onUpdate:modelValue":h[3]||(h[3]=l=>x.address=l),outlined:"",dense:"",label:"Address",rules:[l=>l&&l.length>0||"Required"]},null,8,["modelValue","rules"])]),t("div",ua,[t("div",null,[e(A,{modelValue:x.birthdate,"onUpdate:modelValue":h[4]||(h[4]=l=>x.birthdate=l),outlined:"",dense:"",label:"Birthdate",type:"date",style:{width:"230px"},rules:[l=>l&&l.length>0||"Required"]},null,8,["modelValue","rules"])]),t("div",null,[e(A,{modelValue:x.phone,"onUpdate:modelValue":h[5]||(h[5]=l=>x.phone=l),outlined:"",dense:"",label:"Phone Number",mask:"+(63) ### - ### - ####",placeholder:"(+63) ### - ### - ####",rules:[l=>l&&l.length>0||"Required"],style:{width:"230px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","rules"])])]),t("div",ca,[t("div",null,[e(ze,{modelValue:x.sex,"onUpdate:modelValue":h[6]||(h[6]=l=>x.sex=l),dense:"",outlined:"",label:"Sex",options:d,rules:[l=>l&&l.length>0||"Required"],style:{width:"120px"},behavior:"menu","hide-dropdown-icon":""},null,8,["modelValue","rules"])]),t("div",null,[e(ze,{modelValue:x.position,"onUpdate:modelValue":h[7]||(h[7]=l=>x.position=l),outlined:"",dense:"","hide-dropdown-icon":"",label:"Position",options:n,rules:[l=>l&&l.length>0||"Required"],behavior:"menu",style:{width:"175px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","rules"])]),t("div",null,[e(ze,{modelValue:x.employment_type,"onUpdate:modelValue":h[8]||(h[8]=l=>x.employment_type=l),outlined:"",dense:"","hide-dropdown-icon":"",label:"Employment Type",options:r.value,behavior:"menu",style:{width:"155px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","options"])])])])]),_:1}),e(xe,{class:"row q-px-lg q-py-sm q-pt-none",align:"left"},{default:a(()=>[ae(e(O,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[le]]),e(O,{class:"glossy",color:"teal",label:"Add",icon:"add",onClick:v,loading:c.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var pa=Y(ma,[["__scopeId","data-v-0ad7a853"]]);const _a=Ve("designations",()=>{const f=y(null),u=y([]);return{designation:f,designations:u,createDesignation:async c=>{lt.show();try{const g=await G.post("/api/branchEmployee",c);g&&g.data?(u.value.unshift(g.data),ie.create({type:"positive",message:"Employee created successfully",setTimeout:1e3,position:"top"})):console.error("Unexpected API Response:",g)}catch(g){console.error("Error creating employee:",g),ie.create({type:"negative",message:"Failed to create employeesss",setTimeout:1e3})}finally{lt.hide()}}}});const Ke=f=>(oe("data-v-7003237c"),f=f(),ne(),f),va={class:"q-mb-md text-center"},fa=Ke(()=>t("div",{class:"text-center"},[t("div",{class:"text-subtitle1 text-weight-medium"}," Add Employee Designations ")],-1)),ya=Ke(()=>t("div",{class:"text-h5 q-mr-md"},"\u{1F468}\u200D\u{1F4BC}\u{1F469}\u200D\u{1F4BC} Add Employee Designation",-1)),ha={key:0,class:"custom-list z-top"},ga={class:"row q-gutter-md"},ba=Ke(()=>t("div",{class:"q-my-md"},"Designation",-1)),wa={class:"row q-gutter-x-md"},xa={__name:"DesignationEmployee",setup(f){const u=y(!1),_=_a(),c=me(),g=He(),s=y([]);y([]);const n=y(""),d=y(s.value),p=y(!1),r=y(!1),b=W(()=>c.employee),x=async()=>{n.value.trim()&&(r.value=!0,await c.searchCertainEmployee(n.value),r.value=!1)},v=z=>/^(0[1-9]|1[0-2]):[0-5][0-9] (AM|PM)$/i.test(z)||"Invalid time format";se(async()=>{await g.fetchBranches(),s.value=g.branches.map(z=>({label:z.name,value:z.id})),d.value=s.value});const V=(z,I)=>{I(()=>{const $=z.toLowerCase();d.value=z===""?s.value:s.value.filter(D=>D.label.toLowerCase().includes($))})},h=z=>{console.log("Selected Employee:",z),o.employee_id=z.id,o.employee_name=`${z.firstname} ${z.middlename?z.middlename.charAt(0)+".":""} ${z.lastname}`,o.position=z.position,n.value="",console.log("Filled Designation Data:",o)},l=()=>{u.value=!0},o=we({employee_id:"",employee_name:"",position:"",branch_name:"",time_shift:""}),w=()=>{o.employee_id="",o.employee_name="",o.position="",o.branch_name="",o.time_shift=""},i=async()=>{p.value=!0;const z={...o,branch_id:o.branch_name.value};await _.createDesignation(z),console.log("Designation Data to Save:",z),p.value=!1,w(),u.value=!1};return(z,I)=>(m(),P(K,null,[e(L,{class:"q-pa-md user-card",onClick:l,align:"center"},{default:a(()=>[t("div",va,[e(Q,{name:"add_business",size:"60px",color:"yellow-7"})]),fa]),_:1}),e(ye,{modelValue:u.value,"onUpdate:modelValue":I[5]||(I[5]=$=>u.value=$),"backdrop-filter":"blur(4px) saturate(150%)",position:"right"},{default:a(()=>[e(L,{style:{width:"500px","max-width":"80vw"}},{default:a(()=>[e(B,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:a(()=>[ya,e($e),ae(e(O,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(B,null,{default:a(()=>[t("div",null,[e(A,{modelValue:n.value,"onUpdate:modelValue":[I[0]||(I[0]=$=>n.value=$),x],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name or position"},{append:a(()=>[r.value?(m(),T(ce,{key:1,color:"grey",size:"sm"})):(m(),T(Q,{key:0,name:"search"}))]),default:a(()=>[n.value?(m(),P("div",ha,[e(L,null,{default:a(()=>[e(De,{separator:""},{default:a(()=>{var $;return[($=b.value)!=null&&$.length?(m(!0),P(K,{key:1},fe(b.value,D=>(m(),T(te,{onClick:J=>h(D),key:D.id,clickable:""},{default:a(()=>[e(Se,null,{default:a(()=>[R(C(`${D.firstname} ${D.middlename?D.middlename.charAt(0)+".":""} ${D.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(m(),T(te,{key:0},{default:a(()=>[R(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):re("",!0)]),_:1},8,["modelValue"])])]),_:1}),e(B,null,{default:a(()=>[t("div",ga,[e(A,{outlined:"",readonly:"",dense:"",label:"Full Name",modelValue:o.employee_name,"onUpdate:modelValue":I[1]||(I[1]=$=>o.employee_name=$),style:{width:"300px"}},null,8,["modelValue"]),e(A,{outlined:"",readonly:"",dense:"",label:"Position",modelValue:o.position,"onUpdate:modelValue":I[2]||(I[2]=$=>o.position=$),style:{width:"150px"}},null,8,["modelValue"])])]),_:1}),e(B,null,{default:a(()=>[ba,t("div",wa,[t("div",null,[e(ze,{modelValue:o.branch_name,"onUpdate:modelValue":I[3]||(I[3]=$=>o.branch_name=$),outlined:"",flat:"",dense:"","use-input":"",clearable:"","input-debounce":"0",options:d.value,label:"Branch",onFilter:V,"hide-dropdown-icon":"",behavior:"menu",style:{width:"250px","max-width":"500px","min-width":"100px"}},null,8,["modelValue","options"])]),t("div",null,[e(A,{modelValue:o.time_shift,"onUpdate:modelValue":I[4]||(I[4]=$=>o.time_shift=$),outlined:"",flat:"",dense:"",mask:"##:## AA",label:"Time Schedule",rules:v,hint:"Format: 01:00 AM/PM",style:{width:"200px","max-width":"500px","min-width":"100px"},"hide-dropdown-icon":""},null,8,["modelValue"])])])]),_:1}),e(xe,{class:"row q-px-lg q-py-sm q-pt-none",align:"left"},{default:a(()=>[ae(e(O,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[le]]),e(O,{class:"glossy",color:"teal",label:"Add",onClick:i,loading:p.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var $a=Y(xa,[["__scopeId","data-v-7003237c"]]);const Va={class:"row justify-between"},ka={class:"col-10"},Sa={class:"col-2 q-gutter-y-md"},Da={__name:"EmployeesPage",setup(f){return(u,_)=>(m(),P("div",Va,[t("div",ka,[e(oa)]),t("div",Sa,[e(pa),e($a)])]))}},Oe=Ve("dtrs",()=>{const f=y(null),u=y([]),_=y([]),c=async()=>{try{const d=await G.get("/api/dtr");return d&&d.data?(u.value=d.data,d.data):(console.warn("No data returned from API."),u.value=[],[])}catch(d){return console.error("Error fetching DTR data:",d),u.value=[],[]}};return{dtr:f,dtrs:u,dtrCutOffData:_,fetchDTR:c,fetchDTRRange:async d=>{const p=await G.post("/api/dtr-data",d);_.value=p.data,console.log("Fetched DTR Data:",p.data)},saveOvertime:async d=>{const p=await G.post("/api/saveOvertime",d);u.value=p.data,c(),ie.create({type:"positive",message:"Over Time Save"})},searchDTR:async d=>{try{console.log("Searching for DTR with keyword:",d);const p=await G.post(`/api/search-drt?keyword=${d}`);console.log("DTR response:",p),u.value=p.data}catch(p){console.error("Error searching DTR:",p)}}}});const Aa=f=>(oe("data-v-88be51ca"),f=f(),ne(),f),qa=Aa(()=>t("div",{class:"text-h5 q-mr-md"},"\u{1F554} Add Over Time",-1)),Ea={class:"q-gutter-md"},Pa={class:"q-mb-lg"},Ua={key:0,class:"custom-list z-top"},Ta={class:"q-gutter-md q-my-lg"},Ca={class:"q-mt-xl q-gutter-y-md"},za={class:"row justify-between"},Ia={class:"row justify-between"},Na={__name:"OvertimeButton",setup(f){const u=Oe(),_=me(),c=y(""),g=W(()=>_.employees),s=async()=>{c.value.trim()&&await _.searchEmployee(c.value)},n=y(!1),d=()=>{n.value=!0},p=v=>/^(0[1-9]|1[0-2]):[0-5][0-9] (AM|PM)$/i.test(v)||"Invalid time format",r=v=>{b.employee_id=v.id,b.employee_name=`${v.firstname} ${v.middlename?v.middlename.charAt(0)+".":""} ${v.lastname}`,b.position=v.position,c.value=""},b=we({employee_id:"",employee_name:"",position:"",regularDateIN:"",dateIn:"",dateOut:"",timeIn:"",timeOut:""}),x=async()=>{const v=`${b.dateIn} ${b.timeIn}`,k=`${b.dateOut} ${b.timeOut}`,V={...b,overtime_in:v,overtime_out:k};await u.saveOvertime(V),console.log("overtime dATA",V)};return(v,k)=>(m(),P(K,null,[t("div",null,[e(O,{padding:"sm md",label:"Add Over Time",icon:"add_circle",size:"md",class:"gradient-btn text-white",onClick:d})]),t("div",null,[e(ye,{modelValue:n.value,"onUpdate:modelValue":k[8]||(k[8]=V=>n.value=V),"full-height":"",persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:a(()=>[e(L,{style:{width:"400px","max-width":"80vw"}},{default:a(()=>[e(B,{class:"row items-center q-px-md q-py-sm gradient-btn text-white"},{default:a(()=>[qa,e($e),ae(e(O,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(B,null,{default:a(()=>[t("div",Ea,[t("div",Pa,[e(A,{modelValue:c.value,"onUpdate:modelValue":[k[0]||(k[0]=V=>c.value=V),s],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name"},{append:a(()=>[e(Q,{name:"search"})]),default:a(()=>[c.value?(m(),P("div",Ua,[e(L,null,{default:a(()=>[e(De,{separator:""},{default:a(()=>{var V;return[(V=g.value)!=null&&V.length?(m(!0),P(K,{key:1},fe(g.value,h=>(m(),T(te,{onClick:l=>r(h),key:h.id,clickable:""},{default:a(()=>[e(Se,null,{default:a(()=>[R(C(`${h.firstname} ${h.middlename?h.middlename.charAt(0)+".":""} ${h.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(m(),T(te,{key:0},{default:a(()=>[R(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):re("",!0)]),_:1},8,["modelValue"])]),t("div",null,[t("div",Ta,[e(A,{modelValue:b.employee_name,"onUpdate:modelValue":k[1]||(k[1]=V=>b.employee_name=V),outlined:"",dense:"",readonly:"",label:"Name"},null,8,["modelValue"]),e(A,{modelValue:b.position,"onUpdate:modelValue":k[2]||(k[2]=V=>b.position=V),outlined:"",dense:"",readonly:"",label:"Position"},null,8,["modelValue"])])])])]),_:1}),e(B,null,{default:a(()=>[e(A,{modelValue:b.regularDateIN,"onUpdate:modelValue":k[3]||(k[3]=V=>b.regularDateIN=V),outlined:"",dense:"",label:"Regular Date IN",type:"date"},null,8,["modelValue"])]),_:1}),e(B,null,{default:a(()=>[t("div",Ca,[t("div",za,[t("div",null,[e(A,{modelValue:b.dateIn,"onUpdate:modelValue":k[4]||(k[4]=V=>b.dateIn=V),outlined:"",dense:"",label:"Date IN",type:"date",style:{width:"170px"}},null,8,["modelValue"])]),t("div",null,[e(A,{modelValue:b.timeIn,"onUpdate:modelValue":k[5]||(k[5]=V=>b.timeIn=V),label:"Time IN",dense:"",mask:"##:## AA",outlined:"",rules:p,hint:"Format: hh:mm AM/PM"},null,8,["modelValue"])])]),t("div",Ia,[t("div",null,[e(A,{modelValue:b.dateOut,"onUpdate:modelValue":k[6]||(k[6]=V=>b.dateOut=V),outlined:"",dense:"",label:"Date OUT",type:"date",style:{width:"170px"}},null,8,["modelValue"])]),t("div",null,[e(A,{modelValue:b.timeOut,"onUpdate:modelValue":k[7]||(k[7]=V=>b.timeOut=V),label:"Time OUT",dense:"",mask:"##:## AA",outlined:"",rules:p,hint:"Format: hh:mm AM/PM"},null,8,["modelValue"])])])])]),_:1}),e(B,null,{default:a(()=>[e(xe,{class:"q-mt-md"},{default:a(()=>[e(O,{size:"md",padding:"xs md",label:"save","icon-right":"send",class:"gradient-btn text-white",onClick:x})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var Ra=Y(Na,[["__scopeId","data-v-88be51ca"]]);const Ba={__name:"SearchDTR",setup(f){const u=Oe(),_=y(""),c=y(!1),g=async()=>{c.value=!0,await u.searchDTR(_.value),c.value=!1};return(s,n)=>(m(),T(A,{modelValue:_.value,"onUpdate:modelValue":[n[0]||(n[0]=d=>_.value=d),g],outlined:"",dense:"",flat:"",label:"Search",debounce:"1000",style:{width:"300px"}},{append:a(()=>[t("div",null,[c.value?(m(),T(ce,{key:1,color:"grey",size:"sm"})):(m(),T(Q,{key:0,name:"search"}))])]),_:1},8,["modelValue"]))}};const he=f=>(oe("data-v-b88dd3ca"),f=f(),ne(),f),Ma=he(()=>t("div",{class:"text-h5 q-mr-md"},"\u{1F554} Edit Time",-1)),Fa={class:"row justify-between"},Oa={class:"q-mt-lg q-gutter-md"},La={class:"row justify-between"},ja=he(()=>t("div",null,"Time IN",-1)),Qa=he(()=>t("div",null,"Time OUT",-1)),Ha={class:"row justify-between"},Ka=he(()=>t("div",null,"Lunch Break Start",-1)),Wa=he(()=>t("div",null,"Lunch Break End",-1)),Ya={class:"row justify-between"},Xa=he(()=>t("div",null,"Break Start",-1)),Ja=he(()=>t("div",null,"Break End",-1)),Ga={class:"row justify-between"},Za=he(()=>t("div",null,"Over Time Start",-1)),el=he(()=>t("div",null,"Over Time End",-1)),tl={__name:"EditDTR",props:["edit"],setup(f){const _=f.edit.row,c=y(),g=d=>{const p=v=>v?v.charAt(0).toUpperCase()+v.slice(1).toLowerCase():"",r=d.firstname?p(d.firstname):"No Firstname",b=d.middlename?p(d.middlename).charAt(0)+".":"",x=d.lastname?p(d.lastname):"No Lastname";return`${r} ${b} ${x}`.trim()},s=we({time_in:"",time_out:"",lunch_break_start:"",lunch_break_end:"",break_start:"",break_end:"",over_start:"",over_end:""}),n=()=>{Object.assign(s,_),c.value=!0};return(d,p)=>(m(),P(K,null,[e(O,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:"",onClick:n},{default:a(()=>[e(_e,{class:"bg-positive",delay:200},{default:a(()=>[R("Edit")]),_:1})]),_:1}),e(ye,{modelValue:c.value,"onUpdate:modelValue":p[8]||(p[8]=r=>c.value=r)},{default:a(()=>[e(L,{style:{width:"500px","max-width":"80vw"}},{default:a(()=>[e(B,{class:"row items-center q-px-md q-py-sm gradient-btn text-white"},{default:a(()=>[Ma,e($e),ae(e(O,{icon:"close",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(B,null,{default:a(()=>[t("div",Fa,[t("div",null,"Name: "+C(g(ot(_).employee)),1),t("div",null," Position: "+C(ot(_).employee.position),1)]),t("div",Oa,[t("div",La,[t("div",null,[ja,e(A,{outlined:"",dense:"",modelValue:s.time_in,"onUpdate:modelValue":p[0]||(p[0]=r=>s.time_in=r)},null,8,["modelValue"])]),t("div",null,[Qa,e(A,{outlined:"",dense:"",modelValue:s.time_out,"onUpdate:modelValue":p[1]||(p[1]=r=>s.time_out=r)},null,8,["modelValue"])])]),t("div",Ha,[t("div",null,[Ka,e(A,{outlined:"",dense:"",modelValue:s.lunch_break_start,"onUpdate:modelValue":p[2]||(p[2]=r=>s.lunch_break_start=r)},null,8,["modelValue"])]),t("div",null,[Wa,e(A,{outlined:"",dense:"",modelValue:s.lunch_break_end,"onUpdate:modelValue":p[3]||(p[3]=r=>s.lunch_break_end=r)},null,8,["modelValue"])])]),t("div",Ya,[t("div",null,[Xa,e(A,{outlined:"",dense:"",modelValue:s.break_start,"onUpdate:modelValue":p[4]||(p[4]=r=>s.break_start=r)},null,8,["modelValue"])]),t("div",null,[Ja,e(A,{outlined:"",dense:"",modelValue:s.break_end,"onUpdate:modelValue":p[5]||(p[5]=r=>s.break_end=r)},null,8,["modelValue"])])]),t("div",Ga,[t("div",null,[Za,e(A,{outlined:"",dense:"",modelValue:s.over_start,"onUpdate:modelValue":p[6]||(p[6]=r=>s.over_start=r)},null,8,["modelValue"])]),t("div",null,[el,e(A,{outlined:"",dense:"",modelValue:s.over_end,"onUpdate:modelValue":p[7]||(p[7]=r=>s.over_end=r)},null,8,["modelValue"])])])])]),_:1}),e(xe,{class:"row q-ma-md",align:"right"},{default:a(()=>[ae(e(O,{class:"btn-cancel glossy",color:"negative",label:"Cancel"},null,512),[[le]]),e(O,{class:"btn-create glossy",color:"positive",label:"Save"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var al=Y(tl,[["__scopeId","data-v-b88dd3ca"]]);const ll={class:"row justify-between q-mb-md",align:"right"},ol={key:1},nl={key:1},sl={key:1},il={key:1},rl={key:1},dl={key:1},ul={key:1},cl={key:1},ml={key:1},pl={class:"row justify-center q-gutter-x-md"},_l={__name:"AttendanceTable",setup(f){const u=y({rowsPerPage:0}),_=Oe(),c=W(()=>_.dtrs);se(async()=>{await g()});const g=async()=>{try{c.value=await _.fetchDTR(),console.log("dtrsss",c.value)}catch(o){console.log("Error fetching DTR data:",o)}},s=o=>{const w=$=>$?$.charAt(0).toUpperCase()+$.slice(1).toLowerCase():"",i=o.firstname?w(o.firstname):"No Firstname",z=o.middlename?w(o.middlename).charAt(0)+".":"",I=o.lastname?w(o.lastname):"No Lastname";return`${i} ${z} ${I}`.trim()},n=o=>{if(!o)return" - - ";const w=new Date(o);return isNaN(w.getTime())?" - - ":w.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},d=o=>{if(!o)return" - - ";const w=new Date(o);if(isNaN(w.getTime()))return" - - ";let i=w.getHours();const z=w.getMinutes().toString().padStart(2,"0"),I=i>=12?"PM":"AM";return i=i%12,i=i||12,`${i}:${z} ${I}`},p=(o,w)=>{if(!o||!w)return{hours:0,minutes:0};const i=new Date(o),z=new Date(w);if(isNaN(i.getTime())||isNaN(z.getTime()))return{hours:0,minutes:0};const I=z-i,$=Math.floor(I/(1e3*60)),D=Math.floor($/60),J=$%60;return{hours:D,minutes:J}},r=(o,w)=>{if(console.log("Input timeIn:",o),console.log("Input timeOut:",w),!o||!w)return" - - - ";const i=new Date(o),z=new Date(w);if(console.log("Parsed start date:",i),console.log("Parsed end date:",z),isNaN(i.getTime())||isNaN(z.getTime()))return console.log("Invalid date format detected")," - - - ";const I=z-i,$=Math.floor(I/(1e3*60)),D=Math.floor($/60),J=$%60;return console.log("Calculated hours:",D),console.log("Calculated minutes:",J),`${D}h ${J}m`},b=(o,w)=>{const{hours:i,minutes:z}=p(o,w);return i>1||z>0?"green-7":"blue-grey-9"},x=(o,w)=>{const{hours:i,minutes:z}=p(o,w);return i>1||z>0?"check_circle":"access_time"},v=(o,w)=>{const{hours:i,minutes:z}=p(o,w);return i>0||z>15?"pink-13":"green-7"},k=(o,w)=>{const{hours:i,minutes:z}=p(o,w);return i>0||z>15?"access_time":"check_circle"},V=(o,w)=>{const{hours:i}=p(o,w);return i>9||i===9&&minutes>0?"blue-grey-9":i>=8?"green-7":"pink-13"},h=(o,w)=>{const i=p(o,w);return i>=9||i===9&&minutes>0?"alarm_on":i>=8?"check_circle":"access_time"},l=[{name:"name",required:!0,label:"Name",align:"left",field:o=>s(o.employee)},{name:"date_in",required:!0,label:"Date In",align:"center",field:"time_in",format:o=>n(o)},{name:"date_out",required:!0,label:"Date Out",align:"center",field:"time_out",format:o=>n(o)},{name:"time_in",required:!0,label:"Time In",align:"center",field:"time_in"},{name:"time_out",required:!0,label:"Time Out",align:"center",field:"time_out",format:o=>d(o)},{name:"lunch_break_start",required:!0,label:"Lunch Break Start",align:"center",field:"lunch_break_start",format:o=>d(o)},{name:"lunch_break_end",required:!0,label:"Lunch Break End",align:"center",field:"lunch_break_end",format:o=>d(o)},{name:"break_start",required:!0,label:"Break Start",align:"center",field:"break_start",format:o=>d(o)},{name:"break_end",required:!0,label:"Break End",align:"center",field:"break_end",format:o=>d(o)},{name:"break",required:!0,label:"Total Break",align:"center",field:o=>{const{hours:w,minutes:i}=p(o.break_start,o.break_end);return`${w}h ${i}m`}},{name:"lunch_break",required:!0,label:"Total Lunch break",align:"center",field:o=>{const{hours:w,minutes:i}=p(o.lunch_break_start,o.lunch_break_end);return`${w}h ${i}m`}},{name:"total_working_hours",required:!0,label:"Work Hours",align:"center",field:o=>{const{hours:w,minutes:i}=p(o.time_in,o.time_out);return`${w}h ${i}m`}},{name:"overtime_start",required:!0,label:"Overtime Start",align:"center",field:"overtime_start",format:o=>d(o)},{name:"overtime_end",required:!0,label:"Overtime End",align:"center",field:"overtime_end",format:o=>d(o)},{name:"total_overtime",required:!0,label:"OT Total Hours",align:"center",field:o=>{const w=r(o.overtime_start,o.overtime_end);if(typeof w=="string")return w;const{hours:i,minutes:z}=w;return`${i}h ${z}m`}},{name:"action",label:"Action",align:"center"}];return(o,w)=>(m(),P(K,null,[t("div",ll,[t("div",null,[e(Ra)]),e(Ba)]),t("div",null,[e(ke,{rows:c.value,columns:l,"row-key":"time_in",class:"sticky-header","hide-bottom":"",pagination:u.value,"onUpdate:pagination":w[0]||(w[0]=i=>u.value=i),"rows-per-page-options":[0]},{"body-cell-time_in":a(i=>[e(X,{props:i},{default:a(()=>[i.row.time_in?(m(),T(pe,{key:0,outline:"",color:"positive"},{default:a(()=>[R(C(d(i.row.time_in)),1)]),_:2},1024)):(m(),P("span",ol," - - - "))]),_:2},1032,["props"])]),"body-cell-time_out":a(i=>[e(X,{props:i},{default:a(()=>[i.row.time_out?(m(),T(pe,{key:0,outline:"",color:"purple-12"},{default:a(()=>[R(C(d(i.row.time_out)),1)]),_:2},1024)):(m(),P("span",nl," - - - "))]),_:2},1032,["props"])]),"body-cell-lunch_break_start":a(i=>[e(X,{props:i},{default:a(()=>[i.row.lunch_break_start?(m(),T(pe,{key:0,outline:"",color:"amber-7"},{default:a(()=>[R(C(d(i.row.lunch_break_start)),1)]),_:2},1024)):(m(),P("span",sl," - - - "))]),_:2},1032,["props"])]),"body-cell-lunch_break_end":a(i=>[e(X,{props:i},{default:a(()=>[i.row.lunch_break_end?(m(),T(pe,{key:0,outline:"",color:"amber-4"},{default:a(()=>[R(C(d(i.row.lunch_break_end)),1)]),_:2},1024)):(m(),P("span",il," - - - "))]),_:2},1032,["props"])]),"body-cell-break_start":a(i=>[e(X,{props:i},{default:a(()=>[i.row.break_start?(m(),T(pe,{key:0,outline:"",color:"blue-7"},{default:a(()=>[R(C(d(i.row.break_start)),1)]),_:2},1024)):(m(),P("span",rl," - - - "))]),_:2},1032,["props"])]),"body-cell-break_end":a(i=>[e(X,{props:i},{default:a(()=>[i.row.break_end?(m(),T(pe,{key:0,outline:"",color:"blue-4"},{default:a(()=>[R(C(d(i.row.break_end)),1)]),_:2},1024)):(m(),P("span",dl," - - - "))]),_:2},1032,["props"])]),"body-cell-break":a(i=>[e(X,{props:i},{default:a(()=>[i.row.break_start&&i.row.break_end?(m(),T(pe,{key:0,outline:"",color:v(i.row.break_start,i.row.break_end),class:"q-ma-xs",size:"md"},{default:a(()=>[e(Q,{name:k(i.row.break_start,i.row.break_end),size:"xs",class:"q-mr-xs"},null,8,["name"]),R(" "+C(`${p(i.row.break_start,i.row.break_end).hours} Hrs : ${p(i.row.break_start,i.row.break_end).minutes} Min`),1)]),_:2},1032,["color"])):(m(),P("span",ul," - - - "))]),_:2},1032,["props"])]),"body-cell-lunch_break":a(i=>[e(X,{props:i},{default:a(()=>[i.row.lunch_break_start&&i.row.lunch_break_end?(m(),T(pe,{key:0,outline:"",color:b(i.row.lunch_break_start,i.row.lunch_break_end),class:"q-ma-xs",size:"md"},{default:a(()=>[e(Q,{name:x(i.row.lunch_break_start,i.row.lunch_break_end),size:"xs",class:"q-mr-xs"},null,8,["name"]),R(" "+C(`${p(i.row.lunch_break_start,i.row.lunch_break_end).hours} Hrs : ${p(i.row.lunch_break_start,i.row.lunch_break_end).minutes} Min`),1)]),_:2},1032,["color"])):(m(),P("span",cl," - - - "))]),_:2},1032,["props"])]),"body-cell-total_working_hours":a(i=>[e(X,{props:i},{default:a(()=>[i.row.time_in&&i.row.time_out?(m(),T(pe,{key:0,outline:"",color:V(i.row.time_in,i.row.time_out),class:"q-ma-xs",size:"md"},{default:a(()=>[e(Q,{name:h(i.row.time_in,i.row.time_out),size:"xs",class:"q-mr-xs"},null,8,["name"]),R(" "+C(`${p(i.row.time_in,i.row.time_out).hours} Hrs : ${p(i.row.time_in,i.row.time_out).minutes} Min`),1)]),_:2},1032,["color"])):(m(),P("span",ml," - - - "))]),_:2},1032,["props"])]),"body-cell-action":a(i=>[e(X,{props:i},{default:a(()=>[t("div",pl,[e(al,{edit:i},null,8,["edit"])])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])])],64))}};var vl=Y(_l,[["__scopeId","data-v-1982f392"]]);const ut=f=>(oe("data-v-35e59741"),f=f(),ne(),f),fl={class:"q-mb-md",align:"right"},yl={key:0,class:"custom-list z-top"},hl={class:"row"},gl={class:"col-3 q-ma-lg",align:"center"},bl={class:"q-pa-lg"},wl=["src","alt"],xl={class:"row q-mt-lg",align:"left"},$l=ut(()=>t("div",{class:"col-3"},[t("div",null,"Name:"),t("div",null,"Position:"),t("div",null,"Age:")],-1)),Vl={class:"col-9"},kl={class:"col-8 q-ml-lg"},Sl={class:"row justify-between"},Dl={class:"row justify-between q-mt-md"},Al={class:"row"},ql={class:"q-my-md"},El={class:"row justify-between text-h6 text-white"},Pl=ut(()=>t("div",null,"\u{1F5D3}\uFE0F Daily Time Record",-1)),Ul=["src"],Tl={__name:"AttendanceSummary",setup(f){Fe.exports.vfs=void 0;const u=me(),_=W(()=>u.employees),c=Oe(),g=y("https://cdn.quasar.dev/img/boy-avatar.png"),s=y("");y(null);const n=y(null),d=y(""),p=y(""),r=y(""),b=y(""),x=y(""),v=y(!1),k=y("");y(!1);const V=()=>{g.value="https://cdn.quasar.dev/img/boy-avatar.png"},h=y({rowsPerPage:0}),l=async()=>{s.value.trim()&&await u.searchEmployee(s.value)},o=async E=>{s.value="",r.value=`${E.firstname} ${E.middlename?E.middlename.charAt(0)+".":""} ${E.lastname}`,b.value=E.position||"Unknown",x.value=w(E.birthdate),n.value=E.id;const F=Ce.formatDate(new Date,"YYYY-MM-DD");if(F){const{startDate:M,endDate:H}=z(F);d.value=M,p.value=H;const ee={employee_id:n.value,start_date:d.value,end_date:p.value};await c.fetchDTRRange(ee),console.log("Request Data:",ee)}else console.error("Failed to format the current date")},w=E=>{if(!E)return"N/A";const F=new Date(E),M=new Date;let H=M.getFullYear()-F.getFullYear();const ee=M.getMonth()-F.getMonth();return(ee<0||ee===0&&M.getDate()<F.getDate())&&H--,H},i=()=>{const E=Ce.formatDate(new Date,"YYYY-MM-DD"),{startDate:F,endDate:M}=z(E);d.value=F,p.value=M},z=E=>{if(!E)return console.error("Invalid formatted date:",E),{startDate:null,endDate:null};const F=parseInt(E.slice(8,10),10);let M,H;if(F>=11&&F<=25)M=`${E.slice(0,7)}-11`,H=`${E.slice(0,7)}-25`;else{const ee=F>=26?E.slice(5,7):(parseInt(E.slice(5,7),10)-1).toString().padStart(2,"0"),ge=F>=26?(parseInt(E.slice(5,7),10)+1).toString().padStart(2,"0"):E.slice(5,7);M=`${E.slice(0,4)}-${ee}-26`,H=`${E.slice(0,4)}-${ge}-10`}return console.log("Calculated Start Date:",M),console.log("Calculated End Date:",H),{startDate:M,endDate:H}},I=E=>{const F=new Date(E);if(isNaN(F.getTime()))return" - - - ";const M={month:"short",day:"2-digit",year:"numeric"},H=F.toLocaleDateString("en-US",M).replace(",",""),[ee,ge,qe]=H.split(" ");return`${ee}. ${ge}, ${qe}`},$=I(d.value);console.log("formattedStart",$),I(new Date(d)),I(new Date(p));const D=W(()=>{const E=c.dtrCutOffData,F=(M,H)=>{if(!M||!H)return" - - - ";const ee=new Date(M),ge=new Date(H);if(isNaN(ee.getTime())||isNaN(ge.getTime()))return" - - - ";const qe=ge-ee;if(qe<=0)return" - - - ";const Re=Math.floor(qe/(1e3*60)),Pe=String(Math.floor(Re/60)).padStart(2,"0"),Le=String(Re%60).padStart(2,"0");return`${Pe} h : ${Le} m`};return E.map((M,H)=>{const ee=M.time_in,ge=M.time_out,qe=M.overtime_start,Re=M.overtime_end,Pe=F(ee,ge),Le=F(qe,Re);let Ze=" - - - ";const et=8;if(Pe!==" - - - "){const[mt,pt]=Pe.split(" h : "),tt=parseInt(mt,10)+parseInt(pt,10)/60;if(tt<et){const at=(et-tt)*60,_t=String(Math.floor(at/60)).padStart(2,"0"),vt=String(Math.floor(at%60)).padStart(2,"0");Ze=`${_t} h : ${vt} m`}}return{entry:H+1,time_in:M.time_in,time_out:M.time_out,total_working_hours:Pe,undertime:Ze,overtime:Le}})}),J=async()=>{n.value&&d.value&&p.value&&await c.fetchDTRRange({employee_id:n.value,start_date:d.value,end_date:p.value})};console.log("DTR ROW",D.value);const S=()=>{const E=new Date(d.value);E.setDate(E.getDate()-15);const{startDate:F,endDate:M}=z(Ce.formatDate(E,"YYYY-MM-DD"));d.value=F,p.value=M,J()},N=()=>{const E=new Date(p.value);E.setDate(E.getDate()+1);const{startDate:F,endDate:M}=z(Ce.formatDate(E,"YYYY-MM-DD"));d.value=F,p.value=M,J()},q=()=>{i(),J()};i();const U=E=>{const F=j();Fe.exports.createPdf(F).getDataUrl(M=>{k.value=M,v.value=!0})},j=()=>({pageMargins:[40,40,-10,40],content:[{text:"Daily Time Record",style:"header"},{text:[{text:"From: ",bold:!1,fontSize:8},{text:` ${I(d.value)}`,bold:!0,decoration:"underline",fontSize:10}],margin:[0,0,0,3]},{text:[{text:"To: ",bold:!1,fontSize:8},{text:`     ${I(p.value)}`,bold:!0,decoration:"underline",fontSize:10}],margin:[0,0,0,10]},{columns:[{text:[{text:"Employee Name:",bold:!1,fontSize:8},{text:`  ${r.value}`,bold:!0,decoration:"underline",fontSize:10}]},{text:[{text:"Position:",bold:!1,fontSize:8},{text:`  ${b.value}`,bold:!0,decoration:"underline",fontSize:10}]},{text:[{text:"Age:",bold:!1,fontSize:8},{text:`  ${x.value}`,bold:!0,decoration:"underline",fontSize:10}]}],margin:[0,0,0,10]},{table:{headerRows:1,widths:["auto","auto","auto","auto","auto","auto"],body:[[{text:"Number of Days",bold:!0},{text:"Time In",bold:!0,alignment:"center"},{text:"Time Out",bold:!0,alignment:"center"},{text:"Total Working Hours",bold:!0},{text:"Undertime",bold:!0},{text:"Overtime",bold:!0}],...D.value.map(E=>[{text:E.entry,alignment:"center"},{text:E.time_in||" - - - ",alignment:"center"},{text:E.time_out||" - - - ",alignment:"center"},{text:E.total_working_hours||" - - - ",alignment:"center"},{text:E.undertime||" - - - ",alignment:"center"},{text:E.overtime||" - - - ",alignment:"center"}])]},layout:{hLineWidth:function(E,F){return E===0||E===F.table.body.length?1:.5},vLineWidth:function(E,F){return .5},hLineColor:function(E,F){return E===0||E===F.table.body.length?"black":"#ccc"},vLineColor:function(E,F){return"#ccc"}}}],styles:{header:{fontSize:14,bold:!0,alignment:"center",margin:[0,5,0,10]},tableHeader:{bold:!0,fontSize:13,color:"black"}},defaultStyle:{fontSize:9}}),Z=[{name:"number_of_days",required:!0,label:"NOD",align:"center",field:E=>E.entry,format:E=>`${E}`},{name:"in",align:"center",label:"IN",field:"time_in"},{name:"out",label:"OUT",align:"center",field:"time_out"},{name:"total_working_hours",label:"Total Working Hours",align:"center",field:"total_working_hours"},{name:"overtime",label:"Overtime",field:"overtime",align:"center"},{name:"undertime",label:"Undertime",field:"undertime",align:"center"}];return(E,F)=>(m(),P(K,null,[t("div",fl,[e(A,{modelValue:s.value,"onUpdate:modelValue":[F[0]||(F[0]=M=>s.value=M),l],debounce:"500",outlined:"",dense:"",flat:"",label:"Search",style:{width:"300px"}},{append:a(()=>[t("div",null,[e(Q,{name:"search"})])]),default:a(()=>[s.value?(m(),P("div",yl,[e(L,null,{default:a(()=>[e(De,{separator:""},{default:a(()=>{var M;return[(M=_.value)!=null&&M.length?(m(!0),P(K,{key:1},fe(_.value,H=>(m(),T(te,{key:H.id,clickable:"",onClick:ee=>o(H)},{default:a(()=>[e(Se,null,{default:a(()=>[R(C(`${H.firstname} ${H.middlename?H.middlename.charAt(0)+".":""} ${H.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(m(),T(te,{key:0},{default:a(()=>[R(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):re("",!0)]),_:1},8,["modelValue"])]),t("div",null,[e(L,{bordered:"",dense:"",flat:"",class:"q-pa-md"},{default:a(()=>[t("div",hl,[t("div",gl,[t("div",bl,[e(st,{size:"150px",color:"grey-2"},{default:a(()=>[t("img",{src:g.value,alt:E.altText,onError:V},null,40,wl)]),_:1})]),t("div",xl,[$l,t("div",Vl,[t("div",null,C(r.value),1),t("div",null,C(b.value),1),t("div",null,C(x.value),1)])])]),e(ve,{vertical:""}),t("div",kl,[t("div",Sl,[t("div",null,"From: "+C(I(d.value)),1),t("div",null,"To: "+C(I(p.value)),1)]),t("div",Dl,[t("div",null,[t("div",Al,[e(O,{padding:"sm md",size:"sm",dense:"",flat:"",label:"prev",icon:"arrow_back_ios_new",onClick:S}),e(ve,{vertical:""}),e(O,{padding:"sm md",size:"sm",dense:"",flat:"",onClick:q},{default:a(()=>[R("CURRENT")]),_:1}),e(ve,{vertical:""}),e(O,{padding:"sm md",size:"sm",dense:"",flat:"",label:"next",icon:"arrow_forward_ios",onClick:N})])]),t("div",null,[e(O,{padding:"sm md",size:"sm",icon:"print",dense:"",label:"PRINT",class:"gradient-btn text-white",onClick:U})])]),t("div",ql,[e(ke,{flat:"",bordered:"",separator:"cell",rows:D.value,columns:Z,"row-key":"entry",class:"full-height-table",pagination:h.value,"onUpdate:pagination":F[1]||(F[1]=M=>h.value=M),"hide-bottom":""},null,8,["rows","pagination"])])])])]),_:1})]),e(ye,{modelValue:v.value,"onUpdate:modelValue":F[2]||(F[2]=M=>v.value=M),"full-height":"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:a(()=>[e(L,{style:{width:"820px","max-width":"80vw"}},{default:a(()=>[e(B,{class:"gradient-btn"},{default:a(()=>[t("div",El,[Pl,t("div",null,[ae(e(O,{rounded:"",flat:"",dense:"",icon:"arrow_forward_ios"},null,512),[[le]])])])]),_:1}),t("div",null,[t("iframe",{src:k.value,width:"100%",height:"700px"},null,8,Ul)])]),_:1})]),_:1},8,["modelValue"])],64))}};var Cl=Y(Tl,[["__scopeId","data-v-35e59741"]]);const zl={class:"q-gutter-y-sm"},Il={__name:"AttendancePage",setup(f){const u=y("dtr_overview");return(_,c)=>(m(),P("div",null,[t("div",zl,[e(je,{modelValue:u.value,"onUpdate:modelValue":c[0]||(c[0]=g=>u.value=g),"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:"gradient-btn"},{default:a(()=>[e(de,{class:"text-white",name:"dtr_overview",icon:"event_available",label:"DTR Overview"}),e(de,{class:"text-white",name:"attendance_summary",icon:"calendar_month",label:"Attendance Summary"})]),_:1},8,["modelValue"])]),e(Qe,{modelValue:u.value,"onUpdate:modelValue":c[1]||(c[1]=g=>u.value=g),animated:""},{default:a(()=>[e(ue,{name:"dtr_overview"},{default:a(()=>[e(vl)]),_:1}),e(ue,{name:"attendance_summary"},{default:a(()=>[e(Cl)]),_:1})]),_:1},8,["modelValue"])]))}};var Nl=Y(Il,[["__scopeId","data-v-db6c6d6e"]]);const We=Ve("employee-allowance",()=>{const f=y(null),u=y([]);return{allowance:f,allowances:u,createEmployeeAllowance:async s=>{try{const n=await G.post("/api/employee-allowance",s);console.log("employee response",n.data),u.value.unshift(n.data),ie.create({type:"positive",message:"Allowance successfully created",timeout:1e3})}catch(n){console.log(n);let d="An error occurred. Please try again.";n.response&&n.response.status===409?d="Allowance for this employee already exists.":n.response&&n.response.status===422&&(d="Invalid data. Please check the inputs."),ie.create({type:"negative",message:d,timeout:1e3})}},fetchEmployeeAllowance:async()=>{try{const s=await G.get("/api/employee-allowance");u.value=s.data}catch(s){console.log("error fetching allowance",s)}},searchAllowance:async s=>{try{console.log("Searching for employee with keyword:",s);const n=await G.post(`/api/search-allowance?keyword=${s}`);console.log("Allowance response:",n),u.value=n.data}catch(n){console.error("Error searching employee:",n)}}}});const Rl=f=>(oe("data-v-00bc7d3c"),f=f(),ne(),f),Bl=Rl(()=>t("div",{class:"text-h5 q-mr-md"},"\u{1F4BC} Add Employee Allowance",-1)),Ml={key:0,class:"custom-list z-top"},Fl={class:"q-gutter-md"},Ol={__name:"AddAllowance",setup(f){const u=me(),_=W(()=>u.employees),c=We(),g=W(()=>c.allowances),s=y(""),n=y(!1),d=y(!1),p=y(!1),r=()=>{n.value=!0},b=async()=>{s.value.trim()&&(p.value=!0,await u.searchEmployee(s.value),p.value=!1)},x=h=>{console.log("Selected Employee:",h),v.employee_id=h.id,v.employee_name=`${h.firstname} ${h.middlename?h.middlename.charAt(0)+".":""} ${h.lastname}`,v.employee_position=h.position,s.value="",console.log("Filled Designation Data:",v)},v=we({employee_id:"",employee_name:"",employee_position:"",amount:""}),k=()=>{v.employee_id="",v.employee_name="",v.employee_position="",v.amount=""},V=async()=>{d.value=!0;try{const h=await c.createEmployeeAllowance(v);console.log("data to be save",h),k(),g.value=await c.fetchEmployeeAllowance(),n.value=!1}catch(h){console.log(h)}finally{d.value=!1}};return(h,l)=>(m(),P("div",null,[e(O,{padding:"sm md",label:"Add Allowance",icon:"add_circle",size:"md",class:"gradient-btn text-white",onClick:r}),e(ye,{modelValue:n.value,"onUpdate:modelValue":l[4]||(l[4]=o=>n.value=o),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:a(()=>[e(L,{style:{width:"400px","max-width":"80vw"}},{default:a(()=>[e(B,{class:"row items-center q-px-md q-py-sm gradient-btn text-white"},{default:a(()=>[Bl,e($e),ae(e(O,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(B,null,{default:a(()=>[e(A,{modelValue:s.value,"onUpdate:modelValue":[l[0]||(l[0]=o=>s.value=o),b],label:"Search Employee",outlined:"",dense:"",rounded:"",debounce:"500",placeholder:"Enter name"},{append:a(()=>[p.value?(m(),T(ce,{key:1,color:"grey",size:"sm"})):(m(),T(Q,{key:0,name:"search"}))]),default:a(()=>[s.value?(m(),P("div",Ml,[e(L,null,{default:a(()=>[e(De,{separator:""},{default:a(()=>{var o;return[(o=_.value)!=null&&o.length?(m(!0),P(K,{key:1},fe(_.value,w=>(m(),T(te,{onClick:i=>x(w),key:w.id,clickable:""},{default:a(()=>[e(Se,null,{default:a(()=>[R(C(`${w.firstname} ${w.middlename?w.middlename.charAt(0)+".":""} ${w.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(m(),T(te,{key:0},{default:a(()=>[R(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):re("",!0)]),_:1},8,["modelValue"])]),_:1}),e(B,null,{default:a(()=>[t("div",Fl,[e(A,{modelValue:v.employee_name,"onUpdate:modelValue":l[1]||(l[1]=o=>v.employee_name=o),outlined:"",dense:"",readonly:"",label:"Name"},null,8,["modelValue"]),e(A,{modelValue:v.employee_position,"onUpdate:modelValue":l[2]||(l[2]=o=>v.employee_position=o),outlined:"",dense:"",readonly:"",label:"Position"},null,8,["modelValue"])])]),_:1}),e(B,null,{default:a(()=>[e(A,{modelValue:v.amount,"onUpdate:modelValue":l[3]||(l[3]=o=>v.amount=o),outlined:"",dense:"",label:"Allowance amount"},null,8,["modelValue"])]),_:1}),e(xe,null,{default:a(()=>[e(O,{size:"md",padding:"xs md",label:"save","icon-right":"send",class:"gradient-btn text-white",onClick:V,loading:d.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var Ll=Y(Ol,[["__scopeId","data-v-00bc7d3c"]]);const jl={__name:"SearchAllowance",setup(f){const u=We();W(()=>u.allowances);const _=y(""),c=y(!1),g=async()=>{c.value=!0,await u.searchAllowance(_.value),c.value=!1};return(s,n)=>(m(),P("div",null,[e(A,{modelValue:_.value,"onUpdate:modelValue":[n[0]||(n[0]=d=>_.value=d),g],outlined:"",dense:"",flat:"",label:"Search",debounce:"1000",style:{width:"300px"}},{append:a(()=>[t("div",null,[c.value?(m(),T(ce,{key:1,color:"grey",size:"sm"})):(m(),T(Q,{key:0,name:"search"}))])]),_:1},8,["modelValue"])]))}};const Ql={class:"row justify-between q-mb-md",align:"right"},Hl={__name:"AllowanceTable",setup(f){const u=We(),_=W(()=>u.allowances),c=y({rowsPerPage:0});se(async()=>{await g()});const g=async()=>{try{_.value=await u.fetchEmployeeAllowance(),console.log("allowance",_.value)}catch(r){console.log("Error fetching allowance",r)}},s=r=>{const b=V=>V?V.charAt(0).toUpperCase()+V.slice(1).toLowerCase():"",x=r.firstname?b(r.firstname):"No Firstname",v=r.middlename?b(r.middlename).charAt(0)+".":"",k=r.lastname?b(r.lastname):"No Lastname";return`${x} ${v} ${k}`.trim()},n=r=>{if(!r)return" - - ";const b=new Date(r);return isNaN(b.getTime())?" - - ":b.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},d=r=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(r),p=[{name:"date",required:!0,label:"Date",align:"center",field:r=>n(r.created_at)},{name:"name",required:!0,label:"Name",align:"center",field:r=>s(r.employee)},{name:"amount",required:!0,label:"Amount",align:"center",field:r=>d(r.amount)},{name:"actions",required:!0,label:"Actions",align:"center",field:"actions"}];return(r,b)=>(m(),P(K,null,[t("div",Ql,[t("div",null,[e(Ll)]),e(jl)]),e(ke,{class:"sticky-header",rows:_.value,columns:p,"row-key":"name",pagination:c.value,"onUpdate:pagination":b[0]||(b[0]=x=>c.value=x),"hide-bottom":""},{"body-cell-actions":a(x=>[e(X,{props:x},{default:a(()=>[e(O,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:""},{default:a(()=>[e(_e,{class:"bg-positive",delay:200},{default:a(()=>[R("Edit")]),_:1})]),_:1})]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])],64))}};var Kl=Y(Hl,[["__scopeId","data-v-718dbada"]]);const Ye=Ve("benefits",()=>{const f=y(null),u=y([]);return{benefit:f,benefits:u,fetchEmployeeBenefit:async()=>{try{const s=await G.get("/api/employee-benefit");u.value=s.data}catch(s){console.log("error fetching benefits",s)}},createEmployeeBenefit:async s=>{try{const n=await G.post("/api/employee-benefit",s);u.value.unshift(n.data),ie.create({type:"positive",message:"Employee deductions successfully created",setTimeout:1e3})}catch(n){console.log(n);let d="An error occurred. Please try again.";n.response&&n.response.status===409?d="Allowance for this employee already exists.":n.response&&n.response.status===422&&(d="Invalid data. Please check the inputs."),ie.create({type:"negative",message:d,timeout:5e3})}},searchBenefit:async s=>{try{console.log("Searching for employee with keyword:",s);const n=await G.post(`/api/search-benefit?keyword=${s}`);console.log("Allowance response:",n.data),u.value=n.data}catch(n){console.error("Benefits error",n)}}}});const Xe=f=>(oe("data-v-5d754b74"),f=f(),ne(),f),Wl=Xe(()=>t("div",{class:"text-h5 q-mr-md"},"\u{1F4BC} Add Employee Deductions",-1)),Yl={key:0,class:"custom-list z-top"},Xl={class:"row q-gutter-md text-subtitle1"},Jl=Xe(()=>t("div",null,"Name:",-1)),Gl={class:"text-weight-medium"},Zl={class:"row q-gutter-md text-subtitle1"},eo=Xe(()=>t("div",null,"Position:",-1)),to={class:"text-weight-medium"},ao={class:"q-gutter-y-md"},lo={__name:"AddDeduction",setup(f){const u=me(),_=W(()=>u.employees),c=Ye(),g=W(()=>c.benefits),s=y(""),n=y(!1),d=y(!1),p=y(!1),r=()=>{p.value=!0},b=async()=>{s.value.trim()&&(d.value=!0,await u.searchEmployee(s.value),d.value=!1)},x=h=>{console.log("Selected Employee:",h),v.employee_id=h.id,v.employee_name=`${h.firstname} ${h.middlename?h.middlename.charAt(0)+".":""} ${h.lastname} `,v.employee_position=h.position,s.value="",console.log("Filled Designation Data:",v)},v=we({employee_id:"",employee_name:"",employee_position:"",sss:"",hdmf:"",phic:""}),k=()=>{v.employee_id="",v.employee_name="",v.employee_position="",v.sss="",v.hdmf="",v.phic=""},V=async()=>{console.log("deductionss:",v),n.value=!0;try{const h=await c.createEmployeeBenefit(v);console.log("deduction",h),p.value=!1,k(),g.value=await c.fetchEmployeeBenefit()}catch(h){console.log("error",h)}finally{n.value=!1}};return(h,l)=>(m(),P("div",null,[e(O,{padding:"sm md",label:"Add Benefits",icon:"add_circle",size:"md",class:"gradient-btn text-white",onClick:r}),e(ye,{modelValue:p.value,"onUpdate:modelValue":l[4]||(l[4]=o=>p.value=o),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:a(()=>[e(L,{style:{width:"400px","max-width":"80vw"}},{default:a(()=>[e(B,{class:"row items-center q-px-md q-py-sm gradient-btn text-white"},{default:a(()=>[Wl,e($e),ae(e(O,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(B,null,{default:a(()=>[e(A,{modelValue:s.value,"onUpdate:modelValue":[l[0]||(l[0]=o=>s.value=o),b],label:"Search Employee",outlined:"",rounded:"",dense:"",debounce:"500",placeholder:"Enter name"},{append:a(()=>[d.value?(m(),T(ce,{key:1,color:"grey",size:"sm"})):(m(),T(Q,{key:0,name:"search"}))]),default:a(()=>[s.value?(m(),P("div",Yl,[e(L,null,{default:a(()=>[e(De,{separator:""},{default:a(()=>{var o;return[(o=_.value)!=null&&o.length?(m(!0),P(K,{key:1},fe(_.value,w=>(m(),T(te,{onClick:i=>x(w),key:w.id,clickable:""},{default:a(()=>[e(Se,null,{default:a(()=>[R(C(`${w.firstname} ${w.middlename?w.middlename.charAt(0)+".":""} ${w.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(m(),T(te,{key:0},{default:a(()=>[R(" No employee record ")]),_:1}))]}),_:1})]),_:1})])):re("",!0)]),_:1},8,["modelValue"])]),_:1}),e(B,null,{default:a(()=>[t("div",Xl,[Jl,t("div",Gl,C(v.employee_name?v.employee_name:"-------"),1)]),t("div",Zl,[eo,t("div",to,C(v.employee_position?v.employee_position:"-------"),1)])]),_:1}),e(B,null,{default:a(()=>[t("div",ao,[t("div",null,[e(A,{modelValue:v.sss,"onUpdate:modelValue":l[1]||(l[1]=o=>v.sss=o),outlined:"",label:"SSS (Social Security System )"},null,8,["modelValue"])]),t("div",null,[e(A,{modelValue:v.hdmf,"onUpdate:modelValue":l[2]||(l[2]=o=>v.hdmf=o),outlined:"",label:"HDMF (Pag-IBIG Fund)"},null,8,["modelValue"])]),t("div",null,[e(A,{modelValue:v.phic,"onUpdate:modelValue":l[3]||(l[3]=o=>v.phic=o),outlined:"",label:"PHIC (Philippine Health Insurance Corporation)"},null,8,["modelValue"])])])]),_:1}),e(xe,null,{default:a(()=>[e(O,{size:"md",padding:"xs md",label:"save","icon-right":"send",class:"gradient-btn text-white",onClick:V,loading:n.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var oo=Y(lo,[["__scopeId","data-v-5d754b74"]]);const no={__name:"SearchBenefit",setup(f){const u=Ye(),_=y(""),c=y(!1),g=async()=>{c.value=!0,await u.searchBenefit(_.value),c.value=!1};return(s,n)=>(m(),P("div",null,[e(A,{modelValue:_.value,"onUpdate:modelValue":[n[0]||(n[0]=d=>_.value=d),g],outlined:"",dense:"",flat:"",label:"Search",style:{width:"300px"}},{append:a(()=>[t("div",null,[c.value?(m(),T(ce,{key:1,color:"grey",size:"sm"})):(m(),T(Q,{key:0,name:"search"}))])]),_:1},8,["modelValue"])]))}};const so={class:"row justify-between q-mb-md",align:"right"},io={class:"row q-gutter-md"},ro={__name:"BenefitsTable",setup(f){const u=Ye(),_=W(()=>u.benefits),c=y({rowsPerPage:0});se(async()=>{await g()});const g=async()=>{try{_.value=await u.fetchEmployeeBenefit(),console.log("benefit",_.value)}catch(r){console.log("error fetching",r)}},s=r=>{const b=V=>V?V.charAt(0).toUpperCase()+V.slice(1).toLowerCase():"",x=r.firstname?b(r.firstname):"No Firstname",v=r.middlename?b(r.middlename).charAt(0)+".":"",k=r.lastname?b(r.lastname):"No Lastname";return`${x} ${v} ${k}`.trim()},n=r=>{if(!r)return" - - ";const b=new Date(r);return isNaN(b.getTime())?" - - ":b.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},d=r=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(r),p=[{name:"date",required:!0,label:"Date",align:"left",field:r=>n(r.created_at)},{name:"name",required:!0,label:"Name",align:"left",field:r=>s(r.employee)},{name:"sss",label:"Social Security System (SSS)",align:"center",field:r=>d(r.sss)},{name:"hdmf",label:"Pag-IBIG Fund (HDMF)",align:"center",field:r=>d(r.hdmf)},{name:"phic",label:"Phil - Health (PHIC)",align:"center",field:r=>d(r.phic)}];return(r,b)=>(m(),P(K,null,[t("div",so,[t("div",io,[t("div",null,[e(oo)])]),e(no)]),e(ke,{class:"sticky-header",rows:_.value,columns:p,"row-key":"name","hide-bottom":"",pagination:c.value,"onUpdate:pagination":b[0]||(b[0]=x=>c.value=x)},null,8,["rows","pagination"])],64))}};var uo=Y(ro,[["__scopeId","data-v-1738f060"]]);const ct=Ve("uniform",()=>{const f=y(null),u=y([]);return{uniform:f,uniforms:u,fetchUniform:async()=>{try{const s=await G.get("/api/uniform");u.value=s.data}catch(s){console.log("error fetching uniform",s)}},createUniforms:async s=>{try{const n=await G.post("/api/uniform",s);u.value.unshift(n.data),ie.create({type:"positive",message:"Allowance successfully created",timeout:1e3})}catch(n){console.log(n);let d="An error occurred. Please try again.";n.response&&n.response.status===409?d="Allowance for this employee already exists.":n.response&&n.response.status===422&&(d="Invalid data. Please check the inputs."),ie.create({type:"negative",message:d,timeout:1e3})}},searchUniform:async s=>{try{console.log("Searching with keyword:",s);const n=await G.post(`/api/search-uniform?keyword=${s}`);console.log("UNIFORm response:",n),u.value=n.data}catch(n){console.error("Error searching employee:",n)}}}});const Ae=f=>(oe("data-v-2b527d9a"),f=f(),ne(),f),co=Ae(()=>t("div",{class:"text-h5 q-mr-md"},"\u{1F454} Add Uniform",-1)),mo={key:0,class:"custom-list z-top"},po={class:"row q-gutter-md text-subtitle1"},_o=Ae(()=>t("div",null,"Name:",-1)),vo={class:"text-weight-medium"},fo={class:"row q-gutter-md text-subtitle1"},yo=Ae(()=>t("div",null,"Position:",-1)),ho={class:"text-weight-medium"},go={class:"row"},bo={class:"col-6"},wo={key:0,class:"q-gutter-sm q-pa-md"},xo={key:0,class:"row q-gutter-x-sm"},$o={class:"col-6"},Vo={key:0,class:"q-gutter-sm q-pa-md"},ko={key:0,class:"row q-gutter-x-sm"},So={class:"row justify-between q-gutter-sm"},Do=Ae(()=>t("div",{class:"q-mt-lg text-subtitle1"},"Number of Payments",-1)),Ao=Ae(()=>t("div",{class:"q-mt-lg text-subtitle1"},"Total Amount",-1)),qo=Ae(()=>t("div",{class:"q-mt-lg text-subtitle1"},"Payments Per Payroll",-1)),Eo=Ae(()=>t("div",{class:"row q-gutter-sm"},null,-1)),Po={__name:"AddUniform",setup(f){const u=me(),_=W(()=>u.employees),c=ct(),g=W(()=>c.uniforms),s=y(""),n=y(!1),d=y(!1),p=y(!1),r=y(0),b=y(0),x=y(!1),v=y(!1),k=()=>{n.value=!0},V=async()=>{s.value.trim()&&(v.value=!0,await u.searchEmployee(s.value),v.value=!1)},h=I=>{console.log("Selected Employee:",I),l.employee_id=I.id,l.employee_name=`${I.firstname} ${I.middlename?I.middlename.charAt(0)+".":""} ${I.lastname} `,l.employee_position=I.position,s.value="",console.log("Filled Designation Data:",l)},l=we({employee_id:"",employee_name:"",employee_position:"",tShirtsize:"",pantsSize:"",tShirtPcs:0,tShirtPrice:0,pantsPcs:0,pantsPrice:0,numberOfPayments:1}),o=()=>{l.employee_id="",l.employee_name="",l.employee_position="",d.value=!1,p.value=!1,r.value=0,b.value=0,i(),w()},w=()=>{l.tShirtPcs="",l.tShirtsize="",l.tShirtPrice=""},i=()=>{l.pantsSize="",l.pantsPcs="",l.pantsPrice=""};Be(p,I=>{I||i()}),Be(d,I=>{I||w()}),Be([()=>l.tShirtPrice,()=>l.tShirtPcs,()=>l.pantsPrice,()=>l.pantsPcs],()=>{r.value=l.tShirtPrice*l.tShirtPcs+l.pantsPrice*l.pantsPcs},{immediate:!0}),Be([r,()=>l.numberOfPayments],()=>{b.value=Math.round(r.value/(l.numberOfPayments||1))},{immediate:!0});const z=async()=>{const I={employee_id:l.employee_id,employee_name:l.employee_name,employee_position:l.employee_position,tShirtsize:l.tShirtsize,pantsSize:l.pantsSize,tShirtPcs:l.tShirtPcs,tShirtPrice:l.tShirtPrice,pantsPcs:l.pantsPcs,pantsPrice:l.pantsPrice,totalAmount:r.value,paymentPerPayroll:b.value,numberOfPayments:l.numberOfPayments};console.log("payload",I);try{x.value=!0,await c.createUniforms(I),n.value=!1,o(),g.value=await c.fetchUniform()}catch($){console.log($),ie.create({type:"negative",message:"error"})}finally{x.value=!1}};return(I,$)=>(m(),P("div",null,[e(O,{padding:"sm md",label:"Add Uniform",icon:"add_circle",size:"md",class:"gradient-btn text-white",onClick:k}),e(ye,{modelValue:n.value,"onUpdate:modelValue":$[18]||($[18]=D=>n.value=D),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:a(()=>[e(L,{style:{width:"600px","max-width":"80vw"}},{default:a(()=>[e(B,{class:"row items-center q-px-md q-py-sm gradient-btn text-white"},{default:a(()=>[co,e($e),ae(e(O,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(B,null,{default:a(()=>[e(A,{modelValue:s.value,"onUpdate:modelValue":[$[0]||($[0]=D=>s.value=D),V],label:"Search Employee",outlined:"",rounded:"",dense:"",debounce:"500",placeholder:"Enter name"},{append:a(()=>[v.value?(m(),T(ce,{key:1,color:"grey",size:"sm"})):(m(),T(Q,{key:0,name:"search"}))]),default:a(()=>[s.value?(m(),P("div",mo,[e(L,null,{default:a(()=>[e(De,{separator:""},{default:a(()=>{var D;return[(D=_.value)!=null&&D.length?(m(!0),P(K,{key:1},fe(_.value,J=>(m(),T(te,{onClick:S=>h(J),key:J.id,clickable:""},{default:a(()=>[e(Se,null,{default:a(()=>[R(C(`${J.firstname} ${J.middlename?J.middlename.charAt(0)+".":""} ${J.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(m(),T(te,{key:0},{default:a(()=>[R(" No employee record ")]),_:1}))]}),_:1})]),_:1})])):re("",!0)]),_:1},8,["modelValue"])]),_:1}),e(B,null,{default:a(()=>[t("div",po,[_o,t("div",vo,C(l.employee_name?l.employee_name:"-------"),1)]),t("div",fo,[yo,t("div",ho,C(l.employee_position?l.employee_position:"-------"),1)])]),_:1}),e(B,null,{default:a(()=>[t("div",go,[t("div",bo,[e(nt,{"keep-color":"",modelValue:d.value,"onUpdate:modelValue":$[1]||($[1]=D=>d.value=D),label:"T-Shirt",color:"red"},null,8,["modelValue"]),d.value?(m(),P("div",wo,[t("div",null,[e(be,{"keep-color":"",modelValue:l.tShirtsize,"onUpdate:modelValue":$[2]||($[2]=D=>l.tShirtsize=D),val:"18",label:"18",color:"teal"},null,8,["modelValue"]),e(be,{"keep-color":"",modelValue:l.tShirtsize,"onUpdate:modelValue":$[3]||($[3]=D=>l.tShirtsize=D),val:"S",label:"S",color:"orange"},null,8,["modelValue"]),e(be,{"keep-color":"",modelValue:l.tShirtsize,"onUpdate:modelValue":$[4]||($[4]=D=>l.tShirtsize=D),val:"M",label:"M",color:"red"},null,8,["modelValue"]),e(be,{"keep-color":"",modelValue:l.tShirtsize,"onUpdate:modelValue":$[5]||($[5]=D=>l.tShirtsize=D),val:"L",label:"L",color:"cyan"},null,8,["modelValue"])]),l.tShirtsize?(m(),P("div",xo,[e(A,{modelValue:l.tShirtPcs,"onUpdate:modelValue":$[6]||($[6]=D=>l.tShirtPcs=D),dense:"",outlined:"",label:"pcs",style:{width:"100px"}},null,8,["modelValue"]),e(A,{modelValue:l.tShirtPrice,"onUpdate:modelValue":$[7]||($[7]=D=>l.tShirtPrice=D),dense:"",outlined:"",label:"price",style:{width:"100px"}},null,8,["modelValue"])])):re("",!0)])):re("",!0)]),t("div",$o,[e(nt,{"keep-color":"",modelValue:p.value,"onUpdate:modelValue":$[8]||($[8]=D=>p.value=D),label:"Pants",color:"brown-6"},null,8,["modelValue"]),p.value?(m(),P("div",Vo,[e(be,{"keep-color":"",modelValue:l.pantsSize,"onUpdate:modelValue":$[9]||($[9]=D=>l.pantsSize=D),val:"M",label:"M",color:"red"},null,8,["modelValue"]),e(be,{"keep-color":"",modelValue:l.pantsSize,"onUpdate:modelValue":$[10]||($[10]=D=>l.pantsSize=D),val:"L",label:"L",color:"cyan"},null,8,["modelValue"]),e(be,{"keep-color":"",modelValue:l.pantsSize,"onUpdate:modelValue":$[11]||($[11]=D=>l.pantsSize=D),val:"XL",label:"XL",color:"purple-6"},null,8,["modelValue"]),e(be,{"keep-color":"",modelValue:l.pantsSize,"onUpdate:modelValue":$[12]||($[12]=D=>l.pantsSize=D),val:"XXL",label:"XXL",color:"deep-orange-13"},null,8,["modelValue"]),l.pantsSize?(m(),P("div",ko,[e(A,{modelValue:l.pantsPcs,"onUpdate:modelValue":$[13]||($[13]=D=>l.pantsPcs=D),dense:"",outlined:"",label:"pcs",style:{width:"100px"}},null,8,["modelValue"]),e(A,{modelValue:l.pantsPrice,"onUpdate:modelValue":$[14]||($[14]=D=>l.pantsPrice=D),dense:"",outlined:"",label:"price",style:{width:"100px"}},null,8,["modelValue"])])):re("",!0)])):re("",!0)])])]),_:1}),e(B,null,{default:a(()=>[t("div",So,[t("div",null,[Do,e(A,{modelValue:l.numberOfPayments,"onUpdate:modelValue":$[15]||($[15]=D=>l.numberOfPayments=D),outlined:"",flat:"",dense:""},null,8,["modelValue"])]),t("div",null,[Ao,e(A,{modelValue:r.value,"onUpdate:modelValue":$[16]||($[16]=D=>r.value=D),outlined:"",readonly:"",flat:"",dense:""},null,8,["modelValue"]),qo,e(A,{modelValue:b.value,"onUpdate:modelValue":$[17]||($[17]=D=>b.value=D),outlined:"",readonly:"",flat:"",dense:""},null,8,["modelValue"])])]),Eo]),_:1}),e(xe,null,{default:a(()=>[e(O,{size:"md",padding:"xs md",label:"save","icon-right":"send",class:"gradient-btn text-white",onClick:z,loading:x.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var Uo=Y(Po,[["__scopeId","data-v-2b527d9a"]]);const To={class:"row justify-between q-mb-md",align:"right"},Co={class:"row q-gutter-md"},zo=t("div",{class:"q-pb-sm text-center text-h6 text-weight-bold text-subtitle2"}," T-Shirt ",-1),Io={class:"row justify-between"},No=t("div",null,"Size :",-1),Ro={class:"row justify-between"},Bo=t("div",null,"PCS :",-1),Mo={class:"row justify-between"},Fo=t("div",null,"PRICE :",-1),Oo=t("div",{class:"q-pb-sm text-center text-h6 text-weight-bold text-subtitle2"}," Pants ",-1),Lo={class:"row justify-between"},jo=t("div",null,"Size :",-1),Qo={class:"row justify-between"},Ho=t("div",null,"PCS :",-1),Ko={class:"row justify-between"},Wo=t("div",null,"PRICE :",-1),Yo={__name:"UniformTable",setup(f){const u=ct(),_=y(""),c=W(()=>u.uniforms),g=y(!1),s=y({rowsPerPage:0});se(async()=>{await n()});const n=async()=>{try{c.value=await u.fetchUniform(),console.log("uniform",c.value)}catch(k){console.log("error fetching madepakeer",k)}};let d;const p=()=>{g.value=!0,clearTimeout(d),d=setTimeout(()=>{g.value=!1},500)},r=k=>{const V=w=>w?w.charAt(0).toUpperCase()+w.slice(1).toLowerCase():"",h=k.firstname?V(k.firstname):"No Firstname",l=k.middlename?V(k.middlename).charAt(0)+".":"",o=k.lastname?V(k.lastname):"No Lastname";return`${h} ${l} ${o}`.trim()},b=k=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(k),x=k=>{if(!k)return" - - ";const V=new Date(k);return isNaN(V.getTime())?" - - ":V.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},v=[{name:"date",required:!0,label:"Date",align:"left",field:k=>x(k.created_at)},{name:"name",required:!0,label:"Name",align:"left",field:k=>r(k.employee)},{name:"number_of_payments",required:!0,label:"Number of Payments",align:"center",field:"number_of_payments"},{name:"total_amount",required:!0,label:"Total Amount",align:"center",field:k=>b(k.total_amount)},{name:"payments_per_payroll",required:!0,label:"Payments Per Payroll",align:"center",field:k=>b(k.payments_per_payroll)},{name:"t_shirt",label:"T-Shirt",align:"center",field:"t_shirt"},{name:"pants",label:"Pants",align:"center",field:"pants"}];return(k,V)=>(m(),P(K,null,[t("div",To,[t("div",Co,[e(Uo)]),e(A,{modelValue:_.value,"onUpdate:modelValue":[V[0]||(V[0]=h=>_.value=h),p],outlined:"",dense:"",flat:"",label:"Search",style:{width:"300px"}},{append:a(()=>[t("div",null,[g.value?(m(),T(ce,{key:1,size:"sm"})):(m(),T(Q,{key:0,name:"search"}))])]),_:1},8,["modelValue"])]),e(ke,{class:"sticky-header",filter:_.value,rows:c.value,columns:v,"row-key":"name",pagination:s.value,"onUpdate:pagination":V[1]||(V[1]=h=>s.value=h),"hide-bottom":""},{"body-cell-t_shirt":a(h=>[e(X,{props:h},{default:a(()=>[e(_e,{offset:[0,10],delay:600,class:"bg-info text-dark text-subtitle1",style:{width:"200px"}},{default:a(()=>[zo,e(ve,{class:"q-mb-md",color:"yellow"}),(m(!0),P(K,null,fe(h.row.t_shirt,l=>(m(),P("div",{class:"",key:l.size},[t("div",Io,[No,t("div",null,C(l.size),1)]),t("div",Ro,[Bo,t("div",null,C(l.pcs),1)]),t("div",Mo,[Fo,t("div",null,C(b(l.price)),1)])]))),128))]),_:2},1024),e(Me,{square:"",outline:"",color:"red-6",class:"text-white"},{default:a(()=>[R(C(h.row.t_shirt.length)+" T-Shirt ",1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-pants":a(h=>[e(X,{props:h},{default:a(()=>[e(_e,{offset:[0,10],delay:600,class:"bg-info text-dark text-subtitle1",style:{width:"200px"}},{default:a(()=>[Oo,e(ve,{class:"q-mb-md",color:"yellow"}),(m(!0),P(K,null,fe(h.row.pants,l=>(m(),P("div",{class:"",key:l.size},[t("div",Lo,[jo,t("div",null,C(l.size),1)]),t("div",Qo,[Ho,t("div",null,C(l.pcs),1)]),t("div",Ko,[Wo,t("div",null,C(b(l.price)),1)])]))),128))]),_:2},1024),e(Me,{square:"",outline:"",color:"brown-6",class:"text-white"},{default:a(()=>[R(C(h.row.pants.length)+" Pants ",1)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])],64))}},Je=Ve("cash-advance",()=>{const f=y(null),u=y([]);return{cashAdvance:f,cashAdvances:u,createCashAdvance:async s=>{try{const n=await G.post("/api/cash-advance",s);u.value.unshift(n.data),ie.create({type:"positive",message:"Cash Advance save",setTimeout:1e3})}catch(n){console.log("CA error",n),ie.create({type:"negative",message:"Error saving Cash Advance"})}},fetchCashAdvance:async()=>{try{const s=await G.get("/api/cash-advance");u.value=s.data}catch(s){console.log("===================================="),console.log(s),console.log("====================================")}},searchCashAdvance:async s=>{try{console.log("Searching for employee with keyword:",s);const n=await G.post(`/api/search-cash-advance?keyword=${s}`);console.log("CA response:",n),u.value=n.data}catch(n){console.error("Error searching CA:",n)}}}});const Ge=f=>(oe("data-v-084981bb"),f=f(),ne(),f),Xo=Ge(()=>t("div",{class:"text-h5 q-mr-md"},"\u{1F4B2} Add Cash Advance",-1)),Jo={key:0,class:"custom-list z-top"},Go={class:"row q-gutter-md text-subtitle1"},Zo=Ge(()=>t("div",null,"Name:",-1)),en={class:"text-weight-meduim"},tn={class:"row q-gutter-md text-subtitle1"},an=Ge(()=>t("div",null,"Position:",-1)),ln={class:"text-weight-meduim"},on={class:"q-gutter-y-md"},nn={__name:"CashAdvanceButton",setup(f){const u=me(),_=W(()=>u.employees),c=Je(),g=W(()=>c.cashAdvances),s=y(""),n=y(!1),d=y(!1),p=y(!1),r=()=>{p.value=!0},b=async()=>{s.value.trim()&&(d.value=!0,await u.searchEmployee(s.value),d.value=!1)},x=h=>{console.log("Selected Employee:",h),v.employee_id=h.id,v.employee_name=`${h.firstname} ${h.middlename?h.middlename.charAt(0)+".":""} ${h.lastname} `,v.employee_position=h.position,s.value="",console.log("Filled Designation Data:",v)},v=we({employee_id:"",employee_name:"",employee_position:"",amount:"",reason:""}),k=()=>{v.employee_id="",v.employee_name="",v.employee_position="",v.amount="",v.reason=""},V=async()=>{console.log("cashAdvance",v),n.value=!0;try{const h=await c.createCashAdvance(v)}catch(h){console.log(h)}finally{n.value=!1}k(),g.value=await c.fetchCashAdvance(),p.value=!1};return(h,l)=>(m(),P("div",null,[e(O,{padding:"sm md",label:"Cash Advance",icon:"attach_money",size:"md",class:"gradient-btn text-white",onClick:r}),e(ye,{modelValue:p.value,"onUpdate:modelValue":l[3]||(l[3]=o=>p.value=o),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:a(()=>[e(L,{style:{width:"400px","max-width":"80vw"}},{default:a(()=>[e(B,{class:"row items-center q-px-md q-py-sm gradient-btn text-white"},{default:a(()=>[Xo,e($e),ae(e(O,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(B,null,{default:a(()=>[e(A,{modelValue:s.value,"onUpdate:modelValue":[l[0]||(l[0]=o=>s.value=o),b],label:"Search Employee",outlined:"",rounded:"",dense:"",debounce:"500",placeholder:"Enter name"},{append:a(()=>[d.value?(m(),T(ce,{key:1,color:"grey",size:"sm"})):(m(),T(Q,{key:0,name:"search"}))]),default:a(()=>[s.value?(m(),P("div",Jo,[e(L,null,{default:a(()=>[e(De,{separator:""},{default:a(()=>{var o;return[(o=_.value)!=null&&o.length?(m(!0),P(K,{key:1},fe(_.value,w=>(m(),T(te,{onClick:i=>x(w),key:w.id,clickable:""},{default:a(()=>[e(Se,null,{default:a(()=>[R(C(`${w.firstname} ${w.middlename?w.middlename.charAt(0)+".":""} ${w.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(m(),T(te,{key:0},{default:a(()=>[R(" No Employee record ")]),_:1}))]}),_:1})]),_:1})])):re("",!0)]),_:1},8,["modelValue"])]),_:1}),e(B,null,{default:a(()=>[t("div",Go,[Zo,t("div",en,C(v.employee_name?v.employee_name:"-------"),1)]),t("div",tn,[an,t("div",ln,C(v.employee_position?v.employee_position:"-------"),1)])]),_:1}),e(B,null,{default:a(()=>[t("div",on,[t("div",null,[e(A,{modelValue:v.amount,"onUpdate:modelValue":l[1]||(l[1]=o=>v.amount=o),outlined:"",label:"Amount"},null,8,["modelValue"])]),t("div",null,[e(A,{modelValue:v.reason,"onUpdate:modelValue":l[2]||(l[2]=o=>v.reason=o),filled:"",type:"textarea",outlined:"",label:"Reason"},null,8,["modelValue"])])])]),_:1}),e(xe,null,{default:a(()=>[e(O,{size:"md",padding:"xs md",label:"save","icon-right":"send",class:"gradient-btn text-white",loading:n.value,onClick:V},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var sn=Y(nn,[["__scopeId","data-v-084981bb"]]);const rn={__name:"SearchCashAdvance",setup(f){const u=Je(),_=y(""),c=y(!1),g=async()=>{c.value=!0,await u.searchCashAdvance(_.value),c.value=!1};return(s,n)=>(m(),P("div",null,[e(A,{modelValue:_.value,"onUpdate:modelValue":[n[0]||(n[0]=d=>_.value=d),g],outlined:"",dense:"",flat:"",label:"Search",style:{width:"300px"}},{append:a(()=>[t("div",null,[c.value?(m(),T(ce,{key:1,color:"grey",size:"sm"})):(m(),T(Q,{key:0,name:"search"}))])]),_:1},8,["modelValue"])]))}},dn={class:"row justify-between q-mb-md",align:"right"},un={class:"row q-gutter-md"},cn={__name:"CashAdvanceTable",setup(f){const u=Je(),_=W(()=>u.cashAdvances),c=y({rowsPerPage:0});se(async()=>{await g()});const g=async()=>{try{_.value=await u.fetchCashAdvance(),console.log("CA",_.value)}catch(r){console.log("===================================="),console.log(r),console.log("====================================")}},s=r=>{const b=V=>V?V.charAt(0).toUpperCase()+V.slice(1).toLowerCase():"",x=r.firstname?b(r.firstname):"No Firstname",v=r.middlename?b(r.middlename).charAt(0)+".":"",k=r.lastname?b(r.lastname):"No Lastname";return`${x} ${v} ${k}`.trim()},n=r=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(r),d=r=>{if(!r)return" - - ";const b=new Date(r);return isNaN(b.getTime())?" - - ":b.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},p=[{name:"date",label:"Date",align:"left",field:r=>d(r.created_at)},{name:"name",label:"Employee Name",align:"left",field:r=>s(r.employee)},{name:"amount",label:"Amount",align:"center",field:r=>n(r.amount)},{name:"amount",label:"Amount",align:"center",field:"reason"}];return(r,b)=>(m(),P(K,null,[t("div",dn,[t("div",un,[e(sn)]),e(rn)]),e(ke,{rows:_.value,columns:p,class:"sticky-header","row-key":"name",pagination:c.value,"onUpdate:pagination":b[0]||(b[0]=x=>c.value=x),"hide-bottom":""},null,8,["rows","pagination"])],64))}};const mn={class:"q-gutter-y-sm"},pn={__name:"AllowanceDeductionPage",setup(f){const u=y("allowance");return(_,c)=>(m(),P("div",null,[t("div",mn,[e(je,{modelValue:u.value,"onUpdate:modelValue":c[0]||(c[0]=g=>u.value=g),"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:"gradient-btn"},{default:a(()=>[e(de,{class:"text-white",name:"allowance",icon:"account_balance_wallet",label:"Allowance"}),e(de,{class:"text-white",name:"benefits",icon:"view_timeline",label:"Benefits"}),e(de,{class:"text-white",name:"uniform",icon:"settings_accessibility",label:"Uniform"}),e(de,{class:"text-white",name:"cash-advance",icon:"wallet",label:"Cash Advance"})]),_:1},8,["modelValue"])]),e(Qe,{modelValue:u.value,"onUpdate:modelValue":c[1]||(c[1]=g=>u.value=g),animated:""},{default:a(()=>[e(ue,{name:"allowance"},{default:a(()=>[t("div",null,[e(Kl)])]),_:1}),e(ue,{name:"benefits"},{default:a(()=>[t("div",null,[e(uo)])]),_:1}),e(ue,{name:"uniform"},{default:a(()=>[t("div",null,[e(Yo)])]),_:1}),e(ue,{name:"cash-advance"},{default:a(()=>[t("div",null,[e(cn)])]),_:1})]),_:1},8,["modelValue"])]))}};var _n=Y(pn,[["__scopeId","data-v-2dce1b45"]]);const vn={align:"right"},fn={class:"row q-gutter-lg"},yn=["src"],hn={class:"q-mt-lg",style:{"margin-top":"60px"}},gn={class:"text-h5 text-weight-bold elegant-name text-capitalize"},bn={align:"center"},wn={__name:"PayslipPage",setup(f){const u=y([{id:1,name:"John D. Doe",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/boy-avatar.png"},{id:2,name:"Jane Doe",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar2.jpg"},{id:3,name:"Sam Smith",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar1.jpg"},{id:4,name:"Chris Evans",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar4.jpg"},{id:5,name:"Alex Doesss",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar6.jpg"},{id:6,name:"John D. Doe",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/boy-avatar.png"},{id:7,name:"Jane Doe",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar2.jpg"},{id:8,name:"Sam Smith",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar1.jpg"},{id:9,name:"Chris Evans",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar4.jpg"},{id:10,name:"Alex Doe",position:"Admin",color:"primary",avatar:"https://cdn.quasar.dev/img/avatar6.jpg"}]);return(_,c)=>(m(),P(K,null,[t("div",vn,[e(A,{class:"q-pb-lg",outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:"",style:{width:"100%","max-width":"600px"}},{append:a(()=>[e(Q,{name:"search"})]),_:1})]),t("div",fn,[(m(!0),P(K,null,fe(u.value,g=>(m(),T(bt,{key:g.id,class:"q-ma-md"},{default:a(()=>[e(L,{class:"q-pa-md q-mt-lg user-card",style:{"box-shadow":"0px 6px 14px rgba(0, 0, 0, 0.1)","border-radius":"12px",background:"linear-gradient(135deg, #f3f4f6, #e0e0e0)"}},{default:a(()=>[e(B,{class:"text-center q-pa-md",style:{position:"relative"}},{default:a(()=>[t("div",null,[e(st,{size:"80px",color:"primary","text-color":"white",class:"q-ma-lg",style:{margin:"0 auto",position:"absolute",top:"-40px",left:"50%",transform:"translateX(-50%)"}},{default:a(()=>[t("img",{src:g.avatar},null,8,yn)]),_:2},1024)]),t("div",hn,[t("div",gn,C(g.name),1),e(Me,{"text-color":"white",class:"q-mt-sm elegant-chip",style:{"background-color":"#3b82f6","font-size":"14px",padding:"5px 10px"}},{default:a(()=>[R(C(g.position),1)]),_:2},1024),e(Me,{outline:"",square:"",color:"deep-orange",class:"q-mt-sm elegant-chip"},{default:a(()=>[R(" Regular ")]),_:1})])]),_:2},1024),e(ve,{class:"q-ma-sm"}),t("div",bn,[e(O,{padding:"sm md",label:"Open Payslip",size:"md",class:"gradient-btn text-darrk"})])]),_:2},1024)]),_:2},1024))),128))])],64))}};var xn=Y(wn,[["__scopeId","data-v-64879c52"]]);const Ne=f=>(oe("data-v-0272f827"),f=f(),ne(),f),$n={class:"q-pa-md q-gutter-sm flex flex-column items-center"},Vn=Ne(()=>t("div",{class:"text-weight-bold"},"Dashboard",-1)),kn={class:"q-pa-md q-gutter-sm flex flex-column items-center"},Sn=Ne(()=>t("div",{class:"text-weight-bold text-lg"},"Employees",-1)),Dn={class:"q-pa-md q-gutter-sm flex flex-column items-center"},An=Ne(()=>t("div",{class:"text-weight-bold text-lg"},"Attendance",-1)),qn={class:"q-pa-md q-gutter-sm flex flex-column items-center"},En=Ne(()=>t("div",{class:"text-weight-bold text-lg"},"Allowances & Deductions",-1)),Pn={class:"q-pa-sm q-gutter-sm flex flex-column items-center"},Un=Ne(()=>t("div",{class:"text-weight-bold text-lg"},"Payslip",-1)),Tn={__name:"PayrollPage",setup(f){y(),y("");const u=y("dashboard");return(_,c)=>(m(),T(ft,{class:"elegant-container",flat:""},{default:a(()=>[e(je,{modelValue:u.value,"onUpdate:modelValue":c[0]||(c[0]=g=>u.value=g),dense:"",outline:"",flat:"","no-caps":"","inline-label":"",class:"user-tab justify-center q-ma-md",align:"justify","active-color":"teal","indicator-class":"q-tab-indicator-green"},{default:a(()=>[e(de,{name:"dashboard"},{default:a(()=>[t("div",$n,[e(Q,{name:"insert_chart",size:"md",class:Ue(u.value==="dashboard"?"text-teal":"text-grey-7")},null,8,["class"]),Vn])]),_:1}),e(de,{name:"employees"},{default:a(()=>[t("div",kn,[e(Q,{name:"group",size:"md",class:Ue(u.value==="employees"?"text-teal":"text-grey-7")},null,8,["class"]),Sn])]),_:1}),e(de,{name:"attendance"},{default:a(()=>[t("div",Dn,[e(Q,{name:"access_time",size:"md",class:Ue(u.value==="attendance"?"text-teal":"text-grey-7")},null,8,["class"]),An])]),_:1}),e(de,{name:"allowances"},{default:a(()=>[t("div",qn,[e(Q,{name:"add_circle_outline",size:"md",class:Ue(u.value==="allowances"?"text-teal":"text-grey-7")},null,8,["class"]),En])]),_:1}),e(de,{name:"payslip"},{default:a(()=>[t("div",Pn,[e(Q,{name:"payment",size:"md",class:Ue(u.value==="payslip"?"text-teal":"text-grey-7")},null,8,["class"]),Un])]),_:1})]),_:1},8,["modelValue"]),e(Qe,{modelValue:u.value,"onUpdate:modelValue":c[1]||(c[1]=g=>u.value=g),animated:"",style:{"background-color":"#f7f8fc"}},{default:a(()=>[e(ue,{name:"dashboard"},{default:a(()=>[e(Yt)]),_:1}),e(ue,{name:"employees"},{default:a(()=>[e(Da)]),_:1}),e(ue,{name:"attendance"},{default:a(()=>[e(Nl)]),_:1}),e(ue,{name:"allowances"},{default:a(()=>[e(_n)]),_:1}),e(ue,{name:"payslip"},{default:a(()=>[e(xn)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var cs=Y(Tn,[["__scopeId","data-v-0272f827"]]);export{cs as default};
