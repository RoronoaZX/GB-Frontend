import{r as x,t as Ie,u as X,c as P,o as g,a3 as I,J as e,f as t,w as a,a4 as Z,a5 as fe,e as M,Q as H,bg as W,$ as h,aK as Q,a1 as $e,I as S,M as N,K as j,a2 as ne,P as ye,N as qe,O as re,R as ie,L as K,ae as Ve,be as se,at as He,aI as st,a0 as J,bK as pt,bL as vt,bb as gt,aJ as at,z as Ke,a as ht}from"./index.5c763b80.js";import{Q as Ce}from"./QTab.fe90558a.js";import{Q as ft}from"./QTabs.5edb5c96.js";import{Q as be}from"./QTabPanel.b6fd737a.js";import{Q as yt}from"./QTabPanels.913dfd9d.js";import{Q as De}from"./QIntersection.079e557a.js";import{Q as Be}from"./QScrollArea.cef3ee5e.js";import{Q as Ae}from"./QSpinnerIos.7f7fb067.js";import{u as ae}from"./sales-report.184d2e48.js";import{t as ve}from"./typography-format.8e40d228.js";import{_ as Y}from"./plugin-vue_export-helper.21dcd24c.js";import{a as Oe,b as ee}from"./QMenu.8326453f.js";import{Q as et}from"./QList.cde02a42.js";import{Q as xt,a as we}from"./QSelect.7b1b7cb5.js";import{C as Re}from"./ClosePopup.412ecfce.js";import{u as bt}from"./branch.512bd764.js";import"./other-product.aab09807.js";import{a as wt,Q as Me}from"./QTable.43a7a1e4.js";import{Q as lt}from"./QBadge.0e6e25d7.js";import"./QSpinnerGears.ee2b85d7.js";import{Q as tt}from"./QInnerLoading.71487c3e.js";import{u as ge}from"./use-quasar.76df81ca.js";import{Q as Ee}from"./QChip.842a63d8.js";import{u as Ue}from"./use-dialog-plugin-component.956cb54f.js";import{u as Fe}from"./branch-product.ab4e64d2.js";import{Q as $t}from"./QTooltip.e276ad5b.js";import{Q as qt}from"./QBtnGroup.3a5706b2.js";import"./QPagination.cb1af2a7.js";import{u as kt}from"./cake-maker-report.122cc43b.js";import"./QResizeObserver.d627cfd5.js";import"./rtl.276c3f1b.js";import"./use-panel.c0fcff19.js";import"./touch.9135741d.js";import"./selection.8f86ac43.js";import"./use-render-cache.3aae9b27.js";import"./QScrollObserver.6f788c8a.js";import"./TouchPan.566d6d9d.js";import"./axios.1b8bd9b1.js";import"./date.b3e5cdd2.js";import"./position-engine.e4fbf205.js";import"./use-virtual-scroll.5fea08b3.js";import"./warehouse.a0004da2.js";import"./employee.14426893.js";import"./QVirtualScroll.57d17a11.js";import"./product.4eedc2d2.js";const de=i=>(re("data-v-3aa8caaa"),i=i(),ie(),i),Pt={class:"q-mt-md"},St={key:0,class:"text-center q-pa-md"},Ct={key:1,class:"row q-pa-lg q-gutter-y-lg"},Ot=de(()=>e("img",{src:"https://cdn.quasar.dev/img/chicken-salad.jpg"},null,-1)),Vt={class:"q-pa-xm row q-gutter-x-sm justify-between"},Rt=de(()=>e("div",null,"Quantity:",-1)),It={class:"q-pa-xm row q-gutter-x-sm justify-between"},Bt=de(()=>e("div",null,"Price:",-1)),Qt={class:"row justify-between"},Dt={class:"text-h6"},At={class:"q-mb-lg row justify-between"},Nt=de(()=>e("div",{class:"text-weight-light"},"Remainings",-1)),Tt=de(()=>e("div",{class:"text-weight-light"},"Bread Out",-1)),Lt={class:"row q-gutter-xm justify-between"},jt={class:"q-gutter-sm"},zt=de(()=>e("div",{class:"text-weight-light"},"Beginning/s",-1)),Ut=de(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),Ft={class:"q-gutter-sm"},Ht=de(()=>e("div",{class:"text-weight-light"},"New Production",-1)),Mt=de(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),Et={class:"q-gutter-sm"},Kt=de(()=>e("div",{class:"text-weight-light"},"Price",-1)),Zt={align:"right"},Jt={__name:"BreadCard",props:{filter:String},setup(i){var m,q,o;const{capitalizeFirstLetter:p,formatPrice:v}=ve(),$=ae(),c=$.user;console.log("userdataa",c);const f=((m=c.device)==null?void 0:m.reference_id)||((o=(q=c.device)==null?void 0:q.reference)==null?void 0:o.id)||"0";console.log("branchIdsss",f);const s=x(null),_=x(!1),T=x(!1),U=i,r=n=>{s.value=n,_.value=!0},u=Ie({breadSold:0,remainnings:"",beginnings:0,breadOut:""}),V=x({remainnings:"",breadOut:""}),k=n=>{V.value[n]=""},R=()=>{V.value.remainnings="",V.value.breadOut="";let n=!0;return u.remainnings||(V.value.remainnings="Remaining is required",n=!1),u.breadOut||(V.value.breadOut="Bread Out is required",n=!1),n},C=()=>{if(s.value){console.log("selectedItem",s.value);const n=parseInt(s.value.total_quantity)||0,d=parseInt(u.remainnings)||0,l=parseInt(u.breadOut)||0,w=d+l;u.breadSold=n-w}};X(()=>u.remainnings,n=>{C()}),X(()=>u.breadOut,n=>{C()});const z=P(()=>s.value?u.breadSold*s.value.price:0);P(()=>v(z.value));const D=P(()=>$.breadProducts);X(D,n=>{});const F=P(()=>{var n;return((n=D.value)==null?void 0:n.filter(d=>d.product.name.toLowerCase().includes(U.filter.toLowerCase())))||[]}),b=()=>{s.value=null,u.breadSold=0,u.remainnings="",u.beginnings=0,u.breadOut="",_.value=!1},y=()=>{var d;if(!R())return;ye.show({spinner:Ae,message:`${p(s.value.product.name)} putting to the list...`,messageColor:"white"});const n={user_id:c==null?void 0:c.data.id,branch_id:f||((d=c.device)==null?void 0:d.reference_id),product_id:s.value.product.id,name:s.value.product.name,total:s.value.total_quantity,new_production:s.value.new_production,bread_sold:u.breadSold,bread_out:u.breadOut,beginnings:s.value.beginnings,remaining:u.remainnings,price:s.value.price,sales:z.value,new_production:s.value.new_production,branch_new_production:0};console.log("report",n),$.updateBreadReport(n),qe.create({message:"Product added successfully",color:"positive",position:"top"}),setTimeout(()=>{ye.hide(),b()},500)};return(n,d)=>(g(),I(Z,null,[e("div",Pt,[t(Be,{style:{height:"700px","max-width":"1500px"}},{default:a(()=>[!F.value||F.value.length===0?(g(),I("div",St," No data available ")):(g(),I("div",Ct,[(g(!0),I(Z,null,fe(F.value,(l,w)=>(g(),M(De,{key:w,once:"",transition:"scale",class:"example-item q-gutter-sm"},{default:a(()=>[t(H,{onClick:A=>r(l),class:"q-ma-sm my-card"},{default:a(()=>[Ot,e("div",{class:W(["q-pa-sm",{"text-subtitle2":l.product.name.length<=5,"text-caption text-weight-medium":l.product.name.length>10&&l.product.name.length<=20,"text-caption":l.product.name.length>20}])},h(Q(p)(l.product.name)),3),t($e),t(S,{class:"text-subtitle2 text-weight-regular"},{default:a(()=>[e("div",Vt,[Rt,e("div",null,h(l.total_quantity),1)]),e("div",It,[Bt,e("div",null,h(Q(v)(l.price)),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]))]),_:1})]),e("div",null,[t(ne,{modelValue:_.value,"onUpdate:modelValue":d[4]||(d[4]=l=>_.value=l),persistent:""},{default:a(()=>[t(H,{class:"my-card q-pa-md",style:{width:"700px","max-width":"80vw"}},{default:a(()=>[t(S,null,{default:a(()=>[e("div",Qt,[e("div",Dt,h(Q(p)(s.value?s.value.product.name:"")),1),e("div",null,[t(N,{round:"",dense:"",flat:"",icon:"close",onClick:b})])])]),_:1}),t(S,null,{default:a(()=>[e("div",At,[e("div",null,[Nt,t(j,{modelValue:u.remainnings,"onUpdate:modelValue":[d[0]||(d[0]=l=>u.remainnings=l),d[1]||(d[1]=l=>k("remainnings"))],dense:"",outlined:"",mask:"#####",suffix:"pcs",placeholder:"0",type:"number",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[l=>!!l||"Remainnings is required"],error:!!V.value.remainnings,"error-message":V.value.remainnings?"Remainings is required":""},null,8,["modelValue","rules","error","error-message"])]),e("div",null,[Tt,t(j,{modelValue:u.breadOut,"onUpdate:modelValue":[d[2]||(d[2]=l=>u.breadOut=l),d[3]||(d[3]=l=>k("breadOut"))],dense:"",outlined:"",type:"number",mask:"#####",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[l=>!!l||"Bread out is required"],error:!!V.value.breadOut,"error-message":V.value.breadOut},null,8,["modelValue","rules","error","error-message"])])]),e("div",Lt,[e("div",jt,[zt,t(j,{dense:"",outlined:"",readonly:"",label:s.value?s.value.beginnings:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[Ut]),_:1},8,["label"])]),e("div",Ft,[Ht,t(j,{dense:"",outlined:"",readonly:"",label:s.value?s.value.new_production:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[Mt]),_:1},8,["label"])]),e("div",Et,[Kt,t(j,{dense:"",outlined:"",readonly:"",label:s.value?Q(v)(s.value.price):"",style:{width:"150px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),_:1}),t(S,null,{default:a(()=>[e("div",Zt,[t(N,{color:"red-6",label:"Ok",loading:T.value,onClick:y},null,8,["loading"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var Gt=Y(Jt,[["__scopeId","data-v-3aa8caaa"]]);const Ne={__name:"SearchEngine",emits:["update-search"],setup(i,{emit:p}){const v=x(""),$=p,c=()=>{$("update-search",v.value)};return(f,s)=>(g(),M(j,{rounded:"",outlined:"",dense:"",debounce:"300",modelValue:v.value,"onUpdate:modelValue":[s[0]||(s[0]=_=>v.value=_),c],placeholder:"Search products...",class:"q-mb-md",style:{width:"500px","max-width":"1500px","min-width":"100px"}},{append:a(()=>[t(K,{name:"search"})]),_:1},8,["modelValue"]))}};const ce=i=>(re("data-v-3f4b3c69"),i=i(),ie(),i),Wt={class:"row items-center justify-between no-wrap"},Xt={class:"text-h5 text-weight-bold"},Yt={key:0},es={key:1},ts=ce(()=>e("div",{class:"text-subtitle1 q-mt-xs opacity-80"}," Transfer products to branch locations / Add new products ",-1)),ss={class:"scrollable-content"},as=ce(()=>e("div",{class:"text-subtitle2 text-grey-8 q-mb-md"}," Select Transfer Method ",-1)),ls={class:"action-cards row q-gutter-md"},os=ce(()=>e("div",{class:"text-caption text-grey-7 q-mt-xs"}," Add product to this branch ",-1)),ns=ce(()=>e("div",{class:"text-caption text-grey-7 q-mt-xs"}," Send products to existing branch ",-1)),rs=ce(()=>e("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"}," Select Destination Branch ",-1)),is={class:"relative-position"},ds={key:0,class:"branch-dropdown z-top"},cs={key:0,class:"selected-branch q-mt-md"},us={key:0,class:"products-section"},_s=ce(()=>e("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"}," Add Products to Transfer ",-1)),ms={class:"row q-col-gutter-md items-end"},ps={class:"col-7"},vs={class:"q-ml-xl"},gs={class:"col-3"},hs={class:"col-2"},fs={key:0,class:"q-mt-sm"},ys={class:"text-subtitle2 text-grey-8 q-mb-sm"},xs=ce(()=>e("div",{class:"text-weight-medium"},"Product",-1)),bs=ce(()=>e("div",{class:"text-weight-medium"},"Price",-1)),ws=ce(()=>e("div",{class:"text-weight-medium"},"Quantity",-1)),$s=ce(()=>e("div",{class:"text-weight-medium"},"Actions",-1)),qs={class:"q-pa-xm"},ks={__name:"SendingProductsToBranchButton",props:{category:{type:String,required:!0}},setup(i){var Ze,Je,Ge,We,Xe,Ye;const p=i,v=P(()=>{var L;return{selecta:"bg-selecta",bread:"bg-bread",softdrinks:"bg-softdrinks",other:"bg-other"}[(L=p.category)==null?void 0:L.toLowerCase()]||"bg-gradient"}),$=O=>{if(!O)return"inventory_2";switch(O.toLowerCase()){case"bread":return"bakery_dining";case"selecta":return"icecream";case"nestle":return"ac_unit";case"softdrinks":return"local_drink";case"other":return"category";default:return"inventory_2"}},c=O=>{if(!O)return"grey-6";switch(O.toLowerCase()){case"bread":return"brown";case"selecta":return"red-7";case"nestle":return"info";case"softdrinks":return"purple-10";case"other":return"blue-grey-9";default:return"grey-6"}};console.log("Category Props",p.category);const{capitalizeFirstLetter:f,formatPrice:s}=ve(),{dialogRef:_,onDialogHide:T}=Ue(),U=ae(),r=P(()=>U.branchProducts);console.log("branchProducsssts",r.value);const u=bt(),V=P(()=>u.branch),k=Fe(),R=P(()=>U.user);console.log("user data",R.value);const C=((Je=(Ze=R.value)==null?void 0:Ze.device)==null?void 0:Je.reference_id)||((We=(Ge=R.value.device)==null?void 0:Ge.reference)==null?void 0:We.id)||"";console.log("branchId",C);const z=((Ye=(Xe=R.value)==null?void 0:Xe.employee)==null?void 0:Ye.employee_id)||"",D=ge(),F=x(!1),b=x(!1),y=x(!1),m=x(null),q=x(""),o=x(!1),n=x(!1),d=x(!1),l=x(null);x("");const w=x([]),A=x([]),G=async()=>{q.value.trim()?(o.value=!0,await u.search(q.value),o.value=!1,n.value=!0):(u.branch=[],n.value=!1)},le=()=>{Array.isArray(V.value)&&V.value.length>0&&(n.value=!0)},ke=P(()=>!!q.value),Pe=O=>{console.log("branchssssss",O),q.value=f(O.name),te.branch_id=O.id,d.value=!0,n.value=!1},Se=P(()=>r.value.filter(O=>O.category==="Bread")),ze=P(()=>r.value.filter(O=>O.category==="Selecta")),ot=P(()=>r.value.filter(O=>O.category==="Nestle")),nt=P(()=>r.value.filter(O=>O.category==="Softdrinks")),rt=P(()=>r.value.filter(O=>O.category==="Others")),Qe=O=>{console.log("productsssssss",O);const L=new Map;return O.forEach(E=>{L.has(E.product.id)||L.set(E.product.id,{label:f(E.product.name),value:E.product.id,price:E.price,total_quantity:E.total_quantity})}),[...L.values()].sort((E,xe)=>E.label.localeCompare(xe.label,void 0,{sensitivity:"base"}))},it=P(()=>{switch(p.category){case"Bread":return Qe(Se.value);case"Selecta":return Qe(ze.value);case"Nestle":return Qe(ot.value);case"Softdrinks":return Qe(nt.value);case"Other":return Qe(rt.value);default:return[]}});X(it,O=>{A.value=O,w.value=O},{immediate:!0});const dt=(O,L,B)=>{L(()=>{if(O==="")w.value=A.value;else{const E=O.toLowerCase();w.value=A.value.filter(xe=>xe.label.toLowerCase().indexOf(E)>-1)}})},oe=x([]),te=Ie({branch_id:C,quantity:""}),ct=()=>{console.log("Selected Product:",l.value),console.log("Action:",m.value),console.log("Branch ID:",te.branch_id),console.log("Quantity:",te.quantity);const O=oe.value.find(mt=>mt.product_id.value===l.value.value);if(O){D.notify({type:"warning",message:`${O.label} is already in the list`,icon:"warning"});return}const L=l.value,B=L.label,E=L.total_quantity||0,xe=parseInt(te.quantity);if(m.value==="send"&&xe>E){D.notify({type:"negative",message:`Only ${E} pcs available for ${B}`,icon:"error"});return}oe.value.push({product_id:L,label:L.label,quantity:xe,price:L.price}),console.log("sendingProductsList.value",oe.value),l.value=null,te.quantity=""},ut=O=>{oe.value.splice(O,1),D.notify({type:"info",message:"Product removed from list"})},_t=async()=>{if(!m.value||oe.value.length===0||m.value==="send"&&!te.branch_id){D.notify({type:"negative",message:"Please select branch and add products to the list"});return}y.value=!0;const O=m.value==="add"?C:te.branch_id,L={from_branch_id:C,to_branch_id:O,employee_id:z,category:p.category,status:"pending",action:m.value,remark:"",products:oe.value.map(B=>({product_id:B.product_id.value,quantity:B.quantity,price:B.price}))};console.log("Sending products to branch:",L);try{const B=await k.sendProductsToBranch(L);if(!B.success){D.notify({type:"negative",message:B.errors||B.message||"Something went wrong"}),B.errors&&console.error("validation errors",B.errors);return}D.notify({type:"positive",message:B.message||"Products processed successfully"}),oe.value=[],te.branch_id=""}finally{y.value=!1}};return(O,L)=>(g(),M(ne,{ref_key:"dialogRef",ref:_,onHide:Q(T),modelValue:F.value,"onUpdate:modelValue":L[6]||(L[6]=B=>F.value=B),"transition-show":"slide-up","transition-hide":"slide-down",persistent:""},{default:a(()=>[t(H,{class:"dialog-card"},{default:a(()=>[t(S,{class:W(["dialog-header",v.value])},{default:a(()=>[e("div",Wt,[e("div",Xt,[i.category!=="Bread"?(g(),I("div",Yt," Send / Add "+h(i.category)+" Products To Branch ",1)):(g(),I("div",es,"Send "+h(i.category)+" Products To Branch",1))]),Ve(t(N,{icon:"close",flat:"",dense:"",round:"",class:"close-btn"},null,512),[[Re]])]),ts]),_:1},8,["class"]),e("div",ss,[t(S,{class:"action-section q-pb-none"},{default:a(()=>[as,e("div",ls,[i.category!=="Bread"?(g(),M(H,{key:0,flat:"",bordered:"",class:W(["action-card cursor-pointer",m.value==="add"?"action-card-active":""]),onClick:L[0]||(L[0]=B=>m.value="add")},{default:a(()=>[t(S,{class:"text-center"},{default:a(()=>[t(K,{name:"add_circle",size:"lg",color:m.value==="add"?"primary":"grey-6",class:"q-mb-sm"},null,8,["color"]),e("div",{class:W(["text-subtitle2",m.value==="add"?"text-primary text-weight-medium":"text-weight-medium"])}," Add Products ",2),os]),_:1})]),_:1},8,["class"])):se("",!0),t(H,{flat:"",bordered:"",class:W(["action-card cursor-pointer",m.value==="send"?"action-card-active":""]),onClick:L[1]||(L[1]=B=>m.value="send")},{default:a(()=>[t(S,{class:"text-center"},{default:a(()=>[t(K,{name:"location_on",size:"lg",color:m.value==="send"?"primary":"grey-6",class:"q-mb-sm"},null,8,["color"]),e("div",{class:W(["text-subtitle2",m.value==="send"?"text-primary text-weight-medium":"text-weight-medium"])}," Select Branch ",2),ns]),_:1})]),_:1},8,["class"])])]),_:1}),t(He,{name:"slide-fade"},{default:a(()=>[m.value==="send"?(g(),M(S,{key:0,class:"branch-section q-pt-md"},{default:a(()=>[rs,e("div",is,[t(j,{modelValue:q.value,"onUpdate:modelValue":[L[3]||(L[3]=B=>q.value=B),G],onFocus:le,outlined:"",rounded:"",dense:"",debounce:"500",placeholder:"Search branch by name...",loading:o.value,color:"primary",class:"branch-search"},{prepend:a(()=>[t(K,{name:"search"})]),append:a(()=>[q.value?(g(),M(K,{key:0,name:"clear",class:"cursor-pointer",onClick:L[2]||(L[2]=st(B=>q.value="",["stop"]))})):se("",!0)]),_:1},8,["modelValue","loading"]),t(He,{name:"fade"},{default:a(()=>[n.value&&ke.value?(g(),I("div",ds,[t(H,{class:"shadow-3"},{default:a(()=>[t(et,{separator:""},{default:a(()=>[V.value.length?se("",!0):(g(),M(Oe,{key:0},{default:a(()=>[t(ee,null,{default:a(()=>[J(" No Branch Found ")]),_:1})]),_:1})),(g(!0),I(Z,null,fe(V.value,B=>(g(),M(Oe,{key:B.id,clickable:"",onClick:E=>Pe(B)},{default:a(()=>[t(ee,null,{default:a(()=>[J(h(Q(f)(B.name)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})])):se("",!0)]),_:1})]),O.selectedBranch?(g(),I("div",cs,[t(Ee,{color:"primary","text-color":"white",icon:"check_circle",class:"q-pa-sm"},{default:a(()=>[J(" Selected: "+h(Q(f)(O.selectedBranch.name)),1)]),_:1})])):se("",!0)]),_:1})):se("",!0)]),_:1}),t(He,{name:"slide-fade"},{default:a(()=>[m.value==="add"||m.value==="send"?(g(),I("div",us,[t(S,null,{default:a(()=>[_s,e("div",ms,[e("div",ps,[e("div",vs,h(p.category)+" Product",1),t(xt,{modelValue:l.value,"onUpdate:modelValue":L[4]||(L[4]=B=>l.value=B),options:w.value,onFilter:dt,debounce:"3000",outlined:"",dense:"",behavior:"menu","use-input":"","hide-dropdown-icon":"","input-debounce":"300",clearable:"",style:{width:"215px","max-width":"600px","min-width":"80px"},color:"primary",loading:b.value,disable:b.value},{prepend:a(()=>[t(K,{name:"inventory"})]),"no-option":a(()=>[t(Oe,null,{default:a(()=>[t(ee,{class:"text-grey"},{default:a(()=>[t(we,null,{default:a(()=>[J("No products found")]),_:1})]),_:1})]),_:1})]),option:a(({itemProps:B,opt:E})=>[t(Oe,pt(vt(B)),{default:a(()=>[t(ee,{avatar:""},{default:a(()=>[t(K,{name:$(p.category),color:c(p.category)},null,8,["name","color"])]),_:1}),t(ee,null,{default:a(()=>[t(we,null,{default:a(()=>[J(h(E.label),1)]),_:2},1024),t(we,{caption:""},{default:a(()=>[J(" \u2022 Available: "+h(E.total_quantity)+" pcs ",1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","loading","disable"])]),e("div",gs,[t(j,{modelValue:te.quantity,"onUpdate:modelValue":L[5]||(L[5]=B=>te.quantity=B),type:"number",outlined:"",dense:"",placeholder:"Quantity",min:"1",color:"primary"},null,8,["modelValue"])]),e("div",hs,[t(N,{color:"primary",icon:"add",class:"full-height",onClick:ct,disabled:!l.value||!te.quantity||te.quantity<=0,loading:b.value},null,8,["disabled","loading"])])]),l.value?(g(),I("div",fs,[t(Ee,{size:"sm",color:"blue-1","text-color":"blue-8",icon:"info"},{default:a(()=>[J(" Available : "+h(l.value.total_quantity)+" pcs ",1)]),_:1}),l.value.price?(g(),M(Ee,{key:0,size:"sm",color:"green-1","text-color":"green-8",class:"q-ml-xs"},{default:a(()=>[J(" Price: "+h(Q(s)(l.value.price)),1)]),_:1})):se("",!0)])):se("",!0)]),_:1}),t(S,{class:"products-list-card"},{default:a(()=>[e("div",ys,[J(" Products to Transfer "),t(lt,{color:"primary",class:"q-ml-sm"},{default:a(()=>[J(h(oe.value.length),1)]),_:1})]),t(H,{flat:"",bordered:"",class:"products-list-card"},{default:a(()=>[t(et,{separator:""},{default:a(()=>[t(Oe,{class:"bg-grey-2 text-grey-8"},{default:a(()=>[t(ee,{class:"col-6"},{default:a(()=>[xs]),_:1}),t(ee,{class:"col-2"},{default:a(()=>[bs]),_:1}),t(ee,{class:"col-2"},{default:a(()=>[ws]),_:1}),t(ee,{side:""},{default:a(()=>[$s]),_:1})]),_:1}),(g(!0),I(Z,null,fe(oe.value,(B,E)=>(g(),M(Oe,{key:B.product_id},{default:a(()=>[t(ee,{class:"col-6"},{default:a(()=>[t(we,{class:"text-caption"},{default:a(()=>[J(h(Q(f)(B.label)),1)]),_:2},1024)]),_:2},1024),t(ee,{class:"col-2"},{default:a(()=>[t(we,{class:"text-caption q-ml-md"},{default:a(()=>[J(h(Q(s)(B.price||0)),1)]),_:2},1024)]),_:2},1024),t(ee,{class:"col-2"},{default:a(()=>[t(we,{class:"text-caption q-ml-md"},{default:a(()=>[J(h(B.quantity)+" pcs ",1)]),_:2},1024)]),_:2},1024),t(ee,{side:""},{default:a(()=>[t(we,null,{default:a(()=>[t(N,{dense:"",flat:"",round:"",icon:"backspace",color:"grey-10",onClick:xe=>ut(E)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])):se("",!0)]),_:1})]),e("div",{class:W(["dialog-footer q-pa-sm",v.value]),align:"right"},[e("div",qs,[t(N,{color:"red-6",icon:"send",onClick:_t,loading:y.value,disabled:oe.value.length<=0},null,8,["loading","disabled"])])],2)]),_:1})]),_:1},8,["onHide","modelValue"]))}};var Te=Y(ks,[["__scopeId","data-v-3f4b3c69"]]);const Ps=i=>(re("data-v-e2c51aee"),i=i(),ie(),i),Ss={class:"row items-center justify-between"},Cs={class:"text-h6 text-weight-medium text-dark"},Os={class:"product-badge-label"},Vs={class:"row items-center justify-between"},Rs={class:"col"},Is={class:"row items-center q-mb-xs"},Bs={class:"product-category-icon q-mr-sm"},Qs={class:"product-name-compact"},Ds={class:"col-auto"},As={class:"row items-center"},Ns={class:"price-compact"},Ts=Ps(()=>e("div",{class:"divider"},null,-1)),Ls={class:"quantity-compact"},js={class:"quantity-number q-ml-md"},zs={__name:"ProceedDialog",props:{productDetails:Object,category:String},setup(i){const{dialogRef:p,onDialogHide:v}=Ue(),{formatDate:$,formatFullname:c,formatPrice:f,capitalizeFirstLetter:s}=ve();console.log("propssss",i);const T=ae(),U=P(()=>T.user);console.log("user datsssssa",U.value);const r=P(()=>{var b,y,m,q,o;return((m=(y=(b=U.value)==null?void 0:b.data)==null?void 0:y.employee)==null?void 0:m.id)||((o=(q=U.value)==null?void 0:q.data)==null?void 0:o.employee_id)||""});console.log("useeessrId",r.value);const u=Fe(),V=x(!1),k=x(""),R=x(!1),C=ge(),z=async b=>{var m,q;if(!k.value.trim())return;console.log("Remark:",k.value.trim()),console.log("product",b);const y={id:b.id,empoyee_id:r.value,branch_id:b.to_branch_id,product_id:b.product_id,quantity:b.added_product,status:"confirmed",remark:k.value.trim()};try{R.value=!0,console.log("datssa",y);const o=await u.receivedSendBranchProducts(y);console.log("Received Branch Products:",o),D(),V.value=!1,console.log("responsdssse",o),o.status===200&&C.notify({type:"positive",message:"Product received successfully"})}catch(o){console.log("Error saving remark:",o),C.notify({type:"negative",message:(q=(m=o==null?void 0:o.response)==null?void 0:m.data)==null?void 0:q.message})}finally{R.value=!1}},D=()=>{k.value=""},F=b=>({bread:"bakery_dining",selecta:"icecream",softdrinks:"local_drink",other:"category"})[b==null?void 0:b.toLowerCase()]||"inventory_2";return(b,y)=>(g(),M(ne,{ref_key:"dialogRef",ref:p,onHide:Q(v),modelValue:V.value,"onUpdate:modelValue":y[3]||(y[3]=m=>V.value=m),persistent:""},{default:a(()=>[t(H,{class:"compact-remark-dialog"},{default:a(()=>[t(S,{class:"q-pa-lg border-bottom"},{default:a(()=>[e("div",Ss,[e("div",Cs,[t(K,{name:"sticky_note_2",size:"20px",class:"q-mr-sm text-primary"}),J(" Add Remark ")]),Ve(t(N,{icon:"close",flat:"",round:"",dense:"",onClick:D},null,512),[[Re]])])]),_:1}),t(S,null,{default:a(()=>{var m,q,o,n;return[e("div",Os,[e("div",Vs,[e("div",Rs,[e("div",Is,[e("div",Bs,[t(K,{name:F(i.category),size:"16px"},null,8,["name"])]),e("div",Qs,h(Q(s)(((q=(m=i.productDetails)==null?void 0:m.product)==null?void 0:q.name)||"N/A")),1)])]),e("div",Ds,[e("div",As,[e("div",Ns,h(Q(f)((o=i.productDetails)==null?void 0:o.price)||"N/A"),1),Ts,e("div",Ls,[t(K,{name:"layers",size:"14px",class:"q-mr-xs"}),e("span",js,h(`${((n=i.productDetails)==null?void 0:n.added_product)||0} pcs`),1)])])])])])]}),_:1}),t(S,{class:"q-pa-lg"},{default:a(()=>[t(j,{modelValue:k.value,"onUpdate:modelValue":y[0]||(y[0]=m=>k.value=m),outlined:"",type:"textarea",placeholder:"Type your remark here...",autogrow:"",maxlength:1e3,counter:"",class:"q-mb-md","input-style":{minHeight:"100px",resize:"none"},onKeydown:y[1]||(y[1]=gt(st(m=>z(i.productDetails),["ctrl"]),["enter"]))},null,8,["modelValue"])]),_:1}),t(at,{class:"q-px-lg q-pb-lg"},{default:a(()=>[t(N,{label:"Proceed",color:"primary",class:"full-width",unelevated:"",disable:!k.value.trim(),onClick:y[2]||(y[2]=m=>z(i.productDetails))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide","modelValue"]))}};var Us=Y(zs,[["__scopeId","data-v-e2c51aee"]]);const he=i=>(re("data-v-f014d3e4"),i=i(),ie(),i),Fs={class:"header-content q-px-lg q-py-lg"},Hs={class:"row items-center justify-between"},Ms={class:"row items-center q-gutter-md"},Es={class:"icon-wrapper"},Ks={class:"text-h4 text-weight-bold text-white"},Zs=he(()=>e("div",{class:"text-subtitle1 text-white opacity-80 q-mt-xs"}," Transaction Details ",-1)),Js=he(()=>e("div",{class:"wave-decoration"},[e("svg",{viewBox:"0 0 1200 120",preserveAspectRatio:"none"},[e("path",{d:"M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z",opacity:".25",fill:"currentColor"}),e("path",{d:"M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z",opacity:".5",fill:"currentColor"}),e("path",{d:"M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z",fill:"currentColor"})])],-1)),Gs={class:"scrollable-content"},Ws={class:"row q-col-gutter-lg q-mb-xl"},Xs={class:"col-12 col-sm-4"},Ys={class:"info-card"},ea={class:"row items-center q-gutter-sm q-mb-sm"},ta=he(()=>e("div",{class:"text-subtitle2 text-grey-7"},"Date & Time",-1)),sa={class:"text-h6 text-weight-medium"},aa={class:"col-12 col-sm-4"},la={class:"info-card"},oa={class:"row items-center q-gutter-sm q-mb-sm"},na=he(()=>e("div",{class:"text-subtitle2 text-grey-7"},"Cashier",-1)),ra={class:"text-h6 text-weight-medium"},ia={class:"col-12 col-sm-4"},da={class:"info-card"},ca={class:"row items-center q-gutter-sm q-mb-sm"},ua={class:"text-subtitle2 text-grey-7"},_a={class:"text-h6 text-weight-medium"},ma={class:"product-card q-mb-xl"},pa=he(()=>e("div",{class:"text-h6 text-weight-bold q-mb-md"}," Product Information ",-1)),va={class:"row items-center q-gutter-lg"},ga={class:"col-auto"},ha={class:"col"},fa={class:"text-h5 text-weight-bold q-mb-xs"},ya={class:"row items-center q-gutter-xl"},xa={class:"column"},ba=he(()=>e("div",{class:"text-subtitle2 text-grey-7"},"Price",-1)),wa={class:"column"},$a=he(()=>e("div",{class:"text-subtitle2 text-grey-7"},"Quantity",-1)),qa={class:"text-h5 text-weight-bold"},ka=he(()=>e("span",{class:"text-subtitle1 text-grey-7"},"pcs",-1)),Pa={class:"column"},Sa=he(()=>e("div",{class:"text-subtitle2 text-grey-7"},"Total",-1)),Ca={class:"text-h5 text-weight-bold"},Oa={key:0,class:"row justify-end q-gutter-md"},Va={__name:"ViewDetails",props:{index:{type:Number,required:!0},productDetails:{type:Object,required:!0},category:{type:String,required:!0}},setup(i){const p=i;console.log("props",p);const{dialogRef:v,onDialogHide:$}=Ue(),c=x(!0),f=x(!1),s=ge(),{formatDate:_,formatFullname:T,formatPrice:U,capitalizeFirstLetter:r}=ve(),u=P(()=>{var y;return{selecta:"bg-selecta",bread:"bg-bread",nestle:"bg-nestle",softdrinks:"bg-softdrinks",other:"bg-other"}[(y=p.category)==null?void 0:y.toLowerCase()]||"bg-primary"}),V=(b,y=null)=>({bread:"brown",selecta:"pink",nestle:"info",softdrinks:"purple",other:"blue-grey-7"})[b==null?void 0:b.toLowerCase()]||(y?`text-${y}`:"text-primary"),k=ae(),R=P(()=>k.user),C=P(()=>{var b,y,m,q,o;return((y=(b=R.value)==null?void 0:b.device)==null?void 0:y.reference_id)||((o=(q=(m=R.value)==null?void 0:m.device)==null?void 0:q.reference)==null?void 0:o.id)||""}),z=b=>({bread:"bakery_dining",selecta:"icecream",nestle:"ac_unit",softdrinks:"local_drink",other:"category"})[b==null?void 0:b.toLowerCase()]||"inventory_2",D=(b,y)=>{if(!b||!y)return U("N/A");const m=parseFloat(b)*parseInt(y);return U(m)},F=()=>{s.dialog({component:Us,componentProps:{productDetails:p.productDetails,category:p.category}})};return(b,y)=>(g(),M(ne,{ref_key:"dialogRef",ref:v,onHide:Q($),modelValue:f.value,"onUpdate:modelValue":y[1]||(y[1]=m=>f.value=m),maximized:c.value,"transition-show":"slide-up","transition-hide":"slide-down",persistent:""},{default:a(()=>[t(H,{class:"bg-white"},{default:a(()=>[e("div",{class:W(["header-wrapper",u.value])},[e("div",Fs,[e("div",Hs,[e("div",Ms,[e("div",Es,[t(K,{name:z(i.category),size:"40px",class:"icon"},null,8,["name"])]),e("div",null,[e("div",Ks,h(i.category),1),Zs])]),Ve(t(N,{icon:"close",class:"text-white",flat:"",round:"",dense:""},null,512),[[Re]])])]),Js],2),e("div",Gs,[t(S,{class:"q-pt-xl q-pb-sm"},{default:a(()=>{var m,q,o,n,d,l,w,A,G,le,ke,Pe,Se,ze;return[e("div",Ws,[e("div",Xs,[e("div",Ys,[e("div",ea,[t(K,{name:"event",color:"grey-6",size:"20px"}),ta]),e("div",sa,h(Q(_)(((m=i.productDetails)==null?void 0:m.created_at)||"No Date")),1)])]),e("div",aa,[e("div",la,[e("div",oa,[t(K,{name:"person",color:"grey-6",size:"20px"}),na]),e("div",ra,h(Q(T)(((q=i.productDetails)==null?void 0:q.employee)||"No Cashier")),1)])]),e("div",ia,[e("div",da,[e("div",ca,[t(K,{name:"store",color:"grey-6",size:"20px"}),e("div",ua,h(((o=i.productDetails)==null?void 0:o.to_branch_id)===C.value?"Source":"Destination"),1)]),e("div",_a,h(((n=i.productDetails)==null?void 0:n.to_branch_id)===C.value?((l=(d=i.productDetails)==null?void 0:d.from_branch)==null?void 0:l.name)||"No Branch":((A=(w=i.productDetails)==null?void 0:w.to_branch)==null?void 0:A.name)||"No Branch"),1)])])]),e("div",ma,[pa,e("div",va,[e("div",ga,[e("div",{class:W(["product-icon",u.value])},[t(K,{name:z(i.category),size:"32px",class:"text-white"},null,8,["name"])],2)]),e("div",ha,[e("div",fa,h(Q(r)(((le=(G=i.productDetails)==null?void 0:G.product)==null?void 0:le.name)||"N/A")),1),e("div",ya,[e("div",xa,[ba,e("div",{class:W(["text-h5 text-weight-bold",V(i.category)])},h(Q(U)(((ke=i.productDetails)==null?void 0:ke.price)||"N/A")),3)]),e("div",wa,[$a,e("div",qa,[J(h(((Pe=i.productDetails)==null?void 0:Pe.added_product)||"N/A")+" ",1),ka])]),e("div",Pa,[Sa,e("div",Ca,h(D((Se=i.productDetails)==null?void 0:Se.price,(ze=i.productDetails)==null?void 0:ze.added_product)),1)])])])])])]}),_:1})]),t(S,{class:"q-pa-sm",align:"right"},{default:a(()=>{var m,q,o;return[C.value===((m=i.productDetails)==null?void 0:m.to_branch_id)&&((q=i.productDetails)==null?void 0:q.status)==="pending"&&((o=i.productDetails)==null?void 0:o.action)==="send"?(g(),I("div",Oa,[t(N,{label:"Receive Product",color:V(i.category,"positive"),padding:"12px 32px",class:"rounded-btn text-dark",icon:z(i.category),onClick:y[0]||(y[0]=n=>F(i.productDetails))},null,8,["color","icon"])])):se("",!0)]}),_:1})]),_:1})]),_:1},8,["onHide","modelValue","maximized"]))}};var Ra=Y(Va,[["__scopeId","data-v-f014d3e4"]]);const Ia=i=>(re("data-v-58c7ed64"),i=i(),ie(),i),Ba={class:"row items-center justify-between q-gutter-md"},Qa={class:"row items-center q-gutter-sm"},Da={class:"text-h5 text-weight-bold"},Aa=Ia(()=>e("div",{class:"text-subtitle1 opacity-85 q-mt-xs"}," Transfer to branches or update inventory ",-1)),Na={key:0},Ta={class:"text-subtitle1 text-weight-medium text-primary"},La={class:"full-width row flex-center text-accent q-gutter-sm q-py-xl"},ja={__name:"ViewAddProductsButton",props:{category:{type:String,required:!0}},setup(i){const p=i,v=x(""),{dialogRef:$,onDialogHide:c}=Ue(),f=x(!0),{formatDate:s,formatTime:_,formatFullname:T,capitalizeFirstLetter:U}=ve(),r=ae(),u=P(()=>r.user),V=P(()=>{var l,w,A,G,le;return((w=(l=u.value)==null?void 0:l.device)==null?void 0:w.reference_id)||((le=(G=(A=u.value)==null?void 0:A.device)==null?void 0:G.reference)==null?void 0:le.id)||""}),k=ge(),R=x({page:1,rowsPerPage:0,rowsNumber:0}),C=Fe(),z=P(()=>C.branchSendAddedProd),D=x([]),F=x(!1),b=async(l=0,w=5,A="")=>{if(!!V.value){F.value=!0;try{const G=await C.fetchSendAddedBranchProducts(p.category,V.value,l,w,A),{data:le,current_page:ke,per_page:Pe,total:Se}=z.value;console.log("branchProducts.value",z.value),console.log("data",le),D.value=le,console.log("rows.value",D.value),R.value={page:ke,rowsPerPage:Pe,rowsNumber:Se}}catch(G){console.error("Failed to load branch products:",G)}finally{F.value=!1}}};Ke(b);const y=l=>{b(l.pagination.page,l.pagination.rowsPerPage,l.filter)};X(v,async l=>{R.value.page=1,await b(R.value.page,R.value.rowsPerPage,l)});const m=P(()=>{var w;return{selecta:"bg-selecta",bread:"bg-bread",nestle:"bg-nestle",softdrinks:"bg-softdrinks",other:"bg-other"}[(w=p.category)==null?void 0:w.toLowerCase()]||"bg-primary"}),q=l=>({bread:"bakery_dining",selecta:"icecream",nestle:"ac_unit",softdrinks:"local_drink",other:"category"})[l==null?void 0:l.toLowerCase()]||"inventory_2",o=l=>{const w=(l||"").toLowerCase();return w.includes("pending")?"orange":w.includes("confirmed")||w.includes("approved")?"positive":w.includes("cancel")||w.includes("reject")?"negative":"grey-7"},n=l=>{console.log("View:",l),k.dialog({component:Ra,componentProps:{productDetails:l,category:p.category}})},d=[{name:"product",label:"Product",field:l=>{var w;return U(((w=l.product)==null?void 0:w.name)||"")},align:"left",sortable:!0},{name:"date",label:"Date / Time",field:l=>`${s(l.created_at)} ${_(l.created_at)}`,align:"left",sortable:!0},{name:"employee",label:"Staff",field:l=>T(l.employee),align:"left",sortable:!0},{name:"from_branch",label:"Source",field:l=>{var w;return U(((w=l.from_branch)==null?void 0:w.name)||"\u2014")},align:"left",sortable:!0},{name:"to_branch",label:"Destination",field:l=>{var w;return l.action==="add"?"Need to be approved by Admin":U(((w=l.to_branch)==null?void 0:w.name)||"\u2014")},align:"left",sortable:!0},{name:"status",label:"Status",field:l=>U(l.status||""),align:"center",sortable:!0},{name:"action",label:"Actions",align:"right"}];return(l,w)=>(g(),M(ne,{ref_key:"dialogRef",ref:$,onHide:Q(c),modelValue:l.dialog,"onUpdate:modelValue":w[2]||(w[2]=A=>l.dialog=A),maximized:f.value,"transition-show":"slide-up","transition-hide":"slide-down",persistent:""},{default:a(()=>[t(H,{class:"bg-white rounded-borders",style:{width:"95vw","max-width":"1100px","border-radius":"16px",overflow:"hidden"}},{default:a(()=>[t(S,{class:W(["dialog-header text-white",m.value])},{default:a(()=>[e("div",Ba,[e("div",Qa,[t(K,{name:q(i.category),size:"xl"},null,8,["name"]),e("div",null,[e("div",Da,h(i.category==="Bread"?"Send":"Send / Add")+" "+h(i.category)+" Products ",1),Aa])]),Ve(t(N,{icon:"close",flat:"",round:"",dense:"",class:"bg-white text-grey-8",size:"md",onClick:Q(c)},null,8,["onClick"]),[[Re]])])]),_:1},8,["class"]),t(S,{class:"q-pa-lg"},{default:a(()=>[t(j,{modelValue:v.value,"onUpdate:modelValue":w[0]||(w[0]=A=>v.value=A),outlined:"",dense:"",debounce:"300",placeholder:"Search product, staff, destination...",class:"q-mb-lg"},{prepend:a(()=>[t(K,{name:"search"})]),_:1},8,["modelValue"]),F.value?(g(),M(tt,{key:1,showing:""})):(g(),I("div",Na,[t(wt,{rows:D.value,columns:d,"row-key":"id",flat:"",square:"",bordered:"",pagination:R.value,"onUpdate:pagination":w[1]||(w[1]=A=>R.value=A),loading:F.value,"rows-per-page-options":[5,10,0],filter:v.value,onRequest:y,class:"my-sticky-modern-table shadow-1 rounded-borders","wrap-cells":"","virtual-scroll":""},{"body-cell-status":a(A=>[t(Me,{props:A,class:"text-center"},{default:a(()=>[t(lt,{color:o(A.value),"text-color":"white",class:"q-pa-sm q-px-md text-weight-medium text-uppercase",rounded:"",label:A.value},null,8,["color","label"])]),_:2},1032,["props"])]),"body-cell-product":a(A=>[t(Me,{props:A},{default:a(()=>[e("div",Ta,h(A.value),1)]),_:2},1032,["props"])]),"body-cell-action":a(A=>[t(Me,{props:A,class:"text-right"},{default:a(()=>[t(qt,{flat:""},{default:a(()=>[t(N,{flat:"",round:"",dense:"",color:"primary",icon:"visibility",onClick:G=>n(A.row)},{default:a(()=>[t($t,{anchor:"bottom middle",offset:[0,8]},{default:a(()=>[J("View Details")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),loading:a(()=>[t(tt,{showing:""},{default:a(()=>[t(Ae,{size:"50px",color:"grey-10"})]),_:1})]),"no-data":a(({icon:A,message:G})=>[e("div",La,[t(K,{name:A,size:"2rem"},null,8,["name"]),e("span",null,h(G||"No products found in this category."),1)])]),_:1},8,["rows","pagination","loading","filter"])]))]),_:1}),t(at,{align:"right",class:"q-pa-md bg-grey-2"},{default:a(()=>[Ve(t(N,{flat:"",label:"Close",color:"grey-8",class:"q-mr-sm"},null,512),[[Re]])]),_:1})]),_:1})]),_:1},8,["onHide","modelValue","maximized"]))}};var Le=Y(ja,[["__scopeId","data-v-58c7ed64"]]);const za={class:"q-gutter-y-md"},Ua={class:"row justify-between"},Fa={class:"row q-gutter-md"},Ha={__name:"BreadPage",setup(i){const p=x(""),v=ge(),$=s=>{p.value=s},c=s=>{v.dialog({component:Te,componentProps:{category:s}})},f=s=>{v.dialog({component:Le,componentProps:{category:s}})};return(s,_)=>(g(),I(Z,null,[e("div",za,[e("div",Ua,[e("div",null,[t(Ne,{onUpdateSearch:$})]),e("div",Fa,[e("div",null,[t(N,{class:"bg-gradient text-white",outlined:"",label:"Send Bread To Branch",onClick:_[0]||(_[0]=T=>c("Bread"))})]),e("div",null,[t(N,{class:"add-bg-gradient text-white",outlined:"",label:"Added Bread",onClick:_[1]||(_[1]=T=>f("Bread"))})])])])]),e("div",null,[t(Gt,{filter:p.value},null,8,["filter"])])],64))}};var Ma=Y(Ha,[["__scopeId","data-v-ab8c5e86"]]);const ue=i=>(re("data-v-7a1b14b1"),i=i(),ie(),i),Ea={class:"q-mt-md"},Ka={key:0,class:"text-center q-pa-md"},Za={key:1,class:"row q-pa-lg q-gutter-sm q-gutter-y-md"},Ja=ue(()=>e("img",{src:"https://cdn.quasar.dev/img/chicken-salad.jpg"},null,-1)),Ga={class:"q-pa-xm row q-gutter-x-sm justify-between"},Wa=ue(()=>e("div",null,"Quantity:",-1)),Xa={class:"q-pa-xm row q-gutter-x-sm justify-between"},Ya=ue(()=>e("div",null,"Price:",-1)),el={class:"row justify-between"},tl={class:"text-h6"},sl={class:"q-mb-lg row justify-between"},al=ue(()=>e("div",{class:"text-weight-light"},"Remainings",-1)),ll=ue(()=>e("div",{class:"text-weight-light"},"Selecta Out",-1)),ol={class:"row q-gutter-xm justify-between"},nl={class:"q-gutter-sm"},rl=ue(()=>e("div",{class:"text-weight-light"},"Beginnings",-1)),il=ue(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),dl={class:"q-gutter-sm"},cl=ue(()=>e("div",{class:"text-weight-light"},"Added Stocks",-1)),ul=ue(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),_l={class:"q-gutter-sm"},ml=ue(()=>e("div",{class:"text-weight-light"},"Price",-1)),pl={align:"right"},vl={__name:"SelectaCard",props:{filter:String},setup(i){var y,m,q;const{capitalizeFirstLetter:p,formatPrice:v}=ve(),$=ae(),c=$.user;console.log("userData",c);const f=((y=c==null?void 0:c.device)==null?void 0:y.reference_id)||((q=(m=c==null?void 0:c.device)==null?void 0:m.reference)==null?void 0:q.id)||"0";console.log("branchId",f);const s=x(null),_=x(!1);x(!1);const T=i,U=o=>{s.value=o,console.log("selectedItem",s.value),_.value=!0},r=Ie({selectaSold:0,selectaRemainings:"",selectaBeginnings:0,selectaOut:""}),u=x({selectaRemainings:"",selectaOut:""}),V=o=>{u.value[o]=""},k=()=>{u.value.selectaRemainings="",u.value.selectaOut="";let o=!0;return r.selectaRemainings||(u.value.selectaRemainings="Remaining is required",o=!1),r.selectaOut||(u.value.selectaOut="Selecta Out is required",o=!1),o},R=P(()=>s.value?(console.log("selectedItem",s.value),r.selectaSold*s.value.price):0);P(()=>v(R.value));const C=()=>{if(s.value){const o=parseInt(s.value.total_quantity)||0,n=parseInt(r.selectaRemainings)||0,d=parseInt(r.selectaOut)||0,l=n+d;r.selectaSold=o-l}};X(()=>r.selectaRemainings,o=>{C()}),X(()=>r.selectaOut,o=>{C()});const z=P(()=>$.selectaProducts);X(z,o=>{});const D=P(()=>{var o;return((o=z.value)==null?void 0:o.filter(n=>n.product.name.toLowerCase().includes(T.filter.toLowerCase())))||[]}),F=()=>{s.value=null,r.selectaSold=0,r.selectaRemainings="",r.selectaBeginnings=0,r.selectaOut="",_.value=!1},b=()=>{var n;if(!k())return;ye.show({spinner:Ae,message:`${p(s.value.product.name)} putting to the list...`,messageColor:"white"});const o={user_id:c==null?void 0:c.data.id,branch_id:f||((n=c==null?void 0:c.device)==null?void 0:n.branch_id),product_id:s.value.product.id,name:s.value.product.name,total:s.value.total_quantity,added_stocks:s.value.new_production,sold:r.selectaSold,out:r.selectaOut,beginnings:s.value.beginnings,remaining:r.selectaRemainings,price:s.value.price,sales:R.value,new_production:0};console.log("report",o),$.updateSelectaReport(o),qe.create({message:"Product added successfully",color:"positive",position:"top"}),setTimeout(()=>{ye.hide(),F()},500)};return(o,n)=>(g(),I(Z,null,[e("div",Ea,[t(Be,{style:{height:"calc(100vh - 150px)","max-width":"1500px"}},{default:a(()=>[!D.value||D.value.length===0?(g(),I("div",Ka," No data available ")):(g(),I("div",Za,[(g(!0),I(Z,null,fe(D.value,(d,l)=>(g(),M(De,{key:l,once:"",transition:"scale",class:"example-item"},{default:a(()=>[t(H,{onClick:w=>U(d),class:"q-ma-sm my-card"},{default:a(()=>[Ja,e("div",{class:W(["q-pa-sm",{"text-subtitle2":d.product.name.length<=5,"text-caption text-weight-medium":d.product.name.length>10&&d.product.name.length<=20,"text-caption":d.product.name.length>20}])},h(Q(p)(d.product.name)),3),t($e),t(S,{class:"text-subtitle2 text-weight-regular"},{default:a(()=>[e("div",Ga,[Wa,e("div",null,h(d.total_quantity),1)]),e("div",Xa,[Ya,e("div",null,h(Q(v)(d.price)),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]))]),_:1})]),e("div",null,[t(ne,{modelValue:_.value,"onUpdate:modelValue":n[4]||(n[4]=d=>_.value=d),persistent:""},{default:a(()=>[t(H,{class:"my-card q-pa-md",style:{width:"700px","max-width":"80vw"}},{default:a(()=>[t(S,null,{default:a(()=>[e("div",el,[e("div",tl,h(Q(p)(s.value?s.value.product.name:"")),1),e("div",null,[t(N,{round:"",dense:"",flat:"",icon:"close",onClick:F})])])]),_:1}),t(S,null,{default:a(()=>[e("div",sl,[e("div",null,[al,t(j,{modelValue:r.selectaRemainings,"onUpdate:modelValue":[n[0]||(n[0]=d=>r.selectaRemainings=d),n[1]||(n[1]=d=>V("selectaRemainings"))],dense:"",outlined:"",mask:"#####",type:"number",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[d=>!!d||"Remainings is required"],error:!!u.value.selectaRemainings,"error-message":u.value.selectaRemainings},null,8,["modelValue","rules","error","error-message"])]),e("div",null,[ll,t(j,{modelValue:r.selectaOut,"onUpdate:modelValue":[n[2]||(n[2]=d=>r.selectaOut=d),n[3]||(n[3]=d=>V("selectaOut"))],dense:"",outlined:"",mask:"#####",type:"number",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[d=>!!d||"Selecta out is required"],error:!!u.value.selectaOut,"error-message":u.value.selectaOut},null,8,["modelValue","rules","error","error-message"])])]),e("div",ol,[e("div",nl,[rl,t(j,{dense:"",outlined:"",readonly:"",label:s.value?s.value.beginnings:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[il]),_:1},8,["label"])]),e("div",dl,[cl,t(j,{dense:"",outlined:"",readonly:"",label:s.value?s.value.new_production:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[ul]),_:1},8,["label"])]),e("div",_l,[ml,t(j,{dense:"",outlined:"",readonly:"",label:s.value?Q(v)(s.value.price):"",style:{width:"150px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),_:1}),t(S,null,{default:a(()=>[e("div",pl,[t(N,{color:"red-6",label:"Ok",onClick:b})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var gl=Y(vl,[["__scopeId","data-v-7a1b14b1"]]);const hl={class:"q-gutter-y-md"},fl={class:"row q-gutter-md"},yl={class:"row q-gutter-md"},xl={__name:"SelectaPage",setup(i){const p=x(""),v=ge(),$=s=>{p.value=s},c=s=>{v.dialog({component:Te,componentProps:{category:s}})},f=s=>{v.dialog({component:Le,componentProps:{category:s}})};return(s,_)=>(g(),I(Z,null,[e("div",hl,[e("div",fl,[e("div",null,[t(Ne,{onUpdateSearch:$})]),e("div",yl,[e("div",null,[t(N,{class:"bg-gradient text-white",outlined:"",label:"Send Selecta to Branch",onClick:_[0]||(_[0]=T=>c("Selecta"))})]),e("div",null,[t(N,{class:"add-bg-gradient text-white",outlined:"",label:"Added Selecta",onClick:_[1]||(_[1]=T=>f("Selecta"))})])])])]),e("div",null,[t(gl,{filter:p.value},null,8,["filter"])])],64))}};var bl=Y(xl,[["__scopeId","data-v-7bbff322"]]);const _e=i=>(re("data-v-69228bb8"),i=i(),ie(),i),wl={class:"q-mt-md"},$l={key:0,class:"text-center q-pa-md"},ql={class:"row q-pa-lg q-gutter-sm q-gutter-y-md"},kl=_e(()=>e("img",{src:"https://cdn.quasar.dev/img/chicken-salad.jpg"},null,-1)),Pl={class:"q-pa-xm row q-gutter-x-sm justify-between"},Sl=_e(()=>e("div",null,"Quantity:",-1)),Cl={class:"q-pa-xm row q-gutter-x-sm justify-between"},Ol=_e(()=>e("div",null,"Price:",-1)),Vl={class:"row justify-between"},Rl={class:"text-h6"},Il={class:"q-mg-lg row justify-between"},Bl=_e(()=>e("div",{class:"text-weight-light"},"Remainings",-1)),Ql=_e(()=>e("div",{class:"text-weight-light"},"Nestl\xE9 Out",-1)),Dl={class:"row q-gutter-xm justify-between"},Al={class:"q-gutter-sm"},Nl=_e(()=>e("div",{class:"text-weight-light"},"Beginnings",-1)),Tl=_e(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),Ll={class:"q-gutter-sm"},jl=_e(()=>e("div",{class:"text-weight-light"},"Added Stocks",-1)),zl=_e(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),Ul={class:"q-gutter-sm"},Fl=_e(()=>e("div",{class:"text-weight-light"},"Price",-1)),Hl={align:"right"},Ml={__name:"NestleCard",props:{filter:String},setup(i){var y,m,q;const{capitalizeFirstLetter:p,formatPrice:v}=ve(),$=ae(),c=$.user;console.log("userData",c);const f=((y=c==null?void 0:c.device)==null?void 0:y.reference_id)||((q=(m=c==null?void 0:c.device)==null?void 0:m.reference)==null?void 0:q.id)||"0";console.log("branchIdddddddd",f);const s=x(null),_=x(!1);x(!1);const T=i,U=o=>{s.value=o,console.log("selectedItem",s.value),_.value=!0},r=Ie({nestleSold:0,nestleRemainings:0,nestleBeginnings:0,nestleOut:0}),u=x({nestleRemainings:"",nestleOut:""}),V=o=>{u.value[o]=""},k=()=>{u.value.nestleRemainings="",u.value.nestleOut="";let o=!0;return r.nestleRemainings||(u.value.nestleRemainings="Remaining is required",o=!1),r.nestleOut||(u.value.nestleOut="Neslte Out is required",o=!1),o},R=P(()=>s.value?(console.log("selectedItem.value",s.value),r.nestleSold*s.value.price):0);P(()=>v(R.value));const C=()=>{if(s.value){const o=parseInt(s.value.total_quantity)||0,n=parseInt(r.nestleRemainings)||0,d=parseInt(r.nestleOut)||0,l=n+d;r.nestleSold=o-l}};X(()=>r.nestleRemainings,o=>{C()}),X(()=>r.nestleOut,o=>{C()});const z=P(()=>$.nestleProducts);console.log("nestleProducts",z.value),X(z,o=>{});const D=P(()=>{var n,d;const o=((n=T.filter)==null?void 0:n.toLowerCase())||"";return((d=z.value)==null?void 0:d.filter(l=>{var A,G;return(((G=(A=l==null?void 0:l.product)==null?void 0:A.name)==null?void 0:G.toLowerCase())||"").includes(o)}))||[]}),F=()=>{s.value=null,r.nestleSold=0,r.nestleRemainings="",r.nestleBeginnings=0,r.nestleOut="",_.value=!1},b=()=>{var n;if(!k())return;ye.show({spinner:Ae,message:`${p(s.value.product.name)} putting to the list...`,messageColor:"white"});const o={user_id:c==null?void 0:c.data.id,branch_id:f||((n=c==null?void 0:c.device)==null?void 0:n.branch_id),product_id:s.value.product.id,name:s.value.product.name,total:s.value.total_quantity,added_stocks:s.value.new_production,sold:r.nestleSold,out:r.nestleOut,beginnings:s.value.beginnings,remaining:r.nestleRemainings,price:s.value.price,sales:R.value,new_production:0};console.log("reportss",o),$.updateNestleReport(o),qe.create({message:"Product added successfully",color:"positive",position:"top"}),setTimeout(()=>{ye.hide(),F()})};return(o,n)=>{const d=ht("q-intersention");return g(),I(Z,null,[e("div",wl,[t(Be,{style:{height:"calc(100vh - 150px)","max-width":"1500px"}},{default:a(()=>[!D.value||D.value.length===0?(g(),I("div",$l," No data available ")):se("",!0),e("div",ql,[(g(!0),I(Z,null,fe(D.value,(l,w)=>(g(),M(d,{key:w,once:"",transition:"scale",class:"example-item"},{default:a(()=>[t(H,{onClick:A=>U(l),class:"q-ma-sm my-card"},{default:a(()=>[kl,e("div",{class:W(["q-pa-sm",{"text-subtitle2":l.product.name.length<=5,"text-caption text-weight-medium":l.product.name.length>10&&l.product.name.length<=20,"text-caption":l.product.name.length>20}])},h(Q(p)(l.product.name)),3),t($e),t(S,{class:"text-subtitle2 text-weight-regular"},{default:a(()=>[e("div",Pl,[Sl,e("div",null,h(l.total_quantity),1)]),e("div",Cl,[Ol,e("div",null,h(Q(v)(l.price)),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))])]),_:1})]),e("div",null,[t(ne,{modelValue:_.value,"onUpdate:modelValue":n[4]||(n[4]=l=>_.value=l),persistent:""},{default:a(()=>[t(H,{class:"my-card q-pa-md",style:{width:"700px","max-width":"80vw"}},{default:a(()=>[t(S,null,{default:a(()=>[e("div",Vl,[e("div",Rl,h(Q(p)(s.value?s.value.product.name:"")),1),e("div",null,[t(N,{round:"",dense:"",flat:"",icon:"close",onClick:F})])])]),_:1}),t(S,null,{default:a(()=>[e("div",Il,[e("div",null,[Bl,t(j,{modelValue:r.nestleRemainings,"onUpdate:modelValue":[n[0]||(n[0]=l=>r.nestleRemainings=l),n[1]||(n[1]=l=>V("nestleRemainings"))],dense:"",outlined:"",mask:"#####",type:"number",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[l=>!!l||"Remainings is required"],error:!!u.value.nestleRemainings,"error-message":u.value.nestleRemainings},null,8,["modelValue","rules","error","error-message"])]),e("div",null,[Ql,t(j,{modelValue:r.nestleOut,"onUpdate:modelValue":[n[2]||(n[2]=l=>r.nestleOut=l),n[3]||(n[3]=l=>V("nesleOut"))],dense:"",outlined:"",mask:"#####",type:"number",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[l=>!!l||"Nestl\xE9 out is required"],error:!!u.value.nestleOut,"error-message":u.value.nestleOut},null,8,["modelValue","rules","error","error-message"])])]),e("div",Dl,[e("div",Al,[Nl,t(j,{dense:"",outlined:"",readonly:"",label:s.value?s.value.beginnings:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[Tl]),_:1},8,["label"])]),e("div",Ll,[jl,t(j,{dense:"",outlined:"",readonly:"",label:s.value?s.value.new_production:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[zl]),_:1},8,["label"])]),e("div",Ul,[Fl,t(j,{dense:"",outlined:"",readonly:"",label:s.value?Q(v)(s.value.price):"",style:{width:"150px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),_:1}),t(S,null,{default:a(()=>[e("div",Hl,[t(N,{color:"red-6",label:"Ok",onClick:b})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64)}}};var El=Y(Ml,[["__scopeId","data-v-69228bb8"]]);const Kl={class:"q-gutter-y-md"},Zl={class:"row q-gutter-md"},Jl={class:"row q-gutter-md"},Gl={__name:"NestlePage",setup(i){const p=x(""),v=ge(),$=s=>{p.value=s},c=s=>{v.dialog({component:Te,componentProps:{category:s}})},f=s=>{v.dialog({component:Le,componentProps:{category:s}})};return(s,_)=>(g(),I(Z,null,[e("div",Kl,[e("div",Zl,[e("div",null,[t(Ne,{onUpdateSearch:$})]),e("div",Jl,[e("div",null,[t(N,{class:"bg-gradient text-white",outlined:"",label:"Send Nestle to Branch",onClick:_[0]||(_[0]=T=>c("Nestle"))})]),e("div",null,[t(N,{class:"add-bg-gradient text-white",outlined:"",label:"Added Nestl\xE9",onClick:_[1]||(_[1]=T=>f("Nestle"))})])])])]),e("div",null,[t(El)])],64))}};var Wl=Y(Gl,[["__scopeId","data-v-d84c86c0"]]);const me=i=>(re("data-v-50fe5b47"),i=i(),ie(),i),Xl={class:"q-mt-md"},Yl={key:0,class:"text-center q-pa-md"},eo={key:1,class:"row q-pa-lg q-gutter-sm q-gutter-y-md"},to=me(()=>e("img",{src:"https://cdn.quasar.dev/img/chicken-salad.jpg"},null,-1)),so={class:"q-pa-xm row q-gutter-x-sm justify-between"},ao=me(()=>e("div",null,"Quantity:",-1)),lo={class:"q-pa-xm row q-gutter-x-sm justify-between"},oo=me(()=>e("div",null,"Price:",-1)),no={class:"row justify-between"},ro={class:"text-h6"},io={class:"q-mb-lg row justify-between"},co=me(()=>e("div",{class:"text-weight-light"},"Remainings",-1)),uo=me(()=>e("div",{class:"text-weight-light"},"Softdrinks Out",-1)),_o={class:"row q-gutter-xm justify-between"},mo={class:"q-gutter-sm"},po=me(()=>e("div",{class:"text-weight-light"},"Beginnings",-1)),vo=me(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),go={class:"q-gutter-sm"},ho=me(()=>e("div",{class:"text-weight-light"},"Added Stocks",-1)),fo=me(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),yo={class:"q-gutter-sm"},xo=me(()=>e("div",{class:"text-weight-light"},"Price",-1)),bo={align:"right"},wo={__name:"SoftdrinksCard",props:{filter:String},setup(i){var y,m,q;const{capitalizeFirstLetter:p,formatPrice:v}=ve(),$=ae(),c=$.user;console.log("userData",c);const f=((y=c==null?void 0:c.device)==null?void 0:y.reference_id)||((q=(m=c.device)==null?void 0:m.reference)==null?void 0:q.id)||"0";console.log("branchId",f);const s=x(null),_=x(!1);x(!1);const T=i,U=o=>{s.value=o,console.log("selectedItemss",s.value),_.value=!0},r=Ie({softdrinksSold:0,remainnings:"",beginnings:0,softdrinksOut:""}),u=x({remainnings:"",softdrinksOut:""}),V=o=>{u.value[o]=""},k=()=>{u.value.remainnings="",u.value.softdrinksOut="";let o=!0;return r.remainnings||(u.value.remainnings="Remaining is required",o=!1),r.softdrinksOut||(u.value.softdrinksOut="Softdrinks Out is required",o=!1),o},R=P(()=>s.value?r.softdrinksSold*s.value.price:0);P(()=>v(R.value));const C=()=>{if(s.value){const o=parseInt(s.value.total_quantity)||0,n=parseInt(r.remainnings)||0,d=parseInt(r.softdrinksOut)||0,l=n+d;r.softdrinksSold=o-l}};X(()=>r.remainnings,o=>{C()}),X(()=>r.softdrinksOut,o=>{C()});const z=P(()=>$.softdrinksProducts);X(z,o=>{});const D=P(()=>{var o;return((o=z.value)==null?void 0:o.filter(n=>n.product.name.toLowerCase().includes(T.filter.toLowerCase())))||[]}),F=()=>{s.value=null,r.softdrinksSold=0,r.remainnings="",r.beginnings=0,r.softdrinksOut="",_.value=!1},b=()=>{var n;if(!k())return;ye.show({spinner:Ae,message:`${p(s.value.product.name)} putting to the list...`,messageColor:"white"});const o={user_id:c==null?void 0:c.data.id,branch_id:f||((n=c==null?void 0:c.device)==null?void 0:n.branch_id),product_id:s.value.product.id,name:s.value.product.name,total:s.value.total_quantity,added_stocks:s.value.new_production,sold:r.softdrinksSold,out:r.softdrinksOut,beginnings:s.value.beginnings,remaining:r.remainnings,price:s.value.price,sales:R.value,new_production:0};console.log("report",o),$.updateSoftdrinksReport(o),qe.create({message:"Product added successfully",color:"positive",position:"top"}),setTimeout(()=>{ye.hide(),F()},2e3)};return(o,n)=>(g(),I(Z,null,[e("div",Xl,[t(Be,{style:{height:"450px","max-width":"1500px"}},{default:a(()=>[!D.value||D.value.length===0?(g(),I("div",Yl," No data available ")):(g(),I("div",eo,[(g(!0),I(Z,null,fe(D.value,(d,l)=>(g(),M(De,{key:l,once:"",transition:"scale",class:"example-item"},{default:a(()=>[t(H,{onClick:w=>U(d),class:"q-ma-sm my-card"},{default:a(()=>[to,e("div",{class:W(["q-pa-sm",{"text-subtitle2":d.product.name.length<=5,"text-caption text-weight-medium":d.product.name.length>10&&d.product.name.length<=20,"text-caption":d.product.name.length>20}])},h(Q(p)(d.product.name)),3),t($e),t(S,{class:"text-subtitle2 text-weight-regular"},{default:a(()=>[e("div",so,[ao,e("div",null,h(d.total_quantity),1)]),e("div",lo,[oo,e("div",null,h(Q(v)(d.price)),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]))]),_:1})]),e("div",null,[t(ne,{modelValue:_.value,"onUpdate:modelValue":n[4]||(n[4]=d=>_.value=d),persistent:""},{default:a(()=>[t(H,{class:"my-card q-pa-md",style:{width:"700px","max-width":"80vw"}},{default:a(()=>[t(S,null,{default:a(()=>[e("div",no,[e("div",ro,h(Q(p)(s.value?s.value.product.name:"")),1),e("div",null,[t(N,{round:"",dense:"",flat:"",icon:"close",onClick:F})])])]),_:1}),t(S,null,{default:a(()=>[e("div",io,[e("div",null,[co,t(j,{modelValue:r.remainnings,"onUpdate:modelValue":[n[0]||(n[0]=d=>r.remainnings=d),n[1]||(n[1]=d=>V("remainnings"))],dense:"",outlined:"",mask:"#####",type:"number",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[d=>!!d||"Softdrinks out is required"],error:!!u.value.remainnings,"error-message":u.value.remainnings},null,8,["modelValue","rules","error","error-message"])]),e("div",null,[uo,t(j,{modelValue:r.softdrinksOut,"onUpdate:modelValue":[n[2]||(n[2]=d=>r.softdrinksOut=d),n[3]||(n[3]=d=>V("softdrinksOut"))],dense:"",outlined:"",mask:"#####",type:"number",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[d=>!!d||"Softdrinks out is required"],error:!!u.value.softdrinksOut,"error-message":u.value.softdrinksOut},null,8,["modelValue","rules","error","error-message"])])]),e("div",_o,[e("div",mo,[po,t(j,{dense:"",outlined:"",readonly:"",label:s.value?s.value.beginnings:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[vo]),_:1},8,["label"])]),e("div",go,[ho,t(j,{dense:"",outlined:"",readonly:"",label:s.value?s.value.new_production:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[fo]),_:1},8,["label"])]),e("div",yo,[xo,t(j,{dense:"",outlined:"",readonly:"",label:s.value?Q(v)(s.value.price):"",style:{width:"150px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),_:1}),t(S,null,{default:a(()=>[e("div",bo,[t(N,{color:"red-6",label:"Ok",onClick:b})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var $o=Y(wo,[["__scopeId","data-v-50fe5b47"]]);const qo={class:"q-gutter-y-md"},ko={class:"row q-gutter-md"},Po={class:"row q-gutter-md"},So={__name:"SoftdrinksPage",setup(i){const p=x(""),v=ge(),$=s=>{p.value=s},c=s=>{v.dialog({component:Te,componentProps:{category:s}})},f=s=>{v.dialog({component:Le,componentProps:{category:s}})};return(s,_)=>(g(),I(Z,null,[e("div",qo,[e("div",ko,[e("div",null,[t(Ne,{onUpdateSearch:$})]),e("div",Po,[e("div",null,[t(N,{class:"bg-gradient text-white",outlined:"",label:"Send Softdrinks To Branch",onClick:_[0]||(_[0]=T=>c("Softdrinks"))})]),e("div",null,[t(N,{class:"add-bg-gradient text-white",outlined:"",label:"Added Softdrinks",onClick:_[1]||(_[1]=T=>f("Softdrinks"))})])])])]),e("div",null,[t($o,{filter:p.value},null,8,["filter"])])],64))}};var Co=Y(So,[["__scopeId","data-v-9ef21600"]]);const je=i=>(re("data-v-48231c1e"),i=i(),ie(),i),Oo={class:"q-mt-md"},Vo={class:"row q-pa-lg q-gutter-sm q-gutter-y-md"},Ro=je(()=>e("img",{src:"https://cdn.quasar.dev/img/chicken-salad.jpg"},null,-1)),Io={class:"q-pa-xm row q-gutter-x-sm justify-between"},Bo=je(()=>e("div",null,"Layers",-1)),Qo={class:"q-pa-xm row q-gutter-x-sm justify-between"},Do=je(()=>e("div",null,"Price:",-1)),Ao={class:"row justify-between"},No={class:"text-h6"},To={class:"row q-gutter-x-sm"},Lo=je(()=>e("div",{class:"text-subtitle2"},"Layer /s :",-1)),jo={class:"text-weight-light"},zo={class:"row q-gutter-x-sm"},Uo=je(()=>e("div",{class:"text-subtitle2"},"Price :",-1)),Fo={class:"text-weight-light"},Ho={__name:"CakeCard",setup(i){const p=ae(),v=kt(),$=P(()=>v.onDisplayProducts),c=localStorage.getItem("branch_id"),f=x(null),s=x(!1);Ke(async()=>{c&&await _()});const _=async()=>{const k=await v.fetchOnDisplayProducts(c);$.value=k,console.log("sdfasdfas",$.value)},T=k=>k?k.split(" ").map(R=>R.charAt(0).toUpperCase()+R.slice(1).toLowerCase()).join(" "):"",U=k=>{f.value=k,s.value=!0},r=k=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(k).replace("\u20B1","\u20B1 "),u=async()=>{if(f.value){const k={cake_report_id:f.value.id,name:f.value.name,price:f.value.price,sales_status:"sold"};console.log(k),p.updateCakeReport(k),qe.create({type:"positive",message:`${k.name} is sold`})}s.value=!1},V=async()=>{if(f.value){const k={cake_report_id:f.value.id,name:f.value.name,price:f.value.price,sales_status:"pull out"};p.updateCakeReport(k),qe.create({type:"warning",message:`${k.name} is pull out`})}s.value=!1};return(k,R)=>(g(),I(Z,null,[e("div",Oo,[t(Be,{style:{height:"450px","max-width":"1500px"}},{default:a(()=>[e("div",Vo,[(g(!0),I(Z,null,fe($.value,(C,z)=>(g(),M(De,{key:z,once:"",transition:"scale",class:"example-item"},{default:a(()=>[t(H,{onClick:D=>U(C),class:"q-ma-sm my-card"},{default:a(()=>[Ro,e("div",{class:W(["q-pa-sm",{"text-h6":C.name.length<=10,"text-caption text-weight-medium":C.name.length>10&&C.name.length<=20,"text-caption text-weight-medium":C.name.length>20}])},h(T(C.name)),3),t($e),t(S,null,{default:a(()=>[e("div",Io,[Bo,e("div",null,h(C.layers),1)]),e("div",Qo,[Do,e("div",null,h(r(C.price)),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))])]),_:1})]),t(ne,{modelValue:s.value,"onUpdate:modelValue":R[0]||(R[0]=C=>s.value=C)},{default:a(()=>[t(H,null,{default:a(()=>[t(S,null,{default:a(()=>[e("div",Ao,[e("div",No,h(T(f.value.name)),1),e("div",null,[Ve(t(N,{round:"",dense:"",flat:"",icon:"close"},null,512),[[Re]])])])]),_:1}),t($e),t(S,{class:"row justify-between"},{default:a(()=>[e("div",To,[Lo,e("div",jo,h(f.value.layers),1)]),e("div",zo,[Uo,e("div",Fo,h(r(f.value.price)),1)])]),_:1}),t(S,{class:"q-gutter-x-md"},{default:a(()=>[t(N,{label:"Sold",color:"primary",unelevated:"",class:"rounded-borders",icon:"check_circle",onClick:u}),t(N,{label:"Pull Out",color:"negative",outline:"",class:"rounded-borders",icon:"close",onClick:V})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Mo=Y(Ho,[["__scopeId","data-v-48231c1e"]]);const Eo={__name:"CakePage",setup(i){return(p,v)=>(g(),I("div",null,[t(Mo)]))}};const pe=i=>(re("data-v-30081a95"),i=i(),ie(),i),Ko={class:"q-mt-md"},Zo={key:0,class:"text-center q-pa-md"},Jo={key:1,class:"row q-pa-lg q-gutter-y-lg"},Go=pe(()=>e("img",{src:"https://cdn.quasar.dev/img/chicken-salad.jpg"},null,-1)),Wo={class:"q-pa-xm row q-gutter-x-sm justify-between"},Xo=pe(()=>e("div",null,"Quantity:",-1)),Yo={class:"q-pa-xm row q-gutter-x-sm justify-between"},en=pe(()=>e("div",null,"Price:",-1)),tn={class:"text-h6"},sn={class:"q-mb-lg row justify-between"},an=pe(()=>e("div",{class:"text-weight-light"},"Remainings",-1)),ln=pe(()=>e("div",{class:"text-weight-light"},"Product Out",-1)),on={class:"row q-gutter-xm justify-between"},nn={class:"q-gutter-sm"},rn=pe(()=>e("div",{class:"text-weight-light"},"Beginnings",-1)),dn=pe(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),cn={class:"q-gutter-sm"},un=pe(()=>e("div",{class:"text-weight-light"},"Added Stocks",-1)),_n=pe(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),mn={class:"q-gutter-sm"},pn=pe(()=>e("div",{class:"text-weight-light"},"Price",-1)),vn={align:"right"},gn={__name:"OtherCard",props:{filter:String},setup(i){var y,m,q;const{capitalizeFirstLetter:p,formatPrice:v}=ve(),$=ae(),c=$.user;console.log("userdata for branch",c);const f=((y=c==null?void 0:c.device)==null?void 0:y.reference_id)||((q=(m=c.device)==null?void 0:m.reference)==null?void 0:q.id)||"0";console.log("branchId",f);const s=x(null),_=x(!1);x(!1);const T=i,U=o=>{s.value=o,console.log("selectedItemsssss",s.value),_.value=!0},r=Ie({otherProductSold:0,remainnings:"",beginnings:0,otherProductOut:""}),u=x({remainnings:"",otherProductOut:""}),V=o=>{u.value[o]=""},k=()=>{u.value.remainnings="",u.value.otherProductOut="";let o=!0;return r.remainnings||(u.value.remainnings="Remaining is required",o=!1),r.otherProductOut||(u.value.otherProductOut="Product Out is required",o=!1),o},R=()=>{if(s.value){const o=parseInt(s.value.total_quantity)||0,n=parseInt(r.remainnings)||0,d=parseInt(r.otherProductOut)||0,l=n+d;r.otherProductSold=o-l}};X(()=>r.remainnings,o=>{R()}),X(()=>r.otherProductOut,o=>{R()});const C=P(()=>$.othersProducts);console.log("othersProducts",C.value);const z=P(()=>s.value?r.otherProductSold*s.value.price:0);P(()=>formatCurrency(z.value));const D=P(()=>{var o;return((o=C.value)==null?void 0:o.filter(n=>n.product.name.toLowerCase().includes(T.filter.toLowerCase())))||[]}),F=()=>{s.value=null,r.otherProductOut="",r.beginnings=0,r.otherProductSold=0,r.remainnings="",_.value=!1},b=async()=>{var n;if(!k())return;const o={user_id:c==null?void 0:c.data.id,branch_id:f||((n=c==null?void 0:c.device)==null?void 0:n.branch_id),product_id:s.value.product.id,name:s.value.product.name,total:s.value.total_quantity,sold:r.otherProductSold,out:r.otherProductOut,added_stocks:s.value.new_production,beginnings:s.value.beginnings,remaining:r.remainnings,price:s.value.price,sales:z.value,new_production:0};console.log("report",o),$.updateOtherProductsReport(o),qe.create({message:"Product added successfully",color:"positive",position:"top"}),F()};return(o,n)=>(g(),I(Z,null,[e("div",Ko,[t(Be,{style:{height:"700px","max-width":"1500px"}},{default:a(()=>[!D.value||D.value.length===0?(g(),I("div",Zo," No data available ")):(g(),I("div",Jo,[(g(!0),I(Z,null,fe(D.value,(d,l)=>(g(),M(De,{key:l,once:"",transition:"scale",class:"example-item q-gutter-sm"},{default:a(()=>[t(H,{onClick:w=>U(d),class:"q-ma-sm my-card"},{default:a(()=>[Go,e("div",{class:W(["q-pa-sm",{"text-subtitle2":d.product.name.length<=5,"text-caption text-weight-medium":d.product.name.length>10&&d.product.name.length<=20,"text-caption":d.product.name.length>20}])},h(Q(p)(d.product.name)),3),t($e),t(S,{class:"text-subtitle2 text-weight-regular"},{default:a(()=>[e("div",Wo,[Xo,e("div",null,h(d.total_quantity),1)]),e("div",Yo,[en,e("div",null,h(Q(v)(d.price)),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]))]),_:1})]),e("div",null,[t(ne,{modelValue:_.value,"onUpdate:modelValue":n[4]||(n[4]=d=>_.value=d),persistent:""},{default:a(()=>[t(H,{class:"my-card q-pa-md",style:{width:"700px","max-width":"80vw"}},{default:a(()=>[t(S,{class:"row justify-between"},{default:a(()=>[e("div",tn,h(Q(p)(s.value?s.value.product.name:"")),1),e("div",null,[t(N,{round:"",dense:"",flat:"",icon:"close",onClick:F})])]),_:1}),t(S,null,{default:a(()=>[e("div",sn,[e("div",null,[an,t(j,{modelValue:r.remainnings,"onUpdate:modelValue":[n[0]||(n[0]=d=>r.remainnings=d),n[1]||(n[1]=d=>V("remainnings"))],dense:"",outlined:"",mask:"#####",suffix:"pcs",placeholder:"0",type:"number",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[d=>!!d||"Remainnings out is required"],error:!!u.value.remainnings,"error-message":u.value.remainnings},null,8,["modelValue","rules","error","error-message"])]),e("div",null,[ln,t(j,{modelValue:r.otherProductOut,"onUpdate:modelValue":[n[2]||(n[2]=d=>r.otherProductOut=d),n[3]||(n[3]=d=>V("otherProductOut"))],dense:"",outlined:"",type:"number",mask:"#####",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[d=>!!d||"Product out is required"],error:!!u.value.otherProductOut,"error-message":u.value.otherProductOut},null,8,["modelValue","rules","error","error-message"])])]),e("div",on,[e("div",nn,[rn,t(j,{dense:"",outlined:"",readonly:"",label:s.value?s.value.beginnings:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[dn]),_:1},8,["label"])]),e("div",cn,[un,t(j,{dense:"",outlined:"",readonly:"",label:s.value?s.value.new_production:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[_n]),_:1},8,["label"])]),e("div",mn,[pn,t(j,{dense:"",outlined:"",readonly:"",label:s.value?Q(v)(s.value.price):"",style:{width:"150px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),_:1}),t(S,null,{default:a(()=>[e("div",vn,[t(N,{color:"red-6",label:"Ok",onClick:b})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var hn=Y(gn,[["__scopeId","data-v-30081a95"]]);const fn={class:"q-gutter-y-md"},yn={class:"row q-gutter-md"},xn={class:"row q-gutter-md"},bn={__name:"OtherPage",setup(i){const p=x(""),v=ge(),$=s=>{p.value=s},c=s=>{v.dialog({component:Te,componentProps:{category:s}})},f=s=>{v.dialog({component:Le,componentProps:{category:s}})};return(s,_)=>(g(),I("div",fn,[e("div",yn,[e("div",null,[t(Ne,{onUpdateSearch:$})]),e("div",xn,[e("div",null,[t(N,{class:"bg-gradient text-white",outlined:"",label:"Send Other Product to Branch",onClick:_[0]||(_[0]=T=>c("Other"))})]),e("div",null,[t(N,{class:"add-bg-gradient text-white",outlined:"",label:"Added Other Prod",onClick:_[1]||(_[1]=T=>f("Other"))})])])]),e("div",null,[t(hn,{filter:p.value},null,8,["filter"])])]))}};var wn=Y(bn,[["__scopeId","data-v-6d523fc5"]]);const $n={class:"text-h6 text-white"},vr={__name:"ProductsPage",setup(i){var s,_,T;const p=x("bread"),v=ae();Fe();const $=v.user,c=((s=$.device)==null?void 0:s.refence_id)||((T=(_=$.device)==null?void 0:_.reference)==null?void 0:T.id)||"0",f=async()=>{await v.fetchBranchProducts(c),console.log("sales report productsdsdsd breadProducts",v.breadProducts),console.log("sales report productsdsdsd selectaProducts",v.selectaProducts),console.log("sales report productsdsdsd nestleProducts",v.nestleProducts),console.log("sales report productsdsdsd othersProducts",v.othersProducts),console.log("sales report productsdsdsd softdrinksProducts",v.softdrinksProducts)};return Ke(async()=>{c&&await f()}),(U,r)=>(g(),M(H,{flat:""},{default:a(()=>[t(S,{style:{"background-color":"#ef4444"}},{default:a(()=>[e("div",$n,[t(K,{name:"fa-solid fa-store"}),J(" Store Branches ")])]),_:1}),t(S,null,{default:a(()=>[t(ft,{modelValue:p.value,"onUpdate:modelValue":r[0]||(r[0]=u=>p.value=u),dense:"",class:"bg-white","active-color":"red-6","indicator-color":"red-6",align:"justify"},{default:a(()=>[t(Ce,{name:"bread",label:"Bread"}),t(Ce,{name:"selecta",label:"Selecta"}),t(Ce,{name:"nestle",label:"Nestl\xE9"}),t(Ce,{name:"softdrinks",label:"Softdrinks"}),t(Ce,{name:"cake",label:"Cake /s"}),t(Ce,{name:"others",label:"Other /s"})]),_:1},8,["modelValue"])]),_:1}),t(S,null,{default:a(()=>[t(yt,{modelValue:p.value,"onUpdate:modelValue":r[1]||(r[1]=u=>p.value=u),animated:""},{default:a(()=>[t(be,{name:"bread"},{default:a(()=>[e("div",null,[t(Ma)])]),_:1}),t(be,{name:"selecta"},{default:a(()=>[e("div",null,[t(bl)])]),_:1}),t(be,{name:"nestle"},{default:a(()=>[e("div",null,[t(Wl)])]),_:1}),t(be,{name:"softdrinks"},{default:a(()=>[e("div",null,[t(Co)])]),_:1}),t(be,{name:"cake"},{default:a(()=>[t(Eo)]),_:1}),t(be,{name:"others"},{default:a(()=>[t(wn)]),_:1}),t(be)]),_:1},8,["modelValue"])]),_:1})]),_:1}))}};export{vr as default};
