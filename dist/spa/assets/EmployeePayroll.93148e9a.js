import{c as P,r as p,be as T,z,o as l,e as s,w as o,J as i,f as e,L as u,K as V,M as r,a3 as y,a0 as n,$ as f,ae as _}from"./index.640cd289.js";import{a as I,b as B,Q as E}from"./QTable.ba0bced2.js";import{Q as h,a as g}from"./QItem.87841ee7.js";import{Q as N}from"./QList.37d86745.js";import{Q as O}from"./QMenu.da23ba2c.js";import{Q as L}from"./QSpinnerDots.442bb5be.js";import{Q as $}from"./QPage.a9499a63.js";import{C as b}from"./ClosePopup.f9b47438.js";import"./EmployeePayroll.vue_vue_type_style_index_0_lang.54395201.js";import{u as A}from"./employee.0172f9cf.js";import{u as M}from"./dtr.5ea91c93.js";import{u as F}from"./use-quasar.69980ebb.js";import"./QVirtualScroll.63871001.js";import"./use-virtual-scroll.696c357e.js";import"./QSelect.c500afc7.js";import"./QItemLabel.2cf58cf5.js";import"./QChip.85660784.js";import"./selection.d4d4e593.js";import"./position-engine.0e326f2d.js";import"./axios.1b168828.js";const J={class:"q-pa-md bg-white rounded-borders"},K={class:"row items-center q-gutter-md q-mb-lg"},U={key:0},W={class:"row items-center no-wrap q-gutter-x-sm"},j={key:1,class:"text-center q-pa-xl text-grey-7"},G=i("div",{class:"text-h6 q-mt-md"},"No Payroll Records",-1),H=i("p",null," There is no Payroll Cut Off data for this employee in the selected period ",-1),X={key:1,class:"text-center q-pa-xl"},ve={__name:"EmployeePayroll",setup(Y){const v=F(),x=A(),q=P(()=>x.employees),w=p([]),Q=M(),c=T().params.employee_id||"",D=p(""),d=P(()=>Q.dtrCutOffData),m=p(!0);z(async()=>{if(!c){console.error("Employee ID is missing."),v.notify({type:"negative",message:"Could not load data: Employee ID not found."});return}try{await C(),await S()}catch(t){console.error("Error during initial data fetch:",t),v.notify({type:"negative",message:"Failed to load payroll data."})}});const C=async()=>{try{await x.fetchCertianEmployeeWithEmploymentTypeAndDesignation(c),w.value=q.value,console.log("Employee Designation Data Loaded:",w.value)}catch(t){throw console.error("Error fetching employee details:",t),t}},S=async()=>{m.value=!0;try{await Q.fetchDTRPayrollPerCutOff(c),console.log("payrollData",d.value)}catch(t){throw console.error("Error fetching payroll data:",t),t}finally{m.value=!1}},R=[{name:"payRuns",label:"Pay Runs",field:t=>`${t.from} to ${t.end}`,align:"left",sortable:!0,icon:"description"},{name:"number_of_days",label:"Number Of Days",field:t=>t.records.length,align:"left",sortable:!0,icon:"receipt_long"},{name:"action",label:"Action",field:"status",align:"left",icon:"bolt"}];return(t,k)=>(l(),s($,{padding:"",class:"bg-grey-2"},{default:o(()=>[i("div",J,[i("div",K,[e(V,{outlined:"",dense:"",modelValue:D.value,"onUpdate:modelValue":k[0]||(k[0]=a=>D.value=a),placeholder:"Search Payroll",class:"col-12 col-md-3"},{prepend:o(()=>[e(u,{name:"search"})]),_:1},8,["modelValue"]),e(r,{unelevated:"",color:"grey-3","text-color":"black",label:"Payment Period",icon:"calendar_today","icon-right":"expand_more","no-caps":""}),e(r,{unelevated:"",color:"grey-3","text-color":"black",label:"Payroll Status",icon:"analytics","icon-right":"expand_more","no-caps":""}),e(r,{unelevated:"",color:"grey-3","text-color":"black",label:"Advance Filter",icon:"filter_list","icon-right":"expand_more","no-caps":""})]),m.value?(l(),y("div",X,[e(L,{color:"primary",size:"2em"})])):(l(),y("div",U,[d.value.length>0?(l(),s(I,{key:0,rows:d.value,columns:R,"row-key":"id",flat:"",separator:"horizontal","rows-per-page-options":[0],"hide-bottom":"",class:"payroll-table"},{"top-right":o(()=>[e(r,{round:"",unelevated:"",color:"primary",icon:"add","text-color":"white",size:"sm"})]),"header-cell":o(a=>[e(B,{props:a,class:"text-grey-7"},{default:o(()=>[e(u,{name:a.col.icon,size:"1.2em",class:"q-mr-sm"},null,8,["name"]),n(" "+f(a.col.label),1)]),_:2},1032,["props"])]),"body-cell-payRuns":o(a=>[e(E,{props:a},{default:o(()=>[n(f(a.row.from)+" to "+f(a.row.end),1)]),_:2},1032,["props"])]),"body-cell-action":o(a=>[e(E,{props:a},{default:o(()=>[i("div",W,[e(r,{dense:"",label:"Run payroll",color:"dark",unelevated:"","no-caps":"",padding:"xs md",class:"action-button"}),e(r,{flat:"",round:"",dense:"",icon:"more_horiz",color:"grey-7",class:"q-ml-auto"},{default:o(()=>[e(O,null,{default:o(()=>[e(N,{dense:""},{default:o(()=>[_((l(),s(h,{clickable:""},{default:o(()=>[e(g,null,{default:o(()=>[n("View Details")]),_:1})]),_:1})),[[b]]),_((l(),s(h,{clickable:""},{default:o(()=>[e(g,null,{default:o(()=>[n("Edit")]),_:1})]),_:1})),[[b]]),_((l(),s(h,{clickable:""},{default:o(()=>[e(g,{class:"text-negative"},{default:o(()=>[n("Delete")]),_:1})]),_:1})),[[b]])]),_:1})]),_:1})]),_:1})])]),_:2},1032,["props"])]),_:1},8,["rows"])):(l(),y("div",j,[e(u,{name:"event_busy",size:"4em"}),G,H]))]))])]),_:1}))}};export{ve as default};
