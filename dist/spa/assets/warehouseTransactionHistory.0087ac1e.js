import{c as U,r as R,o as d,a3 as q,f as e,w as t,Q as L,I as V,J as a,$ as r,M as F,a0 as c,be as O,a2 as W,K as me,aJ as _e,ae as ie,a4 as z,N as te,O as E,R as G,z as le,L as ee,e as Q,a5 as Y,a1 as fe,bc as de}from"./index.72d981b3.js";import{Q as X}from"./QTab.96f3be83.js";import{Q as ve}from"./QTabs.e669f4b1.js";import{Q as Z}from"./QTabPanel.b59058e4.js";import{Q as ge}from"./QTabPanels.b98e9886.js";import{Q as se}from"./QSpinnerDots.fc848009.js";import{Q as M}from"./QBadge.f7159c41.js";import{Q as re}from"./QScrollArea.32f8b4dd.js";import{u as K}from"./warehouse.d4afc2d1.js";import{u as J}from"./premix.a7e45651.js";import{q as oe}from"./date.e086dbab.js";import{u as ne}from"./use-quasar.78e9dc33.js";import{a as p}from"./QSelect.c0352ac9.js";import{a as A,b as v}from"./QMenu.867b4ceb.js";import{Q as H}from"./QList.f6356ec4.js";import{C as ce}from"./ClosePopup.eb2ed605.js";import{u as ae}from"./use-dialog-plugin-component.017fd126.js";import{_ as B}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as he,a as Se}from"./QTable.bc4da78d.js";import{u as pe}from"./stock-delivery.fc439e8a.js";import{Q as ye}from"./QPagination.52ea0b97.js";import"./QResizeObserver.0b5c0b4d.js";import"./rtl.276c3f1b.js";import"./use-panel.ed78d4d9.js";import"./touch.9135741d.js";import"./selection.b0a45923.js";import"./use-render-cache.3aae9b27.js";import"./QScrollObserver.be9fe3ad.js";import"./TouchPan.2df8016f.js";import"./axios.ca3f3442.js";import"./QChip.32f77c60.js";import"./use-virtual-scroll.92f3d081.js";import"./position-engine.2d1ee2f6.js";import"./QVirtualScroll.62f83a57.js";const xe=l=>(E("data-v-a39c1e44"),l=l(),G(),l),Ne={class:"row justify-between"},Re={class:"text-h6"},Ve=xe(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),Ie=xe(()=>a("div",{class:"text-h6"},"Decline Report",-1)),Qe={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){const{dialogRef:P,onDialogHide:I,onDialogOK:D,onDialogCancel:w}=ae(),m=K(),N=U(()=>m.user);console.log("userdata",N.value);const $=N.value.data.employee_id,k=J(),h=l;console.log("report",h.report);const x=R(!1),b=R(""),C=R(!1),y=()=>{C.value=!0},s=n=>{const f=S=>S?S.charAt(0).toUpperCase()+S.slice(1).toLowerCase():"",i=n.firstname?f(n.firstname):"No Firstname",u=n.middlename?f(n.middlename).charAt(0)+".":"",g=n.lastname?f(n.lastname):"No Lastname";return`${i} ${u} ${g}`},_=async()=>{try{const n={id:h.report.id,request_premixes_id:h.report.id,branch_premix_id:h.report.branch_premix_id,employee_id:$,status:h.report.status,quantity:h.report.quantity,warehouse_id:h.report.warehouse_id,notes:"Confirmed Premix"},f=await k.confirmPremix(n);console.log("Report confirmedss:",f),te.create({type:"positive",message:"Report confirmed successfully"}),x.value=!1}catch(n){console.error(n)}},o=async()=>{const n={id:h.report.id,request_premixes_id:h.report.id,branch_premix_id:h.report.branch_premix_id,employee_id:$,status:"decline",quantity:h.report.quantity,warehouse_id:h.report.warehouse_id,notes:b.value};await k.declinePremix(n),C.value=!1};return(n,f)=>(d(),q(z,null,[e(W,{ref_key:"dialogRef",ref:P,modelValue:x.value,"onUpdate:modelValue":f[1]||(f[1]=i=>x.value=i),onHide:O(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",Ne,[a("div",Re,r(l.report.name),1),e(F,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:f[0]||(f[0]=i=>x.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+r(s(l.report.employee)),1),a("div",null," Branch: "+r(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[c(" Status: "),e(M,{color:"warning",outlined:""},{default:t(()=>[c(r(l.report.status),1)]),_:1})])]),_:1}),e(V,null,{default:t(()=>[Ve]),_:1}),e(V,null,{default:t(()=>[e(H,{dense:"",separator:"",class:"box"},{default:t(()=>[e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-h6"},{default:t(()=>[c(r(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-h6"},{default:t(()=>[c(r(l.report.quantity),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(V,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(F,{color:"negative",label:"Decline",class:"action-btn",onClick:y}),e(F,{color:"positive",label:"Confirm",class:"action-btn",onClick:_})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]),e(W,{modelValue:C.value,"onUpdate:modelValue":f[3]||(f[3]=i=>C.value=i)},{default:t(()=>[e(L,null,{default:t(()=>[e(V,null,{default:t(()=>[Ie]),_:1}),e(V,null,{default:t(()=>[e(me,{modelValue:b.value,"onUpdate:modelValue":f[2]||(f[2]=i=>b.value=i),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[i=>!!i||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(_e,{align:"right"},{default:t(()=>[ie(e(F,{flat:"",label:"Cancel",color:"primary"},null,512),[[ce]]),e(F,{flat:"",label:"Confirm",color:"negative",onClick:o})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Te=B(Qe,[["__scopeId","data-v-a39c1e44"]]);const Ae=l=>(E("data-v-49efd728"),l=l(),G(),l),Ue={key:0,class:"spinner-wrapper"},je={key:1},Fe={key:0,class:"data-error"},Le=Ae(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),ze={class:"q-gutter-md q-ma-md"},Me={class:"text-h6"},Ye={class:"row justify-between"},He={class:"text-subtitle1"},Be={class:"text-subtitle1"},Oe={__name:"PendingPage",setup(l){const P=K(),I=U(()=>P.user);console.log("userdata",I.value);const D=J(),w=U(()=>D.pendingPremixData),m=I.value.device.reference_id;console.log("warehouseId",m);const N=R("pending"),$=R(!0),k=R(!1),h=ne();le(async()=>{m&&await C()});const x=s=>oe.formatDate(s,"MMM DD, YYYY || hh:mm A"),b=s=>{const _=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",o=s.firstname?_(s.firstname):"No Firstname",n=s.middlename?_(s.middlename).charAt(0)+".":"",f=s.lastname?_(s.lastname):"No Lastname";return`${o} ${n} ${f}`},C=async()=>{try{$.value=!0,await D.fetchPendingPremix(m,N.value),w.value.length||(k.value=!0)}catch{k.value=!0}finally{$.value=!1}},y=s=>{h.dialog({component:Te,componentProps:{report:s}})};return(s,_)=>$.value?(d(),q("div",Ue,[e(se,{size:"50px",color:"primary"})])):(d(),q("div",je,[w.value.length===0?(d(),q("div",Fe,[e(ee,{name:"warning",color:"warning",size:"4em"}),Le])):(d(),Q(re,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",ze,[(d(!0),q(z,null,Y(w.value,(o,n)=>(d(),Q(L,{key:n,onClick:f=>y(o)},{default:t(()=>[e(V,{class:"q-gutter-sm"},{default:t(()=>[a("div",Me,r(o.name),1),a("div",Ye,[a("div",He,r(x(o.created_at)),1),a("div",Be,r(o.branch_premix.branch_recipe.branch.name)+" - "+r(b(o.employee)),1),a("div",null,[e(M,{color:"warning",outlined:""},{default:t(()=>[c(" Pending ")]),_:1})])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Ke=B(Oe,[["__scopeId","data-v-49efd728"]]);const Ee={class:"row justify-between"},Ge={class:"text-h6"},We=a("div",{class:"text-h6",align:"center"},"Premix",-1),Je=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),Xe={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var o,n,f;const{dialogRef:P,onDialogHide:I,onDialogOK:D,onDialogCancel:w}=ae(),m=R(!1),N=K(),$=U(()=>N.user);console.log("userdata",$.value);const k=$.value.data.employee_id,h=J(),x=l,b=i=>{const u=Number(i);return isNaN(u)?"":(u%1===0,u.toString())},C=(i,u)=>{if(u==="Pcs")return`${i} pcs`;if(u==="Grams"){if(i>=1e3){let g=i/1e3;return`${g%1===0?g.toString():g.toString().replace(/^0+/,"")} kgs`}return`${i} g`}return`${i} ${u}`},y=((f=(n=(o=x.report)==null?void 0:o.branch_premix)==null?void 0:n.branch_recipe)==null?void 0:f.ingredient_groups)||"Undefined";console.log("ingrdientsData",y),console.log("report to proceed",x.report);const s=i=>{const u=j=>j?j.charAt(0).toUpperCase()+j.slice(1).toLowerCase():"",g=i.firstname?u(i.firstname):"No Firstname",S=i.middlename?u(i.middlename).charAt(0)+".":"",T=i.lastname?u(i.lastname):"No Lastname";return`${g} ${S} ${T}`},_=async()=>{try{const i={id:x.report.id,request_premixes_id:x.report.id,branch_premix_id:x.report.branch_premix_id,employee_id:k,status:"process",quantity:x.report.quantity,warehouse_id:x.report.warehouse_id,notes:"Process Premix"},u=await h.processPremix(i);console.log("Report Process:",u),te.create({type:"positive",message:"Premix proceed to process successfully"}),m.value=!1}catch(i){console.error(i)}};return(i,u)=>(d(),Q(W,{ref_key:"dialogRef",ref:P,modelValue:m.value,"onUpdate:modelValue":u[1]||(u[1]=g=>m.value=g),onHide:O(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",Ee,[a("div",Ge,r(l.report.name),1),e(F,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:u[0]||(u[0]=g=>m.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+r(s(l.report.employee)),1),a("div",null," Branch: "+r(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[c(" Status: "),e(M,{color:"green",outlined:""},{default:t(()=>[c(r(l.report.status),1)]),_:1})])]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[We,e(H,{dense:"",separator:"",class:"box"},{default:t(()=>[e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-h6"},{default:t(()=>[c(r(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-h6"},{default:t(()=>[c(r(b(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[Je,e(H,{dense:"",separator:"",class:"box"},{default:t(()=>[e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Quantity")]),_:1})]),_:1})]),_:1}),(d(!0),q(z,null,Y(O(y),(g,S)=>(d(),Q(A,{key:S},{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-subtitle1"},{default:t(()=>[c(r(g.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(p,{class:"text-subtitle1",align:"left"},{default:t(()=>[c(r(g.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(p,{class:"text-subtitle1"},{default:t(()=>[c(r(C(g.quantity*l.report.quantity,g.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(V,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ie(e(F,{flat:"",label:"Cancel",color:"negative"},null,512),[[ce]]),e(F,{color:"primary",label:"Process",class:"action-btn",onClick:_})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const be=l=>(E("data-v-6509b5ec"),l=l(),G(),l),Ze={key:0,class:"spinner-wrapper"},et={key:1},tt={key:0,class:"data-error"},at=be(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),lt={class:"q-gutter-md q-ma-md"},st={class:"row justify-between"},ot={class:"text-h6"},nt={class:"row justify-between"},rt={class:"text-subtitle1"},it={class:"text-subtitle1"},ct={class:"row q-gutter-x-md"},dt=be(()=>a("div",{class:"text-subtitle1"},"Confirmed By:",-1)),ut={class:"text-overline text-weight-bold"},mt={__name:"ConfirmPage",setup(l){const P=K(),D=U(()=>P.user).value.device.reference_id;console.log("warehouseId",D);const w=J(),m=U(()=>w.confirmPremixData);console.log("confirmedPremixData",m.value);const N=R("confirmed"),$=R(!0),k=R(!1),h=ne();le(async()=>{D&&await C()});const x=s=>oe.formatDate(s,"MMM DD, YYYY || hh:mm A"),b=s=>{const _=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",o=s.firstname?_(s.firstname):"No Firstname",n=s.middlename?_(s.middlename).charAt(0)+".":"",f=s.lastname?_(s.lastname):"No Lastname";return`${o} ${n} ${f}`},C=async()=>{try{$.value=!0,await w.fetchConfirmPremix(D,N.value),m.value.length||(k.value=!0)}catch{k.value=!0}finally{$.value=!1}},y=s=>{h.dialog({component:Xe,componentProps:{report:s}})};return(s,_)=>$.value?(d(),q("div",Ze,[e(se,{size:"50px",color:"primary"})])):(d(),q("div",et,[m.value.length===0?(d(),q("div",tt,[e(ee,{name:"warning",color:"warning",size:"4em"}),at])):(d(),Q(re,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",lt,[(d(!0),q(z,null,Y(m.value,(o,n)=>(d(),Q(L,{key:n,onClick:f=>y(o)},{default:t(()=>[e(V,{class:"q-gutter-sm"},{default:t(()=>[a("div",st,[a("div",ot,r(o.name),1),a("div",null,[e(M,{color:"green",outlined:""},{default:t(()=>[c(r(o.status),1)]),_:2},1024)])]),a("div",nt,[a("div",rt,r(x(o.created_at)),1),a("div",it,r(o.branch_premix.branch_recipe.branch.name)+" - "+r(b(o.employee)),1),a("div",ct,[dt,a("div",ut,r(b(o.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var _t=B(mt,[["__scopeId","data-v-6509b5ec"]]);const ft={class:"row justify-between"},pt={class:"text-h6"},vt=a("div",{class:"text-h6",align:"center"},"Premix",-1),gt=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),ht={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var b,C,y;const{dialogRef:P,onDialogHide:I,onDialogOK:D,onDialogCancel:w}=ae(),m=R(!1),N=l,$=s=>{const _=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",o=s.firstname?_(s.firstname):"No Firstname",n=s.middlename?_(s.middlename).charAt(0)+".":"",f=s.lastname?_(s.lastname):"No Lastname";return`${o} ${n} ${f}`},k=s=>{const _=Number(s);return isNaN(_)?"":(_%1===0,_.toString())},h=(s,_)=>{if(_==="Pcs")return`${s} pcs`;if(_==="Grams"){if(s>=1e3){let o=s/1e3;return`${o%1===0?o.toString():o.toString().replace(/^0+/,"")} kgs`}return`${s} g`}return`${s} ${_}`},x=((y=(C=(b=N.report)==null?void 0:b.branch_premix)==null?void 0:C.branch_recipe)==null?void 0:y.ingredient_groups)||"Undefined";return console.log("ingrdientsData",x),(s,_)=>(d(),q("div",null,[e(W,{ref_key:"dialogRef",ref:P,modelValue:m.value,"onUpdate:modelValue":_[1]||(_[1]=o=>m.value=o),onHide:O(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",ft,[a("div",pt,r(l.report.name),1),e(F,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=o=>m.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+r($(l.report.employee)),1),a("div",null," Branch: "+r(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[c(" Status: "),e(M,{color:"red-6",outlined:""},{default:t(()=>[c(r(l.report.status),1)]),_:1})])]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[vt,e(H,{dense:"",separator:"",class:"box"},{default:t(()=>[e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-h6"},{default:t(()=>[c(r(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-h6"},{default:t(()=>[c(r(k(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[gt,e(H,{dense:"",separator:"",class:"box"},{default:t(()=>[e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Quantity")]),_:1})]),_:1})]),_:1}),(d(!0),q(z,null,Y(O(x),(o,n)=>(d(),Q(A,{key:n},{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-subtitle1"},{default:t(()=>[c(r(o.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(p,{class:"text-subtitle1",align:"left"},{default:t(()=>[c(r(o.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(p,{class:"text-subtitle1"},{default:t(()=>[c(r(h(o.quantity*l.report.quantity,o.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])]))}};const $e=l=>(E("data-v-edbdc022"),l=l(),G(),l),yt={key:0,class:"spinner-wrapper"},xt={key:1},bt={key:0,class:"data-error"},$t=$e(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),wt={class:"q-gutter-md q-ma-md"},kt={class:"row justify-between"},Dt={class:"text-h6"},Ct={class:"row justify-between"},Pt={class:"text-subtitle1"},qt={class:"text-subtitle1"},St={class:"row q-gutter-x-md"},Nt=$e(()=>a("div",{class:"text-subtitle1"},"Declined By:",-1)),Rt={class:"text-overline text-weight-bold"},Vt={__name:"DeclinePage",setup(l){const P=K(),D=U(()=>P.user).value.device.reference_id;console.log("warehouseId",D);const w=J(),m=U(()=>w.declinePremixData);console.log("declinedPremixData",m.value);const N=R("declined"),$=R(!0),k=R(!1),h=ne();le(async()=>{D&&await C()});const x=s=>oe.formatDate(s,"MMM DD, YYYY || hh:mm A"),b=s=>{const _=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",o=s.firstname?_(s.firstname):"No Firstname",n=s.middlename?_(s.middlename).charAt(0)+".":"",f=s.lastname?_(s.lastname):"No Lastname";return`${o} ${n} ${f}`},C=async()=>{try{$.value=!0,await w.fetchDeclinePremix(D,N.value),m.value.length||(k.value=!0)}catch{k.value=!0}finally{$.value=!1}},y=s=>{h.dialog({component:ht,componentProps:{report:s}})};return(s,_)=>$.value?(d(),q("div",yt,[e(se,{size:"50px",color:"primary"})])):(d(),q("div",xt,[m.value.length===0?(d(),q("div",bt,[e(ee,{name:"warning",color:"warning",size:"4em"}),$t])):(d(),Q(re,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",wt,[(d(!0),q(z,null,Y(m.value,(o,n)=>(d(),Q(L,{key:n,onClick:f=>y(o)},{default:t(()=>[e(V,{class:"q-gutter-sm"},{default:t(()=>[a("div",kt,[a("div",Dt,r(o.name),1),a("div",null,[e(M,{color:"red-6",outlined:""},{default:t(()=>[c(r(o.status),1)]),_:2},1024)])]),a("div",Ct,[a("div",Pt,r(x(o.created_at)),1),a("div",qt,r(o.branch_premix.branch_recipe.branch.name)+" - "+r(b(o.employee)),1),a("div",St,[Nt,a("div",Rt,r(b(o.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var It=B(Vt,[["__scopeId","data-v-edbdc022"]]);const Qt={class:"row justify-between"},Tt={class:"text-h6"},At=a("div",{class:"text-h6",align:"center"},"Premix",-1),Ut=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),jt={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var n,f,i;const{dialogRef:P,onDialogHide:I,onDialogOK:D,onDialogCancel:w}=ae(),m=K(),N=U(()=>m.user);console.log("userdata",N.value);const $=N.value.data.employee_id,k=J(),h=l;console.log("report",h.report);const x=R(!1),b=((i=(f=(n=h.report)==null?void 0:n.branch_premix)==null?void 0:f.branch_recipe)==null?void 0:i.ingredient_groups)||"Undefined";console.log("ingrdientsData",b);const C=u=>{const g=ue=>ue?ue.charAt(0).toUpperCase()+ue.slice(1).toLowerCase():"",S=u.firstname?g(u.firstname):"No Firstname",T=u.middlename?g(u.middlename).charAt(0)+".":"",j=u.lastname?g(u.lastname):"No Lastname";return`${S} ${T} ${j}`},y=u=>{const g=Number(u);return isNaN(g)?"":(g%1===0,g.toString())},s=(u,g)=>{if(g==="Pcs")return`${u} pcs`;if(g==="Grams"){if(u>=1e3){let S=u/1e3;return`${S%1===0?S.toString():S.toString().replace(/^0+/,"")} kgs`}return`${u} g`}return`${u} ${g}`},_=U(()=>b.map(u=>{const g=parseFloat(u.quantity)*parseFloat(h.report.quantity);return{...u,totalQuantity:g,formattedQuantity:s(g,u.ingredient.unit)}}));console.log("computedIngredients",_.value);const o=async()=>{try{const u={id:h.report.id,request_premixes_id:h.report.id,branch_premix_id:h.report.branch_premix_id,employee_id:$,status:"completed",quantity:h.report.quantity,warehouse_id:h.report.warehouse_id,notes:"Completed Premix",ingredients:_.value.map(S=>({ingredient_id:S.ingredient.id,quantity:S.totalQuantity,unit:S.ingredient.unit}))},g=await k.completedPremix(u);console.log("Report Process:",g),te.create({type:"positive",message:"Premix completed to process successfully"}),x.value=!1}catch(u){console.error(u),te.create({type:"negative",message:"An error occurred while processing the premix."})}};return(u,g)=>(d(),Q(W,{ref_key:"dialogRef",ref:P,modelValue:x.value,"onUpdate:modelValue":g[1]||(g[1]=S=>x.value=S),onHide:O(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",Qt,[a("div",Tt,r(l.report.name),1),e(F,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:g[0]||(g[0]=S=>x.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+r(C(l.report.employee)),1),a("div",null," Branch: "+r(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[c(" Status: "),e(M,{color:"primary",outlined:""},{default:t(()=>[c(r(l.report.status),1)]),_:1})])]),_:1}),e(V,null,{default:t(()=>[At]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[e(H,{dense:"",separator:"",class:"box"},{default:t(()=>[e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-h6"},{default:t(()=>[c(r(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-h6"},{default:t(()=>[c(r(y(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[a("div",null,[Ut,e(H,{dense:"",separator:"",class:"box"},{default:t(()=>[e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Quantity")]),_:1})]),_:1})]),_:1}),(d(!0),q(z,null,Y(_.value,(S,T)=>(d(),Q(A,{key:T},{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-subtitle1"},{default:t(()=>[c(r(S.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(p,{class:"text-subtitle1",align:"left"},{default:t(()=>[c(r(S.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(p,{class:"text-subtitle1"},{default:t(()=>[c(r(s(S.quantity*h.report.quantity,S.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1}),e(V,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ie(e(F,{flat:"",label:"Cancel",color:"primary"},null,512),[[ce]]),e(F,{color:"cyan-7",label:"Completed",class:"action-btn",onClick:o})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const we=l=>(E("data-v-4a448b9b"),l=l(),G(),l),Ft={key:0,class:"spinner-wrapper"},Lt={key:1},zt={key:0,class:"data-error"},Mt=we(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Yt={class:"q-gutter-md q-ma-md"},Ht={class:"row justify-between"},Bt={class:"text-h6"},Ot={class:"row justify-between"},Kt={class:"text-subtitle1"},Et={class:"text-subtitle1"},Gt={class:"row q-gutter-x-md"},Wt=we(()=>a("div",{class:"text-subtitle1"},"Process By:",-1)),Jt={class:"text-overline text-weight-bold"},Xt={__name:"ProcessPage",setup(l){const P=K(),D=U(()=>P.user).value.device.reference_id;console.log("warehouseId",D);const w=J(),m=U(()=>w.processPremixData);console.log("processPremixData",m.value);const N=R("process"),$=R(!0),k=R(!1),h=ne();le(async()=>{D&&await C()});const x=s=>oe.formatDate(s,"MMM DD, YYYY || hh:mm A"),b=s=>{const _=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",o=s.firstname?_(s.firstname):"No Firstname",n=s.middlename?_(s.middlename).charAt(0)+".":"",f=s.lastname?_(s.lastname):"No Lastname";return`${o} ${n} ${f}`},C=async()=>{try{$.value=!0,await w.fetchProcessPremix(D,N.value),m.value.length||(k.value=!0)}catch{k.value=!0}finally{$.value=!1}},y=s=>{h.dialog({component:jt,componentProps:{report:s}})};return(s,_)=>$.value?(d(),q("div",Ft,[e(se,{size:"50px",color:"primary"})])):(d(),q("div",Lt,[m.value.length===0?(d(),q("div",zt,[e(ee,{name:"warning",color:"warning",size:"4em"}),Mt])):(d(),Q(re,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Yt,[(d(!0),q(z,null,Y(m.value,(o,n)=>(d(),Q(L,{key:n,onClick:f=>y(o)},{default:t(()=>[e(V,{class:"q-gutter-sm"},{default:t(()=>[a("div",Ht,[a("div",Bt,r(o.name),1),a("div",null,[e(M,{color:"primary",outlined:""},{default:t(()=>[c(r(o.status),1)]),_:2},1024)])]),a("div",Ot,[a("div",Kt,r(x(o.created_at)),1),a("div",Et,r(o.branch_premix.branch_recipe.branch.name)+" - "+r(b(o.employee)),1),a("div",Gt,[Wt,a("div",Jt,r(b(o.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Zt=B(Xt,[["__scopeId","data-v-4a448b9b"]]);const ea={class:"row justify-between"},ta={class:"text-h6"},aa=a("div",{class:"text-h6",align:"center"},"Premix",-1),la=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),sa={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var o,n,f;const{dialogRef:P,onDialogHide:I,onDialogOK:D,onDialogCancel:w}=ae(),m=R(!1),N=K(),$=U(()=>N.user);console.log("userdata",$.value);const k=$.value.data.employee_id,h=J(),x=l,b=i=>{const u=Number(i);return isNaN(u)?"":(u%1===0,u.toString())},C=(i,u)=>{if(u==="Pcs")return`${i} pcs`;if(u==="Grams"){if(i>=1e3){let g=i/1e3;return`${g%1===0?g.toString():g.toString().replace(/^0+/,"")} kgs`}return`${i} g`}return`${i} ${u}`},y=((f=(n=(o=x.report)==null?void 0:o.branch_premix)==null?void 0:n.branch_recipe)==null?void 0:f.ingredient_groups)||"Undefined";console.log("ingrdientsData",y),console.log("report to proceed",x.report);const s=i=>{const u=j=>j?j.charAt(0).toUpperCase()+j.slice(1).toLowerCase():"",g=i.firstname?u(i.firstname):"No Firstname",S=i.middlename?u(i.middlename).charAt(0)+".":"",T=i.lastname?u(i.lastname):"No Lastname";return`${g} ${S} ${T}`},_=async()=>{try{const i={id:x.report.id,request_premixes_id:x.report.id,branch_premix_id:x.report.branch_premix_id,employee_id:k,status:"to deliver",quantity:x.report.quantity,warehouse_id:x.report.warehouse_id,notes:"To-Deliver Premix"},u=await h.toDeliverPremix(i);console.log("Report To Deliver:",u),te.create({type:"positive",message:"Premix To Deliver to process successfully"}),m.value=!1}catch(i){console.error(i)}};return(i,u)=>(d(),q("div",null,[e(W,{ref_key:"dialogRef",ref:P,modelValue:m.value,"onUpdate:modelValue":u[1]||(u[1]=g=>m.value=g),onHide:O(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",ea,[a("div",ta,r(l.report.name),1),e(F,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:u[0]||(u[0]=g=>m.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+r(s(l.report.employee)),1),a("div",null," Branch: "+r(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[c(" Status: "),e(M,{color:"black",outlined:""},{default:t(()=>[c(r(l.report.status),1)]),_:1})])]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[aa,e(H,{dense:"",separator:"",class:"box"},{default:t(()=>[e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-h6"},{default:t(()=>[c(r(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-h6"},{default:t(()=>[c(r(b(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[la,e(H,{dense:"",separator:"",class:"box"},{default:t(()=>[e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Quantity")]),_:1})]),_:1})]),_:1}),(d(!0),q(z,null,Y(O(y),(g,S)=>(d(),Q(A,{key:S},{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-subtitle1"},{default:t(()=>[c(r(g.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(p,{class:"text-subtitle1",align:"left"},{default:t(()=>[c(r(g.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(p,{class:"text-subtitle1"},{default:t(()=>[c(r(C(g.quantity*l.report.quantity,g.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(V,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ie(e(F,{flat:"",label:"Cancel",color:"negative"},null,512),[[ce]]),e(F,{color:"dark",label:"TO-Deliver",class:"action-btn",onClick:_})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])]))}};const ke=l=>(E("data-v-28394f03"),l=l(),G(),l),oa={key:0,class:"spinner-wrapper"},na={key:1},ra={key:0,class:"data-error"},ia=ke(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),ca={class:"q-gutter-md q-ma-md"},da={class:"row justify-between"},ua={class:"text-h6"},ma={class:"row justify-between"},_a={class:"text-subtitle1"},fa={class:"text-subtitle1"},pa={class:"row q-gutter-x-md"},va=ke(()=>a("div",{class:"text-subtitle1"},"Completed By:",-1)),ga={class:"text-overline text-weight-bold"},ha={__name:"CompletedPage",setup(l){const P=K(),D=U(()=>P.user).value.device.reference_id;console.log("warehouseId",D);const w=J(),m=U(()=>w.completedPremixData);console.log("completedPremixData",m.value);const N=R("completed"),$=R(!0),k=R(!1),h=ne();le(async()=>{D&&await C()});const x=s=>oe.formatDate(s,"MMM DD, YYYY || hh:mm A"),b=s=>{const _=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",o=s.firstname?_(s.firstname):"No Firstname",n=s.middlename?_(s.middlename).charAt(0)+".":"",f=s.lastname?_(s.lastname):"No Lastname";return`${o} ${n} ${f}`},C=async()=>{try{$.value=!0,await w.fetchCompletedPremix(D,N.value),m.value.length||(k.value=!0)}catch{k.value=!0}finally{$.value=!1}},y=s=>{h.dialog({component:sa,componentProps:{report:s}})};return(s,_)=>$.value?(d(),q("div",oa,[e(se,{size:"50px",color:"primary"})])):(d(),q("div",na,[m.value.length===0?(d(),q("div",ra,[e(ee,{name:"warning",color:"warning",size:"4em"}),ia])):(d(),Q(re,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",ca,[(d(!0),q(z,null,Y(m.value,(o,n)=>(d(),Q(L,{key:n,onClick:f=>y(o)},{default:t(()=>[e(V,{class:"q-gutter-sm"},{default:t(()=>[a("div",da,[a("div",ua,r(o.name),1),a("div",null,[e(M,{color:"dark",outlined:""},{default:t(()=>[c(r(o.status),1)]),_:2},1024)])]),a("div",ma,[a("div",_a,r(x(o.created_at)),1),a("div",fa,r(o.branch_premix.branch_recipe.branch.name)+" - "+r(b(o.employee)),1),a("div",pa,[va,a("div",ga,r(b(o.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var ya=B(ha,[["__scopeId","data-v-28394f03"]]);const xa={class:"row justify-between"},ba={class:"text-h6"},$a=a("div",{class:"text-h6",align:"center"},"Premix",-1),wa=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),ka={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var s,_,o;const{dialogRef:P,onDialogHide:I}=ae(),D=R(!1),w=K(),m=U(()=>w.user);console.log("userdata",m.value);const N=m.value.data.employee_id,$=J(),k=l;console.log("props report",k.report);const h=n=>{const f=Number(n);return isNaN(f)?"":(f%1===0,f.toString())},x=(n,f)=>{if(f==="Pcs")return`${n} pcs`;if(f==="Grams"){if(n>=1e3){let i=n/1e3;return`${i%1===0?i.toString():i.toString().replace(/^0+/,"")} kgs`}return`${n} g`}return`${n} ${f}`},b=((o=(_=(s=k.report)==null?void 0:s.branch_premix)==null?void 0:_.branch_recipe)==null?void 0:o.ingredient_groups)||"Undefined";console.log("ingrdientsData",b),console.log("report to proceed",k.report);const C=n=>{const f=S=>S?S.charAt(0).toUpperCase()+S.slice(1).toLowerCase():"",i=n.firstname?f(n.firstname):"No Firstname",u=n.middlename?f(n.middlename).charAt(0)+".":"",g=n.lastname?f(n.lastname):"No Lastname";return`${i} ${u} ${g}`},y=async()=>{try{const n={id:k.report.id,request_premixes_id:k.report.id,branch_premix_id:k.report.branch_premix_id,employee_id:N,status:"to receive",quantity:k.report.quantity,warehouse_id:k.report.warehouse_id,notes:"To Receive Premix"},f=await $.toReceivePremix(n);console.log("Report Process:",f),te.create({type:"positive",message:"Premix to receive to process successfully"}),D.value=!1}catch(n){console.error(n)}};return(n,f)=>(d(),Q(W,{ref_key:"dialogRef",ref:P,modelValue:D.value,"onUpdate:modelValue":f[1]||(f[1]=i=>D.value=i),onHide:O(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",xa,[a("div",ba,r(l.report.name),1),e(F,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:f[0]||(f[0]=i=>D.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+r(C(l.report.employee)),1),a("div",null," Branch: "+r(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[c(" Status: "),e(M,{color:"brown-9",outlined:""},{default:t(()=>[c(r(l.report.status),1)]),_:1})])]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[$a,e(H,{dense:"",separator:"",class:"box"},{default:t(()=>[e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-h6"},{default:t(()=>[c(r(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-h6"},{default:t(()=>[c(r(h(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[wa,e(H,{dense:"",separator:"",class:"box"},{default:t(()=>[e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Quantity")]),_:1})]),_:1})]),_:1}),(d(!0),q(z,null,Y(O(b),(i,u)=>(d(),Q(A,{key:u},{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-subtitle1"},{default:t(()=>[c(r(i.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(p,{class:"text-subtitle1",align:"left"},{default:t(()=>[c(r(i.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(p,{class:"text-subtitle1"},{default:t(()=>[c(r(x(i.quantity*l.report.quantity,i.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(V,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ie(e(F,{flat:"",label:"Cancel",color:"negative"},null,512),[[ce]]),e(F,{color:"brown-9",label:"TO Receive",class:"action-btn",onClick:y})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const De=l=>(E("data-v-f26fc562"),l=l(),G(),l),Da={key:0,class:"spinner-wrapper"},Ca={key:1},Pa={key:0,class:"data-error"},qa=De(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Sa={class:"q-gutter-md q-ma-md"},Na={class:"row justify-between"},Ra={class:"text-h6"},Va={class:"row justify-between"},Ia={class:"text-subtitle1"},Qa={class:"text-subtitle1"},Ta={class:"row q-gutter-x-md"},Aa=De(()=>a("div",{class:"text-subtitle1"},"Completed By:",-1)),Ua={class:"text-overline text-weight-bold"},ja={__name:"ToDeliverPage",setup(l){const P=K(),D=U(()=>P.user).value.device.reference_id;console.log("warehouseIssd",D);const w=J(),m=U(()=>w.toDeliverPremixData);console.log("toDeliverPremixData",m.value);const N=R("to deliver"),$=R(!0),k=R(!1),h=ne();le(async()=>{D&&await C()});const x=s=>oe.formatDate(s,"MMM DD, YYYY || hh:mm A"),b=s=>{const _=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",o=s.firstname?_(s.firstname):"No Firstname",n=s.middlename?_(s.middlename).charAt(0)+".":"",f=s.lastname?_(s.lastname):"No Lastname";return`${o} ${n} ${f}`},C=async()=>{try{$.value=!0,await w.fetchToDeliverPremix(D,N.value),m.value.length||(k.value=!0)}catch{k.value=!0}finally{$.value=!1}},y=s=>{h.dialog({component:ka,componentProps:{report:s}})};return(s,_)=>$.value?(d(),q("div",Da,[e(se,{size:"50px",color:"primary"})])):(d(),q("div",Ca,[m.value.length===0?(d(),q("div",Pa,[e(ee,{name:"warning",color:"warning",size:"4em"}),qa])):(d(),Q(re,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Sa,[(d(!0),q(z,null,Y(m.value,(o,n)=>(d(),Q(L,{key:n,onClick:f=>y(o)},{default:t(()=>[e(V,{class:"q-gutter-sm"},{default:t(()=>[a("div",Na,[a("div",Ra,r(o.name),1),a("div",null,[e(M,{color:"brown-9",outlined:""},{default:t(()=>[c(r(o.status),1)]),_:2},1024)])]),a("div",Va,[a("div",Ia,r(x(o.created_at)),1),a("div",Qa,r(o.branch_premix.branch_recipe.branch.name)+" - "+r(b(o.employee)),1),a("div",Ta,[Aa,a("div",Ua,r(b(o.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Fa=B(ja,[["__scopeId","data-v-f26fc562"]]);const La={class:"row justify-between"},za={class:"text-h6"},Ma=a("div",{class:"text-h6",align:"center"},"Premix",-1),Ya=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),Ha={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var b,C,y;const{dialogRef:P,onDialogHide:I}=ae(),D=R(!1),w=K(),m=U(()=>w.user);console.log("userdata",m.value),m.value.data.employee_id,J();const N=l,$=s=>{const _=Number(s);return isNaN(_)?"":(_%1===0,_.toString())},k=(s,_)=>{if(_==="Pcs")return`${s} pcs`;if(_==="Grams"){if(s>=1e3){let o=s/1e3;return`${o%1===0?o.toString():o.toString().replace(/^0+/,"")} kgs`}return`${s} g`}return`${s} ${_}`},h=((y=(C=(b=N.report)==null?void 0:b.branch_premix)==null?void 0:C.branch_recipe)==null?void 0:y.ingredient_groups)||"Undefined";console.log("ingrdientsData",h),console.log("report to proceed",N.report);const x=s=>{const _=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",o=s.firstname?_(s.firstname):"No Firstname",n=s.middlename?_(s.middlename).charAt(0)+".":"",f=s.lastname?_(s.lastname):"No Lastname";return`${o} ${n} ${f}`};return(s,_)=>(d(),Q(W,{ref_key:"dialogRef",ref:P,modelValue:D.value,"onUpdate:modelValue":_[1]||(_[1]=o=>D.value=o),onHide:O(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",La,[a("div",za,r(l.report.name),1),e(F,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=o=>D.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+r(x(l.report.employee)),1),a("div",null," Branch: "+r(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[c(" Status: "),e(M,{color:"amber-10",outlined:""},{default:t(()=>[c(r(l.report.status),1)]),_:1})])]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[Ma,e(H,{dense:"",separator:"",class:"box"},{default:t(()=>[e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-h6"},{default:t(()=>[c(r(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-h6"},{default:t(()=>[c(r($(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[Ya,e(H,{dense:"",separator:"",class:"box"},{default:t(()=>[e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Quantity")]),_:1})]),_:1})]),_:1}),(d(!0),q(z,null,Y(O(h),(o,n)=>(d(),Q(A,{key:n},{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-subtitle1"},{default:t(()=>[c(r(o.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(p,{class:"text-subtitle1",align:"left"},{default:t(()=>[c(r(o.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(p,{class:"text-subtitle1"},{default:t(()=>[c(r(k(o.quantity*l.report.quantity,o.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const Ce=l=>(E("data-v-4db24530"),l=l(),G(),l),Ba={key:0,class:"spinner-wrapper"},Oa={key:1},Ka={key:0,class:"data-error"},Ea=Ce(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ga={class:"q-gutter-md q-ma-md"},Wa={class:"row justify-between"},Ja={class:"text-h6"},Xa={class:"row justify-between"},Za={class:"text-subtitle1"},el={class:"text-subtitle1"},tl={class:"row q-gutter-x-md"},al=Ce(()=>a("div",{class:"text-subtitle1"},"Deliver By:",-1)),ll={class:"text-overline text-weight-bold"},sl={__name:"ToReceivePage",setup(l){const P=K(),D=U(()=>P.user).value.device.reference_id;console.log("warehouseId",D);const w=J(),m=U(()=>w.toReceivePremixData);console.log("toReceivePremixData",m.value);const N=R("process"),$=R(!0),k=R(!1),h=ne();le(async()=>{D&&await C()});const x=s=>oe.formatDate(s,"MMM DD, YYYY || hh:mm A"),b=s=>{const _=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",o=s.firstname?_(s.firstname):"No Firstname",n=s.middlename?_(s.middlename).charAt(0)+".":"",f=s.lastname?_(s.lastname):"No Lastname";return`${o} ${n} ${f}`},C=async()=>{try{$.value=!0,await w.fetchToReceivePremix(D,N.value),m.value.length||(k.value=!0)}catch{k.value=!0}finally{$.value=!1}},y=s=>{h.dialog({component:Ha,componentProps:{report:s}})};return(s,_)=>$.value?(d(),q("div",Ba,[e(se,{size:"50px",color:"primary"})])):(d(),q("div",Oa,[m.value.length===0?(d(),q("div",Ka,[e(ee,{name:"warning",color:"warning",size:"4em"}),Ea])):(d(),Q(re,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Ga,[(d(!0),q(z,null,Y(m.value,(o,n)=>(d(),Q(L,{key:n,onClick:f=>y(o)},{default:t(()=>[e(V,{class:"q-gutter-sm"},{default:t(()=>[a("div",Wa,[a("div",Ja,r(o.name),1),a("div",null,[e(M,{color:"amber-10",outlined:""},{default:t(()=>[c(r(o.status),1)]),_:2},1024)])]),a("div",Xa,[a("div",Za,r(x(o.created_at)),1),a("div",el,r(o.branch_premix.branch_recipe.branch.name)+" - "+r(b(o.employee)),1),a("div",tl,[al,a("div",ll,r(b(o.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var ol=B(sl,[["__scopeId","data-v-4db24530"]]);const nl={class:"row justify-between"},rl={class:"text-h6"},il=a("div",{class:"text-h6",align:"center"},"Premix",-1),cl=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),dl={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){var h,x,b;const P=l;console.log("report",P.report);const I=R(!1),D=()=>{I.value=!0},w=((b=(x=(h=P.report)==null?void 0:h.branch_premix)==null?void 0:x.branch_recipe)==null?void 0:b.ingredient_groups)||"Undefined";console.log("ingrdientsData",w);const m=C=>{const y=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",s=C.firstname?y(C.firstname):"No Firstname",_=C.middlename?y(C.middlename).charAt(0)+".":"",o=C.lastname?y(C.lastname):"No Lastname";return`${s} ${_} ${o}`},N=C=>{const y=Number(C);return isNaN(y)?"":(y%1===0,y.toString())},$=(C,y)=>{if(y==="Pcs")return`${C} pcs`;if(y==="Grams"){if(C>=1e3){let s=C/1e3;return`${s%1===0?s.toString():s.toString().replace(/^0+/,"")} kgs`}return`${C} g`}return`${C} ${y}`},k=U(()=>w.map(C=>{const y=parseFloat(C.quantity)*parseFloat(P.report.quantity);return{...C,totalQuantity:y,formattedQuantity:$(y,C.ingredient.unit)}}));return(C,y)=>(d(),q(z,null,[a("div",null,[e(F,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:D})]),e(W,{modelValue:I.value,"onUpdate:modelValue":y[1]||(y[1]=s=>I.value=s)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",nl,[a("div",rl,r(l.report.name),1),e(F,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:y[0]||(y[0]=s=>I.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+r(m(l.report.employee)),1),a("div",null," Branch: "+r(l.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[c(" Status: "),e(M,{color:"green",outlined:""},{default:t(()=>[c(r(l.report.status),1)]),_:1})])]),_:1}),e(V,null,{default:t(()=>[il]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[e(H,{dense:"",separator:"",class:"box"},{default:t(()=>[e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-h6"},{default:t(()=>[c(r(l.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-h6"},{default:t(()=>[c(r(N(l.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[a("div",null,[cl,e(H,{dense:"",separator:"",class:"box"},{default:t(()=>[e(A,null,{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,{class:"text-overline"},{default:t(()=>[c("Quantity")]),_:1})]),_:1})]),_:1}),(d(!0),q(z,null,Y(k.value,(s,_)=>(d(),Q(A,{key:_},{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-subtitle1"},{default:t(()=>[c(r(s.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(p,{class:"text-subtitle1",align:"left"},{default:t(()=>[c(r(s.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(p,{class:"text-subtitle1"},{default:t(()=>[c(r($(s.quantity*P.report.quantity,s.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const ul=l=>(E("data-v-b3bd7f0a"),l=l(),G(),l),ml={key:0,class:"spinner-wrapper"},_l={key:1},fl={key:0,class:"data-error"},pl=ul(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),vl={__name:"ReceivedPage",setup(l){const P=K(),D=U(()=>P.user).value.device.reference_id;console.log("warehouseId",D);const w=J(),m=U(()=>w.receivePremixData);console.log("receivePremixData",m.value);const N=R([]),$=R({page:1,rowsPerPage:0,rowsNumber:0}),k=R("process"),h=R(!0),x=R(!1);le(async()=>{D&&await s(D),console.log("receivePremixData",m.value)});const b=n=>oe.formatDate(n,"MMM DD, YYYY || hh:mm A"),C=n=>n?n.split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1).toLowerCase()).join(" "):"",y=n=>{const f=S=>S?S.charAt(0).toUpperCase()+S.slice(1).toLowerCase():"",i=n.firstname?f(n.firstname):"No Firstname",u=n.middlename?f(n.middlename).charAt(0)+".":"",g=n.lastname?f(n.lastname):"No Lastname";return`${i} ${u} ${g}`},s=async(n,f=0,i=5)=>{try{h.value=!0,await w.fetchReceivePremix(n,k.value,f,i),console.log("receivePremixDatssa",m.value);const{data:u,current_page:g,per_page:S,total:T}=m.value;N.value=u,console.log("premixData.value",N.value),$.value.page=g,$.value.rowsPerPage=S,$.value.rowsNumber=T,m.value.length||(x.value=!0)}catch{x.value=!0}finally{h.value=!1}},_=n=>{s(D,n.pagination.page,n.pagination.rowsPerPage)},o=[{name:"created_at",label:"Date / Time",align:"left",field:n=>b(n.created_at)||"Not Available",sortable:!0},{name:"employee",label:"Employee",align:"left",field:n=>y(n.employee)||"Not Available",sortable:!0},{name:"branch",label:"Branch Name",align:"left",field:n=>n.branch_premix.branch_recipe.branch.name||"Not Available",sortable:!0},{name:"premix_name",label:"Premix Name",align:"left",field:n=>n.name||"Not Available",sortable:!0},{name:"status",label:"Status",align:"left",field:"status",sortable:!0},{name:"action",label:"Action",align:"left",field:"action",sortable:!0}];return(n,f)=>h.value?(d(),q("div",ml,[e(se,{size:"50px",color:"primary"})])):(d(),q("div",_l,[N.value.length===0?(d(),q("div",fl,[e(ee,{name:"warning",color:"warning",size:"4em"}),pl])):(d(),Q(Se,{key:1,rows:N.value,columns:o,pagination:$.value,"onUpdate:pagination":f[0]||(f[0]=i=>$.value=i),"rows-per-page-options":[3,5,10,0],onRequest:_,flat:"",bordered:""},{"body-cell-status":t(i=>[e(he,{props:i},{default:t(()=>[e(M,{color:"green"},{default:t(()=>[c(r(C(i.row.status)),1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-action":t(i=>[e(he,{props:i},{default:t(()=>[e(dl,{report:i.row},null,8,["report"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"]))]))}};var gl=B(vl,[["__scopeId","data-v-b3bd7f0a"]]);const hl={class:"q-gutter-y-sm"},yl={__name:"PremixTab",setup(l){const P=R("pendingReports"),I=U(()=>{switch(P.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";case"processReports":return"blue-9";case"completedReports":return"blue-grey-10";case"toDeliverReports":return"brown-6";case"toReceiveReports":return"purple-1";case"receive":return"orange-7";default:return"light-green-13"}});return(D,w)=>(d(),Q(L,{flat:""},{default:t(()=>[e(fe),a("div",hl,[e(ve,{modelValue:P.value,"onUpdate:modelValue":w[0]||(w[0]=m=>P.value=m),"indicator-color":I.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(X,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Premix"}),e(X,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Premix"}),e(X,{class:"text-dark",name:"declineReports",label:"\u{1F534}Decline Premix"}),e(X,{class:"text-dark",name:"processReports",label:"\u{1F535}Process Premix"}),e(X,{class:"text-dark",name:"completedReports",label:"\u26ABCompleted Premix"}),e(X,{class:"text-dark",name:"toDeliverReports",label:"\u{1F7E4}To Deliver Premix"}),e(X,{class:"text-dark",name:"toReceiveReports",label:"\u26AATo Receive Premix"}),e(X,{class:"text-dark",name:"receive",label:"\u{1F7E0}Receive Premix"})]),_:1},8,["modelValue","indicator-color"])]),e(ge,{modelValue:P.value,"onUpdate:modelValue":w[1]||(w[1]=m=>P.value=m),animated:""},{default:t(()=>[e(Z,{name:"pendingReports"},{default:t(()=>[e(Ke)]),_:1}),e(Z,{name:"confirmReports"},{default:t(()=>[e(_t)]),_:1}),e(Z,{name:"declineReports"},{default:t(()=>[e(It)]),_:1}),e(Z,{name:"processReports"},{default:t(()=>[e(Zt)]),_:1}),e(Z,{name:"completedReports"},{default:t(()=>[e(ya)]),_:1}),e(Z,{name:"toDeliverReports"},{default:t(()=>[e(Fa)]),_:1}),e(Z,{name:"toReceiveReports"},{default:t(()=>[e(ol)]),_:1}),e(Z,{name:"receive"},{default:t(()=>[e(gl)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var xl=B(yl,[["__scopeId","data-v-07a51121"]]);const Pe=l=>(E("data-v-aa3acf16"),l=l(),G(),l),bl=Pe(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Report",-1)),$l={key:0},wl=Pe(()=>a("div",{class:"text-positive text-subtitle1"}," Please confirm again to finalize this report. ",-1)),kl={__name:"ConfirmDialog",setup(l){const{dialogRef:P,onDialogHide:I,onDialogOK:D,onDialogCancel:w}=ae(),m=R(!1),N=()=>{m.value?D():m.value=!0};return($,k)=>(d(),Q(W,{ref_key:"dialogRef",ref:P,onHide:O(I)},{default:t(()=>[e(L,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(V,{class:"q-pt-none q-pb-sm"},{default:t(()=>[bl,m.value?de("",!0):(d(),q("p",$l,"Are you sure you want to confirm this report?"))]),_:1}),m.value?(d(),Q(V,{key:0},{default:t(()=>[wl]),_:1})):de("",!0),e(fe,{class:"q-mb-md"}),e(V,null,{default:t(()=>[e(_e,{align:"right",class:"q-pt-none"},{default:t(()=>[ie(e(F,{flat:"",dense:"",label:"No",color:"primary",class:"q-mr-sm"},null,512),[[ce]]),e(F,{dense:"",label:m.value?"Confirm":"Yes! Confirm",color:"positive",class:"q-btn-rounded q-px-lg",onClick:N},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Dl=B(kl,[["__scopeId","data-v-aa3acf16"]]);const Cl=l=>(E("data-v-b44cae3c"),l=l(),G(),l),Pl=Cl(()=>a("div",{class:"text-h5 q-mb-xs"},"Decline Report",-1)),ql={key:0},Sl={__name:"DeclinedDialog",setup(l){const{dialogRef:P,onDialogHide:I,onDialogOK:D,onDialogCancel:w}=ae(),m=R(!1),N=R(""),$=R(null),k=()=>{m.value?$.value.validate()&&D({remarks:N.value}):m.value=!0};return(h,x)=>(d(),Q(W,{ref_key:"dialogRef",ref:P,onHide:O(I),persistent:""},{default:t(()=>[e(L,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(V,{class:"q-pt-none q-pb-sm"},{default:t(()=>[Pl,m.value?de("",!0):(d(),q("p",ql,"Are you sure you want to decline this report?"))]),_:1}),m.value?(d(),Q(V,{key:0},{default:t(()=>[e(me,{modelValue:N.value,"onUpdate:modelValue":x[0]||(x[0]=b=>N.value=b),type:"textarea",label:"Reason for declining",filled:"",autogrow:"",dense:"",ref_key:"remarksInput",ref:$,rules:[b=>!!b||"Remarks are required"]},null,8,["modelValue","rules"])]),_:1})):de("",!0),e(fe,{class:"q-mb-md"}),e(V,null,{default:t(()=>[e(_e,{align:"right",class:"q-pt-none"},{default:t(()=>[ie(e(F,{flat:"",dense:"",label:"No",color:"primary",class:"q-mr-sm"},null,512),[[ce]]),e(F,{dense:"",label:m.value?"Submit Decline":"Yes! Decline",color:"negative",class:"q-btn-rounded q-px-lg",onClick:k},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Nl=B(Sl,[["__scopeId","data-v-b44cae3c"]]);const Rl=l=>(E("data-v-6781c4e0"),l=l(),G(),l),Vl={class:"row justify-between"},Il={class:"text-h6"},Ql=Rl(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),Tl={key:1,class:"text-caption text-grey-6 q-mt-md"},Al={__name:"TransactionView",props:{report:{type:Object,required:!0}},emits:["fetchAgain"],setup(l,{emit:P}){const I=pe(),{dialogRef:D,onDialogHide:w,onDialogOK:m,onDialogCancel:N}=ae(),$=l;console.log("report",$.report);const k=R(!1),h=ne(),x=o=>o?o.toLowerCase().split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" "):"",b=o=>o==null?"No Quantity":parseFloat(o),C=()=>{h.dialog({component:Dl}).onOk(o=>{console.log("Remarks from child:",o),y($.report)}).onCancel(()=>{console.log("Cancelled")})},y=async o=>{var n,f,i,u;try{h.loading.show(),console.log("Confirming report",o);const g=o.items.map(j=>{const ue=parseFloat(j.quantity)||0,qe=parseFloat(j.gram)||0;return{...j,total_grams:ue*qe}});console.log("Per Item Totals:",g);const S={...o,status:"confirmed",items:g},T=await I.confirmDeliveryStocks(S);console.log("responsesss",T),(T==null?void 0:T.data)||((n=T==null?void 0:T.data)==null?void 0:n.message)==="Delivery confirmed successfully."?(te.create({type:"positive",message:T.data.message||"Delivery Confirmed Successfully"}),(T==null?void 0:T.status)===200&&(m({action:"confirmed"}),k.value=!1)):te.create({type:"negative",message:((f=T==null?void 0:T.data)==null?void 0:f.message)||"Failed to Confirm deliveryq"}),console.log("responssssse",T)}catch(g){console.log(g),te.create({type:"negative",message:((u=(i=g==null?void 0:g.response)==null?void 0:i.data)==null?void 0:u.message)||"Failed to Confirm delivery"})}finally{h.loading.hide()}},s=()=>{h.dialog({component:Nl}).onOk(o=>{console.log("Remarks from child:",o.remarks),_($.report.id,o.remarks)}).onCancel(()=>{console.log("Cancelled")})},_=async(o,n)=>{var f,i,u,g,S;try{h.loading.show(),console.log("Declining report",o,"with remarks:",n);const T={id:o,status:"declined",remarks:n},j=await I.declineDeliveryStocks(T);(j==null?void 0:j.data)||((f=j==null?void 0:j.data)==null?void 0:f.message)==="Delivery declined successfully."?(te.create({type:"positive",message:((i=j==null?void 0:j.data)==null?void 0:i.message)||"Delivery Declined Successfully"}),(j==null?void 0:j.status)===200&&(m({action:"declined"}),k.value=!1)):te.create({type:"negative",message:((u=j==null?void 0:j.data)==null?void 0:u.message)||"Failed to Decline delivery"}),console.log("responsessssss",j)}catch(T){console.log(T),te.create({type:"negative",message:((S=(g=T==null?void 0:T.response)==null?void 0:g.data)==null?void 0:S.message)||"Failed to decline delivery. Please try again."})}finally{h.loading.hide()}};return(o,n)=>(d(),Q(W,{ref_key:"dialogRef",ref:D,modelValue:k.value,"onUpdate:modelValue":n[1]||(n[1]=f=>k.value=f),onHide:O(w)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",Vl,[a("div",Il,"From: "+r(x(l.report.from_name)),1),e(F,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:n[0]||(n[0]=f=>k.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,[Ql,l.report.items&&l.report.items.length?(d(),Q(H,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(A,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(v,null,{default:t(()=>[e(p,null,{default:t(()=>[c(" Raw Materials Code ")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(p,null,{default:t(()=>[c("Stocks Category")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,null,{default:t(()=>[c(" Quantity ")]),_:1})]),_:1})]),_:1}),(d(!0),q(z,null,Y(l.report.items,(f,i)=>(d(),Q(A,{key:i},{default:t(()=>[e(v,null,{default:t(()=>[e(p,null,{default:t(()=>{var u;return[c(r(((u=f.raw_material)==null?void 0:u.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(p,null,{default:t(()=>[c(r(f.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(p,null,{default:t(()=>[c(r(b(f.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(d(),q("div",Tl," No items in this delivery "))])]),_:1}),e(_e,{class:"report-actions q-ma-sm q-gutter-sm",align:"right"},{default:t(()=>[e(F,{color:"negative",label:"Decline",class:"action-btn",onClick:s}),e(F,{color:"positive",label:"Confirm",class:"action-btn",onClick:C})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var Ul=B(Al,[["__scopeId","data-v-6781c4e0"]]);const jl=l=>(E("data-v-e2ab1572"),l=l(),G(),l),Fl={key:0,class:"spinner-wrapper"},Ll={key:1},zl={key:0,class:"data-error"},Ml=jl(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Yl={class:"q-gutter-md q-ma-md"},Hl={class:"text-h6"},Bl={class:"row justify-between"},Ol={class:"text-subtitle1"},Kl={class:"text-subtitle1"},El={__name:"PendingPage",setup(l){const P=K(),I=U(()=>P.user);console.log("userdata",I.value);const D=pe(),w=U(()=>D.pendingStocks),m=I.value.device.reference_id;console.log("warehouseId",m);const N=R("pending"),$=R("Warehouse"),k=R(!0),h=R(!1),x=ne(),b=_=>_?_.toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" "):"",C=_=>oe.formatDate(_,"MMM DD, YYYY || hh:mm A"),y=async()=>{try{k.value=!0,await D.fetchPendingDeliveryReports(m,N.value,$.value),w.value.length||(h.value=!0),console.log("stockDelivery",w.value)}catch(_){console.log(_)}finally{k.value=!1}};le(async()=>{m&&await y(m,N.value)});const s=(_,o)=>{x.dialog({component:Ul,componentProps:{report:_}}).onOk(n=>{var f;if(console.log("response from child:",n),(n==null?void 0:n.action)==="declined"||(n==null?void 0:n.action)==="confirmed"){const i=(f=D.pendingStocks)==null?void 0:f.data;if(Array.isArray(i)){const u=i.findIndex(g=>g.id===_.id);u!==-1&&i.splice(u,1)}}})};return(_,o)=>k.value?(d(),q("div",Fl,[e(se,{size:"50px",color:"primary"})])):(d(),q("div",Ll,[w.value.length===0?(d(),q("div",zl,[e(ee,{name:"warning",color:"warning",size:"4em"}),Ml])):(d(),Q(re,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Yl,[(d(!0),q(z,null,Y(w.value.data,(n,f)=>(d(),Q(L,{key:f,onClick:i=>s(n,f)},{default:t(()=>[e(V,{class:"q-gutter-sm"},{default:t(()=>[a("div",Hl,"From: "+r(b(n.from_name)),1),a("div",Bl,[a("div",Ol,r(C(n.created_at)),1),a("div",Kl,r(n.items.length)+" items",1),a("div",null,[e(M,{color:"warning",outlined:""},{default:t(()=>[c(" Pending ")]),_:1})])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Gl=B(El,[["__scopeId","data-v-e2ab1572"]]);const Wl=l=>(E("data-v-07745ab8"),l=l(),G(),l),Jl={class:"row justify-between"},Xl={class:"text-h6"},Zl=Wl(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),es={key:1,class:"text-caption text-grey-6 q-mt-md"},ts={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){const{dialogRef:P,onDialogHide:I,onDialogOK:D,onDialogCancel:w}=ae();console.log("report",l.report);const N=R(!1),$=h=>h?h.toLowerCase().split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" "):"",k=h=>h==null?"No Quantity":parseFloat(h);return(h,x)=>(d(),Q(W,{ref_key:"dialogRef",ref:P,modelValue:N.value,"onUpdate:modelValue":x[1]||(x[1]=b=>N.value=b),onHide:O(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",Jl,[a("div",Xl,"From: "+r($(l.report.from_name)),1),e(F,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:x[0]||(x[0]=b=>N.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[c(" Status: "),e(M,{color:"green"},{default:t(()=>[c(r(l.report.status),1)]),_:1})]),_:1}),e(V,null,{default:t(()=>[a("div",null,[Zl,l.report.items&&l.report.items.length?(d(),Q(H,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(A,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(v,null,{default:t(()=>[e(p,null,{default:t(()=>[c(" Raw Materials Code ")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(p,null,{default:t(()=>[c("Stocks Category")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(p,null,{default:t(()=>[c(" Quantity ")]),_:1})]),_:1})]),_:1}),(d(!0),q(z,null,Y(l.report.items,(b,C)=>(d(),Q(A,{key:C},{default:t(()=>[e(v,null,{default:t(()=>[e(p,null,{default:t(()=>{var y;return[c(r(((y=b.raw_material)==null?void 0:y.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(p,null,{default:t(()=>[c(r(b.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(p,null,{default:t(()=>[c(r(k(b.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(d(),q("div",es," No items in this delivery "))])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var as=B(ts,[["__scopeId","data-v-07745ab8"]]);const ls={key:0,class:"spinner-wrapper"},ss={key:1,class:"q-mt-xl"},os={key:0,class:"column items-center justify-center text-center q-pa-lg"},ns={class:"text-h6 text-grey-7 q-mt-sm"},rs={class:"text-caption text-grey-6 q-mt-xs"},is={class:"q-gutter-md q-ma-md"},cs={class:"text-h6"},ds={class:"row justify-between"},us={class:"text-subtitle1"},ms={class:"text-subtitle1"},_s={key:2,class:"q-pt-md flex flex-center"},fs={__name:"ConfirmPage",setup(l){const P=K(),I=U(()=>P.user);console.log("userdata",I.value);const D=pe(),w=U(()=>D.confirmStocks),m=I.value.device.reference_id;console.log("warehouseId",m);const N=R("confirmed"),$=R("Warehouse"),k=R(!0),h=R(!1),x=ne();R(null);const b=R();let C=null;const y=U(()=>{var u;return((u=D.confirmStocks)==null?void 0:u.pagination)||{current_page:1,last_page:1,per_page:3}}),s=u=>u?u.toLowerCase().split(" ").map(g=>g.charAt(0).toUpperCase()+g.slice(1)).join(" "):"",_=u=>oe.formatDate(u,"MMM DD, YYYY || hh:mm A"),o=async()=>{try{k.value=!0,await D.fetchConfirmedDeliveryReports(m,N.value,$.value,y.value.current_page,y.value.per_page,b.value),w.value.length||(h.value=!0),console.log("stockDeliverysss",w.value)}catch(u){console.log(u)}finally{k.value=!1}};le(async()=>{m&&await o(m,N.value,$.value,y.value.current_page)});const n=async()=>{o(m,N.value,$.value,y.value.current_page)},f=()=>{C&&clearTimeout(C),C=setTimeout(()=>{o()},500)},i=u=>{x.dialog({component:as,componentProps:{report:u}})};return(u,g)=>(d(),q(z,null,[a("div",null,[e(me,{outlined:"",dense:"",placeholder:"Search delivery",class:"q-mb-sm","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6",modelValue:b.value,"onUpdate:modelValue":[g[0]||(g[0]=S=>b.value=S),f]},{append:t(()=>[e(ee,{name:"search"})]),_:1},8,["modelValue"])]),k.value?(d(),q("div",ls,[e(se,{size:"50px",color:"primary"})])):(d(),q("div",ss,[w.value.data.length===0?(d(),q("div",os,[e(ee,{name:"search_off",size:"60px",color:"grey-6"}),a("div",ns,r(b.value?"No deliveries found for your search.":"No deliveries available."),1),a("div",rs,r(b.value?"Try another search term.":"Check again later."),1)])):(d(),Q(re,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",is,[(d(!0),q(z,null,Y(w.value.data,(S,T)=>(d(),Q(L,{key:T,onClick:j=>i(S)},{default:t(()=>[e(V,{class:"q-gutter-sm"},{default:t(()=>[a("div",cs,"From: "+r(s(S.from_name)),1),a("div",ds,[a("div",us,r(_(S.created_at)),1),a("div",ms,r(S.items.length)+" items",1),a("div",null,[e(M,{color:"positive"},{default:t(()=>[c("Confirm")]),_:1})])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))])),y.value.last_page>1?(d(),q("div",_s,[e(ye,{modelValue:y.value.current_page,"onUpdate:modelValue":g[1]||(g[1]=S=>y.value.current_page=S),max:y.value.last_page,"max-pages":3,"boundary-links":"","direction-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward",onClick:n},null,8,["modelValue","max"])])):de("",!0)],64))}};var ps=B(fs,[["__scopeId","data-v-332d8318"]]);const vs=l=>(E("data-v-169d1399"),l=l(),G(),l),gs={class:"row justify-between"},hs={class:"text-h6"},ys=vs(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),xs={key:1,class:"text-caption text-grey-6 q-mt-md"},bs={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(l){const{dialogRef:P,onDialogHide:I,onDialogOK:D,onDialogCancel:w}=ae();console.log("report",l.report);const N=R(!1),$=h=>h?h.toLowerCase().split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" "):"",k=h=>h==null?"No Quantity":parseFloat(h);return(h,x)=>(d(),Q(W,{ref_key:"dialogRef",ref:P,modelValue:N.value,"onUpdate:modelValue":x[1]||(x[1]=b=>N.value=b),onHide:O(I)},{default:t(()=>[e(L,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",gs,[a("div",hs,"From: "+r($(l.report.from_name)),1),e(F,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:x[0]||(x[0]=b=>N.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[c(" Status: "),e(M,{color:"negative"},{default:t(()=>[c(r(l.report.status),1)]),_:1})]),_:1}),e(V,null,{default:t(()=>[a("div",null,[ys,l.report.items&&l.report.items.length?(d(),Q(H,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(A,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(v,null,{default:t(()=>[e(p,null,{default:t(()=>[c(" Raw Materials Code ")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(p,null,{default:t(()=>[c("Stocks Category")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(p,{side:""},{default:t(()=>[c("Quantity")]),_:1})]),_:1})]),_:1}),(d(!0),q(z,null,Y(l.report.items,(b,C)=>(d(),Q(A,{key:C},{default:t(()=>[e(v,null,{default:t(()=>[e(p,null,{default:t(()=>{var y;return[c(r(((y=b.raw_material)==null?void 0:y.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(p,null,{default:t(()=>[c(r(b.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(p,null,{default:t(()=>[c(r(k(b.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(d(),q("div",xs," No items in this delivery "))])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var $s=B(bs,[["__scopeId","data-v-169d1399"]]);const ws={key:0,class:"spinner-wrapper"},ks={key:1,class:"q-mt-xl"},Ds={key:0,class:"column items-center justify-center text-center q-pa-lg"},Cs={class:"text-h6 text-grey-7 q-mt-sm"},Ps={class:"q-gutter-md q-ma-md"},qs={class:"text-h6"},Ss={class:"row justify-between"},Ns={class:"text-subtitle1"},Rs={class:"text-subtitle1"},Vs={key:2,class:"q-pt-md flex flex-center"},Is={__name:"DeclinePage",setup(l){const P=K(),I=U(()=>P.user);console.log("userdata",I.value);const D=pe(),w=U(()=>D.declinedStocks),m=I.value.device.reference_id;console.log("warehouseId",m);const N=R("declined"),$=R("Warehouse"),k=R(!0),h=R(!1),x=ne(),b=R();let C=null;const y=U(()=>{var u;return((u=D.declinedStocks)==null?void 0:u.pagination)||{current_page:1,last_page:1,per_page:3}}),s=u=>u?u.toLowerCase().split(" ").map(g=>g.charAt(0).toUpperCase()+g.slice(1)).join(" "):"",_=u=>oe.formatDate(u,"MMM DD, YYYY || hh:mm A"),o=async(u=1)=>{try{k.value=!0,await D.fetchDeclinedDeliveryReports(m,N.value,$.value,y.value.current_page,y.value.per_page,b.value),w.value.length||(h.value=!0),console.log("stockDeliveryDeclinedsss",w.value)}catch(g){console.log(g)}finally{k.value=!1}};le(async()=>{m&&await o(m,N.value,$.value,y.value.current_page)});const n=async()=>{o(m,N.value,$.value,y.value.current_page)},f=async()=>{C&&clearTimeout(C),C=setTimeout(()=>{o(1)},500)},i=u=>{x.dialog({component:$s,componentProps:{report:u}})};return(u,g)=>(d(),q(z,null,[a("div",null,[e(me,{outlined:"",dense:"",placeholder:"Search delivery",class:"q-mb-sm","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6",modelValue:b.value,"onUpdate:modelValue":[g[0]||(g[0]=S=>b.value=S),f]},{append:t(()=>[e(ee,{name:"search",color:"grey-6"})]),_:1},8,["modelValue"])]),k.value?(d(),q("div",ws,[e(se,{size:"50px",color:"primary"})])):(d(),q("div",ks,[w.value.data.length===0?(d(),q("div",Ds,[e(ee,{name:"search_off",size:"60px",color:"grey-6"}),a("div",Cs,r(b.value?"No deliveries found for your search.":"No deliveries available."),1),a("div",null,r(b.value?"Try another search term.":"Check again later."),1)])):(d(),Q(re,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Ps,[(d(!0),q(z,null,Y(w.value.data,(S,T)=>(d(),Q(L,{key:T,onClick:j=>i(S)},{default:t(()=>[e(V,{class:"q-gutter-sm"},{default:t(()=>[a("div",qs," From: "+r(s(S.from_name)),1),a("div",Ss,[a("div",Ns,r(_(S.created_at)),1),a("div",Rs,r(S.items.length)+" items ",1),a("div",null,[e(M,{color:"negative"},{default:t(()=>[c(" Declined ")]),_:1})])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))])),y.value.last_page>1?(d(),q("div",Vs,[e(ye,{modelValue:y.value.current_page,"onUpdate:modelValue":[g[1]||(g[1]=S=>y.value.current_page=S),n],max:y.value.last_page,"max-pages":3,"boundary-links":"","direction-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward"},null,8,["modelValue","max"])])):de("",!0)],64))}};var Qs=B(Is,[["__scopeId","data-v-4be55aa8"]]);const Ts={class:"q-gutter-y-sm"},As={__name:"StocksDeliveryPage",setup(l){const P=R("pending"),I=U(()=>{switch(P.value){case"pending":return"warning";case"confirmed":return"green-13";case"declined":return"red-6";default:return"light-green-13"}});return(D,w)=>(d(),Q(L,{flat:""},{default:t(()=>[e(fe),a("div",Ts,[e(ve,{modelValue:P.value,"onUpdate:modelValue":w[0]||(w[0]=m=>P.value=m),"indicator-color":I.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(X,{class:"text-dark",name:"pending",label:"Pending"}),e(X,{class:"text-dark",name:"confirmed",label:"Confirmed"}),e(X,{class:"text-dark",name:"declined",label:"Declined"})]),_:1},8,["modelValue","indicator-color"])]),e(ge,{modelValue:P.value,"onUpdate:modelValue":w[1]||(w[1]=m=>P.value=m),animated:""},{default:t(()=>[e(Z,{name:"pending"},{default:t(()=>[e(Gl)]),_:1}),e(Z,{name:"confirmed"},{default:t(()=>[e(ps)]),_:1}),e(Z,{name:"declined"},{default:t(()=>[e(Qs)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Us={class:"q-gutter-y-sm"},yo={__name:"warehouseTransactionHistory",setup(l){const P=R("premix"),I=U(()=>{switch(P.value){case"premix":return"brown";case"stocks_delivery":return"teal-5";default:return"light-green-13"}});return(D,w)=>(d(),Q(L,{flat:""},{default:t(()=>[e(V,{class:"text-h6"},{default:t(()=>[c(" Transaction History ")]),_:1}),a("div",Us,[e(ve,{modelValue:P.value,"onUpdate:modelValue":w[0]||(w[0]=m=>P.value=m),"indicator-color":I.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(X,{class:"text-dark",name:"premix",label:"Premix"}),e(X,{class:"text-dark",name:"stocks_delivery",label:"Stocks Delivery"})]),_:1},8,["modelValue","indicator-color"])]),e(ge,{modelValue:P.value,"onUpdate:modelValue":w[1]||(w[1]=m=>P.value=m),animated:""},{default:t(()=>[e(Z,{name:"premix"},{default:t(()=>[e(xl)]),_:1}),e(Z,{name:"stocks_delivery"},{default:t(()=>[e(As)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{yo as default};
