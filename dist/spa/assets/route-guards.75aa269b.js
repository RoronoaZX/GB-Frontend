import{b as d,P as l}from"./index.f4b8fb6f.js";import{api as n}from"./axios.404fe92e.js";import{u as k}from"./baker-report.38f7d120.js";import{u as g}from"./sales-report.7043e04f.js";import{u as S}from"./supervisor.5d766665.js";import{u as h}from"./cake-maker-report.d2460b6c.js";var B=d(async({router:i})=>{i.beforeEach(async(s,v,e)=>{var t;const c=localStorage.getItem("token"),a=localStorage.getItem("role");if(l.value=!0,c)try{const o=k(),u=g(),p=S(),m=h(),r=await n.get("/api/profile");console.log("userss:",r.data);const f=r.data.device;console.log("device:",f),o.setUser(r.data),u.setUser(r.data),p.setUser(r.data),m.setUser(r.data),s.path==="/"?a==="Admin"?e("/admin/dashboard"):a==="Baker"?e("/branch/baker"):a==="Cake Maker"?e("/branch/cake_maker"):a==="Cashier"?e("/branch/sales_lady/products"):e():e()}catch(o){console.error("Error fetching user profile:",((t=o.response)==null?void 0:t.data)||o.message),localStorage.removeItem("token"),localStorage.removeItem("role"),s.path!=="/"?e("/"):e()}finally{}else s.path!=="/"?e("/"):e();l.value=!1})});export{B as default};
