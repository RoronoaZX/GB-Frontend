import{H as Y,c as R,r as c,z as ee,by as te,o as d,e as S,w as t,J as l,f as e,L as r,K as ae,a3 as v,a5 as F,I as f,Q as M,a4 as V,bd as se,a0 as x,$ as p,M as le,ae as O,Z as oe,bf as k,bx as U,aI as ie,O as ne,R as re}from"./index.fe067f2a.js";import{Q as q}from"./QSelect.b3dc2a83.js";import{Q as n}from"./QSkeleton.b40a3694.js";import{Q as u,a as i}from"./QItem.4191fc7f.js";import{Q as A}from"./QList.f8b1e54e.js";import{Q as ce}from"./QChip.0aa5c09d.js";import{Q as de}from"./QMenu.87272370.js";import{Q as ue}from"./QImg.5663af18.js";import{a as pe}from"./QItemLabel.aaa5cfce.js";import{Q as me}from"./QSpinnerIos.e0d12448.js";import{Q as _e}from"./QInnerLoading.3d7974a4.js";import{Q as fe}from"./QPage.9f53a007.js";import{C as $}from"./ClosePopup.535e35c9.js";import{u as he}from"./employee.16936fe6.js";import{f as H}from"./useEmployeeFunctions.905396fb.js";import{_ as ve}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-virtual-scroll.4ffd47fc.js";import"./rtl.276c3f1b.js";import"./selection.60979bf6.js";import"./position-engine.76939301.js";import"./axios.1553f882.js";import"./date.f00045d0.js";var J="/assets/boy-avatar.8512a60a.png";const z=g=>(ne("data-v-3b8b1a77"),g=g(),re(),g),xe={class:"row q-col-gutter-md q-mb-lg"},ge={class:"col-12 col-sm-6 col-md-4"},ye={class:"col-12 col-sm-6 col-md-8"},we={class:"row q-col-gutter-md"},be={class:"col-6 col-md-3"},Qe={class:"col-6 col-md-3"},Ce={class:"col-6 col-md-3"},qe={class:"col-6 col-md-3"},Ie={class:"row q-col-gutter-lg"},Se={class:"row items-center justify-between no-wrap"},Ve={class:"text-center q-pt-sm"},ke={class:"row items-center justify-end"},Ae={key:0,class:"col-12 text-center text-grey-7 q-mt-xl"},ze=z(()=>l("div",{class:"text-h6 q-mt-md"},"No employees found",-1)),Be=z(()=>l("p",null,"Try adjusting your search or filter criteria.",-1)),Te={class:"row items-center justify-between no-wrap"},De={class:"text-center q-pt-sm"},Ee={class:"text-h6 q-mt-md"},Le={class:"text-caption text-grey-7"},Ne={class:"row items-center no-wrap text-grey-8"},Pe=["href"],je=["href"],Re={class:"row items-center justify-between text-caption text-grey-7"},Fe=z(()=>l("span",null,null,-1)),Me=["onClick"],Oe={__name:"PayslipPage",setup(g){const B=he(),K=Y(),T=R(()=>B.employees),D=c([]),I=c(!0),h=c(null),y=c(""),w=c(null),b=c(null),Q=c(null),E=c([]),L=c([]),N=c([]),W=async()=>{I.value=!0;try{T.value=await B.fetchEmployeeWithEmploymentTypeAndDesignation();const{data:s}=T.value;D.value=s,s&&s.length>0&&(E.value=[...new Set(s.map(o=>o.employment_type.category))],N.value=[...new Set(s.map(o=>o.position))],L.value=[...new Set(s.map(o=>o.status))])}catch(s){console.error("Error fetching employees:",s)}finally{I.value=!1}},P=R(()=>{let s=D.value;if(y.value){const o=y.value.toLowerCase();s=s.filter(a=>H(a).toLowerCase().includes(o))}return w.value&&(s=s.filter(o=>o.employment_type.category===w.value)),b.value&&(s=s.filter(o=>o.status===b.value)),Q.value&&(s=s.filter(o=>o.position===Q.value)),s});ee(()=>{W()});const Z=s=>{h.value=s.id,setTimeout(()=>{h.value===s.id&&(h.value=null)},5e3),setTimeout(()=>{K.push({name:"EmployeeProfile",params:{employee_id:s.id}})},300)};te(()=>{h.value=null});const m={Active:{label:"Active",chipColor:"green-6",chipTextColor:"white",icon:"lens",borderColor:"#68B984"},Invited:{label:"Invited",chipColor:"grey-10",chipTextColor:"white",icon:"check",borderColor:"#333333"},Inactive:{label:"Inactive",chipColor:"grey-4",chipTextColor:"grey-8",icon:"pause",borderColor:"#BDBDBD"}};function C(s){return m[s]||m.Inactive}function G(s){return{borderBottom:`4px solid ${(m[s]||m.Inactive).borderColor}`}}function X(s){return{color:(m[s]||m.Inactive).borderColor}}return(s,o)=>(d(),S(fe,{class:"q-pa-md"},{default:t(()=>[l("div",xe,[l("div",ge,[e(ae,{outlined:"",dense:"",modelValue:y.value,"onUpdate:modelValue":o[0]||(o[0]=a=>y.value=a),placeholder:"Search",class:"bg-white"},{prepend:t(()=>[e(r,{name:"search"})]),_:1},8,["modelValue"])]),l("div",ye,[l("div",we,[l("div",be,[e(q,{outlined:"",dense:"",modelValue:w.value,"onUpdate:modelValue":o[1]||(o[1]=a=>w.value=a),options:E.value,label:"Type",class:"bg-white",clearable:""},{prepend:t(()=>[e(r,{name:"workspaces_outline"})]),_:1},8,["modelValue","options"])]),l("div",Qe,[e(q,{outlined:"",dense:"",modelValue:b.value,"onUpdate:modelValue":o[2]||(o[2]=a=>b.value=a),options:L.value,label:"Status",class:"bg-white",clearable:""},{prepend:t(()=>[e(r,{name:"show_chart"})]),_:1},8,["modelValue","options"])]),l("div",Ce,[e(q,{outlined:"",dense:"",modelValue:Q.value,"onUpdate:modelValue":o[3]||(o[3]=a=>Q.value=a),options:N.value,label:"Role",class:"bg-white",clearable:""},{prepend:t(()=>[e(r,{name:"badge"})]),_:1},8,["modelValue","options"])]),l("div",qe,[e(q,{outlined:"",dense:"",label:"Advance Filter",class:"bg-white",options:["Feature not available"],disable:""},{prepend:t(()=>[e(r,{name:"filter_alt"})]),_:1})])])])]),l("div",Ie,[I.value?(d(),v(V,{key:0},F(8,a=>l("div",{key:a,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[e(M,{flat:"",bordered:""},{default:t(()=>[e(f,null,{default:t(()=>[l("div",Se,[e(n,{type:"QChip",width:"85px",height:"24px"}),e(n,{type:"QBtn"})]),l("div",Ve,[e(n,{type:"QAvatar",size:"90px",class:"q-mx-auto"}),e(n,{type:"text",height:"28px",width:"60%",class:"q-mt-md q-mx-auto"}),e(n,{type:"text",height:"20px",width:"40%",class:"q-mt-xs q-mx-auto"})])]),_:1}),e(f,{class:"q-pt-none"},{default:t(()=>[e(A,{dense:""},{default:t(()=>[e(u,{class:"q-px-none"},{default:t(()=>[e(i,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(n,{type:"QAvatar",size:"24px"})]),_:1}),e(i,null,{default:t(()=>[e(n,{type:"text",width:"60%"})]),_:1}),e(i,{side:""},{default:t(()=>[e(n,{type:"text",width:"65px"})]),_:1})]),_:1}),e(u,{class:"q-px-none"},{default:t(()=>[e(i,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(n,{type:"QAvatar",size:"24px"})]),_:1}),e(i,null,{default:t(()=>[e(n,{type:"text",width:"85%"})]),_:1})]),_:1}),e(u,{class:"q-px-none"},{default:t(()=>[e(i,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(n,{type:"QAvatar",size:"24px"})]),_:1}),e(i,null,{default:t(()=>[e(n,{type:"text",width:"70%"})]),_:1})]),_:1})]),_:1})]),_:1}),e(f,{class:"q-pt-none"},{default:t(()=>[l("div",ke,[e(n,{type:"text",width:"90px",height:"20px"})])]),_:1})]),_:1})])),64)):(d(),v(V,{key:1},[P.value.length===0?(d(),v("div",Ae,[e(r,{name:"person_search",size:"4em"}),ze,Be])):se("",!0),(d(!0),v(V,null,F(P.value,a=>(d(),v("div",{key:a.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[e(M,{class:"employee-card",flat:"",bordered:"",style:U(G(a.status))},{default:t(()=>[e(f,null,{default:t(()=>[l("div",Te,[e(ce,{icon:C(a.status).icon,color:C(a.status).chipColor,"text-color":C(a.status).chipTextColor,class:"text-weight-bold",size:"xs"},{default:t(()=>[x(p(C(a.status).label),1)]),_:2},1032,["icon","color","text-color"]),e(le,{icon:"more_horiz",round:"",flat:"",dense:""},{default:t(()=>[e(de,null,{default:t(()=>[e(A,{style:{"min-width":"100px"}},{default:t(()=>[O((d(),S(u,{clickable:""},{default:t(()=>[e(i,null,{default:t(()=>[x("Edit")]),_:1})]),_:1})),[[$]]),O((d(),S(u,{clickable:""},{default:t(()=>[e(i,null,{default:t(()=>[x("Delete")]),_:1})]),_:1})),[[$]])]),_:1})]),_:1})]),_:1})]),l("div",De,[e(oe,{size:"90px"},{default:t(()=>[e(ue,{src:a.avatar||k(J),"error-src":k(J),"spinner-color":"primary",style:{height:"90px",width:"90px"}},null,8,["src","error-src"])]),_:2},1024),l("div",Ee,p(k(H)(a)),1),l("div",Le,p(a.position),1)])]),_:2},1024),e(f,{class:"q-pt-none"},{default:t(()=>[e(A,{dense:""},{default:t(()=>[e(u,{class:"q-px-none"},{default:t(()=>[e(i,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(r,{name:"storefront",color:"grey-8"})]),_:1}),e(i,null,{default:t(()=>[e(pe,{class:"text-grey-8 ellipsis"},{default:t(()=>{var _;return[x(p(((_=a==null?void 0:a.designation)==null?void 0:_.name)||"N/A"),1)]}),_:2},1024)]),_:2},1024),e(i,{side:""},{default:t(()=>[l("div",Ne,[e(r,{name:"schedule",class:"q-mr-xs"}),l("span",null,p(a.employment_type.category||"N/A"),1)])]),_:2},1024)]),_:2},1024),e(u,{class:"q-px-none"},{default:t(()=>[e(i,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(r,{name:"email",color:"grey-8"})]),_:1}),e(i,null,{default:t(()=>{var _,j;return[l("a",{href:"mailto:"+(((_=a==null?void 0:a.user_designation)==null?void 0:_.email)||""),class:"contact-pill"},p(((j=a==null?void 0:a.user_designation)==null?void 0:j.email)||"N/A"),9,Pe)]}),_:2},1024)]),_:2},1024),e(u,{class:"q-px-none"},{default:t(()=>[e(i,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(r,{name:"phone",color:"grey-8"})]),_:1}),e(i,null,{default:t(()=>[l("a",{href:"tel:"+(a.phone||"").replace(/\D/g,""),class:"contact-pill"},p(a.phone||"N/A"),9,je)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(f,{class:"q-pt-none"},{default:t(()=>[l("div",Re,[Fe,l("a",{href:"#",style:U([X(a.status),{"text-decoration":"none",cursor:"pointer"}]),class:"text-weight-bold",onClick:ie(_=>Z(a),["prevent"])},[x(" View details "),e(r,{name:"arrow_forward_ios",size:"0.7em",class:"q-ml-xs"})],12,Me)])]),_:2},1024),e(_e,{showing:h.value===a.id,label:"Loading...","label-class":"text-primary","label-style":"font-size: 1.1em"},{default:t(()=>[e(me,{size:"50px",color:"primary"})]),_:2},1032,["showing"])]),_:2},1032,["style"])]))),128))],64))])]),_:1}))}};var pt=ve(Oe,[["__scopeId","data-v-3b8b1a77"]]);export{pt as default};
