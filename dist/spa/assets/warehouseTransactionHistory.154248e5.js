import{c as A,r as R,o as m,a3 as C,f as e,w as t,Q as U,I as V,J as a,$ as n,M as j,a0 as d,be as K,a2 as Z,K as he,aJ as xe,ae as fe,a4 as L,N as ne,O as G,R as W,z as ie,L as ee,e as Q,a5 as H,a1 as oe,bc as pe,bJ as Le}from"./index.95535fc5.js";import{Q as se}from"./QTab.690a04a4.js";import{Q as Pe}from"./QTabs.05d0001e.js";import{Q as le}from"./QTabPanel.685cf475.js";import{Q as Ne}from"./QTabPanels.b68a8b0d.js";import{Q as ce}from"./QSpinnerDots.545caf62.js";import{Q as Y}from"./QBadge.f6fa00ad.js";import{Q as me}from"./QScrollArea.fe4fee25.js";import{u as E}from"./warehouse.d2332407.js";import{u as te}from"./premix.d8ffe639.js";import{q as de}from"./date.cee13728.js";import{u as ue}from"./use-quasar.b4debcba.js";import{a as g}from"./QSelect.897317cb.js";import{a as z,b as v}from"./QMenu.c00b3098.js";import{Q as B}from"./QList.23cce242.js";import{C as ge}from"./ClosePopup.72ef2273.js";import{u as re}from"./use-dialog-plugin-component.265148b1.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as Se}from"./QPagination.b8695c68.js";import{Q as Ie,a as Fe}from"./QTable.76122b34.js";import{u as ye}from"./stock-delivery.7c0660f4.js";import{u as Me}from"./user.c13b3b4d.js";import"./QResizeObserver.30a0bec5.js";import"./rtl.276c3f1b.js";import"./use-panel.9a135570.js";import"./touch.9135741d.js";import"./selection.5f62c0e6.js";import"./use-render-cache.3aae9b27.js";import"./QScrollObserver.2f6abb29.js";import"./TouchPan.b02b61f8.js";import"./axios.42e54811.js";import"./QChip.3638906a.js";import"./use-virtual-scroll.6cad5f3e.js";import"./position-engine.dda6e8cf.js";import"./QVirtualScroll.dd59bc84.js";const Qe=s=>(G("data-v-a39c1e44"),s=s(),W(),s),Ye={class:"row justify-between"},He={class:"text-h6"},Be=Qe(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),Oe=Qe(()=>a("div",{class:"text-h6"},"Decline Report",-1)),Ke={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){const{dialogRef:P,onDialogHide:I,onDialogOK:w,onDialogCancel:k}=re(),_=E(),N=A(()=>_.user);console.log("userdata",N.value);const q=N.value.data.employee_id,S=te(),b=s;console.log("report",b.report);const x=R(!1),h=R(""),D=R(!1),y=()=>{D.value=!0},f=o=>{const c=$=>$?$.charAt(0).toUpperCase()+$.slice(1).toLowerCase():"",r=o.firstname?c(o.firstname):"No Firstname",i=o.middlename?c(o.middlename).charAt(0)+".":"",u=o.lastname?c(o.lastname):"No Lastname";return`${r} ${i} ${u}`},l=async()=>{try{const o={id:b.report.id,request_premixes_id:b.report.id,branch_premix_id:b.report.branch_premix_id,employee_id:q,status:b.report.status,quantity:b.report.quantity,warehouse_id:b.report.warehouse_id,notes:"Confirmed Premix"},c=await S.confirmPremix(o);console.log("Report confirmedss:",c),ne.create({type:"positive",message:"Report confirmed successfully"}),x.value=!1}catch(o){console.error(o)}},p=async()=>{const o={id:b.report.id,request_premixes_id:b.report.id,branch_premix_id:b.report.branch_premix_id,employee_id:q,status:"decline",quantity:b.report.quantity,warehouse_id:b.report.warehouse_id,notes:h.value};await S.declinePremix(o),D.value=!1};return(o,c)=>(m(),C(L,null,[e(Z,{ref_key:"dialogRef",ref:P,modelValue:x.value,"onUpdate:modelValue":c[1]||(c[1]=r=>x.value=r),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",Ye,[a("div",He,n(s.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:c[0]||(c[0]=r=>x.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+n(f(s.report.employee)),1),a("div",null," Branch: "+n(s.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[d(" Status: "),e(Y,{color:"warning",outlined:""},{default:t(()=>[d(n(s.report.status),1)]),_:1})])]),_:1}),e(V,null,{default:t(()=>[Be]),_:1}),e(V,null,{default:t(()=>[e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(n(s.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(n(s.report.quantity),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(V,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(j,{color:"negative",label:"Decline",class:"action-btn",onClick:y}),e(j,{color:"positive",label:"Confirm",class:"action-btn",onClick:l})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]),e(Z,{modelValue:D.value,"onUpdate:modelValue":c[3]||(c[3]=r=>D.value=r)},{default:t(()=>[e(U,null,{default:t(()=>[e(V,null,{default:t(()=>[Oe]),_:1}),e(V,null,{default:t(()=>[e(he,{modelValue:h.value,"onUpdate:modelValue":c[2]||(c[2]=r=>h.value=r),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[r=>!!r||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(xe,{align:"right"},{default:t(()=>[fe(e(j,{flat:"",label:"Cancel",color:"primary"},null,512),[[ge]]),e(j,{flat:"",label:"Confirm",color:"negative",onClick:p})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ee=O(Ke,[["__scopeId","data-v-a39c1e44"]]);const Re=s=>(G("data-v-292fa318"),s=s(),W(),s),Ge={key:0,class:"spinner-wrapper"},We={key:1,class:"q-mt-xl"},Je={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},Xe=Re(()=>a("div",{class:"text-h6 text-grey-7 q-mt-sm"},n("No Premixes available."),-1)),Ze=Re(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},n("Check again later."),-1)),et={class:"q-gutter-md q-ma-md"},tt={class:"row items-start justify-between"},at={class:"col-8 column q-gutter-y-xs"},st={class:"text-body1 text-weight-bold text-primary-dark"},lt={class:"text-caption text-grey-6 text-weight-meduim"},ot={class:"col-4 column items-end q-gutter-y-xs"},nt={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},rt={class:"row justify-between items-end"},it={class:"column q-gutter-y-xs"},ct=Re(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),dt={class:"text-body2 text-weight-semibold text-grey-9"},ut={__name:"PendingPage",setup(s){const P=E(),I=A(()=>P.user);console.log("userdata",I.value);const w=te(),k=A(()=>w.pendingPremixData),_=I.value.device.reference_id;console.log("warehouseId",_);const N=R("pending"),q=R(!0),S=R(!1),b=ue();ie(async()=>{_&&await y()});const x=l=>de.formatDate(l,"MMM DD, YYYY || hh:mm A"),h=l=>l?l.toLowerCase().split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" "):"",D=l=>{const p=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",o=l.firstname?p(l.firstname):"No Firstname",c=l.middlename?p(l.middlename).charAt(0)+".":"",r=l.lastname?p(l.lastname):"No Lastname";return`${o} ${c} ${r}`},y=async()=>{try{q.value=!0,await w.fetchPendingPremix(_,N.value),k.value.length||(S.value=!0)}catch{S.value=!0}finally{q.value=!1}},f=l=>{b.dialog({component:Ee,componentProps:{report:l}})};return(l,p)=>q.value?(m(),C("div",Ge,[e(ce,{size:"50px",color:"primary"})])):(m(),C("div",We,[k.value.length===0?(m(),C("div",Je,[e(ee,{name:"search_off",size:"60px",color:"grey-6"}),Xe,Ze])):(m(),Q(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",et,[(m(!0),C(L,null,H(k.value,(o,c)=>(m(),Q(U,{key:c,onClick:r=>f(o),class:"pending-card elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var r,i;return[a("div",tt,[a("div",at,[a("div",st," Premix: "+n(h(o.name)||"-"),1),a("div",lt,n(x(o.created_at)||"-"),1)]),a("div",ot,[a("div",null,[e(Y,{color:"warning",class:"text-weight-bold q-px-md q-py-sm pending-badge"},{default:t(()=>[d(" PENDING ")]),_:1})]),a("div",nt,n(((i=(r=o.branch_premix)==null?void 0:r.branch_recipe)==null?void 0:i.branch.name)||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",rt,[a("div",it,[ct,a("div",dt,n(D(o.employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var mt=O(ut,[["__scopeId","data-v-292fa318"]]);const _t={class:"row justify-between"},pt={class:"text-h6"},ft=a("div",{class:"text-h6",align:"center"},"Premix",-1),gt=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),vt={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var p,o,c;const{dialogRef:P,onDialogHide:I,onDialogOK:w,onDialogCancel:k}=re(),_=R(!1),N=E(),q=A(()=>N.user);console.log("userdata",q.value);const S=q.value.data.employee_id,b=te(),x=s,h=r=>{const i=Number(r);return isNaN(i)?"":(i%1===0,i.toString())},D=(r,i)=>{if(i==="Pcs")return`${r} pcs`;if(i==="Grams"){if(r>=1e3){let u=r/1e3;return`${u%1===0?u.toString():u.toString().replace(/^0+/,"")} kgs`}return`${r} g`}return`${r} ${i}`},y=((c=(o=(p=x.report)==null?void 0:p.branch_premix)==null?void 0:o.branch_recipe)==null?void 0:c.ingredient_groups)||"Undefined";console.log("ingrdientsData",y),console.log("report to proceed",x.report);const f=r=>{const i=M=>M?M.charAt(0).toUpperCase()+M.slice(1).toLowerCase():"",u=r.firstname?i(r.firstname):"No Firstname",$=r.middlename?i(r.middlename).charAt(0)+".":"",T=r.lastname?i(r.lastname):"No Lastname";return`${u} ${$} ${T}`},l=async()=>{try{const r={id:x.report.id,request_premixes_id:x.report.id,branch_premix_id:x.report.branch_premix_id,employee_id:S,status:"process",quantity:x.report.quantity,warehouse_id:x.report.warehouse_id,notes:"Process Premix"},i=await b.processPremix(r);console.log("Report Process:",i),ne.create({type:"positive",message:"Premix proceed to process successfully"}),_.value=!1}catch(r){console.error(r)}};return(r,i)=>(m(),Q(Z,{ref_key:"dialogRef",ref:P,modelValue:_.value,"onUpdate:modelValue":i[1]||(i[1]=u=>_.value=u),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",_t,[a("div",pt,n(s.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:i[0]||(i[0]=u=>_.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+n(f(s.report.employee)),1),a("div",null," Branch: "+n(s.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[d(" Status: "),e(Y,{color:"green",outlined:""},{default:t(()=>[d(n(s.report.status),1)]),_:1})])]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[ft,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(n(s.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(n(h(s.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[gt,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(m(!0),C(L,null,H(K(y),(u,$)=>(m(),Q(z,{key:$},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(n(u.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[d(n(u.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(n(D(u.quantity*s.report.quantity,u.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(V,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[fe(e(j,{flat:"",label:"Cancel",color:"negative"},null,512),[[ge]]),e(j,{color:"primary",label:"Process",class:"action-btn",onClick:l})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const be=s=>(G("data-v-33fd577a"),s=s(),W(),s),ht={key:0,class:"spinner-wrapper"},xt={key:1,class:"q-mt-xl"},yt={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},bt=be(()=>a("div",{class:"text-h6 text-grey-7 q-mt-sm"},n("No Premixes available."),-1)),$t=be(()=>a("div",{class:"text-body1 text-grey-7 q-mt-sm"},n("Check again later."),-1)),wt={class:"q-gutter-md q-ma-md"},kt={class:"row items-start justify-between"},qt={class:"col-8 column q-gutter-y-xs"},Dt={class:"text-body1 text-weight-bold text-primary-dark"},Ct={class:"text-caption text-grey-6 text-weight-medium"},Pt={class:"col-4 column items-end q-gutter-y-xs"},Nt={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},St={class:"row justify-between items-end"},Rt={class:"column q-gutter-y-xs"},Vt=be(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),It={class:"text-body2 text-weight-semibold text-grey-9"},Qt={class:"col-5 column"},Tt=be(()=>a("div",{class:"text-caption text-grey-7"},"Confirmed by:",-1)),At={class:"text-body2 text-weight-semibold text-grey-9"},zt={__name:"ConfirmPage",setup(s){const P=E(),w=A(()=>P.user).value.device.reference_id;console.log("warehouseId",w);const k=te(),_=A(()=>k.confirmPremixData);console.log("confirmedPremixData",_.value);const N=R("confirmed"),q=R(!0),S=R(!1),b=ue();ie(async()=>{w&&await y()});const x=l=>l?l.toLowerCase().split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" "):"",h=l=>de.formatDate(l,"MMM DD, YYYY || hh:mm A"),D=l=>{const p=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",o=l.firstname?p(l.firstname):"No Firstname",c=l.middlename?p(l.middlename).charAt(0)+".":"",r=l.lastname?p(l.lastname):"No Lastname";return`${o} ${c} ${r}`},y=async()=>{try{q.value=!0,await k.fetchConfirmPremix(w,N.value),_.value.length||(S.value=!0)}catch{S.value=!0}finally{q.value=!1}},f=l=>{b.dialog({component:vt,componentProps:{report:l}})};return(l,p)=>q.value?(m(),C("div",ht,[e(ce,{size:"50px",color:"primary"})])):(m(),C("div",xt,[_.value.length===0?(m(),C("div",yt,[e(ee,{name:"warning",color:"grey-6",size:"60px"}),bt,$t])):(m(),Q(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",wt,[(m(!0),C(L,null,H(_.value,(o,c)=>(m(),Q(U,{key:c,onClick:r=>f(o),class:"elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-gutter-sm enhanced-card-section"},{default:t(()=>{var r,i,u;return[a("div",kt,[a("div",qt,[a("div",Dt," Premix: "+n(x(o.name)||"-"),1),a("div",Ct,n(h(o.created_at)||"-"),1)]),a("div",Pt,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm confirmed-badge"},{default:t(()=>[d(" CONFIRMED ")]),_:1})]),a("div",Nt,n(((u=(i=(r=o.branch_premix)==null?void 0:r.branch_recipe)==null?void 0:i.branch)==null?void 0:u.name)||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",St,[a("div",Rt,[Vt,a("div",It,n(D(o.employee)||"-"),1)]),a("div",Qt,[Tt,a("div",At,n(D(o.history[0].employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var jt=O(zt,[["__scopeId","data-v-33fd577a"]]);const Ut={class:"row justify-between"},Lt={class:"text-h6"},Ft=a("div",{class:"text-h6",align:"center"},"Premix",-1),Mt=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),Yt={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var h,D,y;const{dialogRef:P,onDialogHide:I,onDialogOK:w,onDialogCancel:k}=re(),_=R(!1),N=s,q=f=>{const l=r=>r?r.charAt(0).toUpperCase()+r.slice(1).toLowerCase():"",p=f.firstname?l(f.firstname):"No Firstname",o=f.middlename?l(f.middlename).charAt(0)+".":"",c=f.lastname?l(f.lastname):"No Lastname";return`${p} ${o} ${c}`},S=f=>{const l=Number(f);return isNaN(l)?"":(l%1===0,l.toString())},b=(f,l)=>{if(l==="Pcs")return`${f} pcs`;if(l==="Grams"){if(f>=1e3){let p=f/1e3;return`${p%1===0?p.toString():p.toString().replace(/^0+/,"")} kgs`}return`${f} g`}return`${f} ${l}`},x=((y=(D=(h=N.report)==null?void 0:h.branch_premix)==null?void 0:D.branch_recipe)==null?void 0:y.ingredient_groups)||"Undefined";return console.log("ingrdientsData",x),(f,l)=>(m(),C("div",null,[e(Z,{ref_key:"dialogRef",ref:P,modelValue:_.value,"onUpdate:modelValue":l[1]||(l[1]=p=>_.value=p),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",Ut,[a("div",Lt,n(s.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:l[0]||(l[0]=p=>_.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+n(q(s.report.employee)),1),a("div",null," Branch: "+n(s.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[d(" Status: "),e(Y,{color:"red-6",outlined:""},{default:t(()=>[d(n(s.report.status),1)]),_:1})])]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[Ft,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(n(s.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(n(S(s.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[Mt,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(m(!0),C(L,null,H(K(x),(p,o)=>(m(),Q(z,{key:o},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(n(p.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[d(n(p.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(n(b(p.quantity*s.report.quantity,p.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])]))}};const $e=s=>(G("data-v-72783351"),s=s(),W(),s),Ht={key:0,class:"spinner-wrapper"},Bt={key:1},Ot={key:0,class:"column items-center text-center q-pa-lg no-data-message"},Kt=$e(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},n("No Premixes available."),-1)),Et=$e(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},n("Check again later."),-1)),Gt={class:"q-gutter-md q-ma-md"},Wt={class:"row items-start justify-between"},Jt={class:"col-8 column q-gutter-y-xs"},Xt={class:"text-body1 text-weight-bold text-primary-dark"},Zt={class:"text-caption text-grey-6 text-weight-medium"},ea={class:"col-4 column items-end q-gutter-y-xs"},ta={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},aa={class:"row items-end justify-between"},sa={class:"column q-gutter-y-xs"},la=$e(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),oa={class:"text-body2 text-weight-semibold text-grey-9"},na={class:"col-5 column"},ra=$e(()=>a("div",{class:"text-caption text-grey-7"},"Declined By:",-1)),ia={class:"text-body2 text-weight-semibold text-grey-9"},ca={key:2,class:"q-pt-lg flex flex-center"},da={__name:"DeclinePage",setup(s){const P=E(),w=A(()=>P.user).value.device.reference_id;console.log("warehouseId",w);const k=te(),_=A(()=>k.declinePremixData);console.log("declinedPremixData",_.value);const N=R("declined"),q=R(!0),S=R(!1),b=ue(),x=R(""),h=A(()=>{var c;return((c=k.declinePremixData)==null?void 0:c.pagination)||{current_page:1,last_page:1,per_page:3}});console.log("pagination",h.value);const D=c=>de.formatDate(c,"MMM DD, YYYY || hh:mm A"),y=c=>c?c.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "):"",f=c=>{const r=T=>T?T.charAt(0).toUpperCase()+T.slice(1).toLowerCase():"",i=c.firstname?r(c.firstname):"No Firstname",u=c.middlename?r(c.middlename).charAt(0)+".":"",$=c.lastname?r(c.lastname):"No Lastname";return`${i} ${u} ${$}`},l=async(c=1)=>{try{q.value=!0,await k.fetchDeclinePremix(w,N.value,h.value.current_page,h.value.per_page,x.value),_.value.length||(S.value=!0),console.log("declinedPremixData",_.value)}catch{S.value=!0}finally{q.value=!1}};ie(async()=>{w&&await l(w,N.value,h.value.current_page)});const p=async()=>{l(w,N.value,h.value.current_page)},o=c=>{b.dialog({component:Yt,componentProps:{report:c}})};return(c,r)=>(m(),C(L,null,[a("div",null,[e(he,{outlined:"",dense:"",placeholder:"Search declined delivery",class:"q-mb-md","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6"},{prepend:t(()=>[e(ee,{name:"search",color:"grey-6"})]),_:1})]),q.value?(m(),C("div",Ht,[e(ce,{size:"50px",color:"primary"})])):(m(),C("div",Bt,[_.value.length===0?(m(),C("div",Ot,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),Kt,Et])):(m(),Q(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Gt,[(m(!0),C(L,null,H(_.value.data,(i,u)=>(m(),Q(U,{key:u,onClick:$=>o(i),class:"elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",Wt,[a("div",Jt,[a("div",Xt," Premix: "+n(y(i.name)||"-"),1),a("div",Zt,n(D(i.created_at)),1)]),a("div",ea,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm declined-badge text-uppercase"},{default:t(()=>[d(n(i.status),1)]),_:2},1024)]),a("div",ta,n(i.branch_premix.branch_recipe.branch.name||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",aa,[a("div",sa,[la,a("div",oa,n(f(i.employee)||"-"),1)]),a("div",na,[ra,a("div",ia,n(f(i.history[0].employee)||"-"),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))])),h.value.last_page>1?(m(),C("div",ca,[e(Se,{modelValue:h.value.current_page,"onUpdate:modelValue":[r[0]||(r[0]=i=>h.value.current_page=i),p],max:h.value.last_page,"max-pages":3,"boundary-links":"","direction-links":"","icon-first":"first_page","icon-last":"last_page","icon-prev":"chevron_left","icon-next":"chevron_right",color:"primary","active-color":"white","active-text-color":"primary",class:"elegant-pagination"},null,8,["modelValue","max"])])):pe("",!0)],64))}};var ua=O(da,[["__scopeId","data-v-72783351"]]);const ma={class:"row justify-between"},_a={class:"text-h6"},pa=a("div",{class:"text-h6",align:"center"},"Premix",-1),fa=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),ga={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var o,c,r;const{dialogRef:P,onDialogHide:I,onDialogOK:w,onDialogCancel:k}=re(),_=E(),N=A(()=>_.user);console.log("userdata",N.value);const q=N.value.data.employee_id,S=te(),b=s;console.log("report",b.report);const x=R(!1),h=((r=(c=(o=b.report)==null?void 0:o.branch_premix)==null?void 0:c.branch_recipe)==null?void 0:r.ingredient_groups)||"Undefined";console.log("ingrdientsData",h);const D=i=>{const u=J=>J?J.charAt(0).toUpperCase()+J.slice(1).toLowerCase():"",$=i.firstname?u(i.firstname):"No Firstname",T=i.middlename?u(i.middlename).charAt(0)+".":"",M=i.lastname?u(i.lastname):"No Lastname";return`${$} ${T} ${M}`},y=i=>{const u=Number(i);return isNaN(u)?"":(u%1===0,u.toString())},f=(i,u)=>{if(u==="Pcs")return`${i} pcs`;if(u==="Grams"){if(i>=1e3){let $=i/1e3;return`${$%1===0?$.toString():$.toString().replace(/^0+/,"")} kgs`}return`${i} g`}return`${i} ${u}`},l=A(()=>h.map(i=>{const u=parseFloat(i.quantity)*parseFloat(b.report.quantity);return{...i,totalQuantity:u,formattedQuantity:f(u,i.ingredient.unit)}}));console.log("computedIngredients",l.value);const p=async()=>{try{const i={id:b.report.id,request_premixes_id:b.report.id,branch_premix_id:b.report.branch_premix_id,employee_id:q,status:"completed",quantity:b.report.quantity,warehouse_id:b.report.warehouse_id,notes:"Completed Premix",ingredients:l.value.map($=>({ingredient_id:$.ingredient.id,quantity:$.totalQuantity,unit:$.ingredient.unit}))},u=await S.completedPremix(i);console.log("Report Process:",u),ne.create({type:"positive",message:"Premix completed to process successfully"}),x.value=!1}catch(i){console.error(i),ne.create({type:"negative",message:"An error occurred while processing the premix."})}};return(i,u)=>(m(),Q(Z,{ref_key:"dialogRef",ref:P,modelValue:x.value,"onUpdate:modelValue":u[1]||(u[1]=$=>x.value=$),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",ma,[a("div",_a,n(s.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:u[0]||(u[0]=$=>x.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+n(D(s.report.employee)),1),a("div",null," Branch: "+n(s.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[d(" Status: "),e(Y,{color:"primary",outlined:""},{default:t(()=>[d(n(s.report.status),1)]),_:1})])]),_:1}),e(V,null,{default:t(()=>[pa]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(n(s.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(n(y(s.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[a("div",null,[fa,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(m(!0),C(L,null,H(l.value,($,T)=>(m(),Q(z,{key:T},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(n($.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[d(n($.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(n(f($.quantity*b.report.quantity,$.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1}),e(V,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[fe(e(j,{flat:"",label:"Cancel",color:"primary"},null,512),[[ge]]),e(j,{color:"cyan-7",label:"Completed",class:"action-btn",onClick:p})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const we=s=>(G("data-v-e236f710"),s=s(),W(),s),va={key:0,class:"spinner-wrapper"},ha={key:1},xa={key:0,class:"column items-center text-center q-pa-lg no-data-message"},ya=we(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},n("No Premixes available."),-1)),ba=we(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},n("Check again later."),-1)),$a={class:"q-gutter-md q-ma-md"},wa={class:"row items-start justify-between"},ka={class:"col-8 column q-gutter-y-xs"},qa={class:"text-body1 text-weight-bold text-primary-dark"},Da={class:"text-caption text-grey-6 text-weight-dark"},Ca={class:"col-4 column items-end q-gutter-y-xs"},Pa={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Na={class:"row items-end justify-between"},Sa={class:"column q-gutter-y-xs"},Ra=we(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),Va={class:"text-body2 text-weight-semibold text-grey-9"},Ia={class:"col-5 column"},Qa=we(()=>a("div",{class:"text-caption text-grey-7"},"Process By:",-1)),Ta={class:"text-body2 text-weight-semibold text-grey-9"},Aa={__name:"ProcessPage",setup(s){const P=E(),w=A(()=>P.user).value.device.reference_id;console.log("warehouseId",w);const k=te(),_=A(()=>k.processPremixData);console.log("processPremixData",_.value);const N=R("process"),q=R(!0),S=R(!1),b=ue();ie(async()=>{w&&await y()});const x=l=>de.formatDate(l,"MMM DD, YYYY || hh:mm A"),h=l=>l?l.toLowerCase().split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" "):"",D=l=>{const p=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",o=l.firstname?p(l.firstname):"No Firstname",c=l.middlename?p(l.middlename).charAt(0)+".":"",r=l.lastname?p(l.lastname):"No Lastname";return`${o} ${c} ${r}`},y=async()=>{try{q.value=!0,await k.fetchProcessPremix(w,N.value),_.value.length||(S.value=!0)}catch{S.value=!0}finally{q.value=!1}},f=l=>{b.dialog({component:ga,componentProps:{report:l}})};return(l,p)=>q.value?(m(),C("div",va,[e(ce,{size:"50px",color:"primary"})])):(m(),C("div",ha,[_.value.length===0?(m(),C("div",xa,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),ya,ba])):(m(),Q(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",$a,[(m(!0),C(L,null,H(_.value,(o,c)=>(m(),Q(U,{key:c,onClick:r=>f(o),class:"elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var r,i,u;return[a("div",wa,[a("div",ka,[a("div",qa," Premix: "+n(h(o.name)||"-"),1),a("div",Da,n(x(o.created_at)||"-"),1)]),a("div",Ca,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm process-badge text-uppercase"},{default:t(()=>[d(n(o.status),1)]),_:2},1024)]),a("div",Pa,n(((u=(i=(r=o.branch_premix)==null?void 0:r.branch_recipe)==null?void 0:i.branch)==null?void 0:u.name)||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",Na,[a("div",Sa,[Ra,a("div",Va,n(D(o.employee)||"-"),1)]),a("div",Ia,[Qa,a("div",Ta,n(D(o.history[0].employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var za=O(Aa,[["__scopeId","data-v-e236f710"]]);const ja={class:"row justify-between"},Ua={class:"text-h6"},La=a("div",{class:"text-h6",align:"center"},"Premix",-1),Fa=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),Ma={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var p,o,c;const{dialogRef:P,onDialogHide:I,onDialogOK:w,onDialogCancel:k}=re(),_=R(!1),N=E(),q=A(()=>N.user);console.log("userdata",q.value);const S=q.value.data.employee_id,b=te(),x=s,h=r=>{const i=Number(r);return isNaN(i)?"":(i%1===0,i.toString())},D=(r,i)=>{if(i==="Pcs")return`${r} pcs`;if(i==="Grams"){if(r>=1e3){let u=r/1e3;return`${u%1===0?u.toString():u.toString().replace(/^0+/,"")} kgs`}return`${r} g`}return`${r} ${i}`},y=((c=(o=(p=x.report)==null?void 0:p.branch_premix)==null?void 0:o.branch_recipe)==null?void 0:c.ingredient_groups)||"Undefined";console.log("ingrdientsData",y),console.log("report to proceed",x.report);const f=r=>{const i=M=>M?M.charAt(0).toUpperCase()+M.slice(1).toLowerCase():"",u=r.firstname?i(r.firstname):"No Firstname",$=r.middlename?i(r.middlename).charAt(0)+".":"",T=r.lastname?i(r.lastname):"No Lastname";return`${u} ${$} ${T}`},l=async()=>{try{const r={id:x.report.id,request_premixes_id:x.report.id,branch_premix_id:x.report.branch_premix_id,employee_id:S,status:"to deliver",quantity:x.report.quantity,warehouse_id:x.report.warehouse_id,notes:"To-Deliver Premix"},i=await b.toDeliverPremix(r);console.log("Report To Deliver:",i),ne.create({type:"positive",message:"Premix To Deliver to process successfully"}),_.value=!1}catch(r){console.error(r)}};return(r,i)=>(m(),C("div",null,[e(Z,{ref_key:"dialogRef",ref:P,modelValue:_.value,"onUpdate:modelValue":i[1]||(i[1]=u=>_.value=u),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",ja,[a("div",Ua,n(s.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:i[0]||(i[0]=u=>_.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+n(f(s.report.employee)),1),a("div",null," Branch: "+n(s.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[d(" Status: "),e(Y,{color:"black",outlined:""},{default:t(()=>[d(n(s.report.status),1)]),_:1})])]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[La,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(n(s.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(n(h(s.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[Fa,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(m(!0),C(L,null,H(K(y),(u,$)=>(m(),Q(z,{key:$},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(n(u.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[d(n(u.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(n(D(u.quantity*s.report.quantity,u.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(V,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[fe(e(j,{flat:"",label:"Cancel",color:"negative"},null,512),[[ge]]),e(j,{color:"dark",label:"TO-Deliver",class:"action-btn",onClick:l})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])]))}};const ke=s=>(G("data-v-0ff81216"),s=s(),W(),s),Ya={key:0,class:"spinner-wrapper"},Ha={key:1},Ba={key:0,class:"column items-center text-center q-pa-lg no-data-message"},Oa=ke(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},n("No Premixes available."),-1)),Ka=ke(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},n("Check again later."),-1)),Ea={class:"q-gutter-md q-ma-md"},Ga={class:"row items-start justify-between"},Wa={class:"col-8 column q-gutter-y-xs"},Ja={class:"text-body1 text-weight-bold text-primary-dark"},Xa={class:"text-caption text-grey-6 text-weight-dark"},Za={class:"col-4 column items-end q-gutter-y-xs"},es={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},ts={class:"row items-end justify-between"},as={class:"column q-gutter-y-xs"},ss=ke(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),ls={class:"text-body2 text-weight-semibold text-grey-9"},os={class:"col-5 column"},ns=ke(()=>a("div",{class:"text-caption text-grey-7"},"Completed By:",-1)),rs={class:"text-body2 text-weight-semibold text-grey-9"},is={__name:"CompletedPage",setup(s){const P=E(),w=A(()=>P.user).value.device.reference_id;console.log("warehouseId",w);const k=te(),_=A(()=>k.completedPremixData);console.log("completedPremixData",_.value);const N=R("completed"),q=R(!0),S=R(!1),b=ue();ie(async()=>{w&&await y()});const x=l=>de.formatDate(l,"MMM DD, YYYY || hh:mm A"),h=l=>l?l.toLowerCase().split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" "):"",D=l=>{const p=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",o=l.firstname?p(l.firstname):"No Firstname",c=l.middlename?p(l.middlename).charAt(0)+".":"",r=l.lastname?p(l.lastname):"No Lastname";return`${o} ${c} ${r}`},y=async()=>{try{q.value=!0,await k.fetchCompletedPremix(w,N.value),_.value.length||(S.value=!0)}catch{S.value=!0}finally{q.value=!1}},f=l=>{b.dialog({component:Ma,componentProps:{report:l}})};return(l,p)=>q.value?(m(),C("div",Ya,[e(ce,{size:"50px",color:"primary"})])):(m(),C("div",Ha,[_.value.length===0?(m(),C("div",Ba,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),Oa,Ka])):(m(),Q(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Ea,[(m(!0),C(L,null,H(_.value,(o,c)=>(m(),Q(U,{key:c,onClick:r=>f(o),class:"elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",Ga,[a("div",Wa,[a("div",Ja," Premix: "+n(h(o.name)||"-"),1),a("div",Xa,n(x(o.created_at)||"-"),1)]),a("div",Za,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm completed-badge text-uppercase"},{default:t(()=>[d(n(o.status),1)]),_:2},1024)]),a("div",es,n(o.branch_premix.branch_recipe.branch.name||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",ts,[a("div",as,[ss,a("div",ls,n(D(o.employee)),1)]),a("div",os,[ns,a("div",rs,n(D(o.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var cs=O(is,[["__scopeId","data-v-0ff81216"]]);const ds={class:"row justify-between"},us={class:"text-h6"},ms=a("div",{class:"text-h6",align:"center"},"Premix",-1),_s=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),ps={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var f,l,p;const{dialogRef:P,onDialogHide:I}=re(),w=R(!1),k=E(),_=A(()=>k.user);console.log("userdata",_.value);const N=_.value.data.employee_id,q=te(),S=s;console.log("props report",S.report);const b=o=>{const c=Number(o);return isNaN(c)?"":(c%1===0,c.toString())},x=(o,c)=>{if(c==="Pcs")return`${o} pcs`;if(c==="Grams"){if(o>=1e3){let r=o/1e3;return`${r%1===0?r.toString():r.toString().replace(/^0+/,"")} kgs`}return`${o} g`}return`${o} ${c}`},h=((p=(l=(f=S.report)==null?void 0:f.branch_premix)==null?void 0:l.branch_recipe)==null?void 0:p.ingredient_groups)||"Undefined";console.log("ingrdientsData",h),console.log("report to proceed",S.report);const D=o=>{const c=$=>$?$.charAt(0).toUpperCase()+$.slice(1).toLowerCase():"",r=o.firstname?c(o.firstname):"No Firstname",i=o.middlename?c(o.middlename).charAt(0)+".":"",u=o.lastname?c(o.lastname):"No Lastname";return`${r} ${i} ${u}`},y=async()=>{try{const o={id:S.report.id,request_premixes_id:S.report.id,branch_premix_id:S.report.branch_premix_id,employee_id:N,status:"to receive",quantity:S.report.quantity,warehouse_id:S.report.warehouse_id,notes:"To Receive Premix"},c=await q.toReceivePremix(o);console.log("Report Process:",c),ne.create({type:"positive",message:"Premix to receive to process successfully"}),w.value=!1}catch(o){console.error(o)}};return(o,c)=>(m(),Q(Z,{ref_key:"dialogRef",ref:P,modelValue:w.value,"onUpdate:modelValue":c[1]||(c[1]=r=>w.value=r),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",ds,[a("div",us,n(s.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:c[0]||(c[0]=r=>w.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+n(D(s.report.employee)),1),a("div",null," Branch: "+n(s.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[d(" Status: "),e(Y,{color:"brown-9",outlined:""},{default:t(()=>[d(n(s.report.status),1)]),_:1})])]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[ms,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(n(s.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(n(b(s.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[_s,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(m(!0),C(L,null,H(K(h),(r,i)=>(m(),Q(z,{key:i},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(n(r.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[d(n(r.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(n(x(r.quantity*s.report.quantity,r.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(V,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[fe(e(j,{flat:"",label:"Cancel",color:"negative"},null,512),[[ge]]),e(j,{color:"brown-9",label:"TO Receive",class:"action-btn",onClick:y})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const qe=s=>(G("data-v-39603dae"),s=s(),W(),s),fs={key:0,class:"spinner-wrapper"},gs={key:1},vs={key:0,class:"column items-center text-center q-pa-lg no-data-message"},hs=qe(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},n("No Premixes available."),-1)),xs=qe(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},n("Check again later."),-1)),ys={class:"q-gutter-md q-ma-md"},bs={class:"row items-start justify-between"},$s={class:"col-8 column q-gutter-y-xs"},ws={class:"text-body1 text-weight-bold text-primary-dark"},ks={class:"text-caption text-grey-6 text-weight-dark"},qs={class:"col-4 column items-end q-gutter-y-xs"},Ds={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Cs={class:"row items-end justify-between"},Ps={class:"column q-gutter-y-xs"},Ns=qe(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),Ss={class:"text-body2 text-weight-semibold text-grey-9"},Rs={class:"col-5 column"},Vs=qe(()=>a("div",{class:"text-caption text-grey-7"},"To Deliver By:",-1)),Is={class:"text-body2 text-weight-semibold text-grey-9"},Qs={__name:"ToDeliverPage",setup(s){const P=E(),w=A(()=>P.user).value.device.reference_id;console.log("warehouseIssd",w);const k=te(),_=A(()=>k.toDeliverPremixData);console.log("toDeliverPremixData",_.value);const N=R("to deliver"),q=R(!0),S=R(!1),b=ue();ie(async()=>{w&&await D()});const x=f=>de.formatDate(f,"MMM DD, YYYY || hh:mm A"),h=f=>{const l=r=>r?r.charAt(0).toUpperCase()+r.slice(1).toLowerCase():"",p=f.firstname?l(f.firstname):"No Firstname",o=f.middlename?l(f.middlename).charAt(0)+".":"",c=f.lastname?l(f.lastname):"No Lastname";return`${p} ${o} ${c}`},D=async()=>{try{q.value=!0,await k.fetchToDeliverPremix(w,N.value),_.value.length||(S.value=!0)}catch{S.value=!0}finally{q.value=!1}},y=f=>{b.dialog({component:ps,componentProps:{report:f}})};return(f,l)=>q.value?(m(),C("div",fs,[e(ce,{size:"50px",color:"primary"})])):(m(),C("div",gs,[_.value.length===0?(m(),C("div",vs,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),hs,xs])):(m(),Q(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",ys,[(m(!0),C(L,null,H(_.value,(p,o)=>(m(),Q(U,{key:o,onClick:c=>y(p),class:"elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",bs,[a("div",$s,[a("div",ws," Premix: "+n(Le(p.name)||"-"),1),a("div",ks,n(x(p.created_at)||"-"),1)]),a("div",qs,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm to-deliver-badge text-uppercase"},{default:t(()=>[d(n(p.status),1)]),_:2},1024)]),a("div",Ds,n(p.branch_premix.branch_recipe.branch.name||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",Cs,[a("div",Ps,[Ns,a("div",Ss,n(h(p.employee)),1)]),a("div",Rs,[Vs,a("div",Is,n(h(p.history[0].employee)),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Ts=O(Qs,[["__scopeId","data-v-39603dae"]]);const As={class:"row justify-between"},zs={class:"text-h6"},js=a("div",{class:"text-h6",align:"center"},"Premix",-1),Us=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),Ls={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var h,D,y;const{dialogRef:P,onDialogHide:I}=re(),w=R(!1),k=E(),_=A(()=>k.user);console.log("userdata",_.value),_.value.data.employee_id,te();const N=s,q=f=>{const l=Number(f);return isNaN(l)?"":(l%1===0,l.toString())},S=(f,l)=>{if(l==="Pcs")return`${f} pcs`;if(l==="Grams"){if(f>=1e3){let p=f/1e3;return`${p%1===0?p.toString():p.toString().replace(/^0+/,"")} kgs`}return`${f} g`}return`${f} ${l}`},b=((y=(D=(h=N.report)==null?void 0:h.branch_premix)==null?void 0:D.branch_recipe)==null?void 0:y.ingredient_groups)||"Undefined";console.log("ingrdientsData",b),console.log("report to proceed",N.report);const x=f=>{const l=r=>r?r.charAt(0).toUpperCase()+r.slice(1).toLowerCase():"",p=f.firstname?l(f.firstname):"No Firstname",o=f.middlename?l(f.middlename).charAt(0)+".":"",c=f.lastname?l(f.lastname):"No Lastname";return`${p} ${o} ${c}`};return(f,l)=>(m(),Q(Z,{ref_key:"dialogRef",ref:P,modelValue:w.value,"onUpdate:modelValue":l[1]||(l[1]=p=>w.value=p),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",As,[a("div",zs,n(s.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:l[0]||(l[0]=p=>w.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+n(x(s.report.employee)),1),a("div",null," Branch: "+n(s.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[d(" Status: "),e(Y,{color:"amber-10",outlined:""},{default:t(()=>[d(n(s.report.status),1)]),_:1})])]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[js,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(n(s.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(n(q(s.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[Us,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(m(!0),C(L,null,H(K(b),(p,o)=>(m(),Q(z,{key:o},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(n(p.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[d(n(p.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(n(S(p.quantity*s.report.quantity,p.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};const De=s=>(G("data-v-6e25d3d8"),s=s(),W(),s),Fs={key:0,class:"spinner-wrapper"},Ms={key:1},Ys={key:0,class:"column items-center text-center q-pa-lg no-data-message"},Hs=De(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},n("No Premixes available."),-1)),Bs=De(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},n("Check again later."),-1)),Os={class:"q-gutter-md q-ma-md"},Ks={class:"row items-start justify-between"},Es={class:"col-8 column q-gutter-y-xs"},Gs={class:"text-body1 text-weight-bold text-primary-dark"},Ws={class:"text-caption text-grey-6 text-weight-medium"},Js={class:"col-4 column items-end q-gutter-y-xs"},Xs={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Zs={class:"row items-end justify-between"},el={class:"column q-gutter-y-xs"},tl=De(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),al={class:"text-body2 text-weight-semibold text-grey-9"},sl={class:"col-5 column"},ll=De(()=>a("div",{class:"text-caption text-grey-7"},"To Received By:",-1)),ol={class:"text-body2 text-weight-semibold text-grey-9"},nl={__name:"ToReceivePage",setup(s){const P=E(),w=A(()=>P.user).value.device.reference_id;console.log("warehouseId",w);const k=te(),_=A(()=>k.toReceivePremixData);console.log("toReceivePremixData",_.value);const N=R("process"),q=R(!0),S=R(!1),b=ue();ie(async()=>{w&&await y()});const x=l=>de.formatDate(l,"MMM DD, YYYY || hh:mm A"),h=l=>l?l.toLowerCase().split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" "):"",D=l=>{const p=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",o=l.firstname?p(l.firstname):"No Firstname",c=l.middlename?p(l.middlename).charAt(0)+".":"",r=l.lastname?p(l.lastname):"No Lastname";return`${o} ${c} ${r}`},y=async()=>{try{q.value=!0,await k.fetchToReceivePremix(w,N.value),_.value.length||(S.value=!0)}catch{S.value=!0}finally{q.value=!1}},f=l=>{b.dialog({component:Ls,componentProps:{report:l}})};return(l,p)=>q.value?(m(),C("div",Fs,[e(ce,{size:"50px",color:"primary"})])):(m(),C("div",Ms,[_.value.length===0?(m(),C("div",Ys,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),Hs,Bs])):(m(),Q(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Os,[(m(!0),C(L,null,H(_.value,(o,c)=>(m(),Q(U,{key:c,onClick:r=>f(o),class:"elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",Ks,[a("div",Es,[a("div",Gs," Premix: "+n(h(o.name)||"-"),1),a("div",Ws,n(x(o.created_at)),1)]),a("div",Js,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm to-receive-badge text-uppercase"},{default:t(()=>[d(n(o.status),1)]),_:2},1024)]),a("div",Xs,n(o.branch_premix.branch_recipe.branch.name||"-"),1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",Zs,[a("div",el,[tl,a("div",al,n(D(o.employee)||"-"),1)]),a("div",sl,[ll,a("div",ol,n(D(o.history[0].employee)||"-"),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var rl=O(nl,[["__scopeId","data-v-6e25d3d8"]]);const il={class:"row justify-between"},cl={class:"text-h6"},dl=a("div",{class:"text-h6",align:"center"},"Premix",-1),ul=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),ml={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var b,x,h;const P=s;console.log("report",P.report);const I=R(!1),w=()=>{I.value=!0},k=((h=(x=(b=P.report)==null?void 0:b.branch_premix)==null?void 0:x.branch_recipe)==null?void 0:h.ingredient_groups)||"Undefined";console.log("ingrdientsData",k);const _=D=>{const y=o=>o?o.charAt(0).toUpperCase()+o.slice(1).toLowerCase():"",f=D.firstname?y(D.firstname):"No Firstname",l=D.middlename?y(D.middlename).charAt(0)+".":"",p=D.lastname?y(D.lastname):"No Lastname";return`${f} ${l} ${p}`},N=D=>{const y=Number(D);return isNaN(y)?"":(y%1===0,y.toString())},q=(D,y)=>{if(y==="Pcs")return`${D} pcs`;if(y==="Grams"){if(D>=1e3){let f=D/1e3;return`${f%1===0?f.toString():f.toString().replace(/^0+/,"")} kgs`}return`${D} g`}return`${D} ${y}`},S=A(()=>k.map(D=>{const y=parseFloat(D.quantity)*parseFloat(P.report.quantity);return{...D,totalQuantity:y,formattedQuantity:q(y,D.ingredient.unit)}}));return(D,y)=>(m(),C(L,null,[a("div",null,[e(j,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:w})]),e(Z,{modelValue:I.value,"onUpdate:modelValue":y[1]||(y[1]=f=>I.value=f)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",il,[a("div",cl,n(s.report.name),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:y[0]||(y[0]=f=>I.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,"Baker: "+n(_(s.report.employee)),1),a("div",null," Branch: "+n(s.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[d(" Status: "),e(Y,{color:"green",outlined:""},{default:t(()=>[d(n(s.report.status),1)]),_:1})])]),_:1}),e(V,null,{default:t(()=>[dl]),_:1}),e(V,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Premix Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(n(s.report.name),1)]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-h6"},{default:t(()=>[d(n(N(s.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[a("div",null,[ul,e(B,{dense:"",separator:"",class:"box"},{default:t(()=>[e(z,null,{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Code")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d(" Name")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,{class:"text-overline"},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(m(!0),C(L,null,H(S.value,(f,l)=>(m(),Q(z,{key:l},{default:t(()=>[e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(n(f.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,{class:"text-subtitle1",align:"left"},{default:t(()=>[d(n(f.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,{class:"text-subtitle1"},{default:t(()=>[d(n(q(f.quantity*P.report.quantity,f.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const _l=s=>(G("data-v-0e6a32b3"),s=s(),W(),s),pl={key:0,class:"spinner-wrapper"},fl={key:1},gl={key:0,class:"data-error"},vl=_l(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),hl={__name:"ReceivedPage",setup(s){const P=E(),w=A(()=>P.user).value.device.reference_id;console.log("warehouseId",w);const k=te(),_=A(()=>k.receivePremixData);console.log("receivePremixData",_.value);const N=R([]),q=R({page:1,rowsPerPage:0,rowsNumber:0}),S=R("process"),b=R(!0),x=R(!1);ie(async()=>{w&&await f(w),console.log("receivePremixData",_.value)});const h=o=>de.formatDate(o,"MMM DD, YYYY || hh:mm A"),D=o=>o?o.split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1).toLowerCase()).join(" "):"",y=o=>{const c=$=>$?$.charAt(0).toUpperCase()+$.slice(1).toLowerCase():"",r=o.firstname?c(o.firstname):"No Firstname",i=o.middlename?c(o.middlename).charAt(0)+".":"",u=o.lastname?c(o.lastname):"No Lastname";return`${r} ${i} ${u}`},f=async(o,c=0,r=5)=>{try{b.value=!0,await k.fetchReceivePremix(o,S.value,c,r),console.log("receivePremixDatssa",_.value);const{data:i,current_page:u,per_page:$,total:T}=_.value;N.value=i,console.log("premixData.value",N.value),q.value.page=u,q.value.rowsPerPage=$,q.value.rowsNumber=T,_.value.length||(x.value=!0)}catch{x.value=!0}finally{b.value=!1}},l=o=>{f(w,o.pagination.page,o.pagination.rowsPerPage)},p=[{name:"created_at",label:"Date / Time",align:"left",field:o=>h(o.created_at)||"Not Available",sortable:!0},{name:"employee",label:"Employee",align:"left",field:o=>y(o.employee)||"Not Available",sortable:!0},{name:"branch",label:"Branch Name",align:"left",field:o=>o.branch_premix.branch_recipe.branch.name||"Not Available",sortable:!0},{name:"premix_name",label:"Premix Name",align:"left",field:o=>o.name||"Not Available",sortable:!0},{name:"status",label:"Status",align:"left",field:"status",sortable:!0},{name:"action",label:"Action",align:"left",field:"action",sortable:!0}];return(o,c)=>b.value?(m(),C("div",pl,[e(ce,{size:"50px",color:"primary"})])):(m(),C("div",fl,[N.value.length===0?(m(),C("div",gl,[e(ee,{name:"warning",color:"warning",size:"4em"}),vl])):(m(),Q(Fe,{key:1,rows:N.value,columns:p,pagination:q.value,"onUpdate:pagination":c[0]||(c[0]=r=>q.value=r),"rows-per-page-options":[3,5,10,0],onRequest:l,flat:"",bordered:""},{"body-cell-status":t(r=>[e(Ie,{props:r},{default:t(()=>[e(Y,{color:"green"},{default:t(()=>[d(n(D(r.row.status)),1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-action":t(r=>[e(Ie,{props:r},{default:t(()=>[e(ml,{report:r.row},null,8,["report"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"]))]))}};var xl=O(hl,[["__scopeId","data-v-0e6a32b3"]]);const yl={class:"q-gutter-y-sm"},bl={__name:"PremixTab",setup(s){const P=R("pendingReports"),I=A(()=>{switch(P.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";case"processReports":return"blue-9";case"completedReports":return"blue-grey-10";case"toDeliverReports":return"brown-6";case"toReceiveReports":return"purple-1";case"receive":return"orange-7";default:return"light-green-13"}});return(w,k)=>(m(),Q(U,{flat:""},{default:t(()=>[e(oe),a("div",yl,[e(Pe,{modelValue:P.value,"onUpdate:modelValue":k[0]||(k[0]=_=>P.value=_),"indicator-color":I.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(se,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Premix"}),e(se,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Premix"}),e(se,{class:"text-dark",name:"declineReports",label:"\u{1F534}Decline Premix"}),e(se,{class:"text-dark",name:"processReports",label:"\u{1F535}Process Premix"}),e(se,{class:"text-dark",name:"completedReports",label:"\u26ABCompleted Premix"}),e(se,{class:"text-dark",name:"toDeliverReports",label:"\u{1F7E4}To Deliver Premix"}),e(se,{class:"text-dark",name:"toReceiveReports",label:"\u26AATo Receive Premix"}),e(se,{class:"text-dark",name:"receive",label:"\u{1F7E0}Receive Premix"})]),_:1},8,["modelValue","indicator-color"])]),e(Ne,{modelValue:P.value,"onUpdate:modelValue":k[1]||(k[1]=_=>P.value=_),animated:""},{default:t(()=>[e(le,{name:"pendingReports"},{default:t(()=>[e(mt)]),_:1}),e(le,{name:"confirmReports"},{default:t(()=>[e(jt)]),_:1}),e(le,{name:"declineReports"},{default:t(()=>[e(ua)]),_:1}),e(le,{name:"processReports"},{default:t(()=>[e(za)]),_:1}),e(le,{name:"completedReports"},{default:t(()=>[e(cs)]),_:1}),e(le,{name:"toDeliverReports"},{default:t(()=>[e(Ts)]),_:1}),e(le,{name:"toReceiveReports"},{default:t(()=>[e(rl)]),_:1}),e(le,{name:"receive"},{default:t(()=>[e(xl)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var $l=O(bl,[["__scopeId","data-v-07a51121"]]);const Te=s=>(G("data-v-aa3acf16"),s=s(),W(),s),wl=Te(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Report",-1)),kl={key:0},ql=Te(()=>a("div",{class:"text-positive text-subtitle1"}," Please confirm again to finalize this report. ",-1)),Dl={__name:"ConfirmDialog",setup(s){const{dialogRef:P,onDialogHide:I,onDialogOK:w,onDialogCancel:k}=re(),_=R(!1),N=()=>{_.value?w():_.value=!0};return(q,S)=>(m(),Q(Z,{ref_key:"dialogRef",ref:P,onHide:K(I)},{default:t(()=>[e(U,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(V,{class:"q-pt-none q-pb-sm"},{default:t(()=>[wl,_.value?pe("",!0):(m(),C("p",kl,"Are you sure you want to confirm this report?"))]),_:1}),_.value?(m(),Q(V,{key:0},{default:t(()=>[ql]),_:1})):pe("",!0),e(oe,{class:"q-mb-md"}),e(V,null,{default:t(()=>[e(xe,{align:"right",class:"q-pt-none"},{default:t(()=>[fe(e(j,{flat:"",dense:"",label:"No",color:"primary",class:"q-mr-sm"},null,512),[[ge]]),e(j,{dense:"",label:_.value?"Confirm":"Yes! Confirm",color:"positive",class:"q-btn-rounded q-px-lg",onClick:N},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Cl=O(Dl,[["__scopeId","data-v-aa3acf16"]]);const Pl=s=>(G("data-v-b44cae3c"),s=s(),W(),s),Nl=Pl(()=>a("div",{class:"text-h5 q-mb-xs"},"Decline Report",-1)),Sl={key:0},Rl={__name:"DeclinedDialog",setup(s){const{dialogRef:P,onDialogHide:I,onDialogOK:w,onDialogCancel:k}=re(),_=R(!1),N=R(""),q=R(null),S=()=>{_.value?q.value.validate()&&w({remarks:N.value}):_.value=!0};return(b,x)=>(m(),Q(Z,{ref_key:"dialogRef",ref:P,onHide:K(I),persistent:""},{default:t(()=>[e(U,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(V,{class:"q-pt-none q-pb-sm"},{default:t(()=>[Nl,_.value?pe("",!0):(m(),C("p",Sl,"Are you sure you want to decline this report?"))]),_:1}),_.value?(m(),Q(V,{key:0},{default:t(()=>[e(he,{modelValue:N.value,"onUpdate:modelValue":x[0]||(x[0]=h=>N.value=h),type:"textarea",label:"Reason for declining",filled:"",autogrow:"",dense:"",ref_key:"remarksInput",ref:q,rules:[h=>!!h||"Remarks are required"]},null,8,["modelValue","rules"])]),_:1})):pe("",!0),e(oe,{class:"q-mb-md"}),e(V,null,{default:t(()=>[e(xe,{align:"right",class:"q-pt-none"},{default:t(()=>[fe(e(j,{flat:"",dense:"",label:"No",color:"primary",class:"q-mr-sm"},null,512),[[ge]]),e(j,{dense:"",label:_.value?"Submit Decline":"Yes! Decline",color:"negative",class:"q-btn-rounded q-px-lg",onClick:S},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Vl=O(Rl,[["__scopeId","data-v-b44cae3c"]]);const Il=s=>(G("data-v-2b0fd850"),s=s(),W(),s),Ql={class:"row justify-between"},Tl={class:"text-h6"},Al=Il(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),zl={key:1,class:"text-caption text-grey-6 q-mt-md"},jl={__name:"TransactionView",props:{report:{type:Object,required:!0}},emits:["fetchAgain"],setup(s,{emit:P}){const I=Me(),w=A(()=>I.userData);console.log("userData in TransactionView:",w.value);const k=ye(),{dialogRef:_,onDialogHide:N,onDialogOK:q,onDialogCancel:S}=re(),b=s;console.log("report",b.report);const x=R(!1),h=ue(),D=c=>c?c.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "):"",y=c=>c==null?"No Quantity":parseFloat(c),f=()=>{h.dialog({component:Cl}).onOk(c=>{console.log("Remarks from child:",c),l(b.report)}).onCancel(()=>{console.log("Cancelled")})},l=async c=>{var r,i,u,$,T,M,J,ae,ve,_e;try{h.loading.show(),console.log("Confirming report",c);const F=c.items.map(Ce=>{const je=parseFloat(Ce.quantity)||0,Ue=parseFloat(Ce.gram)||0;return{...Ce,total_grams:je*Ue}});console.log("Per Item Totals:",F),console.log("employueee id:",(u=(i=(r=w.value)==null?void 0:r.data)==null?void 0:i.employee)==null?void 0:u.id);const ze={...c,employee_id:((M=(T=($=w.value)==null?void 0:$.data)==null?void 0:T.employee)==null?void 0:M.id)||"0",status:"confirmed",items:F},X=await k.confirmDeliveryStocks(ze);console.log("responsesss",X),(X==null?void 0:X.data)||((J=X==null?void 0:X.data)==null?void 0:J.message)==="Delivery confirmed successfully."?(ne.create({type:"positive",message:X.data.message||"Delivery Confirmed Successfully"}),(X==null?void 0:X.status)===200&&(q({action:"confirmed"}),x.value=!1)):ne.create({type:"negative",message:((ae=X==null?void 0:X.data)==null?void 0:ae.message)||"Failed to Confirm deliveryq"}),console.log("responssssse",X)}catch(F){console.log(F),ne.create({type:"negative",message:((_e=(ve=F==null?void 0:F.response)==null?void 0:ve.data)==null?void 0:_e.message)||"Failed to Confirm delivery"})}finally{h.loading.hide()}},p=()=>{h.dialog({component:Vl}).onOk(c=>{console.log("Remarks from child:",c.remarks),o(b.report.id,c.remarks)}).onCancel(()=>{console.log("Cancelled")})},o=async(c,r)=>{var i,u,$,T,M,J,ae,ve;try{h.loading.show(),console.log("Declining report",c,"with remarks:",r);const _e={id:c,employee_id:(($=(u=(i=w.value)==null?void 0:i.data)==null?void 0:u.employee)==null?void 0:$.id)||"0",status:"declined",remarks:r},F=await k.declineDeliveryStocks(_e);(F==null?void 0:F.data)||((T=F==null?void 0:F.data)==null?void 0:T.message)==="Delivery declined successfully."?(ne.create({type:"positive",message:((M=F==null?void 0:F.data)==null?void 0:M.message)||"Delivery Declined Successfully"}),(F==null?void 0:F.status)===200&&(q({action:"declined"}),x.value=!1)):ne.create({type:"negative",message:((J=F==null?void 0:F.data)==null?void 0:J.message)||"Failed to Decline delivery"}),console.log("responsessssss",F)}catch(_e){console.log(_e),ne.create({type:"negative",message:((ve=(ae=_e==null?void 0:_e.response)==null?void 0:ae.data)==null?void 0:ve.message)||"Failed to decline delivery. Please try again."})}finally{h.loading.hide()}};return(c,r)=>(m(),Q(Z,{ref_key:"dialogRef",ref:_,modelValue:x.value,"onUpdate:modelValue":r[1]||(r[1]=i=>x.value=i),onHide:K(N)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,{class:"emphasized-header"},{default:t(()=>[a("div",Ql,[a("div",Tl,"From: "+n(D(s.report.from_name)),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:r[0]||(r[0]=i=>x.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[a("div",null,[Al,s.report.items&&s.report.items.length?(m(),Q(B,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(z,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d(" Raw Materials Code ")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d("Stocks Category")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,null,{default:t(()=>[d(" Quantity ")]),_:1})]),_:1})]),_:1}),(m(!0),C(L,null,H(s.report.items,(i,u)=>(m(),Q(z,{key:u},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>{var $;return[d(n((($=i.raw_material)==null?void 0:$.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d(n(i.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,null,{default:t(()=>[d(n(y(i.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(m(),C("div",zl," No items in this delivery "))])]),_:1}),e(xe,{class:"report-actions q-ma-sm q-gutter-sm",align:"right"},{default:t(()=>[e(j,{color:"negative",label:"Decline",class:"action-btn",onClick:p}),e(j,{color:"positive",label:"Confirm",class:"action-btn",onClick:f})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var Ul=O(jl,[["__scopeId","data-v-2b0fd850"]]);const Ll={key:0,class:"spinner-wrapper"},Fl={key:1,class:"q-mt-xl"},Ml={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},Yl={class:"text-h6 text-grey-7 q-mt-sm"},Hl={class:"text-body1 text-grey-6 q-mt-sm"},Bl={class:"q-gutter-md q-ma-md"},Ol={class:"row items-start justify-between"},Kl={class:"col-8 column q-gutter-y-xs"},El={class:"text-body1 text-weight-bold text-primary-dark"},Gl={class:"text-caption text-grey-6 text-weight-meduim"},Wl={class:"col-4 column items-end q-gutter-y-xs"},Jl={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Xl={__name:"PendingPage",setup(s){const P=E(),I=A(()=>P.user);console.log("userdata",I.value);const w=ye(),k=A(()=>w.pendingStocks),_=I.value.device.reference_id;console.log("warehouseId",_);const N=R("pending"),q=R("Warehouse"),S=R(!0),b=R(!1),x=ue(),h=l=>l?l.toLowerCase().split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" "):"",D=l=>de.formatDate(l,"MMM DD, YYYY || hh:mm A"),y=async()=>{try{S.value=!0,await w.fetchPendingDeliveryReports(_,N.value,q.value),k.value.length||(b.value=!0),console.log("stockDelivery",k.value)}catch(l){console.log(l)}finally{S.value=!1}};ie(async()=>{_&&await y(_,N.value)});const f=(l,p)=>{x.dialog({component:Ul,componentProps:{report:l}}).onOk(o=>{var c;if(console.log("response from child:",o),(o==null?void 0:o.action)==="declined"||(o==null?void 0:o.action)==="confirmed"){const r=(c=w.pendingStocks)==null?void 0:c.data;if(Array.isArray(r)){const i=r.findIndex(u=>u.id===l.id);i!==-1&&r.splice(i,1)}}})};return(l,p)=>S.value?(m(),C("div",Ll,[e(ce,{size:"50px",color:"primary"})])):(m(),C("div",Fl,[k.value.data.length===0?(m(),C("div",Ml,[e(ee,{name:"search_off",size:"60px",color:"grey-6"}),a("div",Yl,n(l.searchQuery?"No deliveries found for your search.":"No deliveries available."),1),a("div",Hl,n(l.searchQuery?"Try another search term.":"Check again later."),1)])):(m(),Q(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Bl,[(m(!0),C(L,null,H(k.value.data,(o,c)=>(m(),Q(U,{key:c,onClick:r=>f(o,c),class:"pending-card elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",Ol,[a("div",Kl,[a("div",El," From: "+n(h(o.from_name)||"-"),1),a("div",Gl,n(D(o.created_at)||"-"),1)]),a("div",Wl,[a("div",null,[e(Y,{color:"warning",class:"text-weight-bold q-px-md q-py-sm pending-badge"},{default:t(()=>[d(" PENDING ")]),_:1})]),a("div",Jl,n(o.items.length||"-")+" items ",1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Zl=O(Xl,[["__scopeId","data-v-4759fa89"]]);const eo=s=>(G("data-v-2856f3dc"),s=s(),W(),s),to={class:"row justify-between"},ao={class:"text-h6"},so=eo(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),lo={key:1,class:"text-caption text-grey-6 q-mt-md"},oo={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){const{dialogRef:P,onDialogHide:I,onDialogOK:w,onDialogCancel:k}=re();console.log("report",s.report);const N=R(!1),q=b=>b?b.toLowerCase().split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" "):"",S=b=>b==null?"No Quantity":parseFloat(b);return(b,x)=>(m(),Q(Z,{ref_key:"dialogRef",ref:P,modelValue:N.value,"onUpdate:modelValue":x[1]||(x[1]=h=>N.value=h),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,{class:"emphasized-header"},{default:t(()=>[a("div",to,[a("div",ao,"From: "+n(q(s.report.from_name)),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:x[0]||(x[0]=h=>N.value=!1)})])]),_:1}),e(V,null,{default:t(()=>[d(" Status: "),e(Y,{color:"green"},{default:t(()=>[d(n(s.report.status),1)]),_:1})]),_:1}),e(V,null,{default:t(()=>[a("div",null,[so,s.report.items&&s.report.items.length?(m(),Q(B,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(z,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d(" Raw Materials Code ")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d("Stocks Category")]),_:1})]),_:1}),e(v,{side:""},{default:t(()=>[e(g,null,{default:t(()=>[d(" Quantity ")]),_:1})]),_:1})]),_:1}),(m(!0),C(L,null,H(s.report.items,(h,D)=>(m(),Q(z,{key:D},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>{var y;return[d(n(((y=h.raw_material)==null?void 0:y.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d(n(h.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,null,{default:t(()=>[d(n(S(h.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(m(),C("div",lo," No items in this delivery "))])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var no=O(oo,[["__scopeId","data-v-2856f3dc"]]);const ro=s=>(G("data-v-59f83460"),s=s(),W(),s),io={key:0,class:"spinner-wrapper"},co={key:1,class:"q-mt-xl"},uo={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},mo={class:"text-h6 text-grey-7 q-mt-sm"},_o={class:"text-body1 text-grey-6 q-mt-xs"},po={class:"q-gutter-md q-ma-md"},fo={class:"row items-start justify-between"},go={class:"col-8 column q-gutter-y-xs"},vo={class:"text-body1 text-weight-bold text-primary-dark"},ho={class:"text-caption text-grey-6 text-weight-medium"},xo={class:"col-4 column items-end q-gutter-y-xs"},yo={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},bo={class:"row justify-between items-end"},$o={class:"column q-gutter-y-xs"},wo=ro(()=>a("div",{class:"text-caption text-grey-7"},"Confirmed By:",-1)),ko={class:"text-body2 text-weight-semibold text-grey-9"},qo={key:2,class:"q-pt-md flex flex-center"},Do={__name:"ConfirmPage",setup(s){const P=E(),I=A(()=>P.user);console.log("userdata",I.value);const w=ye(),k=A(()=>w.confirmStocks),_=I.value.device.reference_id;console.log("warehouseId",_);const N=R("confirmed"),q=R("Warehouse"),S=R(!0),b=R(!1),x=ue();R(null);const h=R();let D=null;const y=A(()=>{var u;return((u=w.confirmStocks)==null?void 0:u.pagination)||{current_page:1,last_page:1,per_page:3}}),f=u=>u?u.toLowerCase().split(" ").map($=>$.charAt(0).toUpperCase()+$.slice(1)).join(" "):"",l=u=>{const $=ae=>ae?ae.charAt(0).toUpperCase()+ae.slice(1).toLowerCase():"",T=u.firstname?$(u.firstname):"No Firstname",M=u.middlename?$(u.middlename).charAt(0)+".":"",J=u.lastname?$(u.lastname):"No Lastname";return`${T} ${M} ${J}`},p=u=>de.formatDate(u,"MMM DD, YYYY || hh:mm A"),o=async()=>{try{S.value=!0,await w.fetchConfirmedDeliveryReports(_,N.value,q.value,y.value.current_page,y.value.per_page,h.value),k.value.length||(b.value=!0),console.log("stockDeliverysss",k.value)}catch(u){console.log(u)}finally{S.value=!1}};ie(async()=>{_&&await o(_,N.value,q.value,y.value.current_page)});const c=async()=>{o(_,N.value,q.value,y.value.current_page)},r=()=>{D&&clearTimeout(D),D=setTimeout(()=>{o()},500)},i=u=>{x.dialog({component:no,componentProps:{report:u}})};return(u,$)=>(m(),C(L,null,[a("div",null,[e(he,{outlined:"",dense:"",placeholder:"Search delivery",class:"q-mb-sm","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6",modelValue:h.value,"onUpdate:modelValue":[$[0]||($[0]=T=>h.value=T),r]},{append:t(()=>[e(ee,{name:"search"})]),_:1},8,["modelValue"])]),S.value?(m(),C("div",io,[e(ce,{size:"50px",color:"primary"})])):(m(),C("div",co,[k.value.data.length===0?(m(),C("div",uo,[e(ee,{name:"search_off",size:"60px",color:"grey-6"}),a("div",mo,n(h.value?"No deliveries found for your search.":"No deliveries available."),1),a("div",_o,n(h.value?"Try another search term.":"Check again later."),1)])):(m(),Q(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",po,[(m(!0),C(L,null,H(k.value.data,(T,M)=>(m(),Q(U,{key:M,onClick:J=>i(T),class:"confirmed-card elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-gutter-sm enhanced-card-section"},{default:t(()=>[a("div",fo,[a("div",go,[a("div",vo," From: "+n(f(T.from_name)||"-"),1),a("div",ho,n(p(T.created_at)||"-"),1)]),a("div",xo,[a("div",null,[e(Y,{color:"positive",class:"text-weight-bold q-px-md q-py-sm confirmed-badge"},{default:t(()=>[d(" CONFIRMED ")]),_:1})]),a("div",yo,n(T.items.length||"-")+" items ",1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",bo,[a("div",$o,[wo,a("div",ko,n(l(T.approved_by)||"-"),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))])),y.value.last_page>1?(m(),C("div",qo,[e(Se,{modelValue:y.value.current_page,"onUpdate:modelValue":$[1]||($[1]=T=>y.value.current_page=T),max:y.value.last_page,"max-pages":3,"boundary-links":"","direction-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward",onClick:c},null,8,["modelValue","max"])])):pe("",!0)],64))}};var Co=O(Do,[["__scopeId","data-v-59f83460"]]);const Ve=s=>(G("data-v-5512bd22"),s=s(),W(),s),Po={class:"row justify-between"},No={class:"text-h6"},So=Ve(()=>a("span",{class:"text-bold"},"Status:",-1)),Ro=Ve(()=>a("span",{class:"text-bold"},"Remark:",-1)),Vo=Ve(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),Io={key:1,class:"text-caption text-grey-6 q-mt-md"},Qo={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){const{dialogRef:P,onDialogHide:I,onDialogOK:w,onDialogCancel:k}=re();console.log("report",s.report);const N=R(!1),q=b=>b?b.toLowerCase().split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" "):"",S=b=>b==null?"No Quantity":parseFloat(b);return(b,x)=>(m(),Q(Z,{ref_key:"dialogRef",ref:P,modelValue:N.value,"onUpdate:modelValue":x[1]||(x[1]=h=>N.value=h),onHide:K(I)},{default:t(()=>[e(U,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(V,null,{default:t(()=>[a("div",Po,[a("div",No,"From: "+n(q(s.report.from_name)),1),e(j,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:x[0]||(x[0]=h=>N.value=!1)})])]),_:1}),e(V,{class:"text-caption text-grey-7 q-mt-sm"},{default:t(()=>[So,e(Y,{color:"negative"},{default:t(()=>[d(n(s.report.status),1)]),_:1}),a("div",null,[Ro,d(" "+n(s.report.remarks||"No Remark"),1)])]),_:1}),e(V,null,{default:t(()=>[a("div",null,[Vo,s.report.items&&s.report.items.length?(m(),Q(B,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(z,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d(" Raw Materials Code ")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d("Stocks Category")]),_:1})]),_:1}),e(v,null,{default:t(()=>[e(g,{side:""},{default:t(()=>[d("Quantity")]),_:1})]),_:1})]),_:1}),(m(!0),C(L,null,H(s.report.items,(h,D)=>(m(),Q(z,{key:D},{default:t(()=>[e(v,null,{default:t(()=>[e(g,null,{default:t(()=>{var y;return[d(n(((y=h.raw_material)==null?void 0:y.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(v,null,{default:t(()=>[e(g,null,{default:t(()=>[d(n(h.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(v,{side:""},{default:t(()=>[e(g,null,{default:t(()=>[d(n(S(h.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(m(),C("div",Io," No items in this delivery "))])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var To=O(Qo,[["__scopeId","data-v-5512bd22"]]);const Ae=s=>(G("data-v-06ffae62"),s=s(),W(),s),Ao={key:0,class:"spinner-wrapper"},zo={key:1,class:"q-mt-xl"},jo={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},Uo={class:"text-h6 text-grey-7 q-mt-md"},Lo={class:"text-body1 text-grey-6 q-mt-sm"},Fo={class:"q-gutter-md q-pb-md"},Mo={class:"row items-start justify-between"},Yo={class:"col-8 column q-gutter-y-xs"},Ho={class:"text-body1 text-weight-bold text-primary-dark"},Bo={class:"text-caption text-grey-6 text-weight-medium"},Oo={class:"col-4 column items-end q-gutter-y-xs"},Ko={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Eo={class:"row justify-between items-end"},Go={class:"column q-gutter-y-xs"},Wo=Ae(()=>a("div",{class:"text-caption text-grey-7"},"Declined By:",-1)),Jo={class:"text-body2 text-weight-semibold text-grey-9"},Xo={class:"col-5 column"},Zo=Ae(()=>a("div",{class:"text-caption text-grey-7"},"Remark:",-1)),en={class:"text-body2 text-grey-8 remarks-text"},tn={key:2,class:"q-pt-lg flex flex-center"},an={__name:"DeclinePage",setup(s){const P=E(),I=A(()=>P.user);console.log("userdata",I.value);const w=ye(),k=A(()=>w.declinedStocks),_=I.value.device.reference_id;console.log("warehouseId",_);const N=R("declined"),q=R("Warehouse"),S=R(!0),b=R(!1),x=ue(),h=R();let D=null;const y=A(()=>{var u;return((u=w.declinedStocks)==null?void 0:u.pagination)||{current_page:1,last_page:1,per_page:3}}),f=u=>u?u.toLowerCase().split(" ").map($=>$.charAt(0).toUpperCase()+$.slice(1)).join(" "):"",l=u=>{const $=ae=>ae?ae.charAt(0).toUpperCase()+ae.slice(1).toLowerCase():"",T=u.firstname?$(u.firstname):"No Firstname",M=u.middlename?$(u.middlename).charAt(0)+".":"",J=u.lastname?$(u.lastname):"No Lastname";return`${T} ${M} ${J}`},p=u=>de.formatDate(u,"MMM DD, YYYY || hh:mm A"),o=async(u=1)=>{try{S.value=!0,await w.fetchDeclinedDeliveryReports(_,N.value,q.value,y.value.current_page,y.value.per_page,h.value),k.value.length||(b.value=!0),console.log("stockDeliveryDeclinedsss",k.value)}catch($){console.log($)}finally{S.value=!1}};ie(async()=>{_&&await o(_,N.value,q.value,y.value.current_page)});const c=async()=>{o(_,N.value,q.value,y.value.current_page)},r=async()=>{D&&clearTimeout(D),D=setTimeout(()=>{o(1)},500)},i=u=>{x.dialog({component:To,componentProps:{report:u}})};return(u,$)=>(m(),C(L,null,[a("div",null,[e(he,{outlined:"",dense:"",placeholder:"Search delivery",class:"q-mb-md search-input-elegant","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6",modelValue:h.value,"onUpdate:modelValue":[$[0]||($[0]=T=>h.value=T),r]},{prepend:t(()=>[e(ee,{name:"search",color:"grey-6"})]),_:1},8,["modelValue"])]),S.value?(m(),C("div",Ao,[e(ce,{size:"50px",color:"primary"})])):(m(),C("div",zo,[k.value.data.length===0?(m(),C("div",jo,[e(ee,{name:"search_off",size:"60px",color:"grey-5"}),a("div",Uo,n(h.value?"No deliveries found for your search.":"No deliveries available."),1),a("div",Lo,n(h.value?"Try another search term.":"Check again later."),1)])):(m(),Q(me,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Fo,[(m(!0),C(L,null,H(k.value.data,(T,M)=>(m(),Q(U,{key:M,onClick:J=>i(T),class:"declined-card elegant-card emphasized-card"},{default:t(()=>[e(V,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",Mo,[a("div",Yo,[a("div",Ho," From: "+n(f(T.from_name)),1),a("div",Bo,n(p(T.created_at)),1)]),a("div",Oo,[a("div",null,[e(Y,{color:"negative",class:"text-weight-bold q-px-md q-py-sm declined-badge"},{default:t(()=>[d(" DECLINED ")]),_:1})]),a("div",Ko,n(T.items.length)+" items ",1)])]),e(oe,{class:"q-my-md divider-elegant"}),a("div",Eo,[a("div",Go,[Wo,a("div",Jo,n(l(T.approved_by)),1)]),a("div",Xo,[Zo,a("div",en,n(T.remarks||"\u2014 No remark provided \u2014"),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))])),y.value.last_page>1?(m(),C("div",tn,[e(Se,{modelValue:y.value.current_page,"onUpdate:modelValue":[$[1]||($[1]=T=>y.value.current_page=T),c],max:y.value.last_page,"max-pages":5,"boundary-links":"","direction-links":"","icon-first":"first_page","icon-last":"last_page","icon-prev":"chevron_left","icon-next":"chevron_right",color:"primary","active-color":"white","active-text-color":"primary",class:"elegant-pagination"},null,8,["modelValue","max"])])):pe("",!0)],64))}};var sn=O(an,[["__scopeId","data-v-06ffae62"]]);const ln={class:"q-gutter-y-sm"},on={__name:"StocksDeliveryPage",setup(s){const P=R("pending"),I=A(()=>{switch(P.value){case"pending":return"warning";case"confirmed":return"green-13";case"declined":return"red-6";default:return"light-green-13"}});return(w,k)=>(m(),Q(U,{flat:""},{default:t(()=>[e(oe),a("div",ln,[e(Pe,{modelValue:P.value,"onUpdate:modelValue":k[0]||(k[0]=_=>P.value=_),"indicator-color":I.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(se,{class:"text-dark",name:"pending",label:"Pending"}),e(se,{class:"text-dark",name:"confirmed",label:"Confirmed"}),e(se,{class:"text-dark",name:"declined",label:"Declined"})]),_:1},8,["modelValue","indicator-color"])]),e(Ne,{modelValue:P.value,"onUpdate:modelValue":k[1]||(k[1]=_=>P.value=_),animated:""},{default:t(()=>[e(le,{name:"pending"},{default:t(()=>[e(Zl)]),_:1}),e(le,{name:"confirmed"},{default:t(()=>[e(Co)]),_:1}),e(le,{name:"declined"},{default:t(()=>[e(sn)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},nn={class:"q-gutter-y-sm"},Yn={__name:"warehouseTransactionHistory",setup(s){const P=R("premix"),I=A(()=>{switch(P.value){case"premix":return"brown";case"stocks_delivery":return"teal-5";default:return"light-green-13"}});return(w,k)=>(m(),Q(U,{flat:""},{default:t(()=>[e(V,{class:"text-h6"},{default:t(()=>[d(" Transaction History ")]),_:1}),a("div",nn,[e(Pe,{modelValue:P.value,"onUpdate:modelValue":k[0]||(k[0]=_=>P.value=_),"indicator-color":I.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(se,{class:"text-dark",name:"premix",label:"Premix"}),e(se,{class:"text-dark",name:"stocks_delivery",label:"Stocks Delivery"})]),_:1},8,["modelValue","indicator-color"])]),e(Ne,{modelValue:P.value,"onUpdate:modelValue":k[1]||(k[1]=_=>P.value=_),animated:""},{default:t(()=>[e(le,{name:"premix"},{default:t(()=>[e($l)]),_:1}),e(le,{name:"stocks_delivery"},{default:t(()=>[e(on)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Yn as default};
