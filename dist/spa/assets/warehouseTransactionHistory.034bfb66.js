import{c as j,r as V,o as r,a3 as D,f as e,w as t,Q as B,I as T,J as a,$ as l,be as n,M as U,a0 as o,a2 as te,K as xe,aJ as we,ae as ve,a4 as L,N as re,O as A,R as E,z as ce,L as ae,e as z,a5 as K,a1 as se,bc as pe}from"./index.5a162820.js";import{Q as le}from"./QTab.ae44fb4a.js";import{Q as Te}from"./QTabs.3ffc290e.js";import{Q as oe}from"./QTabPanel.75a0e479.js";import{Q as Ne}from"./QTabPanels.980411fb.js";import{Q as de}from"./QSpinnerDots.6eac22df.js";import{Q as Y}from"./QBadge.b71b5624.js";import{Q as _e}from"./QScrollArea.221c6c1f.js";import{u as J}from"./warehouse.d8c70afd.js";import{u as ne}from"./premix.71816ba4.js";import{u as ue}from"./use-quasar.6c782d29.js";import{t as W}from"./typography-format.be4059c7.js";import{a as _}from"./QSelect.687b4581.js";import{a as F,b as m}from"./QMenu.282f9a5b.js";import{Q as G}from"./QList.39b26f6f.js";import{C as fe}from"./ClosePopup.6a2ba672.js";import{u as ie}from"./use-dialog-plugin-component.79e51a1e.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as Qe}from"./QPagination.9bd7d64b.js";import{Q as je,a as Ze}from"./QTable.c006a11c.js";import{q as ze}from"./date.8a1a5ccd.js";import{u as $e}from"./stock-delivery.ae1b4730.js";import{u as et}from"./user.1e7bcd03.js";import"./QResizeObserver.ff132f74.js";import"./rtl.276c3f1b.js";import"./use-panel.d8c3da1a.js";import"./touch.9135741d.js";import"./selection.1a09d2ec.js";import"./use-render-cache.3aae9b27.js";import"./QScrollObserver.b20e6ffd.js";import"./TouchPan.db04e308.js";import"./axios.9ecc35b0.js";import"./QChip.5e6d1bc8.js";import"./use-virtual-scroll.29848ab5.js";import"./position-engine.67ff3bd3.js";import"./QVirtualScroll.a457ef5c.js";const Ue=s=>(A("data-v-1f876278"),s=s(),E(),s),tt={class:"row justify-between"},at={class:"text-h6"},st=Ue(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),lt=Ue(()=>a("div",{class:"text-h6"},"Decline Report",-1)),ot={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){const{capitalizeFirstLetter:d,formatFullname:R,formatRequestQuantity:N}=W(),{dialogRef:k,onDialogHide:w,onDialogOK:y,onDialogCancel:C}=ie(),q=J(),S=j(()=>q.user);console.log("userdata",S.value);const b=S.value.data.employee_id,$=ne(),g=s;console.log("report",g.report);const v=V(!1),x=V(""),f=V(!1),Q=()=>{f.value=!0},i=async()=>{try{const h={id:g.report.id,request_premixes_id:g.report.id,branch_premix_id:g.report.branch_premix_id,employee_id:b,status:g.report.status,quantity:g.report.quantity,warehouse_id:g.report.warehouse_id,notes:"Confirmed Premix"},u=await $.confirmPremix(h);console.log("Report confirmedss:",u),re.create({type:"positive",message:"Report confirmed successfully"}),v.value=!1}catch(h){console.error(h)}},P=async()=>{const h={id:g.report.id,request_premixes_id:g.report.id,branch_premix_id:g.report.branch_premix_id,employee_id:b,status:"decline",quantity:g.report.quantity,warehouse_id:g.report.warehouse_id,notes:x.value};await $.declinePremix(h),f.value=!1};return(h,u)=>(r(),D(L,null,[e(te,{ref_key:"dialogRef",ref:k,modelValue:v.value,"onUpdate:modelValue":u[1]||(u[1]=c=>v.value=c),onHide:n(w)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(T,{class:"emphasized-header"},{default:t(()=>[a("div",tt,[a("div",at,l(n(d)(s.report.name)||"-"),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:u[0]||(u[0]=c=>v.value=!1)})])]),_:1}),e(T,null,{default:t(()=>{var c,p,I;return[a("div",null,"Baker: "+l(n(R)(s.report.employee)||"-"),1),a("div",null," Branch: "+l(n(d)((I=(p=(c=s.report.branch_premix)==null?void 0:c.branch_recipe)==null?void 0:p.branch)==null?void 0:I.name)||"-"),1),a("div",null,[o(" Status: "),e(Y,{color:"warning",outlined:""},{default:t(()=>[o(l(n(d)(s.report.status)||"No Status"),1)]),_:1})])]}),_:1}),e(T,null,{default:t(()=>[st]),_:1}),e(T,null,{default:t(()=>[e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Premix Name")]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[o(l(n(d)(s.report.name)||"-"),1)]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[o(l(n(N)(s.report.quantity)||"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(T,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(U,{color:"negative",label:"Decline",class:"action-btn",onClick:Q}),e(U,{color:"positive",label:"Confirm",class:"action-btn",onClick:i})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]),e(te,{modelValue:f.value,"onUpdate:modelValue":u[3]||(u[3]=c=>f.value=c)},{default:t(()=>[e(B,null,{default:t(()=>[e(T,null,{default:t(()=>[lt]),_:1}),e(T,null,{default:t(()=>[e(xe,{modelValue:x.value,"onUpdate:modelValue":u[2]||(u[2]=c=>x.value=c),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[c=>!!c||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(we,{align:"right"},{default:t(()=>[ve(e(U,{flat:"",label:"Cancel",color:"primary"},null,512),[[fe]]),e(U,{flat:"",label:"Confirm",color:"negative",onClick:P})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var nt=O(ot,[["__scopeId","data-v-1f876278"]]);const Fe=s=>(A("data-v-ae885310"),s=s(),E(),s),rt={key:0,class:"spinner-wrapper"},it={key:1,class:"q-mt-xl"},ct={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},dt=Fe(()=>a("div",{class:"text-h6 text-grey-7 q-mt-sm"},l("No Premixes available."),-1)),ut=Fe(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},l("Check again later."),-1)),_t={class:"q-gutter-md q-ma-md"},mt={class:"row items-start justify-between"},pt={class:"col-8 column q-gutter-y-xs"},vt={class:"text-body1 text-weight-bold text-primary-dark"},ft={class:"text-caption text-grey-6 text-weight-meduim"},gt={class:"col-4 column items-end q-gutter-y-xs"},yt={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},ht={class:"row justify-between items-end"},xt={class:"column q-gutter-y-xs"},bt=Fe(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),wt={class:"text-body2 text-weight-semibold text-grey-9"},$t={__name:"PendingPage",setup(s){const{capitalizeFirstLetter:d,formatFullname:R,formatTimestamp:N}=W(),k=J(),w=j(()=>k.user);console.log("userdata",w.value);const y=ne(),C=j(()=>y.pendingPremixData),q=w.value.device.reference_id;console.log("warehouseId",q);const S=V("pending"),b=V(!0),$=V(!1),g=ue();ce(async()=>{q&&await v()});const v=async()=>{try{b.value=!0,await y.fetchPendingPremix(q,S.value),C.value.length||($.value=!0)}catch{$.value=!0}finally{b.value=!1}},x=f=>{g.dialog({component:nt,componentProps:{report:f}})};return(f,Q)=>b.value?(r(),D("div",rt,[e(de,{size:"50px",color:"primary"})])):(r(),D("div",it,[C.value.length===0?(r(),D("div",ct,[e(ae,{name:"search_off",size:"60px",color:"grey-6"}),dt,ut])):(r(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",_t,[(r(!0),D(L,null,K(C.value,(i,P)=>(r(),z(B,{key:P,onClick:h=>x(i),class:"pending-card elegant-card emphasized-card"},{default:t(()=>[e(T,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var h,u;return[a("div",mt,[a("div",pt,[a("div",vt," Premix: "+l(n(d)(i.name)||"-"),1),a("div",ft,l(n(N)(i.created_at)||"-"),1)]),a("div",gt,[a("div",null,[e(Y,{color:"warning",class:"text-weight-bold q-px-md q-py-sm pending-badge"},{default:t(()=>[o(" PENDING ")]),_:1})]),a("div",yt,l(((u=(h=i.branch_premix)==null?void 0:h.branch_recipe)==null?void 0:u.branch.name)||"-"),1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",ht,[a("div",xt,[bt,a("div",wt,l(n(R)(i.employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var qt=O($t,[["__scopeId","data-v-ae885310"]]);const Be=s=>(A("data-v-74781296"),s=s(),E(),s),kt={class:"row justify-between"},Dt={class:"text-h6"},Pt=Be(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),Ct=Be(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),St={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var i,P,h;const{capitalizeFirstLetter:d,formatFullname:R,formatQuantity:N,formatRequestQuantity:k}=W(),{dialogRef:w,onDialogHide:y,onDialogOK:C,onDialogCancel:q}=ie(),S=V(!1),b=J(),$=j(()=>b.user);console.log("userdata",$.value);const g=$.value.data.employee_id,v=ne(),x=s,f=((h=(P=(i=x.report)==null?void 0:i.branch_premix)==null?void 0:P.branch_recipe)==null?void 0:h.ingredient_groups)||"Undefined";console.log("ingrdientsData",f),console.log("report to proceed",x.report);const Q=async()=>{try{const u={id:x.report.id,request_premixes_id:x.report.id,branch_premix_id:x.report.branch_premix_id,employee_id:g,status:"process",quantity:x.report.quantity,warehouse_id:x.report.warehouse_id,notes:"Process Premix"},c=await v.processPremix(u);console.log("Report Process:",c),re.create({type:"positive",message:"Premix proceed to process successfully"}),S.value=!1}catch(u){console.error(u)}};return(u,c)=>(r(),z(te,{ref_key:"dialogRef",ref:w,modelValue:S.value,"onUpdate:modelValue":c[1]||(c[1]=p=>S.value=p),onHide:n(y)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(T,{class:"emphasized-header"},{default:t(()=>[a("div",kt,[a("div",Dt,l(n(d)(s.report.name)||"-"),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:c[0]||(c[0]=p=>S.value=!1)})])]),_:1}),e(T,null,{default:t(()=>{var p,I,H;return[a("div",null,"Baker: "+l(n(R)(s.report.employee)||"-"),1),a("div",null," Branch: "+l(n(d)((H=(I=(p=s.report.branch_premix)==null?void 0:p.branch_recipe)==null?void 0:I.branch)==null?void 0:H.name)||"-"),1),a("div",null,[o(" Status: "),e(Y,{color:"green",outlined:""},{default:t(()=>[o(l(n(d)(s.report.status)||"-"),1)]),_:1})])]}),_:1}),e(T,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[Pt,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Premix Name")]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[o(l(n(d)(s.report.name)||"-"),1)]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[o(l(n(k)(s.report.quantity)||"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[Ct,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o(" Code")]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o(" Name")]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Quantity")]),_:1})]),_:1})]),_:1}),(r(!0),D(L,null,K(n(f),(p,I)=>(r(),z(F,{key:I},{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[o(l(p.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(m,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[o(l(p.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(m,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[o(l(n(N)(p.quantity*s.report.quantity,p.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(T,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ve(e(U,{flat:"",label:"Cancel",color:"negative"},null,512),[[fe]]),e(U,{color:"primary",label:"Process",class:"action-btn",onClick:Q})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var Rt=O(St,[["__scopeId","data-v-74781296"]]);const qe=s=>(A("data-v-5fc65b42"),s=s(),E(),s),Vt={key:0,class:"spinner-wrapper"},It={key:1,class:"q-mt-xl"},Tt={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},Nt=qe(()=>a("div",{class:"text-h6 text-grey-7 q-mt-sm"},l("No Premixes available."),-1)),Qt=qe(()=>a("div",{class:"text-body1 text-grey-7 q-mt-sm"},l("Check again later."),-1)),zt={class:"q-gutter-md q-ma-md"},Ft={class:"row items-start justify-between"},jt={class:"col-8 column q-gutter-y-xs"},Ut={class:"text-body1 text-weight-bold text-primary-dark"},Bt={class:"text-caption text-grey-6 text-weight-medium"},Ht={class:"col-4 column items-end q-gutter-y-xs"},Lt={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm text-capitalize"},Ot={class:"row justify-between items-end"},Mt={class:"column q-gutter-y-xs"},At=qe(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),Et={class:"text-body2 text-weight-semibold text-grey-9"},Yt={class:"col-5 column"},Kt=qe(()=>a("div",{class:"text-caption text-grey-7"},"Confirmed by:",-1)),Wt={class:"text-body2 text-weight-semibold text-grey-9"},Gt={__name:"ConfirmPage",setup(s){const{capitalizeFirstLetter:d,formatFullname:R,formatTimestamp:N}=W(),k=J(),y=j(()=>k.user).value.device.reference_id;console.log("warehouseId",y);const C=ne(),q=j(()=>C.confirmPremixData);console.log("confirmedPremixData",q.value);const S=V("confirmed"),b=V(!0),$=V(!1),g=ue();ce(async()=>{y&&await v()});const v=async()=>{try{b.value=!0,await C.fetchConfirmPremix(y,S.value),q.value.length||($.value=!0)}catch{$.value=!0}finally{b.value=!1}},x=f=>{g.dialog({component:Rt,componentProps:{report:f}})};return(f,Q)=>b.value?(r(),D("div",Vt,[e(de,{size:"50px",color:"primary"})])):(r(),D("div",It,[q.value.length===0?(r(),D("div",Tt,[e(ae,{name:"warning",color:"grey-6",size:"60px"}),Nt,Qt])):(r(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",zt,[(r(!0),D(L,null,K(q.value,(i,P)=>(r(),z(B,{key:P,onClick:h=>x(i),class:"elegant-card emphasized-card"},{default:t(()=>[e(T,{class:"q-gutter-sm enhanced-card-section"},{default:t(()=>{var h,u,c;return[a("div",Ft,[a("div",jt,[a("div",Ut," Premix: "+l(n(d)(i.name)||"-"),1),a("div",Bt,l(n(N)(i.created_at)||"-"),1)]),a("div",Ht,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm confirmed-badge"},{default:t(()=>[o(" CONFIRMED ")]),_:1})]),a("div",Lt,l(n(d)((c=(u=(h=i.branch_premix)==null?void 0:h.branch_recipe)==null?void 0:u.branch)==null?void 0:c.name)||"-"),1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",Ot,[a("div",Mt,[At,a("div",Et,l(n(R)(i.employee)||"-"),1)]),a("div",Yt,[Kt,a("div",Wt,l(n(R)(i.history[0].employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Jt=O(Gt,[["__scopeId","data-v-5fc65b42"]]);const He=s=>(A("data-v-301f0b78"),s=s(),E(),s),Xt={class:"row justify-between"},Zt={class:"text-h6"},ea=He(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),ta=He(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),aa={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var g,v,x;const{capitalizeFirstLetter:d,formatFullname:R,formatRequestQuantity:N,formatQuantity:k}=W(),{dialogRef:w,onDialogHide:y,onDialogOK:C,onDialogCancel:q}=ie(),S=V(!1),b=s;console.log("report to decline",b.report);const $=((x=(v=(g=b.report)==null?void 0:g.branch_premix)==null?void 0:v.branch_recipe)==null?void 0:x.ingredient_groups)||"Undefined";return console.log("ingrdientsData",$),(f,Q)=>(r(),D("div",null,[e(te,{ref_key:"dialogRef",ref:w,modelValue:S.value,"onUpdate:modelValue":Q[1]||(Q[1]=i=>S.value=i),onHide:n(y)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(T,{class:"emphasized-header"},{default:t(()=>[a("div",Xt,[a("div",Zt,l(n(d)(s.report.name)||"-"),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:Q[0]||(Q[0]=i=>S.value=!1)})])]),_:1}),e(T,null,{default:t(()=>{var i,P;return[a("div",null,"Baker: "+l(n(R)(s.report.employee)||"-"),1),a("div",null," Branch: "+l(n(d)((P=(i=s.report.branch_premix)==null?void 0:i.branch_recipe)==null?void 0:P.branch.name)||"-"),1),a("div",null,[o(" Status: "),e(Y,{color:"red-6",outlined:""},{default:t(()=>[o(l(n(d)(s.report.status)||"-"),1)]),_:1})])]}),_:1}),e(T,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[ea,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Premix Name")]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[o(l(n(d)(s.report.name)||"-"),1)]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[o(l(n(N)(s.report.quantity)||"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[ta,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o(" Code")]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o(" Name")]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Quantity")]),_:1})]),_:1})]),_:1}),(r(!0),D(L,null,K(n($),(i,P)=>(r(),z(F,{key:P},{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[o(l(i.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(m,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[o(l(n(d)(i.ingredient.name)||"-"),1)]),_:2},1024)]),_:2},1024),e(m,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[o(l(n(k)(i.quantity*s.report.quantity,i.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])]))}};var sa=O(aa,[["__scopeId","data-v-301f0b78"]]);const ke=s=>(A("data-v-0a89e1b0"),s=s(),E(),s),la={key:0,class:"spinner-wrapper"},oa={key:1},na={key:0,class:"column items-center text-center q-pa-lg no-data-message"},ra=ke(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},l("No Premixes available."),-1)),ia=ke(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},l("Check again later."),-1)),ca={class:"q-gutter-md q-ma-md"},da={class:"row items-start justify-between"},ua={class:"col-8 column q-gutter-y-xs"},_a={class:"text-body1 text-weight-bold text-primary-dark"},ma={class:"text-caption text-grey-6 text-weight-medium"},pa={class:"col-4 column items-end q-gutter-y-xs"},va={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},fa={class:"row items-end justify-between"},ga={class:"column q-gutter-y-xs"},ya=ke(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),ha={class:"text-body2 text-weight-semibold text-grey-9"},xa={class:"col-5 column"},ba=ke(()=>a("div",{class:"text-caption text-grey-7"},"Declined By:",-1)),wa={class:"text-body2 text-weight-semibold text-grey-9"},$a={key:2,class:"q-pt-lg flex flex-center"},qa={__name:"DeclinePage",setup(s){const{capitalizeFirstLetter:d,formatFullname:R,formatTimestamp:N}=W(),k=J(),y=j(()=>k.user).value.device.reference_id;console.log("warehouseId",y);const C=ne(),q=j(()=>C.declinePremixData);console.log("declinedPremixData",q.value);const S=V("declined"),b=V(!0),$=V(!1),g=ue(),v=V("");let x=null;const f=j(()=>{var u;return((u=C.declinePremixData)==null?void 0:u.pagination)||{current_page:1,last_page:1,per_page:3}});console.log("pagination",f.value);const Q=async(u=1)=>{try{b.value=!0,await C.fetchDeclinePremix(y,S.value,f.value.current_page,f.value.per_page,v.value),q.value.length||($.value=!0),console.log("declinedPremixData",q.value)}catch{$.value=!0}finally{b.value=!1}};ce(async()=>{y&&await Q(y,S.value,f.value.current_page)});const i=async()=>{Q(y,S.value,f.value.current_page)},P=async()=>{x&&clearTimeout(x),x=setTimeout(()=>{Q(y,S.value,f.value.current_page)})},h=u=>{g.dialog({component:sa,componentProps:{report:u}})};return(u,c)=>(r(),D(L,null,[a("div",null,[e(xe,{outlined:"",dense:"",placeholder:"Search declined delivery",class:"q-mb-md","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6",modelValue:v.value,"onUpdate:modelValue":[c[0]||(c[0]=p=>v.value=p),P]},{prepend:t(()=>[e(ae,{name:"search",color:"grey-6"})]),_:1},8,["modelValue"])]),b.value?(r(),D("div",la,[e(de,{size:"50px",color:"primary"})])):(r(),D("div",oa,[q.value.length===0?(r(),D("div",na,[e(ae,{name:"search_off",size:"60px",color:"grey-5"}),ra,ia])):(r(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",ca,[(r(!0),D(L,null,K(q.value.data,(p,I)=>(r(),z(B,{key:I,onClick:H=>h(p),class:"elegant-card emphasized-card"},{default:t(()=>[e(T,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var H,ee,X;return[a("div",da,[a("div",ua,[a("div",_a," Premix: "+l(n(d)(p.name)||"-"),1),a("div",ma,l(n(N)(p.created_at)||"-"),1)]),a("div",pa,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm declined-badge"},{default:t(()=>[o(l(n(d)(p.status)||"-"),1)]),_:2},1024)]),a("div",va,l(n(d)((X=(ee=(H=p.branch_premix)==null?void 0:H.branch_recipe)==null?void 0:ee.branch)==null?void 0:X.name)||"-"),1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",fa,[a("div",ga,[ya,a("div",ha,l(n(R)(p.employee)||"-"),1)]),a("div",xa,[ba,a("div",wa,l(n(R)(p.history[0].employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))])),f.value.last_page>1?(r(),D("div",$a,[e(Qe,{modelValue:f.value.current_page,"onUpdate:modelValue":[c[1]||(c[1]=p=>f.value.current_page=p),i],max:f.value.last_page,"max-pages":3,"boundary-links":"","direction-links":"","icon-first":"first_page","icon-last":"last_page","icon-prev":"chevron_left","icon-next":"chevron_right",color:"primary","active-color":"white","active-text-color":"primary",class:"elegant-pagination"},null,8,["modelValue","max"])])):pe("",!0)],64))}};var ka=O(qa,[["__scopeId","data-v-0a89e1b0"]]);const Le=s=>(A("data-v-4b686fff"),s=s(),E(),s),Da={class:"row justify-between"},Pa={class:"text-h6"},Ca=Le(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),Sa=Le(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Ra={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var P,h,u;const{capitalizeFirstLetter:d,formatFullname:R,formatRequestQuantity:N,formatQuantity:k}=W(),{dialogRef:w,onDialogHide:y,onDialogOK:C,onDialogCancel:q}=ie(),S=J(),b=j(()=>S.user);console.log("userdata",b.value);const $=b.value.data.employee_id,g=ne(),v=s;console.log("report",v.report);const x=V(!1),f=((u=(h=(P=v.report)==null?void 0:P.branch_premix)==null?void 0:h.branch_recipe)==null?void 0:u.ingredient_groups)||"Undefined";console.log("ingrdientsData",f);const Q=j(()=>f.map(c=>{const p=parseFloat(c.quantity)*parseFloat(v.report.quantity);return{...c,totalQuantity:p,formattedQuantity:k(p,c.ingredient.unit)}}));console.log("computedIngredients",Q.value);const i=async()=>{try{const c={id:v.report.id,request_premixes_id:v.report.id,branch_premix_id:v.report.branch_premix_id,employee_id:$,status:"completed",quantity:v.report.quantity,warehouse_id:v.report.warehouse_id,notes:"Completed Premix",ingredients:Q.value.map(I=>({ingredient_id:I.ingredient.id,quantity:I.totalQuantity,unit:I.ingredient.unit}))},p=await g.completedPremix(c);console.log("Report Process:",p),re.create({type:"positive",message:"Premix completed to process successfully"}),x.value=!1}catch(c){console.error(c),re.create({type:"negative",message:"An error occurred while processing the premix."})}};return(c,p)=>(r(),z(te,{ref_key:"dialogRef",ref:w,modelValue:x.value,"onUpdate:modelValue":p[1]||(p[1]=I=>x.value=I),onHide:n(y)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(T,{class:"emphasized-header"},{default:t(()=>[a("div",Da,[a("div",Pa,l(n(d)(s.report.name)||"-"),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:p[0]||(p[0]=I=>x.value=!1)})])]),_:1}),e(T,null,{default:t(()=>[a("div",null,"Baker: "+l(n(R)(s.report.employee)||"-"),1),a("div",null," Branch: "+l(n(d)(s.report.branch_premix.branch_recipe.branch.name)||"-"),1),a("div",null,[o(" Status: "),e(Y,{color:"primary",outlined:""},{default:t(()=>[o(l(n(d)(s.report.status)||"-"),1)]),_:1})])]),_:1}),e(T,null,{default:t(()=>[Ca]),_:1}),e(T,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Premix Name")]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[o(l(n(d)(s.report.name)||"-"),1)]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[o(l(n(N)(s.report.quantity)||"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[a("div",null,[Sa,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o(" Code")]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o(" Name")]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Quantity")]),_:1})]),_:1})]),_:1}),(r(!0),D(L,null,K(Q.value,(I,H)=>(r(),z(F,{key:H},{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[o(l(I.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(m,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[o(l(n(d)(I.ingredient.name)||"-"),1)]),_:2},1024)]),_:2},1024),e(m,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[o(l(n(k)(I.quantity*v.report.quantity,I.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1}),e(T,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ve(e(U,{flat:"",label:"Cancel",color:"primary"},null,512),[[fe]]),e(U,{color:"cyan-7",label:"Completed",class:"action-btn",onClick:i})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var Va=O(Ra,[["__scopeId","data-v-4b686fff"]]);const De=s=>(A("data-v-e0e63d02"),s=s(),E(),s),Ia={key:0,class:"spinner-wrapper"},Ta={key:1},Na={key:0,class:"column items-center text-center q-pa-lg no-data-message"},Qa=De(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},l("No Premixes available."),-1)),za=De(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},l("Check again later."),-1)),Fa={class:"q-gutter-md q-ma-md"},ja={class:"row items-start justify-between"},Ua={class:"col-8 column q-gutter-y-xs"},Ba={class:"text-body1 text-weight-bold text-primary-dark"},Ha={class:"text-caption text-grey-6 text-weight-dark"},La={class:"col-4 column items-end q-gutter-y-xs"},Oa={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Ma={class:"row items-end justify-between"},Aa={class:"column q-gutter-y-xs"},Ea=De(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),Ya={class:"text-body2 text-weight-semibold text-grey-9"},Ka={class:"col-5 column"},Wa=De(()=>a("div",{class:"text-caption text-grey-7"},"Scaler:",-1)),Ga={class:"text-body2 text-weight-semibold text-grey-9"},Ja={__name:"ProcessPage",setup(s){const{capitalizeFirstLetter:d,formatFullname:R,formatTimestamp:N}=W(),k=J(),y=j(()=>k.user).value.device.reference_id;console.log("warehouseId",y);const C=ne(),q=j(()=>C.processPremixData);console.log("processPremixData",q.value);const S=V("process"),b=V(!0),$=V(!1),g=ue();ce(async()=>{y&&await v()});const v=async()=>{try{b.value=!0,await C.fetchProcessPremix(y,S.value),q.value.length||($.value=!0)}catch{$.value=!0}finally{b.value=!1}},x=f=>{g.dialog({component:Va,componentProps:{report:f}})};return(f,Q)=>b.value?(r(),D("div",Ia,[e(de,{size:"50px",color:"primary"})])):(r(),D("div",Ta,[q.value.length===0?(r(),D("div",Na,[e(ae,{name:"search_off",size:"60px",color:"grey-5"}),Qa,za])):(r(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Fa,[(r(!0),D(L,null,K(q.value,(i,P)=>(r(),z(B,{key:P,onClick:h=>x(i),class:"elegant-card emphasized-card"},{default:t(()=>[e(T,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var h,u,c;return[a("div",ja,[a("div",Ua,[a("div",Ba," Premix: "+l(n(d)(i.name)||"-"),1),a("div",Ha,l(n(N)(i.created_at)||"-"),1)]),a("div",La,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm process-badge text-uppercase"},{default:t(()=>[o(l(i.status),1)]),_:2},1024)]),a("div",Oa,l(n(d)((c=(u=(h=i.branch_premix)==null?void 0:h.branch_recipe)==null?void 0:u.branch)==null?void 0:c.name)||"-"),1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",Ma,[a("div",Aa,[Ea,a("div",Ya,l(n(R)(i.employee)||"-"),1)]),a("div",Ka,[Wa,a("div",Ga,l(n(R)(i.history[0].employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Xa=O(Ja,[["__scopeId","data-v-e0e63d02"]]);const Oe=s=>(A("data-v-52761715"),s=s(),E(),s),Za={class:"row justify-between"},es={class:"text-h6"},ts=Oe(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),as=Oe(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),ss={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var i,P,h;const{capitalizeFirstLetter:d,formatFullname:R,formatRequestQuantity:N,formatQuantity:k}=W(),{dialogRef:w,onDialogHide:y,onDialogOK:C,onDialogCancel:q}=ie(),S=V(!1),b=J(),$=j(()=>b.user);console.log("userdata",$.value);const g=$.value.data.employee_id,v=ne(),x=s,f=((h=(P=(i=x.report)==null?void 0:i.branch_premix)==null?void 0:P.branch_recipe)==null?void 0:h.ingredient_groups)||"Undefined";console.log("ingrdientsData",f),console.log("report to proceed",x.report);const Q=async()=>{try{const u={id:x.report.id,request_premixes_id:x.report.id,branch_premix_id:x.report.branch_premix_id,employee_id:g,status:"to deliver",quantity:x.report.quantity,warehouse_id:x.report.warehouse_id,notes:"To-Deliver Premix"},c=await v.toDeliverPremix(u);console.log("Report To Deliver:",c),re.create({type:"positive",message:"Premix To Deliver to process successfully"}),S.value=!1}catch(u){console.error(u)}};return(u,c)=>(r(),D("div",null,[e(te,{ref_key:"dialogRef",ref:w,modelValue:S.value,"onUpdate:modelValue":c[1]||(c[1]=p=>S.value=p),onHide:n(y)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(T,{class:"emphasized-header"},{default:t(()=>[a("div",Za,[a("div",es,l(n(d)(s.report.name)||"-"),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:c[0]||(c[0]=p=>S.value=!1)})])]),_:1}),e(T,null,{default:t(()=>[a("div",null,"Baker: "+l(n(R)(s.report.employee)),1),a("div",null," Branch: "+l(s.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[o(" Status: "),e(Y,{color:"black",outlined:""},{default:t(()=>[o(l(n(d)(s.report.status)||"-"),1)]),_:1})])]),_:1}),e(T,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[ts,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Premix Name")]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[o(l(n(d)(s.report.name)||"-"),1)]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[o(l(n(N)(s.report.quantity)||"-"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[as,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o(" Code")]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o(" Name")]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Quantity")]),_:1})]),_:1})]),_:1}),(r(!0),D(L,null,K(n(f),(p,I)=>(r(),z(F,{key:I},{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[o(l(p.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(m,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[o(l(n(d)(p.ingredient.name)||"-"),1)]),_:2},1024)]),_:2},1024),e(m,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[o(l(n(k)(p.quantity*s.report.quantity,p.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(T,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ve(e(U,{flat:"",label:"Cancel",color:"negative"},null,512),[[fe]]),e(U,{color:"dark",label:"TO-Deliver",class:"action-btn",onClick:Q})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"])]))}};var ls=O(ss,[["__scopeId","data-v-52761715"]]);const Pe=s=>(A("data-v-3500f029"),s=s(),E(),s),os={key:0,class:"spinner-wrapper"},ns={key:1},rs={key:0,class:"column items-center text-center q-pa-lg no-data-message"},is=Pe(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},l("No Premixes available."),-1)),cs=Pe(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},l("Check again later."),-1)),ds={class:"q-gutter-md q-ma-md"},us={class:"row items-start justify-between"},_s={class:"col-8 column q-gutter-y-xs"},ms={class:"text-body1 text-weight-bold text-primary-dark"},ps={class:"text-caption text-grey-6 text-weight-dark"},vs={class:"col-4 column items-end q-gutter-y-xs"},fs={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},gs={class:"row items-end justify-between"},ys={class:"column q-gutter-y-xs"},hs=Pe(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),xs={class:"text-body2 text-weight-semibold text-grey-9"},bs={class:"col-5 column"},ws=Pe(()=>a("div",{class:"text-caption text-grey-7"},"Scaler:",-1)),$s={class:"text-body2 text-weight-semibold text-grey-9"},qs={__name:"CompletedPage",setup(s){const{capitalizeFirstLetter:d,formatFullname:R,formatTimestamp:N}=W(),k=J(),y=j(()=>k.user).value.device.reference_id;console.log("warehouseId",y);const C=ne(),q=j(()=>C.completedPremixData);console.log("completedPremixData",q.value);const S=V("completed"),b=V(!0),$=V(!1),g=ue();ce(async()=>{y&&await v()});const v=async()=>{try{b.value=!0,await C.fetchCompletedPremix(y,S.value),q.value.length||($.value=!0)}catch{$.value=!0}finally{b.value=!1}},x=f=>{g.dialog({component:ls,componentProps:{report:f}})};return(f,Q)=>b.value?(r(),D("div",os,[e(de,{size:"50px",color:"primary"})])):(r(),D("div",ns,[q.value.length===0?(r(),D("div",rs,[e(ae,{name:"search_off",size:"60px",color:"grey-5"}),is,cs])):(r(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",ds,[(r(!0),D(L,null,K(q.value,(i,P)=>(r(),z(B,{key:P,onClick:h=>x(i),class:"elegant-card emphasized-card"},{default:t(()=>[e(T,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var h,u,c;return[a("div",us,[a("div",_s,[a("div",ms," Premix: "+l(n(d)(i.name)||"-"),1),a("div",ps,l(n(N)(i.created_at)||"-"),1)]),a("div",vs,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm completed-badge text-uppercase"},{default:t(()=>[o(l(i.status),1)]),_:2},1024)]),a("div",fs,l(n(d)((c=(u=(h=i.branch_premix)==null?void 0:h.branch_recipe)==null?void 0:u.branch)==null?void 0:c.name)||"-"),1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",gs,[a("div",ys,[hs,a("div",xs,l(n(R)(i.employee)||"-"),1)]),a("div",bs,[ws,a("div",$s,l(n(R)(i.history[0].employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var ks=O(qs,[["__scopeId","data-v-3500f029"]]);const Me=s=>(A("data-v-6a90361e"),s=s(),E(),s),Ds={class:"row justify-between"},Ps={class:"text-h6"},Cs=Me(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),Ss=Me(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Rs={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var f,Q,i;const{capitalizeFirstLetter:d,formatFullname:R,formatRequestQuantity:N,formatQuantity:k}=W(),{dialogRef:w,onDialogHide:y}=ie(),C=V(!1),q=J(),S=j(()=>q.user);console.log("userdata",S.value);const b=S.value.data.employee_id,$=ne(),g=s;console.log("props report",g.report);const v=((i=(Q=(f=g.report)==null?void 0:f.branch_premix)==null?void 0:Q.branch_recipe)==null?void 0:i.ingredient_groups)||"Undefined";console.log("ingrdientsData",v),console.log("report to proceed",g.report);const x=async()=>{try{const P={id:g.report.id,request_premixes_id:g.report.id,branch_premix_id:g.report.branch_premix_id,employee_id:b,status:"to receive",quantity:g.report.quantity,warehouse_id:g.report.warehouse_id,notes:"To Receive Premix"},h=await $.toReceivePremix(P);console.log("Report Process:",h),re.create({type:"positive",message:"Premix to receive to process successfully"}),C.value=!1}catch(P){console.error(P)}};return(P,h)=>(r(),z(te,{ref_key:"dialogRef",ref:w,modelValue:C.value,"onUpdate:modelValue":h[1]||(h[1]=u=>C.value=u),onHide:n(y)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(T,{class:"emphasized-header"},{default:t(()=>[a("div",Ds,[a("div",Ps,l(n(d)(s.report.name)||"-"),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:h[0]||(h[0]=u=>C.value=!1)})])]),_:1}),e(T,null,{default:t(()=>{var u,c,p;return[a("div",null,"Baker: "+l(n(R)(s.report.employee)),1),a("div",null," Branch: "+l(n(d)((p=(c=(u=s.report.branch_premix)==null?void 0:u.branch_recipe)==null?void 0:c.branch)==null?void 0:p.name)||"-"),1),a("div",null,[o(" Status: "),e(Y,{color:"brown-9",outlined:""},{default:t(()=>[o(l(n(d)(s.report.status)||"-"),1)]),_:1})])]}),_:1}),e(T,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[Cs,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Premix Name")]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[o(l(n(d)(s.report.name)||"-"),1)]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[o(l(n(N)(s.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[Ss,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o(" Code")]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o(" Name")]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Quantity")]),_:1})]),_:1})]),_:1}),(r(!0),D(L,null,K(n(v),(u,c)=>(r(),z(F,{key:c},{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[o(l(u.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(m,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[o(l(n(d)(u.ingredient.name)||"-"),1)]),_:2},1024)]),_:2},1024),e(m,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[o(l(n(k)(u.quantity*s.report.quantity,u.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(T,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ve(e(U,{flat:"",label:"Cancel",color:"negative"},null,512),[[fe]]),e(U,{color:"brown-9",label:"TO Receive",class:"action-btn",onClick:x})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var Vs=O(Rs,[["__scopeId","data-v-6a90361e"]]);const Ce=s=>(A("data-v-04c705aa"),s=s(),E(),s),Is={key:0,class:"spinner-wrapper"},Ts={key:1},Ns={key:0,class:"column items-center text-center q-pa-lg no-data-message"},Qs=Ce(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},l("No Premixes available."),-1)),zs=Ce(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},l("Check again later."),-1)),Fs={class:"q-gutter-md q-ma-md"},js={class:"row items-start justify-between"},Us={class:"col-8 column q-gutter-y-xs"},Bs={class:"text-body1 text-weight-bold text-primary-dark"},Hs={class:"text-caption text-grey-6 text-weight-dark"},Ls={class:"col-4 column items-end q-gutter-y-xs"},Os={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Ms={class:"row items-end justify-between"},As={class:"column q-gutter-y-xs"},Es=Ce(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),Ys={class:"text-body2 text-weight-semibold text-grey-9"},Ks={class:"col-5 column"},Ws=Ce(()=>a("div",{class:"text-caption text-grey-7"},"Scaler:",-1)),Gs={class:"text-body2 text-weight-semibold text-grey-9"},Js={__name:"ToDeliverPage",setup(s){const{capitalizeFirstLetter:d,formatFullname:R,formatTimestamp:N}=W(),k=J(),y=j(()=>k.user).value.device.reference_id;console.log("warehouseIssd",y);const C=ne(),q=j(()=>C.toDeliverPremixData);console.log("toDeliverPremixData",q.value);const S=V("to deliver"),b=V(!0),$=V(!1),g=ue();ce(async()=>{y&&await v()});const v=async()=>{try{b.value=!0,await C.fetchToDeliverPremix(y,S.value),q.value.length||($.value=!0)}catch{$.value=!0}finally{b.value=!1}},x=f=>{g.dialog({component:Vs,componentProps:{report:f}})};return(f,Q)=>b.value?(r(),D("div",Is,[e(de,{size:"50px",color:"primary"})])):(r(),D("div",Ts,[q.value.length===0?(r(),D("div",Ns,[e(ae,{name:"search_off",size:"60px",color:"grey-5"}),Qs,zs])):(r(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Fs,[(r(!0),D(L,null,K(q.value,(i,P)=>(r(),z(B,{key:P,onClick:h=>x(i),class:"elegant-card emphasized-card"},{default:t(()=>[e(T,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var h,u,c;return[a("div",js,[a("div",Us,[a("div",Bs," Premix: "+l(n(d)(i.name)||"-"),1),a("div",Hs,l(n(N)(i.created_at)||"-"),1)]),a("div",Ls,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm to-deliver-badge text-uppercase"},{default:t(()=>[o(l(i.status),1)]),_:2},1024)]),a("div",Os,l(n(d)((c=(u=(h=i==null?void 0:i.branch_premix)==null?void 0:h.branch_recipe)==null?void 0:u.branch)==null?void 0:c.name)||"-"),1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",Ms,[a("div",As,[Es,a("div",Ys,l(n(R)(i.employee)),1)]),a("div",Ks,[Ws,a("div",Gs,l(n(R)(i.history[0].employee)),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Xs=O(Js,[["__scopeId","data-v-04c705aa"]]);const Ae=s=>(A("data-v-124b9cba"),s=s(),E(),s),Zs={class:"row justify-between"},el={class:"text-h6"},tl=Ae(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),al=Ae(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),sl={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var g,v,x;const{capitalizeFirstLetter:d,formatFullname:R,formatRequestQuantity:N,formatQuantity:k}=W(),{dialogRef:w,onDialogHide:y}=ie(),C=V(!1),q=J(),S=j(()=>q.user);console.log("userdata",S.value);const b=s,$=((x=(v=(g=b.report)==null?void 0:g.branch_premix)==null?void 0:v.branch_recipe)==null?void 0:x.ingredient_groups)||"Undefined";return console.log("ingrdientsData",$),console.log("report to proceed",b.report),(f,Q)=>(r(),z(te,{ref_key:"dialogRef",ref:w,modelValue:C.value,"onUpdate:modelValue":Q[1]||(Q[1]=i=>C.value=i),onHide:n(y)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(T,{class:"emphasized-header"},{default:t(()=>[a("div",Zs,[a("div",el,l(n(d)(s.report.name)||"-"),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:Q[0]||(Q[0]=i=>C.value=!1)})])]),_:1}),e(T,null,{default:t(()=>{var i,P,h,u;return[a("div",null,"Baker: "+l(n(R)(s.report.employee)||"-"),1),a("div",null," Branch: "+l(n(d)((u=(h=(P=(i=s.report)==null?void 0:i.branch_premix)==null?void 0:P.branch_recipe)==null?void 0:h.branch)==null?void 0:u.name)||"-"),1),a("div",null,[o(" Status: "),e(Y,{color:"amber-10",outlined:""},{default:t(()=>[o(l(n(d)(s.report.status)||"-"),1)]),_:1})])]}),_:1}),e(T,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[tl,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Premix Name")]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[o(l(n(d)(s.report.name)||"-"),1)]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[o(l(n(N)(s.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[al,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o(" Code")]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o(" Name")]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Quantity")]),_:1})]),_:1})]),_:1}),(r(!0),D(L,null,K(n($),(i,P)=>(r(),z(F,{key:P},{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[o(l(i.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(m,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[o(l(n(d)(i.ingredient.name)),1)]),_:2},1024)]),_:2},1024),e(m,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[o(l(n(k)(i.quantity*s.report.quantity,i.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var ll=O(sl,[["__scopeId","data-v-124b9cba"]]);const Se=s=>(A("data-v-9396133c"),s=s(),E(),s),ol={key:0,class:"spinner-wrapper"},nl={key:1},rl={key:0,class:"column items-center text-center q-pa-lg no-data-message"},il=Se(()=>a("div",{class:"text-h6 text-grey-7 q-mt-md"},l("No Premixes available."),-1)),cl=Se(()=>a("div",{class:"text-body1 text-grey-6 q-mt-sm"},l("Check again later."),-1)),dl={class:"q-gutter-md q-ma-md"},ul={class:"row items-start justify-between"},_l={class:"col-8 column q-gutter-y-xs"},ml={class:"text-body1 text-weight-bold text-primary-dark"},pl={class:"text-caption text-grey-6 text-weight-medium"},vl={class:"col-4 column items-end q-gutter-y-xs"},fl={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},gl={class:"row items-end justify-between"},yl={class:"column q-gutter-y-xs"},hl=Se(()=>a("div",{class:"text-caption text-grey-7"},"Baker:",-1)),xl={class:"text-body2 text-weight-semibold text-grey-9"},bl={class:"col-5 column"},wl=Se(()=>a("div",{class:"text-caption text-grey-7"},"Scaler:",-1)),$l={class:"text-body2 text-weight-semibold text-grey-9"},ql={__name:"ToReceivePage",setup(s){const{capitalizeFirstLetter:d,formatFullname:R,formatTimestamp:N}=W(),k=J(),y=j(()=>k.user).value.device.reference_id;console.log("warehouseId",y);const C=ne(),q=j(()=>C.toReceivePremixData);console.log("toReceivePremixData",q.value);const S=V("process"),b=V(!0),$=V(!1),g=ue();ce(async()=>{y&&await v()});const v=async()=>{try{b.value=!0,await C.fetchToReceivePremix(y,S.value),q.value.length||($.value=!0)}catch{$.value=!0}finally{b.value=!1}},x=f=>{g.dialog({component:ll,componentProps:{report:f}})};return(f,Q)=>b.value?(r(),D("div",ol,[e(de,{size:"50px",color:"primary"})])):(r(),D("div",nl,[q.value.length===0?(r(),D("div",rl,[e(ae,{name:"search_off",size:"60px",color:"grey-5"}),il,cl])):(r(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",dl,[(r(!0),D(L,null,K(q.value,(i,P)=>(r(),z(B,{key:P,onClick:h=>x(i),class:"elegant-card emphasized-card"},{default:t(()=>[e(T,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>{var h,u;return[a("div",ul,[a("div",_l,[a("div",ml," Premix: "+l(n(d)(i.name)||"-"),1),a("div",pl,l(n(N)(i.created_at)),1)]),a("div",vl,[a("div",null,[e(Y,{class:"text-weight-bold q-px-md q-py-sm to-receive-badge text-uppercase"},{default:t(()=>[o(l(i.status),1)]),_:2},1024)]),a("div",fl,l(n(d)((u=(h=i==null?void 0:i.branch_premix)==null?void 0:h.branch_recipe)==null?void 0:u.branch.name)||"-"),1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",gl,[a("div",yl,[hl,a("div",xl,l(n(R)(i.employee)||"-"),1)]),a("div",bl,[wl,a("div",$l,l(n(R)(i.history[0].employee)||"-"),1)])])]}),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var kl=O(ql,[["__scopeId","data-v-9396133c"]]);const Ee=s=>(A("data-v-4502cbbf"),s=s(),E(),s),Dl={class:"row justify-between"},Pl={class:"text-h6"},Cl=Ee(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),Sl=Ee(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Rl={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){var b,$,g;const{capitalizeFirstLetter:d,formatTimestamp:R,formatFullname:N,formatRequestQuantity:k,formatQuantity:w}=W(),y=s;console.log("reportsss",y.report);const C=V(!1),q=()=>{C.value=!0},S=((g=($=(b=y.report)==null?void 0:b.branch_premix)==null?void 0:$.branch_recipe)==null?void 0:g.ingredient_groups)||"Undefined";return console.log("ingrdientsData",S),(v,x)=>(r(),D(L,null,[a("div",null,[e(U,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:q})]),e(te,{modelValue:C.value,"onUpdate:modelValue":x[1]||(x[1]=f=>C.value=f)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(T,{class:"emphasized-header"},{default:t(()=>[a("div",Dl,[a("div",Pl,l(n(d)(s.report.name)||"-"),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:x[0]||(x[0]=f=>C.value=!1)})])]),_:1}),e(T,null,{default:t(()=>{var f;return[a("div",null,"Date: "+l(n(R)(s.report.created_at)||"-"),1),a("div",null,"Baker: "+l(n(N)(s.report.employee)||"-"),1),a("div",null," Branch: "+l(s.report.branch_premix.branch_recipe.branch.name||"-"),1),a("div",null,[o(" Status: "),e(Y,{color:"orange-7",outlined:""},{default:t(()=>[o(l(n(d)(s.report.status)||"-"),1)]),_:1})]),a("div",null," Received By: "+l(n(N)((f=s.report.history[0])==null?void 0:f.employee)||"-"),1)]}),_:1}),e(T,null,{default:t(()=>[Cl]),_:1}),e(T,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Premix Name")]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[o(l(n(d)(s.report.name)||"-"),1)]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[o(l(n(k)(s.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[a("div",null,[Sl,e(G,{dense:"",separator:"",class:"box"},{default:t(()=>[e(F,null,{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o(" Code")]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o(" Name")]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[o("Quantity")]),_:1})]),_:1})]),_:1}),(r(!0),D(L,null,K(n(S),(f,Q)=>(r(),z(F,{key:Q},{default:t(()=>[e(m,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[o(l(f.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(m,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[o(l(n(d)(f.ingredient.name)||"-"),1)]),_:2},1024)]),_:2},1024),e(m,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[o(l(n(w)(f.quantity*y.report.quantity,f.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Vl=O(Rl,[["__scopeId","data-v-4502cbbf"]]);const Il=s=>(A("data-v-bdbb7b0e"),s=s(),E(),s),Tl={key:0,class:"spinner-wrapper"},Nl={key:1},Ql={key:0,class:"data-error"},zl=Il(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Fl={__name:"ReceivedPage",setup(s){const{capitalizeFirstLetter:d,formatFullname:R,formatTimestamp:N}=W(),k=J(),y=j(()=>k.user).value.device.reference_id;console.log("warehouseId",y);const C=ne(),q=j(()=>C.receivePremixData);console.log("receivePremixData",q.value);const S=V([]),b=V({page:1,rowsPerPage:0,rowsNumber:0}),$=V("process"),g=V(!0),v=V(!1);ce(async()=>{y&&await x(y),console.log("receivePremixData",q.value)});const x=async(i,P=0,h=5)=>{try{g.value=!0,await C.fetchReceivePremix(i,$.value,P,h),console.log("receivePremixDatssa",q.value);const{data:u,current_page:c,per_page:p,total:I}=q.value;S.value=u,console.log("premixData.value",S.value),b.value.page=c,b.value.rowsPerPage=p,b.value.rowsNumber=I,q.value.length||(v.value=!0)}catch{v.value=!0}finally{g.value=!1}},f=i=>{x(y,i.pagination.page,i.pagination.rowsPerPage)},Q=[{name:"created_at",label:"Date / Time",align:"left",field:i=>N(i.created_at)||"Not Available",sortable:!0},{name:"employee",label:"Employee",align:"left",field:i=>R(i.employee)||"Not Available",sortable:!0},{name:"branch",label:"Branch Name",align:"left",field:i=>{var P,h,u;return d((u=(h=(P=i==null?void 0:i.branch_premix)==null?void 0:P.branch_recipe)==null?void 0:h.branch)==null?void 0:u.name)||"Not Available"},sortable:!0},{name:"premix_name",label:"Premix Name",align:"left",field:i=>d(i.name)||"Not Available",sortable:!0},{name:"status",label:"Status",align:"left",field:"status",sortable:!0},{name:"action",label:"Action",align:"left",field:"action",sortable:!0}];return(i,P)=>g.value?(r(),D("div",Tl,[e(de,{size:"50px",color:"primary"})])):(r(),D("div",Nl,[S.value.length===0?(r(),D("div",Ql,[e(ae,{name:"warning",color:"warning",size:"4em"}),zl])):(r(),z(Ze,{key:1,rows:S.value,columns:Q,pagination:b.value,"onUpdate:pagination":P[0]||(P[0]=h=>b.value=h),"rows-per-page-options":[3,5,10,0],onRequest:f,flat:"",bordered:""},{"body-cell-status":t(h=>[e(je,{props:h},{default:t(()=>[e(Y,{color:"orange-7"},{default:t(()=>[o(l(n(d)(h.row.status)),1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-action":t(h=>[e(je,{props:h},{default:t(()=>[e(Vl,{report:h.row},null,8,["report"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"]))]))}};var jl=O(Fl,[["__scopeId","data-v-bdbb7b0e"]]);const Ul={class:"q-gutter-y-sm"},Bl={__name:"PremixTab",setup(s){const d=V("pendingReports"),R=j(()=>{switch(d.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";case"processReports":return"blue-9";case"completedReports":return"blue-grey-10";case"toDeliverReports":return"brown-6";case"toReceiveReports":return"purple-1";case"receive":return"orange-7";default:return"light-green-13"}});return(N,k)=>(r(),z(B,{flat:""},{default:t(()=>[e(se),a("div",Ul,[e(Te,{modelValue:d.value,"onUpdate:modelValue":k[0]||(k[0]=w=>d.value=w),"indicator-color":R.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(le,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Premix"}),e(le,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Premix"}),e(le,{class:"text-dark",name:"declineReports",label:"\u{1F534}Decline Premix"}),e(le,{class:"text-dark",name:"processReports",label:"\u{1F535}Process Premix"}),e(le,{class:"text-dark",name:"completedReports",label:"\u26ABCompleted Premix"}),e(le,{class:"text-dark",name:"toDeliverReports",label:"\u{1F7E4}To Deliver Premix"}),e(le,{class:"text-dark",name:"toReceiveReports",label:"\u26AATo Receive Premix"}),e(le,{class:"text-dark",name:"receive",label:"\u{1F7E0}Receive Premix"})]),_:1},8,["modelValue","indicator-color"])]),e(Ne,{modelValue:d.value,"onUpdate:modelValue":k[1]||(k[1]=w=>d.value=w),animated:""},{default:t(()=>[e(oe,{name:"pendingReports"},{default:t(()=>[e(qt)]),_:1}),e(oe,{name:"confirmReports"},{default:t(()=>[e(Jt)]),_:1}),e(oe,{name:"declineReports"},{default:t(()=>[e(ka)]),_:1}),e(oe,{name:"processReports"},{default:t(()=>[e(Xa)]),_:1}),e(oe,{name:"completedReports"},{default:t(()=>[e(ks)]),_:1}),e(oe,{name:"toDeliverReports"},{default:t(()=>[e(Xs)]),_:1}),e(oe,{name:"toReceiveReports"},{default:t(()=>[e(kl)]),_:1}),e(oe,{name:"receive"},{default:t(()=>[e(jl)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var Hl=O(Bl,[["__scopeId","data-v-07a51121"]]);const Ye=s=>(A("data-v-aa3acf16"),s=s(),E(),s),Ll=Ye(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Report",-1)),Ol={key:0},Ml=Ye(()=>a("div",{class:"text-positive text-subtitle1"}," Please confirm again to finalize this report. ",-1)),Al={__name:"ConfirmDialog",setup(s){const{dialogRef:d,onDialogHide:R,onDialogOK:N,onDialogCancel:k}=ie(),w=V(!1),y=()=>{w.value?N():w.value=!0};return(C,q)=>(r(),z(te,{ref_key:"dialogRef",ref:d,onHide:n(R)},{default:t(()=>[e(B,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(T,{class:"q-pt-none q-pb-sm"},{default:t(()=>[Ll,w.value?pe("",!0):(r(),D("p",Ol,"Are you sure you want to confirm this report?"))]),_:1}),w.value?(r(),z(T,{key:0},{default:t(()=>[Ml]),_:1})):pe("",!0),e(se,{class:"q-mb-md"}),e(T,null,{default:t(()=>[e(we,{align:"right",class:"q-pt-none"},{default:t(()=>[ve(e(U,{flat:"",dense:"",label:"No",color:"primary",class:"q-mr-sm"},null,512),[[fe]]),e(U,{dense:"",label:w.value?"Confirm":"Yes! Confirm",color:"positive",class:"q-btn-rounded q-px-lg",onClick:y},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var El=O(Al,[["__scopeId","data-v-aa3acf16"]]);const Yl=s=>(A("data-v-b44cae3c"),s=s(),E(),s),Kl=Yl(()=>a("div",{class:"text-h5 q-mb-xs"},"Decline Report",-1)),Wl={key:0},Gl={__name:"DeclinedDialog",setup(s){const{dialogRef:d,onDialogHide:R,onDialogOK:N,onDialogCancel:k}=ie(),w=V(!1),y=V(""),C=V(null),q=()=>{w.value?C.value.validate()&&N({remarks:y.value}):w.value=!0};return(S,b)=>(r(),z(te,{ref_key:"dialogRef",ref:d,onHide:n(R),persistent:""},{default:t(()=>[e(B,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(T,{class:"q-pt-none q-pb-sm"},{default:t(()=>[Kl,w.value?pe("",!0):(r(),D("p",Wl,"Are you sure you want to decline this report?"))]),_:1}),w.value?(r(),z(T,{key:0},{default:t(()=>[e(xe,{modelValue:y.value,"onUpdate:modelValue":b[0]||(b[0]=$=>y.value=$),type:"textarea",label:"Reason for declining",filled:"",autogrow:"",dense:"",ref_key:"remarksInput",ref:C,rules:[$=>!!$||"Remarks are required"]},null,8,["modelValue","rules"])]),_:1})):pe("",!0),e(se,{class:"q-mb-md"}),e(T,null,{default:t(()=>[e(we,{align:"right",class:"q-pt-none"},{default:t(()=>[ve(e(U,{flat:"",dense:"",label:"No",color:"primary",class:"q-mr-sm"},null,512),[[fe]]),e(U,{dense:"",label:w.value?"Submit Decline":"Yes! Decline",color:"negative",class:"q-btn-rounded q-px-lg",onClick:q},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Jl=O(Gl,[["__scopeId","data-v-b44cae3c"]]);const Re=s=>(A("data-v-46db6907"),s=s(),E(),s),Xl={class:"row justify-between"},Zl={class:"text-h6"},eo=Re(()=>a("span",{class:"text-bold"},"Date:",-1)),to=Re(()=>a("span",{class:"text-bold"},"Created By:",-1)),ao=Re(()=>a("span",{class:"text-bold"},"Status:",-1)),so={class:"q-mt-md"},lo=Re(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),oo={key:1,class:"text-caption text-grey-6 q-mt-md"},no={__name:"TransactionView",props:{report:{type:Object,required:!0}},emits:["fetchAgain"],setup(s,{emit:d}){const{capitalizeFirstLetter:R,formatFullname:N,formatTimestamp:k}=W(),w=et(),y=j(()=>w.userData);console.log("userData in TransactionView:",y.value);const C=$e(),{dialogRef:q,onDialogHide:S,onDialogOK:b,onDialogCancel:$}=ie(),g=s;console.log("report",g.report);const v=V(!1),x=ue(),f=u=>u==null?"No Quantity":parseFloat(u),Q=()=>{x.dialog({component:El}).onOk(u=>{console.log("Remarks from child:",u),i(g.report)}).onCancel(()=>{console.log("Cancelled")})},i=async u=>{var c,p,I,H,ee,X,ge,ye,he,me;try{x.loading.show(),console.log("Confirming report",u);const M=u.items.map(Ie=>{const Je=parseFloat(Ie.quantity)||0,Xe=parseFloat(Ie.gram)||0;return{...Ie,total_grams:Je*Xe}});console.log("Per Item Totals:",M),console.log("employueee id:",(I=(p=(c=y.value)==null?void 0:c.data)==null?void 0:p.employee)==null?void 0:I.id);const Ge={...u,employee_id:((X=(ee=(H=y.value)==null?void 0:H.data)==null?void 0:ee.employee)==null?void 0:X.id)||"0",status:"confirmed",items:M},Z=await C.confirmDeliveryStocks(Ge);console.log("responsesss",Z),(Z==null?void 0:Z.data)||((ge=Z==null?void 0:Z.data)==null?void 0:ge.message)==="Delivery confirmed successfully."?(re.create({type:"positive",message:Z.data.message||"Delivery Confirmed Successfully"}),(Z==null?void 0:Z.status)===200&&(b({action:"confirmed"}),v.value=!1)):re.create({type:"negative",message:((ye=Z==null?void 0:Z.data)==null?void 0:ye.message)||"Failed to Confirm deliveryq"}),console.log("responssssse",Z)}catch(M){console.log(M),re.create({type:"negative",message:((me=(he=M==null?void 0:M.response)==null?void 0:he.data)==null?void 0:me.message)||"Failed to Confirm delivery"})}finally{x.loading.hide()}},P=()=>{x.dialog({component:Jl}).onOk(u=>{console.log("Remarks from child:",u.remarks),h(g.report.id,u.remarks)}).onCancel(()=>{console.log("Cancelled")})},h=async(u,c)=>{var p,I,H,ee,X,ge,ye,he;try{x.loading.show(),console.log("Declining report",u,"with remarks:",c);const me={id:u,employee_id:((H=(I=(p=y.value)==null?void 0:p.data)==null?void 0:I.employee)==null?void 0:H.id)||"0",status:"declined",remarks:c},M=await C.declineDeliveryStocks(me);(M==null?void 0:M.data)||((ee=M==null?void 0:M.data)==null?void 0:ee.message)==="Delivery declined successfully."?(re.create({type:"positive",message:((X=M==null?void 0:M.data)==null?void 0:X.message)||"Delivery Declined Successfully"}),(M==null?void 0:M.status)===200&&(b({action:"declined"}),v.value=!1)):re.create({type:"negative",message:((ge=M==null?void 0:M.data)==null?void 0:ge.message)||"Failed to Decline delivery"}),console.log("responsessssss",M)}catch(me){console.log(me),re.create({type:"negative",message:((he=(ye=me==null?void 0:me.response)==null?void 0:ye.data)==null?void 0:he.message)||"Failed to decline delivery. Please try again."})}finally{x.loading.hide()}};return(u,c)=>(r(),z(te,{ref_key:"dialogRef",ref:q,modelValue:v.value,"onUpdate:modelValue":c[1]||(c[1]=p=>v.value=p),onHide:n(S)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(T,{class:"emphasized-header"},{default:t(()=>[a("div",Xl,[a("div",Zl," From: "+l(n(R)(s.report.from_name)),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:c[0]||(c[0]=p=>v.value=!1)})])]),_:1}),e(T,{class:"text-caption text-grey-7 q-mt-sm"},{default:t(()=>[a("div",null,[eo,o(" "+l(n(k)(s.report.created_at)||"-"),1)]),a("div",null,[to,o(" "+l(n(N)(s.report.employee)||"-"),1)]),a("div",null,[ao,e(Y,{color:"warning",outlined:""},{default:t(()=>[o(l(n(R)(s.report.status)||"-"),1)]),_:1})]),a("div",so,[lo,s.report.items&&s.report.items.length?(r(),z(G,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(F,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(m,null,{default:t(()=>[e(_,null,{default:t(()=>[o(" Raw Materials Code ")]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(_,null,{default:t(()=>[o("Stocks Category")]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,null,{default:t(()=>[o(" Quantity ")]),_:1})]),_:1})]),_:1}),(r(!0),D(L,null,K(s.report.items,(p,I)=>(r(),z(F,{key:I},{default:t(()=>[e(m,null,{default:t(()=>[e(_,null,{default:t(()=>{var H;return[o(l(((H=p.raw_material)==null?void 0:H.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(m,null,{default:t(()=>[e(_,null,{default:t(()=>[o(l(p.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(m,{side:""},{default:t(()=>[e(_,null,{default:t(()=>[o(l(f(p.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(r(),D("div",oo," No items in this delivery "))])]),_:1}),e(we,{class:"report-actions q-ma-sm q-gutter-sm",align:"right"},{default:t(()=>[e(U,{color:"negative",label:"Decline",class:"action-btn",onClick:P}),e(U,{color:"positive",label:"Confirm",class:"action-btn",onClick:Q})]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var ro=O(no,[["__scopeId","data-v-46db6907"]]);const io=s=>(A("data-v-19af4d50"),s=s(),E(),s),co={key:0,class:"spinner-wrapper"},uo={key:1,class:"q-mt-xl"},_o={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},mo={class:"text-h6 text-grey-7 q-mt-sm"},po={class:"text-body1 text-grey-6 q-mt-sm"},vo={class:"q-gutter-md q-ma-md"},fo={class:"row items-start justify-between"},go={class:"col-8 column q-gutter-y-xs"},yo={class:"text-body1 text-weight-bold text-primary-dark"},ho={class:"text-caption text-grey-6 text-weight-meduim"},xo={class:"col-4 column items-end q-gutter-y-xs"},bo={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},wo={class:"row justify-between items-end"},$o={class:"column q-gutter-y-xs"},qo=io(()=>a("div",{class:"text-caption text-grey-7"},"Created By:",-1)),ko={class:"text-body2 text-weight-semibold text-grey-9"},Do={__name:"PendingPage",setup(s){const{capitalizeFirstLetter:d,formatFullname:R}=W(),N=J(),k=j(()=>N.user);console.log("userdata",k.value);const w=$e(),y=j(()=>w.pendingStocks),C=k.value.device.reference_id;console.log("warehouseId",C);const q=V("pending"),S=V("Warehouse"),b=V(!0),$=V(!1),g=ue(),v=Q=>ze.formatDate(Q,"MMM DD, YYYY || hh:mm A"),x=async()=>{try{b.value=!0,await w.fetchPendingDeliveryReports(C,q.value,S.value),y.value.length||($.value=!0),console.log("stockDelivery",y.value)}catch(Q){console.log(Q)}finally{b.value=!1}};ce(async()=>{C&&await x(C,q.value)});const f=(Q,i)=>{g.dialog({component:ro,componentProps:{report:Q}}).onOk(P=>{var h;if(console.log("response from child:",P),(P==null?void 0:P.action)==="declined"||(P==null?void 0:P.action)==="confirmed"){const u=(h=w.pendingStocks)==null?void 0:h.data;if(Array.isArray(u)){const c=u.findIndex(p=>p.id===Q.id);c!==-1&&u.splice(c,1)}}})};return(Q,i)=>b.value?(r(),D("div",co,[e(de,{size:"50px",color:"primary"})])):(r(),D("div",uo,[y.value.data.length===0?(r(),D("div",_o,[e(ae,{name:"search_off",size:"60px",color:"grey-6"}),a("div",mo,l(Q.searchQuery?"No deliveries found for your search.":"No deliveries available."),1),a("div",po,l(Q.searchQuery?"Try another search term.":"Check again later."),1)])):(r(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",vo,[(r(!0),D(L,null,K(y.value.data,(P,h)=>(r(),z(B,{key:h,onClick:u=>f(P,h),class:"pending-card elegant-card emphasized-card"},{default:t(()=>[e(T,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",fo,[a("div",go,[a("div",yo," From: "+l(n(d)(P.from_name)||"-"),1),a("div",ho,l(v(P.created_at)||"-"),1)]),a("div",xo,[a("div",null,[e(Y,{color:"warning",class:"text-weight-bold q-px-md q-py-sm pending-badge"},{default:t(()=>[o(" PENDING ")]),_:1})]),a("div",bo,l(P.items.length||"-")+" items ",1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",wo,[a("div",$o,[qo,a("div",ko,l(n(R)(P.employee)||"-"),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))]))}};var Po=O(Do,[["__scopeId","data-v-19af4d50"]]);const Ve=s=>(A("data-v-894985ac"),s=s(),E(),s),Co={class:"row justify-between"},So={class:"text-h6"},Ro=Ve(()=>a("span",{class:"text-bold"},"Date:",-1)),Vo=Ve(()=>a("span",{class:"text-bold"}," Created By:",-1)),Io=Ve(()=>a("span",{class:"text-bold"},"Status:",-1)),To=Ve(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),No={key:1,class:"text-caption text-grey-6 q-mt-md"},Qo={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){const{capitalizeFirstLetter:d,formatTimestamp:R,formatFullname:N}=W(),{dialogRef:k,onDialogHide:w,onDialogOK:y,onDialogCancel:C}=ie();console.log("report",s.report);const S=V(!1),b=$=>$==null?"No Quantity":parseFloat($);return($,g)=>(r(),z(te,{ref_key:"dialogRef",ref:k,modelValue:S.value,"onUpdate:modelValue":g[1]||(g[1]=v=>S.value=v),onHide:n(w)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(T,{class:"emphasized-header"},{default:t(()=>[a("div",Co,[a("div",So," From: "+l(n(d)(s.report.from_name)),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:g[0]||(g[0]=v=>S.value=!1)})])]),_:1}),e(T,{class:"text-caption text-grey-7 q-mt-sm"},{default:t(()=>[a("div",null,[a("div",null,[Ro,o(" "+l(n(R)(s.report.created_at)),1)]),a("div",null,[Vo,o(" "+l(n(N)(s.report.employee)),1)]),Io,e(Y,{color:"green"},{default:t(()=>[o(l(n(d)(s.report.status||"No Status")),1)]),_:1})])]),_:1}),e(T,null,{default:t(()=>[a("div",null,[To,s.report.items&&s.report.items.length?(r(),z(G,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(F,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(m,null,{default:t(()=>[e(_,null,{default:t(()=>[o(" Raw Materials Code ")]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(_,null,{default:t(()=>[o("Stocks Category")]),_:1})]),_:1}),e(m,{side:""},{default:t(()=>[e(_,null,{default:t(()=>[o(" Quantity ")]),_:1})]),_:1})]),_:1}),(r(!0),D(L,null,K(s.report.items,(v,x)=>(r(),z(F,{key:x},{default:t(()=>[e(m,null,{default:t(()=>[e(_,null,{default:t(()=>{var f;return[o(l(((f=v.raw_material)==null?void 0:f.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(m,null,{default:t(()=>[e(_,null,{default:t(()=>[o(l(v.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(m,{side:""},{default:t(()=>[e(_,null,{default:t(()=>[o(l(b(v.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(r(),D("div",No," No items in this delivery "))])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var zo=O(Qo,[["__scopeId","data-v-894985ac"]]);const Ke=s=>(A("data-v-76ddba08"),s=s(),E(),s),Fo={key:0,class:"spinner-wrapper"},jo={key:1,class:"q-mt-xl"},Uo={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},Bo={class:"text-h6 text-grey-7 q-mt-sm"},Ho={class:"text-body1 text-grey-6 q-mt-xs"},Lo={class:"q-gutter-md q-ma-md"},Oo={class:"row items-start justify-between"},Mo={class:"col-8 column q-gutter-y-xs"},Ao={class:"text-body1 text-weight-bold text-primary-dark"},Eo={class:"text-caption text-grey-6 text-weight-medium"},Yo={class:"col-4 column items-end q-gutter-y-xs"},Ko={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Wo={class:"row justify-between items-end"},Go={class:"column q-gutter-y-xs"},Jo=Ke(()=>a("div",{class:"text-caption text-grey-7"},"Created By:",-1)),Xo={class:"text-body2 text-weight-semibold text-grey-9"},Zo={class:"col-5 column"},en=Ke(()=>a("div",{class:"text-caption text-grey-7"},"Confirmed By:",-1)),tn={class:"text-body2 text-weight-semibold text-grey-9"},an={key:2,class:"q-pt-md flex flex-center"},sn={__name:"ConfirmPage",setup(s){const d=J(),R=j(()=>d.user);console.log("userdata",R.value);const N=$e(),k=j(()=>N.confirmStocks),w=R.value.device.reference_id;console.log("warehouseId",w);const y=V("confirmed"),C=V("Warehouse"),q=V(!0),S=V(!1),b=ue();V(null);const $=V();let g=null;const v=j(()=>{var c;return((c=N.confirmStocks)==null?void 0:c.pagination)||{current_page:1,last_page:1,per_page:3}}),x=c=>c?c.toLowerCase().split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" "):"",f=c=>{const p=X=>X?X.charAt(0).toUpperCase()+X.slice(1).toLowerCase():"",I=c.firstname?p(c.firstname):"No Firstname",H=c.middlename?p(c.middlename).charAt(0)+".":"",ee=c.lastname?p(c.lastname):"No Lastname";return`${I} ${H} ${ee}`},Q=c=>ze.formatDate(c,"MMM DD, YYYY || hh:mm A"),i=async()=>{try{q.value=!0,await N.fetchConfirmedDeliveryReports(w,y.value,C.value,v.value.current_page,v.value.per_page,$.value),k.value.length||(S.value=!0),console.log("stockDeliverysss",k.value)}catch(c){console.log(c)}finally{q.value=!1}};ce(async()=>{w&&await i(w,y.value,C.value,v.value.current_page)});const P=async()=>{i(w,y.value,C.value,v.value.current_page)},h=()=>{g&&clearTimeout(g),g=setTimeout(()=>{i()},500)},u=c=>{b.dialog({component:zo,componentProps:{report:c}})};return(c,p)=>(r(),D(L,null,[a("div",null,[e(xe,{outlined:"",dense:"",placeholder:"Search delivery",class:"q-mb-sm","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6",modelValue:$.value,"onUpdate:modelValue":[p[0]||(p[0]=I=>$.value=I),h]},{append:t(()=>[e(ae,{name:"search"})]),_:1},8,["modelValue"])]),q.value?(r(),D("div",Fo,[e(de,{size:"50px",color:"primary"})])):(r(),D("div",jo,[k.value.data.length===0?(r(),D("div",Uo,[e(ae,{name:"search_off",size:"60px",color:"grey-6"}),a("div",Bo,l($.value?"No deliveries found for your search.":"No deliveries available."),1),a("div",Ho,l($.value?"Try another search term.":"Check again later."),1)])):(r(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Lo,[(r(!0),D(L,null,K(k.value.data,(I,H)=>(r(),z(B,{key:H,onClick:ee=>u(I),class:"confirmed-card elegant-card emphasized-card"},{default:t(()=>[e(T,{class:"q-gutter-sm enhanced-card-section"},{default:t(()=>[a("div",Oo,[a("div",Mo,[a("div",Ao," From: "+l(x(I.from_name)||"-"),1),a("div",Eo,l(Q(I.created_at)||"-"),1)]),a("div",Yo,[a("div",null,[e(Y,{color:"positive",class:"text-weight-bold q-px-md q-py-sm confirmed-badge"},{default:t(()=>[o(" CONFIRMED ")]),_:1})]),a("div",Ko,l(I.items.length||"-")+" items ",1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",Wo,[a("div",Go,[Jo,a("div",Xo,l(f(I.employee)||"-"),1)]),a("div",Zo,[en,a("div",tn,l(f(I.approved_by)||"-"),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))])),v.value.last_page>1?(r(),D("div",an,[e(Qe,{modelValue:v.value.current_page,"onUpdate:modelValue":p[1]||(p[1]=I=>v.value.current_page=I),max:v.value.last_page,"max-pages":3,"boundary-links":"","direction-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward",onClick:P},null,8,["modelValue","max"])])):pe("",!0)],64))}};var ln=O(sn,[["__scopeId","data-v-76ddba08"]]);const be=s=>(A("data-v-3fcf7d94"),s=s(),E(),s),on={class:"row justify-between"},nn={class:"text-h6"},rn=be(()=>a("span",{class:"text-bold"},"Date:",-1)),cn=be(()=>a("span",{class:"text-bold"},"Created By:",-1)),dn=be(()=>a("span",{class:"text-bold"},"Status:",-1)),un=be(()=>a("span",{class:"text-bold"},"Remark:",-1)),_n=be(()=>a("span",{class:"text-grey-7 text-caption"},"Items:",-1)),mn={key:1,class:"text-caption text-grey-6 q-mt-md"},pn={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(s){const{capitalizeFirstLetter:d,formatTimestamp:R,formatFullname:N}=W(),{dialogRef:k,onDialogHide:w,onDialogOK:y,onDialogCancel:C}=ie();console.log("report",s.report);const S=V(!1),b=$=>$==null?"No Quantity":parseFloat($);return($,g)=>(r(),z(te,{ref_key:"dialogRef",ref:k,modelValue:S.value,"onUpdate:modelValue":g[1]||(g[1]=v=>S.value=v),onHide:n(w)},{default:t(()=>[e(B,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(T,{class:"emphasized-header"},{default:t(()=>[a("div",on,[a("div",nn," From: "+l(n(d)(s.report.from_name)),1),e(U,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:g[0]||(g[0]=v=>S.value=!1)})])]),_:1}),e(T,{class:"text-caption text-grey-7 q-mt-sm"},{default:t(()=>[a("div",null,[rn,o(" "+l(n(R)(s.report.created_at)),1)]),a("div",null,[cn,o(" "+l(n(N)(s.report.employee)||"-"),1)]),dn,e(Y,{color:"negative"},{default:t(()=>[o(l(n(d)(s.report.status||"No Status")),1)]),_:1}),a("div",null,[un,o(" "+l(n(d)(s.report.remarks||"No Remark")),1)])]),_:1}),e(T,null,{default:t(()=>[a("div",null,[_n,s.report.items&&s.report.items.length?(r(),z(G,{key:0,dense:"",separator:"",class:"box"},{default:t(()=>[e(F,{class:"bg-grey-1 text-weight-bold"},{default:t(()=>[e(m,null,{default:t(()=>[e(_,null,{default:t(()=>[o(" Raw Materials Code ")]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(_,null,{default:t(()=>[o("Stocks Category")]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(_,{side:""},{default:t(()=>[o("Quantity")]),_:1})]),_:1})]),_:1}),(r(!0),D(L,null,K(s.report.items,(v,x)=>(r(),z(F,{key:x},{default:t(()=>[e(m,null,{default:t(()=>[e(_,null,{default:t(()=>{var f;return[o(l(((f=v.raw_material)==null?void 0:f.code)||"No Code"),1)]}),_:2},1024)]),_:2},1024),e(m,null,{default:t(()=>[e(_,null,{default:t(()=>[o(l(v.category||"No Category"),1)]),_:2},1024)]),_:2},1024),e(m,{side:""},{default:t(()=>[e(_,null,{default:t(()=>[o(l(b(v.quantity||"No Quantity")),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(r(),D("div",mn," No items in this delivery "))])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide"]))}};var vn=O(pn,[["__scopeId","data-v-3fcf7d94"]]);const We=s=>(A("data-v-41b98b80"),s=s(),E(),s),fn={key:0,class:"spinner-wrapper"},gn={key:1,class:"q-mt-xl"},yn={key:0,class:"column items-center justify-center text-center q-pa-lg no-data-message"},hn={class:"text-h6 text-grey-7 q-mt-md"},xn={class:"text-body1 text-grey-6 q-mt-sm"},bn={class:"q-gutter-md q-pb-md"},wn={class:"row items-start justify-between"},$n={class:"col-8 column q-gutter-y-xs"},qn={class:"text-body1 text-weight-bold text-primary-dark"},kn={class:"text-caption text-grey-6 text-weight-medium"},Dn={class:"col-4 column items-end q-gutter-y-xs"},Pn={class:"text-body2 text-weight-bold text-grey-8 q-pt-sm"},Cn={class:"row justify-between items-end"},Sn={class:"column q-gutter-y-xs"},Rn=We(()=>a("div",{class:"text-caption text-grey-7"},"Declined By:",-1)),Vn={class:"text-body2 text-weight-semibold text-grey-9"},In={class:"col-5 column"},Tn=We(()=>a("div",{class:"text-caption text-grey-7"},"Remark:",-1)),Nn={class:"text-body2 text-grey-8 remarks-text"},Qn={key:2,class:"q-pt-lg flex flex-center"},zn={__name:"DeclinePage",setup(s){const d=J(),R=j(()=>d.user);console.log("userdata",R.value);const N=$e(),k=j(()=>N.declinedStocks),w=R.value.device.reference_id;console.log("warehouseId",w);const y=V("declined"),C=V("Warehouse"),q=V(!0),S=V(!1),b=ue(),$=V();let g=null;const v=j(()=>{var c;return((c=N.declinedStocks)==null?void 0:c.pagination)||{current_page:1,last_page:1,per_page:3}}),x=c=>c?c.toLowerCase().split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" "):"",f=c=>{const p=X=>X?X.charAt(0).toUpperCase()+X.slice(1).toLowerCase():"",I=c.firstname?p(c.firstname):"No Firstname",H=c.middlename?p(c.middlename).charAt(0)+".":"",ee=c.lastname?p(c.lastname):"No Lastname";return`${I} ${H} ${ee}`},Q=c=>ze.formatDate(c,"MMM DD, YYYY || hh:mm A"),i=async(c=1)=>{try{q.value=!0,await N.fetchDeclinedDeliveryReports(w,y.value,C.value,v.value.current_page,v.value.per_page,$.value),k.value.length||(S.value=!0),console.log("stockDeliveryDeclinedsss",k.value)}catch(p){console.log(p)}finally{q.value=!1}};ce(async()=>{w&&await i(w,y.value,C.value,v.value.current_page)});const P=async()=>{i(w,y.value,C.value,v.value.current_page)},h=async()=>{g&&clearTimeout(g),g=setTimeout(()=>{i(1)},500)},u=c=>{b.dialog({component:vn,componentProps:{report:c}})};return(c,p)=>(r(),D(L,null,[a("div",null,[e(xe,{outlined:"",dense:"",placeholder:"Search delivery",class:"q-mb-md search-input-elegant","bg-color":"grey-1","input-class":"text-grey-8","label-color":"grey-6",modelValue:$.value,"onUpdate:modelValue":[p[0]||(p[0]=I=>$.value=I),h]},{prepend:t(()=>[e(ae,{name:"search",color:"grey-6"})]),_:1},8,["modelValue"])]),q.value?(r(),D("div",fn,[e(de,{size:"50px",color:"primary"})])):(r(),D("div",gn,[k.value.data.length===0?(r(),D("div",yn,[e(ae,{name:"search_off",size:"60px",color:"grey-5"}),a("div",hn,l($.value?"No deliveries found for your search.":"No deliveries available."),1),a("div",xn,l($.value?"Try another search term.":"Check again later."),1)])):(r(),z(_e,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",bn,[(r(!0),D(L,null,K(k.value.data,(I,H)=>(r(),z(B,{key:H,onClick:ee=>u(I),class:"declined-card elegant-card emphasized-card"},{default:t(()=>[e(T,{class:"q-pa-lg enhanced-card-section"},{default:t(()=>[a("div",wn,[a("div",$n,[a("div",qn," From: "+l(x(I.from_name)),1),a("div",kn,l(Q(I.created_at)),1)]),a("div",Dn,[a("div",null,[e(Y,{color:"negative",class:"text-weight-bold q-px-md q-py-sm declined-badge"},{default:t(()=>[o(" DECLINED ")]),_:1})]),a("div",Pn,l(I.items.length)+" items ",1)])]),e(se,{class:"q-my-md divider-elegant"}),a("div",Cn,[a("div",Sn,[Rn,a("div",Vn,l(f(I.approved_by)),1)]),a("div",In,[Tn,a("div",Nn,l(x(I.remarks||"\u2014 No remark provided \u2014")),1)])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])]),_:1}))])),v.value.last_page>1?(r(),D("div",Qn,[e(Qe,{modelValue:v.value.current_page,"onUpdate:modelValue":[p[1]||(p[1]=I=>v.value.current_page=I),P],max:v.value.last_page,"max-pages":5,"boundary-links":"","direction-links":"","icon-first":"first_page","icon-last":"last_page","icon-prev":"chevron_left","icon-next":"chevron_right",color:"primary","active-color":"white","active-text-color":"primary",class:"elegant-pagination"},null,8,["modelValue","max"])])):pe("",!0)],64))}};var Fn=O(zn,[["__scopeId","data-v-41b98b80"]]);const jn={class:"q-gutter-y-sm"},Un={__name:"StocksDeliveryPage",setup(s){const d=V("pending"),R=j(()=>{switch(d.value){case"pending":return"warning";case"confirmed":return"green-13";case"declined":return"red-6";default:return"light-green-13"}});return(N,k)=>(r(),z(B,{flat:""},{default:t(()=>[e(se),a("div",jn,[e(Te,{modelValue:d.value,"onUpdate:modelValue":k[0]||(k[0]=w=>d.value=w),"indicator-color":R.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(le,{class:"text-dark",name:"pending",label:"Pending"}),e(le,{class:"text-dark",name:"confirmed",label:"Confirmed"}),e(le,{class:"text-dark",name:"declined",label:"Declined"})]),_:1},8,["modelValue","indicator-color"])]),e(Ne,{modelValue:d.value,"onUpdate:modelValue":k[1]||(k[1]=w=>d.value=w),animated:""},{default:t(()=>[e(oe,{name:"pending"},{default:t(()=>[e(Po)]),_:1}),e(oe,{name:"confirmed"},{default:t(()=>[e(ln)]),_:1}),e(oe,{name:"declined"},{default:t(()=>[e(Fn)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Bn={class:"q-gutter-y-sm"},$r={__name:"warehouseTransactionHistory",setup(s){const d=V("premix"),R=j(()=>{switch(d.value){case"premix":return"brown";case"stocks_delivery":return"teal-5";default:return"light-green-13"}});return(N,k)=>(r(),z(B,{flat:""},{default:t(()=>[e(T,{class:"text-h6"},{default:t(()=>[o(" Transaction History ")]),_:1}),a("div",Bn,[e(Te,{modelValue:d.value,"onUpdate:modelValue":k[0]||(k[0]=w=>d.value=w),"indicator-color":R.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(le,{class:"text-dark",name:"premix",label:"Premix"}),e(le,{class:"text-dark",name:"stocks_delivery",label:"Stocks Delivery"})]),_:1},8,["modelValue","indicator-color"])]),e(Ne,{modelValue:d.value,"onUpdate:modelValue":k[1]||(k[1]=w=>d.value=w),animated:""},{default:t(()=>[e(oe,{name:"premix"},{default:t(()=>[e(Hl)]),_:1}),e(oe,{name:"stocks_delivery"},{default:t(()=>[e(Un)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{$r as default};
