import{d as g,r as i,N as s}from"./index.94c77fd6.js";import{api as o}from"./axios.669ebcd4.js";const P=g("dtrs",()=>{const u=i(null),a=i([]),n=i([]),p=i({}),d=e=>{console.log("Setting user in DTR store:",e.data),p.value=e.data},l=async(e,t,r)=>{try{const c=await o.get("/api/dtr",{params:{page:e,per_page:t,search:r}});return c&&c.data?(a.value=c.data,c.data):(console.warn("No data returned from API."),a.value=[],[])}catch(c){return console.error("Error fetching DTR data:",c),a.value=[],[]}};return{dtr:u,dtrs:a,dtrCutOffData:n,user:p,setUser:d,fetchDTR:l,fetchDTRRange:async e=>{console.log("Fetching DTR Range with data:",e);const t=await o.post("/api/dtr-data",e);console.log("DTR Range response:",t),n.value=t.data},fetchEmployeeDTRRange:async e=>{console.log("Fetching DTR Range with data:",e);const t=await o.post("/api/dtr-data",e);console.log("DTR Range response:",t),n.value=t.data},fetchDTRPayrollPerCutOff:async e=>{console.log("fetchDTRPayrollPerCutOff",e);try{const t=await o.get(`/api/fetch-drt-payroll-per-cut-off/${e}`);n.value=t.data}catch(t){console.log(t)}},saveOvertime:async e=>{const t=await o.post("/api/saveOvertime",e);a.value=t.data,l(),s.create({type:"positive",message:"Over Time Save"})},searchDTR:async e=>{try{console.log("Searching for DTR with keyword:",e);const t=await o.post(`/api/search-drt?keyword=${e}`);console.log("DTR response:",t),a.value=t.data}catch(t){console.error("Error searching DTR:",t)}},approveOvertime:async e=>{console.log("Approving overtime with data:",e);try{const t=await o.post("/api/approveOvertime",e);return s.create({type:"positive",message:"Over Time Approved"}),t.data}catch(t){console.error("Error approving overtime:",t)}},declineOvertime:async e=>{const t=await o.post("/api/declineOvertime",e);return s.create({type:"negative",message:"Over Time Declined"}),t.data},updateDtrScheduleIn:async e=>{console.log("updateDtrScheduleIn in store:",e);const t=e.id;try{const r=await o.put(`/api/update-dtr-schedule-in/${t}`,e);s.create({message:"Scheduled in updated successfully",color:"positive",position:"top",timeout:2e3})}catch(r){console.log("error",r),s.create({message:"Failed to update schedule in",color:"negative",position:"top",timeout:2e3})}},updateDtrSheduleOut:async e=>{console.log("updateDtrSheduleOut in store",e);const t=e.id;try{const r=await o.put(`/api/update-dtr-schedule-out/${t}`,e);s.create({message:"Scheduled out updated successfully",color:"positive",position:"top",timeout:2e3})}catch(r){console.log(r),s.create({message:"Schedules out updated successfully",color:"positive",position:"top",timeout:2e3})}}}});export{P as u};
