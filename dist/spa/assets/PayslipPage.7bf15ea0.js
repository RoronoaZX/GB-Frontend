import{H as te,c as R,r as c,z as oe,bz as ae,o as d,e as I,w as t,J as s,f as e,L as n,K as se,a3 as x,a5 as F,I as _,Q as M,a4 as k,bd as le,a0 as h,$ as p,M as O,ae as U,Z as ie,bf as V,bx as $,aI as re,O as ne,R as ce}from"./index.39143933.js";import{Q as q}from"./QSelect.7b1f0bad.js";import{Q as r}from"./QSkeleton.55bac3ec.js";import{Q as u,a as i}from"./QItem.64ab41b4.js";import{Q as z}from"./QList.13a82c39.js";import{Q as de}from"./QChip.ce6326ad.js";import{Q as ue}from"./QMenu.e4c627d2.js";import{Q as pe}from"./QImg.9b9c1680.js";import{a as me}from"./QItemLabel.670a5aaa.js";import{Q as fe}from"./QSpinnerIos.7ccb1fcd.js";import{Q as _e}from"./QInnerLoading.d8e11757.js";import{Q as he}from"./QTooltip.7a6a8459.js";import{Q as ve}from"./PayslipPage.vue_vue_type_style_index_0_scoped_true_lang.4d4353d2.js";import{Q as xe}from"./QPage.ed2dc28b.js";import{C as H}from"./ClosePopup.4efdb943.js";import{u as ge}from"./employee.c0202bab.js";import{f as J}from"./useEmployeeFunctions.ef8cc732.js";import{_ as we}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-virtual-scroll.cee60218.js";import"./selection.5bc173d2.js";import"./position-engine.cf98fa1e.js";import"./axios.f1eedd47.js";import"./date.cd916d5f.js";import"./branch.f7d932a2.js";import"./warehouse.7d9b1643.js";var K="/assets/boy-avatar.8512a60a.png";const T=g=>(ne("data-v-3f8b26ad"),g=g(),ce(),g),ye={class:"row q-col-gutter-md q-mb-lg"},be={class:"col-12 col-sm-6 col-md-4"},Qe={class:"col-12 col-sm-6 col-md-8"},Ce={class:"row q-col-gutter-md"},qe={class:"col-6 col-md-3"},Se={class:"col-6 col-md-3"},Ie={class:"col-6 col-md-3"},ke={class:"col-6 col-md-3"},Ve={class:"row q-col-gutter-lg"},ze={class:"row items-center justify-between no-wrap"},Te={class:"text-center q-pt-sm"},Ae={class:"row items-center justify-end"},Be={key:0,class:"col-12 text-center text-grey-7 q-mt-xl"},De=T(()=>s("div",{class:"text-h6 q-mt-md"},"No employees found",-1)),Le=T(()=>s("p",null,"Try adjusting your search or filter criteria.",-1)),Ee={class:"row items-center justify-between no-wrap"},Ne={class:"text-center q-pt-sm"},je={class:"text-h6 q-mt-md"},Pe={class:"text-caption text-grey-7"},Re={class:"row items-center no-wrap text-grey-8"},Fe=["href"],Me=["href"],Oe={class:"row items-center justify-between text-caption text-grey-7"},Ue=T(()=>s("span",null,null,-1)),$e=["onClick"],He={__name:"PayslipPage",setup(g){const A=ge(),W=te(),B=R(()=>A.employees),D=c([]),S=c(!0),v=c(null),w=c(""),y=c(null),b=c(null),Q=c(null),L=c([]),E=c([]),N=c([]),Z=()=>{window.scrollTo({top:0,behavior:"smooth"})},G=async()=>{S.value=!0;try{B.value=await A.fetchEmployeeWithEmploymentTypeAndDesignation();const{data:a}=B.value;D.value=a,a&&a.length>0&&(L.value=[...new Set(a.map(l=>l.employment_type.category))],N.value=[...new Set(a.map(l=>l.position))],E.value=[...new Set(a.map(l=>l.status))])}catch(a){console.error("Error fetching employees:",a)}finally{S.value=!1}},j=R(()=>{let a=D.value;if(w.value){const l=w.value.toLowerCase();a=a.filter(o=>J(o).toLowerCase().includes(l))}return y.value&&(a=a.filter(l=>l.employment_type.category===y.value)),b.value&&(a=a.filter(l=>l.status===b.value)),Q.value&&(a=a.filter(l=>l.position===Q.value)),a});oe(()=>{G()});const X=a=>{v.value=a.id,setTimeout(()=>{v.value===a.id&&(v.value=null)},5e3),setTimeout(()=>{W.push({name:"employee-profile-page",params:{employee_id:a.id}})},300)};ae(()=>{v.value=null});const m={Active:{label:"Active",chipColor:"green-6",chipTextColor:"white",icon:"lens",borderColor:"#68B984"},Invited:{label:"Invited",chipColor:"grey-10",chipTextColor:"white",icon:"check",borderColor:"#333333"},Inactive:{label:"Inactive",chipColor:"grey-4",chipTextColor:"grey-8",icon:"pause",borderColor:"#BDBDBD"}};function C(a){return m[a]||m.Inactive}function Y(a){return{borderBottom:`4px solid ${(m[a]||m.Inactive).borderColor}`}}function ee(a){return{color:(m[a]||m.Inactive).borderColor}}return(a,l)=>(d(),I(xe,{class:"q-pa-md"},{default:t(()=>[s("div",ye,[s("div",be,[e(se,{outlined:"",dense:"",modelValue:w.value,"onUpdate:modelValue":l[0]||(l[0]=o=>w.value=o),placeholder:"Search",class:"bg-white"},{prepend:t(()=>[e(n,{name:"search"})]),_:1},8,["modelValue"])]),s("div",Qe,[s("div",Ce,[s("div",qe,[e(q,{outlined:"",dense:"",modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=o=>y.value=o),options:L.value,label:"Type",class:"bg-white",clearable:""},{prepend:t(()=>[e(n,{name:"workspaces_outline"})]),_:1},8,["modelValue","options"])]),s("div",Se,[e(q,{outlined:"",dense:"",modelValue:b.value,"onUpdate:modelValue":l[2]||(l[2]=o=>b.value=o),options:E.value,label:"Status",class:"bg-white",clearable:""},{prepend:t(()=>[e(n,{name:"show_chart"})]),_:1},8,["modelValue","options"])]),s("div",Ie,[e(q,{outlined:"",dense:"",modelValue:Q.value,"onUpdate:modelValue":l[3]||(l[3]=o=>Q.value=o),options:N.value,label:"Role",class:"bg-white",clearable:""},{prepend:t(()=>[e(n,{name:"badge"})]),_:1},8,["modelValue","options"])]),s("div",ke,[e(q,{outlined:"",dense:"",label:"Advance Filter",class:"bg-white",options:["Feature not available"],disable:""},{prepend:t(()=>[e(n,{name:"filter_alt"})]),_:1})])])])]),s("div",Ve,[S.value?(d(),x(k,{key:0},F(8,o=>s("div",{key:o,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[e(M,{flat:"",bordered:""},{default:t(()=>[e(_,null,{default:t(()=>[s("div",ze,[e(r,{type:"QChip",width:"85px",height:"24px"}),e(r,{type:"QBtn"})]),s("div",Te,[e(r,{type:"QAvatar",size:"90px",class:"q-mx-auto"}),e(r,{type:"text",height:"28px",width:"60%",class:"q-mt-md q-mx-auto"}),e(r,{type:"text",height:"20px",width:"40%",class:"q-mt-xs q-mx-auto"})])]),_:1}),e(_,{class:"q-pt-none"},{default:t(()=>[e(z,{dense:""},{default:t(()=>[e(u,{class:"q-px-none"},{default:t(()=>[e(i,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(r,{type:"QAvatar",size:"24px"})]),_:1}),e(i,null,{default:t(()=>[e(r,{type:"text",width:"60%"})]),_:1}),e(i,{side:""},{default:t(()=>[e(r,{type:"text",width:"65px"})]),_:1})]),_:1}),e(u,{class:"q-px-none"},{default:t(()=>[e(i,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(r,{type:"QAvatar",size:"24px"})]),_:1}),e(i,null,{default:t(()=>[e(r,{type:"text",width:"85%"})]),_:1})]),_:1}),e(u,{class:"q-px-none"},{default:t(()=>[e(i,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(r,{type:"QAvatar",size:"24px"})]),_:1}),e(i,null,{default:t(()=>[e(r,{type:"text",width:"70%"})]),_:1})]),_:1})]),_:1})]),_:1}),e(_,{class:"q-pt-none"},{default:t(()=>[s("div",Ae,[e(r,{type:"text",width:"90px",height:"20px"})])]),_:1})]),_:1})])),64)):(d(),x(k,{key:1},[j.value.length===0?(d(),x("div",Be,[e(n,{name:"person_search",size:"4em"}),De,Le])):le("",!0),(d(!0),x(k,null,F(j.value,o=>(d(),x("div",{key:o.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[e(M,{class:"employee-card",flat:"",bordered:"",style:$(Y(o.status))},{default:t(()=>[e(_,null,{default:t(()=>[s("div",Ee,[e(de,{icon:C(o.status).icon,color:C(o.status).chipColor,"text-color":C(o.status).chipTextColor,class:"text-weight-bold",size:"xs"},{default:t(()=>[h(p(C(o.status).label),1)]),_:2},1032,["icon","color","text-color"]),e(O,{icon:"more_horiz",round:"",flat:"",dense:""},{default:t(()=>[e(ue,null,{default:t(()=>[e(z,{style:{"min-width":"100px"}},{default:t(()=>[U((d(),I(u,{clickable:""},{default:t(()=>[e(i,null,{default:t(()=>[h("Edit")]),_:1})]),_:1})),[[H]]),U((d(),I(u,{clickable:""},{default:t(()=>[e(i,null,{default:t(()=>[h("Delete")]),_:1})]),_:1})),[[H]])]),_:1})]),_:1})]),_:1})]),s("div",Ne,[e(ie,{size:"90px"},{default:t(()=>[e(pe,{src:o.avatar||V(K),"error-src":V(K),"spinner-color":"primary",style:{height:"90px",width:"90px"}},null,8,["src","error-src"])]),_:2},1024),s("div",je,p(V(J)(o)),1),s("div",Pe,p(o.position),1)])]),_:2},1024),e(_,{class:"q-pt-none"},{default:t(()=>[e(z,{dense:""},{default:t(()=>[e(u,{class:"q-px-none"},{default:t(()=>[e(i,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(n,{name:"storefront",color:"grey-8"})]),_:1}),e(i,null,{default:t(()=>[e(me,{class:"text-grey-8 ellipsis"},{default:t(()=>{var f;return[h(p(((f=o==null?void 0:o.designation)==null?void 0:f.name)||"N/A"),1)]}),_:2},1024)]),_:2},1024),e(i,{side:""},{default:t(()=>[s("div",Re,[e(n,{name:"schedule",class:"q-mr-xs"}),s("span",null,p(o.employment_type.category||"N/A"),1)])]),_:2},1024)]),_:2},1024),e(u,{class:"q-px-none"},{default:t(()=>[e(i,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(n,{name:"email",color:"grey-8"})]),_:1}),e(i,null,{default:t(()=>{var f,P;return[s("a",{href:"mailto:"+(((f=o==null?void 0:o.user_designation)==null?void 0:f.email)||""),class:"contact-pill"},p(((P=o==null?void 0:o.user_designation)==null?void 0:P.email)||"N/A"),9,Fe)]}),_:2},1024)]),_:2},1024),e(u,{class:"q-px-none"},{default:t(()=>[e(i,{avatar:"",style:{"min-width":"40px"}},{default:t(()=>[e(n,{name:"phone",color:"grey-8"})]),_:1}),e(i,null,{default:t(()=>[s("a",{href:"tel:"+(o.phone||"").replace(/\D/g,""),class:"contact-pill"},p(o.phone||"N/A"),9,Me)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(_,{class:"q-pt-none"},{default:t(()=>[s("div",Oe,[Ue,s("a",{href:"#",style:$([ee(o.status),{"text-decoration":"none",cursor:"pointer"}]),class:"text-weight-bold",onClick:re(f=>X(o),["prevent"])},[h(" View details "),e(n,{name:"arrow_forward_ios",size:"0.7em",class:"q-ml-xs"})],12,$e)])]),_:2},1024),e(_e,{showing:v.value===o.id,label:"Loading...","label-class":"text-primary","label-style":"font-size: 1.1em"},{default:t(()=>[e(fe,{size:"50px",color:"primary"})]),_:2},1032,["showing"])]),_:2},1032,["style"])]))),128))],64))]),e(ve,{position:"bottom-right","scroll-offset":100,offset:[18,18],"transition-show":"jump-up","transition-hide":"jump-down"},{default:t(()=>[e(O,{icon:"keyboard_arrow_up",round:"",size:"md","text-color":"white",onClick:Z,class:"gradient-btn"},{default:t(()=>[e(he,{class:"gradient-tooltip"},{default:t(()=>[h(" Back to top ")]),_:1})]),_:1})]),_:1})]),_:1}))}};var xt=we(He,[["__scopeId","data-v-3f8b26ad"]]);export{xt as default};
