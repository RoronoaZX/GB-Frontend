import{br as be,e as fe,ag as ae,a6 as xe,a7 as ye,a8 as ke,a9 as we,n as G,bs as Se,ab as Ie,g as f,u as Q,A as qe,h as y,k as Re,bg as Ce,a0 as J,ad as Le,bt as $e,j as Te,L as H,V as Qe,o as v,a2 as I,J as t,a as n,w as i,c as B,Q as X,I as j,_ as g,M as z,a3 as A,a4 as V,O as ne,R as le,t as Be,$ as L,K as W,bc as oe,H as je,r as Ae}from"./index.6a2e76bf.js";import{Q as Ne}from"./QSpace.d0a88e4a.js";import{Q as K,a as $}from"./QItem.a0938a99.js";import{a as O,Q as N}from"./QItemLabel.fa8563a5.js";import{Q as Ve}from"./QSlideTransition.61a711ee.js";import{Q as Oe}from"./QVirtualScroll.e04732f7.js";import{u as M}from"./baker-report.baef49e1.js";import{_ as se}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as ie}from"./QList.ed3bcae4.js";import{u as Fe}from"./recipe.0cda702d.js";import"./use-virtual-scroll.d9a7d35f.js";import"./rtl.276c3f1b.js";import"./axios.eb07d1a5.js";const T=be({}),Pe=Object.keys(ae);var te=fe({name:"QExpansionItem",props:{...ae,...xe,...ye,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ke,"click","afterShow","afterHide"],setup(e,{slots:b,emit:m}){const{proxy:{$q:r}}=Re(),w=we(e,r),h=G(e.modelValue!==null?e.modelValue:e.defaultOpened),a=G(null),S=Se(),{show:c,hide:x,toggle:p}=Ie({showing:h});let _,l;const s=f(()=>`q-expansion-item q-item-type q-expansion-item--${h.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),u=f(()=>{if(e.contentInsetLevel===void 0)return null;const o=r.lang.rtl===!0?"Right":"Left";return{["padding"+o]:e.contentInsetLevel*56+"px"}}),d=f(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),k=f(()=>{const o={};return Pe.forEach(C=>{o[C]=e[C]}),o}),R=f(()=>d.value===!0||e.expandIconToggle!==!0),P=f(()=>e.expandedIcon!==void 0&&h.value===!0?e.expandedIcon:e.expandIcon||r.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),U=f(()=>e.disable!==!0&&(d.value===!0||e.expandIconToggle===!0)),D=f(()=>({expanded:h.value===!0,detailsId:S.value,toggle:p,show:c,hide:x})),q=f(()=>{const o=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:r.lang.label[h.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":h.value===!0?"true":"false","aria-controls":S.value,"aria-label":o}});Q(()=>e.group,o=>{l!==void 0&&l(),o!==void 0&&ee()});function re(o){d.value!==!0&&p(o),m("click",o)}function de(o){o.keyCode===13&&Z(o,!0)}function Z(o,C){C!==!0&&a.value!==null&&a.value.focus(),p(o),Qe(o)}function ce(){m("afterShow")}function ue(){m("afterHide")}function ee(){_===void 0&&(_=Ce()),h.value===!0&&(T[e.group]=_);const o=Q(h,E=>{E===!0?T[e.group]=_:T[e.group]===_&&delete T[e.group]}),C=Q(()=>T[e.group],(E,he)=>{he===_&&E!==void 0&&E!==_&&x()});l=()=>{o(),C(),T[e.group]===_&&delete T[e.group],l=void 0}}function _e(){const o={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},C=[y(H,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&h.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:P.value})];return U.value===!0&&(Object.assign(o,{tabindex:0,...q.value,onClick:Z,onKeyup:de}),C.unshift(y("div",{ref:a,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),y($,o,()=>C)}function ve(){let o;return b.header!==void 0?o=[].concat(b.header(D.value)):(o=[y($,()=>[y(O,{lines:e.labelLines},()=>e.label||""),e.caption?y(O,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&o[e.switchToggleSide===!0?"push":"unshift"](y($,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>y(H,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&o[e.switchToggleSide===!0?"unshift":"push"](_e()),o}function me(){const o={ref:"item",style:e.headerStyle,class:e.headerClass,dark:w.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return R.value===!0&&(o.clickable=!0,o.onClick=re,Object.assign(o,d.value===!0?k.value:q.value)),y(K,o,ve)}function pe(){return Le(y("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:u.value,id:S.value},Te(b.default)),[[$e,h.value]])}function ge(){const o=[me(),y(Ve,{duration:e.duration,onShow:ce,onHide:ue},pe)];return e.expandSeparator===!0&&o.push(y(J,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:w.value}),y(J,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:w.value})),o}return e.group!==void 0&&ee(),qe(()=>{l!==void 0&&l()}),()=>y("div",{class:s.value},[y("div",{class:"q-expansion-item__container relative-position"},ge())])}});const F=e=>(ne("data-v-7388e64b"),e=e(),le(),e),Ue=F(()=>t("div",{class:"text-h6",align:"center"},"Report List",-1)),De={class:"q-pa-md row wrap justify-center"},Ee={class:"row justify-between q-gutter-x-md"},He={class:"row items-center"},ze={class:"text-subtitle1 q-ml-sm"},Ke={class:"content-section"},Me={class:"q-mt-xs row justify-between"},Ge=F(()=>t("div",null,"Kilo",-1)),Je={class:"q-mt-xs row justify-between"},We=F(()=>t("div",null,"Short",-1)),Xe={class:"q-mt-xs row justify-between"},Ye=F(()=>t("div",null,"Over",-1)),Ze={class:"q-mt-xs row justify-between"},et=F(()=>t("div",null,"Actual Target",-1)),tt={class:"q-pl-md"},at={class:"row justify-between"},nt={class:"q-pl-md"},lt={class:"row justify-between"},ot={align:"right"},st={__name:"ReportListComponent",setup(e){const b=M(),m=f(()=>b.reports);console.log("bakers report:",m.value);const r=a=>{b.removeReport(a)},w=a=>a?a.split(" ").map(S=>S.charAt(0).toUpperCase()+S.slice(1).toLowerCase()).join(" "):"",h=async()=>{b.createReports()};return(a,S)=>(v(),I(A,null,[Ue,t("div",De,[n(Oe,{items:m.value,"scroll-target":"body","virtual-scroll-horizontal":"",class:"my-virtual-scroll"},{default:i(({item:c,index:x})=>[(v(),B(X,{flat:"",bordered:"",class:"q-gutter-sm my-card",key:x},{default:i(()=>[n(j,null,{default:i(()=>[t("div",Ee,[t("div",He,[n(H,{name:"assignment",color:"primary"}),t("div",ze,g(w(c.recipe_name))+" - "+g(c.recipe_category),1)]),t("div",null,[n(z,{flat:"",round:"",icon:"close",onClick:p=>r(x),class:"text-negative close-btn"},null,8,["onClick"])])])]),_:2},1024),n(J),n(j,null,{default:i(()=>[t("div",Ke,[t("div",Me,[Ge,t("div",null,g(c.kilo)+" kgs",1)]),t("div",Je,[We,t("div",null,g(c.short)+" pcs",1)]),t("div",Xe,[Ye,t("div",null,g(c.over)+" pcs",1)]),t("div",Ze,[et,t("div",null,g(c.actual_target)+" pcs",1)]),(v(),B(te,{key:"breads-"+x,label:"Breads",dense:"",class:""},{default:i(()=>[t("ul",tt,[(v(!0),I(A,null,V(c.breads,(p,_)=>(v(),I("li",{key:"bread-"+_,class:"q-my-sm"},[t("div",at,[t("div",null,g(p.bread_name),1),t("div",null,g(p.bread_production),1)])]))),128))])]),_:2},1024)),(v(),B(te,{key:"ingredients-"+x,label:"Ingredients",dense:"",class:""},{default:i(()=>[t("ul",nt,[(v(!0),I(A,null,V(c.ingredients,(p,_)=>(v(),I("li",{key:"ingredient-"+_,class:"q-my-sm"},[t("div",lt,[t("div",null,g(p.code),1),t("div",null,g(p.quantity)+" "+g(p.unit),1)])]))),128))])]),_:2},1024))])]),_:2},1024)]),_:2},1024))]),_:1},8,["items"])]),t("div",ot,[n(z,{color:"red-6",icon:"edit",label:"Create",onClick:h})])],64))}};var it=se(st,[["__scopeId","data-v-7388e64b"]]);const Y=e=>(ne("data-v-cdb3a2ce"),e=e(),le(),e),rt={class:"row justify-center"},dt={class:"text-h6 q-ma-sm"},ct={class:"row q-gutter-sm"},ut={class:"row q-mt-sm q-gutter-sm"},_t={class:"q-mb-md"},vt=Y(()=>t("div",{class:"q-mt-sm"},"Kilo",-1)),mt={class:"q-mt-md q-gutter-md"},pt={key:0},gt=Y(()=>t("div",{class:"q-mt-sm"},null,-1)),ht=Y(()=>t("div",{class:"text-h6 q-mt-sm",align:"center"},"Ingredients List",-1)),bt={class:"q-mt-lg"},ft={class:"ingredient-quantity"},xt={class:"ingredient-quantity"},yt={__name:"ReportRecipeInputComponent",setup(e){const b=M(),m=f(()=>b.user),r=f(()=>b.recipes),w=f(()=>{var u,d,k,R;const l=(d=(u=r.value)==null?void 0:u.name)!=null?d:"Recipe Name",s=(R=(k=r.value)==null?void 0:k.category)!=null?R:"Category";return`${l} - ${s}`}),h=l=>l?l.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" "):"",a=Be({user_id:null,branch_id:null,recipe_id:null,recipe_name:"",recipe_category:"",kilo:"",short:0,over:0,actual_target:0,breads:[]}),S=()=>{var u;const l=parseFloat(a.kilo),s=parseFloat((u=r.value)==null?void 0:u.target);!isNaN(l)&&!isNaN(s)?a.actual_target=l*s:a.actual_target=0},c=()=>{const s=a.breads.reduce((u,d)=>u+(parseFloat(d.value)||0),0)-a.actual_target;s>0?(a.over=s,a.short=0):s<0?(a.short=Math.abs(s),a.over=0):(a.short=0,a.over=0)},x=()=>{var s,u,d,k,R,P,U,D;a.user_id=((s=m.value)==null?void 0:s.data.id)||"",a.branch_id=((k=(d=(u=m.value)==null?void 0:u.data)==null?void 0:d.employee)==null?void 0:k.branch_employee.branch_id)||"",a.recipe_id=((R=r.value)==null?void 0:R.id)||"",a.recipe_id=((P=r.value)==null?void 0:P.id)||"",a.recipe_name=((U=r.value)==null?void 0:U.name)||"",a.recipe_category=((D=r.value)==null?void 0:D.category)||"";const l={user_id:a.user_id,branch_id:a.branch_id,recipe_id:a.recipe_id,recipe_name:a.recipe_name,recipe_category:a.recipe_category,status:"pending",kilo:a.kilo,short:a.short,over:a.over,actual_target:a.actual_target,breads:a.breads.map(q=>({bread_id:q.id,bread_name:q.bread_name,bread_production:parseInt(q.value,10)})),ingredients:_.value.map(q=>({ingredients_id:q.raw_materials_id,code:q.code,quantity:q.multipliedQuantity,unit:q.unit}))};console.log("report dATA:",l),b.setReport(l),console.log("Report data set to store:",b.reports),p()},p=()=>{var l,s;a.recipe_name="",a.kilo="",a.short=0,a.over=0,a.actual_target=0,a.breads=((s=(l=r.value)==null?void 0:l.bread_groups)==null?void 0:s.map(u=>({id:u.product_id,bread_name:u.bread_name,value:""})))||[]},_=f(()=>{var s;const l=parseInt(a.kilo)||1;return(((s=r.value)==null?void 0:s.ingredients)||[]).map(u=>{const d=parseInt(u.quantity),k=!isNaN(l)&&!isNaN(d)?l*d:0;return{...u,multipliedQuantity:k}})});return Q(()=>a.kilo,()=>{S(),c()}),Q(()=>{var l;return(l=r.value)==null?void 0:l.ingredients},()=>{c()},{deep:!0}),Q(()=>a.breads.map(l=>l.value),c,{deep:!0}),Q(()=>{var l;return(l=r.value)==null?void 0:l.bread_groups},()=>{var l;a.breads=((l=r.value)==null?void 0:l.bread_groups.map(s=>({id:s.product_id,bread_name:s.bread_name,value:""})))||[],c()}),(l,s)=>{var u;return v(),I("div",rt,[t("div",null,[t("div",null,[t("div",dt,g(h(w.value)),1)]),t("div",ct,[t("div",null,[L(" Target Pcs "),t("div",null,[n(N,{readonly:"",outlined:"",type:"number",dense:"",label:((u=r.value)==null?void 0:u.target)||0,style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["label"])])]),t("div",null,[L(" Actual Target "),t("div",null,[n(N,{readonly:"",outlined:"",dense:"",label:a.actual_target,style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),t("div",ut,[t("div",null,[L(" Short "),t("div",null,[n(N,{readonly:"",outlined:"",type:"number",dense:"",label:a.short,style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["label"])])]),t("div",null,[L(" Over "),t("div",null,[n(N,{readonly:"",outlined:"",dense:"",label:a.over,style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),t("div",_t,[vt,t("div",null,[n(W,{outlined:"",dense:"",modelValue:a.kilo,"onUpdate:modelValue":s[0]||(s[0]=d=>a.kilo=d),type:"number",placeholder:"kgs",style:{width:"210px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])])]),t("div",mt,[a.breads.length?(v(),I("div",pt,[(v(!0),I(A,null,V(a.breads,(d,k)=>(v(),I("div",{key:d.id},[t("div",null,g(d.bread_name),1),t("div",null,[n(W,{outlined:"",modelValue:a.breads[k].value,"onUpdate:modelValue":R=>a.breads[k].value=R,dense:"",type:"number",placeholder:"Pcs",style:{width:"210px","max-width":"300px","min-width":"50px"}},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])):oe("",!0)]),gt,n(z,{outline:"",dense:"",size:"md",icon:"add",label:"Report",class:"text-purple",onClick:x})]),t("div",null,[ht,t("div",bt,[n(N,{readonly:"",outlined:"",style:{width:"400px","max-width":"450px","min-width":"100px"}},{control:i(()=>[n(ie,{dense:"",separator:""},{default:i(()=>[(v(!0),I(A,null,V(_.value,(d,k)=>(v(),B(K,{key:k,class:"q-pa-xs justify-between"},{default:i(()=>[n($,null,{default:i(()=>[n(O,{class:"ingredient-name"},{default:i(()=>[L(g(d.code),1)]),_:2},1024)]),_:2},1024),n($,{side:"",class:"text-right"},{default:i(()=>[t("div",ft,g(d.multipliedQuantity.toFixed(2)),1)]),_:2},1024),n($,{side:"",class:"text-right"},{default:i(()=>[t("div",xt,g(d.unit),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])}}};var kt=se(yt,[["__scopeId","data-v-cdb3a2ce"]]);const wt={key:0,class:"custom-list z-top"},St={__name:"ReportSearchComponent",setup(e){const b=M(),m=G(""),r=Fe(),w=f(()=>r.recipes),h=async()=>{r.searchRecipe(m.value)},a=c=>{b.setRecipe(c),m.value=""},S=c=>c?c.split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1).toLowerCase()).join(" "):"";return console.log("recipes",w.value),(c,x)=>(v(),B(W,{modelValue:m.value,"onUpdate:modelValue":[x[0]||(x[0]=p=>m.value=p),h],debounce:"1000",outlined:"",rounded:"",placeholder:"Search product",dense:""},{append:i(()=>[t("div",null,[n(H,{name:"search"})])]),default:i(()=>[m.value?(v(),I("div",wt,[n(X,null,{default:i(()=>[n(ie,{separator:""},{default:i(()=>{var p;return[(p=w.value)!=null&&p.length?(v(!0),I(A,{key:1},V(w.value,_=>(v(),B(K,{onClick:l=>a(_),key:_.id,clickable:""},{default:i(()=>[n($,null,{default:i(()=>[n(O,null,{default:i(()=>[L(g(S(_.name)),1)]),_:2},1024)]),_:2},1024),n($,null,{default:i(()=>[n(O,{side:""},{default:i(()=>[L(g(_.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(v(),B(K,{key:0},{default:i(()=>[L(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):oe("",!0)]),_:1},8,["modelValue"]))}},It={class:"text-h6 text-dark row justify-between"},qt=t("div",null," Bakers Report ",-1),Rt={class:"row"},Ct={class:"q-gutter-y-md"},Lt={class:"q-gutter-y-md"},Et={__name:"ReportIdCreatePage",setup(e){const b=je(),m=M(),r=f(()=>m.recipes);console.log("report",r);const w=()=>{m.clearData(),b.push("/branch/baker/report")};return(h,a)=>{const S=Ae("BakersReportSearch");return v(),I("div",null,[n(X,{flat:""},{default:i(()=>[n(j,null,{default:i(()=>[t("div",It,[t("div",null,[n(z,{outline:"",flat:"",icon:"arrow_back",onClick:w})]),n(Ne),qt])]),_:1}),n(j,null,{default:i(()=>[t("div",Rt,[n(S)])]),_:1}),n(j,null,{default:i(()=>[t("div",null,[n(St)]),t("div",Ct,[t("div",null,[n(kt)])])]),_:1}),n(j,null,{default:i(()=>[t("div",Lt,[t("div",null,[n(it)])])]),_:1})]),_:1})])}}};export{Et as default};
