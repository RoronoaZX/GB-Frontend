import{o as c,c as D,M as V,r as g,a2 as u,e as s,w as d,Q as z,I as Q,J as e,_ as l,$ as k,a0 as U,a3 as q,a4 as M,bc as x,a1 as j,O as P,R as O,h as S,u as K,z as E,L as A,bb as T,K as J}from"./index.cf74f808.js";import{_ as Y}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as G}from"./QBadge.5ee8a918.js";import{Q as F}from"./QTd.9b50171d.js";import{Q as H}from"./QTable.3c1f35b5.js";import{Q as W}from"./QBanner.b4888927.js";import{u as X}from"./baker-report.29876d34.js";import{Q as Z}from"./QChip.cf478a66.js";import{q as I}from"./date.e6fa61bc.js";import"./QVirtualScroll.011489da.js";import"./QList.a522cec6.js";import"./use-virtual-scroll.8c6bacd4.js";import"./QSelect.5385bc52.js";import"./QMenu.cfaad80a.js";import"./selection.6756477b.js";import"./axios.0dd0a2e8.js";const ee={};function te(t,f){return c(),D(V,{class:"q-pa-sm",color:"red-6",dense:"",elevated:"",icon:"add_circle",label:"Create Report",to:"/branch/baker/create_report"})}var ae=Y(ee,[["render",te]]);const p=t=>(P("data-v-29948d6e"),t=t(),O(),t),re={class:"text-h6 text-weight-regular"},se={class:"row justify-between"},oe={class:"section-content"},ie={class:"row q-gutter-x-sm"},ne=p(()=>e("div",{class:"text-subtitle2"},"Date:",-1)),le={class:"text-body1 text-weight-light"},ce={class:"row q-gutter-x-sm"},de=p(()=>e("div",{class:"text-subtitle2"},"Branch:",-1)),ue={class:"text-body1 text-weight-light"},_e={class:"row q-gutter-x-sm"},pe=p(()=>e("div",{class:"text-subtitle2"},"Baker:",-1)),me={class:"text-body1 text-weight-light"},ve={class:"row q-mt-sm item-start q-gutter-x-xl"},he={class:"row q-gutter-x-sm text-overline"},ge=p(()=>e("div",null,"Kilo:",-1)),fe={class:"text-weight-light"},be={class:"row q-gutter-x-sm text-overline"},we=p(()=>e("div",null,"Over:",-1)),ye={class:"text-weight-light"},xe={class:"row q-gutter-x-sm text-overline"},ke=p(()=>e("div",null,"Short:",-1)),Ce={class:"text-weight-light"},Re={class:"row q-gutter-x-sm text-overline"},qe=p(()=>e("div",null,"Actual Target:",-1)),De={class:"text-weight-light"},Qe={class:"row justify-between"},$e={key:0,class:"report-section"},Be=p(()=>e("div",{class:"section-title",align:"center"},"Ingredients",-1)),Le={class:"row q-gutter-md"},Me={class:""},Se={key:1,class:"report-section"},Ve=p(()=>e("div",{class:"section-title",align:"center"},"Breads",-1)),Ie={class:"row q-gutter-md"},Ye={key:2,class:"report-section"},Ne=p(()=>e("div",{class:"section-title"},"Fillings",-1)),Te={__name:"ReportView",props:{report:{type:Object,required:!0}},setup(t){console.log("bakerView",t.report);const m=g(!1),C=a=>a.charAt(0).toUpperCase()+a.slice(1).toLowerCase(),$=a=>a?a.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" "):"",b=a=>{const o=y=>y?y.charAt(0).toUpperCase()+y.slice(1).toLowerCase():"",i=a.firstname?o(a.firstname):"No Firstname",B=a.middlename?o(a.middlename).charAt(0)+".":"",L=a.lastname?o(a.lastname):"No Lastname";return`${i} ${B} ${L}`.trim()},v=a=>{switch(a){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},h=()=>{m.value=!0},w=a=>I.formatDate(a,"MMMM D, YYYY"),R=a=>{if(a>=1e3){const o=a/1e3;return`${o} ${o===1?"kg":"kgs"}`}return`${a} grams`};return(a,o)=>(c(),u(q,null,[s(V,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:h}),s(j,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=i=>m.value=i),class:"report-dialog"},{default:d(()=>[s(z,{class:"report-card"},{default:d(()=>[s(Q,{class:"report-header"},{default:d(()=>[e("div",re,l($(t.report.branch_recipe.recipe.name))+" - "+l(t.report.recipe_category),1),s(V,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:o[0]||(o[0]=i=>m.value=!1)})]),_:1}),s(Q,null,{default:d(()=>[e("div",se,[e("div",null,[e("div",oe,[e("div",ie,[ne,e("div",le,l(w(t.report.created_at)),1)]),e("div",ce,[de,e("div",ue,l($(t.report.branch.name)),1)]),e("div",_e,[pe,e("div",me,l(b(t.report.user.employee)),1)])])]),e("div",null,[s(Z,{square:"",color:v(t.report.status),"text-color":"white"},{default:d(()=>[k(l(C(t.report.status)),1)]),_:1},8,["color"])])]),e("div",ve,[e("div",he,[ge,e("div",fe,l(t.report.kilo),1)]),e("div",be,[we,e("div",ye,l(t.report.over),1)]),e("div",xe,[ke,e("div",Ce,l(t.report.short),1)]),e("div",Re,[qe,e("div",De,l(t.report.actual_target),1)])]),s(U,{class:"q-my-md"}),e("div",Qe,[t.report.ingredient_bakers_reports&&t.report.ingredient_bakers_reports.length?(c(),u("div",$e,[Be,e("ul",null,[(c(!0),u(q,null,M(t.report.ingredient_bakers_reports,i=>(c(),u("div",{key:i.id},[e("div",Le,[e("div",Me,l(i.ingredients.code),1),e("div",null,"- "+l(R(i.quantity)),1)])]))),128))])])):x("",!0),t.report.bread_bakers_reports&&t.report.bread_bakers_reports.length?(c(),u("div",Se,[Ve,e("ul",null,[(c(!0),u(q,null,M(t.report.bread_bakers_reports,i=>(c(),u("div",{key:i.id},[e("div",Ie,[e("div",null,l(i.bread.name),1),e("div",null,"- "+l(i.bread_production)+" pcs",1)])]))),128))])])):x("",!0),t.report.filling_bakers_reports&&t.report.filling_bakers_reports.length?(c(),u("div",Ye,[Ne,e("ul",null,[(c(!0),u(q,null,M(t.report.filling_bakers_reports,i=>(c(),u("li",{key:i.id},[e("div",null,l(i.bread.name),1),k(" - "+l(i.filling_production)+" pcs ",1)]))),128))])])):x("",!0)])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Fe=Y(Te,[["__scopeId","data-v-29948d6e"]]);const ze={class:"q-mt-sm q-gutter-md"},Ae={class:"table-container"},Ue={key:0,class:"loading-overlay row justify-center items-center"},je={key:1,class:"q-pa-md q-gutter-md row justify-center"},Pe={__name:"ReportTable",setup(t){var N;const f=g({rowsPerPage:0}),m=X(),C=S(()=>m.reportToView),b=((N=S(()=>m.user).value)==null?void 0:N.data.id)||"",v=g(""),h=g(!0),w=g(!1),R=g(!1);K(v,async r=>{w.value=!0,await new Promise(n=>setTimeout(n,1e3)),w.value=!1,R.value=!h.value&&o.value.length===0,console.log("Filtered Rows:",o.value)}),E(async()=>{console.log("props.branchId in onMounted:",b),b&&await a(b)});const a=async r=>{h.value=!0,await m.fetchBakerReport(r),h.value=!1},o=S(()=>{if(!v.value)return C.value;const r=v.value.toLowerCase();return C.value.filter(n=>n.name&&n.name.toLowerCase().includes(r)||n.created_at&&I.formatDate(n.created_at,"MMMM D, YYYY").toLowerCase().includes(r)||n.recipe&&n.recipe.name&&n.recipe.name.toLowerCase().includes(r)||n.recipe&&n.recipe.category&&n.recipe.category.toLowerCase().includes(r))}),B=[{name:"date",align:"left",label:"Date",field:"created_at",format:r=>I.formatDate(r,"MMMM D, YYYY"),sortable:!0},{name:"name",label:"Reports Name",align:"center",field:r=>r.branch_recipe&&r.branch_recipe.recipe?{name:r.branch_recipe.recipe.name,category:r.branch_recipe.recipe.category}:{name:"N/A",category:"N/A"},format:r=>`${r.name} (${r.category})`,sortable:!0},{name:"status",align:"center",label:"Status",field:"status"},{name:"view",align:"right",label:"View",field:"view"}],L=r=>{switch(r){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},y=r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase();return(r,n)=>(c(),u("div",ze,[e("div",null,[s(J,{rounded:"",outlined:"",dense:"",debounce:"300",modelValue:v.value,"onUpdate:modelValue":n[0]||(n[0]=_=>v.value=_),placeholder:"Search",style:{width:"500px","max-width":"1500px","min-width":"100px"}},{append:d(()=>[w.value?(c(),D(T,{key:1})):(c(),D(A,{key:0,name:"search"}))]),_:1},8,["modelValue"])]),e("div",Ae,[s(H,{class:"sticky-header",filter:v.value,flat:"",columns:B,rows:o.value,"row-key":"name","virtual-scroll-sticky-size-start":48,"virtual-scroll":"",pagination:f.value,"onUpdate:pagination":n[1]||(n[1]=_=>f.value=_),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"900px","max-height":"1000px","min-height":"none"}},{"body-cell-status":d(_=>[s(F,{key:"name",props:_},{default:d(()=>[s(G,{outlined:"",color:L(_.row.status)},{default:d(()=>[k(l(y(_.row.status)),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-view":d(_=>[s(F,{props:_},{default:d(()=>[e("div",null,[s(Fe,{report:_.row},null,8,["report"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]),h.value?(c(),u("div",Ue,[s(T,{size:"50px"})])):x("",!0),R.value?(c(),u("div",je,[s(W,{class:"bg-grey-1",dense:""},{default:d(()=>[k(" No data available ")]),_:1})])):x("",!0)])]))}};var Oe=Y(Pe,[["__scopeId","data-v-4476fda1"]]);const Ke={class:"text-h6 text-white"},Ee={class:"q-gutter-y-lg"},Je={align:"right"},ut={__name:"ReportPage",setup(t){return(f,m)=>(c(),D(z,{flat:""},{default:d(()=>[s(Q,{style:{"background-color":"#ef4444"}},{default:d(()=>[e("div",Ke,[s(A,{name:"fa-solid fa-layer-group"}),k(" Report ")])]),_:1}),s(Q,null,{default:d(()=>[e("div",Ee,[e("div",Je,[s(ae)]),e("div",null,[s(Oe)])])]),_:1})]),_:1}))}};export{ut as default};
