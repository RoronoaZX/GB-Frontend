import{bd as G,c as J,r as c,t as W,o as p,a2 as R,f as e,M as h,w as a,Q as $,I as f,ad as L,a0 as S,J as t,K as x,$ as v,a3 as N,a4 as K,e as k,_ as z,aI as j,a1 as P,O as H,R as X,u as Y,L as B,aJ as Z}from"./index.f9204663.js";import{Q as ee}from"./QSpace.e6f60345.js";import{b as q}from"./use-virtual-scroll.6cb0d38e.js";import{Q as ae,a as M,b as y}from"./QList.9266f0ea.js";import{Q as D}from"./QSelect.7fad6eea.js";import{C as T}from"./ClosePopup.f4808119.js";import{u as le}from"./warehouse-rawMaterials.760d7de8.js";import{_ as te}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as se}from"./QChip.1e0b2b43.js";import{Q as oe}from"./QTd.c919a918.js";import{Q as ne}from"./QTable.bf0a912b.js";import"./QMenu.29311ca7.js";import"./selection.106a4db1.js";import"./axios.f9d7066b.js";import"./raw-material.86a34ed3.js";import"./QVirtualScroll.aec25fa2.js";const g=_=>(H("data-v-7d1696f8"),_=_(),X(),_),re=g(()=>t("div",{class:"text-h6"},"Add Supply",-1)),ie=g(()=>t("div",{class:"q-my-sm"},"Supplier's Company Name",-1)),ue=g(()=>t("div",{class:"q-my-sm"},"Supplier's Name",-1)),de={class:"q-mt-md q-gutter-y-sm"},me={class:"q-my-md"},ce=g(()=>t("div",{class:"q-my-sm"},"Raw Materials Name",-1)),pe={class:"row q-gutter-x-sm q-gutter-y-lg"},_e=g(()=>t("div",{class:"q-my-sm",align:"center"},"Amount",-1)),fe=g(()=>t("div",{class:"q-my-sm",align:"center"},"Unit",-1)),ve={class:"q-mt-sm"},ge={__name:"WarehouseIngredientsCreateSupply",setup(_){var A,U;G();const r=le(),d=J(()=>r.user);console.log("userData",d.value);const b=((U=(A=d.value)==null?void 0:A.employee)==null?void 0:U.warehouse_id)||"";console.log("warehouseId",b);const w=c(!1),I=()=>{w.value=!0},i=c(!1),m=c([]),n=c([]),Q=W({name:"",quantity:"",suffix:""}),F=[{label:"Sack (25 kg each)",value:"sack"},{label:"Kilo",value:"kilo"},{label:"Gram",value:"gram"}],V=c(n.value);(async()=>{try{const o=b;console.log("warehouse_id",o);const s=await r.fetchWarehouseRawMaterials(o);i.value=!1,n.value=r.warehouseRawMaterials.map(l=>({label:l.name,value:l.id,suffix:l.unit}))}catch(o){console.error("Error fetching warehouse raw materials:",o)}})();const O=(o,s)=>{s(()=>{if(o==="")V.value=n.value;else{const l=o.toLowerCase();V.value=n.value.filter(C=>C.label.toLowerCase().includes(l))}})},E=o=>o?o.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" "):"",u=W({companyName:"",supplierName:"",ingredientName:"",ingredientAmount:"",unit:null});return(o,s)=>(p(),R(N,null,[e(h,{class:"q-pa-sm",color:"red",dense:"",elevated:"",icon:"add_circle",label:"Add Supply",onClick:I}),e(P,{modelValue:w.value,"onUpdate:modelValue":s[5]||(s[5]=l=>w.value=l)},{default:a(()=>[e($,{class:"my-card",style:{width:"900px"}},{default:a(()=>[e(f,{class:"row items-center"},{default:a(()=>[re,e(ee),L(e(h,{icon:"close",flat:"",dense:"",round:""},null,512),[[T]])]),_:1}),e(S),e(f,{class:"q-my-md q-mx-sm q-gutter-y-sm"},{default:a(()=>[t("div",null,[ie,e(x,{modelValue:u.companyName,"onUpdate:modelValue":s[0]||(s[0]=l=>u.companyName=l),outlined:"",dense:""},null,8,["modelValue"])]),t("div",null,[ue,e(x,{modelValue:u.supplierName,"onUpdate:modelValue":s[1]||(s[1]=l=>u.supplierName=l),outlined:"",dense:""},null,8,["modelValue"])])]),_:1}),e(S),e(f,null,{default:a(()=>[t("div",de,[t("div",null,[e(ae,{dense:"",separator:"",class:"box"},{default:a(()=>[e(M,null,{default:a(()=>[e(y,null,{default:a(()=>[e(q,{class:"text-overline"},{default:a(()=>[v("Raw Materials Name")]),_:1})]),_:1}),e(y,null,{default:a(()=>[e(q,{class:"text-overline"},{default:a(()=>[v("Quantity")]),_:1})]),_:1}),e(y,{side:""})]),_:1}),(p(!0),R(N,null,K(m.value,(l,C)=>(p(),k(M,{key:C},{default:a(()=>[e(y,null,{default:a(()=>[e(q,{class:"text-caption"},{default:a(()=>[v(z(E(l.label)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1}),e(f,null,{default:a(()=>[t("div",me,[ce,e(D,{modelValue:Q.name,"onUpdate:modelValue":s[2]||(s[2]=l=>Q.name=l),debounce:"3000",outlined:"","chips-color":"primary",options:V.value,dense:"",label:"Raw Materials",behavior:"menu","use-input":"",suffix:Q.suffix,"hide-dropdown-icon":"",onFilter:O},{"no-option":a(()=>[e(M,null,{default:a(()=>[e(y,{class:"text-grey"},{default:a(()=>[v(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","suffix"])]),t("div",pe,[t("div",null,[_e,e(x,{modelValue:u.ingredientAmount,"onUpdate:modelValue":s[3]||(s[3]=l=>u.ingredientAmount=l),type:"number",outlined:"",dense:"",style:{width:"300px","max-width":"250px","min-width":"none"}},null,8,["modelValue"])]),t("div",null,[fe,e(D,{modelValue:u.unit,"onUpdate:modelValue":s[4]||(s[4]=l=>u.unit=l),options:F,outlined:"",behavior:"menu",dense:"",style:{width:"300px","max-width":"250px","min-width":"none"}},null,8,["modelValue"])])]),t("div",ve,[e(h,{size:"sm",outline:"",dense:"",icon:"add",color:"purple"})])]),_:1}),e(S),e(j,{class:"row q-ma-md",align:"right"},{default:a(()=>[L(e(h,{class:"glossy",color:"grey-9",label:"Cancel"},null,512),[[T]]),e(h,{class:"glossy",color:"teal",label:"Create"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var we=te(ge,[["__scopeId","data-v-7d1696f8"]]);const he={__name:"WarehouseIngredientsTable",setup(_){const r=c(""),d=c(!1);Y(r,()=>{d.value=!0,setTimeout(()=>{d.value=!1})});const b=[{name:"name",label:"Ingredients Name",align:"center",field:i=>i.name,format:i=>`${i}`,sortable:!0},{name:"availableStocks",align:"center",label:"Available Stocks",field:"availableStocks",sortable:!0}],w=[{name:"Ingredients 1",availableStocks:"50 kgs"},{name:"Ingredients 2",availableStocks:"70 kgs"},{name:"Ingredients 3",availableStocks:"20 g"},{name:"Ingredients 4",availableStocks:"50 kgs"},{name:"Ingredients 5",availableStocks:"30 kgs"},{name:"Ingredients 5",availableStocks:"10 kgs"}],I=i=>{const m=parseInt(i);return m<=20?"bg-red":m<=50?"bg-warning":"bg-primary"};return(i,m)=>(p(),R(N,null,[t("div",null,[e(x,{rounded:"",outlined:"",dense:"",debounce:"300",modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=n=>r.value=n),placeholder:"Search",style:{width:"500px","max-width":"1500px","min-width":"100px"}},{append:a(()=>[d.value?(p(),k(B,{key:1,thickness:2,color:"teal",size:"1em"})):(p(),k(B,{key:0,name:"search"}))]),_:1},8,["modelValue"])]),t("div",null,[e(ne,{filter:r.value,flat:"",columns:b,rows:w,"row-key":"name","virtual-scroll":""},{"body-cell-availableStocks":a(n=>[e(oe,{props:n},{default:a(()=>[e(se,{square:"",class:Z(["text-white",I(n.row.availableStocks)])},{default:a(()=>[v(z(n.row.availableStocks),1)]),_:2},1032,["class"])]),_:2},1032,["props"])]),_:1},8,["filter"])])],64))}},ye={align:"right"},De={__name:"WarehouseIngredients",setup(_){return(r,d)=>(p(),k($,{flat:""},{default:a(()=>[e(f,{class:"text-h6"},{default:a(()=>[v(" Ingredients ")]),_:1}),e(S),e(f,{class:"q-gutter-md"},{default:a(()=>[t("div",ye,[e(we)]),t("div",null,[e(he)])]),_:1})]),_:1}))}};export{De as default};
