import{d as m,r as u,N as o,P as c}from"./index.a8c32b7d.js";import{api as n}from"./axios.b0e603be.js";const R=m("products",()=>{const p=u(null),s=u([]),i=u([]),g=async e=>{const t=await n.get("/api/search-products",{params:{keyword:e}});s.value=t.data,console.log("searched products",t.data)},l=async()=>{try{const e=await n.get("/api/products");s.value=e.data,console.log("===================================="),console.log("products.value ",s.value),console.log("====================================")}catch{o.create({type:"negative",message:"Failed to fetch product",timeout:1e3})}};return{product:p,products:s,breads:i,searchProducts:g,fetchProducts:l,createProducts:async e=>{var t,a;try{c.show();const r=await n.post("/api/products",e);console.log("data",r.data),l(),o.create({type:"positive",message:"Product created successfully"})}catch(r){console.log("erroe",r),r.response.data.message==="The name has already been taken."?o.create({type:"warning",icon:"warning",message:"The name has already been taken.",setTimeout:5e3}):o.create({type:"negative",icon:"error",message:((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.message)||"The name has already been taken.",setTimeout:5e3})}finally{c.hide()}},updateProducts:async(e,t)=>{try{c.show();const a=await n.put(`/api/products/${e}`,t);console.log("response product",a.data);const r=a.data,d=s.value.findIndex(y=>y.id===e);d!==-1&&(s.value[d]={...s.value[d],...r}),o.create({type:"positive",message:"Product updated successfully",timeout:1e3})}catch(a){console.log(a),a.response.data.message==="The name has already been taken."?o.create({type:"warning",icon:"warning",message:a.response.data.message||"ERROR",timeout:1e3}):o.create({type:"negative",icon:"error",message:a.response.data.message||"ERROR"})}finally{c.hide()}},deleteProducts:async e=>{c.show(),await n.delete(`/api/products/${e}`),s.value=s.value.filter(t=>t.id!==e),o.create({type:"negative",icon:"warning",message:"Product successfully deleted",timeout:1e3}),c.hide()},fetchProductsByCategory:async e=>{const t=await n.get("/api/bread-products",e);i.value=t.data}}});export{R as u};
