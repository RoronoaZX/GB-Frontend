import{bd as ye,c as I,r as V,t as He,o as w,a2 as S,f as e,M as D,w as t,Q as F,I as R,ad as ne,J as a,K as j,L as oe,e as B,$ as P,a3 as H,a4 as pe,_ as y,bc as Ke,aI as De,a1 as Y,a0 as Ye,N as he,O as X,R as Z,z as ke,u as Ae,ba as Re,aJ as mt,be as Q,d as pt,P as je,aH as _t,H as ft}from"./index.66c8cdd5.js";import{Q as qe}from"./QSpace.214f09cc.js";import{Q as Ie,a as ie,b as Le,c as de}from"./QTabPanels.d2d9d30e.js";import{Q as gt}from"./QPage.f4a22cdb.js";import{Q as Ne,a as ge,b as K}from"./QList.e2ab584f.js";import{b as ae}from"./use-virtual-scroll.eb6c9391.js";import{C as le}from"./ClosePopup.7d7f991b.js";import{u as Xe}from"./branch-product.af039f52.js";import{u as nt}from"./product.4104981b.js";import{Q as Ge}from"./QSpinnerDots.95e4d7c1.js";import{Q as E,a as ue}from"./QTable.a3beda74.js";import{Q as re}from"./QBadge.d1720d45.js";import{Q as se}from"./QTooltip.4ca43be1.js";import{Q as Ve}from"./QPopupEdit.53cf8171.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import{api as we}from"./axios.39b861ff.js";import{u as Ze}from"./branch-rawMaterials.e3032491.js";import{u as vt}from"./raw-material.49f785e1.js";import{u as $e}from"./use-dialog-plugin-component.0cdbbb8b.js";import{Q as ht}from"./QMenu.aa58129a.js";import{q as ce}from"./date.1411c63d.js";import{u as Se}from"./use-quasar.54c83852.js";import{p as Qe,v as lt}from"./vfs_fontes.3eb8cb31.js";import{Q as Ue}from"./QScrollArea.c64cf3b7.js";import{u as Te,a as Me,b as Je}from"./other-product.aadda092.js";import{Q as We}from"./QSelect.aca84982.js";import{u as yt}from"./recipe.439005d9.js";import{u as Ee}from"./branch-recipe.18ab864d.js";import"./QResizeObserver.cf4f5ed2.js";import"./use-panel.c2ad780c.js";import"./touch.9135741d.js";import"./selection.246f1f5d.js";import"./QVirtualScroll.c404eac0.js";import"./QScrollObserver.daa60c53.js";import"./TouchPan.8631072b.js";import"./QChip.f786a655.js";const bt=a("div",{class:"text-h6"},"Create Branch Product",-1),wt={class:"q-mb-lg"},xt={key:0,class:"custom-list z-top"},kt=a("div",null,"Product Name",-1),$t=a("div",null,"Category",-1),Ct={class:"row justify-between"},Rt=a("div",null,"Beginnings",-1),Pt=a("div",null,"Total Quantity",-1),Vt=a("div",null,"Price",-1),St={__name:"ProductCreate",setup(o){const h=ye(),x=nt(),$=I(()=>x.products),g=Xe(),u=V(""),b=async()=>{x.searchProducts(u.value)},s=I(()=>m.price!==0&&m.beginnings!==0&&m.total_quantity!==0),_=V(!1),p=()=>{_.value=!0},l=()=>{f(),_.value=!1},c=r=>r?r.split(" ").map(d=>d.charAt(0).toUpperCase()+d.slice(1).toLowerCase()).join(" "):"",n=r=>{m.product_id=r.id,m.product_name=r.name,m.category=r.category,u.value=""},m=He({product_id:"",product_name:"",price:0,beginnings:0,total_quantity:0,branches_id:h.params.branch_id}),f=()=>{m.product_id="",m.product_name="",m.category="",m.price=0,m.beginnings=0,m.total_quantity=0},i=async()=>{try{const{product_name:r,...d}=m;await g.createBranchProducts(d),console.log("data to send",d),f(),_.value=!1}catch(r){console.log(r)}};return(r,d)=>(w(),S(H,null,[e(D,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Product",onClick:p}),e(Y,{modelValue:_.value,"onUpdate:modelValue":d[6]||(d[6]=k=>_.value=k),persistent:""},{default:t(()=>[e(F,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(R,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[bt,e(qe),ne(e(D,{icon:"close",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(R,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",wt,[e(j,{modelValue:u.value,"onUpdate:modelValue":[d[0]||(d[0]=k=>u.value=k),b],debounce:"1000",outlined:"",rounded:"",placeholder:"Search product",dense:""},{append:t(()=>[a("div",null,[e(oe,{name:"search"})])]),default:t(()=>[u.value?(w(),S("div",xt,[e(F,null,{default:t(()=>[e(Ne,{separator:""},{default:t(()=>{var k;return[(k=$.value)!=null&&k.length?(w(!0),S(H,{key:1},pe($.value,C=>(w(),B(ge,{onClick:U=>n(C),key:C.id,clickable:""},{default:t(()=>[e(K,null,{default:t(()=>[e(ae,null,{default:t(()=>[P(y(c(C.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(w(),B(ge,{key:0},{default:t(()=>[P(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ke("",!0)]),_:1},8,["modelValue"])]),a("div",null,[kt,e(j,{modelValue:m.product_name,"onUpdate:modelValue":d[1]||(d[1]=k=>m.product_name=k),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[$t,e(j,{modelValue:m.category,"onUpdate:modelValue":d[2]||(d[2]=k=>m.category=k),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",Ct,[a("div",null,[Rt,e(j,{modelValue:m.beginnings,"onUpdate:modelValue":d[3]||(d[3]=k=>m.beginnings=k),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[Pt,e(j,{modelValue:m.total_quantity,"onUpdate:modelValue":d[4]||(d[4]=k=>m.total_quantity=k),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])]),a("div",null,[Vt,e(j,{modelValue:m.price,"onUpdate:modelValue":d[5]||(d[5]=k=>m.price=k),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])]),_:1}),e(De,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(D,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:l}),e(D,{class:"glossy",color:"teal",label:"Create",onClick:i,disable:!s.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const ot=o=>(X("data-v-196482e9"),o=o(),Z(),o),Dt=ot(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),qt=ot(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),Nt={__name:"ProductDelete",props:["delete"],setup(o){const h=Xe(),x=o;console.log("delte",x.delete.row.id);const $=async()=>{try{await h.deleteBranchProducts(x.delete.row.id),he.create({type:"negative",icon:"warning",message:"Branch product successfully deleted",timeout:1e3,position:"top"}),g.value=!1}catch(b){console.error(b.message)}},g=V(!1),u=()=>{console.log("ID",x.delete.row.id),g.value=!0};return(b,s)=>(w(),S(H,null,[e(D,{onClick:u,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"",align:"center"},{default:t(()=>[e(se,{class:"bg-negative",delay:200},{default:t(()=>[P("Delete")]),_:1})]),_:1}),e(Y,{modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=_=>g.value=_)},{default:t(()=>[e(F,null,{default:t(()=>[e(R,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[Dt,qt]),_:1}),e(Ye,{class:"q-mb-md"}),e(R,null,{default:t(()=>[e(De,{align:"right",class:"q-pt-none"},{default:t(()=>[ne(e(D,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[le]]),e(D,{dense:"",label:"Delete",color:"negative",onClick:$,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ut=G(Nt,[["__scopeId","data-v-196482e9"]]);const Tt=o=>(X("data-v-c74b6072"),o=o(),Z(),o),At={class:"row justify-between"},Bt={class:"q-my-sm"},Ft={key:0,class:"spinner-wrapper"},It={key:1},Lt={key:0,class:"data-error"},Mt=Tt(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),zt={key:1},Ht={__name:"ProductTable",setup(o){const x=ye().params.branch_id,$=Xe(),g=V(""),u=V(!0),b=V([]),s=V(!1),_=V({rowsPerPage:0}),p=I(()=>$.branchProducts);console.log("branchssdfrer",p.value);const l=I(()=>g.value?p.value.filter(C=>C.name.toLowerCase().includes(g.value.toLowerCase())):p.value),c=C=>C?C.split(" ").map(U=>U.charAt(0).toUpperCase()+U.slice(1).toLowerCase()).join(" "):"";ke(async()=>{x&&await n(x)});const n=async C=>{try{u.value=!0;const U=await $.fetchBranchProducts(C);p.value=U,p.value.length||(s.value=!0),console.log("Branch product",p.value)}catch(U){console.log("Error fetching branch product:",U),s.value=!0}finally{u.value=!1}};Ae(g,async C=>{u.value=!0,await new Promise(U=>setTimeout(U,1e3)),u.value=!1,s.value=l.value.length===0});async function m(C,U){try{const N=await we.put("/api/update-branch-products/"+C.id,{price:parseInt(U)});if(N.status===200){const A=b.value.findIndex(v=>v.id==C.id);b.value[A]=parseInt(U),he.create({type:"positive",message:N.data.message,timout:1e3,position:"top"})}}catch(N){console.error("Error updating price:",N)}}async function f(C,U){try{const N=await we.put("/api/update-branch-products-beginnings/"+C.id,{beginnings:parseInt(U)});if(N.status===200){const A=b.value.findIndex(v=>v.id==C.id);b.value[A]=parseInt(U),he.create({type:"positive",message:N.data.message,timout:1e3,position:"top"})}}catch(N){console.error("Error updating price:",N)}}async function i(C,U){try{const N=await we.put("/api/update-branch-products-total-quantity/"+C.id,{total_quantity:parseInt(U)});if(N.status===200){const A=b.value.findIndex(v=>v.id==C.id);b.value[A]=parseInt(U),he.create({type:"positive",message:N.data.message,timout:1e3,position:"top"})}}catch(N){console.error("Error updating price:",N)}}const r=C=>{switch(C){case"Bread":return"brown";case"Selecta":return"red-6";case"Softdrinks":return"accent";default:return"grey"}},d=C=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(C),k=[{name:"name",label:"Product Name",align:"center",field:C=>C.product.name,format:C=>`${C}`,sortable:!0},{name:"category",align:"center",label:"Category",field:"category",sortable:!0},{name:"price",align:"center",label:"Price",field:C=>d(C),sortable:!0},{name:"beginnings",align:"center",label:"Beginnings",field:"beginnings",format:C=>`${C} pcs`,sortable:!0},{name:"total_quantity",align:"center",label:"Quantity",field:"total_quantity",format:C=>`${C} pcs`,sortable:!0},{name:"action",align:"center",label:"Action",field:"action",sortable:!0}];return(C,U)=>(w(),S(H,null,[a("div",At,[a("div",null,[e(j,{class:"q-pb-lg q-pl-md",modelValue:g.value,"onUpdate:modelValue":U[0]||(U[0]=N=>g.value=N),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"1500px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(oe,{name:"search"})]),_:1},8,["modelValue"])]),a("div",Bt,[e(St)])]),u.value?(w(),S("div",Ft,[e(Ge,{size:"50px",color:"primary"})])):(w(),S("div",It,[l.value.length===0?(w(),S("div",Lt,[e(oe,{name:"warning",color:"warning",size:"4em"}),Mt])):(w(),B(ue,{key:1,class:"table-container sticky-header",filter:g.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:k,rows:l.value,"row-key":"name","virtual-scroll":"",pagination:_.value,"onUpdate:pagination":U[1]||(U[1]=N=>_.value=N),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"}},{"body-cell-name":t(N=>[e(E,{key:"name",props:N},{default:t(()=>{var A;return[P(y((A=N.row.product)!=null&&A.name?c(N.row.product.name):"No data available"),1)]}),_:2},1032,["props"])]),"body-cell-category":t(N=>[e(E,{key:"name",props:N},{default:t(()=>[N.row.category?(w(),B(re,{key:0,color:r(N.row.category)},{default:t(()=>[P(y(N.row.category),1)]),_:2},1032,["color"])):(w(),S("span",zt,"No data available"))]),_:2},1032,["props"])]),"body-cell-price":t(N=>[e(E,{props:N,class:"cursor-pointer"},{default:t(()=>[a("span",null,[P(y(d(N.row.price))+" ",1),e(se,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[P("Edit Price")]),_:1})]),e(Ve,{"onUpdate:modelValue":[A=>m(N.row,A),A=>N.row.price=A],modelValue:N.row.price,"auto-save":""},{default:t(A=>[e(j,{modelValue:A.value,"onUpdate:modelValue":v=>A.value=v,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:Re(A.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(N=>[e(E,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[P(y(N.row.beginnings?N.row.beginnings:"Set Beginnings")+" ",1),e(se,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[P("Edit beginnings")]),_:1})]),e(Ve,{"onUpdate:modelValue":[A=>f(N.row,A),A=>N.row.beginnings=A],modelValue:N.row.beginnings,"auto-save":""},{default:t(A=>[e(j,{modelValue:A.value,"onUpdate:modelValue":v=>A.value=v,dense:"",autofocus:"",counter:"",mask:"#####",onKeyup:Re(A.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-total_quantity":t(N=>[e(E,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[P(y(N.row.total_quantity?N.row.total_quantity:"Set Quantity")+" ",1),e(se,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[P("Edit quantity")]),_:1})]),e(Ve,{"onUpdate:modelValue":[A=>i(N.row,A),A=>N.row.total_quantity=A],modelValue:N.row.total_quantity,"auto-save":""},{default:t(A=>[e(j,{modelValue:A.value,"onUpdate:modelValue":v=>A.value=v,dense:"",autofocus:"",counter:"",mask:"#####",onKeyup:Re(A.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-action":t(N=>[e(E,{class:"q-gutter-x-md",props:N},{default:t(()=>[e(Ut,{delete:N},null,8,["delete"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Ot=G(Ht,[["__scopeId","data-v-c74b6072"]]);const jt={class:"q-gutter-sm"},Qt={__name:"ProductPage",setup(o){return(h,x)=>(w(),S("div",jt,[a("div",null,[e(Ot)])]))}},Et=a("div",{class:"text-h6"},"Create Branch Raw Materials",-1),Kt={class:"q-mb-lg"},Yt={key:0,class:"custom-list z-top"},Gt=a("div",null,"Raw Materials Code",-1),Jt=a("div",null,"Raw Materials Name",-1),Wt=a("div",null,"Category",-1),Xt=a("div",null,"Quantity",-1),Zt={__name:"RawMaterialsCreate",setup(o){const h=ye(),x=vt(),$=I(()=>x.rawMaterials),g=Ze(),u=V(""),b=async()=>{x.searchRawMaterials(u.value)},s=I(()=>n.total_quantity!==""),_=V(!1),p=()=>{_.value=!0},l=()=>{m(),_.value=!1},c=i=>{n.ingredients_id=i.id,n.ingredient_name=i.name,n.ingredient_code=i.code,n.category=i.category,n.unit=i.unit,u.value=""},n=He({ingredients_id:"",ingredient_name:"",ingredient_code:"",total_quantity:"",category:"",unit:"",branch_id:h.params.branch_id}),m=()=>{n.ingredients_id="",n.ingredient_name="",n.ingredient_code="",n.total_quantity="",n.ingredients_id="",n.category="",n.unit=""},f=async()=>{try{const{product_name:i,...r}=n;await g.createBranchRawMaterials(r),console.log("data to send",r),m(),_.value=!1}catch(i){console.log(i)}};return(i,r)=>(w(),S(H,null,[e(D,{outline:"",class:"text-dark q-pa-sm",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Raw Material",onClick:p,style:{background:"#f43f5e"}}),e(Y,{modelValue:_.value,"onUpdate:modelValue":r[5]||(r[5]=d=>_.value=d),persistent:""},{default:t(()=>[e(F,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(R,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[Et,e(qe),ne(e(D,{icon:"close",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(R,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",Kt,[e(j,{modelValue:u.value,"onUpdate:modelValue":[r[0]||(r[0]=d=>u.value=d),b],debounce:"1000",outlined:"",rounded:"",placeholder:"Search Raw Materials",dense:""},{append:t(()=>[a("div",null,[e(oe,{name:"search"})])]),default:t(()=>[u.value?(w(),S("div",Yt,[e(F,null,{default:t(()=>[e(Ne,{separator:""},{default:t(()=>{var d;return[(d=$.value)!=null&&d.length?(w(!0),S(H,{key:1},pe($.value,k=>(w(),B(ge,{onClick:C=>c(k),key:k.id,clickable:""},{default:t(()=>[e(K,null,{default:t(()=>[e(ae,null,{default:t(()=>[P(y(k.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(w(),B(ge,{key:0},{default:t(()=>[P(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ke("",!0)]),_:1},8,["modelValue"])]),a("div",null,[Gt,e(j,{modelValue:n.ingredient_code,"onUpdate:modelValue":r[1]||(r[1]=d=>n.ingredient_code=d),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[Jt,e(j,{modelValue:n.ingredient_name,"onUpdate:modelValue":r[2]||(r[2]=d=>n.ingredient_name=d),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[Wt,e(j,{modelValue:n.category,"onUpdate:modelValue":r[3]||(r[3]=d=>n.category=d),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[Xt,e(j,{modelValue:n.total_quantity,"onUpdate:modelValue":r[4]||(r[4]=d=>n.total_quantity=d),type:"number",outlined:"",suffix:n.unit||"",dense:"",rules:[d=>d&&d.length>0||"Total quantity is required"]},null,8,["modelValue","suffix","rules"])])]),_:1}),e(De,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(D,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:l}),e(D,{class:"glossy",color:"teal",label:"Create",onClick:f,disable:!s.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const st=o=>(X("data-v-17ad5e9f"),o=o(),Z(),o),ea=st(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),ta=st(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),aa={__name:"RawMaterialsTableDelete",props:["delete"],setup(o){const h=Ze(),x=o,$=async()=>{console.log("clickkkd");try{await h.deleteBranchRawMaterials(x.delete.row.id),he.create({type:"negative",icon:"warning",message:`Raw Materials ${x.delete.row.name}  successfully deleted`,timeout:1e3,position:"top"}),g.value=!1}catch(b){console.error(b.message)}},g=V(!1),u=()=>{g.value=!0};return(b,s)=>(w(),S(H,null,[e(D,{onClick:u,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"",align:"center"},{default:t(()=>[e(se,{class:"bg-negative",delay:200},{default:t(()=>[P("Delete")]),_:1})]),_:1}),e(Y,{modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=_=>g.value=_)},{default:t(()=>[e(F,null,{default:t(()=>[e(R,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[ea,ta]),_:1}),e(Ye,{class:"q-mb-md"}),e(R,null,{default:t(()=>[e(De,{align:"right",class:"q-pt-none"},{default:t(()=>[ne(e(D,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[le]]),e(D,{dense:"",label:"Delete",color:"negative",onClick:$,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var na=G(aa,[["__scopeId","data-v-17ad5e9f"]]);const rt=o=>(X("data-v-74a3fea6"),o=o(),Z(),o),la={class:"row justify-between"},oa={class:"q-my-sm"},sa={key:0,class:"spinner-wrapper"},ra={key:1},ia={key:0,class:"data-error"},da=rt(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),ca=rt(()=>a("div",{class:"text-white"},"Edit Available Stocks",-1)),ua={class:"row justify-center q-gutter-x-md"},ma={__name:"RawMaterialsTable",setup(o){const x=ye().params.branch_id,$=Ze(),g=V(""),u=V(!0),b=V([]),s=V(!1),_=V({rowsPerPage:0}),p=I(()=>$.branchRawMaterials),l=I(()=>g.value?p.value.filter(r=>r.name.toLowerCase().includes(g.value.toLowerCase())):p.value);ke(async()=>{console.log("props.branchId in onMounted:",x),x&&await c(x)});const c=async r=>{try{u.value=!0;const d=await $.fetchBranchRawMaterials(r);p.value=d,p.value.length||(s.value=!0),console.log("Branch Raw Materials",p.value)}catch(d){console.log("Error fetching branch product:",d),s.value=!0}finally{u.value=!1}};async function n(r,d){try{const k=await we.put("/api/update-branch-rawMaterials/"+r.id,{total_quantity:parseInt(d)});if(k.status===200){const C=b.value.findIndex(U=>U.id==r.id);b.value[C]=parseInt(d),he.create({type:"positive",message:k.data.message,timout:1e3,position:"top"})}}catch(k){console.error("Error updating price:",k)}}Ae(g,async r=>{u.value=!0,await new Promise(d=>setTimeout(d,1e3)),u.value=!1,s.value=l.value.length===0});const m=r=>{const d=r.total_quantity;if(r.ingredients.unit==="Grams"&&d<1e3)return"bg-red";let C;return d>=1e3?C=d/1e3:C=d,C<5?C<=2?"bg-red":(C<=3,"bg-warning"):"bg-positive"},f=r=>{const d=r.total_quantity,k=r.ingredients.unit;if(d>1e3){const C=(d/1e3).toFixed(2);return C.endsWith(".00")?`${Math.round(d/1e3)} kilos`:`${C} kilos`}else return d>1?`${d} ${k}`:`${d} ${k}`},i=[{name:"code",label:"Raw Materials Code",align:"center",field:r=>{var d,k;return(k=(d=r==null?void 0:r.ingredients)==null?void 0:d.code)!=null?k:"No Code"},format:r=>`${r}`,sortable:!0},{name:"name",label:"Raw Materials Name",align:"center",field:r=>{var d,k;return(k=(d=r==null?void 0:r.ingredients)==null?void 0:d.name)!=null?k:"No Code"},format:r=>`${r}`,sortable:!0},{name:"total_quantity",label:"Available Stocks",align:"center",field:"total_quantity",sortable:!0},{name:"action",label:"Action",align:"center",sortable:!0}];return(r,d)=>(w(),S(H,null,[a("div",la,[a("div",null,[e(j,{class:"q-pb-lg q-pl-md",modelValue:g.value,"onUpdate:modelValue":d[0]||(d[0]=k=>g.value=k),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"5000px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(oe,{name:"search"})]),_:1},8,["modelValue"])]),a("div",oa,[e(Zt)])]),u.value?(w(),S("div",sa,[e(Ge,{size:"50px",color:"primary"})])):(w(),S("div",ra,[l.value.length===0?(w(),S("div",ia,[e(oe,{name:"warning",color:"warning",size:"4em"}),da])):(w(),B(ue,{key:1,class:"table-container sticky-header",filter:g.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:i,rows:l.value,"row-key":"name","virtual-scroll":"",pagination:_.value,"onUpdate:pagination":d[1]||(d[1]=k=>_.value=k),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"340px"}},{"body-cell-total_quantity":t(k=>[e(E,{props:k},{default:t(()=>[e(re,{square:"",class:mt(["text-white cursor-pointer",m(k.row)])},{default:t(()=>[P(y(f(k.row))+" ",1),e(se,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[ca]),_:1}),e(Ve,{"onUpdate:modelValue":[C=>n(k.row,C),C=>k.row.total_quantity=C],modelValue:k.row.total_quantity,"auto-save":""},{default:t(C=>[e(j,{modelValue:C.value,"onUpdate:modelValue":U=>C.value=U,dense:"",suffix:k.row.ingredients.unit,mask:"########",autofocus:"",counter:"",onKeyup:Re(C.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","suffix","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["class"])]),_:2},1032,["props"])]),"body-cell-action":t(k=>[e(E,{props:k},{default:t(()=>[a("div",ua,[e(na,{delete:k},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var pa=G(ma,[["__scopeId","data-v-74a3fea6"]]);const _a={class:"q-gutter-sm"},fa={class:"q-gutter-x-sm"},ga={__name:"RawMaterialsPage",setup(o){return(h,x)=>(w(),S("div",_a,[a("div",fa,[e(re,{label:"Good",class:"text-white",color:"positive"}),e(re,{label:"Warning",class:"text-white",color:"warning"}),e(re,{label:"Danger",class:"text-white",color:"red"})]),a("div",null,[e(pa)])]))}};const va=o=>(X("data-v-2e420de9"),o=o(),Z(),o),ha={class:"text-h6 text-white"},ya=va(()=>a("div",{class:"text-h6",align:"center"},"Bread List",-1)),ba={__name:"BreadView",props:["breadProduction","branchRecipe"],setup(o){const{dialogRef:h,onDialogHide:x,onDialogOK:$,onDialogCancel:g}=$e();console.log("breadReportsaaasss",o.breadProduction);const b=s=>s?s.split(" ").map(_=>_.charAt(0).toUpperCase()+_.slice(1).toLowerCase()).join(" "):"";return(s,_)=>(w(),B(Y,{ref_key:"dialogRef",ref:h,onHide:Q(x)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,{class:"row bg-backgroud text-h6"},{default:t(()=>{var p,l,c,n;return[a("div",ha,y(`${b((l=(p=o.branchRecipe)==null?void 0:p.recipe)==null?void 0:l.name)} - ${(n=(c=o.branchRecipe)==null?void 0:c.recipe)==null?void 0:n.category}`),1),e(qe),a("div",null,[ne((w(),B(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(se,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[P("Close")]),_:1})]),_:1})),[[le]])])]}),_:1}),e(R,null,{default:t(()=>[ya]),_:1}),e(R,null,{default:t(()=>[e(Ne,{dense:"",separator:"",class:"box"},{default:t(()=>[e(ge,null,{default:t(()=>[e(K,null,{default:t(()=>[e(ae,{class:"text-overline"},{default:t(()=>[P("Bread Name")]),_:1})]),_:1}),e(K,{side:""},{default:t(()=>[e(ae,{class:"text-overline text-center"},{default:t(()=>[P("Pieces")]),_:1})]),_:1})]),_:1}),(w(!0),S(H,null,pe(o.breadProduction,(p,l)=>(w(),B(ge,{key:l},{default:t(()=>[e(K,null,{default:t(()=>[e(ae,{class:"text-caption"},{default:t(()=>{var c;return[P(y(b((c=p==null?void 0:p.bread)==null?void 0:c.name)),1)]}),_:2},1024)]),_:2},1024),e(K,{side:""},{default:t(()=>[e(ae,{class:"text-caption text-center"},{default:t(()=>[P(y(`${p==null?void 0:p.bread_production} `),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var wa=G(ba,[["__scopeId","data-v-2e420de9"]]);const xa=o=>(X("data-v-961b0a22"),o=o(),Z(),o),ka={class:"text-h6 text-white"},$a=xa(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Ca={__name:"IngredientsView",props:["ingredientProduction","branchRecipe"],setup(o){const{dialogRef:h,onDialogHide:x,onDialogOK:$,onDialogCancel:g}=$e();console.log("ingredientProduction",o.ingredientProduction);const b=_=>{const p=Number(_.quantity)||0,l=_.unit||"";return p>1e3?`${parseFloat((p/1e3).toFixed(3))} kg`:p>1?`${parseFloat(p.toFixed(3))} ${l}`:`${parseFloat(p.toFixed(3))} ${l}`},s=_=>_?_.split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1).toLowerCase()).join(" "):"";return(_,p)=>(w(),B(Y,{ref_key:"dialogRef",ref:h,onHide:Q(x)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,{class:"row bg-backgroud text-h6"},{default:t(()=>{var l,c,n,m;return[a("div",ka,y(`${s((c=(l=o.branchRecipe)==null?void 0:l.recipe)==null?void 0:c.name)} - ${(m=(n=o.branchRecipe)==null?void 0:n.recipe)==null?void 0:m.category}`),1),e(qe),a("div",null,[ne((w(),B(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(se,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[P("Close")]),_:1})]),_:1})),[[le]])])]}),_:1}),e(R,null,{default:t(()=>[$a]),_:1}),e(R,null,{default:t(()=>[e(Ne,{dense:"",separator:"",class:"box"},{default:t(()=>[e(ge,null,{default:t(()=>[e(K,null,{default:t(()=>[e(ae,{class:"text-overline"},{default:t(()=>[P("Raw Materials Name")]),_:1})]),_:1}),e(K,null,{default:t(()=>[e(ae,{class:"text-overline"},{default:t(()=>[P("Code")]),_:1})]),_:1}),e(K,{side:""},{default:t(()=>[e(ae,{class:"text-overline"},{default:t(()=>[P("Quantity")]),_:1})]),_:1})]),_:1}),(w(!0),S(H,null,pe(o.ingredientProduction,(l,c)=>(w(),B(ge,{key:c},{default:t(()=>[e(K,null,{default:t(()=>[e(ae,{class:"text-caption"},{default:t(()=>[P(y(l.ingredients.name),1)]),_:2},1024)]),_:2},1024),e(K,null,{default:t(()=>[e(ae,{class:"text-caption"},{default:t(()=>[P(y(l.ingredients.code),1)]),_:2},1024)]),_:2},1024),e(K,{side:""},{default:t(()=>[e(ae,{class:"text-caption"},{default:t(()=>[P(y(b(l)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Ra=G(Ca,[["__scopeId","data-v-961b0a22"]]);const it=pt("productions",()=>{const o=V([]),h=V([]);return{productions:o,production:h,fetchAllProduction:async()=>{const u=await we.get("/api/branch-production-report");o.value=u.data.reports},fetchBranchProductions:async u=>{try{const b=await we.get(`/api/branches/${u}/production-report`);o.value=b.data}catch(b){console.log(b)}},updateBakerReport:async(u,b)=>{console.log("baker reports data in store",b),console.log("baker reports id data in store",u),je.show();try{const s=await we.put(`api/update/branch-baker-report/${u}`,b);console.log(s.data)}catch(s){console.error("Error updating baker report:",s)}finally{je.hide()}}}});const dt=o=>(X("data-v-222cab78"),o=o(),Z(),o),Pa={class:"text-h6 text-dark"},Va={class:"row q-gutter-sm"},Sa={class:"row q-mt-sm q-gutter-sm"},Da=dt(()=>a("div",{class:"q-mt-sm"},"Kilo",-1)),qa={class:"q-mt-xl q-gutter-md"},Na={key:0},Ua={class:"q-mx-sm"},Ta=dt(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Aa={__name:"EditBakersReport",props:["bakerReports","sales_report_id"],setup(o){const h=it(),{dialogRef:x,onDialogHide:$}=$e(),g=o;console.log("bakers report",g.bakerReports);const u=He({target:0,actual_target:0,short:0,over:0,kilo:0}),b=I(()=>g.bakerReports.ingredient_bakers_reports.map(f=>{const i=parseFloat(g.bakerReports.kilo)||1,r=parseFloat(u.kilo)||1,k=f.quantity/i*r;return{...f,quantity:k.toFixed(3)}})),s=f=>f?f.split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join(" "):"",_=f=>{const i=Number(f.quantity)||0,r=f.unit||"";return i>1e3?`${parseFloat((i/1e3).toFixed(3))} kg`:i>1?`${parseFloat(i.toFixed(3))} ${r}`:`${parseFloat(i.toFixed(3))} ${r}`},p=f=>{const i=Number(f)||0;return parseFloat(i.toFixed(3)).toString()},l=f=>{const i=Number(f)||0;return parseFloat(i.toFixed(3)).toString()},c=I(()=>g.bakerReports.combined_bakers_reports.reduce((f,i)=>f+(parseFloat(i.bread_production)||0),0)),n=()=>{const f=c.value,i=parseFloat(u.actual_target)||0;f>i?(u.over=f-i,u.short=0):(u.short=i-f,u.over=0)};Ae(()=>g.bakerReports,f=>{f&&(u.target=p(f.target)||0,u.actual_target=f.actual_target||0,u.short=f.short||0,u.over=f.over||0,u.kilo=l(f.kilo)||0)},{immediate:!0}),Ae(()=>u.kilo,()=>{const f=parseFloat(u.kilo)||1,r=(parseFloat(u.target)||0)*f;u.actual_target=p(Math.ceil(r)),n()}),Ae(()=>c.value,()=>n());const m=async()=>{var C,U,N;const f=g.bakerReports.id,i=((N=(U=(C=g.bakerReports)==null?void 0:C.branch_recipe)==null?void 0:U.recipe)==null?void 0:N.category)||null,r=g.bakerReports.status,d=(g==null?void 0:g.sales_report_id)||null,k={initial_bakerreports_id:f,sales_report_id:d,category:i,target:u.target,actual_target:u.actual_target,short:u.short,over:u.over,status:r,kilo:u.kilo,combined_bakers_reports:g.bakerReports.combined_bakers_reports.map(A=>({bread_id:A.bread.id,bread_production:A.bread_production})),recalculated_ingredients:b.value.map(A=>({ingredients_id:A.ingredients.id,quantity:A.quantity,unit:A.unit}))};console.log("Edited Bakers Report",k),console.log("Edited Bakers Report",f);try{await h.updateBakerReport(f,k),he.create({type:"positive",message:"Baker report updated successfully!",position:"top"}),$()}catch(A){console.error("Error updating baker report:",A),he.create({type:"negative",message:"Failed to update baker report. Please try again.",position:"top"})}};return(f,i)=>(w(),B(Y,{ref_key:"dialogRef",ref:x,onHide:Q($)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,{class:"row bg-backgroud text-h6"},{default:t(()=>{var r,d,k,C,U,N;return[a("div",Pa,y(`${s((k=(d=(r=o.bakerReports)==null?void 0:r.branch_recipe)==null?void 0:d.recipe)==null?void 0:k.name)} - ${(N=(U=(C=o.bakerReports)==null?void 0:C.branch_recipe)==null?void 0:U.recipe)==null?void 0:N.category}`),1),e(qe),a("div",null,[ne((w(),B(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(se,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[P("Close")]),_:1})]),_:1})),[[le]])])]}),_:1}),P(" sales_report_id:"+y(o.sales_report_id)+" ",1),e(R,{class:"row q-gutter-x-xl"},{default:t(()=>[a("div",null,[a("div",Va,[a("div",null,[P(" Target Pcs "),e(j,{readonly:"",modelValue:u.target,"onUpdate:modelValue":i[0]||(i[0]=r=>u.target=r),outlined:"",type:"number",dense:"",style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])]),a("div",null,[P(" Actual Target "),e(j,{readonly:"",modelValue:u.actual_target,"onUpdate:modelValue":i[1]||(i[1]=r=>u.actual_target=r),outlined:"",dense:"",style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])])]),a("div",Sa,[a("div",null,[P(" Short "),e(j,{readonly:"",modelValue:u.short,"onUpdate:modelValue":i[2]||(i[2]=r=>u.short=r),outlined:"",type:"number",dense:"",style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])]),a("div",null,[P(" Over "),e(j,{readonly:"",modelValue:u.over,"onUpdate:modelValue":i[3]||(i[3]=r=>u.over=r),outlined:"",dense:"",style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])])]),a("div",null,[Da,e(j,{outlined:"",modelValue:u.kilo,"onUpdate:modelValue":i[4]||(i[4]=r=>u.kilo=r),dense:"",type:"number",style:{width:"210px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])]),a("div",qa,[o.bakerReports.combined_bakers_reports.length?(w(),S("div",Na,[(w(!0),S(H,null,pe(o.bakerReports.combined_bakers_reports,(r,d)=>(w(),S("div",{key:d,class:"q-my-md"},[e(Ye,{class:"q-ma-md"}),a("div",Ua,y(r.bread.name),1),e(j,{outlined:"",modelValue:r.bread_production,"onUpdate:modelValue":k=>r.bread_production=k,dense:"",type:"numbers",suffix:"pcs",style:{width:"210px","max-width":"300px","min-width":"50px"}},null,8,["modelValue","onUpdate:modelValue"])]))),128))])):Ke("",!0)])]),a("div",null,[Ta,e(Ne,{dense:"",separator:"",class:"box"},{default:t(()=>[e(ge,null,{default:t(()=>[e(K,null,{default:t(()=>[e(ae,{class:"text-overline"},{default:t(()=>[P("Raw Materials Name")]),_:1})]),_:1}),e(K,null,{default:t(()=>[e(ae,{class:"text-overline"},{default:t(()=>[P("Code")]),_:1})]),_:1}),e(K,{side:""},{default:t(()=>[e(ae,{class:"text-overline"},{default:t(()=>[P("Quantity")]),_:1})]),_:1})]),_:1}),(w(!0),S(H,null,pe(b.value,(r,d)=>(w(),B(ge,{key:d},{default:t(()=>[e(K,null,{default:t(()=>[e(ae,{class:"text-caption"},{default:t(()=>[P(y(r.ingredients.name),1)]),_:2},1024)]),_:2},1024),e(K,null,{default:t(()=>[e(ae,{class:"text-caption"},{default:t(()=>[P(y(r.ingredients.code),1)]),_:2},1024)]),_:2},1024),e(K,{side:""},{default:t(()=>[e(ae,{class:"text-caption"},{default:t(()=>[P(y(_(r)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(De,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:t(()=>[ne(e(D,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[le]]),e(D,{class:"glossy",color:"teal",label:"Save",onClick:m})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Ba=G(Aa,[["__scopeId","data-v-222cab78"]]);const Fa=o=>(X("data-v-f96814be"),o=o(),Z(),o),Ia=Fa(()=>a("div",{class:"row justify-between"},[a("div",{class:"text-h6"},"Baker Report")],-1)),La={class:"text-subtitle1 text-weight-regular"},Ma={class:"q-ma-sm"},za={class:"q-ma-sm",align:"center"},Ha=["src"],Oa={__name:"BakerReportPanel",props:["bakersReport","sales_report_id"],setup(o){Qe.exports.vfs=lt;const h=o,x=h.bakersReport;console.log("Bakers Report",h.bakersReport);const $=V(!0),g=V(!1);V(!1);const u=V({rowsPerPage:0}),b=V(""),s=Se(),_=(v,q)=>{s.dialog({component:wa,componentProps:{breadProduction:v,branchRecipe:q}})},p=(v,q)=>{s.dialog({component:Ra,componentProps:{ingredientProduction:v,branchRecipe:q}})},l=(v,q)=>{s.dialog({component:Ba,componentProps:{bakerReports:v,sales_report_id:q}})},c=v=>ce.formatDate(v,"MMM. DD, YYYY"),n=v=>{const q=Number(v)||0;return parseFloat(q.toFixed(3)).toString()},m=v=>{const q=Number(v)||0;return parseFloat(q.toFixed(3)).toString()},f=v=>v?v.split(" ").map(q=>q.charAt(0).toUpperCase()+q.slice(1).toLowerCase()).join(" "):"",i=v=>{const q=Ce=>Ce?Ce.charAt(0).toUpperCase()+Ce.slice(1).toLowerCase():"",T=v.firstname?q(v.firstname):"No Firstname",J=v.middlename?q(v.middlename).charAt(0)+".":"",me=v.lastname?q(v.lastname):"No Lastname";return`${T} ${J} ${me}`.trim()},r=v=>{const q=new Date(v),T={hour:"2-digit",minute:"2-digit",hour12:!0};return q.toLocaleTimeString(void 0,T)},d=v=>{switch(v){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},k=v=>v?v.split(" ").map(q=>q.charAt(0).toUpperCase()+q.slice(1).toLowerCase()).join(" "):"",C=v=>v?v.recipe_category==="Filling"?v.filling_bakers_reports||[]:v.recipe_category==="Dough"?v.bread_production_reports||[]:[]:(console.error("No bakerReport provided"),[]),U=[{name:"recipe_name",align:"center",label:"Recipe Name",field:v=>v.branch_recipe&&v.branch_recipe.recipe?{name:v.branch_recipe.recipe.name,category:v.branch_recipe.recipe.category}:{name:"N/A",category:"N/A"},format:v=>`${k(v.name)} (${v.category})`,sortable:!0},{name:"created_at",align:"center",label:"Time",field:"created_at",format:v=>r(v)},{name:"kilo",align:"center",label:"Kilo / s",field:"kilo",format:v=>`${m(v)}`},{name:"actual_target",align:"center",label:"Actual Target",field:v=>v.target*v.kilo,format:v=>`${Math.ceil(v)}`},{name:"over",align:"center",label:"Over",field:"over",format:v=>`${v}`},{name:"short",align:"center",label:"Short",field:"short",format:v=>`${v}`},{name:"status",align:"center",label:"Status",field:"status"},{name:"combined_bakers_reports",align:"center",label:"Breads",field:"combined_bakers_reports"},{name:"ingredients_reports",align:"center",label:"Ingredients",field:"ingredients_reports"},{name:"action",align:"center",label:"Action",field:"action"}],N=v=>{var O,te,xe,_e,ve,M,z,be,W,Pe,Fe,Oe,et,tt;console.log("bakerReport",v);const q=`${(xe=(te=(O=v==null?void 0:v.branch_recipe)==null?void 0:O.recipe)==null?void 0:te.name)!=null?xe:"Unkown Recipe"} (${(_e=v==null?void 0:v.recipe_category)!=null?_e:"Unkown Category"})`,T=(M=(ve=v==null?void 0:v.branch_recipe)==null?void 0:ve.target)!=null?M:0,J=(z=v==null?void 0:v.actual_target)!=null?z:0,me=(be=v==null?void 0:v.kilo)!=null?be:0,Ce=(W=v==null?void 0:v.over)!=null?W:0,L=(Pe=v==null?void 0:v.short)!=null?Pe:0,ee={table:{widths:["50%","50%"],body:[[{text:"Recipe Name",style:"tableHeader",alignment:"left"},{text:q,style:"tableHeader",alignment:"center"}],[{text:"Target per Kilo",style:"tableHeader",alignment:"left"},{text:`${n(T)} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Actual Target",style:"tableHeader",alignment:"left"},{text:`${J} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Kilo",style:"tableHeader",alignment:"left"},{text:`${m(me)} kg/s`,style:"tableHeader",alignment:"center"}],[{text:"Over",style:"tableHeader",alignment:"left"},{text:`${Ce} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Short",style:"tableHeader",alignment:"left"},{text:`${L} pcs`,style:"tableHeader",alignment:"center"}]]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}};return{content:[{text:"Baker Report",style:"header",alignment:"center"},{columns:[{text:`Branch Name: ${v.branch.name||"No name available"}
                Baker: ${i(((Fe=v==null?void 0:v.user)==null?void 0:Fe.employee)||"Unknown Baker Name")}
                Recipe: ${((Oe=v.recipe)==null?void 0:Oe.name)||"Unknown Recipe"} (${v.recipe_category||"Unknown Category"})
             `,width:"80%",margin:[0,0,0,10]},{text:`Date: ${c(((et=h.bakersReport[0])==null?void 0:et.created_at)||((tt=h.bakersReport[1])==null?void 0:tt.created_at)||"No name available")}
                Time: ${r(v.created_at)}
                Status: ${f(v.status)}`,margin:[0,0,0,10]}]},{columns:[{width:"50%",stack:[{text:"Bread Production",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*"],body:[[{text:"Bread Name",style:"tableHeader",alignment:"center"},{text:"Production",style:"tableHeader",alignment:"center"}],...C(v).map(fe=>{var ze;return[{text:((ze=fe==null?void 0:fe.bread)==null?void 0:ze.name)||"Unknown Bread",style:"body"},{text:v.recipe_category==="Filling"?`${(fe==null?void 0:fe.filling_production)||"0"} pcs`:`${fe==null?void 0:fe.bread_new_production} pcs`,style:"body",alignment:"center"}]})]}}],columnGap:10},{width:"50%",stack:[{text:"Ingredients",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*"],body:[[{text:"Ingredient Code",style:"tableHeader",alignment:"center"},{text:"Quantity",style:"tableHeader",alignment:"center"}],...(v.ingredient_bakers_reports||[]).map(fe=>{var ze,at;return[{text:((ze=fe==null?void 0:fe.ingredients)==null?void 0:ze.code)||"Unknown Ingredient",style:"body"},{text:`${(fe==null?void 0:fe.quantity)||"Unknown Quantity"} ${((at=fe==null?void 0:fe.ingredients)==null?void 0:at.unit)||""}`,style:"body",alignment:"center"}]})]}}],columnGap:10}],columnGap:20},{canvas:[{type:"line",x1:0,y1:25,x2:555,y2:25,lineWidth:1,dash:{length:5,space:5},lineColor:"#000000",margin:[0,20,0,0]}]},{margin:[0,20,0,0],stack:[{text:"Summary",style:"subheader",alignment:"center"},ee]}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableHeader:{bold:!0,fontSize:10,color:"black"},body:{fontSize:8}},pageMargins:[20,20,20,20]}},A=v=>{const q=N(v);Qe.exports.createPdf(q).getDataUrl(T=>{b.value=T,g.value=!0})};return(v,q)=>(w(),S("div",null,[e(F,{class:"my-card q-pa-md"},{default:t(()=>{var T,J,me,Ce,L,ee;return[Ia,a("div",La,[a("div",null," Name: "+y(i(((J=(T=Q(x)[0])==null?void 0:T.user)==null?void 0:J.employee)||((Ce=(me=Q(x)[1])==null?void 0:me.user)==null?void 0:Ce.employee)||"No name available")),1),a("div",null," Date: "+y(`${c(((L=h.bakersReport[0])==null?void 0:L.created_at)||((ee=h.bakersReport[1])==null?void 0:ee.created_at)||"No name available")}`),1)]),e(R,null,{default:t(()=>[e(ue,{class:"table-container sticky-header2",columns:U,rows:Q(x),"row-key":"name","header-class":"custom-header","virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48,pagination:u.value,"rows-per-page-options":[0]},{"body-cell-status":t(O=>[e(E,{props:O},{default:t(()=>[e(re,{align:"middle",color:d(O.row.status)},{default:t(()=>[P(y(f(O.row.status)),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-combined_bakers_reports":t(O=>[e(E,{props:O},{default:t(()=>[e(D,{class:"gradient-icon",flat:"",rounded:"",onClick:te=>_(O.row.combined_bakers_reports,O.row.branch_recipe)},{default:t(()=>[e(oe,{name:"visibility",class:"gradient-icon"}),e(se,{class:"gradient-tooltip"},{default:t(()=>[P("View Breads")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),"body-cell-ingredients_reports":t(O=>[e(E,{props:O},{default:t(()=>[e(D,{class:"gradient-icon2",flat:"",rounded:"",onClick:te=>p(O.row.ingredient_bakers_reports,O.row.branch_recipe)},{default:t(()=>[e(oe,{name:"visibility",class:"gradient-icon2"}),e(se,{class:"gradient-tooltip"},{default:t(()=>[P("View Ingredients")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),"body-cell-action":t(O=>[e(E,{props:O},{default:t(()=>[e(D,{dense:"",flat:"",round:"",icon:"more_vert","aria-label":"Action Menu",onClick:te=>v.toggleMenu(O.row)},null,8,["onClick"]),e(ht,{modelValue:O.row.menu,"onUpdate:modelValue":te=>O.row.menu=te,anchor:"bottom right",self:"top right","transition-show":"jump-down","transition-hide":"jump-up"},{default:t(()=>[e(Ne,{style:{"min-width":"100px"}},{default:t(()=>[ne((w(),B(ge,{clickable:"",onClick:te=>A(O.row)},{default:t(()=>[e(K,{avatar:""},{default:t(()=>[e(oe,{name:"print"})]),_:1}),e(K,null,{default:t(()=>[e(ae,null,{default:t(()=>[P("Print")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[le]]),ne((w(),B(ge,{clickable:"",onClick:te=>l(O.row,o.sales_report_id)},{default:t(()=>[e(K,{avatar:""},{default:t(()=>[e(oe,{name:"edit"})]),_:1}),e(K,null,{default:t(()=>[e(ae,null,{default:t(()=>[P("Edit")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[le]])]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])]),_:1})]}),_:1}),e(Y,{modelValue:g.value,"onUpdate:modelValue":q[0]||(q[0]=T=>g.value=T),"backdrop-filter":v.backdropFilter,maximized:$.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[a("div",Ma,[a("div",za,[ne((w(),B(D,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},{default:t(()=>[e(se,null,{default:t(()=>[P("Close")]),_:1})]),_:1})),[[le]])]),a("div",null,[a("iframe",{src:b.value,width:"100%",height:"700px"},null,8,Ha)])])]),_:1},8,["modelValue","backdrop-filter","maximized"])]))}};var ja=G(Oa,[["__scopeId","data-v-f96814be"]]);const Qa={class:"row justify-between text-white"},Ea=a("div",{class:"text-h6"},"Bread Report",-1),Ka={class:"row justify-end q-mt-md"},Ya={class:"text-h6"},Ga={__name:"BreadReport",props:["reports"],setup(o){const{dialogRef:h,onDialogHide:x,onDialogOK:$,onDialogCancel:g}=$e(),u=o,b=V("");console.log("Reports data structure:",u.reports);const s=r=>r?r.split(" ").map(d=>d.charAt(0).toUpperCase()+d.slice(1).toLowerCase()).join(" "):"",_=async(r,d)=>{console.log("update data of the price",r),console.log("update val of the price",d);try{const k=await we.put("/api/update-bread-sales-price-report/"+r.id,{price:parseInt(d)});console.log("reponse",k.data)}catch(k){console.error(k)}},p=async(r,d)=>{console.log("update data of the beginnings",r),console.log("update val of the beginnings",d);try{const k=await we.put("/api/update-bread-sales-beginnings-report/"+r.id,{beginnings:parseInt(d)});console.log("reponse",k.data)}catch(k){console.error(k)}},l=async(r,d)=>{console.log("update data of the new updatedRemaining",r),console.log("update val of the new updatedRemaining",d);try{const k=await we.put("/api/update-bread-sales-remaining-report/"+r.id,{remaining:parseInt(d)});console.log("reponse",k.data)}catch(k){console.error(k)}},c=async(r,d)=>{console.log("update data of the new updatedRemaining",r),console.log("update val of the new updatedRemaining",d);try{const k=await we.put("/api/update-bread-sales-breadOut-report/"+r.id,{bread_out:parseInt(d)});console.log("reponse",k.data)}catch(k){console.error(k)}},n=[{name:"name",label:"Bread Name",field:r=>(console.log("Row data:",r),r.bread.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:r=>`${r}`},{name:"new_production",label:"New Production (PCS)",field:"new_production",format:r=>`${r}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:r=>`${r}`},{name:"bread_out",label:"Bread Out (PCS)",field:"bread_out",format:r=>`${r}`},{name:"total",label:"Bread Total (PCS)",field:r=>(Number(r.beginnings)||0)+(Number(r.new_production)||0)},{name:"breadSold",label:"Bread Sold (PCS)",field:r=>{const d=Number(r.beginnings)||0,k=Number(r.new_production)||0,C=Number(r.remaining)||0,U=Number(r.bread_out)||0,N=d+k,A=C+U;return N-A},format:r=>`${r}`},{name:"sales",label:"Total Sales",field:r=>{const d=Number(r.beginnings)||0,k=Number(r.new_production)||0,C=Number(r.remaining)||0,U=Number(r.bread_out)||0,N=Number(r.price)||0,A=d+k,v=C+U;return(A-v)*N},format:r=>`${m(r)}`}],m=r=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(r),f=I(()=>{if(!b.value||!b.value.trim())return u.reports||[];const r=b.value.trim().toLowerCase();return(u.reports||[]).filter(d=>d.bread.name.toLowerCase().includes(r)||d.price.toString().includes(r)||d.sales.toString().includes(r))}),i=I(()=>{const r=f.value.reduce((d,k)=>{const C=Number(k.beginnings)||0,U=Number(k.new_production)||0,N=Number(k.remaining)||0,A=Number(k.bread_out)||0,v=Number(k.price)||0,q=C+U,T=N+A,me=(q-T)*v;return console.log(`Adding salesAmount: ${me} to total: ${d}`),d+me},0);return console.log("Overall Total Sales computed as:",r),r});return console.log("Overall Total Sales:",i.value),(r,d)=>(w(),B(Y,{ref_key:"dialogRef",ref:h,onHide:Q(x)},{default:t(()=>[e(F,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(R,{style:{"background-color":"#795548"}},{default:t(()=>[a("div",Qa,[Ea,ne((w(),B(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(se,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[P("Close")]),_:1})]),_:1})),[[le]])])]),_:1}),e(R,null,{default:t(()=>[e(j,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:b.value,"onUpdate:modelValue":d[0]||(d[0]=k=>b.value=k),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:""},{append:t(()=>[e(oe,{name:"search"})]),_:1},8,["modelValue"])]),_:1}),e(R,null,{default:t(()=>[e(ue,{filter:b.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:n,rows:f.value,"row-key":"name","virtual-scroll":"",pagination:r.pagination,"onUpdate:pagination":d[1]||(d[1]=k=>r.pagination=k),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(k=>[e(E,{props:k},{default:t(()=>[a("span",null,y(`${s(k.row.bread.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(k=>[e(E,{props:k},{default:t(()=>[a("span",null,y(`${m(k.row.price)}`),1),e(Ve,{"onUpdate:modelValue":[C=>_(k.row,C),C=>k.row.price=C],modelValue:k.row.price,"auto-save":""},{default:t(C=>[e(j,{modelValue:C.value,"onUpdate:modelValue":U=>C.value=U,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:Re(C.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-beginnings":t(k=>[e(E,{props:k},{default:t(()=>[a("span",null,y(`${k.row.beginnings}`),1),e(Ve,{"onUpdate:modelValue":[C=>p(k.row,C),C=>k.row.beginnings=C],modelValue:k.row.beginnings,"auto-save":""},{default:t(C=>[e(j,{modelValue:C.value,"onUpdate:modelValue":U=>C.value=U,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:Re(C.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-remaining":t(k=>[e(E,{props:k},{default:t(()=>[a("span",null,y(`${k.row.remaining}`),1),e(Ve,{"onUpdate:modelValue":[C=>l(k.row,C),C=>k.row.remaining=C],modelValue:k.row.remaining,"auto-save":""},{default:t(C=>[e(j,{modelValue:C.value,"onUpdate:modelValue":U=>C.value=U,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:Re(C.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-bread_out":t(k=>[e(E,{props:k},{default:t(()=>[a("span",null,y(`${k.row.bread_out}`),1),e(Ve,{"onUpdate:modelValue":[C=>c(k.row,C),C=>k.row.bread_out=C],modelValue:k.row.bread_out,"auto-save":""},{default:t(C=>[e(j,{modelValue:C.value,"onUpdate:modelValue":U=>C.value=U,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:Re(C.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(R,null,{default:t(()=>[a("div",Ka,[a("div",Ya," Overall Total Sales: "+y(m(i.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Ja={class:"row justify-between text-white"},Wa=a("div",{class:"text-h6"},"Selecta Report",-1),Xa={class:"row justify-end q-mt-md"},Za={class:"text-h6"},en={__name:"SelectaReport",props:["reports"],setup(o){const{dialogRef:h,onDialogHide:x,onDialogOK:$,onDialogCancel:g}=$e(),u=o;console.log("Reports data structure:",u.reports);const b=n=>n?n.split(" ").map(m=>m.charAt(0).toUpperCase()+m.slice(1).toLowerCase()).join(" "):"",s=async(n,m)=>{console.log("update data of the price",n),console.log("update val of the price",m);try{const f=await we.put("/api/update-selecta-sales-price-report/"+n.id,{price:parseInt(m)})}catch(f){console.error(f)}},_=[{name:"name",label:"Selecta Name",field:n=>(console.log("Row data:",n),n.selecta.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:n=>`${n}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:n=>`${n}`},{name:"out",label:"Selecta Out (PCS)",field:"out",format:n=>`${n}`},{name:"added_stocks",label:"Added Stocks (PCS)",field:"added_stocks",format:n=>`${n}`},{name:"total_selecta",label:"Total Stocks (PCS)",field:n=>(n.beginnings||0)+(n.added_stocks||0),format:n=>`${n}`},{name:"sold",label:"Selecta Sold (PCS)",field:n=>{const m=(n.beginnings||0)+(n.added_stocks||0),f=(n.remaining||0)+(n.out||0);return m-f},format:n=>`${n}`},{name:"sales",label:"Total Sales",field:n=>{const m=(n.beginnings||0)+(n.added_stocks||0),f=(n.remaining||0)+(n.out||0);return(m-f)*(n.price||0)}}],p=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(n),l=I(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),c=I(()=>{const n=l.value.reduce((m,f)=>{const i=parseFloat(f.sales)||0;return console.log(`Adding salesAmount: ${i} to total: ${m}`),m+i},0);return console.log("Overall Total Sales computed as:",n),n});return console.log("Filtered Rows:",l.value),(n,m)=>(w(),B(Y,{ref_key:"dialogRef",ref:h,onHide:Q(x)},{default:t(()=>[e(F,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(R,{style:{"background-color":"#f44336"}},{default:t(()=>[a("div",Ja,[Wa,ne((w(),B(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(se,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[P("Close")]),_:1})]),_:1})),[[le]])])]),_:1}),e(R,null,{default:t(()=>[e(ue,{filter:n.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:_,rows:l.value,"row-key":"name","virtual-scroll":"",pagination:n.pagination,"onUpdate:pagination":m[0]||(m[0]=f=>n.pagination=f),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(f=>[e(E,{props:f},{default:t(()=>[a("span",null,y(`${b(f.row.selecta.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(f=>[e(E,{props:f},{default:t(()=>[a("span",null,y(`${p(f.row.price)}`),1),e(Ve,{"onUpdate:modelValue":[i=>s(f.row,i),i=>f.row.price=i],modelValue:f.row.price,"auto-save":""},{default:t(i=>[e(j,{modelValue:i.value,"onUpdate:modelValue":r=>i.value=r,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:Re(i.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-sales":t(f=>[e(E,{props:f},{default:t(()=>[a("span",null,y(`${p(f.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(R,null,{default:t(()=>[a("div",Xa,[a("div",Za," Overall Total Sales: "+y(p(c.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},tn={class:"row justify-between text-white"},an=a("div",{class:"text-h6"},"Softdrinks Report",-1),nn={class:"row justify-end q-mt-md"},ln={class:"text-h6"},on={__name:"SoftdrinksReport",props:["reports"],setup(o){const{dialogRef:h,onDialogHide:x,onDialogOK:$,onDialogCancel:g}=$e(),u=o;console.log("Reports data structure:",u.reports);const b=c=>c?c.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",s=[{name:"name",label:"Softdrinks Name",field:c=>(console.log("Row data:",c),c.softdrinks.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:c=>`${c}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:c=>`${c}`},{name:"out",label:"Softdrinks Out (PCS)",field:"out",format:c=>`${c}`},{name:"sold",label:"Softdrinks Sold (PCS)",field:"sold",format:c=>`${c}`},{name:"sales",label:"Total Sales",field:"sales"}],_=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(c),p=I(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),l=I(()=>{const c=p.value.reduce((n,m)=>{const f=parseFloat(m.sales)||0;return console.log(`Adding salesAmount: ${f} to total: ${n}`),n+f},0);return console.log("Overall Total Sales computed as:",c),c});return console.log("Filtered Rows:",p.value),(c,n)=>(w(),B(Y,{ref_key:"dialogRef",ref:h,onHide:Q(x)},{default:t(()=>[e(F,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(R,{style:{"background-color":"#9c27b0"}},{default:t(()=>[a("div",tn,[an,ne((w(),B(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(se,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[P("Close")]),_:1})]),_:1})),[[le]])])]),_:1}),e(R,null,{default:t(()=>[e(ue,{filter:c.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:s,rows:p.value,"row-key":"name","virtual-scroll":"",pagination:c.pagination,"onUpdate:pagination":n[0]||(n[0]=m=>c.pagination=m),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(m=>[e(E,{props:m},{default:t(()=>[a("span",null,y(`${b(m.row.softdrinks.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(m=>[e(E,{props:m},{default:t(()=>[a("span",null,y(`${_(m.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(m=>[e(E,{props:m},{default:t(()=>[a("span",null,y(`${_(m.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(R,null,{default:t(()=>[a("div",nn,[a("div",ln," Overall Total Sales: "+y(_(l.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},sn={class:"row justify-between text-white"},rn=a("div",{class:"text-h6"},"Cake Report",-1),dn={class:"row justify-end q-mt-md"},cn={class:"text-h6"},un={__name:"CakeReport",props:["reports"],setup(o){const{dialogRef:h,onDialogHide:x,onDialogOK:$,onDialogCancel:g}=$e(),u=o;console.log("Report cake:",u.reports);const b=I(()=>(console.log("Filtered cake rows:",u.reports||[]),u.reports||[])),s=c=>{const n=r=>r?r.charAt(0).toUpperCase()+r.slice(1).toLowerCase():"",m=c.firstname?n(c.firstname):"No Firstname",f=c.middlename?n(c.middlename).charAt(0)+".":"",i=c.lastname?n(c.lastname):"No Lastname";return`${m} ${f} ${i}`},_=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(c).replace("\u20B1","\u20B1 "),p=I(()=>{const c=b.value.reduce((n,m)=>{const f=parseFloat(m.cake_report.price)||0;return console.log(`Adding salesAmount: ${f} to total: ${n}`),n+f},0);return console.log("Overall Total Sales computed as:",c),c}),l=[{name:"name",label:"Cake Name",field:c=>(console.log("Row data:",c),c.cake_report.name||"N/A")},{name:"cake_maker",label:"Cake Maker Name",field:c=>s(c.cake_report.user.employee)},{name:"price",label:"Price",field:c=>_(c.cake_report.price)},{name:"layers",label:"Layers",field:c=>c.cake_report.layers},{name:"sales_status",label:"Sale Status",field:c=>c.cake_report.sales_status}];return(c,n)=>(w(),B(Y,{ref_key:"dialogRef",ref:h,onHide:Q(x)},{default:t(()=>[e(F,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(R,{style:{"background-color":"#009688"}},{default:t(()=>[a("div",sn,[rn,ne((w(),B(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(se,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[P("Close")]),_:1})]),_:1})),[[le]])])]),_:1}),e(R,null,{default:t(()=>[e(ue,{filter:c.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:l,rows:b.value,"row-key":"name","virtual-scroll":"",pagination:c.pagination,"onUpdate:pagination":n[0]||(n[0]=m=>c.pagination=m),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["filter","rows","pagination"]),a("div",dn,[a("div",cn," Overall Total Sales: "+y(_(p.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},mn={class:"row justify-between text-white"},pn=a("div",{class:"text-h6"},"Other Products Report",-1),_n={class:"row justify-end q-mt-md"},fn={class:"text-h6"},gn={__name:"OtherProductsReport",props:["reports"],setup(o){const{dialogRef:h,onDialogHide:x,onDialogOK:$,onDialogCancel:g}=$e(),u=o,b=I(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[])),s=c=>c?c.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",_=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(c),p=[{name:"name",label:"Product Name",field:c=>(console.log("Row data:",c),c.other_products.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:c=>`${c}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:c=>`${c}`},{name:"out",label:"Product Out (PCS)",field:"out",format:c=>`${c}`},{name:"sold",label:"Product Sold (PCS)",field:"sold",format:c=>`${c}`},{name:"sales",label:"Total Sales",field:"sales"}],l=I(()=>{const c=b.value.reduce((n,m)=>{const f=parseFloat(m.sales)||0;return console.log(`Adding salesAmount: ${f} to total: ${n}`),n+f},0);return console.log("Overall Total Sales computed as:",c),c});return(c,n)=>(w(),S("div",null,[e(Y,{ref_key:"dialogRef",ref:h,onHide:Q(x)},{default:t(()=>[e(F,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(R,{style:{"background-color":"#607d8b"}},{default:t(()=>[a("div",mn,[pn,ne((w(),B(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(se,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[P("Close")]),_:1})]),_:1})),[[le]])])]),_:1}),e(R,null,{default:t(()=>[e(ue,{filter:c.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:p,rows:b.value,"row-key":"name","virtual-scroll":"",pagination:c.pagination,"onUpdate:pagination":n[0]||(n[0]=m=>c.pagination=m),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(m=>[e(E,{props:m},{default:t(()=>[a("span",null,y(`${s(m.row.other_products.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(m=>[e(E,{props:m},{default:t(()=>[a("span",null,y(`${_(m.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(m=>[e(E,{props:m},{default:t(()=>[a("span",null,y(`${_(m.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(R,null,{default:t(()=>[a("div",_n,[a("div",fn," Overall Total Sales: "+y(_(l.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"])]))}};const vn=o=>(X("data-v-69f74a0d"),o=o(),Z(),o),hn=vn(()=>a("div",{class:"text-h6",align:"center"},"Products Report",-1)),yn={class:"item-start q-gutter-md",align:"center"},bn={__name:"ProductsReport",props:["sales_Reports"],setup(o){const h=o,x=h.sales_Reports;console.log("sales report2",h);const $=Se(),g=p=>{$.dialog({component:Ga,componentProps:{reports:p}})},u=p=>{$.dialog({component:en,componentProps:{reports:p}})},b=p=>{$.dialog({component:on,componentProps:{reports:p}})},s=p=>{$.dialog({component:un,componentProps:{reports:p}})},_=p=>{$.dialog({component:gn,componentProps:{reports:p}})};return(p,l)=>(w(),S("div",null,[e(F,{class:"user-card"},{default:t(()=>[e(R,null,{default:t(()=>[hn]),_:1}),e(R,null,{default:t(()=>[a("div",yn,[e(D,{onClick:l[0]||(l[0]=c=>g(h.sales_Reports[0].bread_reports)),"no-caps":"",label:"Bread Report",rounded:"",color:"brown",style:{width:"130px"},class:"user-button"}),e(D,{onClick:l[1]||(l[1]=c=>u(Q(x)[0].selecta_reports)),"no-caps":"",label:"Selecta Report",rounded:"",color:"red-6",style:{width:"130px"},class:"user-button"}),e(D,{onClick:l[2]||(l[2]=c=>b(Q(x)[0].softdrinks_reports)),"no-caps":"",label:"Softdrinks Report",rounded:"",color:"accent",style:{width:"150px"},class:"user-button"}),e(D,{onClick:l[3]||(l[3]=c=>s(Q(x)[0].cake_sales_reports)),"no-caps":"",label:"Cake Report",rounded:"",color:"teal",style:{width:"130px"},class:"user-button"}),e(D,{onClick:l[4]||(l[4]=c=>_(Q(x)[0].other_products_reports)),"no-caps":"",label:"Other Products Report",rounded:"",color:"blue-grey",style:{width:"180px"},class:"user-button"})])]),_:1})]),_:1})]))}};var wn=G(bn,[["__scopeId","data-v-69f74a0d"]]);const xn={class:"row justify-between text-white"},kn=a("div",{class:"text-h6"},"Denomination Report",-1),$n={class:"row text-weight-regular text-subtitle1"},Cn={class:"col-6"},Rn={class:"col-6"},Pn={class:"row justify-end q-mt-md"},Vn={class:"text-h6"},Sn={__name:"DenominationDialogReport",props:{reports:Array,total:Number},setup(o){const{dialogRef:h,onDialogHide:x,onDialogOK:$,onDialogCancel:g}=$e(),u=o;console.log("Denomination Props",u.reports);const b=u.reports[0];console.log("Reports data structure:",u.reports);const s=p=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(p),_=I(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[]));return console.log("Filtered Rows:",_.value),(p,l)=>(w(),B(Y,{ref_key:"dialogRef",ref:h,onHide:Q(x)},{default:t(()=>[e(F,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(R,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",xn,[kn,ne((w(),B(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(se,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[P("Close")]),_:1})]),_:1})),[[le]])])]),_:1}),e(R,null,{default:t(()=>[a("div",$n,[a("div",Cn,[a("div",null,"1000 Bills: "+y(Q(b).oneThousandBills),1),a("div",null,"500 Bills: "+y(Q(b).fiveHundredBills),1),a("div",null,"200 Bills: "+y(Q(b).twoHundredBills),1),a("div",null,"100 Bills: "+y(Q(b).oneHundredBills),1),a("div",null,"50 Bills: "+y(Q(b).fiftyBills),1),a("div",null,"20 Bills: "+y(Q(b).twentyBills),1)]),a("div",Rn,[a("div",null,"20 coins: "+y(Q(b).twentyCoins),1),a("div",null,"10 coins: "+y(Q(b).tenCoins),1),a("div",null,"5 coins: "+y(Q(b).fiveCoins),1),a("div",null,"1 coins: "+y(Q(b).oneCoins),1),a("div",null,"25 cents: "+y(Q(b).twentyFiveCents),1)])])]),_:1}),e(R,null,{default:t(()=>[a("div",Pn,[a("div",Vn," Overall Total Denomination: "+y(s(o.total||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const Dn=o=>(X("data-v-43ad17ba"),o=o(),Z(),o),qn=Dn(()=>a("div",{class:"text-h6",align:"center"},"Denomination Report",-1)),Nn={class:"q-gutter-x-md",align:"center"},Un={__name:"DenominationReport",props:["sales_Reports"],setup(o){const h=o;h.sales_Reports,console.log("Denomination report",h);const x=Se(),$=(g,u)=>{x.dialog({component:Sn,componentProps:{reports:g,total:u}})};return(g,u)=>(w(),S("div",null,[e(F,{class:"user-card"},{default:t(()=>[e(R,null,{default:t(()=>[qn]),_:1}),e(R,null,{default:t(()=>[a("div",Nn,[e(D,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",onClick:u[0]||(u[0]=b=>$(h.sales_Reports[0].denomination_reports,h.sales_Reports[0].denomination_total)),class:"user-button"})])]),_:1})]),_:1})]))}};var Tn=G(Un,[["__scopeId","data-v-43ad17ba"]]);const An={class:"row justify-between text-white"},Bn=a("div",{class:"text-h6"},"Expenses Report",-1),Fn={class:"row justify-end q-mt-md"},In={class:"text-h6"},Ln={__name:"ExpensesDialog",props:{reports:Array,total:Number},setup(o){const{dialogRef:h,onDialogHide:x,onDialogOK:$,onDialogCancel:g}=$e(),u=o;u.reports,console.log("Expenses total",u.total);const b=l=>l?l.split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1).toLowerCase()).join(" "):"",s=[{name:"name",label:"Expenses Name",field:l=>(console.log("Row data:",l),l.name||"N/A"),align:"center"},{name:"description",label:"Description",field:"description",align:"center"},{name:"amount",label:"Amount",field:"amount",align:"center"}];console.log("Reports data structure:",u.reports);const _=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l),p=I(()=>(console.log("Filtered rows:",u.reports||[]),u.reports||[]));return console.log("Expenses:",p.value),(l,c)=>(w(),B(Y,{ref_key:"dialogRef",ref:h,onHide:Q(x),onOk:l.handleButtonClick,onCancel:Q(g)},{default:t(()=>[e(F,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(R,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",An,[Bn,ne((w(),B(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(se,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[P("Close")]),_:1})]),_:1})),[[le]])])]),_:1}),e(R,null,{default:t(()=>[e(ue,{filter:l.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:s,rows:p.value,"row-key":"name","virtual-scroll":"",pagination:l.pagination,"onUpdate:pagination":c[0]||(c[0]=n=>l.pagination=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(n=>[e(E,{props:n},{default:t(()=>[a("span",null,y(`${b(n.row.name)}`),1)]),_:2},1032,["props"])]),"body-cell-amount":t(n=>[e(E,{props:n},{default:t(()=>[a("span",null,y(`${_(n.row.amount)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(R,null,{default:t(()=>[a("div",Fn,[a("div",In," Overall Total Expenses: "+y(_(o.total||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","onOk","onCancel"]))}};const Mn=o=>(X("data-v-4747b3c7"),o=o(),Z(),o),zn=Mn(()=>a("div",{class:"text-h6",align:"center"},"Expenses Report",-1)),Hn={class:"q-gutter-x-md",align:"center"},On={__name:"ExpensesReport",props:["sales_Reports"],setup(o){const h=o;console.log("Expenses Data",h.sales_Reports[0].expenses_reports);const x=Se(),$=(g,u)=>{x.dialog({component:Ln,componentProps:{reports:g,total:u}})};return(g,u)=>(w(),S("div",null,[e(F,{class:"user-card"},{default:t(()=>[e(R,null,{default:t(()=>[zn]),_:1}),e(R,null,{default:t(()=>[a("div",Hn,[e(D,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",class:"user-button",onClick:u[0]||(u[0]=b=>$(h.sales_Reports[0].expenses_reports,h.sales_Reports[0].expenses_total))})])]),_:1})]),_:1})]))}};var jn=G(On,[["__scopeId","data-v-4747b3c7"]]);const Qn={class:"row justify-between text-white"},En=a("div",{class:"text-h6"},"Credits Report",-1),Kn={class:"row justify-end q-mt-md"},Yn={class:"text-h6"},Gn={__name:"CreditsReportDialog",props:{reports:Array,total:Number},setup(o){const{dialogRef:h,onDialogHide:x,onDialogOK:$,onDialogCancel:g}=$e(),u=o,b=u.reports;console.log("creditReports data",b),b.forEach((m,f)=>{console.log(`Report ${f}:`,m),console.log(`Credit Products for Report ${f}:`,m.credit_products.total_amount)});const s=I(()=>b.flatMap(m=>m.credit_products.map(f=>{const i=parseInt(f.pieces,10)||0,r=parseFloat(f.price)||0,d=i*r;return{...f,total_amount:d}})));console.log("All Credit Products:",s.value[0]);const _=m=>m?m.split(" ").map(f=>f.charAt(0).toUpperCase()+f.slice(1).toLowerCase()).join(" "):"",p=m=>{const f=k=>k?k.charAt(0).toUpperCase()+k.slice(1).toLowerCase():"",i=m.firstname?f(m.firstname):"No Firstname",r=m.middlename?f(m.middlename).charAt(0)+".":"",d=m.lastname?f(m.lastname):"No Lastname";return`${i} ${r} ${d}`.trim()},l=[{name:"name",label:"Employee Name",field:m=>p(m.credit_user_id),align:"center"},{name:"productName",label:"Product Name",field:m=>m.product.name||"N/A",align:"center"},{name:"pieces",label:"Pieces",field:"pieces",align:"center"},{name:"price",label:"Price",field:"price",align:"center"},{name:"total_amount",label:"Total Amount",field:"total_amount",align:"center"}];console.log("Reports data structure:",u.reports);const c=m=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(m),n=m=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(m);return(m,f)=>(w(),B(Y,{ref_key:"dialogRef",ref:h,onHide:Q(x),onOk:m.handleButtonClick,onCancel:Q(g)},{default:t(()=>[e(F,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(R,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",Qn,[En,ne((w(),B(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(se,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[P("Close")]),_:1})]),_:1})),[[le]])])]),_:1}),e(R,null,{default:t(()=>[e(ue,{filter:m.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:l,rows:s.value,"row-key":"name","virtual-scroll":"",pagination:m.pagination,"onUpdate:pagination":f[0]||(f[0]=i=>m.pagination=i),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-productName":t(i=>[e(E,{props:i},{default:t(()=>[a("span",null,y(`${_(i.row.product.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(i=>[e(E,{props:i},{default:t(()=>[a("span",null,y(`${c(i.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-total_amount":t(i=>[e(E,{props:i},{default:t(()=>[a("span",null,y(`${n(i.row.total_amount)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(R,null,{default:t(()=>[a("div",Kn,[a("div",Yn," Overall Credits Total: "+y(c(o.total||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","onOk","onCancel"]))}};const Jn=o=>(X("data-v-037b1d7d"),o=o(),Z(),o),Wn=Jn(()=>a("div",{class:"text-h6",align:"center"},"Credits Report",-1)),Xn={class:"q-gutter-x-md",align:"center"},Zn={__name:"CreditsReport",props:["sales_Reports"],setup(o){const h=o,x=Se(),$=(g,u)=>{x.dialog({component:Gn,componentProps:{reports:g,total:u}})};return(g,u)=>(w(),S("div",null,[e(F,{class:"user-card"},{default:t(()=>[e(R,null,{default:t(()=>[Wn]),_:1}),e(R,null,{default:t(()=>[a("div",Xn,[e(D,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",class:"user-button",onClick:u[0]||(u[0]=b=>$(h.sales_Reports[0].credit_reports,h.sales_Reports[0].credit_total))})])]),_:1}),e(R)]),_:1})]))}};var el=G(Zn,[["__scopeId","data-v-037b1d7d"]]);const tl=o=>(X("data-v-03dd6886"),o=o(),Z(),o),al={class:"q-mt-lg row items-start q-gutter-md justify-center"},nl={class:"row justify-between"},ll=tl(()=>a("div",{class:"text-h6"},"Sales Report",-1)),ol={align:"right"},sl={class:"text-subtitle1 text-weight-regular"},rl={class:"row q-gutter-sm q-pa-md"},il={class:"q-ma-sm"},dl={class:"q-ma-sm",align:"center"},cl=["src"],ul={__name:"SalesReportPanel",props:["salesReport"],setup(o){Qe.exports.vfs=lt;const h=o,x=h.salesReport;console.log("reportsData",h.salesReport);const $=V(!0),g=V(!1),u=V(""),b=n=>ce.formatDate(n,"MMMM DD, YYYY"),s=n=>{const m=new Date(n),f={hour:"2-digit",minute:"2-digit",hour12:!0};return m.toLocaleTimeString(void 0,f)},_=n=>{const m=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",f=n.firstname?m(n.firstname):"No Firstname",i=n.middlename?m(n.middlename).charAt(0)+".":"",r=n.lastname?m(n.lastname):"No Lastname";return`${f} ${i} ${r}`.trim()},p=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(n).replace("\u20B1","\u20B1	"),l=n=>{const m=I(()=>n.credit_reports.flatMap(L=>L.credit_products));console.log("All Credit Products:",m.value);const f=[{title:"Bread Production",data:(n.bread_reports||[]).map(L=>{const ee=Number(L.beginnings)||0,O=Number(L.new_production)||0,te=Number(L.remaining)||0,xe=Number(L.bread_out)||0,_e=Number(L.price)||0,ve=ee+O,M=te+xe,z=ve-M,be=z*_e;return{...L,total:ve,bread_sold:z,sales:be}}),columns:["bread.name","beginnings","price","new_production","bread_out","bread_sold","total","remaining","sales"],totals:["sales"]},{title:"Selecta Production",data:(n.selecta_reports||[]).map(L=>{const ee=L.beginnings||0,O=(L.remaining||0)+(L.out||0),te=ee-O,xe=(L.price||0)*te;return{...L,total:O,sold:te,sales:xe}}),columns:["selecta.name","beginnings","price","out","sold","remaining","sales"],totals:["sales"]},{title:"Softdrinks Production",data:(n.softdrinks_reports||[]).map(L=>({...L,sales:(L.price||0)*(L.sold||0)})),columns:["softdrinks.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Other Products Production",data:(n.other_products_reports||[]).map(L=>({...L,sales:(L.price||0)*(L.sold||0)})),columns:["other_products.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Cake Production",data:n.cake_sales_reports||[],columns:["cake_report.name","cake_report.user.employee","cake_report.layers","cake_report.price","cake_report.sales_status"],totals:["cake_report.price"]}],i=n.expenses_reports||[],r=m.value||[],d=n.denomination_reports[0]||[],k=n.denomination_total;n.charges_amount,n.over_total;const C={bills:[{name:"One Thousand",pcs:d.oneThousandBills||0},{name:"Five Hundred",pcs:d.fiveHundredBills||0},{name:"Two Hundred",pcs:d.twoHundredBills||0},{name:"One Hundred",pcs:d.oneHundredBills||0},{name:"Fifty",pcs:d.fiftyBills||0},{name:"Twenty",pcs:d.twentyBills||0}],coins:[{name:"Twenty",pcs:d.twentyCoins||0},{name:"Ten",pcs:d.tenCoins||0},{name:"Five",pcs:d.fiveCoins||0},{name:"One",pcs:d.oneCoins||0},{name:"Twenty Five Cents",pcs:d.twentyFiveCents||0}]},U=(L,ee,O)=>{const te=(_e,ve)=>ve.split(".").reduce((M,z)=>M?M[z]:0,_e),xe=O.reduce((_e,ve)=>(_e[ve]=L.reduce((M,z)=>M+parseFloat(te(z,ve))||0,0),_e),{});return[...L.map(_e=>ee.map(ve=>{if(ve==="cake_report.user.employee"){const M=te(_e,"cake_report.user.employee");return{text:M?_(M):"No Employee",style:"body",alignment:"center"}}return{text:ve.includes(".")?te(_e,ve)||"-":_e[ve]||"-",style:"body",alignment:"center"}})),[{text:"Overall Total",colSpan:ee.length-O.length,style:"tableHeader",alignment:"right",color:"#020617"},...Array(ee.length-O.length-1).fill({}),...O.map(_e=>({text:`\u20B1 ${xe[_e].toFixed(2)}`,style:"tableHeader",alignment:"center",color:"#020617"}))]]};let N=0;const A=r.length>0?r.map(L=>{const ee=(L.price||0)*(L.pieces||0);return N+=ee,[{text:_(L.credit_user_id),style:"body",alignment:"center"},{text:L.product.name,style:"body",alignment:"center"},{text:L.pieces,style:"body",alignment:"center"},{text:p(L.price),style:"body",alignment:"center"},{text:p(ee),style:"body",alignment:"center"}]}):[[{text:"No data available",colSpan:5,alignment:"center"}]];A.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:3},{},{},{text:p(N),style:"bodyBold",alignment:"center",colSpan:2},{}]);let v=0;const q=i.length>0?i.map(L=>{const ee=parseFloat(L.amount.replace(/[^0-9.-]+/g,""));return isNaN(ee)||(v+=ee),[{text:L.name,style:"body",alignment:"center"},{text:L.description,style:"body",alignment:"center"},{text:`${p(ee)}`,style:"body",alignment:"center"}]}):[[{text:"No data available",colSpan:3,alignment:"center"}]];q.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:2},{},{text:`${p(v)}`,style:"bodyBold",alignment:"center"}]);const T=C.bills.map((L,ee)=>{var O,te;return[{text:L.name,style:"body",alignment:"center"},{text:L.pcs,style:"body",alignment:"center"},{text:((O=C.coins[ee])==null?void 0:O.name)||"",style:"body",alignment:"center"},{text:((te=C.coins[ee])==null?void 0:te.pcs)||"0",style:"body",alignment:"center"}]});T.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:3,color:"#020617"},{},{},{text:`${p(k)}`,style:"bodyBold",alignment:"right",color:"#020617"}]);const J=f.map(({title:L,data:ee,columns:O,totals:te})=>({stack:[{text:L,style:"subheader",alignment:"center"},{table:{headerRows:1,widths:Array(O.length).fill("*"),body:[O.map(xe=>({text:xe.split(".").pop().replace(/_/g," ").replace(/\b\w/g,_e=>_e.toUpperCase()),style:"tableHeader",alignment:"center"})),...U(ee,O,te)]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]})),me=f.reduce((L,ee)=>{const O=ee.data.reduce((te,xe)=>te+(xe.sales||0),0);return L+O},0),Ce={table:{widths:["50%","50%"],body:[[{text:"Total Denomination",style:"tableHeader",alignment:"left"},{text:p(k),style:"tableData",alignment:"center"}],[{text:"Total Product Sales Amount",style:"tableHeader",alignment:"left"},{text:p(me),style:"tableData",alignment:"center"}],[{text:"Total Expenses",style:"tableHeader",alignment:"left"},{text:p(v),style:"tableData",alignment:"center"}],[{text:"Total Credits",style:"tableHeader",alignment:"left"},{text:p(N),style:"tableData",alignment:"center"}],[{text:"Over Cash",style:"tableHeader",alignment:"left"},{text:p(n.over_total),style:"tableData",alignment:"center"}],[{text:"Charges",style:"tableHeader",alignment:"left"},{text:`${p(n.charges_amount)}`,style:"tableData",alignment:"center"}]]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}};return{content:[{text:"Sales Report",style:"header",alignment:"center"},{columns:[{text:`Branch Name: ${n.branch.name}
          Cashier: ${_(n.user.employee)}
          Date: ${b(n.created_at)}
Time: ${s(n.created_at)}
`,margin:[0,0,0,10]},{}]},...J,{margin:[0,5,0,0],columns:[{width:"50%",stack:[{text:"Expenses Report",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","auto","*"],body:[[{text:"Expenses Name",style:"tableHeader",alignment:"center"},{text:"Description",style:"tableHeader",alignment:"center"},{text:"Amount",style:"tableHeader",alignment:"center"}],...q]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}},{text:"Credit Report",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*","auto","auto","auto"],body:[[{text:"Employee Name",style:"tableHeader",alignment:"center"},{text:"Product Name",style:"tableHeader",alignment:"center"},{text:"Pieces",style:"tableHeader",alignment:"center"},{text:"Price",style:"tableHeader",alignment:"center"},{text:"Amount",style:"tableHeader",alignment:"center"}],...A]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]},{width:"50%",stack:[{text:"Denomination Report",style:"subheader",alignment:"center"},{table:{headerRows:0,widths:["*","auto","*","auto"],body:[[{text:"Bills",style:"tableHeader",alignment:"center"},{text:"Pcs",style:"tableHeader",alignment:"center"},{text:"Coins",style:"tableHeader",alignment:"center"},{text:"Pcs",style:"tableHeader",alignment:"center"}],...T]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]}],columnGap:10},{},{canvas:[{type:"line",x1:0,y1:25,x2:580,y2:25,lineWidth:1,dash:{length:5,space:5},lineColor:"#000000",margin:[0,20,0,0]}]},{margin:[0,20,0,0],stack:[{text:"Summary",style:"subheader",alignment:"center"},Ce]}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableHeader:{bold:!0,fontSize:10,color:"black"},body:{fontSize:8}},pageMargins:[10,10,10,10]}},c=n=>{const m=l(n);Qe.exports.createPdf(m).getDataUrl(f=>{u.value=f,g.value=!0})};return(n,m)=>(w(),S(H,null,[e(F,{class:"my-card q-pa-md"},{default:t(()=>[e(R,null,{default:t(()=>[a("div",al,[(w(!0),S(H,null,pe(Q(x),(f,i)=>(w(),S("div",{key:i},[e(F,{flat:"",dense:"",bordered:""},{default:t(()=>[e(R,null,{default:t(()=>[a("div",nl,[ll,a("div",ol,[e(D,{padding:"xs md",label:"Print",icon:"print",outline:"",class:"user-button",onClick:r=>c(f)},null,8,["onClick"]),a("div",null,[e(se,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[P(" Print Report ")]),_:1})])])]),a("div",sl,[a("div",null,"Name: "+y(_(f.user.employee)),1),a("div",null,"Date: "+y(b(f.created_at)),1),a("div",null,"Time: "+y(s(f.created_at)),1)])]),_:2},1024),a("div",rl,[e(wn,{sales_Reports:[f]},null,8,["sales_Reports"]),e(Tn,{sales_Reports:[f]},null,8,["sales_Reports"]),e(jn,{sales_Reports:[f]},null,8,["sales_Reports"]),e(el,{sales_Reports:[f]},null,8,["sales_Reports"])])]),_:2},1024)]))),128))])]),_:1})]),_:1}),e(Y,{modelValue:g.value,"onUpdate:modelValue":m[0]||(m[0]=f=>g.value=f),maximized:$.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[a("div",il,[a("div",dl,[ne((w(),B(D,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},{default:t(()=>[e(se,null,{default:t(()=>[P("Close")]),_:1})]),_:1})),[[le]])]),a("div",null,[a("iframe",{src:u.value,width:"100%",height:"700px"},null,8,cl)])])]),_:1},8,["modelValue","maximized"])],64))}};var ml=G(ul,[["__scopeId","data-v-03dd6886"]]);const pl={class:"text-h6"},_l={class:"row q-gutter-x-md"},fl={__name:"ProductionReportDialog",props:["reports","reportLabel"],emits:["selectReport","hide","ok","cancel"],setup(o,{emit:h}){const{dialogRef:x,onDialogHide:$,onDialogOK:g,onDialogCancel:u}=$e(),b=o;console.log("production report",b.reports);const s=b.reports.baker_reports,_=b.reports.sales_reports,p=b.reports.sales_reports_id;console.log("sales_report_id",p);const l=h,c=V("bakerReport"),n=V(!0),m=V(!1),f=r=>r?r.split(" ").map(d=>d.charAt(0).toUpperCase()+d.slice(1).toLowerCase()).join(" "):"",i=()=>{l("selectReport",b.reports),m.value=!0};return(r,d)=>(w(),B(Y,{ref_key:"dialogRef",ref:x,modelValue:m.value,"onUpdate:modelValue":d[2]||(d[2]=k=>m.value=k),onHide:Q($),onOk:i,onCancel:Q(u),maximized:n.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(F,{style:{"background-color":"#f7f8fc"}},{default:t(()=>[e(R,{class:"row items-center text-white",style:{"background-color":"#595a5a"}},{default:t(()=>[a("div",pl,y(`${f(o.reports.branch_name)} ( ${o.reportLabel} Reports)`),1),e(qe),a("div",_l,[a("div",null,[ne((w(),B(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(se,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[P("Close")]),_:1})]),_:1})),[[le]])])])]),_:1}),e(R,null,{default:t(()=>[a("div",null,[e(Ie,{modelValue:c.value,"onUpdate:modelValue":d[0]||(d[0]=k=>c.value=k),align:"justify","narrow-indicator":"",class:"q-mb-lg"},{default:t(()=>[e(ie,{class:"text-purple",name:"bakerReport",label:"Baker Reports"}),e(ie,{class:"text-orange",name:"salesReport",label:"Sales Report"})]),_:1},8,["modelValue"])]),a("div",null,[e(Le,{modelValue:c.value,"onUpdate:modelValue":d[1]||(d[1]=k=>c.value=k),animated:"","transition-prev":"scale","transition-next":"scale",style:{"background-color":"#f7f8fc"}},{default:t(()=>[e(de,{name:"bakerReport"},{default:t(()=>[e(ja,{bakersReport:Q(s),sales_report_id:Q(p)},null,8,["bakersReport","sales_report_id"])]),_:1}),e(de,{name:"salesReport"},{default:t(()=>[e(ml,{salesReport:Q(_)},null,8,["salesReport"])]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide","onCancel","maximized"]))}};var gl=G(fl,[["__scopeId","data-v-0a776a06"]]);const vl=o=>(X("data-v-12387bc6"),o=o(),Z(),o),hl={key:0,class:"spinner-wrapper"},yl={key:1},bl={key:0,class:"data-error"},wl=vl(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),xl={class:"row justify-center q-gutter-x-md"},kl={__name:"ProductionTable",setup(o){const h=ye();V("bakerReport");const x=h.params.branch_id;V(!1),V(!0),V(""),V("");const $=V({rowsPerPage:0}),g=it(),u=V(""),b=I(()=>g.productions);V(!0);const s=V(!0),_=V(!1),p=I(()=>u.value?b.value.filter(i=>i.name.toLowerCase().includes(u.value.toLowerCase())):b.value);ke(async()=>{x&&await l(x)});const l=async i=>{try{s.value=!0;const r=await g.fetchBranchProductions(i);console.log("Fetched data:",r),console.log("Production rows:",b.value),b.value.length||(_.value=!0)}catch{_.value=!0}finally{s.value=!1}};Ae(u,async i=>{s.value=!0,await new Promise(r=>setTimeout(r,1e3)),s.value=!1,_.value=p.value.length===0});const n=[{name:"reportDate",align:"center",label:"Date",field:"date",format:i=>ce.formatDate(i,"MMMM DD, YYYY")},{name:"reports",align:"center",label:"Reports",field:"reports"}],m=Se(),f=(i,r)=>{m.dialog({component:gl,componentProps:{reports:i,reportLabel:r}})};return(i,r)=>(w(),S(H,null,[a("div",null,[e(j,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=d=>u.value=d),class:"q-pb-lg q-pl-md",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100",style:{width:"500px","max-width":"1500px","min-width":"100px"}},{append:t(()=>[e(oe,{name:"search"})]),_:1},8,["modelValue"])]),s.value?(w(),S("div",hl,[e(Ge,{size:"50px",color:"primary"})])):(w(),S("div",yl,[p.value.length===0?(w(),S("div",bl,[e(oe,{name:"warning",color:"warning",size:"4em"}),wl])):(w(),B(ue,{key:1,class:"table-container sticky-header",filter:u.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"400px"},columns:n,rows:p.value,"row-key":"reportDate","virtual-scroll":"",pagination:$.value,"onUpdate:pagination":r[1]||(r[1]=d=>$.value=d),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-reports":t(d=>[e(E,{props:d},{default:t(()=>[a("div",xl,[e(D,{padding:"xs lg",rounded:"",dense:"",size:"sm",color:"light-blue-5","text-color":"white",onClick:k=>f(d.row.AM,"AM")},{default:t(()=>[P("AM")]),_:2},1032,["onClick"]),e(D,{padding:"xs lg",rounded:"",dense:"",size:"sm",color:"deep-orange","text-color":"white",onClick:k=>f(d.row.PM,"PM")},{default:t(()=>[P("PM")]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var $l=G(kl,[["__scopeId","data-v-12387bc6"]]);const Cl={__name:"ProductionPage",setup(o){return(h,x)=>(w(),S("div",null,[e($l)]))}},Rl={class:"row justify-between"},Pl=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),Vl=a("div",{class:"text-h6"},"Decline Report",-1),Sl={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){const h=Te(),x=V(""),$=V(!1),g=V(!1),u=V({rowsPerPage:0}),b=Se(),s=o,_=()=>{g.value=!0},p=()=>{$.value=!0},l=async()=>{if(!x.value){b.notify({type:"negative",message:"Remark is required"});return}try{const i=await h.declineReport(s.report.id,x.value);console.log("Report declined:",i),b.notify({type:"negative",message:"Report declined successfully"}),$.value=!1,g.value=!1,x.value=""}catch(i){console.error("Error declining report:",i),b.notify({type:"negative",message:"Failed to decline report"})}},c=async()=>{try{const i=await h.confirmReport(s.report.id);console.log("Report confirmed:",i),b.notify({type:"positive",message:"Report confirmed successfully"}),g.value=!1}catch(i){console.error(i)}},n=I(()=>s.report.selecta_added_stocks||[]),m=i=>{const r=U=>U?U.charAt(0).toUpperCase()+U.slice(1).toLowerCase():"",d=i.firstname?r(i.firstname):"No Firstname",k=i.middlename?r(i.middlename).charAt(0)+".":"",C=i.lastname?r(i.lastname):"No Lastname";return`${d} ${k} ${C}`},f=[{name:"product_name",label:"Product Name",field:i=>i.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:i=>i.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:i=>i.added_stocks?`${i.added_stocks} pcs`:"N/A"}];return(i,r)=>(w(),S(H,null,[a("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:_})]),e(Y,{modelValue:g.value,"onUpdate:modelValue":r[2]||(r[2]=d=>g.value=d)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",Rl,[Pl,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:r[0]||(r[0]=d=>g.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[a("div",null,"Cashier: "+y(m(o.report.employee)),1),a("div",null," Branch: "+y(o.report.branch.name),1),a("div",null,[P(" Status: "),e(re,{color:"yellow",outlined:""},{default:t(()=>[P(y(o.report.status),1)]),_:1})])]),_:1}),e(R,null,{default:t(()=>[e(ue,{rows:n.value,columns:f,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:u.value,"onUpdate:pagination":r[1]||(r[1]=d=>u.value=d),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e(R,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(D,{color:"negative",label:"Decline",class:"action-btn",onClick:p}),e(D,{color:"positive",label:"Confirm",class:"action-btn",onClick:c})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Y,{modelValue:$.value,"onUpdate:modelValue":r[4]||(r[4]=d=>$.value=d)},{default:t(()=>[e(F,null,{default:t(()=>[e(R,null,{default:t(()=>[Vl]),_:1}),e(R,null,{default:t(()=>[e(j,{modelValue:x.value,"onUpdate:modelValue":r[3]||(r[3]=d=>x.value=d),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[d=>!!d||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(De,{align:"right"},{default:t(()=>[ne(e(D,{flat:"",label:"Cancel",color:"primary"},null,512),[[le]]),e(D,{flat:"",label:"Confirm",color:"negative",onClick:l})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Dl=o=>(X("data-v-08e549d4"),o=o(),Z(),o),ql={class:"q-gutter-md q-ma-md"},Nl={class:"row justify-between"},Ul={class:"text-subtitle1"},Tl={class:"text-subtitle1"},Al={class:"text-subtitle1"},Bl={key:1,class:"data-error"},Fl=Dl(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Il={__name:"TransactionPendingCard",setup(o){const h=ye(),x=Te(),$=I(()=>x.pendingSelectaReports),g=h.params.branch_id,u=V("pending"),b=async()=>{try{const l=await x.fetchPendingSelectaStocks(g,u.value);console.log($.value)}catch(l){console.error("Error fetching pending stocks:",l)}};ke(async()=>{g&&await b()});const s=l=>ce.formatDate(l,"MMMM D, YYYY"),_=l=>ce.formatDate(l,"hh:mm A"),p=l=>{const c=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",n=l.firstname?c(l.firstname):"No Firstname",m=l.middlename?c(l.middlename).charAt(0)+".":"",f=l.lastname?c(l.lastname):"No Lastname";return`${n} ${m} ${f}`};return(l,c)=>(w(),S("div",null,[e(Ue,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",ql,[$.value.length?(w(!0),S(H,{key:0},pe($.value,(n,m)=>(w(),B(F,{key:m},{default:t(()=>[e(R,null,{default:t(()=>[a("div",Nl,[a("div",Ul,y(s(n.created_at)),1),a("div",Tl,y(_(n.created_at)),1),a("div",Al,y(n.branch.name)+" - "+y(p(n.employee)),1),a("div",null,[e(re,{color:"yellow",outlined:""},{default:t(()=>[P(" Pending ")]),_:1})]),a("div",null,[e(Sl,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(w(),S("div",Bl,[e(oe,{name:"warning",color:"warning",size:"4em"}),Fl]))])]),_:1})]))}};var Ll=G(Il,[["__scopeId","data-v-08e549d4"]]);const Ml={class:"row justify-between"},zl=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),Hl={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){Te(),V(!1);const h=V(!1),x=()=>{h.value=!0};Se();const $=o,g=I(()=>(console.log("Filtered rows:",$.report||[]),$.report.selecta_added_stocks||[])),u=s=>{const _=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",p=s.firstname?_(s.firstname):"No Firstname",l=s.middlename?_(s.middlename).charAt(0)+".":"",c=s.lastname?_(s.lastname):"No Lastname";return`${p} ${l} ${c}`},b=[{name:"product_name",label:"Product Name",field:s=>(console.log("Row data:",s),s.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:s=>(console.log("Row data:",s),s.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:s=>s.added_stocks?`${s.added_stocks} pcs`:"N/A"}];return(s,_)=>(w(),S(H,null,[a("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:x})]),e(Y,{modelValue:h.value,"onUpdate:modelValue":_[2]||(_[2]=p=>h.value=p)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",Ml,[zl,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=p=>h.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[a("div",null,"Cashier: "+y(u(o.report.employee)),1),a("div",null," Branch: "+y(o.report.branch.name),1),a("div",null,[P(" Status: "),e(re,{color:"green",outlined:""},{default:t(()=>[P(y(o.report.status),1)]),_:1})])]),_:1}),e(R,null,{default:t(()=>[e(ue,{rows:g.value,columns:b,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:s.pagination,"onUpdate:pagination":_[1]||(_[1]=p=>s.pagination=p),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Ol=o=>(X("data-v-c1019cbc"),o=o(),Z(),o),jl={class:"q-gutter-md q-ma-md"},Ql={class:"row justify-between"},El={class:"text-subtitle1"},Kl={class:"text-subtitle1"},Yl={class:"text-subtitle1"},Gl={key:1,class:"data-error"},Jl=Ol(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Wl={__name:"TransactionConfirmedCard",setup(o){const h=ye(),x=Te(),$=I(()=>x.confirmedSelectaReports),g=h.params.branch_id,u=V("confirmed"),b=async()=>{try{const l=await x.fetchConfirmedSelectaStocks(g,u.value);console.log($.value)}catch(l){console.error("Error fetching confirmed stocks:",l)}};ke(async()=>{g&&await b()});const s=l=>ce.formatDate(l,"MMMM D, YYYY"),_=l=>ce.formatDate(l,"hh:mm A"),p=l=>{const c=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",n=l.firstname?c(l.firstname):"No Firstname",m=l.middlename?c(l.middlename).charAt(0)+".":"",f=l.lastname?c(l.lastname):"No Lastname";return`${n} ${m} ${f}`};return(l,c)=>(w(),S("div",null,[e(Ue,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",jl,[$.value.length?(w(!0),S(H,{key:0},pe($.value,(n,m)=>(w(),B(F,{key:m},{default:t(()=>[e(R,null,{default:t(()=>[a("div",Ql,[a("div",El,y(s(n.created_at)),1),a("div",Kl,y(_(n.created_at)),1),a("div",Yl,y(n.branch.name)+" - "+y(p(n.employee)),1),a("div",null,[e(re,{color:"green",outlined:""},{default:t(()=>[P(y(n.status),1)]),_:2},1024)]),a("div",null,[e(Hl,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(w(),S("div",Gl,[e(oe,{name:"warning",color:"warning",size:"4em"}),Jl]))])]),_:1})]))}};var Xl=G(Wl,[["__scopeId","data-v-c1019cbc"]]);const Zl={class:"row justify-between"},eo=a("div",{class:"text-h6"},"Selecta Added Stocks Report",-1),to={class:"q-mt-md"},ao={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){Te(),V(!1);const h=V(!1),x=()=>{h.value=!0},$=o,g=I(()=>(console.log("Filtered rows:",$.report||[]),$.report.selecta_added_stocks||[])),u=s=>{const _=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",p=s.firstname?_(s.firstname):"No Firstname",l=s.middlename?_(s.middlename).charAt(0)+".":"",c=s.lastname?_(s.lastname):"No Lastname";return`${p} ${l} ${c}`},b=[{name:"product_name",label:"Product Name",field:s=>(console.log("Row data:",s),s.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:s=>(console.log("Row data:",s),s.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:s=>s.added_stocks?`${s.added_stocks} pcs`:"N/A"}];return(s,_)=>(w(),S(H,null,[a("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:x})]),e(Y,{modelValue:h.value,"onUpdate:modelValue":_[2]||(_[2]=p=>h.value=p)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",Zl,[eo,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=p=>h.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[a("div",null,"Cashier: "+y(u(o.report.employee)),1),a("div",null," Branch: "+y(o.report.branch.name),1),a("div",null,[P(" Status: "),e(re,{color:"red",outlined:""},{default:t(()=>[P(y(o.report.status),1)]),_:1})]),a("div",to,"Remark: "+y(o.report.remark),1)]),_:1}),e(R,null,{default:t(()=>[e(ue,{rows:g.value,columns:b,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:s.pagination,"onUpdate:pagination":_[1]||(_[1]=p=>s.pagination=p),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const no=o=>(X("data-v-6b801095"),o=o(),Z(),o),lo={class:"q-gutter-md q-ma-md"},oo={class:"row justify-between"},so={class:"text-subtitle1"},ro={class:"text-subtitle1"},io={class:"text-subtitle1"},co={key:1,class:"data-error"},uo=no(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),mo={__name:"TransactionDeclinedCard",setup(o){const h=ye(),x=Te(),$=I(()=>x.declinedSelectaReports),g=h.params.branch_id,u=V("declined"),b=async()=>{try{const l=await x.fetchDeclinedSelectaStocks(g,u.value);console.log("selectedProductsDeclined",$.value)}catch(l){console.error("Error fetching decline stocks:",l)}};ke(async()=>{g&&await b()});const s=l=>ce.formatDate(l,"MMMM D, YYYY"),_=l=>ce.formatDate(l,"hh:mm A"),p=l=>{const c=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",n=l.firstname?c(l.firstname):"No Firstname",m=l.middlename?c(l.middlename).charAt(0)+".":"",f=l.lastname?c(l.lastname):"No Lastname";return`${n} ${m} ${f}`};return(l,c)=>(w(),S("div",null,[e(Ue,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",lo,[$.value.length?(w(!0),S(H,{key:0},pe($.value,(n,m)=>(w(),B(F,{key:m},{default:t(()=>[e(R,null,{default:t(()=>[a("div",oo,[a("div",so,y(s(n.created_at)),1),a("div",ro,y(_(n.created_at)),1),a("div",io,y(n.branch.name)+" - "+y(p(n.employee)),1),a("div",null,[e(re,{color:"red",outlined:""},{default:t(()=>[P(y(n.status),1)]),_:2},1024)]),a("div",null,[e(ao,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(w(),S("div",co,[e(oe,{name:"warning",color:"warning",size:"4em"}),uo]))])]),_:1})]))}};var po=G(mo,[["__scopeId","data-v-6b801095"]]);const _o={class:"q-gutter-y-sm"},fo={__name:"SelectaTransactionPage",setup(o){const h=V("pendingReports"),x=I(()=>{switch(h.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return($,g)=>(w(),S(H,null,[a("div",_o,[e(Ie,{modelValue:h.value,"onUpdate:modelValue":g[0]||(g[0]=u=>h.value=u),"indicator-color":x.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(ie,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(ie,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(ie,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Le,{modelValue:h.value,"onUpdate:modelValue":g[1]||(g[1]=u=>h.value=u),animated:""},{default:t(()=>[e(de,{name:"pendingReports"},{default:t(()=>[e(Ll)]),_:1}),e(de,{name:"confirmReports"},{default:t(()=>[e(Xl)]),_:1}),e(de,{name:"declineReports"},{default:t(()=>[e(po)]),_:1})]),_:1},8,["modelValue"])],64))}};var go=G(fo,[["__scopeId","data-v-6cbd59c6"]]);const vo={class:"row justify-between"},ho=a("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),yo=a("div",{class:"text-h6"},"Decline Report",-1),bo={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){const h=Me(),x=V(""),$=V(!1),g=V(!1),u=V({rowPerPage:0}),b=Se(),s=o,_=()=>{g.value=!0},p=()=>{$.value=!0},l=async()=>{if(!x.value){b.notify({type:"negative",message:"Remark is required"});return}try{const i=await h.declineReport(s.report.id,x.value);console.log("Report declined:",i),b.notify({type:"negative",message:"Report declined successfully"}),$.value=!1,g.value=!1,x.value=""}catch(i){console.error("Error declining report:",i),b.notify({type:"negative",message:"Failed to decline report"})}},c=async()=>{try{const i=await h.confirmReport(s.report.id);console.log("Report confirmed:",i),b.notify({type:"positive",message:"Report confirmed successfully"}),g.value=!1}catch(i){console.error(i)}},n=I(()=>s.report.softdrinks_added_stocks||[]),m=i=>{const r=U=>U?U.charAt(0).toUpperCase()+U.slice(1).toLowerCase():"",d=i.firstname?r(i.firstname):"No Firstname",k=i.middlename?r(i.middlename).charAt(0)+".":"",C=i.lastname?r(i.lastname):"No Lastname";return`${d} ${k} ${C}`},f=[{name:"product_name",label:"Product Name",field:i=>i.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:i=>i.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:i=>i.added_stocks?`${i.added_stocks} pcs`:"N/A"}];return(i,r)=>(w(),S("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:_}),e(Y,{modelValue:g.value,"onUpdate:modelValue":r[2]||(r[2]=d=>g.value=d)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",vo,[ho,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:r[0]||(r[0]=d=>g.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[a("div",null,"Cashier: "+y(m(o.report.employee)),1),a("div",null," Branch: "+y(o.report.branch.name),1),a("div",null,[P(" Status: "),e(re,{color:"yellow",outlined:""},{default:t(()=>[P(y(o.report.status),1)]),_:1})])]),_:1}),e(R,null,{default:t(()=>[e(ue,{rows:n.value,columns:f,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:u.value,"onUpdate:pagination":r[1]||(r[1]=d=>u.value=d),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e(R,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(D,{color:"negative",label:"Decline",class:"action-btn",onClick:p}),e(D,{color:"positive",label:"Confirm",class:"action-btn",onClick:c})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Y,{modelValue:$.value,"onUpdate:modelValue":r[4]||(r[4]=d=>$.value=d)},{default:t(()=>[e(F,null,{default:t(()=>[e(R,null,{default:t(()=>[yo]),_:1}),e(R,null,{default:t(()=>[e(j,{modelValue:x.value,"onUpdate:modelValue":r[3]||(r[3]=d=>x.value=d),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[d=>!!d||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(De,{align:"right"},{default:t(()=>[ne(e(D,{flat:"",label:"Cancel",color:"primary"},null,512),[[le]]),e(D,{flat:"",label:"Confirm",color:"negative",onClick:l})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};const wo=o=>(X("data-v-7ba0107e"),o=o(),Z(),o),xo={class:"q-gutter-md q-ma-md"},ko={class:"row justify-between"},$o={class:"text-subtitle1"},Co={class:"text-subtitle1"},Ro={class:"text-subtitle1"},Po={key:1,class:"data-error"},Vo=wo(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),So={__name:"TransactionPendingCard",setup(o){const h=ye(),x=Me(),$=I(()=>x.pendingSoftdrinksReports),g=h.params.branch_id,u=V("pending"),b=async()=>{try{const l=await x.fetchPendingSoftdrinksStocks(g,u.value);console.log($.value)}catch(l){console.error("Error fetching pending stocks:",l)}};ke(async()=>{g&&await b()});const s=l=>ce.formatDate(l,"MMMM D, YYYY"),_=l=>ce.formatDate(l,"hh:mm A"),p=l=>{const c=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",n=l.firstname?c(l.firstname):"No Firstname",m=l.middlename?c(l.middlename).charAt(0)+".":"",f=l.lastname?c(l.lastname):"No Lastname";return`${n} ${m} ${f}`};return(l,c)=>(w(),S("div",null,[e(Ue,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",xo,[$.value.length?(w(!0),S(H,{key:0},pe($.value,(n,m)=>(w(),B(F,{key:m},{default:t(()=>[e(R,null,{default:t(()=>[a("div",ko,[a("div",$o,y(s(n.created_at)),1),a("div",Co,y(_(n.created_at)),1),a("div",Ro,y(n.branch.name)+" - "+y(p(n.employee)),1),a("div",null,[e(re,{color:"yellow",outlined:""},{default:t(()=>[P(" Pending ")]),_:1})]),a("div",null,[e(bo,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(w(),S("div",Po,[e(oe,{name:"warning",color:"warning",size:"4em"}),Vo]))])]),_:1})]))}};var Do=G(So,[["__scopeId","data-v-7ba0107e"]]);const qo={class:"row justify-between"},No=a("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),Uo={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){Me(),V(!1);const h=V(!1),x=()=>{h.value=!0},$=o,g=I(()=>(console.log("Filtered rows:",$.report||[]),$.report.softdrinks_added_stocks||[])),u=s=>{const _=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",p=s.firstname?_(s.firstname):"No Firstname",l=s.middlename?_(s.middlename).charAt(0)+".":"",c=s.lastname?_(s.lastname):"No Lastname";return`${p} ${l} ${c}`},b=[{name:"product_name",label:"Product Name",field:s=>(console.log("Row data:",s),s.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:s=>(console.log("Row data:",s),s.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:s=>s.added_stocks?`${s.added_stocks} pcs`:"N/A"}];return(s,_)=>(w(),S(H,null,[a("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:x})]),e(Y,{modelValue:h.value,"onUpdate:modelValue":_[2]||(_[2]=p=>h.value=p)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",qo,[No,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=p=>h.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[a("div",null,"Cashier: "+y(u(o.report.employee)),1),a("div",null," Branch: "+y(o.report.branch.name),1),a("div",null,[P(" Status: "),e(re,{color:"green",outlined:""},{default:t(()=>[P(y(o.report.status),1)]),_:1})])]),_:1}),e(R,null,{default:t(()=>[e(ue,{rows:g.value,columns:b,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:s.pagination,"onUpdate:pagination":_[1]||(_[1]=p=>s.pagination=p),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const To=o=>(X("data-v-2b1290c8"),o=o(),Z(),o),Ao={class:"q-gutter-md q-ma-md"},Bo={class:"row justify-between"},Fo={class:"text-subtitle1"},Io={class:"text-subtitle1"},Lo={class:"text-subtitle1"},Mo={key:1,class:"data-error"},zo=To(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ho={__name:"TransactionConfirmedCard",setup(o){const h=ye(),x=Me(),$=I(()=>x.confirmedSoftdrinksReports),g=h.params.branch_id,u=V("confirmed"),b=async()=>{try{const l=await x.fetchConfirmedSoftdrinksStocks(g,u.value);console.log($.value)}catch(l){console.error("Error fetching confirmed stocks",l)}};ke(async()=>{g&&await b()});const s=l=>ce.formatDate(l,"MMMM D, YYYY"),_=l=>ce.formatDate(l,"hh:mm A"),p=l=>{const c=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",n=l.firstname?c(l.firstname):"No Firstname",m=l.middlename?c(l.middlename).charAt(0)+".":"",f=l.lastname?c(l.lastname):"No Lastname";return`${n} ${m} ${f}`};return(l,c)=>(w(),S("div",null,[e(Ue,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Ao,[$.value.length?(w(!0),S(H,{key:0},pe($.value,(n,m)=>(w(),B(F,{key:m},{default:t(()=>[e(R,null,{default:t(()=>[a("div",Bo,[a("div",Fo,y(s(n.created_at)),1),a("div",Io,y(_(n.created_at)),1),a("div",Lo,y(n.branch.name)+" - "+y(p(n.employee)),1),a("div",null,[e(re,{color:"green",outlined:""},{default:t(()=>[P(y(n.status),1)]),_:2},1024)]),a("div",null,[e(Uo,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(w(),S("div",Mo,[e(oe,{name:"warning",color:"warning",size:"4em"}),zo]))])]),_:1})]))}};var Oo=G(Ho,[["__scopeId","data-v-2b1290c8"]]);const jo={class:"row justify-between"},Qo=a("div",{class:"text-h6"},"Softdrinks Added Stocks Report",-1),Eo={class:"q-mt-md"},Ko={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){Me();const h=V(!1),x=()=>{h.value=!0},$=o,g=I(()=>(console.log("Filtered rows:",$.report||[]),$.report.softdrinks_added_stocks)),u=s=>{const _=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",p=s.firstname?_(s.firstname):"No Firstname",l=s.middlename?_(s.middlename).charAt(0)+".":"",c=s.lastname?_(s.lastname):"No Lastname";return`${p} ${l} ${c}`},b=[{name:"product_name",label:"Product Name",field:s=>(console.log("Row data:",s),s.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:s=>(console.log("Row data:",s),s.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:s=>s.added_stocks?`${s.added_stocks} pcs`:"N/A"}];return(s,_)=>(w(),S(H,null,[a("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:x})]),e(Y,{modelValue:h.value,"onUpdate:modelValue":_[2]||(_[2]=p=>h.value=p)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",jo,[Qo,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=p=>h.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[a("div",null,"Cashier: "+y(u(o.report.employee)),1),a("div",null," Branch: "+y(o.report.branch.name),1),a("div",null,[P(" Status: "),e(re,{color:"red",outlined:""},{default:t(()=>[P(y(o.report.status),1)]),_:1})]),a("div",Eo,"Remark: "+y(o.report.remark),1)]),_:1}),e(R,null,{default:t(()=>[e(ue,{rows:g.value,columns:b,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:s.pagination,"onUpdate:pagination":_[1]||(_[1]=p=>s.pagination=p),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Yo=o=>(X("data-v-51a1abe5"),o=o(),Z(),o),Go={class:"q-gutter-md q-ma-md"},Jo={class:"row justify-between"},Wo={class:"text-subtitle1"},Xo={class:"text-subtitle1"},Zo={class:"text-subtitle1"},es={key:1,class:"data-error"},ts=Yo(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),as={__name:"TransactionDeclinedCard",setup(o){const h=ye(),x=Me(),$=I(()=>x.declinedSoftdrinksReports),g=h.params.branch_id,u=V("declined"),b=async()=>{try{const l=await x.fetchDeclinedSoftdrinksStocks(g,u.value);console.log("softdrinksProductsDeclined",$.value)}catch(l){console.error("Error fetching decline stocks:",l)}};ke(async()=>{g&&await b()});const s=l=>ce.formatDate(l,"MMMM D, YYYY"),_=l=>ce.formatDate(l,"hh:mm A"),p=l=>{const c=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",n=l.firstname?c(l.firstname):"No Firstname",m=l.middlename?c(l.middlename).charAt(0)+".":"",f=l.lastname?c(l.lastname):"No Lastname";return`${n} ${m} ${f}`};return(l,c)=>(w(),B(Ue,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Go,[$.value.length?(w(!0),S(H,{key:0},pe($.value,(n,m)=>(w(),B(F,{key:m},{default:t(()=>[e(R,null,{default:t(()=>[a("div",Jo,[a("div",Wo,y(s(n.created_at)),1),a("div",Xo,y(_(n.created_at)),1),a("div",Zo,y(n.branch.name)+" - "+y(p(n.employee)),1),a("div",null,[e(re,{color:"red",outlined:""},{default:t(()=>[P(y(n.status),1)]),_:2},1024)]),a("div",null,[e(Ko,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(w(),S("div",es,[e(oe,{name:"warning",color:"warning",size:"4em"}),ts]))])]),_:1}))}};var ns=G(as,[["__scopeId","data-v-51a1abe5"]]);const ls={class:"q-gutter-y-sm"},os={__name:"SoftdrinksTransactionPage",setup(o){const h=V("pendingReports"),x=I(()=>{switch(h.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return($,g)=>(w(),S(H,null,[a("div",ls,[e(Ie,{modelValue:h.value,"onUpdate:modelValue":g[0]||(g[0]=u=>h.value=u),"indicator-color":x.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(ie,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(ie,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(ie,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Le,{modelValue:h.value,"onUpdate:modelValue":g[1]||(g[1]=u=>h.value=u),animated:""},{default:t(()=>[e(de,{name:"pendingReports"},{default:t(()=>[e(Do)]),_:1}),e(de,{name:"confirmReports"},{default:t(()=>[e(Oo)]),_:1}),e(de,{name:"declineReports"},{default:t(()=>[e(ns)]),_:1})]),_:1},8,["modelValue"])],64))}};var ss=G(os,[["__scopeId","data-v-368f5ccc"]]);const rs={class:"row justify-between"},is=a("div",{class:"text-h6"},"Other Product Added Stocks Report",-1),ds=a("div",{class:"text-h6"},"Decline Report",-1),cs={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){const h=Je(),x=V(""),$=V(!1),g=V(!1),u=V({rowsPerPage:0}),b=()=>{g.value=!0},s=()=>{$.value=!0},_=o,p=async()=>{if(!x.value){he.create({type:"negative",message:"Remark is required"});return}try{const f=await h.declineReport(_.report.id,x.value);console.log("Report declined:",f),he.create({type:"negative",message:"Report declined successfully"}),$.value=!1,g.value=!1,x.value=""}catch(f){console.error("Error declining report:",f),he.create({type:"negative",message:"Failed to decline report"})}},l=async()=>{try{const f=await h.confirmReport(_.report.id);console.log("Report confirmed:",f),he.create({type:"positive",message:"Report confirmed successfully"}),g.value=!1}catch(f){console.error(f)}},c=I(()=>_.report.other_added_stock||[]),n=[{name:"product_name",label:"Product Name",field:f=>f.product.name||"N/A",align:"left"},{name:"price",label:"Price",align:"center",field:f=>f.price||"N/A"},{name:"added_stocks",label:"Added Stocks",align:"center",field:f=>f.added_stocks?`${f.added_stocks} pcs`:"N/A"}],m=f=>{const i=C=>C?C.charAt(0).toUpperCase()+C.slice(1).toLowerCase():"",r=f.firstname?i(f.firstname):"No Firstname",d=f.middlename?i(f.middlename).charAt(0)+".":"",k=f.lastname?i(f.lastname):"No Lastname";return`${r} ${d} ${k}`};return(f,i)=>(w(),S(H,null,[a("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:b})]),e(Y,{modelValue:g.value,"onUpdate:modelValue":i[2]||(i[2]=r=>g.value=r)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",rs,[is,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:i[0]||(i[0]=r=>g.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[a("div",null,"Cashier: "+y(m(o.report.employee)),1),a("div",null," Branch: "+y(o.report.branch.name),1),a("div",null,[P(" Status: "),e(re,{color:"yellow",outlined:""},{default:t(()=>[P(y(o.report.status),1)]),_:1})])]),_:1}),e(R,null,{default:t(()=>[e(ue,{rows:c.value,columns:n,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:u.value,"onUpdate:pagination":i[1]||(i[1]=r=>u.value=r),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1}),e(R,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(D,{color:"negative",label:"Decline",class:"action-btn",onClick:s}),e(D,{color:"positive",label:"Confirm",class:"action-btn",onClick:l})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Y,{modelValue:$.value,"onUpdate:modelValue":i[4]||(i[4]=r=>$.value=r)},{default:t(()=>[e(F,null,{default:t(()=>[e(R,null,{default:t(()=>[ds]),_:1}),e(R,null,{default:t(()=>[e(j,{modelValue:x.value,"onUpdate:modelValue":i[3]||(i[3]=r=>x.value=r),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[r=>!!r||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(De,{align:"right"},{default:t(()=>[ne(e(D,{flat:"",label:"Cancel",color:"primary"},null,512),[[le]]),e(D,{flat:"",label:"Confirm",color:"negative",onClick:p})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const us=o=>(X("data-v-355e3e60"),o=o(),Z(),o),ms={class:"q-gutter-md q-ma-md"},ps={key:0},_s={class:"row justify-between"},fs={class:"text-subtitle1"},gs={class:"text-subtitle1"},vs={class:"text-subtitle1"},hs={key:1,class:"data-error"},ys=us(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),bs={__name:"TransactionPendingCard",setup(o){const h=ye(),x=Je(),$=I(()=>x.pendingOtherReports),g=h.params.branch_id,u=V("pending"),b=async()=>{try{const l=await x.fetchPendingOtherStocks(g,u.value);console.log($.value)}catch(l){console.error("Error fetching pending stocks:",l)}};ke(async()=>{g&&await b()});const s=l=>ce.formatDate(l,"MMMM D, YYYY"),_=l=>ce.formatDate(l,"hh:mm A"),p=l=>{const c=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",n=l.firstname?c(l.firstname):"No Firstname",m=l.middlename?c(l.middlename).charAt(0)+".":"",f=l.lastname?c(l.lastname):"No Lastname";return`${n} ${m} ${f}`};return(l,c)=>(w(),S("div",null,[e(Ue,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",ms,[$.value.length?(w(),S("div",ps,[(w(!0),S(H,null,pe($.value,(n,m)=>(w(),B(F,{key:m},{default:t(()=>[e(R,null,{default:t(()=>[a("div",_s,[a("div",fs,y(s(n.created_at)),1),a("div",gs,y(_(n.created_at)),1),a("div",vs,y(n.branch.name)+" - "+y(p(n.employee)),1),a("div",null,[e(re,{color:"yellow",outlined:""},{default:t(()=>[P(" Pending ")]),_:1})]),a("div",null,[e(cs,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128))])):(w(),S("div",hs,[e(oe,{name:"warning",color:"warning",size:"4em"}),ys]))])]),_:1})]))}};var ws=G(bs,[["__scopeId","data-v-355e3e60"]]);const xs={class:"row justify-between"},ks=a("div",{class:"text-h6"},"Other Added Stocks Report",-1),$s={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){Te(),V(!1);const h=V(!1),x=()=>{h.value=!0};Se();const $=o,g=I(()=>(console.log("Filtered rows:",$.report||[]),$.report.other_added_stock||[])),u=s=>{const _=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",p=s.firstname?_(s.firstname):"No Firstname",l=s.middlename?_(s.middlename).charAt(0)+".":"",c=s.lastname?_(s.lastname):"No Lastname";return`${p} ${l} ${c}`},b=[{name:"product_name",label:"Product Name",field:s=>(console.log("Row data:",s),s.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:s=>(console.log("Row data:",s),s.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:s=>s.added_stocks?`${s.added_stocks} pcs`:"N/A"}];return(s,_)=>(w(),S(H,null,[a("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:x})]),e(Y,{modelValue:h.value,"onUpdate:modelValue":_[2]||(_[2]=p=>h.value=p)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",xs,[ks,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=p=>h.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[a("div",null,"Cashier: "+y(u(o.report.employee)),1),a("div",null," Branch: "+y(o.report.branch.name),1),a("div",null,[P(" Status: "),e(re,{color:"green",outlined:""},{default:t(()=>[P(y(o.report.status),1)]),_:1})])]),_:1}),e(R,null,{default:t(()=>[e(ue,{rows:g.value,columns:b,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:s.pagination,"onUpdate:pagination":_[1]||(_[1]=p=>s.pagination=p),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Cs=o=>(X("data-v-5b0a7351"),o=o(),Z(),o),Rs={class:"q-gutter-md q-ma-md"},Ps={class:"row justify-between"},Vs={class:"text-subtitle1"},Ss={class:"text-subtitle1"},Ds={class:"text-subtitle1"},qs={key:1,class:"data-error"},Ns=Cs(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Us={__name:"TransactionConfirmedCard",setup(o){const h=ye(),x=Je(),$=I(()=>x.confirmedOtherReports),g=h.params.branch_id,u=V("confirmed"),b=async()=>{try{const l=await x.fetchConfirmedOtherStocks(g,u.value);console.log($.value)}catch(l){console.error("Error fetching confirmed stocks:",l)}};ke(async()=>{g&&await b()});const s=l=>ce.formatDate(l,"MMMM D, YYYY"),_=l=>ce.formatDate(l,"hh:mm A"),p=l=>{const c=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",n=l.firstname?c(l.firstname):"No Firstname",m=l.middlename?c(l.middlename).charAt(0)+".":"",f=l.lastname?c(l.lastname):"No Lastname";return`${n} ${m} ${f}`};return(l,c)=>(w(),S("div",null,[e(Ue,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Rs,[$.value.length?(w(!0),S(H,{key:0},pe($.value,(n,m)=>(w(),B(F,{key:m},{default:t(()=>[e(R,null,{default:t(()=>[a("div",Ps,[a("div",Vs,y(s(n.created_at)),1),a("div",Ss,y(_(n.created_at)),1),a("div",Ds,y(n.branch.name)+" - "+y(p(n.employee)),1),a("div",null,[e(re,{color:"green",outlined:""},{default:t(()=>[P(y(n.status),1)]),_:2},1024)]),a("div",null,[e($s,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(w(),S("div",qs,[e(oe,{name:"warning",color:"warning",size:"4em"}),Ns]))])]),_:1})]))}};var Ts=G(Us,[["__scopeId","data-v-5b0a7351"]]);const As={class:"row justify-between"},Bs=a("div",{class:"text-h6"},"Others Added Stocks Report",-1),Fs={class:"q-mt-md"},Is={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){Te(),V(!1);const h=V(!1),x=()=>{h.value=!0},$=o,g=I(()=>(console.log("Filtered rows:",$.report||[]),$.report.other_added_stock||[])),u=s=>{const _=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",p=s.firstname?_(s.firstname):"No Firstname",l=s.middlename?_(s.middlename).charAt(0)+".":"",c=s.lastname?_(s.lastname):"No Lastname";return`${p} ${l} ${c}`},b=[{name:"product_name",label:"Product Name",field:s=>(console.log("Row data:",s),s.product.name||"N/A"),align:"left"},{name:"price",label:"Price",align:"center",field:s=>(console.log("Row data:",s),s.price||"N/A")},{name:"added_stocks",label:"Added Stocks",align:"center",field:s=>s.added_stocks?`${s.added_stocks} pcs`:"N/A"}];return(s,_)=>(w(),S(H,null,[a("div",null,[e(D,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:x})]),e(Y,{modelValue:h.value,"onUpdate:modelValue":_[2]||(_[2]=p=>h.value=p)},{default:t(()=>[e(F,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(R,null,{default:t(()=>[a("div",As,[Bs,e(D,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:_[0]||(_[0]=p=>h.value=!1)})])]),_:1}),e(R,null,{default:t(()=>[a("div",null,"Cashier: "+y(u(o.report.employee)),1),a("div",null," Branch: "+y(o.report.branch.name),1),a("div",null,[P(" Status: "),e(re,{color:"red",outlined:""},{default:t(()=>[P(y(o.report.status),1)]),_:1})]),a("div",Fs,"Remark: "+y(o.report.remark),1)]),_:1}),e(R,null,{default:t(()=>[e(ue,{rows:g.value,columns:b,"row-key":"id",flat:"",bordered:"",dense:"","virtual-scroll":"",pagination:s.pagination,"onUpdate:pagination":_[1]||(_[1]=p=>s.pagination=p),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["rows","pagination"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const Ls=o=>(X("data-v-67ff56ab"),o=o(),Z(),o),Ms={class:"q-gutter-md q-ma-md"},zs={class:"row justify-between"},Hs={class:"text-subtitle1"},Os={class:"text-subtitle1"},js={class:"text-subtitle1"},Qs={key:1,class:"data-error"},Es=Ls(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ks={__name:"TransactionDeclinedCard",setup(o){const h=ye(),x=Je(),$=I(()=>x.declinedOtherReports),g=h.params.branch_id,u=V("declined"),b=async()=>{try{const l=await x.fetchDeclinedOtherStocks(g,u.value);console.log("selectedOtherProductDeclined",$.value)}catch(l){console.error("Error fetching decline stocks:",l)}};ke(async()=>{g&&await b()});const s=l=>ce.formatDate(l,"MMMM D, YYYY"),_=l=>ce.formatDate(l,"hh:mm A"),p=l=>{const c=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",n=l.firstname?c(l.firstname):"No Firstname",m=l.middlename?c(l.middlename).charAt(0)+".":"",f=l.lastname?c(l.lastname):"No Lastname";return`${n} ${m} ${f}`};return(l,c)=>(w(),S("div",null,[e(Ue,{style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Ms,[$.value.length?(w(!0),S(H,{key:0},pe($.value,(n,m)=>(w(),B(F,{key:m},{default:t(()=>[e(R,null,{default:t(()=>[a("div",zs,[a("div",Hs,y(s(n.created_at)),1),a("div",Os,y(_(n.created_at)),1),a("div",js,y(n.branch.name)+" - "+y(p(n.employee)),1),a("div",null,[e(re,{color:"red",outlined:""},{default:t(()=>[P(y(n.status),1)]),_:2},1024)]),a("div",null,[e(Is,{report:n},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128)):(w(),S("div",Qs,[e(oe,{name:"warning",color:"warning",size:"4em"}),Es]))])]),_:1})]))}};var Ys=G(Ks,[["__scopeId","data-v-67ff56ab"]]);const Gs={class:"q-gutter-y-sm"},Js={__name:"OtherTransactionPage",setup(o){const h=V("pendingReports"),x=I(()=>{switch(h.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return($,g)=>(w(),S(H,null,[a("div",Gs,[e(Ie,{modelValue:h.value,"onUpdate:modelValue":g[0]||(g[0]=u=>h.value=u),"indicator-color":x.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify"},{default:t(()=>[e(ie,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Reports"}),e(ie,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Reports"}),e(ie,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Reports"})]),_:1},8,["modelValue","indicator-color"])]),e(Le,{modelValue:h.value,"onUpdate:modelValue":g[1]||(g[1]=u=>h.value=u),animated:""},{default:t(()=>[e(de,{name:"pendingReports"},{default:t(()=>[e(ws)]),_:1}),e(de,{name:"confirmReports"},{default:t(()=>[e(Ts)]),_:1}),e(de,{name:"declineReports"},{default:t(()=>[e(Ys)]),_:1})]),_:1},8,["modelValue"])],64))}};var Ws=G(Js,[["__scopeId","data-v-b76c19b4"]]);const ct=o=>(X("data-v-0a732ed6"),o=o(),Z(),o),Xs={class:"q-gutter-y-sm"},Zs=ct(()=>a("h1",null,"Bread",-1)),er=ct(()=>a("h1",null,"Cake",-1)),tr={__name:"TransactionPage",setup(o){const h=V("bread");return(x,$)=>(w(),S(H,null,[a("div",Xs,[e(Ie,{modelValue:h.value,"onUpdate:modelValue":$[0]||($[0]=g=>h.value=g),"active-color":"light-green-13","indicator-color":"light-green-13","narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:"gradient-btn"},{default:t(()=>[e(ie,{class:"text-white",name:"bread",label:"\u{1F35E}Bread"}),e(ie,{class:"text-white",name:"selecta",label:"\u{1F366}Selecta"}),e(ie,{class:"text-white",name:"softdrinks",label:"\u{1F964}Softdrinks"}),e(ie,{class:"text-white",name:"cake",label:"\u{1F370}Cake"}),e(ie,{class:"text-white",name:"other",label:"\u2B50Others"})]),_:1},8,["modelValue"])]),e(Le,{modelValue:h.value,"onUpdate:modelValue":$[1]||($[1]=g=>h.value=g),animated:""},{default:t(()=>[e(de,{name:"bread"},{default:t(()=>[e(F,null,{default:t(()=>[Zs]),_:1})]),_:1}),e(de,{name:"selecta"},{default:t(()=>[e(go)]),_:1}),e(de,{name:"softdrinks"},{default:t(()=>[e(ss)]),_:1}),e(de,{name:"cake"},{default:t(()=>[e(F,null,{default:t(()=>[er]),_:1})]),_:1}),e(de,{name:"other"},{default:t(()=>[e(Ws)]),_:1})]),_:1},8,["modelValue"])],64))}};var ar=G(tr,[["__scopeId","data-v-0a732ed6"]]);const Be=o=>(X("data-v-f0d86c36"),o=o(),Z(),o),nr=Be(()=>a("div",{class:"text-h6"},"Create Branch Recipe",-1)),lr={class:"q-mb-lg"},or={key:0,class:"custom-list z-top"},sr={class:"q-mb-sm"},rr=Be(()=>a("div",null,"Recipe Name",-1)),ir={class:"q-mb-lg"},dr=Be(()=>a("div",null,"Category",-1)),cr=Be(()=>a("div",null,"Breads",-1)),ur={class:"q-mt-md q-gutter-y-sm"},mr=Be(()=>a("div",{class:"text-weight-thin"},"Ingredients List",-1)),pr={class:"q-mt-xl q-gutter-y-sm"},_r={class:"row justify-between"},fr=Be(()=>a("div",{align:"center"},"Ingredients",-1)),gr=Be(()=>a("div",{align:"center"},"Quantity",-1)),vr=["onKeyup"],hr={align:"right"},yr={__name:"RecipeCreate",setup(o){const h=ye(),x=h.params.branch_id,$=yt(),g=I(()=>$.recipes),u=Ee(),b=nt(),s=Ee(),_=I(()=>u.branchRecipes),p=V(!1),l=()=>{p.value=!0},c=()=>{clearForm(),p.value=!1},n=M=>M?M.split(" ").map(z=>z.charAt(0).toUpperCase()+z.slice(1).toLowerCase()).join(" "):"",m=V(""),f=async()=>{$.searchRecipe(m.value)},i=I(()=>d.target!==0),r=M=>{d.recipe_id=M.id,d.recipe_name=M.name,d.category=M.category,m.value=""},d=He({recipe_id:"",recipe_name:"",category:"",target:"",branches_id:h.params.branch_id}),k=V(!1),C=V(null),U=V([]),N=V(U.value),A=V([]),v=V([]),q=He({name:"",quantity:""}),T=V(v.value);(async()=>{await b.fetchProductsByCategory("Bread"),k.value=!1,U.value=b.breads.map(M=>({label:M.name,value:M.id}))})(),(async()=>{const M="Ingredients";await s.fetchBranchRawMaterials(M,x),k.value=!1,v.value=s.ingredients.map(z=>({label:z.raw_material_name,value:z.raw_material_id,unit:z.ingredient_unit}))})();const Ce=()=>{q.name="",q.quantity=""},L=(M,z)=>{M.length>2&&(U.value.includes(M)||z(M,"add-unique"))},ee=(M,z)=>{z(()=>{if(M==="")N.value=U.value;else{const be=M.toLowerCase();N.value=U.value.filter(W=>W.label.toLowerCase().indexOf(be)>-1)}})},O=(M,z)=>{z(()=>{if(M==="")T.value=v.value;else{const be=M.toLowerCase();T.value=v.value.filter(W=>W.label.toLowerCase().indexOf(be)>-1)}})},te=()=>{const M=A.value;function z(Pe,Fe){return Pe.find(Oe=>Oe.ingredients_id==Fe)}const be=q.name.value;z(M,be)?he.create({type:"negative",icon:"warning",message:"Ingredient already exist",timeout:2e3}):(A.value=[...M,{ingredients_id:q.name.value,label:q.name.label,quantity:q.quantity,unit:q.name.unit}],Ce())},xe=M=>{A.value.splice(M,1)};Ae(()=>q.name,M=>{M&&M.unit?q.unit=M.unit:q.unit=""});const _e=()=>{d.recipe_id="",d.target="",C.value=null,A.value=[],q.name="",q.quantity=""},ve=async()=>{const M={recipe_id:d.recipe_id,target:d.target,status:"active",branch_id:d.branches_id,breads:C.value.map(z=>({bread_id:z.value})),ingredients:A.value.map(z=>({ingredient_id:z.ingredients_id,quantity:z.quantity}))};console.log("branchRecipe",M),await u.saveBranchRecipe(M),_.value=await u.fetchBranchRecipes(x),_e(),p.value=!1};return(M,z)=>(w(),S(H,null,[e(D,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Recipe",onClick:l}),e(Y,{modelValue:p.value,"onUpdate:modelValue":z[7]||(z[7]=be=>p.value=be)},{default:t(()=>[e(F,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(R,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[nr,e(qe),ne(e(D,{icon:"close",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),e(R,null,{default:t(()=>{var be;return[a("div",lr,[e(j,{modelValue:m.value,"onUpdate:modelValue":[z[0]||(z[0]=W=>m.value=W),f],debounce:"1000",outlined:"",rounded:"",placeholder:"Search recipe",dense:""},{append:t(()=>[a("div",null,[e(oe,{name:"search"})])]),default:t(()=>[m.value?(w(),S("div",or,[e(F,null,{default:t(()=>[e(Ne,{separator:""},{default:t(()=>{var W;return[(W=g.value)!=null&&W.length?(w(!0),S(H,{key:1},pe(g.value,Pe=>(w(),B(ge,{onClick:Fe=>r(Pe),key:Pe.id,clickable:""},{default:t(()=>[e(K,null,{default:t(()=>[e(ae,null,{default:t(()=>[P(y(n(Pe.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(w(),B(ge,{key:0},{default:t(()=>[P(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Ke("",!0)]),_:1},8,["modelValue"])]),a("div",sr,[rr,e(j,{modelValue:d.recipe_name,"onUpdate:modelValue":z[1]||(z[1]=W=>d.recipe_name=W),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",ir,[dr,e(j,{modelValue:d.category,"onUpdate:modelValue":z[2]||(z[2]=W=>d.category=W),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[e(j,{modelValue:d.target,"onUpdate:modelValue":z[3]||(z[3]=W=>d.target=W),outlined:"",dense:"",suffix:" / 1kg",type:"number",label:"Target Pcs",mask:"##.##"},null,8,["modelValue"])]),a("div",null,[cr,e(We,{modelValue:C.value,"onUpdate:modelValue":z[4]||(z[4]=W=>C.value=W),"use-input":"","use-chips":"","chips-color":"primary",multiple:"","input-debounce":"0",options:N.value,behavior:"menu","hide-dropdown-icon":"",outlined:"",dense:"",label:"Bread/s",onNewValue:L,onFilter:ee,rules:[W=>W&&W.length>0||"Bread is required"]},{"no-option":t(()=>[e(ge,null,{default:t(()=>[e(K,{class:"text-grey"},{default:t(()=>[P(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),a("div",ur,[mr,a("div",null,[e(Ne,{dense:"",separator:"",class:"box"},{default:t(()=>[(w(!0),S(H,null,pe(A.value,(W,Pe)=>(w(),B(ge,{key:Pe},{default:t(()=>[e(K,null,{default:t(()=>[e(ae,null,{default:t(()=>[P(y(W.label),1)]),_:2},1024)]),_:2},1024),e(K,null,{default:t(()=>[P(y(W.quantity)+" "+y(W.unit),1)]),_:2},1024),e(K,{side:""},{default:t(()=>[e(D,{onClick:Fe=>xe(Pe),color:"grey-10",icon:"backspace",dense:"",flat:"",round:""},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),a("div",pr,[a("div",_r,[a("div",null,[fr,e(We,{modelValue:q.name,"onUpdate:modelValue":z[5]||(z[5]=W=>q.name=W),debounce:"3000",outlined:"","chips-color":"primary",options:T.value,dense:"",label:"Ingredients",behavior:"menu","use-input":"","hide-dropdown-icon":"",onFilter:O,style:{width:"215px","max-width":"450px","min-width":"80px"}},{"no-option":t(()=>[e(ge,null,{default:t(()=>[e(K,{class:"text-grey"},{default:t(()=>[P(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),a("div",null,[gr,e(j,{modelValue:q.quantity,"onUpdate:modelValue":z[6]||(z[6]=W=>q.quantity=W),modelModifiers:{number:!0},outlined:"",dense:"",type:"number",label:"Quantity",suffix:((be=q==null?void 0:q.name)==null?void 0:be.unit)||"",style:{width:"115px"},hint:"Enter the quantity as a decimal",mask:"##.##"},null,8,["modelValue","suffix"])])]),a("form",{onKeyup:Re(_t(te,["prevent"]),["enter"])},[a("div",hr,[e(D,{padding:"xs md",type:"button",size:"sm",outline:"",dense:"",label:"add",icon:"add",color:"purple",onClick:te})])],40,vr)])]}),_:1}),e(De,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(D,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:c}),e(D,{class:"glossy",color:"teal",label:"Create",onClick:ve,disable:!i.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var br=G(yr,[["__scopeId","data-v-f0d86c36"]]);const ut=o=>(X("data-v-33664d62"),o=o(),Z(),o),wr=ut(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),xr=ut(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),kr={__name:"RecipeDelete",props:["delete"],setup(o){const h=Ee(),x=o,$=V(!1),g=()=>{$.value=!0},u=async()=>{await h.deleteRecipe(x.delete.row.id),$.value=!1};return(b,s)=>(w(),S(H,null,[e(D,{onClick:g,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"","aria-label":"Delete"},{default:t(()=>[e(se,{class:"bg-negative",delay:200},{default:t(()=>[P("Delete")]),_:1})]),_:1}),e(Y,{modelValue:$.value,"onUpdate:modelValue":s[0]||(s[0]=_=>$.value=_),persistent:""},{default:t(()=>[e(F,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(R,{class:"q-pt-none q-pb-sm"},{default:t(()=>[wr,xr]),_:1}),e(Ye,{class:"q-mb-md"}),e(R,null,{default:t(()=>[e(De,{align:"right",class:"q-pt-none"},{default:t(()=>[ne(e(D,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[le]]),e(D,{dense:"",label:"Delete",color:"negative",onClick:u,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var $r=G(kr,[["__scopeId","data-v-33664d62"]]);const Cr=o=>(X("data-v-7a561dd0"),o=o(),Z(),o),Rr={class:"text-h6 text-white"},Pr=Cr(()=>a("div",{class:"text-h6",align:"center"},"Bread List",-1)),Vr={class:"row",align:"center"},Sr={__name:"RecipeBreadGroups",props:["breadGroups"],setup(o){const{dialogRef:h,onDialogHide:x,onDialogOK:$,onDialogCancel:g}=$e();console.log("breadGroups",o.breadGroups);const b=s=>s?s.split(" ").map(_=>_.charAt(0).toUpperCase()+_.slice(1).toLowerCase()).join(" "):"";return(s,_)=>(w(),B(Y,{ref_key:"dialogRef",ref:h,onHide:Q(x),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(F,{style:{width:"500px","max-width":"120vw"}},{default:t(()=>[e(R,{class:"row bg-backgroud text-h6"},{default:t(()=>[a("div",Rr,y(b(o.breadGroups.name)),1),e(qe),a("div",null,[ne(e(D,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[le]])])]),_:1}),e(R,null,{default:t(()=>[Pr]),_:1}),e(R,null,{default:t(()=>[(w(!0),S(H,null,pe(o.breadGroups.bread_groups,(p,l)=>(w(),S("div",{key:l},[a("div",Vr,y(p),1)]))),128))]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Dr=G(Sr,[["__scopeId","data-v-7a561dd0"]]);const qr=o=>(X("data-v-435e3b8f"),o=o(),Z(),o),Nr={class:"text-h6 text-white"},Ur=qr(()=>a("div",{class:"text-h6",align:"center"},"Ingredients List",-1)),Tr={__name:"RecipeIngredientGroups",props:["ingredientGroups"],setup(o){const{dialogRef:h,onDialogHide:x,onDialogOK:$,onDialogCancel:g}=$e();console.log("ingredientGroups",o.ingredientGroups);const b=_=>_?_.split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1).toLowerCase()).join(" "):"",s=_=>{const p=Number(_.quantity)||0,l=_.unit||"";return p>1e3?`${parseFloat((p/1e3).toFixed(3))} kg`:p>1?`${parseFloat(p.toFixed(3))} ${l}`:`${parseFloat(p.toFixed(3))} ${l}`};return(_,p)=>(w(),B(Y,{ref_key:"dialogRef",ref:h,onHide:Q(x),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(F,{style:{width:"500px","max-width":"120vw"}},{default:t(()=>[e(R,{class:"row bg-backgroud text-h6"},{default:t(()=>[a("div",Nr,y(b(o.ingredientGroups.name)),1),e(qe),a("div",null,[ne(e(D,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[le]])])]),_:1}),e(R,null,{default:t(()=>[Ur]),_:1}),e(R,null,{default:t(()=>[e(Ne,{dense:"",separator:"",class:"box"},{default:t(()=>[e(ge,null,{default:t(()=>[e(K,null,{default:t(()=>[e(ae,{class:"text-overline"},{default:t(()=>[P("Raw Materials Name")]),_:1})]),_:1}),e(K,null,{default:t(()=>[e(ae,{class:"text-overline"},{default:t(()=>[P("Code")]),_:1})]),_:1}),e(K,{side:""},{default:t(()=>[e(ae,{class:"text-overline"},{default:t(()=>[P("Quantity")]),_:1})]),_:1})]),_:1}),(w(!0),S(H,null,pe(o.ingredientGroups.ingredient_groups,(l,c)=>(w(),B(ge,{key:c},{default:t(()=>[e(K,null,{default:t(()=>[e(ae,{class:"text-caption"},{default:t(()=>[P(y(l.ingredient_name),1)]),_:2},1024)]),_:2},1024),e(K,null,{default:t(()=>[e(ae,{class:"text-caption"},{default:t(()=>[P(y(l.code),1)]),_:2},1024)]),_:2},1024),e(K,{side:""},{default:t(()=>[e(ae,{class:"text-caption"},{default:t(()=>[P(y(s(l)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Ar=G(Tr,[["__scopeId","data-v-435e3b8f"]]);const Br=o=>(X("data-v-89832402"),o=o(),Z(),o),Fr={class:"row justify-between"},Ir={class:"q-my-sm"},Lr={key:0,class:"spinner-wrapper"},Mr={key:1},zr={key:0,class:"data-error"},Hr=Br(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Or={class:"row justify-center q-gutter-x-md"},jr={__name:"RecipeTable",setup(o){const x=ye().params.branch_id,$=Ee(),g=V(""),u=V(!0),b=V([]),s=V(!1),_=V({rowsPerPage:0}),p=["inactive","active"],l=I(()=>$.branchRecipes);console.log("branch recipe",l.value);const c=I(()=>g.value?l.value.filter(v=>v.name.toLowerCase().includes(g.value.toLowerCase())):l.value);ke(async()=>{x&&await n(x)});const n=async v=>{try{u.value=!0;const q=await $.fetchBranchRecipes(v);l.value=q,console.log("branchRecipeRows",l.value),l.value.length||(s.value=!0),console.log("Branch recipe",l.value)}catch(q){console.log("Error fetching recipe",q)}finally{u.value=!1}},m=v=>{const q=Number(v)||0;return parseFloat(q.toFixed(3)).toString()},f=v=>!v&&v!==0?"Set Target":typeof v=="number"||!isNaN(v)?(v=parseFloat(v),v%1===0?v:parseFloat(v.toFixed(1))):v;async function i(v,q){try{const T=await we.put("/api/update-target/"+v.id,{target:parseFloat(q)});if(console.log("response",T),T.status==200){const J=b.value.findIndex(me=>me.id==v.id);b.value[J]=q}he.create({type:"positive",message:"Recipe target edited successfully"})}catch(T){console.error("Error updating recipe target:",T),he.create({type:"negative",message:"Failed to edit recipe target"})}}async function r(v,q){try{if((await we.put("/api/branch-update-status/"+v.id,{status:q})).status==200){const J=b.value.findIndex(me=>me.id==v.id);b.value[J]=q}he.create({type:"positive",message:"Recipe status change successfully"})}catch(T){console.error("Error updating recipe status:",T),he.create({type:"negative",message:"Failed to change recipe status"})}}const d=v=>v?v.split(" ").map(q=>q.charAt(0).toUpperCase()+q.slice(1).toLowerCase()).join(" "):"",k=[{name:"name",label:"Recipe name",align:"center",field:v=>v.name},{name:"category",label:"Category",align:"center",field:v=>v.recipe},{name:"target",label:"Target",align:"center",field:v=>f(v.target)},{name:"status",label:"Status",align:"center",field:"status"},{name:"bread_groups",label:"List of Bread",align:"center",field:"bread_groups"},{name:"ingredient_groups",label:"List of Ingredients",align:"center",field:"ingredient_groups"},{name:"action",label:"Action",align:"center",sortable:!0}],C=Se(),U=v=>{console.log("Bread Groups:",v),C.dialog({component:Dr,componentProps:{breadGroups:v}})},N=v=>{console.log("Ingredients Groups:",v),C.dialog({component:Ar,componentProps:{ingredientGroups:v}})},A=v=>{switch(v){case"inactive":return"grey";case"active":return"green";default:return"grey"}};return(v,q)=>(w(),S(H,null,[a("div",Fr,[a("div",null,[e(j,{class:"q-pb-lg q-pl-md",modelValue:g.value,"onUpdate:modelValue":q[0]||(q[0]=T=>g.value=T),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"1500px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(oe,{name:"search"})]),_:1},8,["modelValue"])]),a("div",Ir,[e(br)])]),u.value?(w(),S("div",Lr,[e(Ge,{size:"50px",color:"primary"})])):(w(),S("div",Mr,[c.value.length===0?(w(),S("div",zr,[e(oe,{name:"warning",color:"warning",size:"4em"}),Hr])):(w(),B(ue,{key:1,class:"table-container sticky-header",filter:g.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:k,rows:c.value,"row-key":"name","virtual-scroll":"",pagination:_.value,"onUpdate:pagination":q[1]||(q[1]=T=>_.value=T),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"}},{"body-cell-name":t(T=>[e(E,{props:T},{default:t(()=>[a("span",null,y(d(T.row.name)),1)]),_:2},1032,["props"])]),"body-cell-category":t(T=>[e(E,{props:T},{default:t(()=>[a("span",null,y(d(T.row.category)),1)]),_:2},1032,["props"])]),"body-cell-target":t(T=>[e(E,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[P(y(m(T.row.target))+" ",1),e(se,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[P("Edit Target")]),_:1})]),e(Ve,{"onUpdate:modelValue":[J=>i(T.row,J),J=>T.row.target=J],modelValue:T.row.target,"auto-save":""},{default:t(J=>[e(j,{modelValue:J.value,"onUpdate:modelValue":me=>J.value=me,dense:"",suffix:"pcs",autofocus:"",counter:"",onKeyup:Re(J.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-status":t(T=>[e(E,{props:T},{default:t(()=>[e(re,{outline:"",color:A(T.row.status)},{default:t(()=>[P(y(d(T.row.status))+" ",1),e(se,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[P("Change Status")]),_:1})]),_:2},1032,["color"]),e(Ve,{"onUpdate:modelValue":[J=>r(T.row,J),J=>T.row.status=J],modelValue:T.row.status,"auto-save":""},{default:t(J=>[a("span",null,y(T.row.name),1),e(We,{modelValue:J.value,"onUpdate:modelValue":me=>J.value=me,dense:"",label:"status",autofocus:"",options:p,counter:"",mask:"###",onKeyup:Re(J.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-bread_groups":t(T=>[e(E,{props:T},{default:t(()=>[e(D,{"no-caps":"",onClick:J=>U(T.row),label:`${T.row.bread_groups.length} breads`,rounded:"",color:"brown"},null,8,["onClick","label"])]),_:2},1032,["props"])]),"body-cell-ingredient_groups":t(T=>[e(E,{props:T},{default:t(()=>[e(D,{"no-caps":"",onClick:J=>N(T.row),label:`${T.row.ingredient_groups.length} ingredients`,rounded:"",color:"purple"},null,8,["onClick","label"])]),_:2},1032,["props"])]),"body-cell-action":t(T=>[e(E,{props:T},{default:t(()=>[a("div",Or,[e($r,{delete:T},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Qr=G(jr,[["__scopeId","data-v-89832402"]]);const Er={__name:"RecipePage",setup(o){return(h,x)=>(w(),S("div",null,[e(Qr)]))}};const Kr={class:"elegant-container q-gutter-md"},Yr={class:"text-h6 row justify-between"},Gr={class:"q-gutter-sm"},Jr={class:"tab-container"},Wr={__name:"BranchIdPage",setup(o){const h=ye(),x=V(""),$=ft(),g=async p=>(await we.get(`/api/branches/${p}`)).data,u=async()=>{const p=h.params.branch_id,l=await g(p);l&&l.name?x.value=l.name:console.error("Branch data is missing 'name' property or invalid:",l)};ke(()=>{u()});const b=p=>p?p.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",s=V("products"),_=()=>{je.show(),$.push("/admin/branches").finally(()=>{je.hide()})};return(p,l)=>(w(),B(gt,{padding:""},{default:t(()=>[a("div",Kr,[a("div",Yr,[a("div",null,[e(D,{outline:"",flat:"",icon:"arrow_back",onClick:_}),e(qe)]),a("div",null,[e(oe,{name:"fa-solid fa-store",color:"red-6"}),P(" "+y(b(x.value)),1)])]),a("div",Gr,[a("div",Jr,[e(Ie,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=c=>s.value=c),dense:"",class:"bg-grey-2 text-grey-7 tabs-as-cards","active-color":"red-6","indicator-color":"transparent",align:"justify"},{default:t(()=>[e(ie,{name:"products",label:"Products"}),e(ie,{name:"rawMaterials",label:"Raw Materials"}),e(ie,{name:"recipe",label:"Recipe"}),e(ie,{name:"production",label:"Production"}),e(ie,{name:"transaction",label:"Transactions"})]),_:1},8,["modelValue"])]),e(F,{class:"q-mt-sm"},{default:t(()=>[e(Le,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=c=>s.value=c),animated:""},{default:t(()=>[e(de,{name:"products"},{default:t(()=>[e(Qt)]),_:1}),e(de,{name:"rawMaterials"},{default:t(()=>[e(ga)]),_:1}),e(de,{name:"recipe"},{default:t(()=>[e(Er)]),_:1}),e(de,{name:"production"},{default:t(()=>[e(Cl)]),_:1}),e(de,{name:"transaction"},{default:t(()=>[e(ar)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1}))}};var Ti=G(Wr,[["__scopeId","data-v-eb7c826e"]]);export{Ti as default};
