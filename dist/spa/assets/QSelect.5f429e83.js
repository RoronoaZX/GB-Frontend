import{Q as It,a as wt}from"./QItemLabel.fcc7aeb9.js";import{e as je,a7 as xt,aK as qt,a9 as At,aL as _t,g as o,ae as Dt,k as Xe,h as v,L as ue,aM as Ot,aN as Ft,V as H,aO as Lt,aP as Ge,aQ as Bt,n as x,aR as Tt,aS as Pt,aT as Ee,u as te,aU as W,G as R,aV as Rt,aW as Ht,A as Mt,ap as ve,aX as Kt,aY as Nt,aq as j,ai as Qt,aZ as $t,a1 as Et,x as zt}from"./index.9c9d4c4e.js";import{a as pt,Q as Ut}from"./QItem.25f2db32.js";import{Q as jt}from"./QMenu.d0f52efd.js";import{u as ze,a as Xt}from"./use-virtual-scroll.823d2c0d.js";import{n as pe}from"./selection.18f52089.js";const Gt={xs:8,sm:10,md:14,lg:20,xl:24};var Wt=je({name:"QChip",props:{...xt,...qt,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:y,emit:r}){const{proxy:{$q:A}}=Xe(),L=At(e,A),c=_t(e,Gt),w=o(()=>e.selected===!0||e.icon!==void 0),f=o(()=>e.selected===!0?e.iconSelected||A.iconSet.chip.selected:e.icon),h=o(()=>e.iconRemove||A.iconSet.chip.remove),_=o(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),D=o(()=>{const i=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(i?` text-${i} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(_.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(L.value===!0?" q-chip--dark q-dark":"")}),V=o(()=>{const i=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},B={...i,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||A.lang.label.remove};return{chip:i,remove:B}});function I(i){i.keyCode===13&&M(i)}function M(i){e.disable||(r("update:selected",!e.selected),r("click",i))}function C(i){(i.keyCode===void 0||i.keyCode===13)&&(H(i),e.disable===!1&&(r("update:modelValue",!1),r("remove")))}function K(){const i=[];_.value===!0&&i.push(v("div",{class:"q-focus-helper"})),w.value===!0&&i.push(v(ue,{class:"q-chip__icon q-chip__icon--left",name:f.value}));const B=e.label!==void 0?[v("div",{class:"ellipsis"},[e.label])]:void 0;return i.push(v("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Ot(y.default,B))),e.iconRight&&i.push(v(ue,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&i.push(v(ue,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:h.value,...V.value.remove,onClick:C,onKeyup:C})),i}return()=>{if(e.modelValue===!1)return;const i={class:D.value,style:c.value};return _.value===!0&&Object.assign(i,V.value.chip,{onClick:M,onKeyup:I}),Dt("div",i,K(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Ft,e.ripple]])}}});const Ue=e=>["add","add-unique","toggle"].includes(e),Yt=".*+?^${}()|[]\\",Zt=Object.keys(Ge);var au=je({name:"QSelect",inheritAttrs:!1,props:{...ze,...Lt,...Ge,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Ue},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:ze.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...Bt,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:y,emit:r}){const{proxy:A}=Xe(),{$q:L}=A,c=x(!1),w=x(!1),f=x(-1),h=x(""),_=x(!1),D=x(!1);let V=null,I=null,M,C,K,i=null,B,fe,O,me;const We=x(null),b=x(null),N=x(null),le=x(null),ge=x(null),he=Tt(e),ye=Nt(Me),F=o(()=>Array.isArray(e.options)?e.options.length:0),Ye=o(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:Ze,virtualScrollSliceSizeComputed:be,localResetVirtualScroll:ne,padVirtualScroll:Je,onVirtualScrollEvt:Se,scrollTo:Ce,setVirtualScrollSize:Ve}=Xt({virtualScrollLength:F,getVirtualScrollTarget:st,getVirtualScrollEl:Re,virtualScrollItemSizeComputed:Ye}),n=Pt(),g=o(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,l=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const u=e.mapOptions===!0&&M!==void 0?M:[],a=l.map(d=>ct(d,u));return e.modelValue===null&&t===!0?a.filter(d=>d!==null):a}return l}),et=o(()=>{const t={};return Zt.forEach(l=>{const u=e[l];u!==void 0&&(t[l]=u)}),t}),Y=o(()=>e.optionsDark===null?n.isDark.value:e.optionsDark),ae=o(()=>Ee(g.value)),tt=o(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||g.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),ke=o(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),X=o(()=>F.value===0),Ie=o(()=>g.value.map(t=>k.value(t)).join(", ")),we=o(()=>e.displayValue!==void 0?e.displayValue:Ie.value),ie=o(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),ut=o(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||g.value.some(ie.value))),xe=o(()=>n.focused.value===!0?e.tabindex:-1),qe=o(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":c.value===!0?"true":"false","aria-controls":`${n.targetUid.value}_lb`};return f.value>=0&&(t["aria-activedescendant"]=`${n.targetUid.value}_${f.value}`),t}),Ae=o(()=>({id:`${n.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),_e=o(()=>g.value.map((t,l)=>({index:l,opt:t,html:ie.value(t),selected:!0,removeAtIndex:rt,toggleOption:T,tabindex:xe.value}))),lt=o(()=>{if(F.value===0)return[];const{from:t,to:l}=Ze.value;return e.options.slice(t,l).map((u,a)=>{const d=Q.value(u)===!0,s=ce(u)===!0,S=t+a,m={clickable:!0,active:s,activeClass:it.value,manualFocus:!0,focused:!1,disable:d,tabindex:-1,dense:e.optionsDense,dark:Y.value,role:"option","aria-selected":s===!0?"true":"false",id:`${n.targetUid.value}_${S}`,onClick:()=>{T(u)}};return d!==!0&&(f.value===S&&(m.focused=!0),L.platform.is.desktop===!0&&(m.onMousemove=()=>{c.value===!0&&$(S)})),{index:S,opt:u,html:ie.value(u),label:k.value(u),selected:m.active,focused:m.focused,toggleOption:T,setOptionIndex:$,itemProps:m}})}),nt=o(()=>e.dropdownIcon!==void 0?e.dropdownIcon:L.iconSet.arrow.dropdown),at=o(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),it=o(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),q=o(()=>re(e.optionValue,"value")),k=o(()=>re(e.optionLabel,"label")),Q=o(()=>re(e.optionDisable,"disable")),Z=o(()=>g.value.map(t=>q.value(t))),ot=o(()=>{const t={onInput:Me,onChange:ye,onKeydown:Pe,onKeyup:Be,onKeypress:Te,onFocus:Fe,onClick(l){C===!0&&j(l)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=ye,t});te(g,t=>{M=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&n.innerLoading.value!==!0&&(w.value!==!0&&c.value!==!0||ae.value!==!0)&&(K!==!0&&U(),(w.value===!0||c.value===!0)&&E(""))},{immediate:!0}),te(()=>e.fillInput,U),te(c,se),te(F,kt);function De(t){return e.emitValue===!0?q.value(t):t}function oe(t){if(t!==-1&&t<g.value.length)if(e.multiple===!0){const l=e.modelValue.slice();r("remove",{index:t,value:l.splice(t,1)[0]}),r("update:modelValue",l)}else r("update:modelValue",null)}function rt(t){oe(t),n.focus()}function Oe(t,l){const u=De(t);if(e.multiple!==!0){e.fillInput===!0&&G(k.value(t),!0,!0),r("update:modelValue",u);return}if(g.value.length===0){r("add",{index:0,value:u}),r("update:modelValue",e.multiple===!0?[u]:u);return}if(l===!0&&ce(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const a=e.modelValue.slice();r("add",{index:a.length,value:u}),a.push(u),r("update:modelValue",a)}function T(t,l){if(n.editable.value!==!0||t===void 0||Q.value(t)===!0)return;const u=q.value(t);if(e.multiple!==!0){l!==!0&&(G(e.fillInput===!0?k.value(t):"",!0,!0),P()),b.value!==null&&b.value.focus(),(g.value.length===0||W(q.value(g.value[0]),u)!==!0)&&r("update:modelValue",e.emitValue===!0?u:t);return}if((C!==!0||_.value===!0)&&n.focus(),Fe(),g.value.length===0){const s=e.emitValue===!0?u:t;r("add",{index:0,value:s}),r("update:modelValue",e.multiple===!0?[s]:s);return}const a=e.modelValue.slice(),d=Z.value.findIndex(s=>W(s,u));if(d!==-1)r("remove",{index:d,value:a.splice(d,1)[0]});else{if(e.maxValues!==void 0&&a.length>=e.maxValues)return;const s=e.emitValue===!0?u:t;r("add",{index:a.length,value:s}),a.push(s)}r("update:modelValue",a)}function $(t){if(L.platform.is.desktop!==!0)return;const l=t!==-1&&t<F.value?t:-1;f.value!==l&&(f.value=l)}function J(t=1,l){if(c.value===!0){let u=f.value;do u=pe(u+t,-1,F.value-1);while(u!==-1&&u!==f.value&&Q.value(e.options[u])===!0);f.value!==u&&($(u),Ce(u),l!==!0&&e.useInput===!0&&e.fillInput===!0&&ee(u>=0?k.value(e.options[u]):B,!0))}}function ct(t,l){const u=a=>W(q.value(a),t);return e.options.find(u)||l.find(u)||t}function re(t,l){const u=t!==void 0?t:l;return typeof u=="function"?u:a=>a!==null&&typeof a=="object"&&u in a?a[u]:a}function ce(t){const l=q.value(t);return Z.value.find(u=>W(u,l))!==void 0}function Fe(t){e.useInput===!0&&b.value!==null&&(t===void 0||b.value===t.target&&t.target.value===Ie.value)&&b.value.select()}function Le(t){Qt(t,27)===!0&&c.value===!0&&(j(t),P(),U()),r("keyup",t)}function Be(t){const{value:l}=t.target;if(t.keyCode!==void 0){Le(t);return}if(t.target.value="",V!==null&&(clearTimeout(V),V=null),I!==null&&(clearTimeout(I),I=null),U(),typeof l=="string"&&l.length!==0){const u=l.toLocaleLowerCase(),a=s=>{const S=e.options.find(m=>s.value(m).toLocaleLowerCase()===u);return S===void 0?!1:(g.value.indexOf(S)===-1?T(S):P(),!0)},d=s=>{a(q)!==!0&&(a(k)===!0||s===!0||E(l,!0,()=>d(!0)))};d()}else n.clearValue(t)}function Te(t){r("keypress",t)}function Pe(t){if(r("keydown",t),$t(t)===!0)return;const l=h.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),u=t.shiftKey!==!0&&e.multiple!==!0&&(f.value!==-1||l===!0);if(t.keyCode===27){ve(t);return}if(t.keyCode===9&&u===!1){z();return}if(t.target===void 0||t.target.id!==n.targetUid.value||n.editable.value!==!0)return;if(t.keyCode===40&&n.innerLoading.value!==!0&&c.value===!1){H(t),p();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&h.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?oe(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&r("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof h.value!="string"||h.value.length===0)&&(H(t),f.value=-1,J(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&be.value!==void 0&&(H(t),f.value=Math.max(-1,Math.min(F.value,f.value+(t.keyCode===33?-1:1)*be.value.view)),J(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(H(t),J(t.keyCode===38?-1:1,e.multiple));const a=F.value;if((O===void 0||me<Date.now())&&(O=""),a>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||O.length!==0)){c.value!==!0&&p(t);const d=t.key.toLocaleLowerCase(),s=O.length===1&&O[0]===d;me=Date.now()+1500,s===!1&&(H(t),O+=d);const S=new RegExp("^"+O.split("").map(de=>Yt.indexOf(de)!==-1?"\\"+de:de).join(".*"),"i");let m=f.value;if(s===!0||m<0||S.test(k.value(e.options[m]))!==!0)do m=pe(m+1,-1,a-1);while(m!==f.value&&(Q.value(e.options[m])===!0||S.test(k.value(e.options[m]))!==!0));f.value!==m&&R(()=>{$(m),Ce(m),m>=0&&e.useInput===!0&&e.fillInput===!0&&ee(k.value(e.options[m]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||O!=="")&&(t.keyCode!==9||u===!1))){if(t.keyCode!==9&&H(t),f.value!==-1&&f.value<a){T(e.options[f.value]);return}if(l===!0){const d=(s,S)=>{if(S){if(Ue(S)!==!0)return}else S=e.newValueMode;if(G("",e.multiple!==!0,!0),s==null)return;(S==="toggle"?T:Oe)(s,S==="add-unique"),e.multiple!==!0&&(b.value!==null&&b.value.focus(),P())};if(e.onNewValue!==void 0?r("newValue",h.value,d):d(h.value),e.multiple!==!0)return}c.value===!0?z():n.innerLoading.value!==!0&&p()}}function Re(){return C===!0?ge.value:N.value!==null&&N.value.contentEl!==null?N.value.contentEl:void 0}function st(){return Re()}function dt(){return e.hideSelected===!0?[]:y["selected-item"]!==void 0?_e.value.map(t=>y["selected-item"](t)).slice():y.selected!==void 0?[].concat(y.selected()):e.useChips===!0?_e.value.map((t,l)=>v(Wt,{key:"option-"+l,removable:n.editable.value===!0&&Q.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:xe.value,onRemove(){t.removeAtIndex(l)}},()=>v("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:k.value(t.opt)}))):[v("span",{[ut.value===!0?"innerHTML":"textContent"]:we.value})]}function He(){if(X.value===!0)return y["no-option"]!==void 0?y["no-option"]({inputValue:h.value}):void 0;const t=y.option!==void 0?y.option:u=>v(Ut,{key:u.index,...u.itemProps},()=>v(pt,()=>v(wt,()=>v("span",{[u.html===!0?"innerHTML":"textContent"]:u.label}))));let l=Je("div",lt.value.map(t));return y["before-options"]!==void 0&&(l=y["before-options"]().concat(l)),zt(y["after-options"],l)}function vt(t,l){const u=l===!0?{...qe.value,...n.splitAttrs.attributes.value}:void 0,a={ref:l===!0?b:void 0,key:"i_t",class:tt.value,style:e.inputStyle,value:h.value!==void 0?h.value:"",type:"search",...u,id:l===!0?n.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...ot.value};return t!==!0&&C===!0&&(Array.isArray(a.class)===!0?a.class=[...a.class,"no-pointer-events"]:a.class+=" no-pointer-events"),v("input",a)}function Me(t){V!==null&&(clearTimeout(V),V=null),I!==null&&(clearTimeout(I),I=null),!(t&&t.target&&t.target.qComposing===!0)&&(ee(t.target.value||""),K=!0,B=h.value,n.focused.value!==!0&&(C!==!0||_.value===!0)&&n.focus(),e.onFilter!==void 0&&(V=setTimeout(()=>{V=null,E(h.value)},e.inputDebounce)))}function ee(t,l){h.value!==t&&(h.value=t,l===!0||e.inputDebounce===0||e.inputDebounce==="0"?r("inputValue",t):I=setTimeout(()=>{I=null,r("inputValue",t)},e.inputDebounce))}function G(t,l,u){K=u!==!0,e.useInput===!0&&(ee(t,!0),(l===!0||u!==!0)&&(B=t),l!==!0&&E(t))}function E(t,l,u){if(e.onFilter===void 0||l!==!0&&n.focused.value!==!0)return;n.innerLoading.value===!0?r("filterAbort"):(n.innerLoading.value=!0,D.value=!0),t!==""&&e.multiple!==!0&&g.value.length!==0&&K!==!0&&t===k.value(g.value[0])&&(t="");const a=setTimeout(()=>{c.value===!0&&(c.value=!1)},10);i!==null&&clearTimeout(i),i=a,r("filter",t,(d,s)=>{(l===!0||n.focused.value===!0)&&i===a&&(clearTimeout(i),typeof d=="function"&&d(),D.value=!1,R(()=>{n.innerLoading.value=!1,n.editable.value===!0&&(l===!0?c.value===!0&&P():c.value===!0?se(!0):c.value=!0),typeof s=="function"&&R(()=>{s(A)}),typeof u=="function"&&R(()=>{u(A)})}))},()=>{n.focused.value===!0&&i===a&&(clearTimeout(i),n.innerLoading.value=!1,D.value=!1),c.value===!0&&(c.value=!1)})}function ft(){return v(jt,{ref:N,class:ke.value,style:e.popupContentStyle,modelValue:c.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&X.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:Y.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:at.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Ae.value,onScrollPassive:Se,onBeforeShow:Ne,onBeforeHide:mt,onShow:gt},He)}function mt(t){Qe(t),z()}function gt(){Ve()}function ht(t){j(t),b.value!==null&&b.value.focus(),_.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function yt(t){j(t),R(()=>{_.value=!1})}function bt(){const t=[v(It,{class:`col-auto ${n.fieldClass.value}`,...et.value,for:n.targetUid.value,dark:Y.value,square:!0,loading:D.value,itemAligned:!1,filled:!0,stackLabel:h.value.length!==0,...n.splitAttrs.listeners.value,onFocus:ht,onBlur:yt},{...y,rawControl:()=>n.getControl(!0),before:void 0,after:void 0})];return c.value===!0&&t.push(v("div",{ref:ge,class:ke.value+" scroll",style:e.popupContentStyle,...Ae.value,onClick:ve,onScrollPassive:Se},He())),v(Et,{ref:le,modelValue:w.value,position:e.useInput===!0?"top":void 0,transitionShow:fe,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:Ne,onBeforeHide:St,onHide:Ct,onShow:Vt},()=>v("div",{class:"q-select__dialog"+(Y.value===!0?" q-select__dialog--dark q-dark":"")+(_.value===!0?" q-select__dialog--focused":"")},t))}function St(t){Qe(t),le.value!==null&&le.value.__updateRefocusTarget(n.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),n.focused.value=!1}function Ct(t){P(),n.focused.value===!1&&r("blur",t),U()}function Vt(){const t=document.activeElement;(t===null||t.id!==n.targetUid.value)&&b.value!==null&&b.value!==t&&b.value.focus(),Ve()}function z(){w.value!==!0&&(f.value=-1,c.value===!0&&(c.value=!1),n.focused.value===!1&&(i!==null&&(clearTimeout(i),i=null),n.innerLoading.value===!0&&(r("filterAbort"),n.innerLoading.value=!1,D.value=!1)))}function p(t){n.editable.value===!0&&(C===!0?(n.onControlFocusin(t),w.value=!0,R(()=>{n.focus()})):n.focus(),e.onFilter!==void 0?E(h.value):(X.value!==!0||y["no-option"]!==void 0)&&(c.value=!0))}function P(){w.value=!1,z()}function U(){e.useInput===!0&&G(e.multiple!==!0&&e.fillInput===!0&&g.value.length!==0&&k.value(g.value[0])||"",!0,!0)}function se(t){let l=-1;if(t===!0){if(g.value.length!==0){const u=q.value(g.value[0]);l=e.options.findIndex(a=>W(q.value(a),u))}ne(l)}$(l)}function kt(t,l){c.value===!0&&n.innerLoading.value===!1&&(ne(-1,!0),R(()=>{c.value===!0&&n.innerLoading.value===!1&&(t>l?ne():se(!0))}))}function Ke(){w.value===!1&&N.value!==null&&N.value.updatePosition()}function Ne(t){t!==void 0&&j(t),r("popupShow",t),n.hasPopupOpen=!0,n.onControlFocusin(t)}function Qe(t){t!==void 0&&j(t),r("popupHide",t),n.hasPopupOpen=!1,n.onControlFocusout(t)}function $e(){C=L.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?y["no-option"]!==void 0||e.onFilter!==void 0||X.value===!1:!0),fe=L.platform.is.ios===!0&&C===!0&&e.useInput===!0?"fade":e.transitionShow}return Rt($e),Ht(Ke),$e(),Mt(()=>{V!==null&&clearTimeout(V),I!==null&&clearTimeout(I)}),Object.assign(A,{showPopup:p,hidePopup:P,removeAtIndex:oe,add:Oe,toggleOption:T,getOptionIndex:()=>f.value,setOptionIndex:$,moveOptionSelection:J,filter:E,updateMenuPosition:Ke,updateInputValue:G,isOptionSelected:ce,getEmittingOptionValue:De,isOptionDisabled:(...t)=>Q.value.apply(null,t)===!0,getOptionValue:(...t)=>q.value.apply(null,t),getOptionLabel:(...t)=>k.value.apply(null,t)}),Object.assign(n,{innerValue:g,fieldClass:o(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:We,targetRef:b,hasValue:ae,showPopup:p,floatingLabel:o(()=>e.hideSelected!==!0&&ae.value===!0||typeof h.value=="number"||h.value.length!==0||Ee(e.displayValue)),getControlChild:()=>{if(n.editable.value!==!1&&(w.value===!0||X.value!==!0||y["no-option"]!==void 0))return C===!0?bt():ft();n.hasPopupOpen===!0&&(n.hasPopupOpen=!1)},controlEvents:{onFocusin(t){n.onControlFocusin(t)},onFocusout(t){n.onControlFocusout(t,()=>{U(),z()})},onClick(t){if(ve(t),C!==!0&&c.value===!0){z(),b.value!==null&&b.value.focus();return}p(t)}},getControl:t=>{const l=dt(),u=t===!0||w.value!==!0||C!==!0;if(e.useInput===!0)l.push(vt(t,u));else if(n.editable.value===!0){const d=u===!0?qe.value:void 0;l.push(v("input",{ref:u===!0?b:void 0,key:"d_t",class:"q-select__focus-target",id:u===!0?n.targetUid.value:void 0,value:we.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...d,onKeydown:Pe,onKeyup:Le,onKeypress:Te})),u===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&l.push(v("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Be}))}if(he.value!==void 0&&e.disable!==!0&&Z.value.length!==0){const d=Z.value.map(s=>v("option",{value:s,selected:!0}));l.push(v("select",{class:"hidden",name:he.value,multiple:e.multiple},d))}const a=e.useInput===!0||u!==!0?void 0:n.splitAttrs.attributes.value;return v("div",{class:"q-field__native row items-center",...a,...n.splitAttrs.listeners.value},l)},getInnerAppend:()=>e.loading!==!0&&D.value!==!0&&e.hideDropdownIcon!==!0?[v(ue,{class:"q-select__dropdown-icon"+(c.value===!0?" rotate-180":""),name:nt.value})]:null}),Kt(n)}});export{au as Q,Wt as a};
