import{c as D,r as U,t as z,o as q,a3 as F,f as l,M as c,w as n,Q as J,I as E,ae as R,J as o,K as y,a1 as O,aJ as G,a2 as W,a4 as P,N as M,O as L,R as H,z as X,e as K,a5 as Y,a0 as _,$ as b,bd as h}from"./index.dd60800d.js";import{Q as Z}from"./QPage.868ea0cf.js";import{Q as ee}from"./QSpace.90947083.js";import{C as le}from"./ClosePopup.75cec4cf.js";import{u as j}from"./incentive-bases.bb1635b8.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";import{b as te,Q as x,a as ae}from"./QTable.55916cdd.js";import{Q as oe}from"./QTr.a691be74.js";import{Q as w}from"./QTooltip.8fa293b6.js";import{Q as k}from"./QPopupEdit.4403e8a1.js";import{u as re}from"./use-quasar.c16dd5a5.js";import"./axios.1416c428.js";import"./QVirtualScroll.d7bab8b0.js";import"./QList.977e1cc1.js";import"./use-virtual-scroll.3b99f7a6.js";import"./rtl.276c3f1b.js";import"./QSelect.2bdbddfb.js";import"./QChip.589677fc.js";import"./QMenu.27698ebc.js";import"./position-engine.16226377.js";import"./selection.c6ebf0a3.js";const V=v=>(L("data-v-099583f0"),v=v(),H(),v),ne=V(()=>o("div",{class:"text-h6 text-weight-bold text-primary"}," Baker Incentives Settings ",-1)),se={class:"row q-col-gutter-md"},ie={class:"col-6"},ue={class:"col-6"},de={class:"settings-section"},me=V(()=>o("div",{class:"text-subtitle1 text-weight-medium text-primary q-mb-md"}," Incentives per Role ",-1)),ce={class:"q-gutter-y-md"},pe={class:"incentive-row"},_e=V(()=>o("div",{class:"role-label"},"Baker",-1)),ve={class:"incentive-row"},ye=V(()=>o("div",{class:"role-label"},"Lamesador",-1)),fe={class:"incentive-row"},be=V(()=>o("div",{class:"role-label"},"Hornero",-1)),ge=V(()=>o("div",{class:"q-gutter-y-md"},null,-1)),Ve={__name:"AddIncentives",emits:["created"],setup(v,{emit:g}){const p=j();D(()=>p.incentivesBases);const f=g,u=U(!1),Q=()=>{u.value=!0},i=z({number_of_employees:0,target:0,baker:0,lamesador:0,hornero:0}),$=()=>{i.number_of_employees=0,i.target=0,i.baker=0,i.lamesador=0,i.hornero=0},S=async()=>{try{await p.createIncentives(i),f("created"),M.create({message:"Data saved successfully",color:"green",position:"top",timeout:2e3}),u.value=!1,$()}catch(I){console.log("error",I),M.create({message:"Error saving data",color:"red",position:"top",timeout:2e3})}};return(I,d)=>(q(),F(P,null,[l(c,{label:"Add Incentives",onClick:Q,rounded:"",class:"gradient-btn q-px-lg q-py-sm text-capitalize text-white"}),l(W,{modelValue:u.value,"onUpdate:modelValue":d[5]||(d[5]=m=>u.value=m)},{default:n(()=>[l(J,{class:"dialog-card q-pa-md"},{default:n(()=>[l(E,{class:"row items-center q-pb-md"},{default:n(()=>[ne,l(ee),R(l(c,{icon:"close",flat:"",dense:"",round:""},null,512),[[le]])]),_:1}),l(E,{class:"q-pt-none"},{default:n(()=>[o("div",se,[o("div",ie,[l(y,{modelValue:i.number_of_employees,"onUpdate:modelValue":d[0]||(d[0]=m=>i.number_of_employees=m),outlined:"",dense:"",label:"Number of Employees",type:"number",color:"primary","bg-color":"white","input-class":"q-pl-sm",class:"role-input"},null,8,["modelValue"])]),o("div",ue,[l(y,{modelValue:i.target,"onUpdate:modelValue":d[1]||(d[1]=m=>i.target=m),outlined:"",dense:"",label:"Target Kilo",type:"number",color:"primary","bg-color":"white","input-class":"q-pl-sm"},null,8,["modelValue"])])]),l(O,{class:"q-my-lg"}),o("div",de,[me,o("div",ce,[o("div",pe,[_e,l(y,{modelValue:i.baker,"onUpdate:modelValue":d[2]||(d[2]=m=>i.baker=m),outlined:"",dense:"",label:"Multiplied by:",type:"number",color:"primary","bg-color":"white","input-class":"q-pl-sm"},null,8,["modelValue"])]),o("div",ve,[ye,l(y,{modelValue:i.lamesador,"onUpdate:modelValue":d[3]||(d[3]=m=>i.lamesador=m),outlined:"",dense:"",label:"Multiplied by:",type:"number",color:"primary","bg-color":"white","input-class":"q-pl-sm"},null,8,["modelValue"])]),o("div",fe,[be,l(y,{modelValue:i.hornero,"onUpdate:modelValue":d[4]||(d[4]=m=>i.hornero=m),outlined:"",dense:"",label:"Pesos:",type:"number",color:"primary","bg-color":"white","input-class":"q-pl-sm"},null,8,["modelValue"])])]),ge])]),_:1}),l(G,{align:"right",class:"q-pa-md"},{default:n(()=>[l(c,{color:"primary",label:"Save",onClick:S,rounded:"",class:"q-px-lg q-py-sm text-capitalize"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var he=N(Ve,[["__scopeId","data-v-099583f0"]]);const C=v=>(L("data-v-82742c6a"),v=v(),H(),v),xe={class:"q-pa-md",style:{"min-width":"300px","max-width":"400px"}},we=C(()=>o("div",{class:"text-h6 text-primary text-center q-mb-sm"}," Edit Number of Employees ",-1)),ke={class:"text-subtitle2 q-mb-md"},qe={class:"row justify-end q-mt-md"},Ce={class:"q-pa-md",style:{"min-width":"300px","max-width":"400px"}},Ie=C(()=>o("div",{class:"text-h6 text-primary text-center q-mb-sm"}," Edit Target Kilo ",-1)),Ue={class:"row justify-end q-mt-md"},Ee={class:"q-pa-md",style:{"min-width":"300px","max-width":"400px"}},Qe=C(()=>o("div",{class:"text-h6 text-primary text-center q-mb-sm"}," Edit Baker Multiplier ",-1)),$e={class:"row justify-end q-mt-md"},Se={class:"q-pa-md",style:{"min-width":"300px","max-width":"400px"}},Te=C(()=>o("div",{class:"text-h6 text-primary text-center q-mb-sm"}," Edit Lamesador Multiplier ",-1)),Be={class:"row justify-end q-mt-md"},Ke={class:"q-pa-md",style:{"min-width":"300px","max-width":"400px"}},Ne=C(()=>o("div",{class:"text-h6 text-primary text-center q-mb-sm"}," Edit Hornero Incentives ",-1)),Me={class:"row justify-end q-mt-md"},De={__name:"IncentivesTable",setup(v,{expose:g}){const p=j(),f=D(()=>p.incentivesBases);re(),U(null);const u=U(!1),Q=async(a,r)=>{console.log("updateNumberEmployee",a,r);try{u.value=!0,await p.updateNumberEmployee(a,r)}catch(t){console.error("Error updating number of employees:",t)}finally{u.value=!1}},i=async(a,r)=>{console.log("updateTargetKilo",a,r);try{u.value=!0,await p.updateTargetKilo(a,r)}catch(t){console.error("Error updating target kilo:",t)}finally{u.value=!1}},$=async(a,r)=>{console.log("updateBakerMultiplier",a,r);try{u.value=!0,await p.updateBakerMultiplier(a,r)}catch(t){console.error("Error updating baker multiplier:",t)}finally{u.value=!1}},S=async(a,r)=>{console.log("udpateLamesadorMultiplier",a,r);try{u.value=!0,await p.updateLamesadorMultiplier(a,r)}catch(t){console.error("Error updating lamesador multiplier:",t)}finally{u.value=!1}},I=async(a,r)=>{console.log("updateHorneroIncentives",a,r);try{u.value=!0,await p.updateHorneroIncentives(a,r)}catch(t){console.error("Error updating hornero multiplier:",t)}finally{u.value=!1}},d=async()=>{await p.fetchIncentivesBases()};X(d);const m=a=>{const r=parseFloat(a)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(r)},T=a=>{const r=parseFloat(a);return isNaN(r)||r===0?"0":`x${r%1===0?r.toFixed(0):r}`},B=a=>{if(!a)return"0";const r=parseFloat(a);return isNaN(r)?a:r%1===0?r.toString():r.toString().replace(/0+$/,"").replace(/\.$/,"")};g({fetchIncentivesData:d});const A=[{name:"number_of_employees",required:!0,label:"Number of Employee",align:"center",field:a=>a.number_of_employees},{name:"target",required:!0,label:"Target Kilo",align:"center",field:a=>a.target},{name:"baker_multiplier",required:!0,label:"Baker Multiplier",align:"center",field:a=>a.baker_multiplier},{name:"lamesador_multiplier",required:!0,label:"Lamesador Multiplier",align:"center",field:a=>a.lamesador_multiplier,format:a=>{const r=parseFloat(a);return r?`x${r%1===0?r.toFixed(0):r}`:"0"}},{name:"hornero_incentives",required:!0,label:"Hornero Incentives",align:"center",field:a=>a.hornero_incentives,format:a=>m(a)}];return(a,r)=>(q(),K(ae,{rows:f.value,columns:A},{header:n(t=>[l(oe,{props:t,class:"gradient-header text-white text-weight-bold"},{default:n(()=>[(q(!0),F(P,null,Y(t.cols,e=>(q(),K(te,{key:e.name,props:t,class:"text-center text-subtitle2"},{default:n(()=>[_(b(e.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell-number_of_employees":n(t=>[l(x,{props:t},{default:n(()=>[o("span",null,[_(b(t.row.number_of_employees?t.row.number_of_employees:" - - ")+" ",1),l(w,{class:"bg-blue-grey-8"},{default:n(()=>[_("Edit Number of Employees")]),_:1})]),l(k,{"onUpdate:modelValue":[e=>Q(t.row,e),e=>t.row.number_of_employees=e],modelValue:t.row.number_of_employees},{default:n(e=>[o("div",xe,[we,o("div",ke," Name: "+b(t.row.number_of_employees),1),l(y,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,"model-value":e.value,"onValue:modelValue":s=>e.value=s,type:"text",counter:"",onKeyup:h(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","model-value","onValue:modelValue","onKeyup"]),o("div",qe,[l(c,{flat:"",label:"Close",color:"primary",onClick:e.cancel},null,8,["onClick"]),l(c,{flat:"",label:"Save",color:"primary",onClick:e.set},null,8,["onClick"])])])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-target":n(t=>[l(x,{props:t,class:"cursor-pointer"},{default:n(()=>[o("span",null,[_(b(t.row.target?t.row.target:" - - -")+" ",1),l(w,{class:"bg-blue-grey-8"},{default:n(()=>[_(" Edit Target Kilo ")]),_:1})]),l(k,{"onUpdate:modelValue":[e=>i(t.row,e),e=>t.row.target=e],modelValue:t.row.target},{default:n(e=>[o("div",Ce,[Ie,l(y,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,"model-value":e.value,"onValue:modelValue":s=>e.value=s,type:"text",counter:"",onKeyup:h(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","model-value","onValue:modelValue","onKeyup"]),o("div",Ue,[l(c,{flat:"",label:"Close",color:"primary",onClick:e.cancel},null,8,["onClick"]),l(c,{flat:"",label:"Save",color:"primary",onClick:e.set},null,8,["onClick"])])])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-baker_multiplier":n(t=>[l(x,{props:t,class:"cursor-pointer"},{default:n(()=>[o("span",null,[_(b(T(t.row.baker_multiplier?t.row.baker_multiplier:" - - -"))+" ",1),l(w,{class:"bg-blue-grey-8"},{default:n(()=>[_(" Edit Baker Multiplier ")]),_:1})]),l(k,{"onUpdate:modelValue":[e=>$(t.row,e),e=>t.row.baker_multiplier=e],modelValue:t.row.baker_multiplier},{default:n(e=>[o("div",Ee,[Qe,l(y,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,"model-value":B(e.value),"onValue:modelValue":s=>e.value=s,type:"text",counter:"",prefix:"x",onKeyup:h(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","model-value","onValue:modelValue","onKeyup"]),o("div",$e,[l(c,{flat:"",label:"Close",color:"primary",onClick:e.cancel},null,8,["onClick"]),l(c,{flat:"",label:"Save",color:"primary",onClick:e.set},null,8,["onClick"])])])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-lamesador_multiplier":n(t=>[l(x,{props:t,class:"cursor-pointer"},{default:n(()=>[o("span",null,[_(b(T(t.row.lamesador_multiplier))+" ",1),l(w,{class:"bg-blue-grey-8"},{default:n(()=>[_(" Edit Lamesador Multiplier ")]),_:1})]),l(k,{"onUpdate:modelValue":[e=>S(t.row,e),e=>t.row.lamesador_multiplier=e],modelValue:t.row.lamesador_multiplier},{default:n(e=>[o("div",Se,[Te,l(y,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,"model-value":B(e.value),"onValue:modelValue":s=>e.value=s,type:"text",counter:"",prefix:"x",onKeyup:h(e.set,["enter"])},{default:n(()=>[o("div",Be,[l(c,{flat:"",label:"Close",color:"primary",onClick:e.cancel},null,8,["onClick"]),l(c,{flat:"",label:"Save",color:"primary",onClick:e.set},null,8,["onClick"])])]),_:2},1032,["modelValue","onUpdate:modelValue","model-value","onValue:modelValue","onKeyup"])])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-hornero_incentives":n(t=>[l(x,{props:t,class:"cursor-pointer"},{default:n(()=>[o("span",null,[_(b(T(t.row.hornero_incentives))+" ",1),l(w,{class:"bg-blue-grey-8"},{default:n(()=>[_(" Edit Hornero Incentives ")]),_:1})]),l(k,{"onUpdate:modelValue":[e=>I(t.row,e),e=>t.row.hornero_incentives=e],modelValue:t.row.hornero_incentives},{default:n(e=>[o("div",Ke,[Ne,l(y,{modelValue:e.value,"onUpdate:modelValue":s=>e.value=s,"model-value":B(e.value),"onValue:modelValue":s=>e.value=s,type:"text",counter:"",prefix:"x",onKeyup:h(e.set,["enter"])},{default:n(()=>[o("div",Me,[l(c,{flat:"",label:"Close",color:"primary",onClick:e.cancel},null,8,["onClick"]),l(c,{flat:"",label:"Save",color:"primary",onClick:e.set},null,8,["onClick"])])]),_:2},1032,["modelValue","onUpdate:modelValue","model-value","onValue:modelValue","onKeyup"])])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),_:1},8,["rows"]))}};var Fe=N(De,[["__scopeId","data-v-82742c6a"]]);const Pe={__name:"IncentivesPage",setup(v){const g=U(null),p=()=>{var f;(f=g.value)==null||f.fetchIncentivesData()};return(f,u)=>(q(),K(Z,{class:"q-pa-md"},{default:n(()=>[l(E,null,{default:n(()=>[l(he,{onCreated:p})]),_:1}),l(E,null,{default:n(()=>[l(Fe,{ref_key:"incentivesTable",ref:g},null,512)]),_:1})]),_:1}))}};var il=N(Pe,[["__scopeId","data-v-637fb38a"]]);export{il as default};
