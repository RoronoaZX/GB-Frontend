import{c as C,r as g,t as J,o as v,a3 as h,f as e,M as y,w as a,Q as A,I as w,ae as D,J as i,K as k,aJ as F,a2 as K,a4 as $,a0 as R,a1 as O,O as N,R as I,z as G,u as H,L as P,e as j,$ as z,aK as B,bd as W,N as X}from"./index.ca72f247.js";import{Q as Y}from"./QPage.c5c8524f.js";import{Q as Z}from"./QSpace.888473d1.js";import{Q as ee}from"./QSelect.a1c4ed00.js";import{C as S}from"./ClosePopup.77864f63.js";import{u as T}from"./recipe.710e1e11.js";import{Q as ae}from"./QSpinnerDots.f3b67178.js";import{Q as E}from"./QTooltip.3e12865c.js";import{Q as te}from"./QPopupEdit.4f44d374.js";import{Q as V,a as oe}from"./QTable.6ef48ae6.js";import{Q as le}from"./QBadge.2dc625c4.js";import{_ as U}from"./plugin-vue_export-helper.21dcd24c.js";import{t as se}from"./typography-format.6bffeec7.js";import{b as re}from"./badge-color.f568cd69.js";import"./QChip.ead5e565.js";import"./QMenu.a8d5f7aa.js";import"./position-engine.a63ef796.js";import"./selection.66bddd9a.js";import"./use-virtual-scroll.645c1690.js";import"./rtl.276c3f1b.js";import"./axios.0019c736.js";import"./QVirtualScroll.eb023b79.js";import"./QList.7330d34c.js";import"./date.7612c2b8.js";const ne=i("div",{class:"text-h5 q-mr-md"},"\u{1F4DC} Add Recipe",-1),ie={class:"q-mt-md q-animated q-animate-bounce"},ce={class:"q-mt-md q-animated q-animate-bounce"},de={__name:"RecipeCreate",setup(o){const b=C(()=>p.recipes),p=T(),l=g(!1),c=()=>{l.value=!0},d=["Dough","Filling"],m=g(!1),s=J({name:"",category:""}),u=async()=>{console.log("Recipe",s);try{m.value=!0,await p.createRecipe(s),m.value=!1,l.value=!1,x(),b.value=await p.fetchRecipes()}catch{m.value=!1}},x=()=>{s.name="",s.category="",l.value=!1};return(Q,_)=>(v(),h($,null,[e(y,{class:"text-dark q-pa-sm",outline:"",dense:"",elevated:"",icon:"add_circle",label:"Add Recipe",onClick:c,style:{"background-color":"#ef4444"}}),e(K,{modelValue:l.value,"onUpdate:modelValue":_[2]||(_[2]=r=>l.value=r),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:a(()=>[e(A,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:a(()=>[e(w,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:a(()=>[ne,e(Z),D(e(y,{icon:"close",flat:"",dense:"",round:""},null,512),[[S]])]),_:1}),e(w,{class:"q-mx-md"},{default:a(()=>[i("div",ie,[e(k,{class:"text-capitalize",modelValue:s.name,"onUpdate:modelValue":_[0]||(_[0]=r=>s.name=r),outlined:"",dense:"",label:"Recipe Name",rules:[r=>r&&r.length>0||"Recipe name is required"]},null,8,["modelValue","rules"])]),i("div",ce,[e(ee,{modelValue:s.category,"onUpdate:modelValue":_[1]||(_[1]=r=>s.category=r),options:d,"hide-dropdown-icon":"",outlined:"",dense:"",behavior:"menu",label:"Category",rules:[r=>r&&r.length>0||"Category is required"]},null,8,["modelValue","rules"])]),e(F,{class:"row q-mt-md q-px-lg q-py-sm q-pt-none",align:"right"},{default:a(()=>[D(e(y,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[S]]),e(y,{class:"glossy",color:"teal",label:"Create",onClick:u})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const L=o=>(N("data-v-4f1d2e6e"),o=o(),I(),o),ue=L(()=>i("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),pe=L(()=>i("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),me={__name:"RecipeDelete",props:["delete"],setup(o){const b=T(),p=o,l=g(!1),c=()=>{l.value=!0},d=async()=>{await b.deleteRecipe(p.delete.row.id),l.value=!1};return(m,s)=>(v(),h($,null,[e(y,{onClick:c,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"","aria-label":"Delete"},{default:a(()=>[e(E,{class:"bg-negative",delay:200},{default:a(()=>[R("Delete")]),_:1})]),_:1}),e(K,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=u=>l.value=u),persistent:""},{default:a(()=>[e(A,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:a(()=>[e(w,{class:"q-pt-none q-pb-sm"},{default:a(()=>[ue,pe]),_:1}),e(O,{class:"q-mb-md"}),e(w,null,{default:a(()=>[e(F,{align:"right",class:"q-pt-none"},{default:a(()=>[D(e(y,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[S]]),e(y,{dense:"",label:"Delete",color:"negative",onClick:d,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var _e=U(me,[["__scopeId","data-v-4f1d2e6e"]]);const fe=o=>(N("data-v-3f841b08"),o=o(),I(),o),ge={align:"left"},ve={key:0,class:"spinner-wrapper"},ye={key:1},be={key:0,class:"data-error"},he=fe(()=>i("div",{class:"q-ml-sm text-h6"},"No data available",-1)),we={class:"row justify-center q-gutter-x-md"},xe={__name:"RecipeTable",setup(o){const{capitalizeFirstLetter:b}=se(),{getRecipeBadgeCategoryColor:p}=re(),l=T(),c=g(""),d=g(!0);g([]);const m=g(!1),s=g({rowsPerPage:0}),u=C(()=>l.recipes),x=C(()=>c.value?u.value.filter(n=>n.name.toLowerCase().includes(c.value.toLowerCase())):u.value);async function Q(n,f){try{await l.updateRecipeName(n,f)}catch(t){console.error("Error updating recipe name:",t),X.create({type:"negative",message:"Failed to edit recipe name"})}}G(async()=>{await _()});const _=async()=>{try{d.value=!0,u.value=await l.fetchRecipes(),u.value.length||(m.value=!0),console.log("Recipe",u.value)}catch(n){console.log("error fetching recipe: ",n),m.value=!0}finally{d.value=!1}};H(c,async n=>{d.value=!0,await new Promise(f=>setTimeout(f,1e3)),d.value=!1,m.value=x.value.length===0});const r=[{name:"name",label:"Recipe Name",align:"left",field:n=>n.name,format:n=>`${n}`,sortable:!0},{name:"category",align:"left",label:"Category",field:"category",sortable:!0},{name:"action",label:"Action",align:"center",sortable:!0}];return(n,f)=>(v(),h($,null,[i("div",ge,[e(k,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:c.value,"onUpdate:modelValue":f[0]||(f[0]=t=>c.value=t),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:""},{append:a(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])]),d.value?(v(),h("div",ve,[e(ae,{size:"50px",color:"primary"})])):(v(),h("div",ye,[x.value.length===0?(v(),h("div",be,[e(P,{name:"warning",color:"warning",size:"4em"}),he])):(v(),j(oe,{key:1,class:"table-container elegant-container sticky-header",filter:c.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:r,rows:x.value,"row-key":"name",pagination:s.value,"onUpdate:pagination":f[1]||(f[1]=t=>s.value=t),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"500px"}},{"body-cell-name":a(t=>[e(V,{props:t,class:"cursor-pointer"},{default:a(()=>[i("span",null,[R(z(B(b)(t.row.name))+" ",1),e(E,{class:"bg-blue-grey-8",offset:[10,10]},{default:a(()=>[R("Edit Recipe Name")]),_:1})]),e(te,{"model-value":t.row.name,"onUpdate:modelValue":q=>Q(t.row,q),"auto-save":""},{default:a(q=>[e(k,{class:"text-capitalize",modelValue:q.value,"onUpdate:modelValue":M=>q.value=M,dense:"",autofocus:"",counter:"",onKeyup:W(q.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["model-value","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-category":a(t=>[e(V,{key:"name",props:t},{default:a(()=>[e(le,{color:B(p)(t.row.category)},{default:a(()=>[R(z(t.row.category),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-action":a(t=>[e(V,{props:t},{default:a(()=>[i("div",we,[e(_e,{delete:t},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var qe=U(xe,[["__scopeId","data-v-3f841b08"]]);const Re=o=>(N("data-v-6fff6eb6"),o=o(),I(),o),Qe=Re(()=>i("div",{class:"text-h6"},null,-1)),Ve={align:"right"},Ce={__name:"RecipePage",setup(o){return(b,p)=>(v(),j(Y,{class:"elegant-container",flat:""},{default:a(()=>[e(w,{class:"row justify-between"},{default:a(()=>[Qe,i("div",Ve,[e(de)])]),_:1}),e(w,null,{default:a(()=>[e(qe)]),_:1})]),_:1}))}};var Ye=U(Ce,[["__scopeId","data-v-6fff6eb6"]]);export{Ye as default};
