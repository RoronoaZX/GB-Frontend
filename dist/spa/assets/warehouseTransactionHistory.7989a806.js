import{c as Q,r as N,o as p,a2 as $,J as a,f as e,M as I,w as t,Q as A,I as P,_ as r,$ as u,a1 as O,K as fe,aI as pe,ad as ae,a3 as T,N as te,O as E,R as G,z as W,L as X,e as V,a4 as F,be as se,a0 as ve}from"./index.05f93853.js";import{a as H,Q as he,c as J,b as xe}from"./QTabPanels.5f57732d.js";import{Q as Z}from"./QSpinnerDots.ce61358f.js";import{Q as z}from"./QBadge.0c08d251.js";import{Q as ee}from"./QScrollArea.61775ba5.js";import{u as U}from"./warehouse.cd5b8204.js";import{u as j}from"./premix.16840fe0.js";import{q as L}from"./date.75394b35.js";import{Q as _}from"./rtl.224cb24e.js";import{Q as M,a as R,b as f}from"./QList.646d4200.js";import{C as le}from"./ClosePopup.a767fcf6.js";import{_ as K}from"./plugin-vue_export-helper.21dcd24c.js";import"./QResizeObserver.b8296167.js";import"./use-panel.30a226a1.js";import"./touch.9135741d.js";import"./selection.4c477115.js";import"./QScrollObserver.bc1823f9.js";import"./TouchPan.440c0772.js";import"./axios.a8d41f8b.js";const ne=o=>(E("data-v-0d9984a9"),o=o(),G(),o),ge={class:"row justify-between"},ye={class:"text-h6"},be=ne(()=>a("div",{class:"text-h6",align:"center"},"Premix",-1)),$e=ne(()=>a("div",{class:"text-h6"},"Decline Report",-1)),we={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){const x=U(),S=Q(()=>x.user);console.log("userdata",S.value);const b=S.value.data.employee_id,y=j(),m=o;console.log("report",m.report);const D=N(!1),v=()=>{D.value=!0},w=N(""),q=N(!1),k=()=>{q.value=!0},g=c=>{const l=C=>C?C.charAt(0).toUpperCase()+C.slice(1).toLowerCase():"",n=c.firstname?l(c.firstname):"No Firstname",i=c.middlename?l(c.middlename).charAt(0)+".":"",d=c.lastname?l(c.lastname):"No Lastname";return`${n} ${i} ${d}`},h=async()=>{try{const c={id:m.report.id,request_premixes_id:m.report.id,branch_premix_id:m.report.branch_premix_id,employee_id:b,status:m.report.status,quantity:m.report.quantity,warehouse_id:m.report.warehouse_id,notes:"Confirmed Premix"},l=await y.confirmPremix(c);console.log("Report confirmedss:",l),te.create({type:"positive",message:"Report confirmed successfully"}),D.value=!1}catch(c){console.error(c)}},s=async()=>{const c={id:m.report.id,request_premixes_id:m.report.id,branch_premix_id:m.report.branch_premix_id,employee_id:b,status:"decline",quantity:m.report.quantity,warehouse_id:m.report.warehouse_id,notes:w.value};await y.declinePremix(c),q.value=!1};return(c,l)=>(p(),$(T,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:v})]),e(O,{modelValue:D.value,"onUpdate:modelValue":l[1]||(l[1]=n=>D.value=n)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(P,null,{default:t(()=>[a("div",ge,[a("div",ye,r(o.report.name),1),e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:l[0]||(l[0]=n=>D.value=!1)})])]),_:1}),e(P,null,{default:t(()=>[a("div",null,"Baker: "+r(g(o.report.employee)),1),a("div",null," Branch: "+r(o.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[u(" Status: "),e(z,{color:"warning",outlined:""},{default:t(()=>[u(r(o.report.status),1)]),_:1})])]),_:1}),e(P,null,{default:t(()=>[be]),_:1}),e(P,null,{default:t(()=>[e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Premix Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[u(r(o.report.name),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[u(r(o.report.quantity),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(P,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[e(I,{color:"negative",label:"Decline",class:"action-btn",onClick:k}),e(I,{color:"positive",label:"Confirm",class:"action-btn",onClick:h})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(O,{modelValue:q.value,"onUpdate:modelValue":l[3]||(l[3]=n=>q.value=n)},{default:t(()=>[e(A,null,{default:t(()=>[e(P,null,{default:t(()=>[$e]),_:1}),e(P,null,{default:t(()=>[e(fe,{modelValue:w.value,"onUpdate:modelValue":l[2]||(l[2]=n=>w.value=n),placeholder:"Enter your remark",label:"Remark",type:"textarea",filled:"","lazy-rules":"",rules:[n=>!!n||"Remark is required"]},null,8,["modelValue","rules"])]),_:1}),e(pe,{align:"right"},{default:t(()=>[ae(e(I,{flat:"",label:"Cancel",color:"primary"},null,512),[[le]]),e(I,{flat:"",label:"Confirm",color:"negative",onClick:s})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Pe=K(we,[["__scopeId","data-v-0d9984a9"]]);const De=o=>(E("data-v-275be100"),o=o(),G(),o),ke={key:0,class:"spinner-wrapper"},qe={key:1},Ce={key:0,class:"data-error"},Ne=De(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Se={class:"q-gutter-md q-ma-md"},Re={class:"text-h6"},Ie={class:"row justify-between"},Qe={class:"text-subtitle1"},Ve={class:"text-subtitle1"},Te={class:"text-subtitle1"},Ae={__name:"PendingPage",setup(o){const x=U(),S=Q(()=>x.user);console.log("userdata",S.value);const b=j(),y=Q(()=>b.pendingPremixData),m=S.value.device.reference_id;console.log("warehouseId",m);const D=N("pending"),v=N(!0),w=N(!1);W(async()=>{m&&await h()});const q=s=>L.formatDate(s,"MMMM D, YYYY"),k=s=>L.formatDate(s,"hh:mm A"),g=s=>{const c=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",l=s.firstname?c(s.firstname):"No Firstname",n=s.middlename?c(s.middlename).charAt(0)+".":"",i=s.lastname?c(s.lastname):"No Lastname";return`${l} ${n} ${i}`},h=async()=>{try{v.value=!0,await b.fetchPendingPremix(m,D.value),y.value.length||(w.value=!0)}catch{w.value=!0}finally{v.value=!1}};return(s,c)=>v.value?(p(),$("div",ke,[e(Z,{size:"50px",color:"primary"})])):(p(),$("div",qe,[y.value.length===0?(p(),$("div",Ce,[e(X,{name:"warning",color:"warning",size:"4em"}),Ne])):(p(),V(ee,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Se,[(p(!0),$(T,null,F(y.value,(l,n)=>(p(),V(A,{key:n},{default:t(()=>[e(P,{class:"q-gutter-sm"},{default:t(()=>[a("div",Re,r(l.name),1),a("div",Ie,[a("div",Qe,r(q(l.created_at)),1),a("div",Ve,r(k(l.created_at)),1),a("div",Te,r(l.branch_premix.branch_recipe.branch.name)+" - "+r(g(l.employee)),1),a("div",null,[e(z,{color:"warning",outlined:""},{default:t(()=>[u(" Pending ")]),_:1})]),a("div",null,[e(Pe,{report:l},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128))])]),_:1}))]))}};var Le=K(Ae,[["__scopeId","data-v-275be100"]]);const ze={class:"row justify-between"},Me={class:"text-h6"},Fe=a("div",{class:"text-h6",align:"center"},"Premix",-1),Ue=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),je={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){var s,c,l;const x=N(!1),S=()=>{x.value=!0},b=U(),y=Q(()=>b.user);console.log("userdata",y.value);const m=y.value.data.employee_id,D=j(),v=o,w=n=>{const i=Number(n);return isNaN(i)?"":(i%1===0,i.toString())},q=(n,i)=>{if(i==="Pcs")return`${n} pcs`;if(i==="Grams"){if(n>=1e3){let d=n/1e3;return`${d%1===0?d.toString():d.toString().replace(/^0+/,"")} kgs`}return`${n} g`}return`${n} ${i}`},k=((l=(c=(s=v.report)==null?void 0:s.branch_premix)==null?void 0:c.branch_recipe)==null?void 0:l.ingredient_groups)||"Undefined";console.log("ingrdientsData",k),console.log("report to proceed",v.report);const g=n=>{const i=Y=>Y?Y.charAt(0).toUpperCase()+Y.slice(1).toLowerCase():"",d=n.firstname?i(n.firstname):"No Firstname",C=n.middlename?i(n.middlename).charAt(0)+".":"",B=n.lastname?i(n.lastname):"No Lastname";return`${d} ${C} ${B}`},h=async()=>{try{const n={id:v.report.id,request_premixes_id:v.report.id,branch_premix_id:v.report.branch_premix_id,employee_id:m,status:"process",quantity:v.report.quantity,warehouse_id:v.report.warehouse_id,notes:"Process Premix"},i=await D.processPremix(n);console.log("Report Process:",i),te.create({type:"positive",message:"Premix proceed to process successfully"}),x.value=!1}catch(n){console.error(n)}};return(n,i)=>(p(),$(T,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:S})]),e(O,{modelValue:x.value,"onUpdate:modelValue":i[1]||(i[1]=d=>x.value=d)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(P,null,{default:t(()=>[a("div",ze,[a("div",Me,r(o.report.name),1),e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:i[0]||(i[0]=d=>x.value=!1)})])]),_:1}),e(P,null,{default:t(()=>[a("div",null,"Baker: "+r(g(o.report.employee)),1),a("div",null," Branch: "+r(o.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[u(" Status: "),e(z,{color:"green",outlined:""},{default:t(()=>[u(r(o.report.status),1)]),_:1})])]),_:1}),e(P,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[Fe,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Premix Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[u(r(o.report.name),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[u(r(w(o.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[Ue,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u(" Code")]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u(" Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Quantity")]),_:1})]),_:1})]),_:1}),(p(!0),$(T,null,F(se(k),(d,C)=>(p(),V(R,{key:C},{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[u(r(d.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[u(r(d.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(f,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[u(r(q(d.quantity*o.report.quantity,d.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(P,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ae(e(I,{flat:"",label:"Cancel",color:"negative"},null,512),[[le]]),e(I,{color:"primary",label:"Process",class:"action-btn",onClick:h})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const oe=o=>(E("data-v-5c84c267"),o=o(),G(),o),Ye={key:0,class:"spinner-wrapper"},Be={key:1},Ke={key:0,class:"data-error"},Oe=oe(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ee={class:"q-gutter-md q-ma-md"},Ge={class:"row justify-between"},He={class:"text-h6"},Je={class:"row q-gutter-x-md"},We=oe(()=>a("div",{class:"text-subtitle1"},"Confirmed By:",-1)),Xe={class:"text-overline text-weight-bold"},Ze={class:"row justify-between"},et={class:"text-subtitle1"},tt={class:"text-subtitle1"},at={class:"text-subtitle1"},st={__name:"ConfirmPage",setup(o){const x=U(),b=Q(()=>x.user).value.device.reference_id;console.log("warehouseId",b);const y=j(),m=Q(()=>y.confirmPremixData);console.log("confirmedPremixData",m.value);const D=N("confirmed"),v=N(!0),w=N(!1);W(async()=>{b&&await h()});const q=s=>L.formatDate(s,"MMMM D, YYYY"),k=s=>L.formatDate(s,"hh:mm A"),g=s=>{const c=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",l=s.firstname?c(s.firstname):"No Firstname",n=s.middlename?c(s.middlename).charAt(0)+".":"",i=s.lastname?c(s.lastname):"No Lastname";return`${l} ${n} ${i}`},h=async()=>{try{v.value=!0,await y.fetchConfirmPremix(b,D.value),m.value.length||(w.value=!0)}catch{w.value=!0}finally{v.value=!1}};return(s,c)=>v.value?(p(),$("div",Ye,[e(Z,{size:"50px",color:"primary"})])):(p(),$("div",Be,[m.value.length===0?(p(),$("div",Ke,[e(X,{name:"warning",color:"warning",size:"4em"}),Oe])):(p(),V(ee,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Ee,[(p(!0),$(T,null,F(m.value,(l,n)=>(p(),V(A,{key:n},{default:t(()=>[e(P,{class:"q-gutter-sm"},{default:t(()=>[a("div",Ge,[a("div",He,r(l.name),1),a("div",Je,[We,a("div",Xe,r(g(l.history[0].employee)),1)])]),a("div",Ze,[a("div",et,r(q(l.created_at)),1),a("div",tt,r(k(l.created_at)),1),a("div",at,r(l.branch_premix.branch_recipe.branch.name)+" - "+r(g(l.employee)),1),a("div",null,[e(z,{color:"green",outlined:""},{default:t(()=>[u(r(l.status),1)]),_:2},1024)]),a("div",null,[e(je,{report:l},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128))])]),_:1}))]))}};var lt=K(st,[["__scopeId","data-v-5c84c267"]]);const rt={class:"row justify-between"},nt={class:"text-h6"},ot=a("div",{class:"text-h6",align:"center"},"Premix",-1),it=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),ct={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){var w,q,k;const x=N(!1),S=()=>{x.value=!0},b=o,y=g=>{const h=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",s=g.firstname?h(g.firstname):"No Firstname",c=g.middlename?h(g.middlename).charAt(0)+".":"",l=g.lastname?h(g.lastname):"No Lastname";return`${s} ${c} ${l}`},m=g=>{const h=Number(g);return isNaN(h)?"":(h%1===0,h.toString())},D=(g,h)=>{if(h==="Pcs")return`${g} pcs`;if(h==="Grams"){if(g>=1e3){let s=g/1e3;return`${s%1===0?s.toString():s.toString().replace(/^0+/,"")} kgs`}return`${g} g`}return`${g} ${h}`},v=((k=(q=(w=b.report)==null?void 0:w.branch_premix)==null?void 0:q.branch_recipe)==null?void 0:k.ingredient_groups)||"Undefined";return console.log("ingrdientsData",v),(g,h)=>(p(),$("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:S}),e(O,{modelValue:x.value,"onUpdate:modelValue":h[1]||(h[1]=s=>x.value=s)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(P,null,{default:t(()=>[a("div",rt,[a("div",nt,r(o.report.name),1),e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:h[0]||(h[0]=s=>x.value=!1)})])]),_:1}),e(P,null,{default:t(()=>[a("div",null,"Baker: "+r(y(o.report.employee)),1),a("div",null," Branch: "+r(o.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[u(" Status: "),e(z,{color:"red-6",outlined:""},{default:t(()=>[u(r(o.report.status),1)]),_:1})])]),_:1}),e(P,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[ot,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Premix Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[u(r(o.report.name),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[u(r(m(o.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[it,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u(" Code")]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u(" Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Quantity")]),_:1})]),_:1})]),_:1}),(p(!0),$(T,null,F(se(v),(s,c)=>(p(),V(R,{key:c},{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[u(r(s.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[u(r(s.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(f,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[u(r(D(s.quantity*o.report.quantity,s.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};const ie=o=>(E("data-v-2a54950c"),o=o(),G(),o),dt={key:0,class:"spinner-wrapper"},ut={key:1},mt={key:0,class:"data-error"},_t=ie(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),ft={class:"q-gutter-md q-ma-md"},pt={class:"row justify-between"},vt={class:"text-h6"},ht={class:"row q-gutter-x-md"},xt=ie(()=>a("div",{class:"text-subtitle1"},"Declined By:",-1)),gt={class:"text-overline text-weight-bold"},yt={class:"row justify-between"},bt={class:"text-subtitle1"},$t={class:"text-subtitle1"},wt={class:"text-subtitle1"},Pt={__name:"DeclinePage",setup(o){const x=U(),b=Q(()=>x.user).value.device.reference_id;console.log("warehouseId",b);const y=j(),m=Q(()=>y.declinePremixData);console.log("declinedPremixData",m.value);const D=N("declined"),v=N(!0),w=N(!1);W(async()=>{b&&await h()});const q=s=>L.formatDate(s,"MMMM D, YYYY"),k=s=>L.formatDate(s,"hh:mm A"),g=s=>{const c=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",l=s.firstname?c(s.firstname):"No Firstname",n=s.middlename?c(s.middlename).charAt(0)+".":"",i=s.lastname?c(s.lastname):"No Lastname";return`${l} ${n} ${i}`},h=async()=>{try{v.value=!0,await y.fetchDeclinePremix(b,D.value),m.value.length||(w.value=!0)}catch{w.value=!0}finally{v.value=!1}};return(s,c)=>v.value?(p(),$("div",dt,[e(Z,{size:"50px",color:"primary"})])):(p(),$("div",ut,[m.value.length===0?(p(),$("div",mt,[e(X,{name:"warning",color:"warning",size:"4em"}),_t])):(p(),V(ee,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",ft,[(p(!0),$(T,null,F(m.value,(l,n)=>(p(),V(A,{key:n},{default:t(()=>[e(P,{class:"q-gutter-sm"},{default:t(()=>[a("div",pt,[a("div",vt,r(l.name),1),a("div",ht,[xt,a("div",gt,r(g(l.history[0].employee)),1)])]),a("div",yt,[a("div",bt,r(q(l.created_at)),1),a("div",$t,r(k(l.created_at)),1),a("div",wt,r(l.branch_premix.branch_recipe.branch.name)+" - "+r(g(l.employee)),1),a("div",null,[e(z,{color:"red-6",outlined:""},{default:t(()=>[u(r(l.status),1)]),_:2},1024)]),a("div",null,[e(ct,{report:l},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128))])]),_:1}))]))}};var Dt=K(Pt,[["__scopeId","data-v-2a54950c"]]);const kt={class:"row justify-between"},qt={class:"text-h6"},Ct=a("div",{class:"text-h6",align:"center"},"Premix",-1),Nt=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),St={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){var c,l,n;const x=U(),S=Q(()=>x.user);console.log("userdata",S.value);const b=S.value.data.employee_id,y=j(),m=o;console.log("report",m.report);const D=N(!1),v=()=>{D.value=!0},w=((n=(l=(c=m.report)==null?void 0:c.branch_premix)==null?void 0:l.branch_recipe)==null?void 0:n.ingredient_groups)||"Undefined";console.log("ingrdientsData",w);const q=i=>{const d=re=>re?re.charAt(0).toUpperCase()+re.slice(1).toLowerCase():"",C=i.firstname?d(i.firstname):"No Firstname",B=i.middlename?d(i.middlename).charAt(0)+".":"",Y=i.lastname?d(i.lastname):"No Lastname";return`${C} ${B} ${Y}`},k=i=>{const d=Number(i);return isNaN(d)?"":(d%1===0,d.toString())},g=(i,d)=>{if(d==="Pcs")return`${i} pcs`;if(d==="Grams"){if(i>=1e3){let C=i/1e3;return`${C%1===0?C.toString():C.toString().replace(/^0+/,"")} kgs`}return`${i} g`}return`${i} ${d}`},h=Q(()=>w.map(i=>{const d=parseFloat(i.quantity)*parseFloat(m.report.quantity);return{...i,totalQuantity:d,formattedQuantity:g(d,i.ingredient.unit)}}));console.log("computedIngredients",h.value);const s=async()=>{try{const i={id:m.report.id,request_premixes_id:m.report.id,branch_premix_id:m.report.branch_premix_id,employee_id:b,status:"completed",quantity:m.report.quantity,warehouse_id:m.report.warehouse_id,notes:"Completed Premix",ingredients:h.value.map(C=>({ingredient_id:C.ingredient.id,quantity:C.totalQuantity,unit:C.ingredient.unit}))},d=await y.completedPremix(i);console.log("Report Process:",d),te.create({type:"positive",message:"Premix completed to process successfully"}),D.value=!1}catch(i){console.error(i),te.create({type:"negative",message:"An error occurred while processing the premix."})}};return(i,d)=>(p(),$(T,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:v})]),e(O,{modelValue:D.value,"onUpdate:modelValue":d[1]||(d[1]=C=>D.value=C)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(P,null,{default:t(()=>[a("div",kt,[a("div",qt,r(o.report.name),1),e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:d[0]||(d[0]=C=>D.value=!1)})])]),_:1}),e(P,null,{default:t(()=>[a("div",null,"Baker: "+r(q(o.report.employee)),1),a("div",null," Branch: "+r(o.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[u(" Status: "),e(z,{color:"primary",outlined:""},{default:t(()=>[u(r(o.report.status),1)]),_:1})])]),_:1}),e(P,null,{default:t(()=>[Ct]),_:1}),e(P,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Premix Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[u(r(o.report.name),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[u(r(k(o.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[a("div",null,[Nt,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u(" Code")]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u(" Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Quantity")]),_:1})]),_:1})]),_:1}),(p(!0),$(T,null,F(h.value,(C,B)=>(p(),V(R,{key:B},{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[u(r(C.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[u(r(C.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(f,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[u(r(g(C.quantity*m.report.quantity,C.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1}),e(P,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ae(e(I,{flat:"",label:"Cancel",color:"primary"},null,512),[[le]]),e(I,{color:"cyan-7",label:"Completed",class:"action-btn",onClick:s})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const ce=o=>(E("data-v-542bda72"),o=o(),G(),o),Rt={key:0,class:"spinner-wrapper"},It={key:1},Qt={key:0,class:"data-error"},Vt=ce(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Tt={class:"q-gutter-md q-ma-md"},At={class:"row justify-between"},Lt={class:"text-h6"},zt={class:"row q-gutter-x-md"},Mt=ce(()=>a("div",{class:"text-subtitle1"},"Process By:",-1)),Ft={class:"text-overline text-weight-bold"},Ut={class:"row justify-between"},jt={class:"text-subtitle1"},Yt={class:"text-subtitle1"},Bt={class:"text-subtitle1"},Kt={__name:"ProcessPage",setup(o){const x=U(),b=Q(()=>x.user).value.device.reference_id;console.log("warehouseId",b);const y=j(),m=Q(()=>y.processPremixData);console.log("processPremixData",m.value);const D=N("process"),v=N(!0),w=N(!1);W(async()=>{b&&await h()});const q=s=>L.formatDate(s,"MMMM D, YYYY"),k=s=>L.formatDate(s,"hh:mm A"),g=s=>{const c=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",l=s.firstname?c(s.firstname):"No Firstname",n=s.middlename?c(s.middlename).charAt(0)+".":"",i=s.lastname?c(s.lastname):"No Lastname";return`${l} ${n} ${i}`},h=async()=>{try{v.value=!0,await y.fetchProcessPremix(b,D.value),m.value.length||(w.value=!0)}catch{w.value=!0}finally{v.value=!1}};return(s,c)=>v.value?(p(),$("div",Rt,[e(Z,{size:"50px",color:"primary"})])):(p(),$("div",It,[m.value.length===0?(p(),$("div",Qt,[e(X,{name:"warning",color:"warning",size:"4em"}),Vt])):(p(),V(ee,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Tt,[(p(!0),$(T,null,F(m.value,(l,n)=>(p(),V(A,{key:n},{default:t(()=>[e(P,{class:"q-gutter-sm"},{default:t(()=>[a("div",At,[a("div",Lt,r(l.name),1),a("div",zt,[Mt,a("div",Ft,r(g(l.history[0].employee)),1)])]),a("div",Ut,[a("div",jt,r(q(l.created_at)),1),a("div",Yt,r(k(l.created_at)),1),a("div",Bt,r(l.branch_premix.branch_recipe.branch.name)+" - "+r(g(l.employee)),1),a("div",null,[e(z,{color:"primary",outlined:""},{default:t(()=>[u(r(l.status),1)]),_:2},1024)]),a("div",null,[e(St,{report:l},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128))])]),_:1}))]))}};var Ot=K(Kt,[["__scopeId","data-v-542bda72"]]);const Et={class:"row justify-between"},Gt={class:"text-h6"},Ht=a("div",{class:"text-h6",align:"center"},"Premix",-1),Jt=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),Wt={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){var s,c,l;const x=N(!1),S=()=>{x.value=!0},b=U(),y=Q(()=>b.user);console.log("userdata",y.value);const m=y.value.data.employee_id,D=j(),v=o,w=n=>{const i=Number(n);return isNaN(i)?"":(i%1===0,i.toString())},q=(n,i)=>{if(i==="Pcs")return`${n} pcs`;if(i==="Grams"){if(n>=1e3){let d=n/1e3;return`${d%1===0?d.toString():d.toString().replace(/^0+/,"")} kgs`}return`${n} g`}return`${n} ${i}`},k=((l=(c=(s=v.report)==null?void 0:s.branch_premix)==null?void 0:c.branch_recipe)==null?void 0:l.ingredient_groups)||"Undefined";console.log("ingrdientsData",k),console.log("report to proceed",v.report);const g=n=>{const i=Y=>Y?Y.charAt(0).toUpperCase()+Y.slice(1).toLowerCase():"",d=n.firstname?i(n.firstname):"No Firstname",C=n.middlename?i(n.middlename).charAt(0)+".":"",B=n.lastname?i(n.lastname):"No Lastname";return`${d} ${C} ${B}`},h=async()=>{try{const n={id:v.report.id,request_premixes_id:v.report.id,branch_premix_id:v.report.branch_premix_id,employee_id:m,status:"to deliver",quantity:v.report.quantity,warehouse_id:v.report.warehouse_id,notes:"To-Deliver Premix"},i=await D.toDeliverPremix(n);console.log("Report To Deliver:",i),te.create({type:"positive",message:"Premix To Deliver to process successfully"}),x.value=!1}catch(n){console.error(n)}};return(n,i)=>(p(),$("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:S}),e(O,{modelValue:x.value,"onUpdate:modelValue":i[1]||(i[1]=d=>x.value=d)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(P,null,{default:t(()=>[a("div",Et,[a("div",Gt,r(o.report.name),1),e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:i[0]||(i[0]=d=>x.value=!1)})])]),_:1}),e(P,null,{default:t(()=>[a("div",null,"Baker: "+r(g(o.report.employee)),1),a("div",null," Branch: "+r(o.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[u(" Status: "),e(z,{color:"black",outlined:""},{default:t(()=>[u(r(o.report.status),1)]),_:1})])]),_:1}),e(P,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[Ht,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Premix Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[u(r(o.report.name),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[u(r(w(o.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[Jt,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u(" Code")]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u(" Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Quantity")]),_:1})]),_:1})]),_:1}),(p(!0),$(T,null,F(se(k),(d,C)=>(p(),V(R,{key:C},{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[u(r(d.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[u(r(d.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(f,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[u(r(q(d.quantity*o.report.quantity,d.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(P,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ae(e(I,{flat:"",label:"Cancel",color:"negative"},null,512),[[le]]),e(I,{color:"dark",label:"TO-Deliver",class:"action-btn",onClick:h})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};const de=o=>(E("data-v-bc9fc37a"),o=o(),G(),o),Xt={key:0,class:"spinner-wrapper"},Zt={key:1},ea={key:0,class:"data-error"},ta=de(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),aa={class:"q-gutter-md q-ma-md"},sa={class:"row justify-between"},la={class:"text-h6"},ra={class:"row q-gutter-x-md"},na=de(()=>a("div",{class:"text-subtitle1"},"Completed By:",-1)),oa={class:"text-overline text-weight-bold"},ia={class:"row justify-between"},ca={class:"text-subtitle1"},da={class:"text-subtitle1"},ua={class:"text-subtitle1"},ma={__name:"CompletedPage",setup(o){const x=U(),b=Q(()=>x.user).value.device.reference_id;console.log("warehouseId",b);const y=j(),m=Q(()=>y.completedPremixData);console.log("completedPremixData",m.value);const D=N("completed"),v=N(!0),w=N(!1);W(async()=>{b&&await h()});const q=s=>L.formatDate(s,"MMMM D, YYYY"),k=s=>L.formatDate(s,"hh:mm A"),g=s=>{const c=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",l=s.firstname?c(s.firstname):"No Firstname",n=s.middlename?c(s.middlename).charAt(0)+".":"",i=s.lastname?c(s.lastname):"No Lastname";return`${l} ${n} ${i}`},h=async()=>{try{v.value=!0,await y.fetchCompletedPremix(b,D.value),m.value.length||(w.value=!0)}catch{w.value=!0}finally{v.value=!1}};return(s,c)=>v.value?(p(),$("div",Xt,[e(Z,{size:"50px",color:"primary"})])):(p(),$("div",Zt,[m.value.length===0?(p(),$("div",ea,[e(X,{name:"warning",color:"warning",size:"4em"}),ta])):(p(),V(ee,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",aa,[(p(!0),$(T,null,F(m.value,(l,n)=>(p(),V(A,{key:n},{default:t(()=>[e(P,{class:"q-gutter-sm"},{default:t(()=>[a("div",sa,[a("div",la,r(l.name),1),a("div",ra,[na,a("div",oa,r(g(l.history[0].employee)),1)])]),a("div",ia,[a("div",ca,r(q(l.created_at)),1),a("div",da,r(k(l.created_at)),1),a("div",ua,r(l.branch_premix.branch_recipe.branch.name)+" - "+r(g(l.employee)),1),a("div",null,[e(z,{color:"dark",outlined:""},{default:t(()=>[u(r(l.status),1)]),_:2},1024)]),a("div",null,[e(Wt,{report:l},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128))])]),_:1}))]))}};var _a=K(ma,[["__scopeId","data-v-bc9fc37a"]]);const fa={class:"row justify-between"},pa={class:"text-h6"},va=a("div",{class:"text-h6",align:"center"},"Premix",-1),ha=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),xa={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){var s,c,l;const x=N(!1),S=()=>{x.value=!0},b=U(),y=Q(()=>b.user);console.log("userdata",y.value);const m=y.value.data.employee_id,D=j(),v=o;console.log("props report",v.report);const w=n=>{const i=Number(n);return isNaN(i)?"":(i%1===0,i.toString())},q=(n,i)=>{if(i==="Pcs")return`${n} pcs`;if(i==="Grams"){if(n>=1e3){let d=n/1e3;return`${d%1===0?d.toString():d.toString().replace(/^0+/,"")} kgs`}return`${n} g`}return`${n} ${i}`},k=((l=(c=(s=v.report)==null?void 0:s.branch_premix)==null?void 0:c.branch_recipe)==null?void 0:l.ingredient_groups)||"Undefined";console.log("ingrdientsData",k),console.log("report to proceed",v.report);const g=n=>{const i=Y=>Y?Y.charAt(0).toUpperCase()+Y.slice(1).toLowerCase():"",d=n.firstname?i(n.firstname):"No Firstname",C=n.middlename?i(n.middlename).charAt(0)+".":"",B=n.lastname?i(n.lastname):"No Lastname";return`${d} ${C} ${B}`},h=async()=>{try{const n={id:v.report.id,request_premixes_id:v.report.id,branch_premix_id:v.report.branch_premix_id,employee_id:m,status:"to receive",quantity:v.report.quantity,warehouse_id:v.report.warehouse_id,notes:"To Receive Premix"},i=await D.toReceivePremix(n);console.log("Report Process:",i),te.create({type:"positive",message:"Premix to receive to process successfully"}),x.value=!1}catch(n){console.error(n)}};return(n,i)=>(p(),$(T,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:S})]),e(O,{modelValue:x.value,"onUpdate:modelValue":i[1]||(i[1]=d=>x.value=d)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(P,null,{default:t(()=>[a("div",fa,[a("div",pa,r(o.report.name),1),e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:i[0]||(i[0]=d=>x.value=!1)})])]),_:1}),e(P,null,{default:t(()=>[a("div",null,"Baker: "+r(g(o.report.employee)),1),a("div",null," Branch: "+r(o.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[u(" Status: "),e(z,{color:"brown-9",outlined:""},{default:t(()=>[u(r(o.report.status),1)]),_:1})])]),_:1}),e(P,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[va,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Premix Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[u(r(o.report.name),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[u(r(w(o.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[ha,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u(" Code")]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u(" Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Quantity")]),_:1})]),_:1})]),_:1}),(p(!0),$(T,null,F(se(k),(d,C)=>(p(),V(R,{key:C},{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[u(r(d.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[u(r(d.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(f,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[u(r(q(d.quantity*o.report.quantity,d.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(P,{class:"report-actions q-gutter-sm",align:"right"},{default:t(()=>[ae(e(I,{flat:"",label:"Cancel",color:"negative"},null,512),[[le]]),e(I,{color:"brown-9",label:"TO Receive",class:"action-btn",onClick:h})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const ue=o=>(E("data-v-7f38c19c"),o=o(),G(),o),ga={key:0,class:"spinner-wrapper"},ya={key:1},ba={key:0,class:"data-error"},$a=ue(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),wa={class:"q-gutter-md q-ma-md"},Pa={class:"row justify-between"},Da={class:"text-h6"},ka={class:"row q-gutter-x-md"},qa=ue(()=>a("div",{class:"text-subtitle1"},"Completed By:",-1)),Ca={class:"text-overline text-weight-bold"},Na={class:"row justify-between"},Sa={class:"text-subtitle1"},Ra={class:"text-subtitle1"},Ia={class:"text-subtitle1"},Qa={__name:"ToDeliverPage",setup(o){const x=U(),b=Q(()=>x.user).value.device.reference_id;console.log("warehouseIssd",b);const y=j(),m=Q(()=>y.toDeliverPremixData);console.log("toDeliverPremixData",m.value);const D=N("to deliver"),v=N(!0),w=N(!1);W(async()=>{b&&await h()});const q=s=>L.formatDate(s,"MMMM D, YYYY"),k=s=>L.formatDate(s,"hh:mm A"),g=s=>{const c=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",l=s.firstname?c(s.firstname):"No Firstname",n=s.middlename?c(s.middlename).charAt(0)+".":"",i=s.lastname?c(s.lastname):"No Lastname";return`${l} ${n} ${i}`},h=async()=>{try{v.value=!0,await y.fetchToDeliverPremix(b,D.value),m.value.length||(w.value=!0)}catch{w.value=!0}finally{v.value=!1}};return(s,c)=>v.value?(p(),$("div",ga,[e(Z,{size:"50px",color:"primary"})])):(p(),$("div",ya,[m.value.length===0?(p(),$("div",ba,[e(X,{name:"warning",color:"warning",size:"4em"}),$a])):(p(),V(ee,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",wa,[(p(!0),$(T,null,F(m.value,(l,n)=>(p(),V(A,{key:n},{default:t(()=>[e(P,{class:"q-gutter-sm"},{default:t(()=>[a("div",Pa,[a("div",Da,r(l.name),1),a("div",ka,[qa,a("div",Ca,r(g(l.history[0].employee)),1)])]),a("div",Na,[a("div",Sa,r(q(l.created_at)),1),a("div",Ra,r(k(l.created_at)),1),a("div",Ia,r(l.branch_premix.branch_recipe.branch.name)+" - "+r(g(l.employee)),1),a("div",null,[e(z,{color:"brown-9",outlined:""},{default:t(()=>[u(r(l.status),1)]),_:2},1024)]),a("div",null,[e(xa,{report:l},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128))])]),_:1}))]))}};var Va=K(Qa,[["__scopeId","data-v-7f38c19c"]]);const Ta={class:"row justify-between"},Aa={class:"text-h6"},La=a("div",{class:"text-h6",align:"center"},"Premix",-1),za=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),Ma={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){var k,g,h;const x=N(!1),S=()=>{x.value=!0},b=U(),y=Q(()=>b.user);console.log("userdata",y.value),y.value.data.employee_id,j();const m=o,D=s=>{const c=Number(s);return isNaN(c)?"":(c%1===0,c.toString())},v=(s,c)=>{if(c==="Pcs")return`${s} pcs`;if(c==="Grams"){if(s>=1e3){let l=s/1e3;return`${l%1===0?l.toString():l.toString().replace(/^0+/,"")} kgs`}return`${s} g`}return`${s} ${c}`},w=((h=(g=(k=m.report)==null?void 0:k.branch_premix)==null?void 0:g.branch_recipe)==null?void 0:h.ingredient_groups)||"Undefined";console.log("ingrdientsData",w),console.log("report to proceed",m.report);const q=s=>{const c=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",l=s.firstname?c(s.firstname):"No Firstname",n=s.middlename?c(s.middlename).charAt(0)+".":"",i=s.lastname?c(s.lastname):"No Lastname";return`${l} ${n} ${i}`};return(s,c)=>(p(),$(T,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:S})]),e(O,{modelValue:x.value,"onUpdate:modelValue":c[1]||(c[1]=l=>x.value=l)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(P,null,{default:t(()=>[a("div",Ta,[a("div",Aa,r(o.report.name),1),e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:c[0]||(c[0]=l=>x.value=!1)})])]),_:1}),e(P,null,{default:t(()=>[a("div",null,"Baker: "+r(q(o.report.employee)),1),a("div",null," Branch: "+r(o.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[u(" Status: "),e(z,{color:"amber-10",outlined:""},{default:t(()=>[u(r(o.report.status),1)]),_:1})])]),_:1}),e(P,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[La,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Premix Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[u(r(o.report.name),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[u(r(D(o.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[za,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u(" Code")]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u(" Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Quantity")]),_:1})]),_:1})]),_:1}),(p(!0),$(T,null,F(se(w),(l,n)=>(p(),V(R,{key:n},{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[u(r(l.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[u(r(l.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(f,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[u(r(v(l.quantity*o.report.quantity,l.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const me=o=>(E("data-v-52ced6b8"),o=o(),G(),o),Fa={key:0,class:"spinner-wrapper"},Ua={key:1},ja={key:0,class:"data-error"},Ya=me(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Ba={class:"q-gutter-md q-ma-md"},Ka={class:"row justify-between"},Oa={class:"text-h6"},Ea={class:"row q-gutter-x-md"},Ga=me(()=>a("div",{class:"text-subtitle1"},"Deliver By:",-1)),Ha={class:"text-overline text-weight-bold"},Ja={class:"row justify-between"},Wa={class:"text-subtitle1"},Xa={class:"text-subtitle1"},Za={class:"text-subtitle1"},es={__name:"ToReceivePage",setup(o){const x=U(),b=Q(()=>x.user).value.device.reference_id;console.log("warehouseId",b);const y=j(),m=Q(()=>y.toReceivePremixData);console.log("toReceivePremixData",m.value);const D=N("process"),v=N(!0),w=N(!1);W(async()=>{b&&await h()});const q=s=>L.formatDate(s,"MMMM D, YYYY"),k=s=>L.formatDate(s,"hh:mm A"),g=s=>{const c=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",l=s.firstname?c(s.firstname):"No Firstname",n=s.middlename?c(s.middlename).charAt(0)+".":"",i=s.lastname?c(s.lastname):"No Lastname";return`${l} ${n} ${i}`},h=async()=>{try{v.value=!0,await y.fetchToReceivePremix(b,D.value),m.value.length||(w.value=!0)}catch{w.value=!0}finally{v.value=!1}};return(s,c)=>v.value?(p(),$("div",Fa,[e(Z,{size:"50px",color:"primary"})])):(p(),$("div",Ua,[m.value.length===0?(p(),$("div",ja,[e(X,{name:"warning",color:"warning",size:"4em"}),Ya])):(p(),V(ee,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",Ba,[(p(!0),$(T,null,F(m.value,(l,n)=>(p(),V(A,{key:n},{default:t(()=>[e(P,{class:"q-gutter-sm"},{default:t(()=>[a("div",Ka,[a("div",Oa,r(l.name),1),a("div",Ea,[Ga,a("div",Ha,r(g(l.history[0].employee)),1)])]),a("div",Ja,[a("div",Wa,r(q(l.created_at)),1),a("div",Xa,r(k(l.created_at)),1),a("div",Za,r(l.branch_premix.branch_recipe.branch.name)+" - "+r(g(l.employee)),1),a("div",null,[e(z,{color:"amber-10",outlined:""},{default:t(()=>[u(r(l.status),1)]),_:2},1024)]),a("div",null,[e(Ma,{report:l},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128))])]),_:1}))]))}};var ts=K(es,[["__scopeId","data-v-52ced6b8"]]);const as={class:"row justify-between"},ss={class:"text-h6"},ls=a("div",{class:"text-h6",align:"center"},"Premix",-1),rs=a("div",{class:"text-h6",align:"center"},"Ingredients List",-1),ns={__name:"TransactionView",props:{report:{type:Object,required:!0}},setup(o){var q,k,g;const x=o;console.log("report",x.report);const S=N(!1),b=()=>{S.value=!0},y=((g=(k=(q=x.report)==null?void 0:q.branch_premix)==null?void 0:k.branch_recipe)==null?void 0:g.ingredient_groups)||"Undefined";console.log("ingrdientsData",y);const m=h=>{const s=i=>i?i.charAt(0).toUpperCase()+i.slice(1).toLowerCase():"",c=h.firstname?s(h.firstname):"No Firstname",l=h.middlename?s(h.middlename).charAt(0)+".":"",n=h.lastname?s(h.lastname):"No Lastname";return`${c} ${l} ${n}`},D=h=>{const s=Number(h);return isNaN(s)?"":(s%1===0,s.toString())},v=(h,s)=>{if(s==="Pcs")return`${h} pcs`;if(s==="Grams"){if(h>=1e3){let c=h/1e3;return`${c%1===0?c.toString():c.toString().replace(/^0+/,"")} kgs`}return`${h} g`}return`${h} ${s}`},w=Q(()=>y.map(h=>{const s=parseFloat(h.quantity)*parseFloat(x.report.quantity);return{...h,totalQuantity:s,formattedQuantity:v(s,h.ingredient.unit)}}));return(h,s)=>(p(),$(T,null,[a("div",null,[e(I,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:b})]),e(O,{modelValue:S.value,"onUpdate:modelValue":s[1]||(s[1]=c=>S.value=c)},{default:t(()=>[e(A,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[e(P,null,{default:t(()=>[a("div",as,[a("div",ss,r(o.report.name),1),e(I,{class:"close-btn",color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:s[0]||(s[0]=c=>S.value=!1)})])]),_:1}),e(P,null,{default:t(()=>[a("div",null,"Baker: "+r(m(o.report.employee)),1),a("div",null," Branch: "+r(o.report.branch_premix.branch_recipe.branch.name),1),a("div",null,[u(" Status: "),e(z,{color:"green",outlined:""},{default:t(()=>[u(r(o.report.status),1)]),_:1})])]),_:1}),e(P,null,{default:t(()=>[ls]),_:1}),e(P,{class:"q-gutter-y-md"},{default:t(()=>[a("div",null,[e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Premix Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Request Quantity / kgs")]),_:1})]),_:1})]),_:1}),e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[u(r(o.report.name),1)]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-h6"},{default:t(()=>[u(r(D(o.report.quantity)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),a("div",null,[a("div",null,[rs,e(M,{dense:"",separator:"",class:"box"},{default:t(()=>[e(R,null,{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u(" Code")]),_:1})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u(" Name")]),_:1})]),_:1}),e(f,{side:""},{default:t(()=>[e(_,{class:"text-overline"},{default:t(()=>[u("Quantity")]),_:1})]),_:1})]),_:1}),(p(!0),$(T,null,F(w.value,(c,l)=>(p(),V(R,{key:l},{default:t(()=>[e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[u(r(c.ingredient.code),1)]),_:2},1024)]),_:2},1024),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle1",align:"left"},{default:t(()=>[u(r(c.ingredient.name),1)]),_:2},1024)]),_:2},1024),e(f,{side:""},{default:t(()=>[e(_,{class:"text-subtitle1"},{default:t(()=>[u(r(v(c.quantity*x.report.quantity,c.ingredient.unit)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const _e=o=>(E("data-v-dea7bda4"),o=o(),G(),o),os={key:0,class:"spinner-wrapper"},is={key:1},cs={key:0,class:"data-error"},ds=_e(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),us={class:"q-gutter-md q-ma-md"},ms={class:"row justify-between"},_s={class:"text-h6"},fs={class:"row q-gutter-x-md"},ps=_e(()=>a("div",{class:"text-subtitle1"},"Received By:",-1)),vs={class:"text-overline text-weight-bold"},hs={class:"row justify-between"},xs={class:"text-subtitle1"},gs={class:"text-subtitle1"},ys={class:"text-subtitle1"},bs={__name:"ReceivedPage",setup(o){const x=U(),b=Q(()=>x.user).value.device.reference_id;console.log("warehouseId",b);const y=j(),m=Q(()=>y.receivePremixData);console.log("receivePremixData",m.value);const D=N("process"),v=N(!0),w=N(!1);W(async()=>{b&&await h(),console.log("receivePremixData",m.value)});const q=s=>L.formatDate(s,"MMMM D, YYYY"),k=s=>L.formatDate(s,"hh:mm A"),g=s=>{const c=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",l=s.firstname?c(s.firstname):"No Firstname",n=s.middlename?c(s.middlename).charAt(0)+".":"",i=s.lastname?c(s.lastname):"No Lastname";return`${l} ${n} ${i}`},h=async()=>{try{v.value=!0,await y.fetchReceivePremix(b,D.value),m.value.length||(w.value=!0)}catch{w.value=!0}finally{v.value=!1}};return(s,c)=>v.value?(p(),$("div",os,[e(Z,{size:"50px",color:"primary"})])):(p(),$("div",is,[m.value.length===0?(p(),$("div",cs,[e(X,{name:"warning",color:"warning",size:"4em"}),ds])):(p(),V(ee,{key:1,style:{height:"450px","max-width":"1500px"}},{default:t(()=>[a("div",us,[(p(!0),$(T,null,F(m.value,(l,n)=>(p(),V(A,{key:n},{default:t(()=>[e(P,{class:"q-gutter-sm"},{default:t(()=>[a("div",ms,[a("div",_s,r(l.name),1),a("div",fs,[ps,a("div",vs,r(g(l.history[0].employee)),1)])]),a("div",hs,[a("div",xs,r(q(l.created_at)),1),a("div",gs,r(k(l.created_at)),1),a("div",ys,r(l.branch_premix.branch_recipe.branch.name)+" - "+r(g(l.employee)),1),a("div",null,[e(z,{color:"green",outlined:""},{default:t(()=>[u(r(l.status),1)]),_:2},1024)]),a("div",null,[e(ns,{report:l},null,8,["report"])])])]),_:2},1024)]),_:2},1024))),128))])]),_:1}))]))}};var $s=K(bs,[["__scopeId","data-v-dea7bda4"]]);const ws={class:"q-gutter-y-sm"},Ps={__name:"warehouseTransactionHistory",setup(o){const x=N("pendingReports"),S=Q(()=>{switch(x.value){case"pendingReports":return"warning";case"confirmReports":return"green-13";case"declineReports":return"red-6";default:return"light-green-13"}});return(b,y)=>(p(),V(A,{flat:""},{default:t(()=>[e(P,{class:"text-h6"},{default:t(()=>[u(" Transaction History ")]),_:1}),e(ve),a("div",ws,[e(he,{modelValue:x.value,"onUpdate:modelValue":y[0]||(y[0]=m=>x.value=m),"indicator-color":S.value,"narrow-indicator":"","no-caps":"","inline-label":"",dense:"",align:"justify",class:""},{default:t(()=>[e(H,{class:"text-dark",name:"pendingReports",label:"\u{1F7E1}Pending Premix"}),e(H,{class:"text-dark",name:"confirmReports",label:"\u{1F7E2}Confirm Premix"}),e(H,{class:"text-dark",name:"declineReports",label:"\u{1F6D1}Decline Premix"}),e(H,{class:"text-dark",name:"processReports",label:"\u{1F535}Process Premix"}),e(H,{class:"text-dark",name:"completedReports",label:"\u26ABCompleted Premix"}),e(H,{class:"text-dark",name:"toDeliverReports",label:"\u{1F7E4}To Deliver Premix"}),e(H,{class:"text-dark",name:"toReceiveReports",label:"\u{1F7E0}To Receive Premix"}),e(H,{class:"text-dark",name:"receive",label:"\u{1F7E2}Receive Premix"})]),_:1},8,["modelValue","indicator-color"])]),e(xe,{modelValue:x.value,"onUpdate:modelValue":y[1]||(y[1]=m=>x.value=m),animated:""},{default:t(()=>[e(J,{name:"pendingReports"},{default:t(()=>[e(Le)]),_:1}),e(J,{name:"confirmReports"},{default:t(()=>[e(lt)]),_:1}),e(J,{name:"declineReports"},{default:t(()=>[e(Dt)]),_:1}),e(J,{name:"processReports"},{default:t(()=>[e(Ot)]),_:1}),e(J,{name:"completedReports"},{default:t(()=>[e(_a)]),_:1}),e(J,{name:"toDeliverReports"},{default:t(()=>[e(Va)]),_:1}),e(J,{name:"toReceiveReports"},{default:t(()=>[e(ts)]),_:1}),e(J,{name:"receive"},{default:t(()=>[e($s)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};var Bs=K(Ps,[["__scopeId","data-v-69d56c22"]]);export{Bs as default};
