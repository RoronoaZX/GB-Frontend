import{d as m,r as s,c as B,P as p,N as n}from"./index.9c8a4528.js";import{api as r}from"./axios.d1cc2cbe.js";import{u as v}from"./product.d3a7f7e3.js";const C=m("branchProducts",()=>{const h=s(null),e=s([]),g=s([]),u=s([]),d=s(0),P=v(),i=B(()=>P.products);return console.log("Branch PRoductssss:",i.value),{branchId:g,branchProduct:h,branchProducts:e,sampleFetchPagination:u,totalFetch:d,fetchBranchProducts:async t=>{const o=await r.get(`/api/branches/${t}/products`);e.value=o.data},createBranchProducts:async t=>{p.show();try{const{category:o,price:c}=t,a=await r.post("/api/branch-products",t);if(a.data.message==="Branch product saved successfully"){const l=i.value.find(f=>f.id===t.product_id),y={...a.data,category:o||"No Category",price:c?parseInt(c):0,product:l||{name:"No Product",category:"Unknown"},total_quantity:t.total_quantity};e.value.unshift(y),n.create({type:"positive",message:"Branch product saved successfully",position:"top"})}else a.data.message==="The product already exists in this branch."&&n.create({type:"warning",message:"The product already exists in this branch.",position:"top"})}catch{n.create({type:"negative",message:"An error occurred while saving the branch product.",position:"top"})}finally{p.hide()}},updateBranchProductPrice:async t=>{await r.put(`/api/update-branch-products/${t}`,{price:newPrice});const o=e.value.findIndex(c=>c.id===t);o!==-1&&(e.value[o].price=newPrice)},deleteBranchProducts:async t=>{await r.delete(`/api/branch-products/${t}`),e.value=e.value.filter(o=>o.id!==t)},searchBranchProducts:async({branches_id:t,query:o,category:c})=>{console.log("Branch ID:",t),console.log("Query:",o),console.log("Category:",c);try{const a=await r.post("/api/search-branch-products",{branches_id:t,query:o,category:c});e.value=a.data,console.log("Branch Products:",a.data)}catch(a){console.log("Error:",a)}},sampleFetchPaginationProducts:async({page:t,rowsPerPage:o,branchId:c})=>{console.log("Page:",t),console.log("RowsPerPage:",o),console.log("Branch ID:",c);try{const a=await r.get(`/api/sample-fetch-pagination-branch-products?page=${t}&rowsPerPage=${o}&branchId=${c}`);u.value=a.data.data,console.log("Sample Fetch Pagination:",a.data.data),d.value=a.data.total,console.log("Total Fetch:",a.data.total)}catch(a){console.log("Error:",a)}}}});export{C as u};
