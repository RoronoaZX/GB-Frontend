import{q as f}from"./date.37972c07.js";import{c as l,z as r,r as h,N as s}from"./index.f385231c.js";import{u as b}from"./employee.5aabedb0.js";import{u as E}from"./branch.ec9e6ef9.js";import{u as T}from"./warehouse.03aa0a41.js";import{u as v}from"./employment-type.42fc7438.js";const i=b(),u=E(),c=T(),d=v(),_=l(()=>u.branches),A=l(()=>c.warehouses),y=l(()=>d.employmentType),I=e=>{var t;return(t=e==null?void 0:e.designation)!=null&&t.designation_type?e.designation.designation_type==="branch"?_.value:A.value:[]},D=async()=>{await u.fetchBranches()};r(D);const M=async()=>{await c.fetchWarehouses()};r(M);const F=async()=>{await d.fetchEmploymentType(),console.log("employmentTypeList.value",y.value)};r(F);const $=l(()=>y.value.map(e=>({label:e.category,value:e.id}))),a=h(!1),C=async(e,t)=>{a.value=!0;try{const o={id:e.id,firstname:t.firstname||e.firstname,middlename:t.middlename||e.middlename,lastname:t.lastname||e.lastname};await i.updateEmployeeFullname(o),s.create({message:"Fullname updated successfully",color:"positive",position:"top",timeout:2e3})}catch(o){console.error("Error updating fullname:",o),s.create({message:"Failed to update amount",color:"negative",position:"top",timeout:2e3})}finally{a.value=!1}},j=async(e,t,o)=>{console.log("\u2705 employmenTypeOgj() calledsss!"),console.log("\u{1F9E9} New employmenTypeOgj ID:",t),console.log("\u{1F4E6} Original employmenTypeOgj object:",e),a.value=!0;try{const n={employee_id:e.id,employment_type_id:t};console.log("update employmentType",n),await i.updateEmployeeEmploymentType(n),typeof o=="function"&&o()}catch(n){console.log(n)}finally{a.value=!1}},k=async(e,t)=>{a.value=!0;try{const o={id:e.id,address:t};await i.updateEmployeeAddress(o),s.create({message:"Address updated successfully",color:"positive",position:"top",timeout:2e3})}catch(o){console.error("Error updating address:",o),s.create({message:"Failed to update address",color:"negative",position:"top",timeout:2e3})}finally{a.value=!1}},x=async(e,t)=>{a.value=!0;try{const o={id:e.id,phone:t};await i.updateEmployeePhone(o),s.create({message:"Phone number updated successfully",color:"positive",position:"top",timeout:2e3})}catch(o){console.error("Error updating phone number:",o),s.create({message:"Failed to update phone number",color:"negative",position:"top",timeout:2e3})}finally{a.value=!1}},z=async(e,t)=>{a.value=!0;try{const o={id:e.id,birthdate:t};await i.updateEmployeebirthdate(o),s.create({message:"Birthdate updated successfully",color:"positive",position:"top",timeout:2e3})}catch{s.create({message:"Failed to update birthdate",color:"negative",position:"top",timeout:2e3})}finally{a.value=!1}},W=async(e,t,o)=>{console.log("\u2705 updateEmployeeDesignation() calledsss!"),console.log("\u{1F9E9} New designation ID:",t),console.log("\u{1F4E6} Original designation object:",e),a.value=!0;try{const n={id:e.designation_type_id,designation_id:t,designation_type:e.designation_type};console.log("Employee Designation:",n),await i.updateEmployeeDesignation(n),typeof o=="function"&&o()}catch(n){console.log("designation error:",n)}finally{a.value=!1}},Y=async(e,t)=>{console.log("updateEmployeeTimeIn composables",e,t),a.value=!0;try{const o={designation_type:e.designation_type,designation_id:e.designation_type_id,time_in:t};await i.updateEmployeeTimeIn(o)}catch(o){console.error("Error updating time in:",o)}finally{a.value=!1}},R=async(e,t)=>{console.log("updateEmployeeTimeOut composables",e,t),a.value=!0;try{const o={designation_type:e.designation_type,designation_id:e.designation_type_id,time_out:t};await i.updateEmployeeTimeOut(o),s.create({message:"Time OUT updated successfully",color:"positive",position:"top",timeout:2e3})}catch(o){console.error("Error updating time out:",o),s.create({message:"Failed to update amount",color:"negative",position:"top",timeout:2e3})}finally{a.value=!1}},U=e=>/^(0[1-9]|1[0-2]):([0-5][0-9]) (AM|PM)$/.test(e)||"Time format must be HH:MM AM/PM (e.g., 01:00 AM)";function N(e){const t=m=>m?m.toLowerCase().split(" ").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" "):"",o=e.firstname?t(e.firstname):"No Firstname",n=e.middlename?t(e.middlename).charAt(0)+".":"",g=e.lastname?t(e.lastname):"No Lastname";return`${o} ${n} ${g}`}function H(e){return e?e.split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join(" "):""}function O(e){return f.formatDate(e,"MMMM DD, YYYY")}const G=e=>{switch(e){case"Regular":return"blue-8";case"Trainee":return"orange-5";case"Part-time":return"teal-5";default:return"grey"}},J=[{name:"fullname",required:!0,label:"Full Name",align:"left",field:e=>N(e),format:e=>`${e}`,sortable:!0,style:"position: sticky; left: 0 ; background: white; z-index: 1;",headerStyle:"position: sticky; left: 0; background: white; z-index: 2;"},{name:"employmentType",label:"Employment Type",align:"center",field:e=>e.employment_type.category||"N/A",format:e=>`${e}`},{name:"address",required:!0,label:"Address",align:"left",field:"address",sortable:!0},{name:"phone",required:!0,label:"Phone",align:"center",field:"phone",format:e=>`${e}`,sortable:!0},{name:"birthdate",required:!0,label:"Birthdate",align:"center",field:"birthdate",format:e=>O(e),sortable:!0},{name:"designation",required:!0,label:"Designation",align:"center",field:e=>{var t;return((t=e.designation)==null?void 0:t.name)||"N/A"},sortable:!0},{name:"time_in",required:!0,label:"Time In",align:"center",field:e=>{var t;return((t=e.designation)==null?void 0:t.time_in)||"N/A"},sortable:!0},{name:"time_out",required:!0,label:"Time Out",align:"center",field:e=>{var t;return((t=e.designation)==null?void 0:t.time_out)||"N/A"},sortable:!0},{name:"actions",align:"center",label:"Action",field:"actions"}];export{j as a,k as b,H as c,x as d,$ as e,N as f,G as g,O as h,z as i,W as j,Y as k,R as l,J as m,I as n,a as t,C as u,U as v};
