import{b as n,P as l}from"./index.99c1c704.js";import{api as k}from"./axios.29e07d17.js";import{u as h}from"./baker-report.938868c0.js";import{u as S}from"./sales-report.02bd1d41.js";import{u as g}from"./supervisor.efb6a210.js";import{u as v}from"./cake-maker-report.9da4bed1.js";import{u as b}from"./warehouse-rawMaterials.edd41a5e.js";import"./raw-material.1d54d4a8.js";var P=n(async({router:i})=>{i.beforeEach(async(o,R,e)=>{var t;const c=localStorage.getItem("token"),a=localStorage.getItem("role");if(l.value=!0,c)try{const s=h(),u=S(),m=g(),p=v(),f=b(),r=await k.get("/api/profile");console.log("userss:",r.data);const d=r.data.device;console.log("device:",d),s.setUser(r.data),u.setUser(r.data),m.setUser(r.data),p.setUser(r.data),f.setUser(r.data),o.path==="/"?a==="Admin"?e("/admin/dashboard"):a==="Baker"?e("/branch/baker"):a==="Cake Maker"?e("/branch/cake_maker"):a==="Cashier"?e("/branch/sales_lady/products"):e():e()}catch(s){console.error("Error fetching user profile:",((t=s.response)==null?void 0:t.data)||s.message),localStorage.removeItem("token"),localStorage.removeItem("role"),o.path!=="/"?e("/"):e()}finally{}else o.path!=="/"?e("/"):e();l.value=!1})});export{P as default};
