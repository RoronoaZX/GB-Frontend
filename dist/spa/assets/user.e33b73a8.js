import{d as g,r as d,N as a,P as c}from"./index.772c5a6b.js";import{api as o}from"./axios.8015c210.js";const x=g("users",()=>{const t=d([]),n=d([]),i=d({});return{user:n,users:t,userData:i,setUser:s=>{i.value=s,console.log("userData.valuessssssss",i.value)},fetchUsers:async()=>{try{const s=await o.get("/api/users");t.value=s.data,console.log("userdataCard",s.data)}catch{a.create({type:"negative",message:"Failed to fetch users"})}},verifyUserPassword:async(s,e)=>{try{console.log("Verifying password for user ID:",s),console.log("Password to verify:",e);const r=await o.post("/api/verify-password",{user_id:s,password:e});return console.log("Password verification response:",r.data),r.data.isValid}catch(r){return console.error("Error verifying password:",r),a.create({type:"negative",message:"Failed to verify password"}),!1}},registerUser:async s=>{console.log("userdata",s);try{c.show();const e=await o.post("/api/register",s);console.log("response user data",e.data);const r={id:e.data.user.id,name:e.data.user.name,email:e.data.user.email,birthdate:e.data.user.birthdate,address:e.data.user.address,sex:e.data.user.sex,status:e.data.user.status,phone:e.data.user.phone,role:e.data.user.role,employee_id:e.data.user.employee_id,firstname:e.data.user.firstname,middlename:e.data.user.middlename,lastname:e.data.user.lastname,position:e.data.user.position};t.value.unshift(r),a.create({type:"positive",message:"User created successfully"}),console.log("response",e.data)}catch(e){console.error("User Error message: ",e),a.create({type:"negative",message:"Failed to create user"})}finally{c.hide()}},searchUser:async s=>{try{const e=await o.post("/api/search",{keyword:s});t.value=e.data,console.log("Search user",e.data)}catch(e){console.error("Error searching user:",e),a.create({type:"negative",message:"Failed to search user"})}},searchUserWithID:async(s,e)=>{try{const r=await o.post("/api/search-user-with-branchID",{keyword:s,branch_id:e});t.value=r.data,console.log("Search user with ID",r.data)}catch(r){console.error("Error searching user with ID:",r),a.create({type:"negative",message:"Failed to search user with ID"})}},fetchUserById:async s=>{try{const e=await o.get(`/api/user/${s}`);n.value=e.data,console.log("user dat response",e.data)}catch(e){console.error("Error fetching user:",e),a.create({type:"negative",message:"Failed to fetch users"})}},updateUser:async(s,e)=>{try{console.log("Updating user with ID:",s),console.log("Data to be sent:",e),c.show();const r=await o.put(`/api/update-user-profile/${s}`,e);console.log("user edited response",r.data);const l={...r.data,name:e.name,email:e.email,birthdate:e.birthdate,address:e.address,sex:e.sex,status:e.status,phone:e.phone,role:e.role};console.log("newUser",l.data);const u=t.value.findIndex(p=>p.id===s);u!==-1&&(t.value[u]=l.data),n.value.id===s&&(n.value=l.data),a.create({type:"positive",message:"User updated successfully"}),console.log("Updated user response",r.data)}catch(r){console.error("Error updating user:",r),a.create({type:"negative",message:"Failed to update user"})}finally{c.hide()}},updateEmail:async(s,e)=>{console.log("===================================="),console.log("id",s),console.log("===================================="),console.log("===================================="),console.log("email",e),console.log("====================================");try{const r=await o.put(`/api/user-email/${s}`,{email:e})}catch(r){console.log("error",r)}},updatePassword:async s=>{console.log("Data received for password update:",s);try{console.log("data",s);const e=await o.post("/api/user-password",{user_id:s.user_id,password:s.new_password,new_password:s.new_password,new_password_confirmation:s.new_password_confirmation});return console.log("Password update response:",e.data),e.data}catch(e){console.log("error",e)}}}});export{x as u};
