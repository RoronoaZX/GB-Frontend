import{c as X,r as g,t as H,u as E,o as v,a3 as U,f as e,M as O,w as t,Q as R,I as N,ae as ie,K as S,e as I,L as $,bc as ve,a0 as m,a4 as j,a5 as Y,$ as C,bd as F,J as u,b6 as J,bz as K,aJ as Z,a2 as ee,O as re,R as de,N as oe,a1 as se,z as _e}from"./index.fe067f2a.js";import{b as ge,Q as G,a as ye}from"./QTable.31271360.js";import{Q as be}from"./QTr.ad3bc7e0.js";import{Q as W}from"./QTooltip.03cefe2c.js";import{Q as ne}from"./QChip.0aa5c09d.js";import{Q as ue}from"./QSpinnerIos.e0d12448.js";import{Q as me}from"./QInnerLoading.3d7974a4.js";import{Q as he}from"./QPage.9f53a007.js";import{Q as ce}from"./QSpace.199bd831.js";import{Q,a as f}from"./QItem.4191fc7f.js";import{Q as Pe}from"./QList.f8b1e54e.js";import{a as _}from"./QItemLabel.aaa5cfce.js";import{C as pe}from"./ClosePopup.535e35c9.js";import{u as Se}from"./employee.16936fe6.js";import{u as te}from"./UniformTable.vue_vue_type_style_index_0_scoped_true_lang.ceee9333.js";import{_ as le}from"./plugin-vue_export-helper.21dcd24c.js";import"./axios.1553f882.js";import"./QVirtualScroll.e1fb70b9.js";import"./use-virtual-scroll.4ffd47fc.js";import"./rtl.276c3f1b.js";import"./QSelect.b3dc2a83.js";import"./QMenu.87272370.js";import"./position-engine.76939301.js";import"./selection.60979bf6.js";const fe=p=>(re("data-v-38dfad1e"),p=p(),de(),p),Ve=fe(()=>u("div",{class:"text-h5 q-mr-md"},"\u{1F9E5} Add Uniform",-1)),we={key:0,class:"custom-list z-top"},xe={class:"col-5"},Ue={class:"q-mb-lg",align:"center"},qe={key:0,class:"row q-ml-sm q-mt-sm"},ke={class:"col-6"},ze={key:0,class:"q-gutter-md"},$e={class:"col-6"},Qe={class:"q-mb-lg",align:"center"},Ce={key:0,class:"row q-ml-sm q-mt-sm"},Le={class:"col-6 q-pl-xl"},Ne={key:0,class:"q-gutter-md q-pl-lg"},Te={class:"row q-col-gutter-md"},Ae={class:"col-4"},Fe={class:"col-4"},Ie={class:"col-4"},Oe=fe(()=>u("div",{class:"row q-gutter-sm"},null,-1)),Ee={__name:"AddUniform",emits:["created"],setup(p,{emit:T}){const L=T,V=Se(),k=X(()=>V.employees),q=te();X(()=>q.uniforms);const y=g(""),P=g(!1),a=g(!1),b=g(!1),h=g(0),w=g(0),x=g(!1),A=g(!1),M=()=>{P.value=!0},B=async()=>{y.value.trim()&&(A.value=!0,await V.searchEmployee(y.value),A.value=!1)},D=s=>{console.log("Selected Employee:",s),l.employee_id=s.id,l.employee_name=`${s.firstname} ${s.middlename?s.middlename.charAt(0)+".":""} ${s.lastname} `,l.employee_position=s.position,y.value="",console.log("Filled Designation Data:",l)},l=H({employee_id:"",employee_name:"",employee_position:"",tShirtsize:"",pantsSize:"",tShirtPcs:0,tShirtPrice:0,pantsPcs:0,pantsPrice:0,numberOfPayments:1}),o=()=>{l.employee_id="",l.employee_name="",l.employee_position="",a.value=!1,b.value=!1,h.value=0,w.value=0,n(),r()},r=()=>{l.tShirtPcs="",l.tShirtsize="",l.tShirtPrice=""},n=()=>{l.pantsSize="",l.pantsPcs="",l.pantsPrice=""};E(b,s=>{s||n()}),E(a,s=>{s||r()}),E([()=>l.tShirtPrice,()=>l.tShirtPcs,()=>l.pantsPrice,()=>l.pantsPcs],()=>{h.value=l.tShirtPrice*l.tShirtPcs+l.pantsPrice*l.pantsPcs},{immediate:!0}),E([h,()=>l.numberOfPayments],()=>{w.value=Math.round(h.value/(l.numberOfPayments||1))},{immediate:!0});const c=async()=>{const s={employee_id:l.employee_id,employee_name:l.employee_name,employee_position:l.employee_position,tShirtsize:l.tShirtsize,pantsSize:l.pantsSize,tShirtPcs:l.tShirtPcs,tShirtPrice:l.tShirtPrice,pantsPcs:l.pantsPcs,pantsPrice:l.pantsPrice,totalAmount:h.value,paymentPerPayroll:w.value,numberOfPayments:l.numberOfPayments};console.log("payload",s);try{x.value=!0,await q.createUniforms(s),L("created"),P.value=!1,o()}catch(i){console.log(i)}finally{x.value=!1}};return(s,i)=>(v(),U("div",null,[e(O,{padding:"sm md",label:"Add Uniform",icon:"add_circle",size:"md",class:"gradient-btn text-white",onClick:M}),e(ee,{modelValue:P.value,"onUpdate:modelValue":i[12]||(i[12]=d=>P.value=d),persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:t(()=>[e(R,{style:{width:"600px","max-width":"80vw"}},{default:t(()=>[e(N,{class:"row items-center gradient-btn text-white rounded-borders-top q-pa-md"},{default:t(()=>[Ve,e(ce),ie(e(O,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[pe]])]),_:1}),e(N,null,{default:t(()=>[e(S,{modelValue:y.value,"onUpdate:modelValue":[i[0]||(i[0]=d=>y.value=d),B],label:"Search Employee",outlined:"",rounded:"",dense:"",debounce:"500",placeholder:"Enter name"},{append:t(()=>[A.value?(v(),I(ve,{key:1,color:"grey",size:"sm"})):(v(),I($,{key:0,name:"search"}))]),default:t(()=>[y.value?(v(),U("div",we,[e(R,null,{default:t(()=>[e(Pe,{separator:""},{default:t(()=>{var d;return[(d=k.value)!=null&&d.length?(v(!0),U(j,{key:1},Y(k.value,z=>(v(),I(Q,{onClick:ae=>D(z),key:z.id,clickable:""},{default:t(()=>[e(f,null,{default:t(()=>[m(C(`${z.firstname} ${z.middlename?z.middlename.charAt(0)+".":""} ${z.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(v(),I(Q,{key:0},{default:t(()=>[m(" No employee record ")]),_:1}))]}),_:1})]),_:1})])):F("",!0)]),_:1},8,["modelValue"])]),_:1}),e(N,{class:"q-gutter-y-sm"},{default:t(()=>[e(Q,null,{default:t(()=>[e(f,{avatar:""},{default:t(()=>[e($,{name:"person",color:"primary"})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle2 text-grey-8"},{default:t(()=>[m("Name")]),_:1}),e(_,{class:"text-subtitle1 text-weight-medium"},{default:t(()=>[m(C(l.employee_name?l.employee_name:"-------"),1)]),_:1})]),_:1})]),_:1}),e(Q,null,{default:t(()=>[e(f,{avatar:""},{default:t(()=>[e($,{name:"badge",color:"primary"})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle2 text-grey-8"},{default:t(()=>[m(" Position ")]),_:1}),e(_,{class:"text-subtitle1 text-weight-medium"},{default:t(()=>[m(C(l.employee_position?l.employee_position:"-------"),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(N,{class:"row q-gutter-x-md"},{default:t(()=>[u("div",xe,[u("div",Ue,[e(J,{"keep-color":"",modelValue:a.value,"onUpdate:modelValue":i[1]||(i[1]=d=>a.value=d),label:"T-Shirt",color:"deep-orange"},null,8,["modelValue"])]),a.value?(v(),U("div",qe,[u("div",ke,[e(K,{modelValue:l.tShirtsize,"onUpdate:modelValue":i[2]||(i[2]=d=>l.tShirtsize=d),options:[{label:"18",value:"18"},{label:"S",value:"S"},{label:"M",value:"M"},{label:"L",value:"L"}],color:"deep-orange",type:"radio",dense:""},null,8,["modelValue"])]),l.tShirtsize?(v(),U("div",ze,[e(S,{modelValue:l.tShirtPcs,"onUpdate:modelValue":i[3]||(i[3]=d=>l.tShirtPcs=d),dense:"",outlined:"",label:"pcs",style:{width:"100px"}},null,8,["modelValue"]),e(S,{modelValue:l.tShirtPrice,"onUpdate:modelValue":i[4]||(i[4]=d=>l.tShirtPrice=d),dense:"",outlined:"",label:"price",style:{width:"100px"}},null,8,["modelValue"])])):F("",!0)])):F("",!0)]),u("div",$e,[u("div",Qe,[e(J,{"keep-color":"",modelValue:b.value,"onUpdate:modelValue":i[5]||(i[5]=d=>b.value=d),label:"Pants",color:"brown-6"},null,8,["modelValue"])]),b.value?(v(),U("div",Ce,[u("div",Le,[e(K,{modelValue:l.pantsSize,"onUpdate:modelValue":i[6]||(i[6]=d=>l.pantsSize=d),options:[{label:"M",value:"M"},{label:"L",value:"L"},{label:"XL",value:"XL"},{label:"XXL",value:"XXL"}],color:"brown",type:"radio",dense:""},null,8,["modelValue"])]),l.pantsSize?(v(),U("div",Ne,[e(S,{modelValue:l.pantsPcs,"onUpdate:modelValue":i[7]||(i[7]=d=>l.pantsPcs=d),dense:"",outlined:"",label:"pcs",style:{width:"100px"}},null,8,["modelValue"]),e(S,{modelValue:l.pantsPrice,"onUpdate:modelValue":i[8]||(i[8]=d=>l.pantsPrice=d),dense:"",outlined:"",label:"price",style:{width:"100px"}},null,8,["modelValue"])])):F("",!0)])):F("",!0)])]),_:1}),e(N,{class:"q-ma-lg"},{default:t(()=>[u("div",Te,[u("div",Ae,[e(S,{modelValue:l.numberOfPayments,"onUpdate:modelValue":i[9]||(i[9]=d=>l.numberOfPayments=d),label:"Number of Payments",type:"number",outlined:"",dense:""},null,8,["modelValue"])]),u("div",Fe,[e(S,{modelValue:h.value,"onUpdate:modelValue":i[10]||(i[10]=d=>h.value=d),label:"Total Amount",outlined:"",dense:"",readonly:""},null,8,["modelValue"])]),u("div",Ie,[e(S,{modelValue:w.value,"onUpdate:modelValue":i[11]||(i[11]=d=>w.value=d),label:"Per Payroll",outlined:"",dense:"",readonly:""},null,8,["modelValue"])])]),Oe]),_:1}),e(Z,{align:"right"},{default:t(()=>[e(O,{size:"md",padding:"xs md","no-caps":"",label:"Save","icon-right":"send",class:"gradient-btn text-white",onClick:c,loading:x.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var Xe=le(Ee,[["__scopeId","data-v-38dfad1e"]]);const Me=p=>(re("data-v-9f637e34"),p=p(),de(),p),Be=Me(()=>u("div",{class:"text-h6"},"\u{1F9E5} Edit Uniform",-1)),De={class:"col-5"},Re={class:"q-mb-lg",align:"center"},Je={key:0,class:"row q-ml-sm q-mt-sm"},Ke={class:"col-6"},je={class:"q-gutter-md"},Ge={class:"col-6"},He={class:"q-mb-lg",align:"center"},We={key:0,class:"row q-ml-sm q-mt-sm"},Ye={class:"col-6 q-pl-xl"},Ze={class:"q-gutter-md q-pl-lg"},et={class:"row q-col-gutter-md"},tt={class:"col-4"},lt={class:"col-4"},at={class:"col-4"},ot={__name:"EditUniform",props:["edit"],emits:["edited"],setup(p,{emit:T}){const L=T,V=p,k=te();console.log("EditUniform props:",V);const q=g(!1),y=g(!1),P=H({...V.edit}),a=H({numberOfPayments:0,tShirtsize:"",tShirtPcs:"",tShirtPrice:"",pantsSize:"",pantsPcs:"",pantsPrice:""}),b=g(!1),h=g(!1),w=X(()=>{const l=b.value&&a.tShirtPcs&&a.tShirtPrice?parseFloat(a.tShirtPcs)*parseFloat(a.tShirtPrice):0,o=h.value&&a.pantsPcs&&a.pantsPrice?parseFloat(a.pantsPcs)*parseFloat(a.pantsPrice):0;return l+o}),x=X(()=>{const l=parseFloat(a.numberOfPayments),o=w.value;return l>0?(o/l).toFixed(2):0}),A=()=>{var r,n,c,s;const l=(n=(r=V.edit)==null?void 0:r.t_shirt)==null?void 0:n[0],o=(s=(c=V.edit)==null?void 0:c.pants)==null?void 0:s[0];b.value=!!l,h.value=!!o,a.tShirtsize=(l==null?void 0:l.size)||"",a.tShirtPcs=(l==null?void 0:l.pcs)||"",a.tShirtPrice=(l==null?void 0:l.price)||"",a.pantsSize=(o==null?void 0:o.size)||"",a.pantsPcs=(o==null?void 0:o.pcs)||"",a.pantsPrice=(o==null?void 0:o.price)||"",a.numberOfPayments=V.edit.number_of_payments||0,w.value=V.edit.total_amount||0,x.value=V.edit.payments_per_payroll||0,q.value=!0},M=()=>{b.value=!1,h.value=!1,a.tShirtsize="",a.tShirtPcs="",a.tShirtPrice="",a.pantsSize="",a.pantsPcs="",a.pantsPrice="",a.numberOfPayments=""},B=l=>{const o=s=>s?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():"",r=l.firstname?o(l.firstname):"No Firstname",n=l.middlename?o(l.middlename).charAt(0)+".":"",c=l.lastname?o(l.lastname):"No Lastname";return`${r} ${n} ${c}`.trim()};E(()=>[a.numberOfPayments,w.value],([l,o])=>{const r=parseFloat(l),n=parseFloat(o);x.value=!isNaN(r)&&!isNaN(n)&&r>0?(n/r).toFixed(2):0});const D=async()=>{const l={...P,t_shirt:b.value?[{size:a.tShirtsize,pcs:a.tShirtPcs,price:a.tShirtPrice}]:[],pants:h.value?[{size:a.pantsSize,pcs:a.pantsPcs,price:a.pantsPrice}]:[],number_of_payments:a.numberOfPayments,total_amount:parseFloat(w.value),payments_per_payroll:parseFloat(x.value)};try{y.value=!0,await k.updateUnifrom(l),L("edited"),oe.create({message:"Uniform changes saved successfully",color:"positive",position:"top",timeout:2e3}),q.value=!1,M()}catch(o){console.error("Error saving uniform changes:",o),oe.create({message:"Failed to save uniform changes",color:"negative",position:"top",timeout:2e3})}finally{y.value=!1}};return(l,o)=>(v(),U(j,null,[e(O,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:"",onClick:A},{default:t(()=>[e(W,{class:"bg-positive",delay:200},{default:t(()=>[m("Edit")]),_:1})]),_:1}),e(ee,{modelValue:q.value,"onUpdate:modelValue":o[11]||(o[11]=r=>q.value=r),persistent:"",position:"right","backdrop-filter":"blur(6px) saturate(150%)"},{default:t(()=>[e(R,{style:{width:"600px","max-width":"90vw"}},{default:t(()=>[e(N,{class:"row items-center gradient-btn text-white rounded-borders-top q-pa-md"},{default:t(()=>[Be,e(ce),ie(e(O,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},null,512),[[pe]])]),_:1}),e(N,{class:"q-gutter-y-sm"},{default:t(()=>[e(Q,null,{default:t(()=>[e(f,{avatar:""},{default:t(()=>[e($,{name:"person",color:"primary"})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle2 text-grey-8"},{default:t(()=>[m("Name")]),_:1}),e(_,{class:"text-subtitle1 text-weight-medium"},{default:t(()=>[m(C(p.edit.employee?B(p.edit.employee):"----"),1)]),_:1})]),_:1})]),_:1}),e(Q,null,{default:t(()=>[e(f,{avatar:""},{default:t(()=>[e($,{name:"badge",color:"primary"})]),_:1}),e(f,null,{default:t(()=>[e(_,{class:"text-subtitle2 text-grey-8"},{default:t(()=>[m("Position")]),_:1}),e(_,{class:"text-subtitle1 text-weight-medium"},{default:t(()=>[m(C(p.edit.employee.position?p.edit.employee.position:"-----"),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(N,{class:"q-gutter-md row"},{default:t(()=>[u("div",De,[u("div",Re,[e(J,{"keep-color":"",modelValue:b.value,"onUpdate:modelValue":o[0]||(o[0]=r=>b.value=r),label:"T-Shirt",color:"deep-orange"},null,8,["modelValue"])]),b.value?(v(),U("div",Je,[u("div",Ke,[e(K,{modelValue:a.tShirtsize,"onUpdate:modelValue":o[1]||(o[1]=r=>a.tShirtsize=r),options:[{label:"18",value:"18"},{label:"S",value:"S"},{label:"M",value:"M"},{label:"L",value:"L"}],color:"deep-orange",type:"radio",dense:""},null,8,["modelValue"])]),u("div",je,[e(S,{modelValue:a.tShirtPcs,"onUpdate:modelValue":o[2]||(o[2]=r=>a.tShirtPcs=r),label:"pcs",outlined:"",dense:"",style:{width:"100px"}},null,8,["modelValue"]),e(S,{modelValue:a.tShirtPrice,"onUpdate:modelValue":o[3]||(o[3]=r=>a.tShirtPrice=r),label:"price",outlined:"",dense:"",style:{width:"100px"}},null,8,["modelValue"])])])):F("",!0)]),u("div",Ge,[u("div",He,[e(J,{"keep-color":"",modelValue:h.value,"onUpdate:modelValue":o[4]||(o[4]=r=>h.value=r),label:"Pants",color:"brown-6"},null,8,["modelValue"])]),h.value?(v(),U("div",We,[u("div",Ye,[e(K,{modelValue:a.pantsSize,"onUpdate:modelValue":o[5]||(o[5]=r=>a.pantsSize=r),options:[{label:"M",value:"M"},{label:"L",value:"L"},{label:"XL",value:"XL"},{label:"XXL",value:"XXL"}],color:"brown",type:"radio",dense:""},null,8,["modelValue"])]),u("div",Ze,[e(S,{modelValue:a.pantsPcs,"onUpdate:modelValue":o[6]||(o[6]=r=>a.pantsPcs=r),label:"pcs",outlined:"",dense:"",style:{width:"100px"}},null,8,["modelValue"]),e(S,{modelValue:a.pantsPrice,"onUpdate:modelValue":o[7]||(o[7]=r=>a.pantsPrice=r),label:"price",outlined:"",dense:"",style:{width:"100px"}},null,8,["modelValue"])])])):F("",!0)])]),_:1}),e(N,{class:"q-ma-lg"},{default:t(()=>[u("div",et,[u("div",tt,[e(S,{modelValue:a.numberOfPayments,"onUpdate:modelValue":o[8]||(o[8]=r=>a.numberOfPayments=r),label:"Number of Payments",type:"number",outlined:"",dense:""},null,8,["modelValue"])]),u("div",lt,[e(S,{modelValue:w.value,"onUpdate:modelValue":o[9]||(o[9]=r=>w.value=r),label:"Total Amount",outlined:"",dense:"",readonly:""},null,8,["modelValue"])]),u("div",at,[e(S,{modelValue:x.value,"onUpdate:modelValue":o[10]||(o[10]=r=>x.value=r),label:"Per Payroll",outlined:"",dense:"",readonly:""},null,8,["modelValue"])])])]),_:1}),e(Z,{align:"right"},{default:t(()=>[e(O,{size:"md",padding:"xs md","no-caps":"",label:"Save Edit","icon-right":"send",class:"gradient-btn text-white",onClick:D,loading:y.value},null,8,["loading"])]),_:1}),e(me,{showing:y.value},{default:t(()=>[e(ue,{size:"50px",color:"primary"})]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"])],64))}};var st=le(ot,[["__scopeId","data-v-9f637e34"]]);const nt={class:"text-subtitle1 text-primary text-weight-bold"},it={key:1,class:"q-pa-md q-mb-md rounded-borders bg-grey-2 shadow-2"},rt={class:"text-subtitle1 text-primary text-weight-bold"},dt={__name:"ViewUniformDetails",props:{modelValue:Boolean,items:Array,label:String},emits:["update:modelValue"],setup(p,{emit:T}){const L=p,V=T,k=X({get:()=>L.modelValue,set:y=>V("update:modelValue",y)});function q(){V("update:modelValue",!1)}return(y,P)=>(v(),I(ee,{modelValue:k.value,"onUpdate:modelValue":P[0]||(P[0]=a=>k.value=a),"backdrop-filter":"blur(6px) saturate(150%)"},{default:t(()=>[e(R,{style:{"max-width":"400px",width:"90vw"},class:"bg-transparent no-shadow"},{default:t(()=>[e(Z,{align:"right",class:"q-pa-sm"},{default:t(()=>[e(O,{flat:"",rounded:"",dense:"",icon:"close",onClick:q,class:"text-white"})]),_:1}),e(N,{class:"q-pa-md"},{default:t(()=>[p.items.length>0?(v(!0),U(j,{key:0},Y(p.items,(a,b)=>(v(),U("div",{key:b,class:"q-pa-md q-mb-md rounded-borders bg-grey-2 shadow-2"},[u("div",nt,C(p.label),1),e(se,{spaced:"",color:"grey-4"}),e(Q,{dense:""},{default:t(()=>[e(f,{avatar:""},{default:t(()=>[e($,{name:"straighten",color:"blue-grey-7"})]),_:1}),e(f,null,{default:t(()=>[e(_,{caption:"",class:"text-grey-7"},{default:t(()=>[m("Size")]),_:1}),e(_,{class:"text-weight-medium"},{default:t(()=>[m(C(a.size||"N/A"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(Q,{dense:""},{default:t(()=>[e(f,{avatar:""},{default:t(()=>[e($,{name:"inventory_2",color:"blue-grey-7"})]),_:1}),e(f,null,{default:t(()=>[e(_,{caption:"",class:"text-grey-7"},{default:t(()=>[m("Quantity")]),_:1}),e(_,{class:"text-weight-medium"},{default:t(()=>[m(C(a.pcs||0)+" pcs",1)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(Q,{dense:""},{default:t(()=>[e(f,{avatar:""},{default:t(()=>[e($,{name:"attach_money",color:"blue-grey-7"})]),_:1}),e(f,null,{default:t(()=>[e(_,{caption:"",class:"text-grey-7"},{default:t(()=>[m("Amount")]),_:1}),e(_,{class:"text-weight-medium"},{default:t(()=>[m("\u20B1"+C(parseFloat(a.price).toFixed(2)||"0.00"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)):(v(),U("div",it,[u("div",rt,C(p.label),1),e(se,{spaced:"",color:"grey-4"}),e(Q,{dense:""},{default:t(()=>[e(f,{avatar:""},{default:t(()=>[e($,{name:"straighten",color:"blue-grey-7"})]),_:1}),e(f,null,{default:t(()=>[e(_,{caption:"",class:"text-grey-7"},{default:t(()=>[m("Size")]),_:1}),e(_,{class:"text-weight-medium"},{default:t(()=>[m("N/A")]),_:1})]),_:1})]),_:1}),e(Q,{dense:""},{default:t(()=>[e(f,{avatar:""},{default:t(()=>[e($,{name:"inventory_2",color:"blue-grey-7"})]),_:1}),e(f,null,{default:t(()=>[e(_,{caption:"",class:"text-grey-7"},{default:t(()=>[m("Quantity")]),_:1}),e(_,{class:"text-weight-medium"},{default:t(()=>[m("0 pcs")]),_:1})]),_:1})]),_:1}),e(Q,{dense:""},{default:t(()=>[e(f,{avatar:""},{default:t(()=>[e($,{name:"attach_money",color:"blue-grey-7"})]),_:1}),e(f,null,{default:t(()=>[e(_,{caption:"",class:"text-grey-7"},{default:t(()=>[m("Amount")]),_:1}),e(_,{class:"text-weight-medium"},{default:t(()=>[m("\u20B10.00")]),_:1})]),_:1})]),_:1})]))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},ut={class:"row justify-between q-mb-md",align:"right"},mt={class:"row q-gutter-md"},ct={__name:"UniformTable",setup(p){const T=te(),L=g(""),V=X(()=>T.uniforms),k=g([]),q=g(!1),y=g(!1),P=g({rowsPerPage:0,rowsPerPage:0,rowsNumber:0}),a=g(!1),b=g([]),h=g(""),w=(n,c)=>{b.value=n,h.value=c,a.value=!0};_e(async()=>{await x()});const x=async(n=1,c=7,s="")=>{try{q.value=!0,k.value=await T.fetchUniform(n,c,s),console.log("uniform",k.value);const{data:i,current_page:d,per_page:z,total:ae}=V.value;P.value.page=d,P.value.rowsPerPage=z,P.value.rowsNumber=ae,k.value=i}catch(i){console.log("error fetching madepakeer",i)}finally{q.value=!1}};let A;const M=()=>{y.value=!0,clearTimeout(A),A=setTimeout(()=>{y.value=!1},500)},B=n=>{x(n.pagination.page,n.pagination.rowsPerPage,n.filter)};E(L,async n=>{y.value=!0,await x(P.value.page,P.value.rowsPerPage,n),y.value=!1});const D=n=>{const c=z=>z?z.charAt(0).toUpperCase()+z.slice(1).toLowerCase():"",s=n.firstname?c(n.firstname):"No Firstname",i=n.middlename?c(n.middlename).charAt(0)+".":"",d=n.lastname?c(n.lastname):"No Lastname";return`${s} ${i} ${d}`.trim()},l=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(n),o=n=>{if(!n)return" - - ";const c=new Date(n);return isNaN(c.getTime())?" - - ":c.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},r=[{name:"date",required:!0,label:"Date",align:"left",field:n=>o(n.created_at)},{name:"name",required:!0,label:"Name",align:"left",field:n=>D(n.employee)},{name:"number_of_payments",required:!0,label:"Number of Payments",align:"center",field:"number_of_payments"},{name:"total_amount",required:!0,label:"Total Amount",align:"center",field:n=>l(n.total_amount)},{name:"payments_per_payroll",required:!0,label:"Payments Per Payroll",align:"center",field:n=>l(n.payments_per_payroll)},{name:"t_shirt",label:"T-Shirt",align:"center",field:"t_shirt"},{name:"pants",label:"Pants",align:"center",field:"pants"},{name:"actions",label:"Actions",align:"center",field:"actions"}];return(n,c)=>(v(),I(he,{class:"q-my-md"},{default:t(()=>[u("div",ut,[u("div",mt,[e(Xe,{onCreated:x})]),e(S,{modelValue:L.value,"onUpdate:modelValue":[c[0]||(c[0]=s=>L.value=s),M],outlined:"",dense:"",flat:"",label:"Search",style:{width:"300px"}},{append:t(()=>[u("div",null,[e($,{name:"search"})])]),_:1},8,["modelValue"])]),e(ye,{filter:L.value,rows:k.value,columns:r,"row-key":"name",pagination:P.value,"onUpdate:pagination":c[1]||(c[1]=s=>P.value=s),"rows-per-page-options":[5,7,10,0],onRequest:B,loading:q.value},{header:t(s=>[e(be,{props:s,class:"gradient-header text-white text-weight-bold"},{default:t(()=>[(v(!0),U(j,null,Y(s.cols,i=>(v(),I(ge,{key:i.name,props:s,class:"text-center text-subtitle2"},{default:t(()=>[m(C(i.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell-t_shirt":t(s=>[e(G,{props:s},{default:t(()=>[e(ne,{square:"",outline:"",color:"red-6","text-color":"white",clickable:"",onClick:i=>w(s.row.t_shirt,"T-Shirt")},{default:t(()=>[m(" T-Shirt "),e(W,{class:"bg-indigo",offset:[10,10]},{default:t(()=>[m(" Click to view T-shirt details! ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),"body-cell-pants":t(s=>[e(G,{props:s},{default:t(()=>[e(ne,{square:"",outline:"",color:"brown-6","text-color":"white",clickable:"",onClick:i=>w(s.row.pants,"Pants")},{default:t(()=>[m(" Pants "),e(W,{class:"bg-indigo",offset:[10,10]},{default:t(()=>[m(" Click to view pants details! ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),"body-cell-actions":t(s=>[e(G,{props:s},{default:t(()=>[e(st,{edit:s.row,onEdited:x},null,8,["edit"])]),_:2},1032,["props"])]),loading:t(()=>[e(me,{showing:""},{default:t(()=>[e(ue,{size:"50px",color:"grey-10"})]),_:1})]),_:1},8,["filter","rows","pagination","loading"]),e(dt,{modelValue:a.value,"onUpdate:modelValue":c[2]||(c[2]=s=>a.value=s),items:b.value,label:h.value},null,8,["modelValue","items","label"])]),_:1}))}};var Ft=le(ct,[["__scopeId","data-v-a5a33024"]]);export{Ft as default};
