import{br as be,f as fe,ag as ae,a6 as ye,a7 as xe,a8 as ke,a9 as we,r as G,bs as Se,ab as Ie,h as f,u as T,A as qe,j as w,l as Ce,bg as Re,a0 as J,ad as Le,bt as $e,k as Qe,L as z,V as Te,o as c,a2 as I,J as a,e as n,w as d,c as B,Q as X,I as j,_ as h,M as K,a3 as A,a4 as O,O as le,R as ne,t as Be,$ as L,K as W,bc as oe,H as je,a as Ae}from"./index.6d6c5126.js";import{Q as Ne}from"./QSpace.a9a4f1b3.js";import{Q as M,a as $}from"./QItem.3bd9e38f.js";import{a as F,Q as V}from"./rtl.4979ba33.js";import{Q as Ve}from"./QSlideTransition.0965522f.js";import{Q as Oe}from"./QVirtualScroll.f2b37730.js";import{u as P}from"./baker-report.596c0ec6.js";import{_ as se}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as ie}from"./QList.3a7cac99.js";import{u as Fe}from"./branch-recipe.ab6ffef2.js";import"./use-virtual-scroll.d6ec0b6b.js";import"./axios.40292506.js";const Q=be({}),Pe=Object.keys(ae);var te=fe({name:"QExpansionItem",props:{...ae,...ye,...xe,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ke,"click","afterShow","afterHide"],setup(e,{slots:y,emit:_}){const{proxy:{$q:u}}=Ce(),S=we(e,u),m=G(e.modelValue!==null?e.modelValue:e.defaultOpened),t=G(null),x=Se(),{show:b,hide:q,toggle:k}=Ie({showing:m});let p,l;const s=f(()=>`q-expansion-item q-item-type q-expansion-item--${m.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),r=f(()=>{if(e.contentInsetLevel===void 0)return null;const o=u.lang.rtl===!0?"Right":"Left";return{["padding"+o]:e.contentInsetLevel*56+"px"}}),i=f(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),v=f(()=>{const o={};return Pe.forEach(R=>{o[R]=e[R]}),o}),g=f(()=>i.value===!0||e.expandIconToggle!==!0),N=f(()=>e.expandedIcon!==void 0&&m.value===!0?e.expandedIcon:e.expandIcon||u.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),U=f(()=>e.disable!==!0&&(i.value===!0||e.expandIconToggle===!0)),E=f(()=>({expanded:m.value===!0,detailsId:x.value,toggle:k,show:b,hide:q})),C=f(()=>{const o=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:u.lang.label[m.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":m.value===!0?"true":"false","aria-controls":x.value,"aria-label":o}});T(()=>e.group,o=>{l!==void 0&&l(),o!==void 0&&ee()});function re(o){i.value!==!0&&k(o),_("click",o)}function de(o){o.keyCode===13&&Z(o,!0)}function Z(o,R){R!==!0&&t.value!==null&&t.value.focus(),k(o),Te(o)}function ue(){_("afterShow")}function ce(){_("afterHide")}function ee(){p===void 0&&(p=Re()),m.value===!0&&(Q[e.group]=p);const o=T(m,H=>{H===!0?Q[e.group]=p:Q[e.group]===p&&delete Q[e.group]}),R=T(()=>Q[e.group],(H,he)=>{he===p&&H!==void 0&&H!==p&&q()});l=()=>{o(),R(),Q[e.group]===p&&delete Q[e.group],l=void 0}}function _e(){const o={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},R=[w(z,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&m.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:N.value})];return U.value===!0&&(Object.assign(o,{tabindex:0,...C.value,onClick:Z,onKeyup:de}),R.unshift(w("div",{ref:t,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),w($,o,()=>R)}function ve(){let o;return y.header!==void 0?o=[].concat(y.header(E.value)):(o=[w($,()=>[w(F,{lines:e.labelLines},()=>e.label||""),e.caption?w(F,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&o[e.switchToggleSide===!0?"push":"unshift"](w($,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>w(z,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&o[e.switchToggleSide===!0?"unshift":"push"](_e()),o}function me(){const o={ref:"item",style:e.headerStyle,class:e.headerClass,dark:S.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return g.value===!0&&(o.clickable=!0,o.onClick=re,Object.assign(o,i.value===!0?v.value:C.value)),w(M,o,ve)}function pe(){return Le(w("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:r.value,id:x.value},Qe(y.default)),[[$e,m.value]])}function ge(){const o=[me(),w(Ve,{duration:e.duration,onShow:ue,onHide:ce},pe)];return e.expandSeparator===!0&&o.push(w(J,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:S.value}),w(J,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:S.value})),o}return e.group!==void 0&&ee(),qe(()=>{l!==void 0&&l()}),()=>w("div",{class:s.value},[w("div",{class:"q-expansion-item__container relative-position"},ge())])}});const D=e=>(le("data-v-21535d8a"),e=e(),ne(),e),De=D(()=>a("div",{class:"text-h6",align:"center"},"Report List",-1)),Ue={class:"q-pa-md row wrap justify-center"},Ee={class:"row justify-between q-gutter-x-md"},He={class:"row items-center"},ze={class:"text-subtitle1 q-ml-sm"},Ke={class:"content-section"},Me={class:"q-mt-xs row justify-between"},Ge=D(()=>a("div",null,"Kilo",-1)),Je={class:"q-mt-xs row justify-between"},We=D(()=>a("div",null,"Short",-1)),Xe={class:"q-mt-xs row justify-between"},Ye=D(()=>a("div",null,"Over",-1)),Ze={class:"q-mt-xs row justify-between"},et=D(()=>a("div",null,"Actual Target",-1)),tt={class:"q-pl-md"},at={class:"row justify-between"},lt={class:"q-pl-md"},nt={class:"row justify-between"},ot={align:"right"},st={__name:"ReportListComponent",setup(e){const y=P(),_=f(()=>y.reports);console.log("bakers report:",_.value);const u=t=>{y.removeReport(t)},S=t=>t?t.split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1).toLowerCase()).join(" "):"",m=async()=>{y.createReports()};return(t,x)=>(c(),I(A,null,[De,a("div",Ue,[n(Oe,{items:_.value,"scroll-target":"body","virtual-scroll-horizontal":"",class:"my-virtual-scroll"},{default:d(({item:b,index:q})=>[(c(),B(X,{flat:"",bordered:"",class:"q-gutter-sm my-card",key:q},{default:d(()=>[n(j,null,{default:d(()=>[a("div",Ee,[a("div",He,[n(z,{name:"assignment",color:"primary"}),a("div",ze,h(S(b.recipe_name))+" - "+h(b.recipe_category),1)]),a("div",null,[n(K,{flat:"",round:"",icon:"close",onClick:k=>u(q),class:"text-negative close-btn"},null,8,["onClick"])])])]),_:2},1024),n(J),n(j,null,{default:d(()=>[a("div",Ke,[a("div",Me,[Ge,a("div",null,h(b.kilo)+" kgs",1)]),a("div",Je,[We,a("div",null,h(b.short)+" pcs",1)]),a("div",Xe,[Ye,a("div",null,h(b.over)+" pcs",1)]),a("div",Ze,[et,a("div",null,h(b.actual_target)+" pcs",1)]),(c(),B(te,{key:"breads-"+q,label:"Breads",dense:"",class:""},{default:d(()=>[a("ul",tt,[(c(!0),I(A,null,O(b.breads,(k,p)=>(c(),I("li",{key:"bread-"+p,class:"q-my-sm"},[a("div",at,[a("div",null,h(k.bread_name),1),a("div",null,h(k.bread_production),1)])]))),128))])]),_:2},1024)),(c(),B(te,{key:"ingredients-"+q,label:"Ingredients",dense:"",class:""},{default:d(()=>[a("ul",lt,[(c(!0),I(A,null,O(b.ingredients,(k,p)=>(c(),I("li",{key:"ingredient-"+p,class:"q-my-sm"},[a("div",nt,[a("div",null,h(k.code),1),a("div",null,h(k.quantity)+" "+h(k.unit),1)])]))),128))])]),_:2},1024))])]),_:2},1024)]),_:2},1024))]),_:1},8,["items"])]),a("div",ot,[n(K,{color:"red-6",icon:"edit",label:"Create",onClick:m})])],64))}};var it=se(st,[["__scopeId","data-v-21535d8a"]]);const Y=e=>(le("data-v-0d690f3f"),e=e(),ne(),e),rt={class:"row justify-center"},dt={class:"text-h6 q-ma-sm"},ut={class:"row q-gutter-sm"},ct={class:"row q-mt-sm q-gutter-sm"},_t={class:"q-mb-md"},vt=Y(()=>a("div",{class:"q-mt-sm"},"Kilo",-1)),mt={class:"q-mt-md q-gutter-md"},pt={key:0},gt=Y(()=>a("div",{class:"q-mt-sm"},null,-1)),ht=Y(()=>a("div",{class:"text-h6 q-mt-sm",align:"center"},"Ingredients List",-1)),bt={class:"q-mt-lg"},ft={class:"ingredient-quantity"},yt={class:"ingredient-quantity"},xt={__name:"ReportRecipeInputComponent",setup(e){const y=P(),_=f(()=>y.user),u=f(()=>y.recipes);console.log("erwe:",u.value);const S=f(()=>{var r,i,v,g;const l=(i=(r=u.value)==null?void 0:r.name)!=null?i:"Recipe Name",s=(g=(v=u.value)==null?void 0:v.category)!=null?g:"Category";return`${l} - ${s}`}),m=l=>l?l.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" "):"",t=Be({user_id:null,branch_id:null,branch_recipe_id:null,recipe_name:"",recipe_category:"",kilo:"",short:0,over:0,target:0,actual_target:0,breads:[]}),x=()=>{var r;const l=parseFloat(t.kilo),s=parseFloat((r=u.value)==null?void 0:r.target);!isNaN(l)&&!isNaN(s)?t.actual_target=l*s:t.actual_target=0},b=()=>{const s=t.breads.reduce((r,i)=>r+(parseFloat(i.value)||0),0)-t.actual_target;s>0?(t.over=s,t.short=0):s<0?(t.short=Math.abs(s),t.over=0):(t.short=0,t.over=0)},q=()=>{var s,r,i,v,g,N,U,E;t.user_id=((s=_.value)==null?void 0:s.data.id)||"",t.branch_id=((v=(i=(r=_.value)==null?void 0:r.data)==null?void 0:i.employee)==null?void 0:v.branch_employee.branch_id)||"",t.branch_recipe_id=((g=u.value)==null?void 0:g.id)||"",t.recipe_name=((N=u.value)==null?void 0:N.name)||"",t.target=((U=u.value)==null?void 0:U.target)||"",t.recipe_category=((E=u.value)==null?void 0:E.category)||"";const l={user_id:t.user_id,branch_id:t.branch_id,branch_recipe_id:t.branch_recipe_id,recipe_name:t.recipe_name,recipe_category:t.recipe_category,status:"pending",kilo:t.kilo,short:t.short,over:t.over,target:t.target,actual_target:t.actual_target,breads:t.breads.map(C=>({bread_id:C.id,bread_name:C.bread_name,bread_production:parseInt(C.value,10)})),ingredients:p.value.map(C=>({ingredients_id:C.raw_materials_id,code:C.code,quantity:C.multipliedQuantity,unit:C.unit}))};console.log("reportssss dATA:",l),y.setReport(l),console.log("Report data set to store:",y.reports),k()},k=()=>{var l,s;u.value="",S.value="",t.recipe_name="",t.kilo="",t.short=0,t.over=0,t.target=0,t.actual_target=0,t.breads=((s=(l=u.value)==null?void 0:l.bread_groups)==null?void 0:s.map(r=>({id:r.product_id,bread_name:r.bread_name,value:""})))||[]},p=f(()=>{var s;const l=parseInt(t.kilo)||1;return(((s=u.value)==null?void 0:s.ingredients)||[]).map(r=>{const i=parseInt(r.quantity),v=!isNaN(l)&&!isNaN(i)?l*i:0;return{...r,multipliedQuantity:v}})});return T(()=>t.kilo,()=>{x(),b()}),T(()=>{var l;return(l=u.value)==null?void 0:l.ingredients},()=>{b()},{deep:!0}),T(()=>t.breads.map(l=>l.value),b,{deep:!0}),T(()=>{var l;return(l=u.value)==null?void 0:l.bread_groups},()=>{var l;t.breads=((l=u.value)==null?void 0:l.bread_groups.map(s=>({id:s.product_id,bread_name:s.bread_name,value:""})))||[],b()}),(l,s)=>{var r;return c(),I("div",rt,[a("div",null,[a("div",null,[a("div",dt,h(m(S.value)),1)]),a("div",ut,[a("div",null,[L(" Target Pcs "),a("div",null,[n(V,{readonly:"",outlined:"",type:"number",dense:"",label:((r=u.value)==null?void 0:r.target)||0,style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["label"])])]),a("div",null,[L(" Actual Target "),a("div",null,[n(V,{readonly:"",outlined:"",dense:"",label:t.actual_target,style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),a("div",ct,[a("div",null,[L(" Short "),a("div",null,[n(V,{readonly:"",outlined:"",type:"number",dense:"",label:t.short,style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["label"])])]),a("div",null,[L(" Over "),a("div",null,[n(V,{readonly:"",outlined:"",dense:"",label:t.over,style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),a("div",_t,[vt,a("div",null,[n(W,{outlined:"",dense:"",modelValue:t.kilo,"onUpdate:modelValue":s[0]||(s[0]=i=>t.kilo=i),type:"number",placeholder:"kgs",style:{width:"210px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])])]),a("div",mt,[t.breads.length?(c(),I("div",pt,[(c(!0),I(A,null,O(t.breads,(i,v)=>(c(),I("div",{key:i.id},[a("div",null,h(i.bread_name),1),a("div",null,[n(W,{outlined:"",modelValue:t.breads[v].value,"onUpdate:modelValue":g=>t.breads[v].value=g,dense:"",type:"number",placeholder:"Pcs",style:{width:"210px","max-width":"300px","min-width":"50px"}},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])):oe("",!0)]),gt,n(K,{outline:"",dense:"",size:"md",icon:"add",label:"Report",class:"text-purple",onClick:q})]),a("div",null,[ht,a("div",bt,[n(V,{readonly:"",outlined:"",style:{width:"400px","max-width":"450px","min-width":"100px"}},{control:d(()=>[n(ie,{dense:"",separator:""},{default:d(()=>[(c(!0),I(A,null,O(p.value,(i,v)=>(c(),B(M,{key:v,class:"q-pa-xs justify-between"},{default:d(()=>[n($,null,{default:d(()=>[n(F,{class:"ingredient-name"},{default:d(()=>[L(h(i.code),1)]),_:2},1024)]),_:2},1024),n($,{side:"",class:"text-right"},{default:d(()=>[a("div",ft,h(i.multipliedQuantity.toFixed(2)),1)]),_:2},1024),n($,{side:"",class:"text-right"},{default:d(()=>[a("div",yt,h(i.unit),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])}}};var kt=se(xt,[["__scopeId","data-v-0d690f3f"]]);const wt={key:0,class:"custom-list z-top"},St={__name:"ReportSearchComponent",setup(e){var p,l,s;const y=P(),_=G(""),u=P(),S=Fe(),m=f(()=>u.user);console.log("erw:",m.value);const t=f(()=>S.branchRecipe),x=((s=(l=(p=m.value)==null?void 0:p.data)==null?void 0:l.employee)==null?void 0:s.branch_employee.branch_id)||"";console.log("branch_id",x);const b=async()=>{S.searchBranchRecipe(_.value,x),console.log("searchQuery.value",_.value),console.log("branch_id",x)},q=r=>{console.log("branch recipe",r),y.setRecipe(r),_.value=""},k=r=>r?r.split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join(" "):"";return console.log("recipessss",t.value),(r,i)=>(c(),B(W,{modelValue:_.value,"onUpdate:modelValue":[i[0]||(i[0]=v=>_.value=v),b],debounce:"1000",outlined:"",rounded:"",placeholder:"Search product",dense:""},{append:d(()=>[a("div",null,[n(z,{name:"search"})])]),default:d(()=>[_.value?(c(),I("div",wt,[n(X,null,{default:d(()=>[n(ie,{separator:""},{default:d(()=>{var v;return[(v=t.value)!=null&&v.length?(c(!0),I(A,{key:1},O(t.value,g=>(c(),B(M,{onClick:N=>q(g),key:g.id,clickable:""},{default:d(()=>[n($,null,{default:d(()=>[n(F,null,{default:d(()=>[L(h(k(g==null?void 0:g.name)),1)]),_:2},1024)]),_:2},1024),n($,null,{default:d(()=>[n(F,{side:""},{default:d(()=>[L(h(g==null?void 0:g.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(c(),B(M,{key:0},{default:d(()=>[L(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):oe("",!0)]),_:1},8,["modelValue"]))}},It={class:"text-h6 text-dark row justify-between"},qt=a("div",null," Bakers Report ",-1),Ct={class:"row"},Rt={class:"q-gutter-y-md"},Lt={class:"q-gutter-y-md"},Ut={__name:"ReportIdCreatePage",setup(e){const y=je(),_=P(),u=f(()=>_.recipes);console.log("report",u);const S=()=>{_.clearData(),y.push("/branch/baker/report")};return(m,t)=>{const x=Ae("BakersReportSearch");return c(),I("div",null,[n(X,{flat:""},{default:d(()=>[n(j,null,{default:d(()=>[a("div",It,[a("div",null,[n(K,{outline:"",flat:"",icon:"arrow_back",onClick:S})]),n(Ne),qt])]),_:1}),n(j,null,{default:d(()=>[a("div",Ct,[n(x)])]),_:1}),n(j,null,{default:d(()=>[a("div",null,[n(St)]),a("div",Rt,[a("div",null,[n(kt)])])]),_:1}),n(j,null,{default:d(()=>[a("div",Lt,[a("div",null,[n(it)])])]),_:1})]),_:1})])}}};export{Ut as default};
