import{c as V,r as p,t as E,o as m,a2 as h,f as e,M as v,w as t,Q as z,I as w,ad as C,J as i,K as D,aI as A,a1 as B,a3 as S,$ as q,a0 as M,O as $,R as I,z as J,u as O,L as N,e as j,_ as P,ba as G}from"./index.f9204663.js";import{Q as H}from"./QPage.36cec978.js";import{Q as W}from"./QSpace.e6f60345.js";import{Q as X}from"./QSelect.7fad6eea.js";import{C as k}from"./ClosePopup.f4808119.js";import{u as U}from"./recipe.db688c11.js";import{Q as Y}from"./QSpinnerDots.2e5bb457.js";import{Q as F}from"./QTooltip.ed8519a2.js";import{Q as Z}from"./QPopupEdit.e7212efd.js";import{Q}from"./QTd.c919a918.js";import{Q as ee}from"./QBadge.f90581b2.js";import{Q as ae}from"./QTable.bf0a912b.js";import"./QList.9266f0ea.js";import"./use-virtual-scroll.6cb0d38e.js";import{_ as T}from"./plugin-vue_export-helper.21dcd24c.js";import"./axios.f9d7066b.js";import"./QChip.1e0b2b43.js";import"./QMenu.29311ca7.js";import"./selection.106a4db1.js";import"./QVirtualScroll.aec25fa2.js";const te=i("div",{class:"text-h5 q-mr-md"},"\u{1F4DC} Add Recipe",-1),le={class:"q-mt-md q-animated q-animate-bounce"},oe={class:"q-mt-md q-animated q-animate-bounce"},se={__name:"RecipeCreate",setup(l){const _=V(()=>n.recipes),n=U(),o=p(!1),g=()=>{o.value=!0},y=["Dough","Filling"],c=p(!1),r=E({name:"",category:""}),b=async()=>{console.log("Recipe",r);try{c.value=!0,await n.createRecipe(r),c.value=!1,o.value=!1,x(),_.value=await n.fetchRecipes()}catch{c.value=!1}},x=()=>{r.name="",r.category="",o.value=!1};return(R,u)=>(m(),h(S,null,[e(v,{class:"text-dark q-pa-sm",outline:"",dense:"",elevated:"",icon:"add_circle",label:"Add Recipe",onClick:g,style:{"background-color":"#ef4444"}}),e(B,{modelValue:o.value,"onUpdate:modelValue":u[2]||(u[2]=a=>o.value=a),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:t(()=>[e(z,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:t(()=>[e(w,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:t(()=>[te,e(W),C(e(v,{icon:"close",flat:"",dense:"",round:""},null,512),[[k]])]),_:1}),e(w,{class:"q-mx-md"},{default:t(()=>[i("div",le,[e(D,{class:"text-capitalize",modelValue:r.name,"onUpdate:modelValue":u[0]||(u[0]=a=>r.name=a),outlined:"",dense:"",label:"Recipe Name",rules:[a=>a&&a.length>0||"Recipe name is required"]},null,8,["modelValue","rules"])]),i("div",oe,[e(X,{modelValue:r.category,"onUpdate:modelValue":u[1]||(u[1]=a=>r.category=a),options:y,"hide-dropdown-icon":"",outlined:"",dense:"",behavior:"menu",label:"Category",rules:[a=>a&&a.length>0||"Category is required"]},null,8,["modelValue","rules"])]),e(A,{class:"row q-mt-md q-px-lg q-py-sm q-pt-none",align:"right"},{default:t(()=>[C(e(v,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[k]]),e(v,{class:"glossy",color:"teal",label:"Create",onClick:b})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const L=l=>($("data-v-49908f78"),l=l(),I(),l),re=L(()=>i("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),ne=L(()=>i("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),ie={__name:"RecipeDelete",props:["delete"],setup(l){const _=U(),n=l,o=p(!1),g=()=>{o.value=!0},y=async()=>{await _.deleteRecipe(n.delete.row.id),o.value=!1};return(c,r)=>(m(),h(S,null,[e(v,{onClick:g,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"","aria-label":"Delete"},{default:t(()=>[e(F,{class:"bg-negative",delay:200},{default:t(()=>[q("Delete")]),_:1})]),_:1}),e(B,{modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=b=>o.value=b),persistent:""},{default:t(()=>[e(z,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(w,{class:"q-pt-none q-pb-sm"},{default:t(()=>[re,ne]),_:1}),e(M,{class:"q-mb-md"}),e(w,null,{default:t(()=>[e(A,{align:"right",class:"q-pt-none"},{default:t(()=>[C(e(v,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[k]]),e(v,{dense:"",label:"Delete",color:"negative",onClick:y,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var ce=T(ie,[["__scopeId","data-v-49908f78"]]);const de=l=>($("data-v-163d3062"),l=l(),I(),l),ue={align:"left"},pe={key:0,class:"spinner-wrapper"},me={key:1},_e={key:0,class:"data-error"},ge=de(()=>i("div",{class:"q-ml-sm text-h6"},"No data available",-1)),fe={class:"row justify-center q-gutter-x-md"},ve={__name:"RecipeTable",setup(l){const _=U(),n=p(""),o=p(!0);p([]);const g=p(!1),y=p({rowsPerPage:0}),c=V(()=>_.recipes),r=V(()=>n.value?c.value.filter(a=>a.name.toLowerCase().includes(n.value.toLowerCase())):c.value),b=a=>a?a.split(" ").map(d=>d.charAt(0).toUpperCase()+d.slice(1).toLowerCase()).join(" "):"";J(async()=>{await x()});const x=async()=>{try{o.value=!0,c.value=await _.fetchRecipes(),c.value.length||(g.value=!0),console.log("Recipe",c.value)}catch(a){console.log("error fetching recipe: ",a),g.value=!0}finally{o.value=!1}};O(n,async a=>{o.value=!0,await new Promise(d=>setTimeout(d,1e3)),o.value=!1,g.value=r.value.length===0});const R=[{name:"name",label:"Recipe Name",align:"left",field:a=>a.name,format:a=>`${a}`,sortable:!0},{name:"category",align:"left",label:"Category",field:"category",sortable:!0},{name:"action",label:"Action",align:"center",sortable:!0}],u=a=>{switch(a){case"Filling":return"teal";case"Dough":return"brown-6";default:return"grey"}};return(a,d)=>(m(),h(S,null,[i("div",ue,[e(D,{class:"q-pb-lg q-pl-sm dynamic-width",modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=s=>n.value=s),outlined:"",placeholder:"Search",debounce:"1000",flat:"",dense:"",rounded:""},{append:t(()=>[e(N,{name:"search"})]),_:1},8,["modelValue"])]),o.value?(m(),h("div",pe,[e(Y,{size:"50px",color:"primary"})])):(m(),h("div",me,[r.value.length===0?(m(),h("div",_e,[e(N,{name:"warning",color:"warning",size:"4em"}),ge])):(m(),j(ae,{key:1,class:"table-container elegant-container sticky-header",filter:n.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:R,rows:r.value,"row-key":"name","virtual-scroll":"",pagination:y.value,"onUpdate:pagination":d[1]||(d[1]=s=>y.value=s),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"400px"}},{"body-cell-name":t(s=>[e(Q,{props:s,class:"cursor-pointer"},{default:t(()=>[i("span",null,[q(P(b(s.row.name))+" ",1),e(F,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[q("Edit Recipe Name")]),_:1})]),e(Z,{"onUpdate:modelValue":[f=>a.updateRecipeName(s.row,f),f=>s.row.name=f],modelValue:s.row.name,"auto-save":""},{default:t(f=>[e(D,{class:"text-capitalize",modelValue:f.value,"onUpdate:modelValue":K=>f.value=K,dense:"",autofocus:"",counter:"",onKeyup:G(f.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-category":t(s=>[e(Q,{key:"name",props:s},{default:t(()=>[e(ee,{color:u(s.row.category)},{default:t(()=>[q(P(s.row.category),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-action":t(s=>[e(Q,{props:s},{default:t(()=>[i("div",fe,[e(ce,{delete:s},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var ye=T(ve,[["__scopeId","data-v-163d3062"]]);const he=l=>($("data-v-2aa25900"),l=l(),I(),l),we=he(()=>i("div",{class:"text-h6"},null,-1)),be={align:"right"},qe={__name:"RecipePage",setup(l){return(_,n)=>(m(),j(H,{class:"elegant-container",flat:""},{default:t(()=>[e(w,{class:"row justify-between"},{default:t(()=>[we,i("div",be,[e(se)])]),_:1}),e(w,null,{default:t(()=>[e(ye)]),_:1})]),_:1}))}};var Ke=T(qe,[["__scopeId","data-v-2aa25900"]]);export{Ke as default};
