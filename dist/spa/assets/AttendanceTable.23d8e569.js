import{r as N,c as j,t as he,o as c,a3 as V,J as r,f as t,M as $,w as l,Q as J,I as A,ae as G,K as D,L as P,e as U,a0 as y,a4 as K,a5 as ke,$ as w,bd as ie,aJ as ne,a2 as re,O as Z,R as ee,bf as b,a1 as pe,z as me,u as we,bb as Y,aK as _e}from"./index.3b6f48aa.js";import{Q as oe}from"./QChip.66bc0c15.js";import{a as Ve,Q as q}from"./QTable.12534daf.js";import{Q as R}from"./QTooltip.57731abd.js";import{Q as ue}from"./QSelect.5631522a.js";import{Q}from"./QPopupEdit.bfb3e678.js";import{Q as fe}from"./QDate.9f9d4a57.js";import{Q as B}from"./QBadge.f286e7e1.js";import{Q as Te}from"./QPopupProxy.0c891e5c.js";import{Q as xe}from"./QSpinnerIos.bc63a070.js";import{Q as De}from"./QInnerLoading.783208ec.js";import{u as se}from"./dtr.0513f604.js";import{Q as be}from"./QSpace.b7cb83c8.js";import{a as ve,b as Se}from"./QMenu.87acc50f.js";import{Q as qe}from"./QList.00e022d1.js";import{C as X}from"./ClosePopup.4ccb72c2.js";import{u as $e}from"./employee.0a6417c3.js";/* empty css                                                                    */import{_ as te}from"./plugin-vue_export-helper.21dcd24c.js";import"./QVirtualScroll.ec6b7242.js";import"./use-virtual-scroll.b4596b48.js";import"./rtl.276c3f1b.js";import"./position-engine.6b31c9e6.js";import"./selection.e7e63b55.js";import"./use-render-cache.3aae9b27.js";import"./date.9f3c849a.js";import"./axios.623fc7c2.js";const Ie=h=>(Z("data-v-663a67ba"),h=h(),ee(),h),Ue=Ie(()=>r("div",{class:"text-h5 q-mr-md"},"\u{1F554} Add Over Time",-1)),Oe={class:"q-gutter-md"},Ce={class:"q-mb-lg"},Ne={key:0,class:"custom-list z-top"},Ae={class:"q-gutter-md q-my-lg"},Be={class:"q-mt-xl q-gutter-y-md"},We={class:"row justify-between"},Me={class:"row justify-between"},Re={__name:"OvertimeButton",setup(h){const i=se(),x=$e(),T=N(""),_=j(()=>x.employees),m=async()=>{T.value.trim()&&await x.searchEmployee(T.value)},O=N(!1),I=()=>{O.value=!0},f=S=>/^(0[1-9]|1[0-2]):[0-5][0-9] (AM|PM)$/i.test(S)||"Invalid time format",v=S=>{p.employee_id=S.id,p.employee_name=`${S.firstname} ${S.middlename?S.middlename.charAt(0)+".":""} ${S.lastname}`,p.position=S.position,T.value=""},p=he({employee_id:"",employee_name:"",position:"",regularDateIN:"",dateIn:"",dateOut:"",timeIn:"",timeOut:""}),z=S=>{const n=C=>C?C.charAt(0).toUpperCase()+C.slice(1).toLowerCase():"",u=S.firstname?n(S.firstname):"No Firstname",d=S.middlename?n(S.middlename).charAt(0)+".":"",k=S.lastname?n(S.lastname):"No Lastname";return`${u} ${d} ${k}`},M=async()=>{const S=`${p.dateIn} ${p.timeIn}`,n=`${p.dateOut} ${p.timeOut}`,u={...p,overtime_in:S,overtime_out:n};await i.saveOvertime(u),console.log("overtime dATA",u)};return(S,n)=>(c(),V(K,null,[r("div",null,[t($,{padding:"sm md",label:"Add Over Time",icon:"add_circle",size:"md",class:"gradient-btn text-white",onClick:I})]),r("div",null,[t(re,{modelValue:O.value,"onUpdate:modelValue":n[8]||(n[8]=u=>O.value=u),"full-height":"",persistent:"",position:"right","backdrop-filter":"blur(4px) saturate(150%)"},{default:l(()=>[t(J,{style:{width:"500px","max-width":"100vw"}},{default:l(()=>[t(A,{class:"row items-center q-px-md q-py-sm gradient-btn text-white"},{default:l(()=>[Ue,t(be),G(t($,{icon:"arrow_forward_ios",flat:"",dense:"",round:""},null,512),[[X]])]),_:1}),t(A,null,{default:l(()=>[r("div",Oe,[r("div",Ce,[t(D,{modelValue:T.value,"onUpdate:modelValue":[n[0]||(n[0]=u=>T.value=u),m],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name"},{append:l(()=>[t(P,{name:"search"})]),default:l(()=>[T.value?(c(),V("div",Ne,[t(J,null,{default:l(()=>[t(qe,{separator:""},{default:l(()=>{var u;return[(u=_.value)!=null&&u.length?(c(!0),V(K,{key:1},ke(_.value,d=>(c(),U(ve,{onClick:k=>v(d),key:d.id,clickable:""},{default:l(()=>[t(Se,null,{default:l(()=>[y(w(z(d)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(c(),U(ve,{key:0},{default:l(()=>[y(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):ie("",!0)]),_:1},8,["modelValue"])]),r("div",null,[r("div",Ae,[t(D,{modelValue:p.employee_name,"onUpdate:modelValue":n[1]||(n[1]=u=>p.employee_name=u),outlined:"",dense:"",readonly:"",label:"Name"},null,8,["modelValue"]),t(D,{modelValue:p.position,"onUpdate:modelValue":n[2]||(n[2]=u=>p.position=u),outlined:"",dense:"",readonly:"",label:"Position"},null,8,["modelValue"])])])])]),_:1}),t(A,null,{default:l(()=>[t(D,{modelValue:p.regularDateIN,"onUpdate:modelValue":n[3]||(n[3]=u=>p.regularDateIN=u),outlined:"",dense:"",label:"Regular Date IN",type:"date"},null,8,["modelValue"])]),_:1}),t(A,null,{default:l(()=>[r("div",Be,[r("div",We,[r("div",null,[t(D,{modelValue:p.dateIn,"onUpdate:modelValue":n[4]||(n[4]=u=>p.dateIn=u),outlined:"",dense:"",label:"Date IN",type:"date",style:{width:"170px"}},null,8,["modelValue"])]),r("div",null,[t(D,{modelValue:p.timeIn,"onUpdate:modelValue":n[5]||(n[5]=u=>p.timeIn=u),label:"Time IN",dense:"",mask:"##:## AA",outlined:"",rules:f,hint:"Format: hh:mm AM/PM"},null,8,["modelValue"])])]),r("div",Me,[r("div",null,[t(D,{modelValue:p.dateOut,"onUpdate:modelValue":n[6]||(n[6]=u=>p.dateOut=u),outlined:"",dense:"",label:"Date OUT",type:"date",style:{width:"170px"}},null,8,["modelValue"])]),r("div",null,[t(D,{modelValue:p.timeOut,"onUpdate:modelValue":n[7]||(n[7]=u=>p.timeOut=u),label:"Time OUT",dense:"",mask:"##:## AA",outlined:"",rules:f,hint:"Format: hh:mm AM/PM"},null,8,["modelValue"])])])])]),_:1}),t(A,null,{default:l(()=>[t(ne,{class:"q-mt-md"},{default:l(()=>[t($,{size:"md",padding:"xs md",label:"save","icon-right":"send",class:"gradient-btn text-white",onClick:M})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var Ee=te(Re,[["__scopeId","data-v-663a67ba"]]);const W=h=>(Z("data-v-f6a9ed94"),h=h(),ee(),h),He=W(()=>r("div",{class:"text-h5 q-mr-md"},"\u{1F554} Edit Time",-1)),Qe={class:"row justify-between"},Pe={class:"q-mt-lg q-gutter-md"},ze={class:"row justify-between"},Le=W(()=>r("div",null,"Time IN",-1)),Fe=W(()=>r("div",null,"Time OUT",-1)),je={class:"row justify-between"},Ke=W(()=>r("div",null,"Lunch Break Start",-1)),Ye=W(()=>r("div",null,"Lunch Break End",-1)),Je={class:"row justify-between"},Ge=W(()=>r("div",null,"Break Start",-1)),Xe=W(()=>r("div",null,"Break End",-1)),Ze={class:"row justify-between"},et=W(()=>r("div",null,"Over Time Start",-1)),tt=W(()=>r("div",null,"Over Time End",-1)),lt={__name:"EditDTR",props:["edit"],setup(h){const x=h.edit.row,T=N(),_=I=>{const f=M=>M?M.charAt(0).toUpperCase()+M.slice(1).toLowerCase():"",v=I.firstname?f(I.firstname):"No Firstname",p=I.middlename?f(I.middlename).charAt(0)+".":"",z=I.lastname?f(I.lastname):"No Lastname";return`${v} ${p} ${z}`.trim()},m=he({time_in:"",time_out:"",lunch_break_start:"",lunch_break_end:"",break_start:"",break_end:"",over_start:"",over_end:""}),O=()=>{Object.assign(m,x),T.value=!0};return(I,f)=>(c(),V(K,null,[t($,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:"",onClick:O},{default:l(()=>[t(R,{class:"bg-positive",delay:200},{default:l(()=>[y("Edit")]),_:1})]),_:1}),t(re,{modelValue:T.value,"onUpdate:modelValue":f[8]||(f[8]=v=>T.value=v)},{default:l(()=>[t(J,{style:{width:"550px","max-width":"80vw"}},{default:l(()=>[t(A,{class:"row items-center q-px-md q-py-sm gradient-btn text-white"},{default:l(()=>[He,t(be),G(t($,{icon:"close",flat:"",dense:"",round:""},null,512),[[X]])]),_:1}),t(A,null,{default:l(()=>[r("div",Qe,[r("div",null,"Name: "+w(_(b(x).employee)),1),r("div",null," Position: "+w(b(x).employee.position),1)]),r("div",Pe,[r("div",ze,[r("div",null,[Le,t(D,{outlined:"",dense:"",modelValue:m.time_in,"onUpdate:modelValue":f[0]||(f[0]=v=>m.time_in=v)},null,8,["modelValue"])]),r("div",null,[Fe,t(D,{outlined:"",dense:"",modelValue:m.time_out,"onUpdate:modelValue":f[1]||(f[1]=v=>m.time_out=v)},null,8,["modelValue"])])]),r("div",je,[r("div",null,[Ke,t(D,{outlined:"",dense:"",modelValue:m.lunch_break_start,"onUpdate:modelValue":f[2]||(f[2]=v=>m.lunch_break_start=v)},null,8,["modelValue"])]),r("div",null,[Ye,t(D,{outlined:"",dense:"",modelValue:m.lunch_break_end,"onUpdate:modelValue":f[3]||(f[3]=v=>m.lunch_break_end=v)},null,8,["modelValue"])])]),r("div",Je,[r("div",null,[Ge,t(D,{outlined:"",dense:"",modelValue:m.break_start,"onUpdate:modelValue":f[4]||(f[4]=v=>m.break_start=v)},null,8,["modelValue"])]),r("div",null,[Xe,t(D,{outlined:"",dense:"",modelValue:m.break_end,"onUpdate:modelValue":f[5]||(f[5]=v=>m.break_end=v)},null,8,["modelValue"])])]),r("div",Ze,[r("div",null,[et,t(D,{outlined:"",dense:"",modelValue:m.over_start,"onUpdate:modelValue":f[6]||(f[6]=v=>m.over_start=v)},null,8,["modelValue"])]),r("div",null,[tt,t(D,{outlined:"",dense:"",modelValue:m.over_end,"onUpdate:modelValue":f[7]||(f[7]=v=>m.over_end=v)},null,8,["modelValue"])])])])]),_:1}),t(ne,{class:"row q-ma-md",align:"right"},{default:l(()=>[G(t($,{class:"btn-cancel glossy",color:"negative",label:"Cancel"},null,512),[[X]]),t($,{class:"btn-create glossy",color:"positive",label:"Save"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var at=te(lt,[["__scopeId","data-v-f6a9ed94"]]);const ot=h=>(Z("data-v-798ca487"),h=h(),ee(),h),nt=ot(()=>r("div",{class:"text-h5 q-mb-md"},"Decline Overtime",-1)),rt={class:"q-pa-md"},st={__name:"DeclineOTButton",props:["decline"],setup(h){const i=h,x=se();console.log("decline",i.decline);const T=j(()=>x.user);console.log("userDatafromDeclineButton",T.value);const _=N(!1),m=N(""),O=async()=>{_.value=!0},I=async()=>{try{await x.declineOvertime({id:i.decline.id,declined_by:T.value.employee.id,reason:m.value}),_.value=!1}catch(f){console.error("Error declining overtime:",f)}};return(f,v)=>(c(),V(K,null,[t($,{dense:"",outline:"",color:"red",icon:"close",size:"sm",onClick:O}),t(re,{modelValue:_.value,"onUpdate:modelValue":v[1]||(v[1]=p=>_.value=p),"backdrop-filter":"blur(4px) saturate(150%) brightness(60%)"},{default:l(()=>[t(J,{style:{"max-width":"400px",width:"100%"}},{default:l(()=>[t(A,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:l(()=>[nt,r("div",rt,[t(D,{modelValue:m.value,"onUpdate:modelValue":v[0]||(v[0]=p=>m.value=p),filled:"",type:"textarea",placeholder:"Reason"},null,8,["modelValue"])])]),_:1}),t(pe,{class:"q-mb-md"}),t(A,null,{default:l(()=>[t(ne,{align:"right",class:"q-pt-none"},{default:l(()=>[G(t($,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[X]]),t($,{dense:"",label:"Decline",color:"negative",disable:!m.value,onClick:I,class:"q-btn-rounded q-px-lg"},null,8,["disable"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var ut=te(st,[["__scopeId","data-v-798ca487"]]);const de=h=>(Z("data-v-cceeabd0"),h=h(),ee(),h),it={class:"row q-px-xm"},dt=de(()=>r("div",null,"Approve",-1)),ct=de(()=>r("div",{class:"text-h5 q-mb-md"},"Approve Overtime",-1)),mt=de(()=>r("p",{class:"text-body2 q-mb-none"}," Are you sure you want to approve overtime? This action cannot be undone. ",-1)),_t={__name:"ApproveOTButton",props:["approve"],setup(h){const i=h;console.log("approve",i.approve);const x=se(),T=j(()=>x.user);console.log("userDatafromApprovebutton",T.value);const _=N(!1),m=()=>{_.value=!0},O=async()=>{console.log("Approving overtime for ID:",i.approve.id),await x.approveOvertime({id:i.approve.id,approved_by:T.value.employee.id}),_.value=!1};return(I,f)=>(c(),V(K,null,[t($,{unelevated:"",dense:"",color:"dark",size:"sm","no-caps":"",onClick:m},{default:l(()=>[r("div",it,[t(P,{left:"",size:"1.5em",name:"check"}),dt])]),_:1}),t(re,{modelValue:_.value,"onUpdate:modelValue":f[0]||(f[0]=v=>_.value=v),"backdrop-filter":"blur(4px) saturate(150%) brightness(60%)"},{default:l(()=>[t(J,null,{default:l(()=>[t(A,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:l(()=>[ct,mt]),_:1}),t(pe,{class:"q-mb-md"}),t(A,null,{default:l(()=>[t(ne,{align:"right",class:"q-pt-none"},{default:l(()=>[G(t($,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[X]]),t($,{dense:"",label:"Approve",color:"dark",onClick:O,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var ft=te(_t,[["__scopeId","data-v-cceeabd0"]]);function vt(){const h=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"",i=n=>{const u=n!=null&&n.firstname?h(n.firstname):"- ",d=n!=null&&n.middlename?h(n.middlename).charAt(0)+".":"-",k=n!=null&&n.lastname?h(n.lastname):" -";return`${u} ${d} ${k}`.trim()},x=n=>{if(!n)return" - - -";const u=new Date(n);return isNaN(u.getTime())?" - - -":u.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},T=n=>{if(!n)return" - - -";const u=new Date(n);if(isNaN(u.getTime()))return" - - -";let d=u.getHours();const k=u.getMinutes().toString().padStart(2,"0"),C=d>=12?"PM":"AM";return d=d%12,d=d||12,`${d}:${k} ${C}`},_=(n,u)=>{if(!n||!u)return{hours:0,minutes:0};const d=new Date(n),k=new Date(u);if(isNaN(d.getTime())||isNaN(k.getTime()))return{hours:0,minutes:0};const C=k-d,E=Math.floor(C/(1e3*60)),H=Math.floor(E/60),L=E%60;return{hours:H,minutes:L}};return{capitalize:h,formatFullname:i,formatDate:x,formatTime:T,calculateTotalWorkingHours:_,calculateTotalOvertimeHours:(n,u)=>{if(!n||!u)return{hours:0,minutes:0};const d=new Date(n),k=new Date(u);if(isNaN(d.getTime())||isNaN(k.getTime()))return{hours:0,minutes:0};const C=k-d,E=Math.floor(C/(1e3*60)),H=Math.floor(E/60),L=E%60;return{hours:H,minutes:L}},getLunchBreakColor:(n,u)=>{const{hours:d,minutes:k}=_(n,u);return d>1||k>0?"green-7":"blue-grey-9"},getLunchBreakIcon:(n,u)=>{const{hours:d,minutes:k}=_(n,u);return d>1||k>0?"check_circle":"access_time"},getBreakColor:(n,u)=>{const{hours:d,minutes:k}=_(n,u);return d>0||k>15?"pink-13":"green-7"},getBreakHoursIcon:(n,u)=>{const{hours:d,minutes:k}=_(n,u);return d>0||k>15?"access_time":"check_circle"},getWorkHoursColor:(n,u)=>{const{hours:d,minutes:k}=_(n,u);return d>9||d===9&&k>0?"blue-grey-9":d>=8?"green-7":"pink-13"},getWorkHoursIcon:(n,u)=>{const{hours:d,minutes:k}=_(n,u);return d>=9||d===9&&k>0?"alarm_on":d>=8?"check_circle":"access_time"},getBadgePositionColor:n=>{switch(n){case"Super Admin":return"blue-10";case"Admin":return"purple-10";case"Supervisor":return"teal-7";case"Scaler":return"green-8";case"Lamesador":return"orange-5";case"Hornero":return"red-6";case"Baker":return"brown";case"Cake Maker":return"brown-4";case"Cashier":return"green-5";case"Sales Clerk":return"blue-5";case"Utility":return"grey-7";case"Not Yet Assigned":return"grey-4";default:return"grey-4"}},truncateText:(n,u)=>n?n.length>u?n.slice(0,u)+"...":n:""}}const ce=h=>(Z("data-v-25cb3e8e"),h=h(),ee(),h),ht={class:"row justify-between q-my-md",align:"right"},pt={class:"q-pa-md",style:{"min-width":"300px","max-width":"400px"}},bt=ce(()=>r("div",{class:"text-h6 text-primary text-center q-mb-sm"}," Edit Where IN ",-1)),gt={class:"text-subtitle2 q-mb-sm"},yt={class:"row justify-end q-mt-md"},kt={class:"q-pa-md",style:{"min-width":"300px","max-width":"400px"}},wt=ce(()=>r("div",{class:"text-h6 text-primary text-center q-mb-sm"}," Edit Where OUT ",-1)),Vt={class:"text-subtitle2 q-mb-sm"},Tt={class:"row justify-end q-mt-md"},xt={class:"q-pa-md",style:{"min-width":"300px","max-width":"400px"}},Dt=ce(()=>r("div",{class:"text-h6 text-primary text-center q-mb-sm"}," Edit Shift Status ",-1)),St={class:"text-subtitle2 q-mb-sm"},qt={class:"row justify-end q-mt-md"},$t={key:0},It={key:1},Ut={key:1},Ot={key:1},Ct={key:1},Nt={key:1},At={key:1},Bt={key:1},Wt={key:1},Mt={key:1},Rt={key:1},Et={key:2},Ht={key:3,class:"q-gutter-x-sm"},Qt={key:0},Pt={key:1},zt={key:0},Lt={key:1},Ft={class:"row justify-center q-gutter-x-md"},jt={__name:"AttendanceTable",setup(h){const i=vt(),x=N({page:1,rowsPerPage:0,rowsNumber:0}),T=N(""),_=N(!1),m=se(),O=j(()=>m.dtrs),I=j(()=>m.branchWithWarehouses),f=N([]),v=N("");me(async()=>{await H()});const p=a=>/^(0[1-9]|1[0-2]):([0-5][0-9]) (AM|PM)$/.test(a)||"Time format must be HH:MM AM/PM (e.g., 01:00 AM)",z=async(a,s)=>{console.log("updateEmployeeScheduleIn composables",a,s),_.value=!0;try{const e={id:a.id,schedule_in:s};console.log("employeeScheduleIn",e),await m.updateDtrScheduleIn(e)}catch(e){console.log("error",e)}finally{_.value=!1}},M=async(a,s)=>{console.log("updateEmployeeScheduleOut composables",a,s),_.value=!0;try{const e={id:a.id,schedule_out:s};console.log("employeeScheduleOut",e),await m.updateDtrSheduleOut(e)}catch(e){console.log(e)}finally{_.value=!1}};me(async()=>{try{const a=await m.getBranchWithWarehouses()}catch(a){console.log("error",a)}});const n=j(()=>I.value.data.map(a=>{var s;return{label:a.name,value:(s=a.devices[0])==null?void 0:s.uuid}})),u=async(a,s)=>{console.log("updateDTRWhereIN composables",a,s),_.value=!0;try{const e={id:a.id,device_uuid_in:s};await m.updateDTRWhereIN(e);const o=n.value.find(g=>g.value===s);o&&(a.device_in_reference_name=o.label)}catch(e){console.log("error",e)}finally{_.value=!1}},d=async(a,s)=>{console.log("updateDTRWhereOUT composables",a,s),_.value=!0;try{const e={id:a.id,device_uuid_out:s};await m.updateDTRWhereOUT(e);const o=n.value.find(g=>g.value===s);o&&(a.device_out_reference_name=o.label)}catch(e){console.log("error",e)}finally{_.value=!1}},k=async(a,s)=>{console.log("updateDTRShiftStatus composables",a,s),_.value=!0;try{const e={id:a.id,shift_status:s};await m.updateDTRShiftStatus(e),a.shift_status=s}catch(e){console.log("error",e)}finally{_.value=!1}},C=(a,s)=>{if(!a)return;const e=new Date(a);s._dateOnly=e.toISOString().slice(0,10)},E=async(a,s)=>{if(console.log("updateDTRTimeINDateOnly composables",a,s),!a.time_in)return;const e=new Date(a.time_in),o=e.getHours(),g=e.getMinutes(),F=e.getSeconds(),le=new Date(s);le.setHours(o,g,F);try{const ae=le.toISOString();await m.updateDTRDateIN(a.id,ae),a.time_in=ae}catch(ae){console.log("error",ae)}},H=async(a=0,s=5,e="")=>{try{_.value=!0,await m.fetchDTR(a,s,e);const{data:o,current_page:g,per_page:F,total:le}=O.value;f.value=o,console.log("dtrRows.value",f.value),x.value={page:g,rowsPerPage:F,rowsNumber:le}}catch(o){console.error("Error fetching DTR data:",o)}finally{_.value=!1}},L=a=>{const s=a||"Regular Day";return s==="Half Day"?{label:s,color:"orange"}:s==="Regular Day"?{label:s,color:"green"}:{label:s,color:"grey-4"}},ge=[{name:"name",required:!0,label:"Name",align:"left",field:a=>i.formatFullname(a.employee),style:"position: sticky; left: 0; background: white; z-index: 1;",headerStyle:"position: sticky; left: 0; background: white; z-index: 2;"},{name:"position",required:!0,label:"Position",align:"center",field:a=>{var s;return((s=a.employee)==null?void 0:s.position)||"N/A"}},{name:"where_in",required:!0,label:"Where IN",align:"center",field:a=>a.device_in_reference_name||"N/A"},{name:"where_out",required:!0,label:"Where OUT",align:"center",field:a=>a.device_out_reference_name||"N/A"},{name:"shift_status",required:!0,label:"Shift Status",align:"center",field:a=>a.shift_status||"Regular Day",format:a=>{const s=a||"Regular Day";let e="grey-4";return s==="Half Day"?e="orange":s==="Regular Day"&&(e="green"),`<q-chip color="${e}" text-color="white" dense>${s}</q-chip>`},sortable:!0},{name:"date_in",required:!0,label:"Date In",align:"center",field:"time_in",format:i.formatDate},{name:"date_out",required:!0,label:"Date Out",align:"center",field:"time_out",format:i.formatDate},{name:"time_in",required:!0,label:"Time In",align:"center",field:"time_in"},{name:"time_out",required:!0,label:"Time Out",align:"center",field:"time_out",format:i.formatTime},{name:"lunch_break_start",required:!0,label:"Lunch Break Start",align:"center",field:"lunch_break_start",format:i.formatTime},{name:"lunch_break_end",required:!0,label:"Lunch Break End",align:"center",field:"lunch_break_end",format:i.formatTime},{name:"break_start",required:!0,label:"Break Start",align:"center",field:"break_start",format:i.formatTime},{name:"break_end",required:!0,label:"Break End",align:"center",field:"break_end",format:i.formatTime},{name:"break",required:!0,label:"Total Break",align:"center",field:a=>{const{hours:s,minutes:e}=i.calculateTotalWorkingHours(a.break_start,a.break_end);return`${s}h ${e}m`}},{name:"lunch_break",required:!0,label:"Total Lunch Break",align:"center",field:a=>{const{hours:s,minutes:e}=i.calculateTotalWorkingHours(a.lunch_break_start,a.lunch_break_end);return`${s}h ${e}m`}},{name:"total_working_hours",required:!0,label:"Work Hours",align:"center",field:a=>{const{hours:s,minutes:e}=i.calculateTotalWorkingHours(a.time_in,a.time_out);return`${s}h ${e}m`}},{name:"overtime_start",required:!0,label:"Overtime Start",align:"center",field:"overtime_start",format:i.formatTime},{name:"overtime_end",required:!0,label:"Overtime End",align:"center",field:"overtime_end",format:i.formatTime},{name:"total_overtime",required:!0,label:"OT Total Hours",align:"center",field:a=>{const{hours:s,minutes:e}=i.calculateTotalOvertimeHours(a.overtime_start,a.overtime_end);return`${s}h ${e}m`}},{name:"overtime_reason",required:!0,label:"Overtime Reason",align:"justify",field:"overtime_reason",format:a=>a||" - - - "},{name:"declined_reason",label:"Declined Reason",field:"declined_reason",format:a=>a||" - - - ",sortable:!1},{name:"ot_status",label:"OT Status",align:"center",field:a=>a.ot_status,sortable:!1},{name:"approved_by",label:"Approved By",align:"center",field:a=>i.formatFullname(a.approvedBy),sortable:!1},{name:"schedule_in",label:"Schedule In",align:"center",field:a=>a.schedule_in},{name:"schedule_out",label:"Schedule Out",align:"center",field:a=>a.schedule_out}],ye=a=>{H(a.pagination.page,a.pagination.rowsPerPage,a.filter)};return we(T,async a=>{x.value.page=1,await H(x.value.page,x.value.rowsPerPage,a)}),(a,s)=>(c(),V(K,null,[r("div",ht,[r("div",null,[t(Ee)]),t(D,{modelValue:T.value,"onUpdate:modelValue":s[0]||(s[0]=e=>T.value=e),outlined:"",dense:"",flat:"",label:"Search",debounce:"300",style:{width:"300px"}},null,8,["modelValue"])]),r("div",null,[t(Ve,{rows:f.value,columns:ge,"row-key":"time_in",pagination:x.value,"onUpdate:pagination":s[3]||(s[3]=e=>x.value=e),"rows-per-page-options":[3,5,10,0],loading:_.value,filter:T.value,onRequest:ye},{"body-cell-position":l(e=>[t(q,{props:e},{default:l(()=>{var o,g;return[t(oe,{outline:"",square:"","text-color":b(i).getBadgePositionColor((o=e.row.employee)==null?void 0:o.position),color:b(i).getBadgePositionColor((g=e.row.employee)==null?void 0:g.position),class:"q-ma-xs",size:"sm"},{default:l(()=>{var F;return[y(w(((F=e.row.employee)==null?void 0:F.position)||"N/A"),1)]}),_:2},1032,["text-color","color"])]}),_:2},1032,["props"])]),"body-cell-where_in":l(e=>[t(q,{props:e,class:"cursor-pointer"},{default:l(()=>[r("span",null,[y(w(e.row.device_in_reference_name||"N/A")+" ",1),t(R,{class:"bg-blue-grey-8"},{default:l(()=>[y("Edit Where IN")]),_:1})]),t(Q,{modelValue:e.row.device_in_reference_name,"onUpdate:modelValue":[o=>e.row.device_in_reference_name=o,o=>u(e.row,o)]},{default:l(o=>[r("div",pt,[bt,r("div",gt," Name: "+w(b(i).formatFullname(e.row.employee)),1),t(ue,{modelValue:o.value,"onUpdate:modelValue":[g=>o.value=g,g=>o.value=g],options:n.value,autofucos:"","option-label":"label","option-value":"value","emit-value":"","map-options":"",outlined:"",dense:"",counter:"",behavior:"menu","model-value":o.value,onKeyup:Y(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","options","model-value","onKeyup"]),r("div",yt,[t($,{flat:"",label:"Close",color:"primary",onClick:o.cancel},null,8,["onClick"]),t($,{flat:"",label:"Save",color:"primary",onClick:o.set},null,8,["onClick"])])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-where_out":l(e=>[t(q,{props:e,class:"cursor-pointer"},{default:l(()=>[r("span",null,[y(w(e.row.device_out_reference_name||"N/A")+" ",1),t(R,null,{default:l(()=>[y("Edit Where OUT")]),_:1})]),t(Q,{modelValue:e.row.device_out_reference_name,"onUpdate:modelValue":[o=>e.row.device_out_reference_name=o,o=>d(e.row,o)]},{default:l(o=>[r("div",kt,[wt,r("div",Vt," Name: "+w(b(i).formatFullname(e.row.employee)),1),t(ue,{modelValue:o.value,"onUpdate:modelValue":[g=>o.value=g,g=>o.value=g],options:n.value,autofucos:"","option-label":"label","option-value":"value","emit-value":"","map-options":"",outlined:"",dense:"",counter:"",behavior:"menu","model-value":o.value,onKeyup:Y(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","options","model-value","onKeyup"]),r("div",Tt,[t($,{flat:"",label:"Close",color:"primary",onClick:o.cancel},null,8,["onClick"]),t($,{flat:"",label:"Save",color:"primary",onClick:o.set},null,8,["onClick"])])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-shift_status":l(e=>[t(q,{props:e,class:"cursor-pointer"},{default:l(()=>[t(oe,{color:L(e.row.shift_status).color,"text-color":"white",dense:""},{default:l(()=>[y(w(L(e.row.shift_status).label)+" ",1),t(R,null,{default:l(()=>[y(" Edit Shift Status ")]),_:1})]),_:2},1032,["color"]),t(Q,{modelValue:e.row.shiftStatus,"onUpdate:modelValue":[o=>e.row.shiftStatus=o,o=>k(e.row,o)]},{default:l(o=>[r("div",xt,[Dt,r("div",St," Name: "+w(b(i).formatFullname(e.row.employee)),1),t(ue,{modelValue:o.value,"onUpdate:modelValue":g=>o.value=g,options:[{label:"Regular Day",value:"Regular Day"},{label:"Half Day",value:"Half Day"}],"option-label":"label","option-value":"value","emit-value":"","map-options":"",autofocus:"",outlined:"",dense:"",counter:"",behavior:"menu","model-value":o.value,onKeyup:Y(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","model-value","onKeyup"]),r("div",qt,[t($,{flat:"",label:"Close",color:"primary",onClick:o.cancel},null,8,["onClick"]),t($,{flat:"",label:"Save",color:"primary",onClick:o.set},null,8,["onClick"])])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),"body-cell-date_in":l(e=>[t(q,{props:e},{default:l(()=>[e.row.time_in?(c(),V("span",$t,w(b(i).formatDate(e.row.time_in)),1)):(c(),V("span",It," - - - ")),t(Q,{modelValue:e.row.dateOnly,"onUpdate:modelValue":o=>e.row.dateOnly=o,title:"Edit Date",buttons:"",persistent:"",onBeforeShow:o=>C(e.row.time_in,e.row),onSave:o=>E(e.row,o)},{default:l(()=>[t(fe,{modelValue:e.row._dateOnly,"onUpdate:modelValue":o=>e.row._dateOnly=o,mask:"YYYY-MM-DD"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","onBeforeShow","onSave"])]),_:2},1032,["props"])]),"body-cell-time_in":l(e=>[t(q,{props:e},{default:l(()=>[e.row.time_in?(c(),U(B,{key:0,outline:"",color:"positive"},{default:l(()=>[y(w(b(i).formatTime(e.row.time_in)),1)]),_:2},1024)):(c(),V("span",Ut," - - - ")),t(P,{name:"edit",size:"16px",color:"primary",class:"q-ml-sm cursor-pointer"},{default:l(()=>[t(Q,{modelValue:e.row.time_in,"onUpdate:modelValue":o=>e.row.time_in=o,title:"Edit Date",buttons:"",persistent:"",onSave:o=>a.updateDateOnly(e.row,o)},{default:l(()=>[t(D,{filled:"",modelValue:v.value,"onUpdate:modelValue":s[2]||(s[2]=o=>v.value=o),mask:"date",rules:["date"]},{append:l(()=>[t(P,{name:"event",class:"cursor-pointer"},{default:l(()=>[t(Te,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[t(fe,{modelValue:v.value,"onUpdate:modelValue":s[1]||(s[1]=o=>v.value=o),mask:"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-time_out":l(e=>[t(q,{props:e},{default:l(()=>[e.row.time_out?(c(),U(B,{key:0,outline:"",color:"purple-12"},{default:l(()=>[y(w(b(i).formatTime(e.row.time_out)),1)]),_:2},1024)):(c(),V("span",Ot," - - - "))]),_:2},1032,["props"])]),"body-cell-lunch_break_start":l(e=>[t(q,{props:e},{default:l(()=>[e.row.lunch_break_start?(c(),U(B,{key:0,outline:"",color:"amber-7"},{default:l(()=>[y(w(b(i).formatTime(e.row.lunch_break_start)),1)]),_:2},1024)):(c(),V("span",Ct," - - - "))]),_:2},1032,["props"])]),"body-cell-lunch_break_end":l(e=>[t(q,{props:e},{default:l(()=>[e.row.lunch_break_end?(c(),U(B,{key:0,outline:"",color:"amber-4"},{default:l(()=>[y(w(b(i).formatTime(e.row.lunch_break_end)),1)]),_:2},1024)):(c(),V("span",Nt," - - - "))]),_:2},1032,["props"])]),"body-cell-break_start":l(e=>[t(q,{props:e},{default:l(()=>[e.row.break_start?(c(),U(B,{key:0,outline:"",color:"blue-7"},{default:l(()=>[y(w(b(i).formatTime(e.row.break_start)),1)]),_:2},1024)):(c(),V("span",At," - - - "))]),_:2},1032,["props"])]),"body-cell-break_end":l(e=>[t(q,{props:e},{default:l(()=>[e.row.break_end?(c(),U(B,{key:0,outline:"",color:"blue-4"},{default:l(()=>[y(w(b(i).formatTime(e.row.break_end)),1)]),_:2},1024)):(c(),V("span",Bt," - - - "))]),_:2},1032,["props"])]),"body-cell-break":l(e=>[t(q,{props:e},{default:l(()=>[e.row.break_start&&e.row.break_end?(c(),U(B,{key:0,outline:"",color:b(i).getBreakColor(e.row.break_start,e.row.break_end),class:"q-ma-xs",size:"md"},{default:l(()=>[t(P,{name:b(i).getBreakHoursIcon(e.row.break_start,e.row.break_end),size:"xs",class:"q-mr-xs"},null,8,["name"]),y(" "+w(`${b(i).calculateTotalWorkingHours(e.row.break_start,e.row.break_end).hours} Hrs : ${b(i).calculateTotalWorkingHours(e.row.break_start,e.row.break_end).minutes} Min`),1)]),_:2},1032,["color"])):(c(),V("span",Wt," - - - "))]),_:2},1032,["props"])]),"body-cell-lunch_break":l(e=>[t(q,{props:e},{default:l(()=>[e.row.lunch_break_start&&e.row.lunch_break_end?(c(),U(B,{key:0,outline:"",color:b(i).getLunchBreakColor(e.row.lunch_break_start,e.row.lunch_break_end),class:"q-ma-xs",size:"md"},{default:l(()=>[t(P,{name:b(i).getLunchBreakIcon(e.row.lunch_break_start,e.row.lunch_break_end),size:"xs",class:"q-mr-xs"},null,8,["name"]),y(" "+w(`${b(i).calculateTotalWorkingHours(e.row.lunch_break_start,e.row.lunch_break_end).hours} Hrs : ${b(i).calculateTotalWorkingHours(e.row.lunch_break_start,e.row.lunch_break_end).minutes} Min`),1)]),_:2},1032,["color"])):(c(),V("span",Mt," - - - "))]),_:2},1032,["props"])]),"body-cell-total_working_hours":l(e=>[t(q,{props:e},{default:l(()=>[e.row.time_in&&e.row.time_out?(c(),U(B,{key:0,outline:"",color:b(i).getWorkHoursColor(e.row.time_in,e.row.time_out),class:"q-ma-xs",size:"md"},{default:l(()=>[t(P,{name:b(i).getWorkHoursIcon(e.row.time_in,e.row.time_out),size:"xs",class:"q-mr-xs"},null,8,["name"]),y(" "+w(`${b(i).calculateTotalWorkingHours(e.row.time_in,e.row.time_out).hours} Hrs : ${b(i).calculateTotalWorkingHours(e.row.time_in,e.row.time_out).minutes} Min`),1)]),_:2},1032,["color"])):(c(),V("span",Rt," - - - "))]),_:2},1032,["props"])]),"body-cell-ot_status":l(e=>[t(q,{props:e,class:"row"},{default:l(()=>[e.row.ot_status==="approved"?(c(),U(oe,{key:0,size:"sm",color:"green-1","text-color":"green-8",rounded:"",icon:"check_circle",label:b(i).capitalize(e.row.ot_status)},null,8,["label"])):e.row.ot_status==="declined"?(c(),U(oe,{key:1,size:"sm",color:"red-2","text-color":"red-14",rounded:"",icon:"cancel",label:b(i).capitalize(e.row.ot_status)},null,8,["label"])):e.row.ot_status?(c(),V("div",Ht,[t(ut,{decline:e.row},null,8,["decline"]),t(ft,{approve:e.row},null,8,["approve"])])):(c(),V("span",Et," - - - "))]),_:2},1032,["props"])]),"body-cell-overtime_reason":l(e=>[t(q,{props:e},{default:l(()=>[e.row.overtime_reason?(c(),V("span",Qt,[y(w(b(i).truncateText(e.row.overtime_reason,15))+" ",1),e.row.overtime_reason.length>15?(c(),U(R,{key:0,class:"bg-blue-grey-10 text-white text-subtitle1",offset:[10,10]},{default:l(()=>[y(w(e.row.overtime_reason),1)]),_:2},1024)):ie("",!0)])):(c(),V("span",Pt," - - - "))]),_:2},1032,["props"])]),"body-cell-declined_reason":l(e=>[t(q,{props:e},{default:l(()=>[e.row.declined_reason?(c(),V("span",zt,[y(w(b(i).truncateText(e.row.declined_reason,15))+" ",1),e.row.declined_reason.length>15?(c(),U(R,{key:0,class:"bg-blue-grey-10 text-white text-subtitle1",offset:[10,10]},{default:l(()=>[y(w(e.row.declined_reason),1)]),_:2},1024)):ie("",!0)])):(c(),V("span",Lt," - - - "))]),_:2},1032,["props"])]),"body-cell-schedule_in":l(e=>[t(q,{props:e},{default:l(()=>[r("div",{class:_e({"editable-cell":e.row.schedule_in})},[y(w(e.row.schedule_in||"N/A")+" ",1),t(R,{class:"bg-blue-grey-8",offset:[10,10]},{default:l(()=>[y(" Edit Schedule In ")]),_:1})],2),t(Q,{"onUpdate:modelValue":[o=>z(e.row,o),o=>e.row.schedule_in=o],modelValue:e.row.schedule_in,buttons:"",title:"Edit Employee Schedule In"},{default:l(o=>[t(D,{modelValue:o.value,"onUpdate:modelValue":[g=>o.value=g,g=>o.value=g],"model-value":o.value,dense:"",autofocus:"",mask:"##:## AA",rules:[p],hint:"Format: 01:00 AM/PM",onKeyup:Y(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","model-value","rules","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-schedule_out":l(e=>[t(q,{props:e},{default:l(()=>[r("div",{class:_e({"editable-cell":e.row.schedule_out})},[y(w(e.row.schedule_out||"N/A")+" ",1),t(R,{class:"bg-blue-grey-8",offset:[10,10]},{default:l(()=>[y(" Edit Schedule Out ")]),_:1})],2),t(Q,{"onUpdate:modelValue":[o=>M(e.row,o),o=>e.row.schedule_out=o],modelValue:e.row.schedule_out,buttons:"",title:"Edit Employee Schedule Out"},{default:l(o=>[t(D,{modelValue:o.value,"onUpdate:modelValue":[g=>o.value=g,g=>o.value=g],"model-value":o.value,dense:"",autofocus:"",mask:"##:## AA",rules:[p],hint:"Format: 01:00 AM/PM",onKeyup:Y(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","model-value","rules","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-action":l(e=>[t(q,{props:e},{default:l(()=>[r("div",Ft,[t(at,{edit:e},null,8,["edit"])])]),_:2},1032,["props"])]),loading:l(()=>[t(De,{showing:""},{default:l(()=>[t(xe,{size:"50px",color:"grey-10"})]),_:1})]),_:1},8,["rows","pagination","loading","filter"])])],64))}};var kl=te(jt,[["__scopeId","data-v-25cb3e8e"]]);export{kl as default};
