import{o as _,e as I,M as C,r as B,a3 as h,J as e,f as a,w as n,Q as N,I as f,$ as c,a0 as v,a4 as M,a5 as $,a2 as L,O as T,R as V,c as Q,z as Y,K as z,L as F}from"./index.a7cc3e75.js";import{_ as R}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as k,a as U}from"./QTable.490042bd.js";import{Q as j}from"./QBadge.c7dd9eed.js";import{u as A}from"./cake-maker-report.dad22e9c.js";import{Q as P}from"./QChip.966808d3.js";import{q as S}from"./date.21d6a407.js";import"./QVirtualScroll.f9e192f7.js";import"./QList.2c3f6159.js";import"./use-virtual-scroll.6cd20cd8.js";import"./rtl.276c3f1b.js";import"./QSelect.0a285116.js";import"./QMenu.66fff507.js";import"./position-engine.aa9b76a9.js";import"./selection.b947d99c.js";import"./axios.cbe885ee.js";const O={};function E(o,d){return _(),I(C,{class:"q-pa-sm",color:"red-6",dense:"",elevated:"",icon:"add_circle",label:"Create Report",to:"/branch/cake_maker/create_report"})}var H=R(O,[["render",E]]);const m=o=>(T("data-v-5029735a"),o=o(),V(),o),J={class:"text-h6 text-weight-regular"},K={class:"row justify-between"},G={class:"row q-gutter-x-sm"},W=m(()=>e("div",{class:"text-subtitle2"},"Date:",-1)),X={class:"text-body1 text-weight-light"},Z={class:"row q-gutter-x-sm"},ee=m(()=>e("div",{class:"text-subtitle2"},"Branch:",-1)),te={class:"text-body1 text-weight-light"},ae={class:"row q-gutter-x-sm"},re=m(()=>e("div",{class:"text-subtitle2"},"Cake Maker:",-1)),oe={class:"text-body1 text-weight-light"},se={class:"row q-mt-sm item-start q-gutter-x-xl"},ne={class:"row q-gutter-x-sm text-overline"},ie=m(()=>e("div",null,"Price:",-1)),le={class:"text-weight-light"},ce={class:"row q-gutter-x-sm text-overline"},de=m(()=>e("div",null,"Layer /s:",-1)),ue={class:"text-weight-light"},me=m(()=>e("div",null,[e("h6",{class:"text-center"},"Ingredients")],-1)),_e=m(()=>e("div",{class:"row justify-between"},[e("div",null,[e("div",{align:"center"},"Raw Materials Name / Code")]),e("div",null,[e("div",{align:"center"},"Quantity")])],-1)),pe={class:"row justify-between"},fe={__name:"ViewReportTable",props:{report:{type:Object,required:!0}},setup(o){const d=B(!1);console.log("Cake maker reportss",o.report);const w=()=>{d.value=!0},q=t=>S.formatDate(t,"MMMM D, YYYY"),p=t=>t?t.split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join(" "):"",b=t=>{const i=s=>s?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():"",l=t.firstname?i(t.firstname):"No Firstname",r=t.middlename?i(t.middlename).charAt(0)+".":"",u=t.lastname?i(t.lastname):"No lastname";return`${l} ${r} ${u}`},D=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(t),x=t=>{switch(t){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},y=t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();return(t,i)=>(_(),h(M,null,[e("div",null,[a(C,{color:"accent",icon:"visibility",size:"md",flat:"",round:"",dense:"",onClick:w})]),a(L,{modelValue:d.value,"onUpdate:modelValue":i[1]||(i[1]=l=>d.value=l)},{default:n(()=>[a(N,{class:"report-card"},{default:n(()=>[a(f,{class:"report-header"},{default:n(()=>[e("div",J,c(p(o.report.name)),1),e("div",null,[a(C,{color:"grey-8",flat:"",round:"",dense:"",icon:"close",onClick:i[0]||(i[0]=l=>d.value=!1)})])]),_:1}),a(f,null,{default:n(()=>[e("div",K,[e("div",null,[e("div",G,[W,e("div",X,c(q(o.report.created_at)),1)]),e("div",Z,[ee,e("div",te,c(p(o.report.branch.name)),1)]),e("div",ae,[re,e("div",oe,c(b(o.report.user.employee)),1)])]),e("div",null,[a(P,{square:"",color:x(o.report.confirmation_status),"text-color":"white"},{default:n(()=>[v(c(y(o.report.confirmation_status)),1)]),_:1},8,["color"])])]),e("div",se,[e("div",ne,[ie,e("div",le,c(D(o.report.price)),1)]),e("div",ce,[de,e("div",ue,c(o.report.layers),1)])]),me,e("div",null,[_e,(_(!0),h(M,null,$(o.report.cake_ingredient_reports,l=>{var r,u;return _(),h("div",{key:l},[e("div",pe,[e("div",null,[e("div",null,c(((u=(r=l.branch_raw_materials_reports)==null?void 0:r.ingredients)==null?void 0:u.code)||"No data"),1)]),e("div",null,[e("div",null,c(l.quantity)+" "+c(l.unit),1)])])])}),128))])]),_:1}),a(f)]),_:1})]),_:1},8,["modelValue"])],64))}};var he=R(fe,[["__scopeId","data-v-5029735a"]]);const ve={class:"q-mt-sm q-gutter-md"},ge={__name:"ReportTable",setup(o){var i,l;const d=A(),g=localStorage.getItem("branch_id");console.log("branchId",g);const w=Q(()=>d.cakeMakerReports),p=((l=(i=Q(()=>d.user).value)==null?void 0:i.data)==null?void 0:l.id)||"";Y(async()=>{p&&await b(p)});const b=async r=>{console.log("user_id",r);try{const u=await d.fetchCakeReport(r)}catch{}},x=[{name:"date",label:"Date",align:"left",format:r=>S.formatDate(r,"MMMM D, YYYY"),field:"created_at"},{name:"branchName",label:"Branch Name",align:"center",field:r=>r.branch.name},{name:"cakeName",label:"Cake Name",align:"center",field:"name"},{name:"confirmation_status",label:"Status",align:"center",field:"confirmation_status"},{name:"view",label:"View",align:"center",field:"created_at"}],y=r=>{switch(r){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},t=r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase();return(r,u)=>(_(),h("div",ve,[e("div",null,[a(z,{rounded:"",outlined:"",dense:"",debounce:"300",placeholder:"Search",style:{width:"500px","max-width":"1500px","min-width":"100px"}})]),a(U,{class:"sticky-header",flat:"",columns:x,rows:w.value,"virtual-scroll-sticky-size-start":48,"virtual-scroll":"",pagination:r.pagination,"onUpdate:pagination":u[0]||(u[0]=s=>r.pagination=s),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-branchName":n(s=>[a(k,{props:s},{default:n(()=>[v(c(t(s.row.branch.name)),1)]),_:2},1032,["props"])]),"body-cell-confirmation_status":n(s=>[a(k,{props:s},{default:n(()=>[a(j,{outlined:"",color:y(s.row.confirmation_status)},{default:n(()=>[v(c(t(s.row.confirmation_status)),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-view":n(s=>[a(k,{props:s},{default:n(()=>[e("div",null,[a(he,{report:s.row},null,8,["report"])])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])]))}};var we=R(ge,[["__scopeId","data-v-42387d07"]]);const be={class:"text-h6 text-white"},xe={align:"right"},Ye={__name:"ReportPage",setup(o){return(d,g)=>(_(),I(N,{flat:""},{default:n(()=>[a(f,{style:{"background-color":"#ef4444"}},{default:n(()=>[e("div",be,[a(F,{name:"fa-solid fa-layer-group"}),v(" Report ")])]),_:1}),a(f,{class:"q-gutter-y-lg"},{default:n(()=>[e("div",xe,[a(H)]),e("div",null,[a(we)])]),_:1})]),_:1}))}};export{Ye as default};
