import{d,r as i,c as M,P as c,N as n}from"./index.731fa509.js";import{api as r}from"./axios.3cfbb276.js";import{u as R}from"./raw-material.4d9402ab.js";const N=d("branchRawMaterial",()=>{const l=i(null),t=i([]),o=i([]),w=R(),h=M(()=>w.rawMaterials);return{branchId:o,branchRawMaterial:l,branchRawMaterials:t,fetchBranchRawMaterials:async e=>{const a=await r.get(`/api/branch/${e}/rawMaterials`);t.value=a.data},createBranchRawMaterials:async e=>{c.show();try{const a=await r.post("/api/branch-raw-materials",e);if(a.data.message==="Branch Raw Materials saved successfully"){const s=h.value.find(u=>u.id===e.ingredients_id),p={...a.data,ingredients:s||{name:"No Name",code:"Unknown"},total_quantity:e.total_quantity};t.value.unshift(p),n.create({type:"positive",message:"Branch Raw Materials saved successfully",position:"top"})}else a.data.message==="The RawMaterials already exists in this branch."&&n.create({type:"warning",message:"The Raw Materials already exists in this branch.",position:"top"})}catch(a){console.log(a),n.create({type:"negative",message:"An error occurred while saving the branch product.",position:"top"})}finally{c.hide()}},updateBranchRawMaterials:async e=>{await r.put(`/api/update-branch-products/${e}`,{price:newPrice});const a=t.value.findIndex(s=>s.id===e);a!==-1&&(t.value[a].price=newPrice)},deleteBranchRawMaterials:async e=>{await r.delete(`/api/branch-raw-materials/${e}`),t.value=t.value.filter(a=>a.id!==e)},createMultipleBranchRawMaterials:async e=>{try{const a=await r.post("/api/branch/raw-materials/bulk-create",{materials:e});console.log(a)}catch{}}}});export{N as u};
