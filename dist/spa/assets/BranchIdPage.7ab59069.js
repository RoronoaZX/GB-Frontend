import{d as Ge,r as R,h as A,P as De,N as le,bd as he,t as Be,o as f,a2 as q,e,M as D,w as t,Q as O,I as S,ad as Y,J as a,K as j,L as se,c as H,$ as V,a3 as K,a4 as me,_ as y,bc as Me,aI as Ce,a1 as G,a0 as Pe,O as ee,R as te,z as qe,u as Ie,ba as ke,aJ as nt,be as U,aH as st,H as rt}from"./index.43ba8d7d.js";import{Q as Se}from"./QSpace.70e4c738.js";import{Q as We,a as xe,b as Je,c as $e}from"./QTabPanels.8be17816.js";import{Q as it}from"./QPage.9a02bdd7.js";import{Q as ge,a as ve}from"./QItem.0bb79e47.js";import{a as Te}from"./rtl.b453c55a.js";import{Q as Ue}from"./QList.7f7545e9.js";import{C as W}from"./ClosePopup.02ad92c5.js";import{api as ne}from"./axios.d49441bc.js";import{u as Le}from"./product.29b7cb6f.js";import{Q as He}from"./QSpinnerDots.541548aa.js";import{Q as I}from"./QTd.c292be7e.js";import{Q as ie}from"./QBadge.679c213a.js";import{Q as E}from"./QTooltip.6ba9f708.js";import{Q as Re}from"./QPopupEdit.af661a43.js";import{Q as de}from"./QTable.96cdbb52.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";import{u as ze}from"./branch-rawMaterials.ff6c0e91.js";import{u as Xe}from"./raw-material.181c243e.js";import{u as fe}from"./use-dialog-plugin-component.f5aa5e4f.js";import{q as Oe}from"./date.a18c5465.js";import{p as Ne,v as Ze}from"./vfs_fontes.3eb8cb31.js";import{u as Ve}from"./use-quasar.7709e763.js";import{Q as Ae}from"./QSelect.75c42488.js";import{Q as Ye}from"./QChip.2c91b92d.js";import{u as dt}from"./recipe.f2326a61.js";import{u as Qe}from"./branch-recipe.9a5b79e2.js";import"./QResizeObserver.565a78c7.js";import"./use-panel.d79cef20.js";import"./touch.9135741d.js";import"./selection.1f2cf681.js";import"./QMenu.c2953d76.js";import"./QVirtualScroll.9ab3b00c.js";import"./use-virtual-scroll.b883a173.js";const je=Ge("branchProducts",()=>{const d=R(null),v=R([]),x=R([]),P=Le(),b=A(()=>P.products);return console.log("Branch PRoductssss:",b.value),{branchId:x,branchProduct:d,branchProducts:v,fetchBranchProducts:async g=>{const m=await ne.get(`/api/branches/${g}/products`);v.value=m.data},createBranchProducts:async g=>{De.show();try{const{category:m,price:l}=g,n=await ne.post("/api/branch-products",g);if(n.data.message==="Branch product saved successfully"){const o=b.value.find(w=>w.id===g.product_id),i={...n.data,category:m||"No Category",price:l?parseInt(l):0,product:o||{name:"No Product",category:"Unknown"},total_quantity:g.total_quantity};v.value.unshift(i),le.create({type:"positive",message:"Branch product saved successfully",position:"top"})}else n.data.message==="The product already exists in this branch."&&le.create({type:"warning",message:"The product already exists in this branch.",position:"top"})}catch{le.create({type:"negative",message:"An error occurred while saving the branch product.",position:"top"})}finally{De.hide()}},updateBranchProductPrice:async g=>{await ne.put(`/api/update-branch-products/${g}`,{price:newPrice});const m=v.value.findIndex(l=>l.id===g);m!==-1&&(v.value[m].price=newPrice)},deleteBranchProducts:async g=>{await ne.delete(`/api/branch-products/${g}`),v.value=v.value.filter(m=>m.id!==g)}}}),ct=a("div",{class:"text-h6"},"Create Branch Product",-1),ut={class:"q-mb-lg"},pt={key:0,class:"custom-list z-top"},mt=a("div",null,"Product Name",-1),_t=a("div",null,"Category",-1),gt={class:"row justify-between"},ft=a("div",null,"Beginnings",-1),yt=a("div",null,"Total Quantity",-1),vt=a("div",null,"Price",-1),ht={__name:"ProductCreate",setup(d){const v=he(),x=Le(),P=A(()=>x.products),b=je(),c=R(""),_=async()=>{x.searchProducts(c.value)},k=A(()=>o.price!==0&&o.beginnings!==0&&o.total_quantity!==0),$=R(!1),g=()=>{$.value=!0},m=()=>{i(),$.value=!1},l=u=>u?u.split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join(" "):"",n=u=>{o.product_id=u.id,o.product_name=u.name,o.category=u.category,c.value=""},o=Be({product_id:"",product_name:"",price:0,beginnings:0,total_quantity:0,branches_id:v.params.branch_id}),i=()=>{o.product_id="",o.product_name="",o.category="",o.price=0,o.beginnings=0,o.total_quantity=0},w=async()=>{try{const{product_name:u,...r}=o;await b.createBranchProducts(r),console.log("data to send",r),i(),$.value=!1}catch(u){console.log(u)}};return(u,r)=>(f(),q(K,null,[e(D,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Product",onClick:g}),e(G,{modelValue:$.value,"onUpdate:modelValue":r[6]||(r[6]=s=>$.value=s),persistent:""},{default:t(()=>[e(O,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(S,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[ct,e(Se),Y(e(D,{icon:"close",flat:"",dense:"",round:""},null,512),[[W]])]),_:1}),e(S,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",ut,[e(j,{modelValue:c.value,"onUpdate:modelValue":[r[0]||(r[0]=s=>c.value=s),_],debounce:"1000",outlined:"",rounded:"",placeholder:"Search product",dense:""},{append:t(()=>[a("div",null,[e(se,{name:"search"})])]),default:t(()=>[c.value?(f(),q("div",pt,[e(O,null,{default:t(()=>[e(Ue,{separator:""},{default:t(()=>{var s;return[(s=P.value)!=null&&s.length?(f(!0),q(K,{key:1},me(P.value,h=>(f(),H(ge,{onClick:p=>n(h),key:h.id,clickable:""},{default:t(()=>[e(ve,null,{default:t(()=>[e(Te,null,{default:t(()=>[V(y(l(h.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(f(),H(ge,{key:0},{default:t(()=>[V(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Me("",!0)]),_:1},8,["modelValue"])]),a("div",null,[mt,e(j,{modelValue:o.product_name,"onUpdate:modelValue":r[1]||(r[1]=s=>o.product_name=s),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[_t,e(j,{modelValue:o.category,"onUpdate:modelValue":r[2]||(r[2]=s=>o.category=s),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",gt,[a("div",null,[ft,e(j,{modelValue:o.beginnings,"onUpdate:modelValue":r[3]||(r[3]=s=>o.beginnings=s),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])]),a("div",null,[yt,e(j,{modelValue:o.total_quantity,"onUpdate:modelValue":r[4]||(r[4]=s=>o.total_quantity=s),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])]),a("div",null,[vt,e(j,{modelValue:o.price,"onUpdate:modelValue":r[5]||(r[5]=s=>o.price=s),mask:"#####",outlined:"",dense:"",style:{width:"150px"}},null,8,["modelValue"])])]),_:1}),e(Ce,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(D,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:m}),e(D,{class:"glossy",color:"teal",label:"Create",onClick:w,disable:!k.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const et=d=>(ee("data-v-196482e9"),d=d(),te(),d),bt=et(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),wt=et(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),xt={__name:"ProductDelete",props:["delete"],setup(d){const v=je(),x=d;console.log("delte",x.delete.row.id);const P=async()=>{try{await v.deleteBranchProducts(x.delete.row.id),le.create({type:"negative",icon:"warning",message:"Branch product successfully deleted",timeout:1e3,position:"top"}),b.value=!1}catch(_){console.error(_.message)}},b=R(!1),c=()=>{console.log("ID",x.delete.row.id),b.value=!0};return(_,k)=>(f(),q(K,null,[e(D,{onClick:c,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"",align:"center"},{default:t(()=>[e(E,{class:"bg-negative",delay:200},{default:t(()=>[V("Delete")]),_:1})]),_:1}),e(G,{modelValue:b.value,"onUpdate:modelValue":k[0]||(k[0]=$=>b.value=$)},{default:t(()=>[e(O,null,{default:t(()=>[e(S,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[bt,wt]),_:1}),e(Pe,{class:"q-mb-md"}),e(S,null,{default:t(()=>[e(Ce,{align:"right",class:"q-pt-none"},{default:t(()=>[Y(e(D,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[W]]),e(D,{dense:"",label:"Delete",color:"negative",onClick:P,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var $t=J(xt,[["__scopeId","data-v-196482e9"]]);const kt=d=>(ee("data-v-592d46f2"),d=d(),te(),d),Ct={class:"row justify-between"},Pt={class:"q-my-sm"},Rt={key:0,class:"spinner-wrapper"},qt={key:1},St={key:0,class:"data-error"},Vt=kt(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Dt={key:1},Bt={__name:"ProductTable",setup(d){const x=he().params.branch_id,P=je(),b=R(""),c=R(!0),_=R([]),k=R(!1),$=R({rowsPerPage:0}),g=A(()=>P.branchProducts);console.log("branchssdfrer",g.value);const m=A(()=>b.value?g.value.filter(s=>s.name.toLowerCase().includes(b.value.toLowerCase())):g.value),l=s=>s?s.split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1).toLowerCase()).join(" "):"";qe(async()=>{x&&await n(x)});const n=async s=>{try{c.value=!0;const h=await P.fetchBranchProducts(s);g.value=h,g.value.length||(k.value=!0),console.log("Branch product",g.value)}catch(h){console.log("Error fetching branch product:",h),k.value=!0}finally{c.value=!1}};Ie(b,async s=>{c.value=!0,await new Promise(h=>setTimeout(h,1e3)),c.value=!1,k.value=m.value.length===0});async function o(s,h){try{const p=await ne.put("/api/update-branch-products/"+s.id,{price:parseInt(h)});if(p.status===200){const C=_.value.findIndex(B=>B.id==s.id);_.value[C]=parseInt(h),le.create({type:"positive",message:p.data.message,timout:1e3,position:"top"})}}catch(p){console.error("Error updating price:",p)}}async function i(s,h){try{const p=await ne.put("/api/update-branch-products-total-quantity/"+s.id,{total_quantity:parseInt(h)});if(p.status===200){const C=_.value.findIndex(B=>B.id==s.id);_.value[C]=parseInt(h),le.create({type:"positive",message:p.data.message,timout:1e3,position:"top"})}}catch(p){console.error("Error updating price:",p)}}const w=s=>{switch(s){case"Bread":return"brown";case"Selecta":return"red-6";case"Softdrinks":return"accent";default:return"grey"}},u=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(s),r=[{name:"name",label:"Product Name",align:"center",field:s=>s.product.name,format:s=>`${s}`,sortable:!0},{name:"category",align:"center",label:"Category",field:"category",sortable:!0},{name:"price",align:"center",label:"Price",field:s=>u(s),sortable:!0},{name:"total_quantity",align:"center",label:"Quantity",field:"total_quantity",format:s=>`${s} pcs`,sortable:!0},{name:"action",align:"center",label:"Action",field:"action",sortable:!0}];return(s,h)=>(f(),q(K,null,[a("div",Ct,[a("div",null,[e(j,{class:"q-pb-lg q-pl-md",modelValue:b.value,"onUpdate:modelValue":h[0]||(h[0]=p=>b.value=p),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"1500px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(se,{name:"search"})]),_:1},8,["modelValue"])]),a("div",Pt,[e(ht)])]),c.value?(f(),q("div",Rt,[e(He,{size:"50px",color:"primary"})])):(f(),q("div",qt,[m.value.length===0?(f(),q("div",St,[e(se,{name:"warning",color:"warning",size:"4em"}),Vt])):(f(),H(de,{key:1,class:"table-container sticky-header",filter:b.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:r,rows:m.value,"row-key":"name","virtual-scroll":"",pagination:$.value,"onUpdate:pagination":h[1]||(h[1]=p=>$.value=p),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"}},{"body-cell-name":t(p=>[e(I,{key:"name",props:p},{default:t(()=>{var C;return[V(y((C=p.row.product)!=null&&C.name?l(p.row.product.name):"No data available"),1)]}),_:2},1032,["props"])]),"body-cell-category":t(p=>[e(I,{key:"name",props:p},{default:t(()=>[p.row.category?(f(),H(ie,{key:0,color:w(p.row.category)},{default:t(()=>[V(y(p.row.category),1)]),_:2},1032,["color"])):(f(),q("span",Dt,"No data available"))]),_:2},1032,["props"])]),"body-cell-price":t(p=>[e(I,{props:p,class:"cursor-pointer"},{default:t(()=>[a("span",null,[V(y(u(p.row.price))+" ",1),e(E,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[V("Edit Price")]),_:1})]),e(Re,{"onUpdate:modelValue":[C=>o(p.row,C),C=>p.row.price=C],modelValue:p.row.price,"auto-save":""},{default:t(C=>[e(j,{modelValue:C.value,"onUpdate:modelValue":B=>C.value=B,dense:"",mask:"#####",autofocus:"",counter:"",onKeyup:ke(C.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-total_quantity":t(p=>[e(I,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[V(y(p.row.total_quantity?p.row.total_quantity:"Set Quantity")+" ",1),e(E,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[V("Edit quantity")]),_:1})]),e(Re,{"onUpdate:modelValue":[C=>i(p.row,C),C=>p.row.total_quantity=C],modelValue:p.row.total_quantity,"auto-save":""},{default:t(C=>[e(j,{modelValue:C.value,"onUpdate:modelValue":B=>C.value=B,dense:"",autofocus:"",counter:"",mask:"###",onKeyup:ke(C.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-action":t(p=>[e(I,{class:"q-gutter-x-md",props:p},{default:t(()=>[e($t,{delete:p},null,8,["delete"])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Tt=J(Bt,[["__scopeId","data-v-592d46f2"]]);const Ut={class:"q-gutter-sm"},Nt={__name:"ProductPage",setup(d){return(v,x)=>(f(),q("div",Ut,[a("div",null,[e(Tt)])]))}},It=a("div",{class:"text-h6"},"Create Branch Raw Materials",-1),Ht={class:"q-mb-lg"},Ft={key:0,class:"custom-list z-top"},At=a("div",null,"Raw Materials Code",-1),Mt=a("div",null,"Raw Materials Name",-1),Lt=a("div",null,"Category",-1),zt=a("div",null,"Quantity",-1),Ot={__name:"RawMaterialsCreate",setup(d){const v=he(),x=Xe(),P=A(()=>x.rawMaterials),b=ze(),c=R(""),_=async()=>{x.searchRawMaterials(c.value)},k=A(()=>n.total_quantity!==""),$=R(!1),g=()=>{$.value=!0},m=()=>{o(),$.value=!1},l=w=>{n.ingredients_id=w.id,n.ingredient_name=w.name,n.ingredient_code=w.code,n.category=w.category,n.unit=w.unit,c.value=""},n=Be({ingredients_id:"",ingredient_name:"",ingredient_code:"",total_quantity:"",category:"",unit:"",branch_id:v.params.branch_id}),o=()=>{n.ingredients_id="",n.ingredient_name="",n.ingredient_code="",n.total_quantity="",n.ingredients_id="",n.category="",n.unit=""},i=async()=>{try{const{product_name:w,...u}=n;await b.createBranchRawMaterials(u),console.log("data to send",u),o(),$.value=!1}catch(w){console.log(w)}};return(w,u)=>(f(),q(K,null,[e(D,{outline:"",class:"text-dark q-pa-sm",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Raw Material",onClick:g,style:{background:"#f43f5e"}}),e(G,{modelValue:$.value,"onUpdate:modelValue":u[5]||(u[5]=r=>$.value=r),persistent:""},{default:t(()=>[e(O,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(S,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[It,e(Se),Y(e(D,{icon:"close",flat:"",dense:"",round:""},null,512),[[W]])]),_:1}),e(S,{class:"q-ma-md q-gutter-y-sm"},{default:t(()=>[a("div",Ht,[e(j,{modelValue:c.value,"onUpdate:modelValue":[u[0]||(u[0]=r=>c.value=r),_],debounce:"1000",outlined:"",rounded:"",placeholder:"Search Raw Materials",dense:""},{append:t(()=>[a("div",null,[e(se,{name:"search"})])]),default:t(()=>[c.value?(f(),q("div",Ft,[e(O,null,{default:t(()=>[e(Ue,{separator:""},{default:t(()=>{var r;return[(r=P.value)!=null&&r.length?(f(!0),q(K,{key:1},me(P.value,s=>(f(),H(ge,{onClick:h=>l(s),key:s.id,clickable:""},{default:t(()=>[e(ve,null,{default:t(()=>[e(Te,null,{default:t(()=>[V(y(s.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(f(),H(ge,{key:0},{default:t(()=>[V(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Me("",!0)]),_:1},8,["modelValue"])]),a("div",null,[At,e(j,{modelValue:n.ingredient_code,"onUpdate:modelValue":u[1]||(u[1]=r=>n.ingredient_code=r),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[Mt,e(j,{modelValue:n.ingredient_name,"onUpdate:modelValue":u[2]||(u[2]=r=>n.ingredient_name=r),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[Lt,e(j,{modelValue:n.category,"onUpdate:modelValue":u[3]||(u[3]=r=>n.category=r),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[zt,e(j,{modelValue:n.total_quantity,"onUpdate:modelValue":u[4]||(u[4]=r=>n.total_quantity=r),type:"number",outlined:"",suffix:n.unit||"",dense:"",rules:[r=>r&&r.length>0||"Total quantity is required"]},null,8,["modelValue","suffix","rules"])])]),_:1}),e(Ce,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(D,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:m}),e(D,{class:"glossy",color:"teal",label:"Create",onClick:i,disable:!k.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};const tt=d=>(ee("data-v-17ad5e9f"),d=d(),te(),d),Qt=tt(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),jt=tt(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),Et={__name:"RawMaterialsTableDelete",props:["delete"],setup(d){const v=ze(),x=d,P=async()=>{console.log("clickkkd");try{await v.deleteBranchRawMaterials(x.delete.row.id),le.create({type:"negative",icon:"warning",message:`Raw Materials ${x.delete.row.name}  successfully deleted`,timeout:1e3,position:"top"}),b.value=!1}catch(_){console.error(_.message)}},b=R(!1),c=()=>{b.value=!0};return(_,k)=>(f(),q(K,null,[e(D,{onClick:c,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"",align:"center"},{default:t(()=>[e(E,{class:"bg-negative",delay:200},{default:t(()=>[V("Delete")]),_:1})]),_:1}),e(G,{modelValue:b.value,"onUpdate:modelValue":k[0]||(k[0]=$=>b.value=$)},{default:t(()=>[e(O,null,{default:t(()=>[e(S,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[Qt,jt]),_:1}),e(Pe,{class:"q-mb-md"}),e(S,null,{default:t(()=>[e(Ce,{align:"right",class:"q-pt-none"},{default:t(()=>[Y(e(D,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[W]]),e(D,{dense:"",label:"Delete",color:"negative",onClick:P,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Kt=J(Et,[["__scopeId","data-v-17ad5e9f"]]);const at=d=>(ee("data-v-74a3fea6"),d=d(),te(),d),Yt={class:"row justify-between"},Gt={class:"q-my-sm"},Wt={key:0,class:"spinner-wrapper"},Jt={key:1},Xt={key:0,class:"data-error"},Zt=at(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),ea=at(()=>a("div",{class:"text-white"},"Edit Available Stocks",-1)),ta={class:"row justify-center q-gutter-x-md"},aa={__name:"RawMaterialsTable",setup(d){const x=he().params.branch_id,P=ze(),b=R(""),c=R(!0),_=R([]),k=R(!1),$=R({rowsPerPage:0}),g=A(()=>P.branchRawMaterials),m=A(()=>b.value?g.value.filter(u=>u.name.toLowerCase().includes(b.value.toLowerCase())):g.value);qe(async()=>{console.log("props.branchId in onMounted:",x),x&&await l(x)});const l=async u=>{try{c.value=!0;const r=await P.fetchBranchRawMaterials(u);g.value=r,g.value.length||(k.value=!0),console.log("Branch Raw Materials",g.value)}catch(r){console.log("Error fetching branch product:",r),k.value=!0}finally{c.value=!1}};async function n(u,r){try{const s=await ne.put("/api/update-branch-rawMaterials/"+u.id,{total_quantity:parseInt(r)});if(s.status===200){const h=_.value.findIndex(p=>p.id==u.id);_.value[h]=parseInt(r),le.create({type:"positive",message:s.data.message,timout:1e3,position:"top"})}}catch(s){console.error("Error updating price:",s)}}Ie(b,async u=>{c.value=!0,await new Promise(r=>setTimeout(r,1e3)),c.value=!1,k.value=m.value.length===0});const o=u=>{const r=u.total_quantity;if(u.ingredients.unit==="Grams"&&r<1e3)return"bg-red";let h;return r>=1e3?h=r/1e3:h=r,h<5?h<=2?"bg-red":(h<=3,"bg-warning"):"bg-positive"},i=u=>{const r=u.total_quantity,s=u.ingredients.unit;if(r>1e3){const h=(r/1e3).toFixed(2);return h.endsWith(".00")?`${Math.round(r/1e3)} kilos`:`${h} kilos`}else return r>1?`${r} ${s}`:`${r} ${s}`},w=[{name:"code",label:"Raw Materials Code",align:"center",field:u=>{var r,s;return(s=(r=u==null?void 0:u.ingredients)==null?void 0:r.code)!=null?s:"No Code"},format:u=>`${u}`,sortable:!0},{name:"name",label:"Raw Materials Name",align:"center",field:u=>{var r,s;return(s=(r=u==null?void 0:u.ingredients)==null?void 0:r.name)!=null?s:"No Code"},format:u=>`${u}`,sortable:!0},{name:"total_quantity",label:"Available Stocks",align:"center",field:"total_quantity",sortable:!0},{name:"action",label:"Action",align:"center",sortable:!0}];return(u,r)=>(f(),q(K,null,[a("div",Yt,[a("div",null,[e(j,{class:"q-pb-lg q-pl-md",modelValue:b.value,"onUpdate:modelValue":r[0]||(r[0]=s=>b.value=s),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"5000px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(se,{name:"search"})]),_:1},8,["modelValue"])]),a("div",Gt,[e(Ot)])]),c.value?(f(),q("div",Wt,[e(He,{size:"50px",color:"primary"})])):(f(),q("div",Jt,[m.value.length===0?(f(),q("div",Xt,[e(se,{name:"warning",color:"warning",size:"4em"}),Zt])):(f(),H(de,{key:1,class:"table-container sticky-header",filter:b.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:w,rows:m.value,"row-key":"name","virtual-scroll":"",pagination:$.value,"onUpdate:pagination":r[1]||(r[1]=s=>$.value=s),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"340px"}},{"body-cell-total_quantity":t(s=>[e(I,{props:s},{default:t(()=>[e(ie,{square:"",class:nt(["text-white cursor-pointer",o(s.row)])},{default:t(()=>[V(y(i(s.row))+" ",1),e(E,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[ea]),_:1}),e(Re,{"onUpdate:modelValue":[h=>n(s.row,h),h=>s.row.total_quantity=h],modelValue:s.row.total_quantity,"auto-save":""},{default:t(h=>[e(j,{modelValue:h.value,"onUpdate:modelValue":p=>h.value=p,dense:"",suffix:s.row.ingredients.unit,mask:"########",autofocus:"",counter:"",onKeyup:ke(h.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","suffix","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["class"])]),_:2},1032,["props"])]),"body-cell-action":t(s=>[e(I,{props:s},{default:t(()=>[a("div",ta,[e(Kt,{delete:s},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var la=J(aa,[["__scopeId","data-v-74a3fea6"]]);const oa={class:"q-gutter-sm"},na={class:"q-gutter-x-sm"},sa={__name:"RawMaterialsPage",setup(d){return(v,x)=>(f(),q("div",oa,[a("div",na,[e(ie,{label:"Good",class:"text-white",color:"positive"}),e(ie,{label:"Warning",class:"text-white",color:"warning"}),e(ie,{label:"Danger",class:"text-white",color:"red"})]),a("div",null,[e(la)])]))}};const Ee=d=>(ee("data-v-239e42ee"),d=d(),te(),d),ra=Ee(()=>a("div",{class:"row justify-between"},[a("div",{class:"text-h6"},"Baker Report")],-1)),ia={class:"text-subtitle1 text-weight-regular"},da={class:"row q-gutter-md"},ca={class:"text-h6 row justify-between"},ua={class:"row items-start q-gutter-x-md text-overline elegant-text"},pa={class:"row q-gutter-x-sm q-gutter-y-xm"},ma={class:"row q-gutter-x-sm q-gutter-y-xm"},_a={class:"row q-gutter-x-sm"},ga={class:"row q-gutter-x-sm"},fa={class:"row"},ya={class:"col-6"},va=Ee(()=>a("div",{class:"text-subtitle1",align:"center"},"Ingredients",-1)),ha={class:"row justify-center q-gutter-x-lg q-pa-lg"},ba={class:"row items-start"},wa={class:"col-6"},xa=Ee(()=>a("div",{class:"text-subtitle1",align:"center"},"Bread",-1)),$a={class:"row justify-center q-gutter-x-lg q-pa-lg"},ka={key:0},Ca={key:1},Pa={key:2},Ra={class:"q-ma-sm"},qa={class:"q-ma-sm",align:"center"},Sa=["src"],Va={__name:"BakerReportPanel",props:["bakersReport"],setup(d){Ne.exports.vfs=Ze;const v=d,x=v.bakersReport;console.log("Bakers Report",v.bakersReport);const P=R(!0),b=R(!1),c=R(""),_=i=>Oe.formatDate(i,"MMM. DD, YYYY"),k=i=>i?i.split(" ").map(w=>w.charAt(0).toUpperCase()+w.slice(1).toLowerCase()).join(" "):"",$=i=>{const w=h=>h?h.charAt(0).toUpperCase()+h.slice(1).toLowerCase():"",u=i.firstname?w(i.firstname):"No Firstname",r=i.middlename?w(i.middlename).charAt(0)+".":"",s=i.lastname?w(i.lastname):"No Lastname";return`${u} ${r} ${s}`.trim()},g=i=>{const w=new Date(i),u={hour:"2-digit",minute:"2-digit",hour12:!0};return w.toLocaleTimeString(void 0,u)},m=i=>{switch(i){case"pending":return"orange";case"declined":return"negative";case"confirmed":return"green";default:return"grey"}},l=i=>i?i.recipe_category==="Filling"?i.filling_bakers_reports||[]:i.recipe_category==="Dough"?i.bread_production_reports||[]:[]:(console.error("No bakerReport provided"),[]),n=i=>{var B,oe,M,F;console.log("bakerReport",i);const w=`${i.branch_recipe.recipe.name} (${i.recipe_category})`,u=i.branch_recipe.recipe.target,r=i.actual_target,s=i.kilo,h=i.over,p=i.short,C={table:{widths:["50%","50%"],body:[[{text:"Recipe Name",style:"tableHeader",alignment:"left"},{text:w,style:"tableHeader",alignment:"center"}],[{text:"Target per Kilo",style:"tableHeader",alignment:"left"},{text:`${u} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Actual Target",style:"tableHeader",alignment:"left"},{text:`${r} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Kilo",style:"tableHeader",alignment:"left"},{text:`${s} kg/s`,style:"tableHeader",alignment:"center"}],[{text:"Over",style:"tableHeader",alignment:"left"},{text:`${h} pcs`,style:"tableHeader",alignment:"center"}],[{text:"Short",style:"tableHeader",alignment:"left"},{text:`${p} pcs`,style:"tableHeader",alignment:"center"}]]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}};return{content:[{text:"Baker Report",style:"header",alignment:"center"},{columns:[{text:`Branch Name: ${i.branch.name||"No name available"}
                Baker: ${$(((B=i==null?void 0:i.user)==null?void 0:B.employee)||"Unknown Baker Name")}
                Recipe: ${((oe=i.recipe)==null?void 0:oe.name)||"Unknown Recipe"} (${i.recipe_category||"Unknown Category"})
             `,width:"80%",margin:[0,0,0,10]},{text:`Date: ${_(((M=v.bakersReport[0])==null?void 0:M.created_at)||((F=v.bakersReport[1])==null?void 0:F.created_at)||"No name available")}
                Time: ${g(i.created_at)}
                Status: ${k(i.status)}`,margin:[0,0,0,10]}]},{columns:[{width:"50%",stack:[{text:"Bread Production",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*"],body:[[{text:"Bread Name",style:"tableHeader",alignment:"center"},{text:"Production",style:"tableHeader",alignment:"center"}],...l(i).map(Q=>{var X;return[{text:((X=Q==null?void 0:Q.bread)==null?void 0:X.name)||"Unknown Bread",style:"body"},{text:i.recipe_category==="Filling"?`${(Q==null?void 0:Q.filling_production)||"0"} pcs`:`${Q==null?void 0:Q.bread_new_production} pcs`,style:"body",alignment:"center"}]})]}}],columnGap:10},{width:"50%",stack:[{text:"Ingredients",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*"],body:[[{text:"Ingredient Code",style:"tableHeader",alignment:"center"},{text:"Quantity",style:"tableHeader",alignment:"center"}],...(i.ingredient_bakers_reports||[]).map(Q=>{var X,z;return[{text:((X=Q==null?void 0:Q.ingredients)==null?void 0:X.code)||"Unknown Ingredient",style:"body"},{text:`${(Q==null?void 0:Q.quantity)||"Unknown Quantity"} ${((z=Q==null?void 0:Q.ingredients)==null?void 0:z.unit)||""}`,style:"body",alignment:"center"}]})]}}],columnGap:10}],columnGap:20},{canvas:[{type:"line",x1:0,y1:25,x2:555,y2:25,lineWidth:1,dash:{length:5,space:5},lineColor:"#000000",margin:[0,20,0,0]}]},{margin:[0,20,0,0],stack:[{text:"Summary",style:"subheader",alignment:"center"},C]}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableHeader:{bold:!0,fontSize:10,color:"black"},body:{fontSize:8}},pageMargins:[20,20,20,20]}},o=i=>{const w=n(i);Ne.exports.createPdf(w).getDataUrl(u=>{c.value=u,b.value=!0})};return(i,w)=>(f(),q("div",null,[e(O,{class:"my-card q-pa-md"},{default:t(()=>{var u,r,s,h,p,C;return[ra,a("div",ia,[a("div",null," Name: "+y($(((r=(u=U(x)[0])==null?void 0:u.user)==null?void 0:r.employee)||((h=(s=U(x)[1])==null?void 0:s.user)==null?void 0:h.employee)||"No name available")),1),a("div",null," Date: "+y(`${_(((p=v.bakersReport[0])==null?void 0:p.created_at)||((C=v.bakersReport[1])==null?void 0:C.created_at)||"No name available")}`),1)]),e(S,null,{default:t(()=>[a("div",da,[(f(!0),q(K,null,me(U(x),(B,oe)=>(f(),q("div",{key:oe,class:"row q-gutter-sm"},[e(O,{flat:"",dense:"",bordered:"",class:"q-pa-md q-my-sm user-card",style:{width:"675px","max-width":"1500px"}},{default:t(()=>{var M;return[a("div",ca,[a("div",null,y(`${k((M=B.branch_recipe.recipe)==null?void 0:M.name)||"Unknown Recipe"} (${B.recipe_category||"Unknown Category"})`),1),e(D,{padding:"xs md",label:"Print",icon:"print",outline:"",onClick:F=>o(B),class:"user-button"},null,8,["onClick"])]),a("div",null,"Time: "+y(g(B.created_at)),1),a("div",null,[V(" Status: "),e(ie,{align:"middle",color:m(B.status)},{default:t(()=>[V(y(k(B.status)),1)]),_:2},1032,["color"])]),e(S,null,{default:t(()=>[a("div",ua,[a("div",pa,[V(" Actual Target: "),a("div",null,[e(ie,{outline:"",align:"middle",color:"teal"},{default:t(()=>[V(y(`${(B==null?void 0:B.actual_target)||"No target"} pcs`),1)]),_:2},1024)])]),a("div",ma,[V(" Kilo: "),a("div",null,[e(ie,{outline:"",align:"middle",color:"teal"},{default:t(()=>[V(y(`${(B==null?void 0:B.kilo)||"No Kilo"} kgs`),1)]),_:2},1024)])]),a("div",_a,[V(" Over: "),a("div",null,[e(ie,{outline:"",align:"middle",color:"teal"},{default:t(()=>[V(y(`${B.over} pcs`),1)]),_:2},1024)])]),a("div",ga,[V(" Short: "),a("div",null,[e(ie,{outline:"",align:"middle",color:"teal"},{default:t(()=>[V(y(`${B.short} pcs`),1)]),_:2},1024)])])])]),_:2},1024),e(S,null,{default:t(()=>[a("div",fa,[a("div",ya,[va,a("div",ha,[a("div",null,[(f(!0),q(K,null,me(B.ingredient_bakers_reports||[],(F,Q)=>{var X,z;return f(),q("div",{key:Q,class:"row justify-between q-gutter-y-lg q-gutter-x-xl text-weight-light"},[a("div",null,y(((X=F==null?void 0:F.ingredients)==null?void 0:X.name)||"Unknown Ingredient"),1),a("div",ba,y(`${(F==null?void 0:F.quantity)||"Unknown Quantity"} ${((z=F==null?void 0:F.ingredients)==null?void 0:z.unit)||""}`),1)])}),128))])])]),a("div",wa,[xa,a("div",$a,[a("div",null,[(f(!0),q(K,null,me(l(B),(F,Q)=>{var X;return f(),q("div",{key:Q,class:"row justify-between q-gutter-y-lg q-gutter-x-xl text-weight-light"},[a("div",null,y(((X=F==null?void 0:F.bread)==null?void 0:X.name)||"Unknown Bread"),1),a("div",null,[B.recipe_category==="Filling"?(f(),q("div",ka,y(`${(F==null?void 0:F.filling_production)||"0"} pcs`),1)):B.recipe_category==="Dough"?(f(),q("div",Ca,y(`${F==null?void 0:F.bread_new_production} pcs`),1)):(f(),q("div",Pa,y("0 pcs")))])])}),128))])])])])]),_:2},1024)]}),_:2},1024)]))),128))])]),_:1})]}),_:1}),e(G,{modelValue:b.value,"onUpdate:modelValue":w[0]||(w[0]=u=>b.value=u),"backdrop-filter":i.backdropFilter,maximized:P.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[a("div",Ra,[a("div",qa,[Y((f(),H(D,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},{default:t(()=>[e(E,null,{default:t(()=>[V("Close")]),_:1})]),_:1})),[[W]])]),a("div",null,[a("iframe",{src:c.value,width:"100%",height:"700px"},null,8,Sa)])])]),_:1},8,["modelValue","backdrop-filter","maximized"])]))}};var Da=J(Va,[["__scopeId","data-v-239e42ee"]]);const Ba={class:"row justify-between text-white"},Ta=a("div",{class:"text-h6"},"Bread Report",-1),Ua={class:"row justify-end q-mt-md"},Na={class:"text-h6"},Ia={__name:"BreadReport",props:["reports"],setup(d){const{dialogRef:v,onDialogHide:x,onDialogOK:P,onDialogCancel:b}=fe(),c=d;console.log("Reports data structure:",c.reports);const _=l=>l?l.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",k=[{name:"name",label:"Bread Name",field:l=>(console.log("Row data:",l),l.bread.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:l=>`${l}`},{name:"newProduction",label:"New Production (PCS)",field:"new_production",format:l=>`${l}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:l=>`${l}`},{name:"breadOut",label:"Bread Out (PCS)",field:"bread_out",format:l=>`${l}`},{name:"breadSold",label:"Bread Sold (PCS)",field:"bread_sold",format:l=>`${l}`},{name:"total",label:"Bread Total (PCS)",field:"total",format:l=>`${l}`},{name:"sales",label:"Total Sales",field:"sales"}],$=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l),g=A(()=>(console.log("Filtered rows:",c.reports||[]),c.reports||[])),m=A(()=>{const l=g.value.reduce((n,o)=>{const i=parseFloat(o.sales)||0;return console.log(`Adding salesAmount: ${i} to total: ${n}`),n+i},0);return console.log("Overall Total Sales computed as:",l),l});return console.log("Overall Total Sales:",m.value),(l,n)=>(f(),H(G,{ref_key:"dialogRef",ref:v,onHide:U(x)},{default:t(()=>[e(O,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(S,{style:{"background-color":"#795548"}},{default:t(()=>[a("div",Ba,[Ta,Y((f(),H(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(E,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[V("Close")]),_:1})]),_:1})),[[W]])])]),_:1}),e(S,null,{default:t(()=>[e(de,{filter:l.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:k,rows:g.value,"row-key":"name","virtual-scroll":"",pagination:l.pagination,"onUpdate:pagination":n[0]||(n[0]=o=>l.pagination=o),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(o=>[e(I,{props:o},{default:t(()=>[a("span",null,y(`${_(o.row.bread.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(o=>[e(I,{props:o},{default:t(()=>[a("span",null,y(`${$(o.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(o=>[e(I,{props:o},{default:t(()=>[a("span",null,y(`${$(o.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(S,null,{default:t(()=>[a("div",Ua,[a("div",Na," Overall Total Sales: "+y($(m.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Ha={class:"row justify-between text-white"},Fa=a("div",{class:"text-h6"},"Selecta Report",-1),Aa={class:"row justify-end q-mt-md"},Ma={class:"text-h6"},La={__name:"SelectaReport",props:["reports"],setup(d){const{dialogRef:v,onDialogHide:x,onDialogOK:P,onDialogCancel:b}=fe(),c=d;console.log("Reports data structure:",c.reports);const _=l=>l?l.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",k=[{name:"name",label:"Selecta Name",field:l=>(console.log("Row data:",l),l.selecta.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:l=>`${l}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:l=>`${l}`},{name:"out",label:"Selecta Out (PCS)",field:"out",format:l=>`${l}`},{name:"sold",label:"Selecta Sold (PCS)",field:"sold",format:l=>`${l}`},{name:"sales",label:"Total Sales",field:"sales"}],$=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l),g=A(()=>(console.log("Filtered rows:",c.reports||[]),c.reports||[])),m=A(()=>{const l=g.value.reduce((n,o)=>{const i=parseFloat(o.sales)||0;return console.log(`Adding salesAmount: ${i} to total: ${n}`),n+i},0);return console.log("Overall Total Sales computed as:",l),l});return console.log("Filtered Rows:",g.value),(l,n)=>(f(),H(G,{ref_key:"dialogRef",ref:v,onHide:U(x)},{default:t(()=>[e(O,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(S,{style:{"background-color":"#f44336"}},{default:t(()=>[a("div",Ha,[Fa,Y((f(),H(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(E,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[V("Close")]),_:1})]),_:1})),[[W]])])]),_:1}),e(S,null,{default:t(()=>[e(de,{filter:l.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:k,rows:g.value,"row-key":"name","virtual-scroll":"",pagination:l.pagination,"onUpdate:pagination":n[0]||(n[0]=o=>l.pagination=o),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(o=>[e(I,{props:o},{default:t(()=>[a("span",null,y(`${_(o.row.selecta.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(o=>[e(I,{props:o},{default:t(()=>[a("span",null,y(`${$(o.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(o=>[e(I,{props:o},{default:t(()=>[a("span",null,y(`${$(o.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(S,null,{default:t(()=>[a("div",Aa,[a("div",Ma," Overall Total Sales: "+y($(m.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},za={class:"row justify-between text-white"},Oa=a("div",{class:"text-h6"},"Softdrinks Report",-1),Qa={class:"row justify-end q-mt-md"},ja={class:"text-h6"},Ea={__name:"SoftdrinksReport",props:["reports"],setup(d){const{dialogRef:v,onDialogHide:x,onDialogOK:P,onDialogCancel:b}=fe(),c=d;console.log("Reports data structure:",c.reports);const _=l=>l?l.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",k=[{name:"name",label:"Softdrinks Name",field:l=>(console.log("Row data:",l),l.softdrinks.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:l=>`${l}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:l=>`${l}`},{name:"out",label:"Softdrinks Out (PCS)",field:"out",format:l=>`${l}`},{name:"sold",label:"Softdrinks Sold (PCS)",field:"sold",format:l=>`${l}`},{name:"sales",label:"Total Sales",field:"sales"}],$=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l),g=A(()=>(console.log("Filtered rows:",c.reports||[]),c.reports||[])),m=A(()=>{const l=g.value.reduce((n,o)=>{const i=parseFloat(o.sales)||0;return console.log(`Adding salesAmount: ${i} to total: ${n}`),n+i},0);return console.log("Overall Total Sales computed as:",l),l});return console.log("Filtered Rows:",g.value),(l,n)=>(f(),H(G,{ref_key:"dialogRef",ref:v,onHide:U(x)},{default:t(()=>[e(O,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(S,{style:{"background-color":"#9c27b0"}},{default:t(()=>[a("div",za,[Oa,Y((f(),H(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(E,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[V("Close")]),_:1})]),_:1})),[[W]])])]),_:1}),e(S,null,{default:t(()=>[e(de,{filter:l.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:k,rows:g.value,"row-key":"name","virtual-scroll":"",pagination:l.pagination,"onUpdate:pagination":n[0]||(n[0]=o=>l.pagination=o),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(o=>[e(I,{props:o},{default:t(()=>[a("span",null,y(`${_(o.row.softdrinks.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(o=>[e(I,{props:o},{default:t(()=>[a("span",null,y(`${$(o.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(o=>[e(I,{props:o},{default:t(()=>[a("span",null,y(`${$(o.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(S,null,{default:t(()=>[a("div",Qa,[a("div",ja," Overall Total Sales: "+y($(m.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Ka={class:"row justify-between text-white"},Ya=a("div",{class:"text-h6"},"Cake Report",-1),Ga={class:"row justify-end q-mt-md"},Wa={class:"text-h6"},Ja={__name:"CakeReport",props:["reports"],setup(d){const{dialogRef:v,onDialogHide:x,onDialogOK:P,onDialogCancel:b}=fe(),c=d;console.log("Report cake:",c.reports);const _=A(()=>(console.log("Filtered cake rows:",c.reports||[]),c.reports||[])),k=l=>{const n=u=>u?u.charAt(0).toUpperCase()+u.slice(1).toLowerCase():"",o=l.firstname?n(l.firstname):"No Firstname",i=l.middlename?n(l.middlename).charAt(0)+".":"",w=l.lastname?n(l.lastname):"No Lastname";return`${o} ${i} ${w}`},$=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l).replace("\u20B1","\u20B1 "),g=A(()=>{const l=_.value.reduce((n,o)=>{const i=parseFloat(o.cake_report.price)||0;return console.log(`Adding salesAmount: ${i} to total: ${n}`),n+i},0);return console.log("Overall Total Sales computed as:",l),l}),m=[{name:"name",label:"Cake Name",field:l=>(console.log("Row data:",l),l.cake_report.name||"N/A")},{name:"cake_maker",label:"Cake Maker Name",field:l=>k(l.cake_report.user.employee)},{name:"price",label:"Price",field:l=>$(l.cake_report.price)},{name:"layers",label:"Layers",field:l=>l.cake_report.layers},{name:"sales_status",label:"Sale Status",field:l=>l.cake_report.sales_status}];return(l,n)=>(f(),H(G,{ref_key:"dialogRef",ref:v,onHide:U(x)},{default:t(()=>[e(O,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(S,{style:{"background-color":"#009688"}},{default:t(()=>[a("div",Ka,[Ya,Y((f(),H(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(E,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[V("Close")]),_:1})]),_:1})),[[W]])])]),_:1}),e(S,null,{default:t(()=>[e(de,{filter:l.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:m,rows:_.value,"row-key":"name","virtual-scroll":"",pagination:l.pagination,"onUpdate:pagination":n[0]||(n[0]=o=>l.pagination=o),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},null,8,["filter","rows","pagination"]),a("div",Ga,[a("div",Wa," Overall Total Sales: "+y($(g.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Xa={class:"row justify-between text-white"},Za=a("div",{class:"text-h6"},"Other Products Report",-1),el={class:"row justify-end q-mt-md"},tl={class:"text-h6"},al={__name:"OtherProductsReport",props:["reports"],setup(d){const{dialogRef:v,onDialogHide:x,onDialogOK:P,onDialogCancel:b}=fe(),c=d,_=A(()=>(console.log("Filtered rows:",c.reports||[]),c.reports||[])),k=l=>l?l.split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" "):"",$=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(l),g=[{name:"name",label:"Product Name",field:l=>(console.log("Row data:",l),l.other_products.name||"N/A")},{name:"price",label:"Price",field:"price"},{name:"beginnings",label:"Beginnings (PCS)",field:"beginnings",format:l=>`${l}`},{name:"remaining",label:"Remaining (PCS)",field:"remaining",format:l=>`${l}`},{name:"out",label:"Product Out (PCS)",field:"out",format:l=>`${l}`},{name:"sold",label:"Product Sold (PCS)",field:"sold",format:l=>`${l}`},{name:"sales",label:"Total Sales",field:"sales"}],m=A(()=>{const l=_.value.reduce((n,o)=>{const i=parseFloat(o.sales)||0;return console.log(`Adding salesAmount: ${i} to total: ${n}`),n+i},0);return console.log("Overall Total Sales computed as:",l),l});return(l,n)=>(f(),q("div",null,[e(G,{ref_key:"dialogRef",ref:v,onHide:U(x)},{default:t(()=>[e(O,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(S,{style:{"background-color":"#607d8b"}},{default:t(()=>[a("div",Xa,[Za,Y((f(),H(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(E,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[V("Close")]),_:1})]),_:1})),[[W]])])]),_:1}),e(S,null,{default:t(()=>[e(de,{filter:l.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:g,rows:_.value,"row-key":"name","virtual-scroll":"",pagination:l.pagination,"onUpdate:pagination":n[0]||(n[0]=o=>l.pagination=o),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(o=>[e(I,{props:o},{default:t(()=>[a("span",null,y(`${k(o.row.other_products.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(o=>[e(I,{props:o},{default:t(()=>[a("span",null,y(`${$(o.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-sales":t(o=>[e(I,{props:o},{default:t(()=>[a("span",null,y(`${$(o.row.sales)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(S,null,{default:t(()=>[a("div",el,[a("div",tl," Overall Total Sales: "+y($(m.value||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"])]))}};const ll=d=>(ee("data-v-0eb81aec"),d=d(),te(),d),ol=ll(()=>a("div",{class:"text-h6",align:"center"},"Products Report",-1)),nl={class:"item-start q-gutter-md",align:"center"},sl={class:"text-weight-regular text-subtitle1"},rl={__name:"ProductsReport",props:["sales_Reports"],setup(d){const v=d,x=v.sales_Reports;console.log("sales report2",v);const P=Ve(),b=m=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(m),c=m=>{P.dialog({component:Ia,componentProps:{reports:m}})},_=m=>{P.dialog({component:La,componentProps:{reports:m}})},k=m=>{P.dialog({component:Ea,componentProps:{reports:m}})},$=m=>{P.dialog({component:Ja,componentProps:{reports:m}})},g=m=>{P.dialog({component:al,componentProps:{reports:m}})};return(m,l)=>(f(),q("div",null,[e(O,{class:"user-card"},{default:t(()=>[e(S,null,{default:t(()=>[ol]),_:1}),e(S,null,{default:t(()=>[a("div",nl,[e(D,{onClick:l[0]||(l[0]=n=>c(v.sales_Reports[0].bread_reports)),"no-caps":"",label:"Bread Report",rounded:"",color:"brown",style:{width:"130px"},class:"user-button"}),e(D,{onClick:l[1]||(l[1]=n=>_(U(x)[0].selecta_reports)),"no-caps":"",label:"Selecta Report",rounded:"",color:"red-6",style:{width:"130px"},class:"user-button"}),e(D,{onClick:l[2]||(l[2]=n=>k(U(x)[0].softdrinks_reports)),"no-caps":"",label:"Softdrinks Report",rounded:"",color:"accent",style:{width:"150px"},class:"user-button"}),e(D,{onClick:l[3]||(l[3]=n=>$(U(x)[0].cake_sales_reports)),"no-caps":"",label:"Cake Report",rounded:"",color:"teal",style:{width:"130px"},class:"user-button"}),e(D,{onClick:l[4]||(l[4]=n=>g(U(x)[0].other_products_reports)),"no-caps":"",label:"Other Products Report",rounded:"",color:"blue-grey",style:{width:"180px"},class:"user-button"})])]),_:1}),e(S,null,{default:t(()=>[a("div",sl," Total sales: "+y(b(U(x)[0].products_total_sales)),1)]),_:1})]),_:1})]))}};var il=J(rl,[["__scopeId","data-v-0eb81aec"]]);const dl={class:"row justify-between text-white"},cl=a("div",{class:"text-h6"},"Denomination Report",-1),ul={class:"row text-weight-regular text-subtitle1"},pl={class:"col-6"},ml={class:"col-6"},_l={class:"row justify-end q-mt-md"},gl={class:"text-h6"},fl={__name:"DenominationDialogReport",props:{reports:Array,total:Number},setup(d){const{dialogRef:v,onDialogHide:x,onDialogOK:P,onDialogCancel:b}=fe(),c=d;console.log("Denomination Props",c.reports);const _=c.reports[0];console.log("Reports data structure:",c.reports);const k=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(g),$=A(()=>(console.log("Filtered rows:",c.reports||[]),c.reports||[]));return console.log("Filtered Rows:",$.value),(g,m)=>(f(),H(G,{ref_key:"dialogRef",ref:v,onHide:U(x)},{default:t(()=>[e(O,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(S,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",dl,[cl,Y((f(),H(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(E,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[V("Close")]),_:1})]),_:1})),[[W]])])]),_:1}),e(S,null,{default:t(()=>[a("div",ul,[a("div",pl,[a("div",null,"1000 Bills: "+y(U(_).oneThousandBills),1),a("div",null,"500 Bills: "+y(U(_).fiveHundredBills),1),a("div",null,"200 Bills: "+y(U(_).twoHundredBills),1),a("div",null,"100 Bills: "+y(U(_).oneHundredBills),1),a("div",null,"50 Bills: "+y(U(_).fiftyBills),1),a("div",null,"20 Bills: "+y(U(_).twentyBills),1)]),a("div",ml,[a("div",null,"20 coins: "+y(U(_).twentyCoins),1),a("div",null,"10 coins: "+y(U(_).tenCoins),1),a("div",null,"5 coins: "+y(U(_).fiveCoins),1),a("div",null,"1 coins: "+y(U(_).oneCoins),1),a("div",null,"25 cents: "+y(U(_).twentyFiveCents),1)])])]),_:1}),e(S,null,{default:t(()=>[a("div",_l,[a("div",gl," Overall Total Denomination: "+y(k(d.total||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const yl=d=>(ee("data-v-0bfb79ef"),d=d(),te(),d),vl=yl(()=>a("div",{class:"text-h6",align:"center"},"Denomination Report",-1)),hl={class:"q-gutter-x-md",align:"center"},bl={class:"text-weight-regular text-subtitle1"},wl={__name:"DenominationReport",props:["sales_Reports"],setup(d){const v=d;v.sales_Reports,console.log("Denomination report",v);const x=Ve(),P=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(c),b=(c,_)=>{x.dialog({component:fl,componentProps:{reports:c,total:_}})};return(c,_)=>(f(),q("div",null,[e(O,{class:"user-card"},{default:t(()=>[e(S,null,{default:t(()=>[vl]),_:1}),e(S,null,{default:t(()=>[a("div",hl,[e(D,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",onClick:_[0]||(_[0]=k=>b(v.sales_Reports[0].denomination_reports,v.sales_Reports[0].denomination_total)),class:"user-button"})])]),_:1}),e(S,null,{default:t(()=>[a("div",bl," Total Denomination : "+y(P(v.sales_Reports[0].denomination_total)),1)]),_:1})]),_:1})]))}};var xl=J(wl,[["__scopeId","data-v-0bfb79ef"]]);const $l={class:"row justify-between text-white"},kl=a("div",{class:"text-h6"},"Expenses Report",-1),Cl={class:"row justify-end q-mt-md"},Pl={class:"text-h6"},Rl={__name:"ExpensesDialog",props:{reports:Array,total:Number},setup(d){const{dialogRef:v,onDialogHide:x,onDialogOK:P,onDialogCancel:b}=fe(),c=d;c.reports,console.log("Expenses total",c.total);const _=m=>m?m.split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" "):"",k=[{name:"name",label:"Expenses Name",field:m=>(console.log("Row data:",m),m.name||"N/A"),align:"center"},{name:"description",label:"Description",field:"description",align:"center"},{name:"amount",label:"Amount",field:"amount",align:"center"}];console.log("Reports data structure:",c.reports);const $=m=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(m),g=A(()=>(console.log("Filtered rows:",c.reports||[]),c.reports||[]));return console.log("Expenses:",g.value),(m,l)=>(f(),H(G,{ref_key:"dialogRef",ref:v,onHide:U(x),onOk:m.handleButtonClick,onCancel:U(b)},{default:t(()=>[e(O,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(S,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",$l,[kl,Y((f(),H(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(E,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[V("Close")]),_:1})]),_:1})),[[W]])])]),_:1}),e(S,null,{default:t(()=>[e(de,{filter:m.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:k,rows:g.value,"row-key":"name","virtual-scroll":"",pagination:m.pagination,"onUpdate:pagination":l[0]||(l[0]=n=>m.pagination=n),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-name":t(n=>[e(I,{props:n},{default:t(()=>[a("span",null,y(`${_(n.row.name)}`),1)]),_:2},1032,["props"])]),"body-cell-amount":t(n=>[e(I,{props:n},{default:t(()=>[a("span",null,y(`${$(n.row.amount)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(S,null,{default:t(()=>[a("div",Cl,[a("div",Pl," Overall Total Expenses: "+y($(d.total||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","onOk","onCancel"]))}};const ql=d=>(ee("data-v-338c99d0"),d=d(),te(),d),Sl=ql(()=>a("div",{class:"text-h6",align:"center"},"Expenses Report",-1)),Vl={class:"q-gutter-x-md",align:"center"},Dl={class:"text-weight-regular text-subtitle1"},Bl={__name:"ExpensesReport",props:["sales_Reports"],setup(d){const v=d;console.log("Expenses Data",v.sales_Reports[0].expenses_reports);const x=Ve(),P=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(c),b=(c,_)=>{x.dialog({component:Rl,componentProps:{reports:c,total:_}})};return(c,_)=>(f(),q("div",null,[e(O,{class:"user-card"},{default:t(()=>[e(S,null,{default:t(()=>[Sl]),_:1}),e(S,null,{default:t(()=>[a("div",Vl,[e(D,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",class:"user-button",onClick:_[0]||(_[0]=k=>b(v.sales_Reports[0].expenses_reports,v.sales_Reports[0].expenses_total))})])]),_:1}),e(S,null,{default:t(()=>[a("div",Dl," Total Expenses : "+y(P(v.sales_Reports[0].expenses_total)),1)]),_:1})]),_:1})]))}};var Tl=J(Bl,[["__scopeId","data-v-338c99d0"]]);const Ul={class:"row justify-between text-white"},Nl=a("div",{class:"text-h6"},"Credits Report",-1),Il={class:"row justify-end q-mt-md"},Hl={class:"text-h6"},Fl={__name:"CreditsReportDialog",props:{reports:Array,total:Number},setup(d){const{dialogRef:v,onDialogHide:x,onDialogOK:P,onDialogCancel:b}=fe(),c=d,_=c.reports;console.log("creditReports data",_),_.forEach((o,i)=>{console.log(`Report ${i}:`,o),console.log(`Credit Products for Report ${i}:`,o.credit_products.total_amount)});const k=A(()=>_.flatMap(o=>o.credit_products.map(i=>{const w=parseInt(i.pieces,10)||0,u=parseFloat(i.price)||0,r=w*u;return{...i,total_amount:r}})));console.log("All Credit Products:",k.value[0]);const $=o=>o?o.split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join(" "):"",g=o=>{const i=s=>s?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():"",w=o.firstname?i(o.firstname):"No Firstname",u=o.middlename?i(o.middlename).charAt(0)+".":"",r=o.lastname?i(o.lastname):"No Lastname";return`${w} ${u} ${r}`.trim()},m=[{name:"name",label:"Employee Name",field:o=>g(o.credit_user_id),align:"center"},{name:"productName",label:"Product Name",field:o=>o.product.name||"N/A",align:"center"},{name:"pieces",label:"Pieces",field:"pieces",align:"center"},{name:"price",label:"Price",field:"price",align:"center"},{name:"total_amount",label:"Total Amount",field:"total_amount",align:"center"}];console.log("Reports data structure:",c.reports);const l=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(o),n=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(o);return(o,i)=>(f(),H(G,{ref_key:"dialogRef",ref:v,onHide:U(x),onOk:o.handleButtonClick,onCancel:U(b)},{default:t(()=>[e(O,{style:{width:"870px","max-width":"80vw"}},{default:t(()=>[e(S,{style:{"background-color":"#03a9f4"}},{default:t(()=>[a("div",Ul,[Nl,Y((f(),H(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(E,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[V("Close")]),_:1})]),_:1})),[[W]])])]),_:1}),e(S,null,{default:t(()=>[e(de,{filter:o.filter,"virtual-scroll-sticky-size-start":48,flat:"",columns:m,rows:k.value,"row-key":"name","virtual-scroll":"",pagination:o.pagination,"onUpdate:pagination":i[0]||(i[0]=w=>o.pagination=w),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"},class:"table-container sticky-header"},{"body-cell-productName":t(w=>[e(I,{props:w},{default:t(()=>[a("span",null,y(`${$(w.row.product.name)}`),1)]),_:2},1032,["props"])]),"body-cell-price":t(w=>[e(I,{props:w},{default:t(()=>[a("span",null,y(`${l(w.row.price)}`),1)]),_:2},1032,["props"])]),"body-cell-total_amount":t(w=>[e(I,{props:w},{default:t(()=>[a("span",null,y(`${n(w.row.total_amount)}`),1)]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"])]),_:1}),e(S,null,{default:t(()=>[a("div",Il,[a("div",Hl," Overall Credits Total: "+y(l(d.total||"0")),1)])]),_:1})]),_:1})]),_:1},8,["onHide","onOk","onCancel"]))}};const Al=d=>(ee("data-v-29d6ba68"),d=d(),te(),d),Ml=Al(()=>a("div",{class:"text-h6",align:"center"},"Credits Report",-1)),Ll={class:"q-gutter-x-md",align:"center"},zl={class:"text-weight-regular text-subtitle1"},Ol={__name:"CreditsReport",props:["sales_Reports"],setup(d){const v=d,x=Ve(),P=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(c),b=(c,_)=>{x.dialog({component:Fl,componentProps:{reports:c,total:_}})};return(c,_)=>(f(),q("div",null,[e(O,{class:"user-card"},{default:t(()=>[e(S,null,{default:t(()=>[Ml]),_:1}),e(S,null,{default:t(()=>[a("div",Ll,[e(D,{label:"OPEN",rounded:"",style:{width:"200px"},color:"light-blue-6",class:"user-button",onClick:_[0]||(_[0]=k=>b(v.sales_Reports[0].credit_reports,v.sales_Reports[0].credit_total))})])]),_:1}),e(S,null,{default:t(()=>[a("div",zl," Total Credits : "+y(P(v.sales_Reports[0].credit_total)),1)]),_:1}),e(S)]),_:1})]))}};var Ql=J(Ol,[["__scopeId","data-v-29d6ba68"]]);const jl=d=>(ee("data-v-5d46a8e5"),d=d(),te(),d),El={class:"q-mt-lg row items-start q-gutter-md justify-center"},Kl={class:"row justify-between"},Yl=jl(()=>a("div",{class:"text-h6"},"Sales Report",-1)),Gl={align:"right"},Wl={class:"text-subtitle1 text-weight-regular"},Jl={class:"row q-gutter-sm q-pa-md"},Xl={class:"q-ma-sm"},Zl={class:"q-ma-sm",align:"center"},eo=["src"],to={__name:"SalesReportPanel",props:["salesReport"],setup(d){Ne.exports.vfs=Ze;const v=d,x=v.salesReport;console.log("reportsData",v.salesReport);const P=R(!0),b=R(!1),c=R(""),_=n=>Oe.formatDate(n,"MMMM DD, YYYY"),k=n=>{const o=new Date(n),i={hour:"2-digit",minute:"2-digit",hour12:!0};return o.toLocaleTimeString(void 0,i)},$=n=>{const o=r=>r?r.charAt(0).toUpperCase()+r.slice(1).toLowerCase():"",i=n.firstname?o(n.firstname):"No Firstname",w=n.middlename?o(n.middlename).charAt(0)+".":"",u=n.lastname?o(n.lastname):"No Lastname";return`${i} ${w} ${u}`.trim()},g=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP"}).format(n).replace("\u20B1","\u20B1	"),m=n=>{const o=A(()=>n.credit_reports.flatMap(z=>z.credit_products));console.log("All Credit Products:",o.value);const i=[{title:"Bread Production",data:n.bread_reports||[],columns:["bread.name","beginnings","price","new_production","bread_out","bread_sold","total","remaining","sales"],totals:["sales"]},{title:"Selecta Production",data:n.selecta_reports||[],columns:["selecta.name","beginnings","price","out","sold","remaining","sales"],totals:["sales"]},{title:"Softdrinks Production",data:n.softdrinks_reports||[],columns:["softdrinks.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Other Products Production",data:n.other_products_reports||[],columns:["other_products.name","beginnings","price","added_stocks","out","sold","remaining","sales"],totals:["sales"]},{title:"Cake Production",data:n.cake_sales_reports||[],columns:["cake_report.name","cake_report.user.employee","cake_report.layers","cake_report.price","cake_report.sales_status"],totals:["cake_report.price"]}],w=n.expenses_reports||[],u=o.value||[],r=n.credit_total,s=n.denomination_reports[0]||[],h=n.denomination_total,p=n.expenses_total;n.products_total_sales,n.charges_amount,n.over_total;const C={bills:[{name:"One Thousand",pcs:s.oneThousandBills||0},{name:"Five Hundred",pcs:s.fiveHundredBills||0},{name:"Two Hundred",pcs:s.twoHundredBills||0},{name:"One Hundred",pcs:s.oneHundredBills||0},{name:"Fifty",pcs:s.fiftyBills||0},{name:"Twenty",pcs:s.twentyBills||0}],coins:[{name:"Twenty",pcs:s.twentyCoins||0},{name:"Ten",pcs:s.tenCoins||0},{name:"Five",pcs:s.fiveCoins||0},{name:"One",pcs:s.oneCoins||0},{name:"Twenty Five Cents",pcs:s.twentyFiveCents||0}]},B=(z,ce,ae)=>{const ue=(Z,re)=>re.split(".").reduce((_e,T)=>_e?_e[T]:0,Z),we=ae.reduce((Z,re)=>(Z[re]=z.reduce((_e,T)=>_e+parseFloat(ue(T,re))||0,0),Z),{});return[...z.map(Z=>ce.map(re=>{if(re==="cake_report.user.employee"){const _e=ue(Z,"cake_report.user.employee");return{text:_e?$(_e):"No Employee",style:"body",alignment:"center"}}return{text:re.includes(".")?ue(Z,re)||"-":Z[re]||"-",style:"body",alignment:"center"}})),[{text:"Overall Total",colSpan:ce.length-ae.length,style:"tableHeader",alignment:"right",color:"#020617"},...Array(ce.length-ae.length-1).fill({}),...ae.map(Z=>({text:`\u20B1 ${we[Z].toFixed(2)}`,style:"tableHeader",alignment:"center",color:"#020617"}))]]},oe=u.length>0?u.map(z=>[{text:$(z.credit_user_id),style:"body",alignment:"center"},{text:z.product.name,style:"body",alignment:"center"},{text:z.pieces,style:"body",alignment:"center"},{text:z.price,style:"body",alignment:"center"},{text:z.total_amount,style:"body",alignment:"center"}]):[[{text:"No data available",colSpan:5,alignment:"center"}]];oe.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:3},{},{},{text:`${g(r)}`,style:"bodyBold",alignment:"center",colSpan:2},{}]);const M=w.length>0?w.map(z=>[{text:z.name,style:"body",alignment:"center"},{text:z.description,style:"body",alignment:"center"},{text:`${g(z.amount)}`,style:"body",alignment:"center"}]):[[{text:"No data available",colSpan:3,alignment:"center"}]];M.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:2},{},{text:`${g(p)}`,style:"bodyBold",alignment:"center"}]);const F=C.bills.map((z,ce)=>{var ae,ue;return[{text:z.name,style:"body",alignment:"center"},{text:z.pcs,style:"body",alignment:"center"},{text:((ae=C.coins[ce])==null?void 0:ae.name)||"",style:"body",alignment:"center"},{text:((ue=C.coins[ce])==null?void 0:ue.pcs)||"0",style:"body",alignment:"center"}]});F.push([{text:"Total",style:"bodyBold",alignment:"right",colSpan:3,color:"#020617"},{},{},{text:`${g(h)}`,style:"bodyBold",alignment:"right",color:"#020617"}]);const Q=i.map(({title:z,data:ce,columns:ae,totals:ue})=>({stack:[{text:z,style:"subheader",alignment:"center"},{table:{headerRows:1,widths:Array(ae.length).fill("*"),body:[ae.map(we=>({text:we.split(".").pop().replace(/_/g," ").replace(/\b\w/g,Z=>Z.toUpperCase()),style:"tableHeader",alignment:"center"})),...B(ce,ae,ue)]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]})),X={table:{widths:["50%","50%"],body:[[{text:"Total Denomination",style:"tableHeader",alignment:"left"},{text:g(h),style:"tableData",alignment:"center"}],[{text:"Total Product Sales Amount",style:"tableHeader",alignment:"left"},{text:g(n.products_total_sales),style:"tableData",alignment:"center"}],[{text:"Total Expenses",style:"tableHeader",alignment:"left"},{text:g(p),style:"tableData",alignment:"center"}],[{text:"Over Cash",style:"tableHeader",alignment:"left"},{text:g(n.over_total),style:"tableData",alignment:"center"}],[{text:"Charges",style:"tableHeader",alignment:"left"},{text:`${g(n.charges_amount)}`,style:"tableData",alignment:"center"}]]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}};return{content:[{text:"Sales Report",style:"header",alignment:"center"},{columns:[{text:`Branch Name: ${n.branch.name}
          Cashier: ${$(n.user.employee)}
          Date: ${_(n.created_at)}
Time: ${k(n.created_at)}
`,margin:[0,0,0,10]},{}]},...Q,{margin:[0,5,0,0],columns:[{width:"50%",stack:[{text:"Expenses Report",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","auto","*"],body:[[{text:"Expenses Name",style:"tableHeader",alignment:"center"},{text:"Description",style:"tableHeader",alignment:"center"},{text:"Amount",style:"tableHeader",alignment:"center"}],...M]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}},{text:"Credit Report",style:"subheader",alignment:"center"},{table:{headerRows:1,widths:["*","*","auto","auto","auto"],body:[[{text:"Employee Name",style:"tableHeader",alignment:"center"},{text:"Product Name",style:"tableHeader",alignment:"center"},{text:"Pieces",style:"tableHeader",alignment:"center"},{text:"Price",style:"tableHeader",alignment:"center"},{text:"Amount",style:"tableHeader",alignment:"center"}],...oe]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]},{width:"50%",stack:[{text:"Denomination Report",style:"subheader",alignment:"center"},{table:{headerRows:0,widths:["*","auto","*","auto"],body:[[{text:"Bills",style:"tableHeader",alignment:"center"},{text:"Pcs",style:"tableHeader",alignment:"center"},{text:"Coins",style:"tableHeader",alignment:"center"},{text:"Pcs",style:"tableHeader",alignment:"center"}],...F]},layout:{paddingLeft:()=>2,paddingRight:()=>2,paddingTop:()=>2,paddingBottom:()=>2}}]}],columnGap:10},{},{canvas:[{type:"line",x1:0,y1:25,x2:580,y2:25,lineWidth:1,dash:{length:5,space:5},lineColor:"#000000",margin:[0,20,0,0]}]},{margin:[0,20,0,0],stack:[{text:"Summary",style:"subheader",alignment:"center"},X]}],styles:{header:{fontSize:16,bold:!0},subheader:{fontSize:12,bold:!0,margin:[0,10,0,5]},tableHeader:{bold:!0,fontSize:10,color:"black"},body:{fontSize:8}},pageMargins:[10,10,10,10]}},l=n=>{const o=m(n);Ne.exports.createPdf(o).getDataUrl(i=>{c.value=i,b.value=!0})};return(n,o)=>(f(),q(K,null,[e(O,{class:"my-card q-pa-md"},{default:t(()=>[e(S,null,{default:t(()=>[a("div",El,[(f(!0),q(K,null,me(U(x),(i,w)=>(f(),q("div",{key:w},[e(O,{flat:"",dense:"",bordered:""},{default:t(()=>[e(S,null,{default:t(()=>[a("div",Kl,[Yl,a("div",Gl,[e(D,{padding:"xs md",label:"Print",icon:"print",outline:"",class:"user-button",onClick:u=>l(i)},null,8,["onClick"]),a("div",null,[e(E,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[V(" Print Report ")]),_:1})])])]),a("div",Wl,[a("div",null,"Name: "+y($(i.user.employee)),1),a("div",null,"Date: "+y(_(i.created_at)),1),a("div",null,"Time: "+y(k(i.created_at)),1)])]),_:2},1024),a("div",Jl,[e(il,{sales_Reports:[i]},null,8,["sales_Reports"]),e(xl,{sales_Reports:[i]},null,8,["sales_Reports"]),e(Tl,{sales_Reports:[i]},null,8,["sales_Reports"]),e(Ql,{sales_Reports:[i]},null,8,["sales_Reports"])])]),_:2},1024)]))),128))])]),_:1})]),_:1}),e(G,{modelValue:b.value,"onUpdate:modelValue":o[0]||(o[0]=i=>b.value=i),maximized:P.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[a("div",Xl,[a("div",Zl,[Y((f(),H(D,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},{default:t(()=>[e(E,null,{default:t(()=>[V("Close")]),_:1})]),_:1})),[[W]])]),a("div",null,[a("iframe",{src:c.value,width:"100%",height:"700px"},null,8,eo)])])]),_:1},8,["modelValue","maximized"])],64))}};var ao=J(to,[["__scopeId","data-v-5d46a8e5"]]);const lo={class:"text-h6"},oo={class:"row q-gutter-x-md"},no={__name:"ProductionReportDialog",props:["reports","reportLabel"],emits:["selectReport","hide","ok","cancel"],setup(d,{emit:v}){const{dialogRef:x,onDialogHide:P,onDialogOK:b,onDialogCancel:c}=fe(),_=d;console.log("production report",_.reports);const k=_.reports.baker_reports,$=_.reports.sales_reports,g=v,m=R("bakerReport"),l=R(!0),n=R(!1),o=w=>w?w.split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1).toLowerCase()).join(" "):"",i=()=>{g("selectReport",_.reports),n.value=!0};return(w,u)=>(f(),H(G,{ref_key:"dialogRef",ref:x,modelValue:n.value,"onUpdate:modelValue":u[2]||(u[2]=r=>n.value=r),onHide:U(P),onOk:i,onCancel:U(c),maximized:l.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:t(()=>[e(O,{style:{"background-color":"#f7f8fc"}},{default:t(()=>[e(S,{class:"row items-center text-white",style:{"background-color":"#595a5a"}},{default:t(()=>[a("div",lo,y(`${o(d.reports.branch_name)} ( ${d.reportLabel} Reports)`),1),e(Se),a("div",oo,[a("div",null,[Y((f(),H(D,{icon:"close",flat:"",dense:"",round:""},{default:t(()=>[e(E,{class:"bg-blue-grey-6",delay:200},{default:t(()=>[V("Close")]),_:1})]),_:1})),[[W]])])])]),_:1}),e(S,null,{default:t(()=>[a("div",null,[e(We,{modelValue:m.value,"onUpdate:modelValue":u[0]||(u[0]=r=>m.value=r),align:"justify","narrow-indicator":"",class:"q-mb-lg"},{default:t(()=>[e(xe,{class:"text-purple",name:"bakerReport",label:"Baker Reports"}),e(xe,{class:"text-orange",name:"salesReport",label:"Sales Report"})]),_:1},8,["modelValue"])]),a("div",null,[e(Je,{modelValue:m.value,"onUpdate:modelValue":u[1]||(u[1]=r=>m.value=r),animated:"","transition-prev":"scale","transition-next":"scale",style:{"background-color":"#f7f8fc"}},{default:t(()=>[e($e,{name:"bakerReport"},{default:t(()=>[e(Da,{bakersReport:U(k)},null,8,["bakersReport"])]),_:1}),e($e,{name:"salesReport"},{default:t(()=>[e(ao,{salesReport:U($)},null,8,["salesReport"])]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1},8,["modelValue","onHide","onCancel","maximized"]))}};var so=J(no,[["__scopeId","data-v-643ff984"]]);const ro=Ge("productions",()=>{const d=R([]),v=R([]);return{productions:d,production:v,fetchAllProduction:async()=>{const b=await ne.get("/api/branch-production-report");d.value=b.data.reports},fetchBranchProductions:async b=>{try{const c=await ne.get(`/api/branches/${b}/production-report`);d.value=c.data}catch(c){console.log(c)}}}});const io=d=>(ee("data-v-12387bc6"),d=d(),te(),d),co={key:0,class:"spinner-wrapper"},uo={key:1},po={key:0,class:"data-error"},mo=io(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),_o={class:"row justify-center q-gutter-x-md"},go={__name:"ProductionTable",setup(d){const v=he();R("bakerReport");const x=v.params.branch_id;R(!1),R(!0),R(""),R("");const P=R({rowsPerPage:0}),b=ro(),c=R(""),_=A(()=>b.productions);R(!0);const k=R(!0),$=R(!1),g=A(()=>c.value?_.value.filter(w=>w.name.toLowerCase().includes(c.value.toLowerCase())):_.value);qe(async()=>{x&&await m(x)});const m=async w=>{try{k.value=!0;const u=await b.fetchBranchProductions(w);console.log("Fetched data:",u),console.log("Production rows:",_.value),_.value.length||($.value=!0)}catch{$.value=!0}finally{k.value=!1}};Ie(c,async w=>{k.value=!0,await new Promise(u=>setTimeout(u,1e3)),k.value=!1,$.value=g.value.length===0});const n=[{name:"reportDate",align:"center",label:"Date",field:"date",format:w=>Oe.formatDate(w,"MMMM DD, YYYY")},{name:"reports",align:"center",label:"Reports",field:"reports"}],o=Ve(),i=(w,u)=>{o.dialog({component:so,componentProps:{reports:w,reportLabel:u}})};return(w,u)=>(f(),q(K,null,[a("div",null,[e(j,{modelValue:c.value,"onUpdate:modelValue":u[0]||(u[0]=r=>c.value=r),class:"q-pb-lg q-pl-md",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100",style:{width:"500px","max-width":"1500px","min-width":"100px"}},{append:t(()=>[e(se,{name:"search"})]),_:1},8,["modelValue"])]),k.value?(f(),q("div",co,[e(He,{size:"50px",color:"primary"})])):(f(),q("div",uo,[g.value.length===0?(f(),q("div",po,[e(se,{name:"warning",color:"warning",size:"4em"}),mo])):(f(),H(de,{key:1,class:"table-container sticky-header",filter:c.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"400px"},columns:n,rows:g.value,"row-key":"reportDate","virtual-scroll":"",pagination:P.value,"onUpdate:pagination":u[1]||(u[1]=r=>P.value=r),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-reports":t(r=>[e(I,{props:r},{default:t(()=>[a("div",_o,[e(D,{padding:"xs lg",rounded:"",dense:"",size:"sm",color:"light-blue-5","text-color":"white",onClick:s=>i(r.row.AM,"AM")},{default:t(()=>[V("AM")]),_:2},1032,["onClick"]),e(D,{padding:"xs lg",rounded:"",dense:"",size:"sm",color:"deep-orange","text-color":"white",onClick:s=>i(r.row.PM,"PM")},{default:t(()=>[V("PM")]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var fo=J(go,[["__scopeId","data-v-12387bc6"]]);const yo={__name:"ProductionPage",setup(d){return(v,x)=>(f(),q("div",null,[e(fo)]))}};const be=d=>(ee("data-v-2adb6214"),d=d(),te(),d),vo=be(()=>a("div",{class:"text-h6"},"Create Branch Recipe",-1)),ho={class:"q-mb-lg"},bo={key:0,class:"custom-list z-top"},wo={class:"q-mb-sm"},xo=be(()=>a("div",null,"Recipe Name",-1)),$o={class:"q-mb-lg"},ko=be(()=>a("div",null,"Category",-1)),Co=be(()=>a("div",null,"Breads",-1)),Po={class:"q-mt-md q-gutter-y-sm"},Ro=be(()=>a("div",{class:"text-weight-thin"},"Ingredients List",-1)),qo={class:"q-mt-xl q-gutter-y-sm"},So={class:"row justify-between"},Vo=be(()=>a("div",{align:"center"},"Ingredients",-1)),Do=be(()=>a("div",{align:"center"},"Quantity",-1)),Bo=["onKeyup"],To={align:"right"},Uo={__name:"RecipeCreate",setup(d){const v=he(),x=v.params.branch_id,P=dt(),b=A(()=>P.recipes),c=Qe(),_=Le(),k=Xe(),$=A(()=>c.branchRecipes),g=R(!1),m=()=>{g.value=!0},l=()=>{clearForm(),g.value=!1},n=T=>T?T.split(" ").map(N=>N.charAt(0).toUpperCase()+N.slice(1).toLowerCase()).join(" "):"",o=R(""),i=async()=>{P.searchRecipe(o.value)},w=A(()=>r.target!==0),u=T=>{r.recipe_id=T.id,r.recipe_name=T.name,r.category=T.category,o.value=""},r=Be({recipe_id:"",recipe_name:"",category:"",target:"",branches_id:v.params.branch_id}),s=R(!1),h=R(null),p=R([]),C=R(p.value),B=R([]),oe=R([]),M=Be({name:"",quantity:""}),F=R(oe.value);(async()=>{await _.fetchProductsByCategory("Bread"),s.value=!1,p.value=_.breads.map(T=>({label:T.name,value:T.id}))})(),(async()=>{await k.fetchIngredients("Ingredients"),s.value=!1,oe.value=k.ingredients.map(T=>({label:T.name,value:T.id,unit:T.unit}))})();const z=()=>{M.name="",M.quantity=""},ce=(T,N)=>{T.length>2&&(p.value.includes(T)||N(T,"add-unique"))},ae=(T,N)=>{N(()=>{if(T==="")C.value=p.value;else{const pe=T.toLowerCase();C.value=p.value.filter(L=>L.label.toLowerCase().indexOf(pe)>-1)}})},ue=(T,N)=>{N(()=>{if(T==="")F.value=oe.value;else{const pe=T.toLowerCase();F.value=oe.value.filter(L=>L.label.toLowerCase().indexOf(pe)>-1)}})},we=()=>{const T=B.value;function N(ye,Fe){return ye.find(ot=>ot.ingredients_id==Fe)}const pe=M.name.value;N(T,pe)?le.create({type:"negative",icon:"warning",message:"Ingredient already exist",timeout:2e3}):(B.value=[...T,{ingredients_id:M.name.value,label:M.name.label,quantity:M.quantity,unit:M.name.unit}],z())},Z=T=>{B.value.splice(T,1)};Ie(()=>M.name,T=>{T&&T.unit?M.unit=T.unit:M.unit=""});const re=()=>{r.recipe_id="",r.target="",h.value=null,B.value=[],M.name="",M.quantity=""},_e=async()=>{const T={recipe_id:r.recipe_id,target:r.target,status:"active",branch_id:r.branches_id,breads:h.value.map(N=>({bread_id:N.value})),ingredients:B.value.map(N=>({ingredient_id:N.ingredients_id,quantity:N.quantity}))};console.log("branchRecipe",T),await c.saveBranchRecipe(T),$.value=await c.fetchBranchRecipes(x),re(),g.value=!1};return(T,N)=>(f(),q(K,null,[e(D,{outline:"",class:"text-dark q-pa-sm",push:"",dense:"",elevated:"",icon:"add_circle",label:"Create Branch Recipe",onClick:m}),e(G,{modelValue:g.value,"onUpdate:modelValue":N[7]||(N[7]=pe=>g.value=pe)},{default:t(()=>[e(O,{class:"my-card",style:{width:"400px","max-width":"500px","min-width":"100px"}},{default:t(()=>[e(S,{class:"row items-center text-white",style:{"background-color":"#ef4444"}},{default:t(()=>[vo,e(Se),Y(e(D,{icon:"close",flat:"",dense:"",round:""},null,512),[[W]])]),_:1}),e(S,null,{default:t(()=>{var pe;return[a("div",ho,[e(j,{modelValue:o.value,"onUpdate:modelValue":[N[0]||(N[0]=L=>o.value=L),i],debounce:"1000",outlined:"",rounded:"",placeholder:"Search recipe",dense:""},{append:t(()=>[a("div",null,[e(se,{name:"search"})])]),default:t(()=>[o.value?(f(),q("div",bo,[e(O,null,{default:t(()=>[e(Ue,{separator:""},{default:t(()=>{var L;return[(L=b.value)!=null&&L.length?(f(!0),q(K,{key:1},me(b.value,ye=>(f(),H(ge,{onClick:Fe=>u(ye),key:ye.id,clickable:""},{default:t(()=>[e(ve,null,{default:t(()=>[e(Te,null,{default:t(()=>[V(y(n(ye.name)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(f(),H(ge,{key:0},{default:t(()=>[V(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):Me("",!0)]),_:1},8,["modelValue"])]),a("div",wo,[xo,e(j,{modelValue:r.recipe_name,"onUpdate:modelValue":N[1]||(N[1]=L=>r.recipe_name=L),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",$o,[ko,e(j,{modelValue:r.category,"onUpdate:modelValue":N[2]||(N[2]=L=>r.category=L),readonly:"",dense:"",outlined:""},null,8,["modelValue"])]),a("div",null,[e(j,{modelValue:r.target,"onUpdate:modelValue":N[3]||(N[3]=L=>r.target=L),outlined:"",dense:"",suffix:" / 1kg",type:"number",label:"Target Pcs"},null,8,["modelValue"])]),a("div",null,[Co,e(Ae,{modelValue:h.value,"onUpdate:modelValue":N[4]||(N[4]=L=>h.value=L),"use-input":"","use-chips":"","chips-color":"primary",multiple:"","input-debounce":"0",options:C.value,behavior:"menu","hide-dropdown-icon":"",outlined:"",dense:"",label:"Bread/s",onNewValue:ce,onFilter:ae,rules:[L=>L&&L.length>0||"Bread is required"]},{"no-option":t(()=>[e(ge,null,{default:t(()=>[e(ve,{class:"text-grey"},{default:t(()=>[V(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options","rules"])]),a("div",Po,[Ro,a("div",null,[e(Ue,{dense:"",separator:"",class:"box"},{default:t(()=>[(f(!0),q(K,null,me(B.value,(L,ye)=>(f(),H(ge,{key:ye},{default:t(()=>[e(ve,null,{default:t(()=>[e(Te,null,{default:t(()=>[V(y(L.label),1)]),_:2},1024)]),_:2},1024),e(ve,null,{default:t(()=>[V(y(L.quantity)+" "+y(L.unit),1)]),_:2},1024),e(ve,{side:""},{default:t(()=>[e(D,{onClick:Fe=>Z(ye),color:"grey-10",icon:"backspace",dense:"",flat:"",round:""},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),a("div",qo,[a("div",So,[a("div",null,[Vo,e(Ae,{modelValue:M.name,"onUpdate:modelValue":N[5]||(N[5]=L=>M.name=L),debounce:"3000",outlined:"","chips-color":"primary",options:F.value,dense:"",label:"Ingredients",behavior:"menu","use-input":"","hide-dropdown-icon":"",onFilter:ue,style:{width:"215px","max-width":"450px","min-width":"80px"}},{"no-option":t(()=>[e(ge,null,{default:t(()=>[e(ve,{class:"text-grey"},{default:t(()=>[V(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","options"])]),a("div",null,[Do,e(j,{modelValue:M.quantity,"onUpdate:modelValue":N[6]||(N[6]=L=>M.quantity=L),modelModifiers:{number:!0},outlined:"",dense:"",type:"number",label:"Quantity",suffix:((pe=M==null?void 0:M.name)==null?void 0:pe.unit)||"",style:{width:"115px"},hint:"Enter the quantity as a decimal",mask:"##.##"},null,8,["modelValue","suffix"])])]),a("form",{onKeyup:ke(st(we,["prevent"]),["enter"])},[a("div",To,[e(D,{padding:"xs md",type:"button",size:"sm",outline:"",dense:"",label:"add",icon:"add",color:"purple",onClick:we})])],40,Bo)])]}),_:1}),e(Ce,{class:"row q-ma-md",align:"right"},{default:t(()=>[e(D,{class:"glossy",color:"grey-9",label:"Dismiss",onClick:l}),e(D,{class:"glossy",color:"teal",label:"Create",onClick:_e,disable:!w.value},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var No=J(Uo,[["__scopeId","data-v-2adb6214"]]);const lt=d=>(ee("data-v-33664d62"),d=d(),te(),d),Io=lt(()=>a("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),Ho=lt(()=>a("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),Fo={__name:"RecipeDelete",props:["delete"],setup(d){const v=Qe(),x=d,P=R(!1),b=()=>{P.value=!0},c=async()=>{await v.deleteRecipe(x.delete.row.id),P.value=!1};return(_,k)=>(f(),q(K,null,[e(D,{onClick:b,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"","aria-label":"Delete"},{default:t(()=>[e(E,{class:"bg-negative",delay:200},{default:t(()=>[V("Delete")]),_:1})]),_:1}),e(G,{modelValue:P.value,"onUpdate:modelValue":k[0]||(k[0]=$=>P.value=$),persistent:""},{default:t(()=>[e(O,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[e(S,{class:"q-pt-none q-pb-sm"},{default:t(()=>[Io,Ho]),_:1}),e(Pe,{class:"q-mb-md"}),e(S,null,{default:t(()=>[e(Ce,{align:"right",class:"q-pt-none"},{default:t(()=>[Y(e(D,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[W]]),e(D,{dense:"",label:"Delete",color:"negative",onClick:c,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ao=J(Fo,[["__scopeId","data-v-33664d62"]]);const Ke=d=>(ee("data-v-1968f928"),d=d(),te(),d),Mo={class:"row justify-between"},Lo={class:"q-my-sm"},zo={key:0,class:"spinner-wrapper"},Oo={key:1},Qo={key:0,class:"data-error"},jo=Ke(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Eo=Ke(()=>a("div",{class:"q-pb-sm text-center text-h6 text-weight-bold text-subtitle2"}," Breads List ",-1)),Ko=Ke(()=>a("div",{class:"q-pb-sm text-center text-h6 text-weight-bold text-subtitle2"}," Ingredients List ",-1)),Yo={class:"row justify-center q-gutter-x-md"},Go={__name:"RecipeTable",setup(d){const x=he().params.branch_id,P=Qe(),b=R(""),c=R(!0),_=R([]),k=R(!1),$=R({rowsPerPage:0}),g=["inactive","active"],m=A(()=>P.branchRecipes);console.log("branch recipe",m.value);const l=A(()=>b.value?m.value.filter(s=>s.name.toLowerCase().includes(b.value.toLowerCase())):m.value);qe(async()=>{x&&await n(x)});const n=async s=>{try{c.value=!0;const h=await P.fetchBranchRecipes(s);m.value=h,console.log("branchRecipeRows",m.value),m.value.length||(k.value=!0),console.log("Branch recipe",m.value)}catch(h){console.log("Error fetching recipe",h)}finally{c.value=!1}};async function o(s,h){try{const p=await ne.put("/api/update-target/"+s.id,{target:parseInt(h)});if(console.log("response",p),p.status==200){const C=_.value.findIndex(B=>B.id==s.id);_.value[C]=h}le.create({type:"positive",message:"Recipe target edited successfully"})}catch(p){console.error("Error updating recipe target:",p),le.create({type:"negative",message:"Failed to edit recipe target"})}}async function i(s,h){try{if((await ne.put("/api/branch-update-status/"+s.id,{status:h})).status==200){const C=_.value.findIndex(B=>B.id==s.id);_.value[C]=h}le.create({type:"positive",message:"Recipe status change successfully"})}catch(p){console.error("Error updating recipe status:",p),le.create({type:"negative",message:"Failed to change recipe status"})}}const w=s=>s?s.split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1).toLowerCase()).join(" "):"",u=[{name:"name",label:"Recipe name",align:"center",field:s=>s.name},{name:"category",label:"Category",align:"center",field:s=>s.recipe},{name:"target",label:"Target",align:"center",field:"target"},{name:"status",label:"Status",align:"center",field:"status"},{name:"bread_groups",label:"List of Bread",align:"center",field:"bread_groups"},{name:"ingredient_groups",label:"List of Ingredients",align:"center",field:"ingredient_groups"},{name:"action",label:"Action",align:"center",sortable:!0}],r=s=>{switch(s){case"inactive":return"grey";case"active":return"green";default:return"grey"}};return(s,h)=>(f(),q(K,null,[a("div",Mo,[a("div",null,[e(j,{class:"q-pb-lg q-pl-md",modelValue:b.value,"onUpdate:modelValue":h[0]||(h[0]=p=>b.value=p),outlined:"",placeholder:"Search",debounce:"1000",style:{width:"450px","max-width":"1500px","min-width":"100px"},flat:"",dense:"",rounded:""},{append:t(()=>[e(se,{name:"search"})]),_:1},8,["modelValue"])]),a("div",Lo,[e(No)])]),c.value?(f(),q("div",zo,[e(He,{size:"50px",color:"primary"})])):(f(),q("div",Oo,[l.value.length===0?(f(),q("div",Qo,[e(se,{name:"warning",color:"warning",size:"4em"}),jo])):(f(),H(de,{key:1,class:"table-container sticky-header",filter:b.value,"virtual-scroll-sticky-size-start":48,flat:"",columns:u,rows:l.value,"row-key":"name","virtual-scroll":"",pagination:$.value,"onUpdate:pagination":h[1]||(h[1]=p=>$.value=p),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"350px"}},{"body-cell-name":t(p=>[e(I,{props:p},{default:t(()=>[a("span",null,y(w(p.row.name)),1)]),_:2},1032,["props"])]),"body-cell-category":t(p=>[e(I,{props:p},{default:t(()=>[a("span",null,y(w(p.row.category)),1)]),_:2},1032,["props"])]),"body-cell-target":t(p=>[e(I,{"auto-width":"",class:"cursor-pointer text-center"},{default:t(()=>[a("span",null,[V(y(p.row.target?p.row.target:"Set Target")+" ",1),e(E,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[V("Edit Target")]),_:1})]),e(Re,{"onUpdate:modelValue":[C=>o(p.row,C),C=>p.row.target=C],modelValue:p.row.target,"auto-save":""},{default:t(C=>[e(j,{modelValue:C.value,"onUpdate:modelValue":B=>C.value=B,dense:"",suffix:"pcs",autofocus:"",counter:"",mask:"###",onKeyup:ke(C.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1024)]),"body-cell-status":t(p=>[e(I,{props:p},{default:t(()=>[e(ie,{outline:"",color:r(p.row.status)},{default:t(()=>[V(y(w(p.row.status))+" ",1),e(E,{class:"bg-blue-grey-8",offset:[10,10]},{default:t(()=>[V("Change Status")]),_:1})]),_:2},1032,["color"]),e(Re,{"onUpdate:modelValue":[C=>i(p.row,C),C=>p.row.status=C],modelValue:p.row.status,"auto-save":""},{default:t(C=>[a("span",null,y(p.row.name),1),e(Ae,{modelValue:C.value,"onUpdate:modelValue":B=>C.value=B,dense:"",label:"status",autofocus:"",options:g,counter:"",mask:"###",onKeyup:ke(C.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["onUpdate:modelValue","modelValue"])]),_:2},1032,["props"])]),"body-cell-bread_groups":t(p=>[e(I,{props:p},{default:t(()=>[e(E,{offset:[0,10],delay:600,class:"bg-info text-dark text-subtitle1"},{default:t(()=>[Eo,e(Pe,{class:"q-mb-md",color:"yellow"}),(f(!0),q(K,null,me(p.row.bread_groups,C=>(f(),q("div",{key:C},y(C),1))),128))]),_:2},1024),e(Ye,{square:"",outline:"",color:"red-6",class:"text-white"},{default:t(()=>[V(y(p.row.bread_groups.length)+" breads ",1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-ingredient_groups":t(p=>[e(I,{props:p},{default:t(()=>[e(E,{delay:600,class:"bg-info text-dark text-subtitle1",style:{width:"300px"}},{default:t(()=>[Ko,e(Pe,{class:"q-mb-md",color:"yellow"}),(f(!0),q(K,null,me(p.row.ingredient_groups,C=>(f(),q("div",{class:"row justify-between",key:C.ingredient_name},[a("div",null,y(C.ingredient_name),1),a("div",null,y(C.quantity)+" "+y(C.unit),1)]))),128))]),_:2},1024),e(Ye,{square:"",outline:"",color:"purple-6",class:"text-white"},{default:t(()=>[V(y(p.row.ingredient_groups.length)+" ingredients ",1)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-action":t(p=>[e(I,{props:p},{default:t(()=>[a("div",Yo,[e(Ao,{delete:p},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Wo=J(Go,[["__scopeId","data-v-1968f928"]]);const Jo={__name:"RecipePage",setup(d){return(v,x)=>(f(),q("div",null,[e(Wo)]))}};const Xo={class:"elegant-container q-gutter-md"},Zo={class:"text-h6 row justify-between"},en={class:"q-gutter-sm"},tn={class:"tab-container"},an={__name:"BranchIdPage",setup(d){const v=he(),x=R(""),P=rt(),b=async g=>(await ne.get(`/api/branches/${g}`)).data,c=async()=>{const g=v.params.branch_id,m=await b(g);m&&m.name?x.value=m.name:console.error("Branch data is missing 'name' property or invalid:",m)};qe(()=>{c()});const _=g=>g?g.split(" ").map(m=>m.charAt(0).toUpperCase()+m.slice(1).toLowerCase()).join(" "):"",k=R("products"),$=()=>{De.show(),P.push("/admin/branches").finally(()=>{De.hide()})};return(g,m)=>(f(),H(it,{padding:""},{default:t(()=>[a("div",Xo,[a("div",Zo,[a("div",null,[e(D,{outline:"",flat:"",icon:"arrow_back",onClick:$}),e(Se)]),a("div",null,[e(se,{name:"fa-solid fa-store",color:"red-6"}),V(" "+y(_(x.value)),1)])]),a("div",en,[a("div",tn,[e(We,{modelValue:k.value,"onUpdate:modelValue":m[0]||(m[0]=l=>k.value=l),dense:"",class:"bg-grey-2 text-grey-7 tabs-as-cards","active-color":"red-6","indicator-color":"transparent",align:"justify"},{default:t(()=>[e(xe,{name:"products",label:"Products"}),e(xe,{name:"rawMaterials",label:"Raw Materials"}),e(xe,{name:"recipe",label:"Recipe"}),e(xe,{name:"production",label:"Production"})]),_:1},8,["modelValue"])]),e(O,{class:"q-mt-sm"},{default:t(()=>[e(Je,{modelValue:k.value,"onUpdate:modelValue":m[1]||(m[1]=l=>k.value=l),animated:""},{default:t(()=>[e($e,{name:"products"},{default:t(()=>[e(Nt)]),_:1}),e($e,{name:"rawMaterials"},{default:t(()=>[e(sa)]),_:1}),e($e,{name:"recipe"},{default:t(()=>[e(Jo)]),_:1}),e($e,{name:"production"},{default:t(()=>[e(yo)]),_:1})]),_:1},8,["modelValue"])]),_:1})])])]),_:1}))}};var Fn=J(an,[["__scopeId","data-v-1194b1a2"]]);export{Fn as default};
