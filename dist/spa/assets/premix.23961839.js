import{d as $,r as i,P as a,N as y}from"./index.68153375.js";import{api as c}from"./axios.c29deb3c.js";const M=$("premix",()=>{const w=i(null),p=i([]),n=i([]),m=i([]),f=i([]),x=i([]),g=i([]),l=i([]),u=i([]),v=i([]),h=i([]),D=i([]),R=async(o,e,t,r)=>{try{const s=await c.get(`/api/get-request-branch-premix/${o}`,{params:{page:e,per_page:t,search:r}});h.value=s.data}catch(s){console.error(s)}},q=async o=>{console.log("warehouseId",o)},P=async(o,e,t,r)=>{try{return(await c.get(`/api/get-request-branch-employee-premix/${o}/${e}`,{params:{page:t,per_page:r}})).data}catch(s){console.error(s)}};return{premix:w,premixes:p,pendingPremixData:n,confirmPremixData:m,declinePremixData:f,processPremixData:x,completedPremixData:g,toDeliverPremixData:l,toReceivePremixData:u,receivePremixData:v,branchPremix:h,branchEmployeePremix:D,savePremix:async o=>{console.log("data from store",o),console.log("data from store branch id",o.branch_id),a.show();try{const e=await c.post("/api/branch-premix",o);p.value=e.data}catch(e){console.error(e)}finally{a.hide()}},fetchBranchPremix:async o=>{try{const e=await c.get(`/api/get-branch-premix/${o}`);p.value=e.data}catch(e){console.error(e)}},searchPremix:async(o,e)=>{console.log("searchQuery",o),console.log("branchId",e);const t=await c.get("/api/search-premix",{params:{keyword:o,branch_id:e}});console.log("premix search",t.data),p.value=t.data},fetchPendingPremix:async(o,e)=>{console.log("warehouseId",o),console.log("category",e);try{const t=await c.get(`/api/pending-premix/${o}`,{params:{status:e}});console.log("pendong",t.data),n.value=t.data}catch(t){console.error("error",t)}},confirmPremix:async o=>{console.log("confirmdata",o),a.show();try{const e=await c.post("/api/confirm-premix",o);if(console.log("confirm",e.data),e.status===200){const t=o.id,r=n.value.findIndex(s=>s.id===t);r!==-1&&n.value.splice(r,1)}return e.data}catch(e){console.log(e)}finally{a.hide()}},fetchConfirmPremix:async o=>{console.log("warehouseId",o);try{const e=await c.get(`/api/get-confirm-premix/${o}`);console.log("confirmed.data",e.data),m.value=e.data}catch(e){console.error(e)}},declinePremix:async o=>{console.log("declineData",o);try{const e=await c.post("/api/decline-premix",o);if(e.status===200){const t=o.id,r=n.value.findIndex(s=>s.id===t);r!==-1&&n.value.splice(r,1)}console.log("decline Reports",e.data),f.value=e.data}catch(e){console.log("error",e)}},fetchDeclinePremix:async o=>{console.log("fetchDeclinePremix warehouseId",o),console.log("status",status);const e=await c.get(`/api/get-decline-premix/${o}`);console.log("decline.data",e.data),f.value=e.data},processPremix:async o=>{console.log("process data",o),a.show();try{const e=await c.post("/api/process-premix",o);if(console.log("process.data.premix_history.status",e.status),e.status===200){const t=o.id,r=m.value.findIndex(s=>s.id===t);console.log("index",r),r!==-1&&m.value.splice(r,1)}return console.log("process",e.data),e.data}catch(e){console.log(e)}finally{a.hide()}},fetchProcessPremix:async o=>{console.log("warehouseId",o);try{const e=await c.get(`/api/get-process-premix/${o}`);console.log("process.data",e.data),x.value=e.data}catch(e){console.log(e)}},completedPremix:async o=>{console.log("data completed premix",o),a.show();try{const e=await c.post("/api/completed-premix",o);if(e.status===200){const t=o.id,r=x.value.findIndex(s=>s.id===t);console.log("index",r),r!==-1&&x.value.splice(r,1)}return console.log("completed",e.data),e.data}catch(e){console.log(e)}finally{a.hide()}},fetchCompletedPremix:async o=>{console.log("warehouseId",o);const e=await c.get(`/api/get-completed-premix/${o}`);console.log("process.data",e.data),g.value=e.data},toDeliverPremix:async o=>{console.log("data completed premix",o),a.show();try{const e=await c.post("/api/to-deliver-premix",o);if(e.status===200){const t=o.id,r=g.value.findIndex(s=>s.id===t);r!==-1&&g.value.splice(r,1)}console.log("toDeliver",e.data),l.value=e.data}catch(e){console.log(e)}finally{a.hide()}},fetchToDeliverPremix:async o=>{console.log("warehouseId",o);const e=await c.get(`/api/get-to-deliver-premix/${o}`);console.log("TO Deliver data",e.data),l.value=e.data},toReceivePremix:async o=>{console.log("data receive premix",o),a.show();try{const e=await c.post("/api/to-receive-premix",o);if(e.status===200){const t=o.id,r=l.value.findIndex(s=>s.id===t);r!==-1&&l.value.splice(r,1)}console.log("toReceive",e.data),u.value=e.data}catch(e){console.log(e)}finally{a.hide()}},fetchToReceivePremix:async o=>{console.log("warehouseId",o);const e=await c.get(`/api/get-to-receive-premix/${o}`);console.log("TO receive data",e.data),u.value=e.data},fetchRequestBranchPremix:R,receivePremix:async o=>{console.log("data to be received",o),a.show();try{const e=await c.post("/api/receive-premix",o);if(console.log("response to recieve",e.data),e.message==="Branch raw materials updated successfully"){const t=e.data.receivePremixes.request_premixes_id,r=e.data.receivePremixes.status,s=h.value.findIndex(d=>d.id===t);s!==-1&&h.value[s].status}}catch(e){console.log(e)}finally{a.hide()}},fetchReceivePremix:async(o,e,t,r)=>{try{const s=await c.get(`/api/get-receive-premix/${o}`,{params:{status:e,page:t,per_page:r}});v.value=s.data}catch(s){console.log(s)}},saveRequestPremix:async(o,e,t)=>{console.log("data request oremix",o),console.log("data request branchId",e),console.log("data request employeeId",t);const r=10,s=10;a.show();try{const d=await c.post("/api/request-premix",{requests:o});console.log("response",d.data),P(e,t,r,s),y.create({type:"positive",message:"Request Premix successfully"})}catch(d){console.error(d),y.create({type:"negative",message:"Request Premix Error"})}finally{a.hide()}},fetchRequestBranchEmployeePremix:P,fetchWarehousePremix:q}});export{M as u};
