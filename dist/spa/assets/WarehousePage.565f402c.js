import{Q as H}from"./QBadge.c335682b.js";import{c as j,r as f,t as ee,o as c,a3 as b,f as a,w as t,a0 as k,M as w,Q as N,I as Q,ae as A,a1 as G,J as n,K as V,e as $,L as O,bc as ae,a4 as z,a5 as oe,$ as I,bd as te,aJ as X,a2 as Y,O as K,R as J,H as ce,z as me,u as pe,aI as _e,P as Z}from"./index.a8483ba9.js";import{Q as he}from"./QPage.993338f9.js";import{Q as ve}from"./QSpinnerDots.2a817d62.js";import{Q as L,a as fe}from"./QTable.061e256e.js";import{Q as le}from"./QTooltip.0a286510.js";import{Q as se}from"./QSpace.1a0d6667.js";import{Q as ne,a as M,b as re}from"./QList.82ce6d25.js";import{Q as de}from"./QSelect.1604631a.js";import{C as T}from"./ClosePopup.7832e152.js";import{u as R}from"./warehouse.405211b5.js";import{u as ie}from"./employee.8d930943.js";import{_ as B}from"./plugin-vue_export-helper.21dcd24c.js";import"./QVirtualScroll.177941c8.js";import"./use-virtual-scroll.34a194a7.js";import"./QMenu.e595986f.js";import"./selection.334a150c.js";import"./QChip.79982845.js";import"./axios.1f829a0c.js";const F=i=>(K("data-v-0f6edb2e"),i=i(),J(),i),ge=F(()=>n("div",{class:"text-h5 q-mr-md"},"\u{1F3ED} Edit Warehouse",-1)),ye={class:"q-mt-lg q-animated q-animate-bounce"},be=F(()=>n("div",null,"Name of Warehouse",-1)),we={class:"q-mt-md q-animated q-animate-bounce"},qe=F(()=>n("div",null,"Location",-1)),$e={class:"q-mt-md q-animated q-animate-bounce"},Ce=F(()=>n("div",null,"Person In-charge",-1)),xe={key:0,class:"custom-list z-top"},Ve={class:"row q-gutter-x-sm q-mt-md"},ke={class:"col-6 q-animated q-animate-bounce"},We=F(()=>n("div",null,"Phone Number",-1)),Se={class:"col-5 q-animated q-animate-bounce"},Qe=F(()=>n("div",null,"Status",-1)),De={__name:"WarehouseEditComponent",props:["edit"],setup(i){const q=ie(),C=R(),m=j(()=>q.employee),h=f(!1),x=["Open","Closed"],y=i,u=f(null),v=f(!1),g=f(!1),W=async()=>{u.value.trim()&&(v.value=!0,await q.searchPersonInCharge(u.value),v.value=!1,g.value=!0)},D=e=>{console.log("Selected Employee:",e),r.employee_id=e.id,r.employee_name=`${e.firstname} ${e.middlename?e.middlename.charAt(0)+".":""} ${e.lastname}`,u.value=`${e.firstname} ${e.middlename?e.middlename.charAt(0)+".":""} ${e.lastname}`,g.value=!1,console.log("Filled editBranchesForm Data:",r)},r=ee({name:"",location:"",person_incharge:"",employee_id:"",employee_name:"",phone:"",status:null}),P=()=>{var l,o;const e=y.edit.row;console.log("Edit Row Data:",e),g.value=!1,r.name=e.name,r.location=e.location,r.employee_id=e.employee_id,r.employee_name=e.employees?d(e.employees):"No Person in Charge",u.value=e.employees?d(e.employees):"No Person in Charge",r.warehouse_id=e!=null&&e.warehouse_id?e.warehouse_id:(l=e==null?void 0:e.warehouse)!=null&&l.id?(o=e==null?void 0:e.warehouse)==null?void 0:o.id:"",r.phone=e.phone,r.status=e.status,h.value=!0,console.log("Edit Data:",r)},d=e=>{const l=S=>S?S.charAt(0).toUpperCase()+S.slice(1).toLowerCase():"",o=e.firstname?l(e.firstname):"No Firstname",p=e.middlename?l(e.middlename).charAt(0)+".":"",U=e.lastname?l(e.lastname):"No Lastname";return`${o} ${p} ${U}`},s=()=>{r.name="",r.location="",r.person_incharge="",r.employee_id="",r.employee_name="",r.phone="",r.status=null,u.value=null,g.value=!1},_=async()=>{console.log("updatedWarehouse",r);try{await C.updateWarehouses(y.edit.row.id,r),s(),h.value=!1}catch(e){console.error("Failed to update ingredients:",e)}};return(e,l)=>(c(),b(z,null,[a(w,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:"",onClick:P},{default:t(()=>[a(le,{class:"bg-positive",delay:200},{default:t(()=>[k("Edit")]),_:1})]),_:1}),a(Y,{modelValue:h.value,"onUpdate:modelValue":l[6]||(l[6]=o=>h.value=o),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:t(()=>[a(N,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:t(()=>[a(Q,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:t(()=>[ge,a(se),A(a(w,{icon:"close",flat:"",dense:"",round:""},null,512),[[T]])]),_:1}),a(G,{class:"separator-gradient"}),a(Q,{class:"q-px-xl q-pt-none q-pb-lg"},{default:t(()=>[n("div",ye,[be,a(V,{modelValue:r.name,"onUpdate:modelValue":l[0]||(l[0]=o=>r.name=o),outlined:"",dense:""},null,8,["modelValue"])]),n("div",we,[qe,a(V,{modelValue:r.location,"onUpdate:modelValue":l[1]||(l[1]=o=>r.location=o),outlined:"",dense:""},null,8,["modelValue"])]),n("div",$e,[Ce,n("div",null,[a(V,{modelValue:u.value,"onUpdate:modelValue":[l[2]||(l[2]=o=>u.value=o),W],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name or position",onFocus:l[3]||(l[3]=o=>g.value=!0)},{append:t(()=>[v.value?(c(),$(ae,{key:1,color:"grey",size:"sm"})):(c(),$(O,{key:0,name:"search"}))]),default:t(()=>[g.value&&u.value?(c(),b("div",xe,[a(N,null,{default:t(()=>[a(ne,{separator:""},{default:t(()=>{var o;return[(o=m.value)!=null&&o.length?(c(!0),b(z,{key:1},oe(m.value,p=>(c(),$(M,{onClick:U=>D(p),key:p.id,clickable:""},{default:t(()=>[a(re,null,{default:t(()=>[k(I(`${p.firstname} ${p.middlename?p.middlename.charAt(0)+".":""} ${p.lastname}`),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(c(),$(M,{key:0},{default:t(()=>[k(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):te("",!0)]),_:1},8,["modelValue"])])]),n("div",Ve,[n("div",ke,[We,a(V,{modelValue:r.phone,"onUpdate:modelValue":l[4]||(l[4]=o=>r.phone=o),outlined:"",dense:"",mask:"(+63) ### - ### - ####",placeholder:"(+63)### - ### - ####",rules:[o=>o&&o.length>0]},null,8,["modelValue","rules"])]),n("div",Se,[Qe,a(de,{modelValue:r.status,"onUpdate:modelValue":l[5]||(l[5]=o=>r.status=o),outlined:"",dense:"",options:x,behavior:"menu"},null,8,["modelValue"])])])]),_:1}),a(X,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:t(()=>[A(a(w,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[T]]),a(w,{class:"glossy",color:"teal",label:"Save",onClick:_})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ie=B(De,[["__scopeId","data-v-0f6edb2e"]]);const ue=i=>(K("data-v-194221d8"),i=i(),J(),i),Ne=ue(()=>n("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),Fe=ue(()=>n("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),Ee={__name:"WarehouseDeleteComponent",props:["delete"],setup(i){const q=R(),C=i,m=f(!1),h=()=>{m.value=!0},x=async()=>{try{await q.deleteWarehouse(C.delete.row.id)}catch(y){console.error("Error deleting item:",y)}m.value=!1};return(y,u)=>(c(),b(z,null,[a(w,{onClick:h,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:""},{default:t(()=>[a(le,{class:"bg-negative",delay:200},{default:t(()=>[k("Delete")]),_:1})]),_:1}),a(Y,{modelValue:m.value,"onUpdate:modelValue":u[0]||(u[0]=v=>m.value=v)},{default:t(()=>[a(N,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:t(()=>[a(Q,{class:"q-pt-none q-pb-sm"},{default:t(()=>[Ne,Fe]),_:1}),a(G,{class:"q-mb-md"}),a(X,{align:"right",class:"q-pt-none"},{default:t(()=>[A(a(w,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[T]]),a(w,{dense:"",label:"Delete",color:"negative",onClick:x,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Pe=B(Ee,[["__scopeId","data-v-194221d8"]]);const Ue=i=>(K("data-v-5cb190bc"),i=i(),J(),i),Le={key:0,class:"spinner-wrapper"},Ae={key:1},ze={key:0,class:"data-error"},Te=Ue(()=>n("div",{class:"q-ml-sm text-h6"},"No data available",-1)),Be=["onClick"],je={class:"row justify-center q-gutter-x-md"},Oe={__name:"WarehouseTableComponent",setup(i){const q=ce(),C=R(),m=f(""),h=f(!0),x=j(()=>C.warehouses),y=f(!1),u=f({rowPerPage:0}),v=j(()=>m.value?x.value.filter(s=>s.name.toLowerCase().includes(m.value.toLowerCase())):x.value);me(async()=>{const s=await g();console.log("respisne warehouse",s)});const g=async()=>{try{h.value=!0;const s=await C.fetchWarehouses();x.value.length||(y.value=!0),console.log("wawrehouse respo",s)}catch{y.value=!0}finally{h.value=!1}};pe(m,async s=>{h.value=!0,await new Promise(_=>setTimeout(_,1e3)),h.value=!1,y.value=v.value.length===0});const W=s=>{const _=p=>p?p.charAt(0).toUpperCase()+p.slice(1).toLowerCase():"",e=s.firstname?_(s.firstname):"No Firstname",l=s.middlename?_(s.middlename).charAt(0)+".":"",o=s.lastname?_(s.lastname):"No Lastname";return`${e} ${l} ${o}`},D=s=>s?s.split(" ").map(_=>_.charAt(0).toUpperCase()+_.slice(1).toLowerCase()).join(" "):"",r=[{name:"name",label:"Name of Warehouse",align:"left",field:s=>s.name,format:s=>`${s}`,sortable:!0},{name:"location",label:"Location",align:"left",field:"location",sortable:!0},{name:"personIncharge",label:"Person In-charge",align:"left",field:s=>W(s)},{name:"phone",label:"Phone",align:"center",field:"phone"},{name:"status",label:"Status",align:"left",field:"status"},{name:"action",label:"Action",align:"center",field:"action"}],P=s=>s==="Open"?"info":"accent",d=async s=>{console.log("waraehouse",s),Z.show();try{await q.push({name:"WarehouseDetail",params:{warehouse_id:s.id,warehouse_name:s.name||"Unknown Warehouse"}})}finally{Z.hide()}};return(s,_)=>(c(),b(z,null,[n("div",null,[a(V,{modelValue:m.value,"onUpdate:modelValue":_[0]||(_[0]=e=>m.value=e),class:"q-pb-lg q-pl-sm dynamic-width",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100"},{append:t(()=>[a(O,{name:"search"})]),_:1},8,["modelValue"])]),h.value?(c(),b("div",Le,[a(ve,{size:"50px",color:"primary"})])):(c(),b("div",Ae,[v.value.length===0?(c(),b("div",ze,[a(O,{name:"warning",color:"warning",size:"4em"}),Te])):(c(),$(fe,{key:1,class:"table-container elegant-container sticky-header",filter:m.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"500px"},columns:r,rows:v.value,"row-key":"name",pagination:u.value,"onUpdate:pagination":_[1]||(_[1]=e=>u.value=e),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-name":t(e=>[a(L,{key:"name",props:e},{default:t(()=>[n("a",{onClick:_e(l=>d(e.row),["prevent"]),class:"warehouse-link"},I(D(e.row.name)),9,Be)]),_:2},1032,["props"])]),"body-cell-location":t(e=>[a(L,{props:e},{default:t(()=>[k(I(D(e.row.location)),1)]),_:2},1032,["props"])]),"body-cell-personIncharge":t(e=>[a(L,{props:e},{default:t(()=>[k(I(W(e.row.employees)),1)]),_:2},1032,["props"])]),"body-cell-status":t(e=>[a(L,{key:"name",props:e},{default:t(()=>[a(H,{outline:"",color:P(e.row.status)},{default:t(()=>[k(I(e.row.status),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-action":t(e=>[a(L,{props:e},{default:t(()=>[n("div",je,[a(Ie,{edit:e},null,8,["edit"]),a(Pe,{delete:e},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Me=B(Oe,[["__scopeId","data-v-5cb190bc"]]);const E=i=>(K("data-v-074f87da"),i=i(),J(),i),Ke=E(()=>n("div",{class:"text-h5 q-mr-md"},"\u{1F3ED} Add New Warehouse",-1)),Je={class:"q-mt-lg q-animated q-animate-bounce"},Re=E(()=>n("div",null,"Name of Warehouse",-1)),He={class:"q-mt-md q-animated q-animate-bounce"},Ge=E(()=>n("div",null,"Location",-1)),Xe={class:"q-mt-md q-animated q-animate-bounce"},Ye=E(()=>n("div",null,"Person In-charge",-1)),Ze={key:0,class:"custom-list z-top"},ea={class:"row q-gutter-x-sm q-mt-md"},aa={class:"col-6 q-animated q-animate-bounce"},oa=E(()=>n("div",null,"Phone Number",-1)),ta={class:"col-5 q-animated q-animate-bounce"},la=E(()=>n("div",null,"Status",-1)),sa={__name:"WarehouseCreateComponent",setup(i){const q=ie(),C=R(),m=f(!1),h=j(()=>q.employee),x=["Open","Close"],y=()=>{m.value=!0},u=f(""),v=f(!1),g=f(!1),W=f(!1),D=async()=>{u.value.trim()&&(W.value=!0,await q.searchPersonInCharge(u.value),W.value=!1,v.value=!0)},r=e=>{console.log("Selected Employee:",e),d.employee_id=e.id,d.employee_name=`${e.firstname} ${e.middlename?e.middlename.charAt(0)+".":""} ${e.lastname}`,u.value=`${e.firstname} ${e.middlename?e.middlename.charAt(0)+".":""} ${e.lastname}`,v.value=!1,console.log("Filled addNewBranchForm Data:",d)},P=e=>{const l=S=>S?S.charAt(0).toUpperCase()+S.slice(1).toLowerCase():"",o=e.firstname?l(e.firstname):"No Firstname",p=e.middlename?l(e.middlename).charAt(0)+".":"",U=e.lastname?l(e.lastname):"No Lastname";return`${o} ${p} ${U}`},d=ee({name:"",location:"",employee_id:"",employee_name:"",phone:"",status:null}),s=async()=>{console.log("awarehoouse data send",d),g.value=!0,await C.createWarehouses(d),g.value=!1,_(),m.value=!1},_=()=>{d.name="",d.location="",d.person_incharge="",d.phone="",u.value=null,d.employee="",d.status=[""]};return(e,l)=>(c(),b("div",null,[a(w,{outline:"",icon:"add_circle",label:"Add Warehouse",onClick:y,style:{"background-color":"#ef4444"}}),a(Y,{modelValue:m.value,"onUpdate:modelValue":l[6]||(l[6]=o=>m.value=o),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:t(()=>[a(N,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:t(()=>[a(Q,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:t(()=>[Ke,a(se),A(a(w,{icon:"close",flat:"",dense:"",round:""},null,512),[[T]])]),_:1}),a(G,{class:"separator-gradient"}),a(Q,{class:"q-px-xl q-pt-none q-pb-lg"},{default:t(()=>[n("div",Je,[Re,a(V,{class:"text-capitalize",modelValue:d.name,"onUpdate:modelValue":l[0]||(l[0]=o=>d.name=o),outlined:"",dense:"",rules:[o=>o&&o.length>0]},null,8,["modelValue","rules"])]),n("div",He,[Ge,a(V,{class:"text-capitalize",modelValue:d.location,"onUpdate:modelValue":l[1]||(l[1]=o=>d.location=o),outlined:"",dense:"",rules:[o=>o&&o.length>0]},null,8,["modelValue","rules"])]),n("div",Xe,[Ye,a(V,{modelValue:u.value,"onUpdate:modelValue":[l[2]||(l[2]=o=>u.value=o),D],label:"Search Employee",outlined:"",dense:"",debounce:"500",placeholder:"Enter name or position",onFocus:l[3]||(l[3]=o=>v.value=!0)},{append:t(()=>[W.value?(c(),$(ae,{key:1,color:"grey",size:"sm"})):(c(),$(O,{key:0,name:"search"}))]),default:t(()=>[v.value&&u.value?(c(),b("div",Ze,[a(N,null,{default:t(()=>[a(ne,{separator:""},{default:t(()=>{var o;return[(o=h.value)!=null&&o.length?(c(!0),b(z,{key:1},oe(h.value,p=>(c(),$(M,{onClick:U=>r(p),key:p.id,clickable:""},{default:t(()=>[a(re,null,{default:t(()=>[k(I(P(p)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(c(),$(M,{key:0},{default:t(()=>[k(" No Employee Record ")]),_:1}))]}),_:1})]),_:1})])):te("",!0)]),_:1},8,["modelValue"])]),n("div",ea,[n("div",aa,[oa,a(V,{modelValue:d.phone,"onUpdate:modelValue":l[4]||(l[4]=o=>d.phone=o),outlined:"",dense:"",mask:"(+63) ### - ### - ####",placeholder:"(+63)### - ### - ####",rules:[o=>o&&o.length>0]},null,8,["modelValue","rules"])]),n("div",ta,[la,a(de,{modelValue:d.status,"onUpdate:modelValue":l[5]||(l[5]=o=>d.status=o),outlined:"",dense:"",options:x,"hide-dropdown-icon":"",behavior:"menu"},null,8,["modelValue"])])])]),_:1}),a(X,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:t(()=>[A(a(w,{class:"glossy",color:"grey-9",label:"Dismiss"},null,512),[[T]]),a(w,{class:"glossy",color:"teal",label:"Create",onClick:s,loading:g.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};var na=B(sa,[["__scopeId","data-v-074f87da"]]);const ra={class:"text-h6 text-dark"},da={class:"q-gutter-x-sm"},ia={align:"right"},ua={__name:"WarehousePage",setup(i){return(q,C)=>(c(),$(he,null,{default:t(()=>[a(N,{class:"elegant-container",flat:""},{default:t(()=>[a(Q,{class:"row justify-between"},{default:t(()=>[n("div",ra,[n("div",da,[a(H,{label:"Open",outline:"",color:"info"}),a(H,{label:"Closed",outline:"",color:"accent"})])]),n("div",ia,[a(na)])]),_:1}),a(Q,null,{default:t(()=>[a(Me)]),_:1})]),_:1})]),_:1}))}};var Qa=B(ua,[["__scopeId","data-v-01606a0d"]]);export{Qa as default};
