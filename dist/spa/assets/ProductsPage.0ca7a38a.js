import{ax as yt,aS as bt,g as xt,r as x,q as tt,c as q,j as Me,at as Ue,af as wt,k as $t,t as Re,u as X,o as f,a3 as R,J as e,f as t,w as a,a4 as Z,a5 as fe,e as H,Q as M,bg as W,$ as y,aK as A,a1 as $e,I as S,M as j,K as z,a2 as ne,P as ye,N as qe,O as re,R as ie,L as K,ae as Ve,be as se,aI as nt,a0 as J,bK as qt,bL as kt,bd as Pt,aJ as rt,z as Ze,a as St}from"./index.04f07f6a.js";import{Q as Ce}from"./QTab.b6c6fa5c.js";import{Q as Ct}from"./QTabs.3f778fce.js";import{Q as xe}from"./QTabPanel.7f8a4880.js";import{Q as Ot}from"./QTabPanels.a7e5db25.js";import{Q as Be}from"./QScrollArea.d1c0b7ed.js";import{Q as Qe}from"./QSpinnerIos.76e5ad21.js";import{u as ae}from"./sales-report.e88aa85e.js";import{t as pe}from"./typography-format.abacc0ed.js";import{_ as Y}from"./plugin-vue_export-helper.21dcd24c.js";import{a as Oe,b as ee}from"./QMenu.85b7eaac.js";import{Q as st}from"./QList.2a76df91.js";import{Q as Vt,a as we}from"./QSelect.4e241ad4.js";import{C as Ie}from"./ClosePopup.da2f9252.js";import{u as It}from"./branch.0d130d45.js";import"./other-product.80a82f70.js";import{a as Rt,Q as Ee}from"./QTable.951abe4e.js";import{Q as it}from"./QBadge.b8b65794.js";import"./QSpinnerGears.df89ae41.js";import{Q as at}from"./QInnerLoading.77d8bb64.js";import{u as ge}from"./use-quasar.aaa5a51e.js";import{Q as Ke}from"./QChip.9cce8dc9.js";import{u as Fe}from"./use-dialog-plugin-component.c6ec0e7f.js";import{u as He}from"./branch-product.249ecd92.js";import{Q as Bt}from"./QTooltip.6e332971.js";import{Q as Dt}from"./QBtnGroup.fe748f94.js";import"./QPagination.c0ff560f.js";import{u as Qt}from"./cake-maker-report.e503dc51.js";import"./QResizeObserver.81359917.js";import"./rtl.276c3f1b.js";import"./use-panel.51d07029.js";import"./touch.9135741d.js";import"./selection.1d2ed5ec.js";import"./use-render-cache.3aae9b27.js";import"./QScrollObserver.29f3a2e5.js";import"./TouchPan.5d355633.js";import"./axios.31a697f3.js";import"./date.43cfa963.js";import"./position-engine.a4266f89.js";import"./use-virtual-scroll.ffa13264.js";import"./warehouse.b4513aff.js";import"./employee.3756fb00.js";import"./QVirtualScroll.cdc5de8f.js";import"./product.68ed4e2f.js";const ot={threshold:0,root:null,rootMargin:"0px"};function lt(o,u,m){let h,c,g;typeof m=="function"?(h=m,c=ot,g=u.cfg===void 0):(h=m.handler,c=Object.assign({},ot,m.cfg),g=u.cfg===void 0||bt(u.cfg,c)===!1),u.handler!==h&&(u.handler=h),g===!0&&(u.cfg=c,u.observer!==void 0&&u.observer.unobserve(o),u.observer=new IntersectionObserver(([s])=>{if(typeof u.handler=="function"){if(s.rootBounds===null&&document.body.contains(o)===!0){u.observer.unobserve(o),u.observer.observe(o);return}(u.handler(s,u.observer)===!1||u.once===!0&&s.isIntersecting===!0)&&dt(o)}},c),u.observer.observe(o))}function dt(o){const u=o.__qvisible;u!==void 0&&(u.observer!==void 0&&u.observer.unobserve(o),delete o.__qvisible)}var At=yt({name:"intersection",mounted(o,{modifiers:u,value:m}){const h={once:u.once===!0};lt(o,h,m),o.__qvisible=h},updated(o,u){const m=o.__qvisible;m!==void 0&&lt(o,m,u.value)},beforeUnmount:dt}),Ae=xt({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(o,{slots:u,emit:m}){const h=x(tt.value===!0?o.ssrPrerender:!1),c=q(()=>o.root!==void 0||o.margin!==void 0||o.threshold!==void 0?{handler:B,cfg:{root:o.root,rootMargin:o.margin,threshold:o.threshold}}:B),g=q(()=>o.disable!==!0&&(tt.value!==!0||o.once!==!0||o.ssrPrerender!==!0)),s=q(()=>[[At,c.value,void 0,{once:o.once}]]),v=q(()=>`--q-transition-duration: ${o.transitionDuration}ms`);function B(r){h.value!==r.isIntersecting&&(h.value=r.isIntersecting,o.onVisibility!==void 0&&m("visibility",h.value))}function L(){if(h.value===!0)return[Me("div",{key:"content",style:v.value},$t(u.default))];if(u.hidden!==void 0)return[Me("div",{key:"hidden",style:v.value},u.hidden())]}return()=>{const r=o.transition?[Me(Ue,{name:"q-transition--"+o.transition},L)]:L();return wt(o.tag,{class:"q-intersection"},r,"main",g.value,()=>s.value)}}});const de=o=>(re("data-v-3aa8caaa"),o=o(),ie(),o),Nt={class:"q-mt-md"},jt={key:0,class:"text-center q-pa-md"},Tt={key:1,class:"row q-pa-lg q-gutter-y-lg"},Lt=de(()=>e("img",{src:"https://cdn.quasar.dev/img/chicken-salad.jpg"},null,-1)),zt={class:"q-pa-xm row q-gutter-x-sm justify-between"},Ut=de(()=>e("div",null,"Quantity:",-1)),Ft={class:"q-pa-xm row q-gutter-x-sm justify-between"},Ht=de(()=>e("div",null,"Price:",-1)),Mt={class:"row justify-between"},Et={class:"text-h6"},Kt={class:"q-mb-lg row justify-between"},Zt=de(()=>e("div",{class:"text-weight-light"},"Remainings",-1)),Jt=de(()=>e("div",{class:"text-weight-light"},"Bread Out",-1)),Gt={class:"row q-gutter-xm justify-between"},Wt={class:"q-gutter-sm"},Xt=de(()=>e("div",{class:"text-weight-light"},"Beginning/s",-1)),Yt=de(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),es={class:"q-gutter-sm"},ts=de(()=>e("div",{class:"text-weight-light"},"New Production",-1)),ss=de(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),as={class:"q-gutter-sm"},os=de(()=>e("div",{class:"text-weight-light"},"Price",-1)),ls={align:"right"},ns={__name:"BreadCard",props:{filter:String},setup(o){var p,k,n;const{capitalizeFirstLetter:u,formatPrice:m}=pe(),h=ae(),c=h.user;console.log("userdataa",c);const g=((p=c.device)==null?void 0:p.reference_id)||((n=(k=c.device)==null?void 0:k.reference)==null?void 0:n.id)||"0";console.log("branchIdsss",g);const s=x(null),v=x(!1),B=x(!1),L=o,r=i=>{s.value=i,v.value=!0},_=Re({breadSold:0,remainnings:"",beginnings:0,breadOut:""}),V=x({remainnings:"",breadOut:""}),P=i=>{V.value[i]=""},I=()=>{V.value.remainnings="",V.value.breadOut="";let i=!0;return _.remainnings||(V.value.remainnings="Remaining is required",i=!1),_.breadOut||(V.value.breadOut="Bread Out is required",i=!1),i},C=()=>{if(s.value){console.log("selectedItem",s.value);const i=parseInt(s.value.total_quantity)||0,d=parseInt(_.remainnings)||0,l=parseInt(_.breadOut)||0,$=d+l;_.breadSold=i-$}};X(()=>_.remainnings,i=>{C()}),X(()=>_.breadOut,i=>{C()});const U=q(()=>s.value?_.breadSold*s.value.price:0);q(()=>m(U.value));const D=q(()=>h.breadProducts);X(D,i=>{});const F=q(()=>{var i;return((i=D.value)==null?void 0:i.filter(d=>d.product.name.toLowerCase().includes(L.filter.toLowerCase())))||[]}),w=()=>{s.value=null,_.breadSold=0,_.remainnings="",_.beginnings=0,_.breadOut="",v.value=!1},b=()=>{var d;if(!I())return;ye.show({spinner:Qe,message:`${u(s.value.product.name)} putting to the list...`,messageColor:"white"});const i={user_id:c==null?void 0:c.data.id,branch_id:g||((d=c.device)==null?void 0:d.reference_id),product_id:s.value.product.id,name:s.value.product.name,total:s.value.total_quantity,new_production:s.value.new_production,bread_sold:_.breadSold,bread_out:_.breadOut,beginnings:s.value.beginnings,remaining:_.remainnings,price:s.value.price,sales:U.value,new_production:s.value.new_production,branch_new_production:0};console.log("report",i),h.updateBreadReport(i),qe.create({message:"Product added successfully",color:"positive",position:"top"}),setTimeout(()=>{ye.hide(),w()},500)};return(i,d)=>(f(),R(Z,null,[e("div",Nt,[t(Be,{style:{height:"700px","max-width":"1500px"}},{default:a(()=>[!F.value||F.value.length===0?(f(),R("div",jt," No data available ")):(f(),R("div",Tt,[(f(!0),R(Z,null,fe(F.value,(l,$)=>(f(),H(Ae,{key:$,once:"",transition:"scale",class:"example-item q-gutter-sm"},{default:a(()=>[t(M,{onClick:N=>r(l),class:"q-ma-sm my-card"},{default:a(()=>[Lt,e("div",{class:W(["q-pa-sm",{"text-subtitle2":l.product.name.length<=5,"text-caption text-weight-medium":l.product.name.length>10&&l.product.name.length<=20,"text-caption":l.product.name.length>20}])},y(A(u)(l.product.name)),3),t($e),t(S,{class:"text-subtitle2 text-weight-regular"},{default:a(()=>[e("div",zt,[Ut,e("div",null,y(l.total_quantity),1)]),e("div",Ft,[Ht,e("div",null,y(A(m)(l.price)),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]))]),_:1})]),e("div",null,[t(ne,{modelValue:v.value,"onUpdate:modelValue":d[4]||(d[4]=l=>v.value=l),persistent:""},{default:a(()=>[t(M,{class:"my-card q-pa-md",style:{width:"700px","max-width":"80vw"}},{default:a(()=>[t(S,null,{default:a(()=>[e("div",Mt,[e("div",Et,y(A(u)(s.value?s.value.product.name:"")),1),e("div",null,[t(j,{round:"",dense:"",flat:"",icon:"close",onClick:w})])])]),_:1}),t(S,null,{default:a(()=>[e("div",Kt,[e("div",null,[Zt,t(z,{modelValue:_.remainnings,"onUpdate:modelValue":[d[0]||(d[0]=l=>_.remainnings=l),d[1]||(d[1]=l=>P("remainnings"))],dense:"",outlined:"",mask:"#####",suffix:"pcs",placeholder:"0",type:"number",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[l=>!!l||"Remainnings is required"],error:!!V.value.remainnings,"error-message":V.value.remainnings?"Remainings is required":""},null,8,["modelValue","rules","error","error-message"])]),e("div",null,[Jt,t(z,{modelValue:_.breadOut,"onUpdate:modelValue":[d[2]||(d[2]=l=>_.breadOut=l),d[3]||(d[3]=l=>P("breadOut"))],dense:"",outlined:"",type:"number",mask:"#####",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[l=>!!l||"Bread out is required"],error:!!V.value.breadOut,"error-message":V.value.breadOut},null,8,["modelValue","rules","error","error-message"])])]),e("div",Gt,[e("div",Wt,[Xt,t(z,{dense:"",outlined:"",readonly:"",label:s.value?s.value.beginnings:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[Yt]),_:1},8,["label"])]),e("div",es,[ts,t(z,{dense:"",outlined:"",readonly:"",label:s.value?s.value.new_production:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[ss]),_:1},8,["label"])]),e("div",as,[os,t(z,{dense:"",outlined:"",readonly:"",label:s.value?A(m)(s.value.price):"",style:{width:"150px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),_:1}),t(S,null,{default:a(()=>[e("div",ls,[t(j,{color:"red-6",label:"Ok",loading:B.value,onClick:b},null,8,["loading"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var rs=Y(ns,[["__scopeId","data-v-3aa8caaa"]]);const Ne={__name:"SearchEngine",emits:["update-search"],setup(o,{emit:u}){const m=x(""),h=u,c=()=>{h("update-search",m.value)};return(g,s)=>(f(),H(z,{rounded:"",outlined:"",dense:"",debounce:"300",modelValue:m.value,"onUpdate:modelValue":[s[0]||(s[0]=v=>m.value=v),c],placeholder:"Search products...",class:"q-mb-md",style:{width:"500px","max-width":"1500px","min-width":"100px"}},{append:a(()=>[t(K,{name:"search"})]),_:1},8,["modelValue"]))}};const ce=o=>(re("data-v-3f4b3c69"),o=o(),ie(),o),is={class:"row items-center justify-between no-wrap"},ds={class:"text-h5 text-weight-bold"},cs={key:0},us={key:1},_s=ce(()=>e("div",{class:"text-subtitle1 q-mt-xs opacity-80"}," Transfer products to branch locations / Add new products ",-1)),ms={class:"scrollable-content"},vs=ce(()=>e("div",{class:"text-subtitle2 text-grey-8 q-mb-md"}," Select Transfer Method ",-1)),ps={class:"action-cards row q-gutter-md"},gs=ce(()=>e("div",{class:"text-caption text-grey-7 q-mt-xs"}," Add product to this branch ",-1)),hs=ce(()=>e("div",{class:"text-caption text-grey-7 q-mt-xs"}," Send products to existing branch ",-1)),fs=ce(()=>e("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"}," Select Destination Branch ",-1)),ys={class:"relative-position"},bs={key:0,class:"branch-dropdown z-top"},xs={key:0,class:"selected-branch q-mt-md"},ws={key:0,class:"products-section"},$s=ce(()=>e("div",{class:"text-subtitle2 text-grey-8 q-mb-sm"}," Add Products to Transfer ",-1)),qs={class:"row q-col-gutter-md items-end"},ks={class:"col-7"},Ps={class:"q-ml-xl"},Ss={class:"col-3"},Cs={class:"col-2"},Os={key:0,class:"q-mt-sm"},Vs={class:"text-subtitle2 text-grey-8 q-mb-sm"},Is=ce(()=>e("div",{class:"text-weight-medium"},"Product",-1)),Rs=ce(()=>e("div",{class:"text-weight-medium"},"Price",-1)),Bs=ce(()=>e("div",{class:"text-weight-medium"},"Quantity",-1)),Ds=ce(()=>e("div",{class:"text-weight-medium"},"Actions",-1)),Qs={class:"q-pa-xm"},As={__name:"SendingProductsToBranchButton",props:{category:{type:String,required:!0}},setup(o){var Je,Ge,We,Xe,Ye,et;const u=o,m=q(()=>{var T;return{selecta:"bg-selecta",bread:"bg-bread",softdrinks:"bg-softdrinks",other:"bg-other"}[(T=u.category)==null?void 0:T.toLowerCase()]||"bg-gradient"}),h=O=>{if(!O)return"inventory_2";switch(O.toLowerCase()){case"bread":return"bakery_dining";case"selecta":return"icecream";case"nestle":return"ac_unit";case"softdrinks":return"local_drink";case"other":return"category";default:return"inventory_2"}},c=O=>{if(!O)return"grey-6";switch(O.toLowerCase()){case"bread":return"brown";case"selecta":return"red-7";case"nestle":return"info";case"softdrinks":return"purple-10";case"other":return"blue-grey-9";default:return"grey-6"}};console.log("Category Props",u.category);const{capitalizeFirstLetter:g,formatPrice:s}=pe(),{dialogRef:v,onDialogHide:B}=Fe(),L=ae(),r=q(()=>L.branchProducts);console.log("branchProducsssts",r.value);const _=It(),V=q(()=>_.branch),P=He(),I=q(()=>L.user);console.log("user data",I.value);const C=((Ge=(Je=I.value)==null?void 0:Je.device)==null?void 0:Ge.reference_id)||((Xe=(We=I.value.device)==null?void 0:We.reference)==null?void 0:Xe.id)||"";console.log("branchId",C);const U=((et=(Ye=I.value)==null?void 0:Ye.employee)==null?void 0:et.employee_id)||"",D=ge(),F=x(!1),w=x(!1),b=x(!1),p=x(null),k=x(""),n=x(!1),i=x(!1),d=x(!1),l=x(null);x("");const $=x([]),N=x([]),G=async()=>{k.value.trim()?(n.value=!0,await _.search(k.value),n.value=!1,i.value=!0):(_.branch=[],i.value=!1)},oe=()=>{Array.isArray(V.value)&&V.value.length>0&&(i.value=!0)},ke=q(()=>!!k.value),Pe=O=>{console.log("branchssssss",O),k.value=g(O.name),te.branch_id=O.id,d.value=!0,i.value=!1},Se=q(()=>r.value.filter(O=>O.category==="Bread")),ze=q(()=>r.value.filter(O=>O.category==="Selecta")),ct=q(()=>r.value.filter(O=>O.category==="Nestle")),ut=q(()=>r.value.filter(O=>O.category==="Softdrinks")),_t=q(()=>r.value.filter(O=>O.category==="Others")),De=O=>{console.log("productsssssss",O);const T=new Map;return O.forEach(E=>{T.has(E.product.id)||T.set(E.product.id,{label:g(E.product.name),value:E.product.id,price:E.price,total_quantity:E.total_quantity})}),[...T.values()].sort((E,be)=>E.label.localeCompare(be.label,void 0,{sensitivity:"base"}))},mt=q(()=>{switch(u.category){case"Bread":return De(Se.value);case"Selecta":return De(ze.value);case"Nestle":return De(ct.value);case"Softdrinks":return De(ut.value);case"Other":return De(_t.value);default:return[]}});X(mt,O=>{N.value=O,$.value=O},{immediate:!0});const vt=(O,T,Q)=>{T(()=>{if(O==="")$.value=N.value;else{const E=O.toLowerCase();$.value=N.value.filter(be=>be.label.toLowerCase().indexOf(E)>-1)}})},le=x([]),te=Re({branch_id:C,quantity:""}),pt=()=>{console.log("Selected Product:",l.value),console.log("Action:",p.value),console.log("Branch ID:",te.branch_id),console.log("Quantity:",te.quantity);const O=le.value.find(ft=>ft.product_id.value===l.value.value);if(O){D.notify({type:"warning",message:`${O.label} is already in the list`,icon:"warning"});return}const T=l.value,Q=T.label,E=T.total_quantity||0,be=parseInt(te.quantity);if(p.value==="send"&&be>E){D.notify({type:"negative",message:`Only ${E} pcs available for ${Q}`,icon:"error"});return}le.value.push({product_id:T,label:T.label,quantity:be,price:T.price}),console.log("sendingProductsList.value",le.value),l.value=null,te.quantity=""},gt=O=>{le.value.splice(O,1),D.notify({type:"info",message:"Product removed from list"})},ht=async()=>{if(!p.value||le.value.length===0||p.value==="send"&&!te.branch_id){D.notify({type:"negative",message:"Please select branch and add products to the list"});return}b.value=!0;const O=p.value==="add"?C:te.branch_id,T={from_branch_id:C,to_branch_id:O,employee_id:U,category:u.category,status:"pending",action:p.value,remark:"",products:le.value.map(Q=>({product_id:Q.product_id.value,quantity:Q.quantity,price:Q.price}))};console.log("Sending products to branch:",T);try{const Q=await P.sendProductsToBranch(T);if(!Q.success){D.notify({type:"negative",message:Q.errors||Q.message||"Something went wrong"}),Q.errors&&console.error("validation errors",Q.errors);return}D.notify({type:"positive",message:Q.message||"Products processed successfully"}),le.value=[],te.branch_id=""}finally{b.value=!1}};return(O,T)=>(f(),H(ne,{ref_key:"dialogRef",ref:v,onHide:A(B),modelValue:F.value,"onUpdate:modelValue":T[6]||(T[6]=Q=>F.value=Q),"transition-show":"slide-up","transition-hide":"slide-down",persistent:""},{default:a(()=>[t(M,{class:"dialog-card"},{default:a(()=>[t(S,{class:W(["dialog-header",m.value])},{default:a(()=>[e("div",is,[e("div",ds,[o.category!=="Bread"?(f(),R("div",cs," Send / Add "+y(o.category)+" Products To Branch ",1)):(f(),R("div",us,"Send "+y(o.category)+" Products To Branch",1))]),Ve(t(j,{icon:"close",flat:"",dense:"",round:"",class:"close-btn"},null,512),[[Ie]])]),_s]),_:1},8,["class"]),e("div",ms,[t(S,{class:"action-section q-pb-none"},{default:a(()=>[vs,e("div",ps,[o.category!=="Bread"?(f(),H(M,{key:0,flat:"",bordered:"",class:W(["action-card cursor-pointer",p.value==="add"?"action-card-active":""]),onClick:T[0]||(T[0]=Q=>p.value="add")},{default:a(()=>[t(S,{class:"text-center"},{default:a(()=>[t(K,{name:"add_circle",size:"lg",color:p.value==="add"?"primary":"grey-6",class:"q-mb-sm"},null,8,["color"]),e("div",{class:W(["text-subtitle2",p.value==="add"?"text-primary text-weight-medium":"text-weight-medium"])}," Add Products ",2),gs]),_:1})]),_:1},8,["class"])):se("",!0),t(M,{flat:"",bordered:"",class:W(["action-card cursor-pointer",p.value==="send"?"action-card-active":""]),onClick:T[1]||(T[1]=Q=>p.value="send")},{default:a(()=>[t(S,{class:"text-center"},{default:a(()=>[t(K,{name:"location_on",size:"lg",color:p.value==="send"?"primary":"grey-6",class:"q-mb-sm"},null,8,["color"]),e("div",{class:W(["text-subtitle2",p.value==="send"?"text-primary text-weight-medium":"text-weight-medium"])}," Select Branch ",2),hs]),_:1})]),_:1},8,["class"])])]),_:1}),t(Ue,{name:"slide-fade"},{default:a(()=>[p.value==="send"?(f(),H(S,{key:0,class:"branch-section q-pt-md"},{default:a(()=>[fs,e("div",ys,[t(z,{modelValue:k.value,"onUpdate:modelValue":[T[3]||(T[3]=Q=>k.value=Q),G],onFocus:oe,outlined:"",rounded:"",dense:"",debounce:"500",placeholder:"Search branch by name...",loading:n.value,color:"primary",class:"branch-search"},{prepend:a(()=>[t(K,{name:"search"})]),append:a(()=>[k.value?(f(),H(K,{key:0,name:"clear",class:"cursor-pointer",onClick:T[2]||(T[2]=nt(Q=>k.value="",["stop"]))})):se("",!0)]),_:1},8,["modelValue","loading"]),t(Ue,{name:"fade"},{default:a(()=>[i.value&&ke.value?(f(),R("div",bs,[t(M,{class:"shadow-3"},{default:a(()=>[t(st,{separator:""},{default:a(()=>[V.value.length?se("",!0):(f(),H(Oe,{key:0},{default:a(()=>[t(ee,null,{default:a(()=>[J(" No Branch Found ")]),_:1})]),_:1})),(f(!0),R(Z,null,fe(V.value,Q=>(f(),H(Oe,{key:Q.id,clickable:"",onClick:E=>Pe(Q)},{default:a(()=>[t(ee,null,{default:a(()=>[J(y(A(g)(Q.name)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})])):se("",!0)]),_:1})]),O.selectedBranch?(f(),R("div",xs,[t(Ke,{color:"primary","text-color":"white",icon:"check_circle",class:"q-pa-sm"},{default:a(()=>[J(" Selected: "+y(A(g)(O.selectedBranch.name)),1)]),_:1})])):se("",!0)]),_:1})):se("",!0)]),_:1}),t(Ue,{name:"slide-fade"},{default:a(()=>[p.value==="add"||p.value==="send"?(f(),R("div",ws,[t(S,null,{default:a(()=>[$s,e("div",qs,[e("div",ks,[e("div",Ps,y(u.category)+" Product",1),t(Vt,{modelValue:l.value,"onUpdate:modelValue":T[4]||(T[4]=Q=>l.value=Q),options:$.value,onFilter:vt,debounce:"3000",outlined:"",dense:"",behavior:"menu","use-input":"","hide-dropdown-icon":"","input-debounce":"300",clearable:"",style:{width:"215px","max-width":"600px","min-width":"80px"},color:"primary",loading:w.value,disable:w.value},{prepend:a(()=>[t(K,{name:"inventory"})]),"no-option":a(()=>[t(Oe,null,{default:a(()=>[t(ee,{class:"text-grey"},{default:a(()=>[t(we,null,{default:a(()=>[J("No products found")]),_:1})]),_:1})]),_:1})]),option:a(({itemProps:Q,opt:E})=>[t(Oe,qt(kt(Q)),{default:a(()=>[t(ee,{avatar:""},{default:a(()=>[t(K,{name:h(u.category),color:c(u.category)},null,8,["name","color"])]),_:1}),t(ee,null,{default:a(()=>[t(we,null,{default:a(()=>[J(y(E.label),1)]),_:2},1024),t(we,{caption:""},{default:a(()=>[J(" \u2022 Available: "+y(E.total_quantity)+" pcs ",1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","loading","disable"])]),e("div",Ss,[t(z,{modelValue:te.quantity,"onUpdate:modelValue":T[5]||(T[5]=Q=>te.quantity=Q),type:"number",outlined:"",dense:"",placeholder:"Quantity",min:"1",color:"primary"},null,8,["modelValue"])]),e("div",Cs,[t(j,{color:"primary",icon:"add",class:"full-height",onClick:pt,disabled:!l.value||!te.quantity||te.quantity<=0,loading:w.value},null,8,["disabled","loading"])])]),l.value?(f(),R("div",Os,[t(Ke,{size:"sm",color:"blue-1","text-color":"blue-8",icon:"info"},{default:a(()=>[J(" Available : "+y(l.value.total_quantity)+" pcs ",1)]),_:1}),l.value.price?(f(),H(Ke,{key:0,size:"sm",color:"green-1","text-color":"green-8",class:"q-ml-xs"},{default:a(()=>[J(" Price: "+y(A(s)(l.value.price)),1)]),_:1})):se("",!0)])):se("",!0)]),_:1}),t(S,{class:"products-list-card"},{default:a(()=>[e("div",Vs,[J(" Products to Transfer "),t(it,{color:"primary",class:"q-ml-sm"},{default:a(()=>[J(y(le.value.length),1)]),_:1})]),t(M,{flat:"",bordered:"",class:"products-list-card"},{default:a(()=>[t(st,{separator:""},{default:a(()=>[t(Oe,{class:"bg-grey-2 text-grey-8"},{default:a(()=>[t(ee,{class:"col-6"},{default:a(()=>[Is]),_:1}),t(ee,{class:"col-2"},{default:a(()=>[Rs]),_:1}),t(ee,{class:"col-2"},{default:a(()=>[Bs]),_:1}),t(ee,{side:""},{default:a(()=>[Ds]),_:1})]),_:1}),(f(!0),R(Z,null,fe(le.value,(Q,E)=>(f(),H(Oe,{key:Q.product_id},{default:a(()=>[t(ee,{class:"col-6"},{default:a(()=>[t(we,{class:"text-caption"},{default:a(()=>[J(y(A(g)(Q.label)),1)]),_:2},1024)]),_:2},1024),t(ee,{class:"col-2"},{default:a(()=>[t(we,{class:"text-caption q-ml-md"},{default:a(()=>[J(y(A(s)(Q.price||0)),1)]),_:2},1024)]),_:2},1024),t(ee,{class:"col-2"},{default:a(()=>[t(we,{class:"text-caption q-ml-md"},{default:a(()=>[J(y(Q.quantity)+" pcs ",1)]),_:2},1024)]),_:2},1024),t(ee,{side:""},{default:a(()=>[t(we,null,{default:a(()=>[t(j,{dense:"",flat:"",round:"",icon:"backspace",color:"grey-10",onClick:be=>gt(E)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])):se("",!0)]),_:1})]),e("div",{class:W(["dialog-footer q-pa-sm",m.value]),align:"right"},[e("div",Qs,[t(j,{color:"red-6",icon:"send",onClick:ht,loading:b.value,disabled:le.value.length<=0},null,8,["loading","disabled"])])],2)]),_:1})]),_:1},8,["onHide","modelValue"]))}};var je=Y(As,[["__scopeId","data-v-3f4b3c69"]]);const Ns=o=>(re("data-v-e2c51aee"),o=o(),ie(),o),js={class:"row items-center justify-between"},Ts={class:"text-h6 text-weight-medium text-dark"},Ls={class:"product-badge-label"},zs={class:"row items-center justify-between"},Us={class:"col"},Fs={class:"row items-center q-mb-xs"},Hs={class:"product-category-icon q-mr-sm"},Ms={class:"product-name-compact"},Es={class:"col-auto"},Ks={class:"row items-center"},Zs={class:"price-compact"},Js=Ns(()=>e("div",{class:"divider"},null,-1)),Gs={class:"quantity-compact"},Ws={class:"quantity-number q-ml-md"},Xs={__name:"ProceedDialog",props:{productDetails:Object,category:String},setup(o){const{dialogRef:u,onDialogHide:m}=Fe(),{formatDate:h,formatFullname:c,formatPrice:g,capitalizeFirstLetter:s}=pe();console.log("propssss",o);const B=ae(),L=q(()=>B.user);console.log("user datsssssa",L.value);const r=q(()=>{var w,b,p,k,n;return((p=(b=(w=L.value)==null?void 0:w.data)==null?void 0:b.employee)==null?void 0:p.id)||((n=(k=L.value)==null?void 0:k.data)==null?void 0:n.employee_id)||""});console.log("useeessrId",r.value);const _=He(),V=x(!1),P=x(""),I=x(!1),C=ge(),U=async w=>{var p,k;if(!P.value.trim())return;console.log("Remark:",P.value.trim()),console.log("product",w);const b={id:w.id,empoyee_id:r.value,branch_id:w.to_branch_id,product_id:w.product_id,quantity:w.added_product,status:"confirmed",remark:P.value.trim()};try{I.value=!0,console.log("datssa",b);const n=await _.receivedSendBranchProducts(b);console.log("Received Branch Products:",n),D(),V.value=!1,console.log("responsdssse",n),n.status===200&&C.notify({type:"positive",message:"Product received successfully"})}catch(n){console.log("Error saving remark:",n),C.notify({type:"negative",message:(k=(p=n==null?void 0:n.response)==null?void 0:p.data)==null?void 0:k.message})}finally{I.value=!1}},D=()=>{P.value=""},F=w=>({bread:"bakery_dining",selecta:"icecream",softdrinks:"local_drink",other:"category"})[w==null?void 0:w.toLowerCase()]||"inventory_2";return(w,b)=>(f(),H(ne,{ref_key:"dialogRef",ref:u,onHide:A(m),modelValue:V.value,"onUpdate:modelValue":b[3]||(b[3]=p=>V.value=p),persistent:""},{default:a(()=>[t(M,{class:"compact-remark-dialog"},{default:a(()=>[t(S,{class:"q-pa-lg border-bottom"},{default:a(()=>[e("div",js,[e("div",Ts,[t(K,{name:"sticky_note_2",size:"20px",class:"q-mr-sm text-primary"}),J(" Add Remark ")]),Ve(t(j,{icon:"close",flat:"",round:"",dense:"",onClick:D},null,512),[[Ie]])])]),_:1}),t(S,null,{default:a(()=>{var p,k,n,i;return[e("div",Ls,[e("div",zs,[e("div",Us,[e("div",Fs,[e("div",Hs,[t(K,{name:F(o.category),size:"16px"},null,8,["name"])]),e("div",Ms,y(A(s)(((k=(p=o.productDetails)==null?void 0:p.product)==null?void 0:k.name)||"N/A")),1)])]),e("div",Es,[e("div",Ks,[e("div",Zs,y(A(g)((n=o.productDetails)==null?void 0:n.price)||"N/A"),1),Js,e("div",Gs,[t(K,{name:"layers",size:"14px",class:"q-mr-xs"}),e("span",Ws,y(`${((i=o.productDetails)==null?void 0:i.added_product)||0} pcs`),1)])])])])])]}),_:1}),t(S,{class:"q-pa-lg"},{default:a(()=>[t(z,{modelValue:P.value,"onUpdate:modelValue":b[0]||(b[0]=p=>P.value=p),outlined:"",type:"textarea",placeholder:"Type your remark here...",autogrow:"",maxlength:1e3,counter:"",class:"q-mb-md","input-style":{minHeight:"100px",resize:"none"},onKeydown:b[1]||(b[1]=Pt(nt(p=>U(o.productDetails),["ctrl"]),["enter"]))},null,8,["modelValue"])]),_:1}),t(rt,{class:"q-px-lg q-pb-lg"},{default:a(()=>[t(j,{label:"Proceed",color:"primary",class:"full-width",unelevated:"",disable:!P.value.trim(),onClick:b[2]||(b[2]=p=>U(o.productDetails))},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide","modelValue"]))}};var Ys=Y(Xs,[["__scopeId","data-v-e2c51aee"]]);const he=o=>(re("data-v-f014d3e4"),o=o(),ie(),o),ea={class:"header-content q-px-lg q-py-lg"},ta={class:"row items-center justify-between"},sa={class:"row items-center q-gutter-md"},aa={class:"icon-wrapper"},oa={class:"text-h4 text-weight-bold text-white"},la=he(()=>e("div",{class:"text-subtitle1 text-white opacity-80 q-mt-xs"}," Transaction Details ",-1)),na=he(()=>e("div",{class:"wave-decoration"},[e("svg",{viewBox:"0 0 1200 120",preserveAspectRatio:"none"},[e("path",{d:"M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z",opacity:".25",fill:"currentColor"}),e("path",{d:"M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z",opacity:".5",fill:"currentColor"}),e("path",{d:"M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z",fill:"currentColor"})])],-1)),ra={class:"scrollable-content"},ia={class:"row q-col-gutter-lg q-mb-xl"},da={class:"col-12 col-sm-4"},ca={class:"info-card"},ua={class:"row items-center q-gutter-sm q-mb-sm"},_a=he(()=>e("div",{class:"text-subtitle2 text-grey-7"},"Date & Time",-1)),ma={class:"text-h6 text-weight-medium"},va={class:"col-12 col-sm-4"},pa={class:"info-card"},ga={class:"row items-center q-gutter-sm q-mb-sm"},ha=he(()=>e("div",{class:"text-subtitle2 text-grey-7"},"Cashier",-1)),fa={class:"text-h6 text-weight-medium"},ya={class:"col-12 col-sm-4"},ba={class:"info-card"},xa={class:"row items-center q-gutter-sm q-mb-sm"},wa={class:"text-subtitle2 text-grey-7"},$a={class:"text-h6 text-weight-medium"},qa={class:"product-card q-mb-xl"},ka=he(()=>e("div",{class:"text-h6 text-weight-bold q-mb-md"}," Product Information ",-1)),Pa={class:"row items-center q-gutter-lg"},Sa={class:"col-auto"},Ca={class:"col"},Oa={class:"text-h5 text-weight-bold q-mb-xs"},Va={class:"row items-center q-gutter-xl"},Ia={class:"column"},Ra=he(()=>e("div",{class:"text-subtitle2 text-grey-7"},"Price",-1)),Ba={class:"column"},Da=he(()=>e("div",{class:"text-subtitle2 text-grey-7"},"Quantity",-1)),Qa={class:"text-h5 text-weight-bold"},Aa=he(()=>e("span",{class:"text-subtitle1 text-grey-7"},"pcs",-1)),Na={class:"column"},ja=he(()=>e("div",{class:"text-subtitle2 text-grey-7"},"Total",-1)),Ta={class:"text-h5 text-weight-bold"},La={key:0,class:"row justify-end q-gutter-md"},za={__name:"ViewDetails",props:{index:{type:Number,required:!0},productDetails:{type:Object,required:!0},category:{type:String,required:!0}},setup(o){const u=o;console.log("props",u);const{dialogRef:m,onDialogHide:h}=Fe(),c=x(!0),g=x(!1),s=ge(),{formatDate:v,formatFullname:B,formatPrice:L,capitalizeFirstLetter:r}=pe(),_=q(()=>{var b;return{selecta:"bg-selecta",bread:"bg-bread",nestle:"bg-nestle",softdrinks:"bg-softdrinks",other:"bg-other"}[(b=u.category)==null?void 0:b.toLowerCase()]||"bg-primary"}),V=(w,b=null)=>({bread:"brown",selecta:"pink",nestle:"info",softdrinks:"purple",other:"blue-grey-7"})[w==null?void 0:w.toLowerCase()]||(b?`text-${b}`:"text-primary"),P=ae(),I=q(()=>P.user),C=q(()=>{var w,b,p,k,n;return((b=(w=I.value)==null?void 0:w.device)==null?void 0:b.reference_id)||((n=(k=(p=I.value)==null?void 0:p.device)==null?void 0:k.reference)==null?void 0:n.id)||""}),U=w=>({bread:"bakery_dining",selecta:"icecream",nestle:"ac_unit",softdrinks:"local_drink",other:"category"})[w==null?void 0:w.toLowerCase()]||"inventory_2",D=(w,b)=>{if(!w||!b)return L("N/A");const p=parseFloat(w)*parseInt(b);return L(p)},F=()=>{s.dialog({component:Ys,componentProps:{productDetails:u.productDetails,category:u.category}})};return(w,b)=>(f(),H(ne,{ref_key:"dialogRef",ref:m,onHide:A(h),modelValue:g.value,"onUpdate:modelValue":b[1]||(b[1]=p=>g.value=p),maximized:c.value,"transition-show":"slide-up","transition-hide":"slide-down",persistent:""},{default:a(()=>[t(M,{class:"bg-white"},{default:a(()=>[e("div",{class:W(["header-wrapper",_.value])},[e("div",ea,[e("div",ta,[e("div",sa,[e("div",aa,[t(K,{name:U(o.category),size:"40px",class:"icon"},null,8,["name"])]),e("div",null,[e("div",oa,y(o.category),1),la])]),Ve(t(j,{icon:"close",class:"text-white",flat:"",round:"",dense:""},null,512),[[Ie]])])]),na],2),e("div",ra,[t(S,{class:"q-pt-xl q-pb-sm"},{default:a(()=>{var p,k,n,i,d,l,$,N,G,oe,ke,Pe,Se,ze;return[e("div",ia,[e("div",da,[e("div",ca,[e("div",ua,[t(K,{name:"event",color:"grey-6",size:"20px"}),_a]),e("div",ma,y(A(v)(((p=o.productDetails)==null?void 0:p.created_at)||"No Date")),1)])]),e("div",va,[e("div",pa,[e("div",ga,[t(K,{name:"person",color:"grey-6",size:"20px"}),ha]),e("div",fa,y(A(B)(((k=o.productDetails)==null?void 0:k.employee)||"No Cashier")),1)])]),e("div",ya,[e("div",ba,[e("div",xa,[t(K,{name:"store",color:"grey-6",size:"20px"}),e("div",wa,y(((n=o.productDetails)==null?void 0:n.to_branch_id)===C.value?"Source":"Destination"),1)]),e("div",$a,y(((i=o.productDetails)==null?void 0:i.to_branch_id)===C.value?((l=(d=o.productDetails)==null?void 0:d.from_branch)==null?void 0:l.name)||"No Branch":((N=($=o.productDetails)==null?void 0:$.to_branch)==null?void 0:N.name)||"No Branch"),1)])])]),e("div",qa,[ka,e("div",Pa,[e("div",Sa,[e("div",{class:W(["product-icon",_.value])},[t(K,{name:U(o.category),size:"32px",class:"text-white"},null,8,["name"])],2)]),e("div",Ca,[e("div",Oa,y(A(r)(((oe=(G=o.productDetails)==null?void 0:G.product)==null?void 0:oe.name)||"N/A")),1),e("div",Va,[e("div",Ia,[Ra,e("div",{class:W(["text-h5 text-weight-bold",V(o.category)])},y(A(L)(((ke=o.productDetails)==null?void 0:ke.price)||"N/A")),3)]),e("div",Ba,[Da,e("div",Qa,[J(y(((Pe=o.productDetails)==null?void 0:Pe.added_product)||"N/A")+" ",1),Aa])]),e("div",Na,[ja,e("div",Ta,y(D((Se=o.productDetails)==null?void 0:Se.price,(ze=o.productDetails)==null?void 0:ze.added_product)),1)])])])])])]}),_:1})]),t(S,{class:"q-pa-sm",align:"right"},{default:a(()=>{var p,k,n;return[C.value===((p=o.productDetails)==null?void 0:p.to_branch_id)&&((k=o.productDetails)==null?void 0:k.status)==="pending"&&((n=o.productDetails)==null?void 0:n.action)==="send"?(f(),R("div",La,[t(j,{label:"Receive Product",color:V(o.category,"positive"),padding:"12px 32px",class:"rounded-btn text-dark",icon:U(o.category),onClick:b[0]||(b[0]=i=>F(o.productDetails))},null,8,["color","icon"])])):se("",!0)]}),_:1})]),_:1})]),_:1},8,["onHide","modelValue","maximized"]))}};var Ua=Y(za,[["__scopeId","data-v-f014d3e4"]]);const Fa=o=>(re("data-v-02236031"),o=o(),ie(),o),Ha={class:"row items-center justify-between q-gutter-md"},Ma={class:"row items-center q-gutter-sm"},Ea={class:"text-h5 text-weight-bold"},Ka=Fa(()=>e("div",{class:"text-subtitle1 opacity-85 q-mt-xs"}," Transfer to branches or update inventory ",-1)),Za={key:1},Ja={class:"text-subtitle1 text-weight-medium text-primary"},Ga={class:"full-width row flex-center text-accent q-gutter-sm q-py-xl"},Wa={__name:"ViewAddProductsButton",props:{category:{type:String,required:!0}},setup(o){const u=o,m=x(""),{dialogRef:h,onDialogHide:c}=Fe(),g=x(!0),{formatDate:s,formatTime:v,formatFullname:B,capitalizeFirstLetter:L}=pe(),r=ae(),_=q(()=>r.user),V=q(()=>{var l,$,N,G,oe;return(($=(l=_.value)==null?void 0:l.device)==null?void 0:$.reference_id)||((oe=(G=(N=_.value)==null?void 0:N.device)==null?void 0:G.reference)==null?void 0:oe.id)||""}),P=ge(),I=x({page:1,rowsPerPage:0,rowsNumber:0}),C=He(),U=q(()=>C.branchSendAddedProd),D=x([]),F=x(!1),w=async(l=0,$=5,N="")=>{if(!!V.value){F.value=!0;try{const G=await C.fetchSendAddedBranchProducts(u.category,V.value,l,$,N),{data:oe,current_page:ke,per_page:Pe,total:Se}=U.value;console.log("branchProducts.value",U.value),console.log("data",oe),D.value=oe,console.log("rows.value",D.value),I.value={page:ke,rowsPerPage:Pe,rowsNumber:Se}}catch(G){console.error("Failed to load branch products:",G)}finally{F.value=!1}}};Ze(w);const b=l=>{w(l.pagination.page,l.pagination.rowsPerPage,l.filter)};X(m,async l=>{I.value.page=1,await w(I.value.page,I.value.rowsPerPage,l)});const p=q(()=>{var $;return{selecta:"bg-selecta",bread:"bg-bread",nestle:"bg-nestle",softdrinks:"bg-softdrinks",other:"bg-other"}[($=u.category)==null?void 0:$.toLowerCase()]||"bg-primary"}),k=l=>({bread:"bakery_dining",selecta:"icecream",nestle:"ac_unit",softdrinks:"local_drink",other:"category"})[l==null?void 0:l.toLowerCase()]||"inventory_2",n=l=>{const $=(l||"").toLowerCase();return $.includes("pending")?"orange":$.includes("confirmed")||$.includes("approved")?"positive":$.includes("cancel")||$.includes("reject")?"negative":"grey-7"},i=l=>{console.log("View:",l),P.dialog({component:Ua,componentProps:{productDetails:l,category:u.category}})},d=[{name:"product",label:"Product",field:l=>{var $;return L((($=l.product)==null?void 0:$.name)||"")},align:"left",sortable:!0},{name:"date",label:"Date / Time",field:l=>`${s(l.created_at)} ${v(l.created_at)}`,align:"left",sortable:!0},{name:"employee",label:"Staff",field:l=>B(l.employee),align:"left",sortable:!0},{name:"from_branch",label:"Source",field:l=>{var $;return L((($=l.from_branch)==null?void 0:$.name)||"\u2014")},align:"left",sortable:!0},{name:"to_branch",label:"Destination",field:l=>{var $;return l.action==="add"?"Need to be approved by Admin":L((($=l.to_branch)==null?void 0:$.name)||"\u2014")},align:"left",sortable:!0},{name:"status",label:"Status",field:l=>L(l.status||""),align:"center",sortable:!0},{name:"action",label:"Actions",align:"right"}];return(l,$)=>(f(),H(ne,{ref_key:"dialogRef",ref:h,onHide:A(c),modelValue:l.dialog,"onUpdate:modelValue":$[2]||($[2]=N=>l.dialog=N),maximized:g.value,"transition-show":"slide-up","transition-hide":"slide-down",persistent:""},{default:a(()=>[t(M,{class:"bg-white rounded-borders",style:{width:"95vw","max-width":"1100px","border-radius":"16px",overflow:"hidden"}},{default:a(()=>[t(S,{class:W(["dialog-header text-white",p.value])},{default:a(()=>[e("div",Ha,[e("div",Ma,[t(K,{name:k(o.category),size:"xl"},null,8,["name"]),e("div",null,[e("div",Ea,y(o.category==="Bread"?"Send":"Send / Add")+" "+y(o.category)+" Products ",1),Ka])]),Ve(t(j,{icon:"close",flat:"",round:"",dense:"",class:"bg-white text-grey-8",size:"md",onClick:A(c)},null,8,["onClick"]),[[Ie]])])]),_:1},8,["class"]),t(S,{class:"q-pa-lg"},{default:a(()=>[D.value.length>3?(f(),H(z,{key:0,modelValue:m.value,"onUpdate:modelValue":$[0]||($[0]=N=>m.value=N),outlined:"",dense:"",debounce:"300",placeholder:"Search product, staff, destination...",class:"q-mb-lg"},{prepend:a(()=>[t(K,{name:"search"})]),_:1},8,["modelValue"])):se("",!0),F.value?(f(),H(at,{key:2,showing:""})):(f(),R("div",Za,[t(Rt,{rows:D.value,columns:d,"row-key":"id",flat:"",square:"",bordered:"",pagination:I.value,"onUpdate:pagination":$[1]||($[1]=N=>I.value=N),loading:F.value,"rows-per-page-options":[5,10,0],filter:m.value,onRequest:b,class:"my-sticky-modern-table shadow-1 rounded-borders","wrap-cells":"","virtual-scroll":""},{"body-cell-status":a(N=>[t(Ee,{props:N,class:"text-center"},{default:a(()=>[t(it,{color:n(N.value),"text-color":"white",class:"q-pa-sm q-px-md text-weight-medium text-uppercase",rounded:"",label:N.value},null,8,["color","label"])]),_:2},1032,["props"])]),"body-cell-product":a(N=>[t(Ee,{props:N},{default:a(()=>[e("div",Ja,y(N.value),1)]),_:2},1032,["props"])]),"body-cell-action":a(N=>[t(Ee,{props:N,class:"text-right"},{default:a(()=>[t(Dt,{flat:""},{default:a(()=>[t(j,{flat:"",round:"",dense:"",color:"primary",icon:"visibility",onClick:G=>i(N.row)},{default:a(()=>[t(Bt,{anchor:"bottom middle",offset:[0,8]},{default:a(()=>[J("View Details")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),loading:a(()=>[t(at,{showing:""},{default:a(()=>[t(Qe,{size:"50px",color:"grey-10"})]),_:1})]),"no-data":a(({icon:N,message:G})=>[e("div",Ga,[t(K,{name:N,size:"2rem"},null,8,["name"]),e("span",null,y(G||"No products found in this category."),1)])]),_:1},8,["rows","pagination","loading","filter"])]))]),_:1}),t(rt,{align:"right",class:"q-pa-md bg-grey-2"},{default:a(()=>[Ve(t(j,{flat:"",label:"Close",color:"grey-8",class:"q-mr-sm"},null,512),[[Ie]])]),_:1})]),_:1})]),_:1},8,["onHide","modelValue","maximized"]))}};var Te=Y(Wa,[["__scopeId","data-v-02236031"]]);const Xa={class:"q-gutter-y-md"},Ya={class:"row justify-between"},eo={class:"row q-gutter-md"},to={__name:"BreadPage",setup(o){const u=x(""),m=ge(),h=s=>{u.value=s},c=s=>{m.dialog({component:je,componentProps:{category:s}})},g=s=>{m.dialog({component:Te,componentProps:{category:s}})};return(s,v)=>(f(),R(Z,null,[e("div",Xa,[e("div",Ya,[e("div",null,[t(Ne,{onUpdateSearch:h})]),e("div",eo,[e("div",null,[t(j,{class:"bg-gradient text-white",outlined:"",label:"Send Bread To Branch",onClick:v[0]||(v[0]=B=>c("Bread"))})]),e("div",null,[t(j,{class:"add-bg-gradient text-white",outlined:"",label:"Added Bread",onClick:v[1]||(v[1]=B=>g("Bread"))})])])])]),e("div",null,[t(rs,{filter:u.value},null,8,["filter"])])],64))}};var so=Y(to,[["__scopeId","data-v-ab8c5e86"]]);const ue=o=>(re("data-v-7a1b14b1"),o=o(),ie(),o),ao={class:"q-mt-md"},oo={key:0,class:"text-center q-pa-md"},lo={key:1,class:"row q-pa-lg q-gutter-sm q-gutter-y-md"},no=ue(()=>e("img",{src:"https://cdn.quasar.dev/img/chicken-salad.jpg"},null,-1)),ro={class:"q-pa-xm row q-gutter-x-sm justify-between"},io=ue(()=>e("div",null,"Quantity:",-1)),co={class:"q-pa-xm row q-gutter-x-sm justify-between"},uo=ue(()=>e("div",null,"Price:",-1)),_o={class:"row justify-between"},mo={class:"text-h6"},vo={class:"q-mb-lg row justify-between"},po=ue(()=>e("div",{class:"text-weight-light"},"Remainings",-1)),go=ue(()=>e("div",{class:"text-weight-light"},"Selecta Out",-1)),ho={class:"row q-gutter-xm justify-between"},fo={class:"q-gutter-sm"},yo=ue(()=>e("div",{class:"text-weight-light"},"Beginnings",-1)),bo=ue(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),xo={class:"q-gutter-sm"},wo=ue(()=>e("div",{class:"text-weight-light"},"Added Stocks",-1)),$o=ue(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),qo={class:"q-gutter-sm"},ko=ue(()=>e("div",{class:"text-weight-light"},"Price",-1)),Po={align:"right"},So={__name:"SelectaCard",props:{filter:String},setup(o){var b,p,k;const{capitalizeFirstLetter:u,formatPrice:m}=pe(),h=ae(),c=h.user;console.log("userData",c);const g=((b=c==null?void 0:c.device)==null?void 0:b.reference_id)||((k=(p=c==null?void 0:c.device)==null?void 0:p.reference)==null?void 0:k.id)||"0";console.log("branchId",g);const s=x(null),v=x(!1);x(!1);const B=o,L=n=>{s.value=n,console.log("selectedItem",s.value),v.value=!0},r=Re({selectaSold:0,selectaRemainings:"",selectaBeginnings:0,selectaOut:""}),_=x({selectaRemainings:"",selectaOut:""}),V=n=>{_.value[n]=""},P=()=>{_.value.selectaRemainings="",_.value.selectaOut="";let n=!0;return r.selectaRemainings||(_.value.selectaRemainings="Remaining is required",n=!1),r.selectaOut||(_.value.selectaOut="Selecta Out is required",n=!1),n},I=q(()=>s.value?(console.log("selectedItem",s.value),r.selectaSold*s.value.price):0);q(()=>m(I.value));const C=()=>{if(s.value){const n=parseInt(s.value.total_quantity)||0,i=parseInt(r.selectaRemainings)||0,d=parseInt(r.selectaOut)||0,l=i+d;r.selectaSold=n-l}};X(()=>r.selectaRemainings,n=>{C()}),X(()=>r.selectaOut,n=>{C()});const U=q(()=>h.selectaProducts);X(U,n=>{});const D=q(()=>{var n;return((n=U.value)==null?void 0:n.filter(i=>i.product.name.toLowerCase().includes(B.filter.toLowerCase())))||[]}),F=()=>{s.value=null,r.selectaSold=0,r.selectaRemainings="",r.selectaBeginnings=0,r.selectaOut="",v.value=!1},w=()=>{var i;if(!P())return;ye.show({spinner:Qe,message:`${u(s.value.product.name)} putting to the list...`,messageColor:"white"});const n={user_id:c==null?void 0:c.data.id,branch_id:g||((i=c==null?void 0:c.device)==null?void 0:i.branch_id),product_id:s.value.product.id,name:s.value.product.name,total:s.value.total_quantity,added_stocks:s.value.new_production,sold:r.selectaSold,out:r.selectaOut,beginnings:s.value.beginnings,remaining:r.selectaRemainings,price:s.value.price,sales:I.value,new_production:0};console.log("report",n),h.updateSelectaReport(n),qe.create({message:"Product added successfully",color:"positive",position:"top"}),setTimeout(()=>{ye.hide(),F()},500)};return(n,i)=>(f(),R(Z,null,[e("div",ao,[t(Be,{style:{height:"calc(100vh - 150px)","max-width":"1500px"}},{default:a(()=>[!D.value||D.value.length===0?(f(),R("div",oo," No data available ")):(f(),R("div",lo,[(f(!0),R(Z,null,fe(D.value,(d,l)=>(f(),H(Ae,{key:l,once:"",transition:"scale",class:"example-item"},{default:a(()=>[t(M,{onClick:$=>L(d),class:"q-ma-sm my-card"},{default:a(()=>[no,e("div",{class:W(["q-pa-sm",{"text-subtitle2":d.product.name.length<=5,"text-caption text-weight-medium":d.product.name.length>10&&d.product.name.length<=20,"text-caption":d.product.name.length>20}])},y(A(u)(d.product.name)),3),t($e),t(S,{class:"text-subtitle2 text-weight-regular"},{default:a(()=>[e("div",ro,[io,e("div",null,y(d.total_quantity),1)]),e("div",co,[uo,e("div",null,y(A(m)(d.price)),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]))]),_:1})]),e("div",null,[t(ne,{modelValue:v.value,"onUpdate:modelValue":i[4]||(i[4]=d=>v.value=d),persistent:""},{default:a(()=>[t(M,{class:"my-card q-pa-md",style:{width:"700px","max-width":"80vw"}},{default:a(()=>[t(S,null,{default:a(()=>[e("div",_o,[e("div",mo,y(A(u)(s.value?s.value.product.name:"")),1),e("div",null,[t(j,{round:"",dense:"",flat:"",icon:"close",onClick:F})])])]),_:1}),t(S,null,{default:a(()=>[e("div",vo,[e("div",null,[po,t(z,{modelValue:r.selectaRemainings,"onUpdate:modelValue":[i[0]||(i[0]=d=>r.selectaRemainings=d),i[1]||(i[1]=d=>V("selectaRemainings"))],dense:"",outlined:"",mask:"#####",type:"number",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[d=>!!d||"Remainings is required"],error:!!_.value.selectaRemainings,"error-message":_.value.selectaRemainings},null,8,["modelValue","rules","error","error-message"])]),e("div",null,[go,t(z,{modelValue:r.selectaOut,"onUpdate:modelValue":[i[2]||(i[2]=d=>r.selectaOut=d),i[3]||(i[3]=d=>V("selectaOut"))],dense:"",outlined:"",mask:"#####",type:"number",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[d=>!!d||"Selecta out is required"],error:!!_.value.selectaOut,"error-message":_.value.selectaOut},null,8,["modelValue","rules","error","error-message"])])]),e("div",ho,[e("div",fo,[yo,t(z,{dense:"",outlined:"",readonly:"",label:s.value?s.value.beginnings:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[bo]),_:1},8,["label"])]),e("div",xo,[wo,t(z,{dense:"",outlined:"",readonly:"",label:s.value?s.value.new_production:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[$o]),_:1},8,["label"])]),e("div",qo,[ko,t(z,{dense:"",outlined:"",readonly:"",label:s.value?A(m)(s.value.price):"",style:{width:"150px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),_:1}),t(S,null,{default:a(()=>[e("div",Po,[t(j,{color:"red-6",label:"Ok",onClick:w})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var Co=Y(So,[["__scopeId","data-v-7a1b14b1"]]);const Oo={class:"q-gutter-y-md"},Vo={class:"row q-gutter-md"},Io={class:"row q-gutter-md"},Ro={__name:"SelectaPage",setup(o){const u=x(""),m=ge(),h=s=>{u.value=s},c=s=>{m.dialog({component:je,componentProps:{category:s}})},g=s=>{m.dialog({component:Te,componentProps:{category:s}})};return(s,v)=>(f(),R(Z,null,[e("div",Oo,[e("div",Vo,[e("div",null,[t(Ne,{onUpdateSearch:h})]),e("div",Io,[e("div",null,[t(j,{class:"bg-gradient text-white",outlined:"",label:"Send Selecta to Branch",onClick:v[0]||(v[0]=B=>c("Selecta"))})]),e("div",null,[t(j,{class:"add-bg-gradient text-white",outlined:"",label:"Added Selecta",onClick:v[1]||(v[1]=B=>g("Selecta"))})])])])]),e("div",null,[t(Co,{filter:u.value},null,8,["filter"])])],64))}};var Bo=Y(Ro,[["__scopeId","data-v-7bbff322"]]);const _e=o=>(re("data-v-69228bb8"),o=o(),ie(),o),Do={class:"q-mt-md"},Qo={key:0,class:"text-center q-pa-md"},Ao={class:"row q-pa-lg q-gutter-sm q-gutter-y-md"},No=_e(()=>e("img",{src:"https://cdn.quasar.dev/img/chicken-salad.jpg"},null,-1)),jo={class:"q-pa-xm row q-gutter-x-sm justify-between"},To=_e(()=>e("div",null,"Quantity:",-1)),Lo={class:"q-pa-xm row q-gutter-x-sm justify-between"},zo=_e(()=>e("div",null,"Price:",-1)),Uo={class:"row justify-between"},Fo={class:"text-h6"},Ho={class:"q-mg-lg row justify-between"},Mo=_e(()=>e("div",{class:"text-weight-light"},"Remainings",-1)),Eo=_e(()=>e("div",{class:"text-weight-light"},"Nestl\xE9 Out",-1)),Ko={class:"row q-gutter-xm justify-between"},Zo={class:"q-gutter-sm"},Jo=_e(()=>e("div",{class:"text-weight-light"},"Beginnings",-1)),Go=_e(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),Wo={class:"q-gutter-sm"},Xo=_e(()=>e("div",{class:"text-weight-light"},"Added Stocks",-1)),Yo=_e(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),el={class:"q-gutter-sm"},tl=_e(()=>e("div",{class:"text-weight-light"},"Price",-1)),sl={align:"right"},al={__name:"NestleCard",props:{filter:String},setup(o){var b,p,k;const{capitalizeFirstLetter:u,formatPrice:m}=pe(),h=ae(),c=h.user;console.log("userData",c);const g=((b=c==null?void 0:c.device)==null?void 0:b.reference_id)||((k=(p=c==null?void 0:c.device)==null?void 0:p.reference)==null?void 0:k.id)||"0";console.log("branchIdddddddd",g);const s=x(null),v=x(!1);x(!1);const B=o,L=n=>{s.value=n,console.log("selectedItem",s.value),v.value=!0},r=Re({nestleSold:0,nestleRemainings:0,nestleBeginnings:0,nestleOut:0}),_=x({nestleRemainings:"",nestleOut:""}),V=n=>{_.value[n]=""},P=()=>{_.value.nestleRemainings="",_.value.nestleOut="";let n=!0;return r.nestleRemainings||(_.value.nestleRemainings="Remaining is required",n=!1),r.nestleOut||(_.value.nestleOut="Neslte Out is required",n=!1),n},I=q(()=>s.value?(console.log("selectedItem.value",s.value),r.nestleSold*s.value.price):0);q(()=>m(I.value));const C=()=>{if(s.value){const n=parseInt(s.value.total_quantity)||0,i=parseInt(r.nestleRemainings)||0,d=parseInt(r.nestleOut)||0,l=i+d;r.nestleSold=n-l}};X(()=>r.nestleRemainings,n=>{C()}),X(()=>r.nestleOut,n=>{C()});const U=q(()=>h.nestleProducts);console.log("nestleProducts",U.value),X(U,n=>{});const D=q(()=>{var i,d;const n=((i=B.filter)==null?void 0:i.toLowerCase())||"";return((d=U.value)==null?void 0:d.filter(l=>{var N,G;return(((G=(N=l==null?void 0:l.product)==null?void 0:N.name)==null?void 0:G.toLowerCase())||"").includes(n)}))||[]}),F=()=>{s.value=null,r.nestleSold=0,r.nestleRemainings="",r.nestleBeginnings=0,r.nestleOut="",v.value=!1},w=()=>{var i;if(!P())return;ye.show({spinner:Qe,message:`${u(s.value.product.name)} putting to the list...`,messageColor:"white"});const n={user_id:c==null?void 0:c.data.id,branch_id:g||((i=c==null?void 0:c.device)==null?void 0:i.branch_id),product_id:s.value.product.id,name:s.value.product.name,total:s.value.total_quantity,added_stocks:s.value.new_production,sold:r.nestleSold,out:r.nestleOut,beginnings:s.value.beginnings,remaining:r.nestleRemainings,price:s.value.price,sales:I.value,new_production:0};console.log("reportss",n),h.updateNestleReport(n),qe.create({message:"Product added successfully",color:"positive",position:"top"}),setTimeout(()=>{ye.hide(),F()})};return(n,i)=>{const d=St("q-intersention");return f(),R(Z,null,[e("div",Do,[t(Be,{style:{height:"calc(100vh - 150px)","max-width":"1500px"}},{default:a(()=>[!D.value||D.value.length===0?(f(),R("div",Qo," No data available ")):se("",!0),e("div",Ao,[(f(!0),R(Z,null,fe(D.value,(l,$)=>(f(),H(d,{key:$,once:"",transition:"scale",class:"example-item"},{default:a(()=>[t(M,{onClick:N=>L(l),class:"q-ma-sm my-card"},{default:a(()=>[No,e("div",{class:W(["q-pa-sm",{"text-subtitle2":l.product.name.length<=5,"text-caption text-weight-medium":l.product.name.length>10&&l.product.name.length<=20,"text-caption":l.product.name.length>20}])},y(A(u)(l.product.name)),3),t($e),t(S,{class:"text-subtitle2 text-weight-regular"},{default:a(()=>[e("div",jo,[To,e("div",null,y(l.total_quantity),1)]),e("div",Lo,[zo,e("div",null,y(A(m)(l.price)),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))])]),_:1})]),e("div",null,[t(ne,{modelValue:v.value,"onUpdate:modelValue":i[4]||(i[4]=l=>v.value=l),persistent:""},{default:a(()=>[t(M,{class:"my-card q-pa-md",style:{width:"700px","max-width":"80vw"}},{default:a(()=>[t(S,null,{default:a(()=>[e("div",Uo,[e("div",Fo,y(A(u)(s.value?s.value.product.name:"")),1),e("div",null,[t(j,{round:"",dense:"",flat:"",icon:"close",onClick:F})])])]),_:1}),t(S,null,{default:a(()=>[e("div",Ho,[e("div",null,[Mo,t(z,{modelValue:r.nestleRemainings,"onUpdate:modelValue":[i[0]||(i[0]=l=>r.nestleRemainings=l),i[1]||(i[1]=l=>V("nestleRemainings"))],dense:"",outlined:"",mask:"#####",type:"number",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[l=>!!l||"Remainings is required"],error:!!_.value.nestleRemainings,"error-message":_.value.nestleRemainings},null,8,["modelValue","rules","error","error-message"])]),e("div",null,[Eo,t(z,{modelValue:r.nestleOut,"onUpdate:modelValue":[i[2]||(i[2]=l=>r.nestleOut=l),i[3]||(i[3]=l=>V("nesleOut"))],dense:"",outlined:"",mask:"#####",type:"number",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[l=>!!l||"Nestl\xE9 out is required"],error:!!_.value.nestleOut,"error-message":_.value.nestleOut},null,8,["modelValue","rules","error","error-message"])])]),e("div",Ko,[e("div",Zo,[Jo,t(z,{dense:"",outlined:"",readonly:"",label:s.value?s.value.beginnings:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[Go]),_:1},8,["label"])]),e("div",Wo,[Xo,t(z,{dense:"",outlined:"",readonly:"",label:s.value?s.value.new_production:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[Yo]),_:1},8,["label"])]),e("div",el,[tl,t(z,{dense:"",outlined:"",readonly:"",label:s.value?A(m)(s.value.price):"",style:{width:"150px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),_:1}),t(S,null,{default:a(()=>[e("div",sl,[t(j,{color:"red-6",label:"Ok",onClick:w})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64)}}};var ol=Y(al,[["__scopeId","data-v-69228bb8"]]);const ll={class:"q-gutter-y-md"},nl={class:"row q-gutter-md"},rl={class:"row q-gutter-md"},il={__name:"NestlePage",setup(o){const u=x(""),m=ge(),h=s=>{u.value=s},c=s=>{m.dialog({component:je,componentProps:{category:s}})},g=s=>{m.dialog({component:Te,componentProps:{category:s}})};return(s,v)=>(f(),R(Z,null,[e("div",ll,[e("div",nl,[e("div",null,[t(Ne,{onUpdateSearch:h})]),e("div",rl,[e("div",null,[t(j,{class:"bg-gradient text-white",outlined:"",label:"Send Nestle to Branch",onClick:v[0]||(v[0]=B=>c("Nestle"))})]),e("div",null,[t(j,{class:"add-bg-gradient text-white",outlined:"",label:"Added Nestl\xE9",onClick:v[1]||(v[1]=B=>g("Nestle"))})])])])]),e("div",null,[t(ol)])],64))}};var dl=Y(il,[["__scopeId","data-v-d84c86c0"]]);const me=o=>(re("data-v-50fe5b47"),o=o(),ie(),o),cl={class:"q-mt-md"},ul={key:0,class:"text-center q-pa-md"},_l={key:1,class:"row q-pa-lg q-gutter-sm q-gutter-y-md"},ml=me(()=>e("img",{src:"https://cdn.quasar.dev/img/chicken-salad.jpg"},null,-1)),vl={class:"q-pa-xm row q-gutter-x-sm justify-between"},pl=me(()=>e("div",null,"Quantity:",-1)),gl={class:"q-pa-xm row q-gutter-x-sm justify-between"},hl=me(()=>e("div",null,"Price:",-1)),fl={class:"row justify-between"},yl={class:"text-h6"},bl={class:"q-mb-lg row justify-between"},xl=me(()=>e("div",{class:"text-weight-light"},"Remainings",-1)),wl=me(()=>e("div",{class:"text-weight-light"},"Softdrinks Out",-1)),$l={class:"row q-gutter-xm justify-between"},ql={class:"q-gutter-sm"},kl=me(()=>e("div",{class:"text-weight-light"},"Beginnings",-1)),Pl=me(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),Sl={class:"q-gutter-sm"},Cl=me(()=>e("div",{class:"text-weight-light"},"Added Stocks",-1)),Ol=me(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),Vl={class:"q-gutter-sm"},Il=me(()=>e("div",{class:"text-weight-light"},"Price",-1)),Rl={align:"right"},Bl={__name:"SoftdrinksCard",props:{filter:String},setup(o){var b,p,k;const{capitalizeFirstLetter:u,formatPrice:m}=pe(),h=ae(),c=h.user;console.log("userData",c);const g=((b=c==null?void 0:c.device)==null?void 0:b.reference_id)||((k=(p=c.device)==null?void 0:p.reference)==null?void 0:k.id)||"0";console.log("branchId",g);const s=x(null),v=x(!1);x(!1);const B=o,L=n=>{s.value=n,console.log("selectedItemss",s.value),v.value=!0},r=Re({softdrinksSold:0,remainnings:"",beginnings:0,softdrinksOut:""}),_=x({remainnings:"",softdrinksOut:""}),V=n=>{_.value[n]=""},P=()=>{_.value.remainnings="",_.value.softdrinksOut="";let n=!0;return r.remainnings||(_.value.remainnings="Remaining is required",n=!1),r.softdrinksOut||(_.value.softdrinksOut="Softdrinks Out is required",n=!1),n},I=q(()=>s.value?r.softdrinksSold*s.value.price:0);q(()=>m(I.value));const C=()=>{if(s.value){const n=parseInt(s.value.total_quantity)||0,i=parseInt(r.remainnings)||0,d=parseInt(r.softdrinksOut)||0,l=i+d;r.softdrinksSold=n-l}};X(()=>r.remainnings,n=>{C()}),X(()=>r.softdrinksOut,n=>{C()});const U=q(()=>h.softdrinksProducts);X(U,n=>{});const D=q(()=>{var n;return((n=U.value)==null?void 0:n.filter(i=>i.product.name.toLowerCase().includes(B.filter.toLowerCase())))||[]}),F=()=>{s.value=null,r.softdrinksSold=0,r.remainnings="",r.beginnings=0,r.softdrinksOut="",v.value=!1},w=()=>{var i;if(!P())return;ye.show({spinner:Qe,message:`${u(s.value.product.name)} putting to the list...`,messageColor:"white"});const n={user_id:c==null?void 0:c.data.id,branch_id:g||((i=c==null?void 0:c.device)==null?void 0:i.branch_id),product_id:s.value.product.id,name:s.value.product.name,total:s.value.total_quantity,added_stocks:s.value.new_production,sold:r.softdrinksSold,out:r.softdrinksOut,beginnings:s.value.beginnings,remaining:r.remainnings,price:s.value.price,sales:I.value,new_production:0};console.log("report",n),h.updateSoftdrinksReport(n),qe.create({message:"Product added successfully",color:"positive",position:"top"}),setTimeout(()=>{ye.hide(),F()},2e3)};return(n,i)=>(f(),R(Z,null,[e("div",cl,[t(Be,{style:{height:"450px","max-width":"1500px"}},{default:a(()=>[!D.value||D.value.length===0?(f(),R("div",ul," No data available ")):(f(),R("div",_l,[(f(!0),R(Z,null,fe(D.value,(d,l)=>(f(),H(Ae,{key:l,once:"",transition:"scale",class:"example-item"},{default:a(()=>[t(M,{onClick:$=>L(d),class:"q-ma-sm my-card"},{default:a(()=>[ml,e("div",{class:W(["q-pa-sm",{"text-subtitle2":d.product.name.length<=5,"text-caption text-weight-medium":d.product.name.length>10&&d.product.name.length<=20,"text-caption":d.product.name.length>20}])},y(A(u)(d.product.name)),3),t($e),t(S,{class:"text-subtitle2 text-weight-regular"},{default:a(()=>[e("div",vl,[pl,e("div",null,y(d.total_quantity),1)]),e("div",gl,[hl,e("div",null,y(A(m)(d.price)),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]))]),_:1})]),e("div",null,[t(ne,{modelValue:v.value,"onUpdate:modelValue":i[4]||(i[4]=d=>v.value=d),persistent:""},{default:a(()=>[t(M,{class:"my-card q-pa-md",style:{width:"700px","max-width":"80vw"}},{default:a(()=>[t(S,null,{default:a(()=>[e("div",fl,[e("div",yl,y(A(u)(s.value?s.value.product.name:"")),1),e("div",null,[t(j,{round:"",dense:"",flat:"",icon:"close",onClick:F})])])]),_:1}),t(S,null,{default:a(()=>[e("div",bl,[e("div",null,[xl,t(z,{modelValue:r.remainnings,"onUpdate:modelValue":[i[0]||(i[0]=d=>r.remainnings=d),i[1]||(i[1]=d=>V("remainnings"))],dense:"",outlined:"",mask:"#####",type:"number",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[d=>!!d||"Softdrinks out is required"],error:!!_.value.remainnings,"error-message":_.value.remainnings},null,8,["modelValue","rules","error","error-message"])]),e("div",null,[wl,t(z,{modelValue:r.softdrinksOut,"onUpdate:modelValue":[i[2]||(i[2]=d=>r.softdrinksOut=d),i[3]||(i[3]=d=>V("softdrinksOut"))],dense:"",outlined:"",mask:"#####",type:"number",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[d=>!!d||"Softdrinks out is required"],error:!!_.value.softdrinksOut,"error-message":_.value.softdrinksOut},null,8,["modelValue","rules","error","error-message"])])]),e("div",$l,[e("div",ql,[kl,t(z,{dense:"",outlined:"",readonly:"",label:s.value?s.value.beginnings:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[Pl]),_:1},8,["label"])]),e("div",Sl,[Cl,t(z,{dense:"",outlined:"",readonly:"",label:s.value?s.value.new_production:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[Ol]),_:1},8,["label"])]),e("div",Vl,[Il,t(z,{dense:"",outlined:"",readonly:"",label:s.value?A(m)(s.value.price):"",style:{width:"150px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),_:1}),t(S,null,{default:a(()=>[e("div",Rl,[t(j,{color:"red-6",label:"Ok",onClick:w})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var Dl=Y(Bl,[["__scopeId","data-v-50fe5b47"]]);const Ql={class:"q-gutter-y-md"},Al={class:"row q-gutter-md"},Nl={class:"row q-gutter-md"},jl={__name:"SoftdrinksPage",setup(o){const u=x(""),m=ge(),h=s=>{u.value=s},c=s=>{m.dialog({component:je,componentProps:{category:s}})},g=s=>{m.dialog({component:Te,componentProps:{category:s}})};return(s,v)=>(f(),R(Z,null,[e("div",Ql,[e("div",Al,[e("div",null,[t(Ne,{onUpdateSearch:h})]),e("div",Nl,[e("div",null,[t(j,{class:"bg-gradient text-white",outlined:"",label:"Send Softdrinks To Branch",onClick:v[0]||(v[0]=B=>c("Softdrinks"))})]),e("div",null,[t(j,{class:"add-bg-gradient text-white",outlined:"",label:"Added Softdrinks",onClick:v[1]||(v[1]=B=>g("Softdrinks"))})])])])]),e("div",null,[t(Dl,{filter:u.value},null,8,["filter"])])],64))}};var Tl=Y(jl,[["__scopeId","data-v-9ef21600"]]);const Le=o=>(re("data-v-48231c1e"),o=o(),ie(),o),Ll={class:"q-mt-md"},zl={class:"row q-pa-lg q-gutter-sm q-gutter-y-md"},Ul=Le(()=>e("img",{src:"https://cdn.quasar.dev/img/chicken-salad.jpg"},null,-1)),Fl={class:"q-pa-xm row q-gutter-x-sm justify-between"},Hl=Le(()=>e("div",null,"Layers",-1)),Ml={class:"q-pa-xm row q-gutter-x-sm justify-between"},El=Le(()=>e("div",null,"Price:",-1)),Kl={class:"row justify-between"},Zl={class:"text-h6"},Jl={class:"row q-gutter-x-sm"},Gl=Le(()=>e("div",{class:"text-subtitle2"},"Layer /s :",-1)),Wl={class:"text-weight-light"},Xl={class:"row q-gutter-x-sm"},Yl=Le(()=>e("div",{class:"text-subtitle2"},"Price :",-1)),en={class:"text-weight-light"},tn={__name:"CakeCard",setup(o){const u=ae(),m=Qt(),h=q(()=>m.onDisplayProducts),c=localStorage.getItem("branch_id"),g=x(null),s=x(!1);Ze(async()=>{c&&await v()});const v=async()=>{const P=await m.fetchOnDisplayProducts(c);h.value=P,console.log("sdfasdfas",h.value)},B=P=>P?P.split(" ").map(I=>I.charAt(0).toUpperCase()+I.slice(1).toLowerCase()).join(" "):"",L=P=>{g.value=P,s.value=!0},r=P=>new Intl.NumberFormat("en-US",{style:"currency",currency:"PHP",minimumFractionDigits:2,maximumFractionDigits:2}).format(P).replace("\u20B1","\u20B1 "),_=async()=>{if(g.value){const P={cake_report_id:g.value.id,name:g.value.name,price:g.value.price,sales_status:"sold"};console.log(P),u.updateCakeReport(P),qe.create({type:"positive",message:`${P.name} is sold`})}s.value=!1},V=async()=>{if(g.value){const P={cake_report_id:g.value.id,name:g.value.name,price:g.value.price,sales_status:"pull out"};u.updateCakeReport(P),qe.create({type:"warning",message:`${P.name} is pull out`})}s.value=!1};return(P,I)=>(f(),R(Z,null,[e("div",Ll,[t(Be,{style:{height:"450px","max-width":"1500px"}},{default:a(()=>[e("div",zl,[(f(!0),R(Z,null,fe(h.value,(C,U)=>(f(),H(Ae,{key:U,once:"",transition:"scale",class:"example-item"},{default:a(()=>[t(M,{onClick:D=>L(C),class:"q-ma-sm my-card"},{default:a(()=>[Ul,e("div",{class:W(["q-pa-sm",{"text-h6":C.name.length<=10,"text-caption text-weight-medium":C.name.length>10&&C.name.length<=20,"text-caption text-weight-medium":C.name.length>20}])},y(B(C.name)),3),t($e),t(S,null,{default:a(()=>[e("div",Fl,[Hl,e("div",null,y(C.layers),1)]),e("div",Ml,[El,e("div",null,y(r(C.price)),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))])]),_:1})]),t(ne,{modelValue:s.value,"onUpdate:modelValue":I[0]||(I[0]=C=>s.value=C)},{default:a(()=>[t(M,null,{default:a(()=>[t(S,null,{default:a(()=>[e("div",Kl,[e("div",Zl,y(B(g.value.name)),1),e("div",null,[Ve(t(j,{round:"",dense:"",flat:"",icon:"close"},null,512),[[Ie]])])])]),_:1}),t($e),t(S,{class:"row justify-between"},{default:a(()=>[e("div",Jl,[Gl,e("div",Wl,y(g.value.layers),1)]),e("div",Xl,[Yl,e("div",en,y(r(g.value.price)),1)])]),_:1}),t(S,{class:"q-gutter-x-md"},{default:a(()=>[t(j,{label:"Sold",color:"primary",unelevated:"",class:"rounded-borders",icon:"check_circle",onClick:_}),t(j,{label:"Pull Out",color:"negative",outline:"",class:"rounded-borders",icon:"close",onClick:V})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var sn=Y(tn,[["__scopeId","data-v-48231c1e"]]);const an={__name:"CakePage",setup(o){return(u,m)=>(f(),R("div",null,[t(sn)]))}};const ve=o=>(re("data-v-30081a95"),o=o(),ie(),o),on={class:"q-mt-md"},ln={key:0,class:"text-center q-pa-md"},nn={key:1,class:"row q-pa-lg q-gutter-y-lg"},rn=ve(()=>e("img",{src:"https://cdn.quasar.dev/img/chicken-salad.jpg"},null,-1)),dn={class:"q-pa-xm row q-gutter-x-sm justify-between"},cn=ve(()=>e("div",null,"Quantity:",-1)),un={class:"q-pa-xm row q-gutter-x-sm justify-between"},_n=ve(()=>e("div",null,"Price:",-1)),mn={class:"text-h6"},vn={class:"q-mb-lg row justify-between"},pn=ve(()=>e("div",{class:"text-weight-light"},"Remainings",-1)),gn=ve(()=>e("div",{class:"text-weight-light"},"Product Out",-1)),hn={class:"row q-gutter-xm justify-between"},fn={class:"q-gutter-sm"},yn=ve(()=>e("div",{class:"text-weight-light"},"Beginnings",-1)),bn=ve(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),xn={class:"q-gutter-sm"},wn=ve(()=>e("div",{class:"text-weight-light"},"Added Stocks",-1)),$n=ve(()=>e("span",{class:"text-body2 text-weight-regular"},"pcs",-1)),qn={class:"q-gutter-sm"},kn=ve(()=>e("div",{class:"text-weight-light"},"Price",-1)),Pn={align:"right"},Sn={__name:"OtherCard",props:{filter:String},setup(o){var b,p,k;const{capitalizeFirstLetter:u,formatPrice:m}=pe(),h=ae(),c=h.user;console.log("userdata for branch",c);const g=((b=c==null?void 0:c.device)==null?void 0:b.reference_id)||((k=(p=c.device)==null?void 0:p.reference)==null?void 0:k.id)||"0";console.log("branchId",g);const s=x(null),v=x(!1);x(!1);const B=o,L=n=>{s.value=n,console.log("selectedItemsssss",s.value),v.value=!0},r=Re({otherProductSold:0,remainnings:"",beginnings:0,otherProductOut:""}),_=x({remainnings:"",otherProductOut:""}),V=n=>{_.value[n]=""},P=()=>{_.value.remainnings="",_.value.otherProductOut="";let n=!0;return r.remainnings||(_.value.remainnings="Remaining is required",n=!1),r.otherProductOut||(_.value.otherProductOut="Product Out is required",n=!1),n},I=()=>{if(s.value){const n=parseInt(s.value.total_quantity)||0,i=parseInt(r.remainnings)||0,d=parseInt(r.otherProductOut)||0,l=i+d;r.otherProductSold=n-l}};X(()=>r.remainnings,n=>{I()}),X(()=>r.otherProductOut,n=>{I()});const C=q(()=>h.othersProducts);console.log("othersProducts",C.value);const U=q(()=>s.value?r.otherProductSold*s.value.price:0);q(()=>formatCurrency(U.value));const D=q(()=>{var n;return((n=C.value)==null?void 0:n.filter(i=>i.product.name.toLowerCase().includes(B.filter.toLowerCase())))||[]}),F=()=>{s.value=null,r.otherProductOut="",r.beginnings=0,r.otherProductSold=0,r.remainnings="",v.value=!1},w=async()=>{var i;if(!P())return;const n={user_id:c==null?void 0:c.data.id,branch_id:g||((i=c==null?void 0:c.device)==null?void 0:i.branch_id),product_id:s.value.product.id,name:s.value.product.name,total:s.value.total_quantity,sold:r.otherProductSold,out:r.otherProductOut,added_stocks:s.value.new_production,beginnings:s.value.beginnings,remaining:r.remainnings,price:s.value.price,sales:U.value,new_production:0};console.log("report",n),h.updateOtherProductsReport(n),qe.create({message:"Product added successfully",color:"positive",position:"top"}),F()};return(n,i)=>(f(),R(Z,null,[e("div",on,[t(Be,{style:{height:"700px","max-width":"1500px"}},{default:a(()=>[!D.value||D.value.length===0?(f(),R("div",ln," No data available ")):(f(),R("div",nn,[(f(!0),R(Z,null,fe(D.value,(d,l)=>(f(),H(Ae,{key:l,once:"",transition:"scale",class:"example-item q-gutter-sm"},{default:a(()=>[t(M,{onClick:$=>L(d),class:"q-ma-sm my-card"},{default:a(()=>[rn,e("div",{class:W(["q-pa-sm",{"text-subtitle2":d.product.name.length<=5,"text-caption text-weight-medium":d.product.name.length>10&&d.product.name.length<=20,"text-caption":d.product.name.length>20}])},y(A(u)(d.product.name)),3),t($e),t(S,{class:"text-subtitle2 text-weight-regular"},{default:a(()=>[e("div",dn,[cn,e("div",null,y(d.total_quantity),1)]),e("div",un,[_n,e("div",null,y(A(m)(d.price)),1)])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]))]),_:1})]),e("div",null,[t(ne,{modelValue:v.value,"onUpdate:modelValue":i[4]||(i[4]=d=>v.value=d),persistent:""},{default:a(()=>[t(M,{class:"my-card q-pa-md",style:{width:"700px","max-width":"80vw"}},{default:a(()=>[t(S,{class:"row justify-between"},{default:a(()=>[e("div",mn,y(A(u)(s.value?s.value.product.name:"")),1),e("div",null,[t(j,{round:"",dense:"",flat:"",icon:"close",onClick:F})])]),_:1}),t(S,null,{default:a(()=>[e("div",vn,[e("div",null,[pn,t(z,{modelValue:r.remainnings,"onUpdate:modelValue":[i[0]||(i[0]=d=>r.remainnings=d),i[1]||(i[1]=d=>V("remainnings"))],dense:"",outlined:"",mask:"#####",suffix:"pcs",placeholder:"0",type:"number",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[d=>!!d||"Remainnings out is required"],error:!!_.value.remainnings,"error-message":_.value.remainnings},null,8,["modelValue","rules","error","error-message"])]),e("div",null,[gn,t(z,{modelValue:r.otherProductOut,"onUpdate:modelValue":[i[2]||(i[2]=d=>r.otherProductOut=d),i[3]||(i[3]=d=>V("otherProductOut"))],dense:"",outlined:"",type:"number",mask:"#####",suffix:"pcs",placeholder:"0",style:{width:"260px","max-width":"300px","min-width":"50px"},rules:[d=>!!d||"Product out is required"],error:!!_.value.otherProductOut,"error-message":_.value.otherProductOut},null,8,["modelValue","rules","error","error-message"])])]),e("div",hn,[e("div",fn,[yn,t(z,{dense:"",outlined:"",readonly:"",label:s.value?s.value.beginnings:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[bn]),_:1},8,["label"])]),e("div",xn,[wn,t(z,{dense:"",outlined:"",readonly:"",label:s.value?s.value.new_production:"",style:{width:"150px","max-width":"300px","min-width":"50px"}},{append:a(()=>[$n]),_:1},8,["label"])]),e("div",qn,[kn,t(z,{dense:"",outlined:"",readonly:"",label:s.value?A(m)(s.value.price):"",style:{width:"150px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),_:1}),t(S,null,{default:a(()=>[e("div",Pn,[t(j,{color:"red-6",label:"Ok",onClick:w})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}};var Cn=Y(Sn,[["__scopeId","data-v-30081a95"]]);const On={class:"q-gutter-y-md"},Vn={class:"row q-gutter-md"},In={class:"row q-gutter-md"},Rn={__name:"OtherPage",setup(o){const u=x(""),m=ge(),h=s=>{u.value=s},c=s=>{m.dialog({component:je,componentProps:{category:s}})},g=s=>{m.dialog({component:Te,componentProps:{category:s}})};return(s,v)=>(f(),R("div",On,[e("div",Vn,[e("div",null,[t(Ne,{onUpdateSearch:h})]),e("div",In,[e("div",null,[t(j,{class:"bg-gradient text-white",outlined:"",label:"Send Other Product to Branch",onClick:v[0]||(v[0]=B=>c("Other"))})]),e("div",null,[t(j,{class:"add-bg-gradient text-white",outlined:"",label:"Added Other Prod",onClick:v[1]||(v[1]=B=>g("Other"))})])])]),e("div",null,[t(Cn,{filter:u.value},null,8,["filter"])])]))}};var Bn=Y(Rn,[["__scopeId","data-v-6d523fc5"]]);const Dn={class:"text-h6 text-white"},kr={__name:"ProductsPage",setup(o){var s,v,B;const u=x("bread"),m=ae();He();const h=m.user,c=((s=h.device)==null?void 0:s.refence_id)||((B=(v=h.device)==null?void 0:v.reference)==null?void 0:B.id)||"0",g=async()=>{await m.fetchBranchProducts(c),console.log("sales report productsdsdsd breadProducts",m.breadProducts),console.log("sales report productsdsdsd selectaProducts",m.selectaProducts),console.log("sales report productsdsdsd nestleProducts",m.nestleProducts),console.log("sales report productsdsdsd othersProducts",m.othersProducts),console.log("sales report productsdsdsd softdrinksProducts",m.softdrinksProducts)};return Ze(async()=>{c&&await g()}),(L,r)=>(f(),H(M,{flat:""},{default:a(()=>[t(S,{style:{"background-color":"#ef4444"}},{default:a(()=>[e("div",Dn,[t(K,{name:"fa-solid fa-store"}),J(" Store Branches ")])]),_:1}),t(S,null,{default:a(()=>[t(Ct,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=_=>u.value=_),dense:"",class:"bg-white","active-color":"red-6","indicator-color":"red-6",align:"justify"},{default:a(()=>[t(Ce,{name:"bread",label:"Bread"}),t(Ce,{name:"selecta",label:"Selecta"}),t(Ce,{name:"nestle",label:"Nestl\xE9"}),t(Ce,{name:"softdrinks",label:"Softdrinks"}),t(Ce,{name:"cake",label:"Cake /s"}),t(Ce,{name:"others",label:"Other /s"})]),_:1},8,["modelValue"])]),_:1}),t(S,null,{default:a(()=>[t(Ot,{modelValue:u.value,"onUpdate:modelValue":r[1]||(r[1]=_=>u.value=_),animated:""},{default:a(()=>[t(xe,{name:"bread"},{default:a(()=>[e("div",null,[t(so)])]),_:1}),t(xe,{name:"selecta"},{default:a(()=>[e("div",null,[t(Bo)])]),_:1}),t(xe,{name:"nestle"},{default:a(()=>[e("div",null,[t(dl)])]),_:1}),t(xe,{name:"softdrinks"},{default:a(()=>[e("div",null,[t(Tl)])]),_:1}),t(xe,{name:"cake"},{default:a(()=>[t(an)]),_:1}),t(xe,{name:"others"},{default:a(()=>[t(Bn)]),_:1}),t(xe)]),_:1},8,["modelValue"])]),_:1})]),_:1}))}};export{kr as default};
