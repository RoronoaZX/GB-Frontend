import{bu as be,g as fe,ag as ae,a6 as xe,a7 as ye,a8 as ke,a9 as we,r as M,bv as Se,ab as Ie,c as b,u as Q,A as qe,j as k,l as Ce,bg as Re,a0 as G,ad as Le,bw as $e,k as Te,L as H,V as Qe,o as _,a2 as S,J as a,f as n,w as r,e as B,Q as W,I as j,_ as p,M as z,a3 as A,a4 as V,O as le,R as ne,t as Be,$ as L,K as J,bc as oe,H as je,a as Ae}from"./index.88dd7130.js";import{Q as Ne}from"./QSpace.cdf91029.js";import{a as K,b as $,Q as se}from"./QList.954fed3a.js";import{b as O,Q as N}from"./use-virtual-scroll.48e66106.js";import{Q as Ve}from"./QSlideTransition.178e29b3.js";import{Q as Oe}from"./QVirtualScroll.3b9bfcbb.js";import{u as F}from"./baker-report.639f838c.js";import{_ as ie}from"./plugin-vue_export-helper.21dcd24c.js";import{u as Fe}from"./branch-recipe.9bb0cd6e.js";import"./axios.5a692ff8.js";const T=be({}),Pe=Object.keys(ae);var te=fe({name:"QExpansionItem",props:{...ae,...xe,...ye,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...ke,"click","afterShow","afterHide"],setup(e,{slots:f,emit:v}){const{proxy:{$q:u}}=Ce(),w=we(e,u),m=M(e.modelValue!==null?e.modelValue:e.defaultOpened),t=M(null),x=Se(),{show:h,hide:I,toggle:y}=Ie({showing:m});let g,l;const o=b(()=>`q-expansion-item q-item-type q-expansion-item--${m.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),d=b(()=>{if(e.contentInsetLevel===void 0)return null;const s=u.lang.rtl===!0?"Right":"Left";return{["padding"+s]:e.contentInsetLevel*56+"px"}}),i=b(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),c=b(()=>{const s={};return Pe.forEach(R=>{s[R]=e[R]}),s}),q=b(()=>i.value===!0||e.expandIconToggle!==!0),D=b(()=>e.expandedIcon!==void 0&&m.value===!0?e.expandedIcon:e.expandIcon||u.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),U=b(()=>e.disable!==!0&&(i.value===!0||e.expandIconToggle===!0)),C=b(()=>({expanded:m.value===!0,detailsId:x.value,toggle:y,show:h,hide:I})),Y=b(()=>{const s=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:u.lang.label[m.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":m.value===!0?"true":"false","aria-controls":x.value,"aria-label":s}});Q(()=>e.group,s=>{l!==void 0&&l(),s!==void 0&&ee()});function re(s){i.value!==!0&&y(s),v("click",s)}function de(s){s.keyCode===13&&Z(s,!0)}function Z(s,R){R!==!0&&t.value!==null&&t.value.focus(),y(s),Qe(s)}function ue(){v("afterShow")}function ce(){v("afterHide")}function ee(){g===void 0&&(g=Re()),m.value===!0&&(T[e.group]=g);const s=Q(m,E=>{E===!0?T[e.group]=g:T[e.group]===g&&delete T[e.group]}),R=Q(()=>T[e.group],(E,he)=>{he===g&&E!==void 0&&E!==g&&I()});l=()=>{s(),R(),T[e.group]===g&&delete T[e.group],l=void 0}}function _e(){const s={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},R=[k(H,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&m.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:D.value})];return U.value===!0&&(Object.assign(s,{tabindex:0,...Y.value,onClick:Z,onKeyup:de}),R.unshift(k("div",{ref:t,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),k($,s,()=>R)}function ve(){let s;return f.header!==void 0?s=[].concat(f.header(C.value)):(s=[k($,()=>[k(O,{lines:e.labelLines},()=>e.label||""),e.caption?k(O,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&s[e.switchToggleSide===!0?"push":"unshift"](k($,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>k(H,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&s[e.switchToggleSide===!0?"unshift":"push"](_e()),s}function me(){const s={ref:"item",style:e.headerStyle,class:e.headerClass,dark:w.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return q.value===!0&&(s.clickable=!0,s.onClick=re,Object.assign(s,i.value===!0?c.value:Y.value)),k(K,s,ve)}function ge(){return Le(k("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:d.value,id:x.value},Te(f.default)),[[$e,m.value]])}function pe(){const s=[me(),k(Ve,{duration:e.duration,onShow:ue,onHide:ce},ge)];return e.expandSeparator===!0&&s.push(k(G,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:w.value}),k(G,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:w.value})),s}return e.group!==void 0&&ee(),qe(()=>{l!==void 0&&l()}),()=>k("div",{class:o.value},[k("div",{class:"q-expansion-item__container relative-position"},pe())])}});const P=e=>(le("data-v-21535d8a"),e=e(),ne(),e),De=P(()=>a("div",{class:"text-h6",align:"center"},"Report List",-1)),Ue={class:"q-pa-md row wrap justify-center"},Ee={class:"row justify-between q-gutter-x-md"},He={class:"row items-center"},ze={class:"text-subtitle1 q-ml-sm"},Ke={class:"content-section"},Me={class:"q-mt-xs row justify-between"},Ge=P(()=>a("div",null,"Kilo",-1)),Je={class:"q-mt-xs row justify-between"},We=P(()=>a("div",null,"Short",-1)),Xe={class:"q-mt-xs row justify-between"},Ye=P(()=>a("div",null,"Over",-1)),Ze={class:"q-mt-xs row justify-between"},et=P(()=>a("div",null,"Actual Target",-1)),tt={class:"q-pl-md"},at={class:"row justify-between"},lt={class:"q-pl-md"},nt={class:"row justify-between"},ot={align:"right"},st={__name:"ReportListComponent",setup(e){const f=F(),v=b(()=>f.reports);console.log("bakers report:",v.value);const u=t=>{f.removeReport(t)},w=t=>t?t.split(" ").map(x=>x.charAt(0).toUpperCase()+x.slice(1).toLowerCase()).join(" "):"",m=async()=>{f.createReports()};return(t,x)=>(_(),S(A,null,[De,a("div",Ue,[n(Oe,{items:v.value,"scroll-target":"body","virtual-scroll-horizontal":"",class:"my-virtual-scroll"},{default:r(({item:h,index:I})=>[(_(),B(W,{flat:"",bordered:"",class:"q-gutter-sm my-card",key:I},{default:r(()=>[n(j,null,{default:r(()=>[a("div",Ee,[a("div",He,[n(H,{name:"assignment",color:"primary"}),a("div",ze,p(w(h.recipe_name))+" - "+p(h.recipe_category),1)]),a("div",null,[n(z,{flat:"",round:"",icon:"close",onClick:y=>u(I),class:"text-negative close-btn"},null,8,["onClick"])])])]),_:2},1024),n(G),n(j,null,{default:r(()=>[a("div",Ke,[a("div",Me,[Ge,a("div",null,p(h.kilo)+" kgs",1)]),a("div",Je,[We,a("div",null,p(h.short)+" pcs",1)]),a("div",Xe,[Ye,a("div",null,p(h.over)+" pcs",1)]),a("div",Ze,[et,a("div",null,p(h.actual_target)+" pcs",1)]),(_(),B(te,{key:"breads-"+I,label:"Breads",dense:"",class:""},{default:r(()=>[a("ul",tt,[(_(!0),S(A,null,V(h.breads,(y,g)=>(_(),S("li",{key:"bread-"+g,class:"q-my-sm"},[a("div",at,[a("div",null,p(y.bread_name),1),a("div",null,p(y.bread_production),1)])]))),128))])]),_:2},1024)),(_(),B(te,{key:"ingredients-"+I,label:"Ingredients",dense:"",class:""},{default:r(()=>[a("ul",lt,[(_(!0),S(A,null,V(h.ingredients,(y,g)=>(_(),S("li",{key:"ingredient-"+g,class:"q-my-sm"},[a("div",nt,[a("div",null,p(y.code),1),a("div",null,p(y.quantity)+" "+p(y.unit),1)])]))),128))])]),_:2},1024))])]),_:2},1024)]),_:2},1024))]),_:1},8,["items"])]),a("div",ot,[n(z,{color:"red-6",icon:"edit",label:"Create",onClick:m})])],64))}};var it=ie(st,[["__scopeId","data-v-21535d8a"]]);const X=e=>(le("data-v-dc31fdf6"),e=e(),ne(),e),rt={class:"row justify-center"},dt={class:"text-h6 q-ma-sm"},ut={class:"row q-gutter-sm"},ct={class:"row q-mt-sm q-gutter-sm"},_t={class:"q-mb-md"},vt=X(()=>a("div",{class:"q-mt-sm"},"Kilo",-1)),mt={class:"q-mt-md q-gutter-md"},gt={key:0},pt=X(()=>a("div",{class:"q-mt-sm"},null,-1)),ht=X(()=>a("div",{class:"text-h6 q-mt-sm",align:"center"},"Ingredients List",-1)),bt={class:"q-mt-lg"},ft={class:"ingredient-quantity"},xt={class:"ingredient-quantity"},yt={__name:"ReportRecipeInputComponent",setup(e){const f=F(),v=b(()=>f.user),u=b(()=>f.recipes);console.log("erwe:",u.value);const w=b(()=>{var d,i,c,q;const l=(i=(d=u.value)==null?void 0:d.name)!=null?i:"Recipe Name",o=(q=(c=u.value)==null?void 0:c.category)!=null?q:"Category";return`${l} - ${o}`}),m=l=>l?l.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" "):"",t=Be({user_id:null,branch_id:null,branch_recipe_id:null,recipe_name:"",recipe_category:"",kilo:"",short:0,over:0,target:0,actual_target:0,breads:[]}),x=()=>{var d;const l=parseFloat(t.kilo),o=parseFloat((d=u.value)==null?void 0:d.target);!isNaN(l)&&!isNaN(o)?t.actual_target=l*o:t.actual_target=0},h=()=>{const o=t.breads.reduce((d,i)=>d+(parseFloat(i.value)||0),0)-t.actual_target;o>0?(t.over=o,t.short=0):o<0?(t.short=Math.abs(o),t.over=0):(t.short=0,t.over=0)},I=()=>{var o,d,i,c,q,D,U;t.user_id=((o=v.value)==null?void 0:o.data.id)||"",t.branch_id=((i=(d=v.value)==null?void 0:d.employee)==null?void 0:i.branch_id)||"",t.branch_recipe_id=((c=u.value)==null?void 0:c.id)||"",t.recipe_name=((q=u.value)==null?void 0:q.name)||"",t.target=((D=u.value)==null?void 0:D.target)||"",t.recipe_category=((U=u.value)==null?void 0:U.category)||"";const l={user_id:t.user_id,branch_id:t.branch_id,branch_recipe_id:t.branch_recipe_id,recipe_name:t.recipe_name,recipe_category:t.recipe_category,status:"pending",kilo:t.kilo,short:t.short,over:t.over,target:t.target,actual_target:t.actual_target,breads:t.breads.map(C=>({bread_id:C.id,bread_name:C.bread_name,bread_production:parseInt(C.value,10)})),ingredients:g.value.map(C=>({ingredients_id:C.raw_materials_id,code:C.code,quantity:C.multipliedQuantity,unit:C.unit}))};console.log("reportssss dATA:",l),f.setReport(l),console.log("Report data set to store:",f.reports),y()},y=()=>{var l,o;u.value="",w.value="",t.recipe_name="",t.kilo="",t.short=0,t.over=0,t.target=0,t.actual_target=0,t.breads=((o=(l=u.value)==null?void 0:l.bread_groups)==null?void 0:o.map(d=>({id:d.product_id,bread_name:d.bread_name,value:""})))||[]},g=b(()=>{var o;const l=parseInt(t.kilo)||1;return(((o=u.value)==null?void 0:o.ingredients)||[]).map(d=>{const i=parseInt(d.quantity),c=!isNaN(l)&&!isNaN(i)?l*i:0;return{...d,multipliedQuantity:c}})});return Q(()=>t.kilo,()=>{x(),h()}),Q(()=>{var l;return(l=u.value)==null?void 0:l.ingredients},()=>{h()},{deep:!0}),Q(()=>t.breads.map(l=>l.value),h,{deep:!0}),Q(()=>{var l;return(l=u.value)==null?void 0:l.bread_groups},()=>{var l;t.breads=((l=u.value)==null?void 0:l.bread_groups.map(o=>({id:o.product_id,bread_name:o.bread_name,value:""})))||[],h()}),(l,o)=>{var d;return _(),S("div",rt,[a("div",null,[a("div",null,[a("div",dt,p(m(w.value)),1)]),a("div",ut,[a("div",null,[L(" Target Pcs "),a("div",null,[n(N,{readonly:"",outlined:"",type:"number",dense:"",label:((d=u.value)==null?void 0:d.target)||0,style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["label"])])]),a("div",null,[L(" Actual Target "),a("div",null,[n(N,{readonly:"",outlined:"",dense:"",label:t.actual_target,style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),a("div",ct,[a("div",null,[L(" Short "),a("div",null,[n(N,{readonly:"",outlined:"",type:"number",dense:"",label:t.short,style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["label"])])]),a("div",null,[L(" Over "),a("div",null,[n(N,{readonly:"",outlined:"",dense:"",label:t.over,style:{width:"100px","max-width":"300px","min-width":"50px"}},null,8,["label"])])])]),a("div",_t,[vt,a("div",null,[n(J,{outlined:"",dense:"",modelValue:t.kilo,"onUpdate:modelValue":o[0]||(o[0]=i=>t.kilo=i),type:"number",placeholder:"kgs",style:{width:"210px","max-width":"300px","min-width":"50px"}},null,8,["modelValue"])])]),a("div",mt,[t.breads.length?(_(),S("div",gt,[(_(!0),S(A,null,V(t.breads,(i,c)=>(_(),S("div",{key:i.id},[a("div",null,p(i.bread_name),1),a("div",null,[n(J,{outlined:"",modelValue:t.breads[c].value,"onUpdate:modelValue":q=>t.breads[c].value=q,dense:"",type:"number",placeholder:"Pcs",style:{width:"210px","max-width":"300px","min-width":"50px"}},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])):oe("",!0)]),pt,n(z,{outline:"",dense:"",size:"md",icon:"add",label:"Report",class:"text-purple",onClick:I})]),a("div",null,[ht,a("div",bt,[n(N,{readonly:"",outlined:"",style:{width:"400px","max-width":"450px","min-width":"100px"}},{control:r(()=>[n(se,{dense:"",separator:""},{default:r(()=>[(_(!0),S(A,null,V(g.value,(i,c)=>(_(),B(K,{key:c,class:"q-pa-xs justify-between"},{default:r(()=>[n($,null,{default:r(()=>[n(O,{class:"ingredient-name"},{default:r(()=>[L(p(i.code),1)]),_:2},1024)]),_:2},1024),n($,{side:"",class:"text-right"},{default:r(()=>[a("div",ft,p(i.multipliedQuantity.toFixed(2)),1)]),_:2},1024),n($,{side:"",class:"text-right"},{default:r(()=>[a("div",xt,p(i.unit),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])])])}}};var kt=ie(yt,[["__scopeId","data-v-dc31fdf6"]]);const wt={key:0,class:"custom-list z-top"},St={__name:"ReportSearchComponent",setup(e){var g,l;const f=F(),v=M(""),u=F(),w=Fe(),m=b(()=>u.user);console.log("erw:",m.value);const t=b(()=>w.branchRecipe),x=((l=(g=m.value)==null?void 0:g.employee)==null?void 0:l.branch_id)||"";console.log("branch_id",x);const h=async()=>{w.searchBranchRecipe(v.value,x),console.log("searchQuery.value",v.value),console.log("branch_id",x)},I=o=>{console.log("branch recipe",o),f.setRecipe(o),v.value=""},y=o=>o?o.split(" ").map(d=>d.charAt(0).toUpperCase()+d.slice(1).toLowerCase()).join(" "):"";return console.log("recipessss",t.value),(o,d)=>(_(),B(J,{modelValue:v.value,"onUpdate:modelValue":[d[0]||(d[0]=i=>v.value=i),h],debounce:"1000",outlined:"",rounded:"",placeholder:"Search product",dense:""},{append:r(()=>[a("div",null,[n(H,{name:"search"})])]),default:r(()=>[v.value?(_(),S("div",wt,[n(W,null,{default:r(()=>[n(se,{separator:""},{default:r(()=>{var i;return[(i=t.value)!=null&&i.length?(_(!0),S(A,{key:1},V(t.value,c=>(_(),B(K,{onClick:q=>I(c),key:c.id,clickable:""},{default:r(()=>[n($,null,{default:r(()=>[n(O,null,{default:r(()=>[L(p(y(c==null?void 0:c.name)),1)]),_:2},1024)]),_:2},1024),n($,null,{default:r(()=>[n(O,{side:""},{default:r(()=>[L(p(c==null?void 0:c.category),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)):(_(),B(K,{key:0},{default:r(()=>[L(" No record found. ")]),_:1}))]}),_:1})]),_:1})])):oe("",!0)]),_:1},8,["modelValue"]))}},It={class:"text-h6 text-dark row justify-between"},qt=a("div",null," Bakers Report ",-1),Ct={class:"row"},Rt={class:"q-gutter-y-md"},Lt={class:"q-gutter-y-md"},Pt={__name:"ReportIdCreatePage",setup(e){const f=je(),v=F(),u=b(()=>v.recipes);console.log("report",u);const w=()=>{v.clearData(),f.push("/branch/baker/report")};return(m,t)=>{const x=Ae("BakersReportSearch");return _(),S("div",null,[n(W,{flat:""},{default:r(()=>[n(j,null,{default:r(()=>[a("div",It,[a("div",null,[n(z,{outline:"",flat:"",icon:"arrow_back",onClick:w})]),n(Ne),qt])]),_:1}),n(j,null,{default:r(()=>[a("div",Ct,[n(x)])]),_:1}),n(j,null,{default:r(()=>[a("div",null,[n(St)]),a("div",Rt,[a("div",null,[n(kt)])])]),_:1}),n(j,null,{default:r(()=>[a("div",Lt,[a("div",null,[n(it)])])]),_:1})]),_:1})])}}};export{Pt as default};
