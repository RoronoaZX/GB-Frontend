import{Q as $}from"./QBadge.0e6e25d7.js";import{r as y,t as L,o as w,a3 as h,f as e,M as p,w as a,Q as P,I as b,ae as A,a1 as N,aI as H,J as o,K as x,aJ as E,a2 as z,a4 as S,O as U,R as I,a0 as M,N as W,c as B,z as X,u as Y,L as F,e as O,$ as T,aK as j}from"./index.5c763b80.js";import{Q as Z}from"./QPage.29dbe813.js";import{Q as G}from"./QSpace.7aecc68c.js";import{Q as k}from"./QSelect.7b1b7cb5.js";import{Q as ee}from"./QForm.5ba0c7a0.js";import{C as R}from"./ClosePopup.412ecfce.js";import{u as D}from"./raw-material.5695598e.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";import{Q as ae}from"./QSpinnerDots.73663f1e.js";import{Q,a as te}from"./QTable.43a7a1e4.js";import{Q as J}from"./QTooltip.e276ad5b.js";import{b as le}from"./badge-color.bc6eb592.js";import"./QChip.842a63d8.js";import"./QMenu.8326453f.js";import"./position-engine.e4fbf205.js";import"./selection.8f86ac43.js";import"./use-virtual-scroll.5fea08b3.js";import"./rtl.276c3f1b.js";import"./axios.1b8bd9b1.js";import"./QVirtualScroll.57d17a11.js";import"./QList.cde02a42.js";const oe=s=>(U("data-v-a71a0292"),s=s(),I(),s),se=oe(()=>o("div",{class:"text-h5 q-mr-md"},"\u{1F6E0}\uFE0F Add Raw Materials",-1)),ne={class:"q-mt-lg q-animated q-animate-bounce"},ie={class:"q-mt-md q-animated q-animate-bounce"},re={class:"q-mt-md q-animated q-animate-bounce"},de={class:"q-mt-md q-animated q-animate-bounce"},ue={__name:"RawMaterialsCreate",setup(s){const v=D(),r=y(!1),f=["Ingredients","Packaging Materials"],_=["Grams","Pcs"],c=y(!1),i=()=>{r.value=!0},n=L({name:"",code:"",category:null,unit:null}),g=async()=>{c.value=!0;try{const u=await v.createRawMaterials(n);console.log(u),r.value=!1,m()}catch(u){console.error(u),c.value=!1,r.value=!0}finally{c.value=!1}},m=()=>{n.name="",n.code="",n.category=null,n.unit=null};return(u,l)=>(w(),h(S,null,[e(p,{class:"q-pa-sm btn-add",outline:"",dense:"",elevated:"",icon:"add_circle",label:"Add Raw Materials",onClick:i,size:"md",color:"dark"}),e(z,{modelValue:r.value,"onUpdate:modelValue":l[4]||(l[4]=t=>r.value=t),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:a(()=>[e(P,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:a(()=>[e(b,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:a(()=>[se,e(G),A(e(p,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},null,512),[[R]])]),_:1}),e(N,{class:"separator-gradient"}),e(b,{class:"q-px-xl q-pt-none q-pb-lg"},{default:a(()=>[e(ee,{onSubmit:H(g,["prevent"])},{default:a(()=>[o("div",ne,[e(x,{class:"text-capitalize",modelValue:n.name,"onUpdate:modelValue":l[0]||(l[0]=t=>n.name=t),outlined:"",dense:"",label:"Raw Materials Name",rules:[t=>t&&t.length>0||"Name is required"]},null,8,["modelValue","rules"])]),o("div",ie,[e(x,{modelValue:n.code,"onUpdate:modelValue":l[1]||(l[1]=t=>n.code=t),outlined:"",dense:"",label:"Raw Materials Code",mask:"##-AAAAAAAAAAAAAAAAAAAAA",placeholder:"00-SAMPLE",rules:[t=>t&&t.length>0||"Code is required"]},null,8,["modelValue","rules"])]),o("div",re,[e(k,{modelValue:n.category,"onUpdate:modelValue":l[2]||(l[2]=t=>n.category=t),options:f,label:"Category","hide-dropdown-icon":"",outlined:"",dense:"",behavior:"menu",rules:[t=>t&&t.length>0||"Category is required"]},null,8,["modelValue","rules"])]),o("div",de,[e(k,{modelValue:n.unit,"onUpdate:modelValue":l[3]||(l[3]=t=>n.unit=t),options:_,label:"Unit","hide-dropdown-icon":"",outlined:"",dense:"",behavior:"menu",rules:[t=>t&&t.length>0||"Unit is required"]},null,8,["modelValue","rules"])]),e(E,{class:"row q-px-lg q-py-sm q-pt-none",align:"right"},{default:a(()=>[A(e(p,{class:"btn-cancel glossy",color:"negative",label:"Cancel"},null,512),[[R]]),e(p,{type:"submit",class:"btn-create glossy",color:"positive",label:"Create",loading:c.value},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var ce=V(ue,[["__scopeId","data-v-a71a0292"]]);const C=s=>(U("data-v-25e52251"),s=s(),I(),s),me=C(()=>o("div",{class:"text-h5 q-mr-md"},"\u{1F6E0}\uFE0F Edit Raw Materials",-1)),pe={class:"q-animated q-animate-bounce"},_e=C(()=>o("div",{class:"q-my-sm"},"Raw Materials Name",-1)),ge={class:"q-animated q-animate-bounce"},we=C(()=>o("div",{class:"q-my-sm"},"Raw Materials Code",-1)),ve={class:"q-animated q-animate-bounce"},fe=C(()=>o("div",{class:"q-my-sm"},"Category",-1)),ye={class:"q-mt-md"},be={class:"q-animated q-animate-bounce"},he=C(()=>o("div",{class:"q-my-sm"},"Unit",-1)),qe={class:"q-mt-md"},Me={__name:"RawMaterialsTableEdit",props:["edit"],setup(s){const v=D(),r=y(!1),f=["Ingredients","Packaging Materials"],_=["Grams","Pcs"],c=s,i=L({name:"",code:"",category:null,unit:null}),n=()=>{const m=Object.assign(i,c.edit.row);r.value=!0,console.log("editRawMaterials",m)},g=async()=>{try{const m={...c.edit.row,...i};await v.updateRawMaterials(c.edit.row.id,m),r.value=!1}catch(m){console.error("Failed to update ingredient:",m)}};return(m,u)=>(w(),h(S,null,[e(p,{color:"positive",icon:"edit",size:"sm",flat:"",round:"",dense:"",onClick:n},{default:a(()=>[e(J,{class:"bg-positive",delay:200},{default:a(()=>[M("Edit")]),_:1})]),_:1}),e(z,{modelValue:r.value,"onUpdate:modelValue":u[4]||(u[4]=l=>r.value=l),persistent:"","transition-show":"jump-up","transition-hide":"jump-down"},{default:a(()=>[e(P,{class:"my-card q-pa-none",style:{width:"420px","border-radius":"16px","box-shadow":"0 12px 24px rgba(0, 0, 0, 0.2)"}},{default:a(()=>[e(b,{class:"row items-center q-px-md q-py-sm bg-gradient text-white"},{default:a(()=>[me,e(G),A(e(p,{icon:"close",flat:"",dense:"",round:"",class:"text-white"},null,512),[[R]])]),_:1}),e(N),e(b,{class:"q-my-md q-mx-md q-gutter-y-md"},{default:a(()=>[o("div",pe,[_e,e(x,{modelValue:i.name,"onUpdate:modelValue":u[0]||(u[0]=l=>i.name=l),outlined:"",dense:""},null,8,["modelValue"])]),o("div",ge,[we,e(x,{modelValue:i.code,"onUpdate:modelValue":u[1]||(u[1]=l=>i.code=l),outlined:"",dense:"",rules:[l=>l&&l.length>0],mask:"##-AAAAAAAAAAAAAAAAAAAAA",placeholder:"00-SAMPLE"},null,8,["modelValue","rules"])]),o("div",ve,[fe,o("div",ye,[e(k,{modelValue:i.category,"onUpdate:modelValue":u[2]||(u[2]=l=>i.category=l),options:f,"hide-dropdown-icon":"",outlined:"",dense:"",behavior:"menu",rules:[l=>l&&l.length>0]},null,8,["modelValue","rules"])])]),o("div",be,[he,o("div",qe,[e(k,{modelValue:i.unit,"onUpdate:modelValue":u[3]||(u[3]=l=>i.unit=l),options:_,"hide-dropdown-icon":"",outlined:"",dense:"",behavior:"menu"},null,8,["modelValue"])])])]),_:1}),e(E,{class:"row q-ma-md",align:"right"},{default:a(()=>[A(e(p,{class:"btn-cancel glossy",color:"negative",label:"Cancel"},null,512),[[R]]),e(p,{class:"btn-create glossy",color:"positive",label:"Save",loading:m.loading,onClick:g},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ae=V(Me,[["__scopeId","data-v-25e52251"]]);const K=s=>(U("data-v-1f06c38a"),s=s(),I(),s),xe=K(()=>o("div",{class:"text-h5 q-mb-xs"},"Confirm Deletion",-1)),Re=K(()=>o("p",{class:"text-body2 q-mb-none"}," Are you sure you want to delete this item? This action cannot be undone. ",-1)),Ve={__name:"RawMaterialsTableDelete",props:["delete"],setup(s){const v=D(),r=y(!1),f=()=>{r.value=!0},c=s.delete.row,i=async()=>{try{await v.deleteRawMaterials(c.id)}catch(n){W.create({message:`Failed to delete item: ${n.message}`,type:"negative"})}r.value=!1};return(n,g)=>(w(),h(S,null,[e(p,{onClick:f,color:"negative",icon:"delete",size:"sm",flat:"",round:"",dense:"","aria-label":"Delete"},{default:a(()=>[e(J,{class:"bg-negative",delay:200},{default:a(()=>[M("Delete")]),_:1})]),_:1}),e(z,{modelValue:r.value,"onUpdate:modelValue":g[0]||(g[0]=m=>r.value=m),persistent:""},{default:a(()=>[e(P,{class:"q-pa-md q-rounded q-elevate-2 bg-white text-grey-9"},{default:a(()=>[e(b,{class:"q-pt-none q-pb-sm"},{default:a(()=>[xe,Re]),_:1}),e(N,{class:"q-mb-md"}),e(E,{align:"right",class:"q-pt-none"},{default:a(()=>[A(e(p,{flat:"",dense:"",label:"Cancel",color:"primary",class:"q-mr-sm"},null,512),[[R]]),e(p,{dense:"",label:"Delete",color:"negative",onClick:i,class:"q-btn-rounded q-px-lg"})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};var Ce=V(Ve,[["__scopeId","data-v-1f06c38a"]]);const Qe=s=>(U("data-v-4e1ea74f"),s=s(),I(),s),$e={align:"left"},ke={key:0,class:"spinner-wrapper"},Se={key:1},Ue={key:0,class:"data-error"},Ie=Qe(()=>o("div",{class:"q-ml-sm text-h6"},"No data available",-1)),De={class:"row justify-center q-gutter-x-md"},Te={__name:"RawMaterialsTable",setup(s){const{getRawMaterialBadgeCategoryColor:v,getRawMaterialsBadgeUnitColor:r}=le(),f=D(),_=B(()=>f.rawMaterials),c=y(!0),i=y(""),n=y(!1),g=y({rowsPerPage:0}),m=B(()=>i.value?_.value.filter(t=>t.name.toLowerCase().includes(i.value.toLowerCase())):_.value);X(async()=>{await u()});const u=async()=>{try{c.value=!0,await f.fetchRawMaterials(),console.time("rawMaterialsRow",_.value),_.value.length||(n.value=!0)}catch{n.value=!0}finally{c.value=!1}};Y(i,async t=>{c.value=!0,await new Promise(q=>setTimeout(q,1e3)),c.value=!1,n.value=m.value.length===0});const l=[{name:"name",label:"Raw Materials Name",align:"left",field:t=>t.code,format:t=>`${t}`,sortable:!0},{name:"code",label:"Code",align:"left",field:"code",sortable:!0},{name:"category",label:"Category",align:"left",field:"category"},{name:"unit",label:"Unit",align:"left",field:"unit"},{name:"action",label:"Action",align:"center"}];return(t,q)=>(w(),h(S,null,[o("div",$e,[e(x,{modelValue:i.value,"onUpdate:modelValue":q[0]||(q[0]=d=>i.value=d),class:"q-pb-lg q-pl-sm dynamic-width",outlined:"",placeholder:"Search",flat:"",rounded:"",dense:"",debounce:"100"},{append:a(()=>[e(F,{name:"search"})]),_:1},8,["modelValue"])]),c.value?(w(),h("div",ke,[e(ae,{size:"50px",color:"primary"})])):(w(),h("div",Se,[m.value.length===0?(w(),h("div",Ue,[e(F,{name:"warning",color:"warning",size:"4em"}),Ie])):(w(),O(te,{key:1,class:"table-container elegant-container sticky-header",filter:i.value,"virtual-scroll-sticky-size-start":48,flat:"",style:{height:"500px"},columns:l,rows:m.value,"row-key":"name",pagination:g.value,"onUpdate:pagination":q[1]||(q[1]=d=>g.value=d),"rows-per-page-options":[0],"hide-bottom":""},{"body-cell-name":a(d=>[e(Q,{key:"name",props:d},{default:a(()=>[M(T(d.row.code),1)]),_:2},1032,["props"])]),"body-cell-category":a(d=>[e(Q,{key:"name",props:d},{default:a(()=>[e($,{color:j(v)(d.row.category)},{default:a(()=>[M(T(d.row.category),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-unit":a(d=>[e(Q,{key:"name",props:d},{default:a(()=>[e($,{color:j(r)(d.row.unit)},{default:a(()=>[M(T(d.row.unit),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-action":a(d=>[e(Q,{props:d},{default:a(()=>[o("div",De,[e(Ae,{edit:d},null,8,["edit"]),e(Ce,{delete:d},null,8,["delete"])])]),_:2},1032,["props"])]),_:1},8,["filter","rows","pagination"]))]))],64))}};var Pe=V(Te,[["__scopeId","data-v-4e1ea74f"]]);const Ne={class:"text-h6"},Ee={class:"q-gutter-x-sm"},ze={align:"right"},Be={__name:"RawMaterialsPage",setup(s){return(v,r)=>(w(),O(Z,{class:"elegant-container",flat:""},{default:a(()=>[e(b,{class:"row justify-between"},{default:a(()=>[o("div",Ne,[o("div",Ee,[e($,{label:"Ingredients",color:"teal"}),e($,{label:"Packaging Materials",color:"brown-6"})])]),o("div",ze,[e(ce)])]),_:1}),e(b,null,{default:a(()=>[e(Pe)]),_:1}),e(b)]),_:1}))}};var ua=V(Be,[["__scopeId","data-v-4e0ffa36"]]);export{ua as default};
