import{d as I,r as u,c as M,z as T,o as _,a3 as h,f as c,L as U,e as z,w as p,J as a,$ as o,O as R,R as Y,I as N}from"./index.4d4f3ecb.js";import{Q as $}from"./QPage.8462bf79.js";import{Q as q}from"./QSpinnerDots.6f849adf.js";import{Q as S,a as F}from"./QTable.369eb731.js";import{api as J}from"./axios.80bae863.js";import{q as O}from"./date.81fc4cd9.js";import{_ as E}from"./plugin-vue_export-helper.21dcd24c.js";import"./QVirtualScroll.c9bd7b6e.js";import"./QList.e416c58d.js";import"./use-virtual-scroll.c1f0c884.js";import"./QSelect.680051d8.js";import"./QItemLabel.8a37f99f.js";import"./QChip.fb33ffda.js";import"./QItem.8d77583a.js";import"./QMenu.0a85cb0a.js";import"./position-engine.4770ad56.js";import"./selection.0b6f0b1a.js";const P=I("history-log",()=>{const s=u(null),l=u([]);return{historyLog:s,historyLogs:l,fetchHistoryLogs:async()=>{const m=await J.get("/api/history-logs");l.value=m.data}}});const g=s=>(R("data-v-bee6f362"),s=s(),Y(),s),V={key:0,class:"spinner-wrapper"},j={key:1},W={key:0,class:"data-error"},G=g(()=>a("div",{class:"q-ml-sm text-h6"},"No data available",-1)),K={class:"row q-gutter-sm"},X={class:"text-italic text-capitalize text-bold text-primary"},Z={class:"text-italic text-capitalize text-bold text-red-6"},ee={class:"text-lowercase"},te={class:"text-bold text-capitalize text-teal-5"},ae=g(()=>a("div",null,"from",-1)),oe={class:"text-bold text-purple-14"},se=g(()=>a("div",null,"to",-1)),ie={class:"text-bold text-positive"},re={class:"text-uppercase text-bold"},ne={__name:"TableComponents",setup(s){const l=P(),i=M(()=>l.historyLogs);console.log("historyLogsData",i.value);const m=u(!0),y=u(!1);T(async()=>B());const B=async()=>{try{m.value=!0,await l.fetchHistoryLogs(),console.log("historyLogsData",i.value),i.value.length||(y.value=!0)}catch(e){console.error("Error fetch history log",e),y.value=!0}finally{m.value=!1}},C=e=>e?e.split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join(" "):"",Q=e=>{const r=d=>d?d.charAt(0).toUpperCase()+d.slice(1).toLowerCase():"",t=e.firstname?r(e.firstname):"No Firstname",n=e.middlename?r(e.middlename).charAt(0)+".":"",f=e.lastname?r(e.lastname):"No Lastname";return`${t} ${n} ${f}`},A=e=>O.formatDate(e,"MMM DD, YYYY || hh:mm A"),H=[{name:"report_id",label:"Report ID",align:"center",field:"report_id",sortable:!0},{name:"timestamp",label:"Timestamp",align:"left",field:e=>A(e.created_at),sortable:!0},{name:"action",label:"Action",align:"left",field:e=>C((e==null?void 0:e.action)||"undefined"),sortable:!0},{name:"details",label:"Details",align:"center",sortable:!1}];return u([{id:1,timestamp:"2025-04-23 10:15:32",report_id:"1",designation:"Branch 1",type_of_report:"Sales Report",user:"John Doe",action:"Updated",details:"User updated AM sales report bread product Francis beginnings from 25 pcs to 30 pcs"},{id:2,timestamp:"2025-04-23 10:17:45",report_id:"2",designation:"Branch 2",type_of_report:"Bakers Report",user:"JOhn Doe",action:"Updated",details:"User updated AM bakers report UBE YOYO Recipe kilo from 1 kg/s to 2 kg/s "},{id:3,timestamp:"2025-04-23 10:20:02",report_id:"3",designation:"Warehouse",type_of_report:"Bakers Report",user:"Jame Smith",action:"Logout",details:"Session ended"}]),(e,r)=>m.value?(_(),h("div",V,[c(q,{size:"50px",color:"primary"})])):(_(),h("div",j,[i.value.length===0?(_(),h("div",W,[c(U,{name:"warning",color:"warning",size:"4em"}),G])):(_(),z(F,{key:1,class:"table-container elegant-container sticky-header","virtual-scroll-sticky-size-start":48,flat:"",style:{height:"500px"},"rows-per-page-options":[0],"hide-bottom":"",title:"Activity Logs",rows:i.value,columns:H,"row-key":"id"},{"body-cell-details":p(t=>[c(S,{props:t},{default:p(()=>{var n,f,d,v,b,x,L,k,w,D;return[a("div",K,[a("div",X,o(Q((f=(n=t.row)==null?void 0:n.user_id)==null?void 0:f.employee)||"undefined"),1),a("div",null,o(((d=t.row)==null?void 0:d.action)||"undefined"),1),a("div",Z,o(((b=(v=t.row)==null?void 0:v.designation)==null?void 0:b.name)||"undefined"),1),a("div",ee,o(((x=t.row)==null?void 0:x.type_of_report)||"undefined"),1),a("div",te,o(((L=t.row)==null?void 0:L.name)||"undefined"),1),a("div",null,o(((k=t.row)==null?void 0:k.updated_field)||"undefined"),1),ae,a("div",oe,o(((w=t.row)==null?void 0:w.original_data)||"undefined"),1),se,a("div",ie,o(((D=t.row)==null?void 0:D.updated_data)||"undefined"),1)])]}),_:2},1032,["props"])]),"body-cell-action":p(t=>[c(S,{props:t},{default:p(()=>{var n;return[a("div",re,o(((n=t.row)==null?void 0:n.action)||"undefined"),1)]}),_:2},1032,["props"])]),_:1},8,["rows"]))]))}};var le=E(ne,[["__scopeId","data-v-bee6f362"]]);const Se={__name:"HistoryLogPage",setup(s){return(l,i)=>(_(),z($,{class:"elegant-container",flat:""},{default:p(()=>[c(N,null,{default:p(()=>[c(le)]),_:1})]),_:1}))}};export{Se as default};
